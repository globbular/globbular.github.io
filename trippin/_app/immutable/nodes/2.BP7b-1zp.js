import{C as Sn,s as an,p as Ft,k as le,n as Et,i as y,e as E,t as Ae,b as te,d as S,f as H,h as Oe,j as ne,v as h,l as p,S as Ze,T as zr,x as rn,c as xo,U as Qt,V as Ye,W as Xt,X as $t,Y as Ln,u as zo,g as Ho,a as Uo,Z as Lt,_ as qo,$ as dt,m as $e,a0 as Dl,a1 as Tt,a2 as da,o as Jn,w as mr,E as xn,a3 as Qn,D as Wo,a4 as El,a5 as Sl,a6 as Cl,a7 as pr,a8 as Zr,a9 as Hr,aa as Tl,ab as cr,ac as Al}from"../chunks/scheduler.OewxY0I8.js";import{t as lt,S as un,i as cn,f as Rn,b as Vt,d as xt,m as zt,a as ht,e as Ht,g as zn,c as Hn,h as ha}from"../chunks/index.C1a3JXG5.js";import{w as jr,b as Ol}from"../chunks/entry.Bl5tcv4_.js";import{_ as Il}from"../chunks/preload-helper.D6kgxu3v.js";import{p as Pl}from"../chunks/stores.CqSVjK7b.js";function Qe(i){return(i==null?void 0:i.length)!==void 0?i:Array.from(i)}function Ur(i,e){i.d(1),e.delete(i.key)}function qr(i,e,n,r,l,c,u,m,_,v,g,w){let O=i.length,K=c.length,ee=O;const W={};for(;ee--;)W[i[ee].key]=ee;const U=[],R=new Map,T=new Map,q=[];for(ee=K;ee--;){const $=w(l,c,ee),pe=n($);let oe=u.get(pe);oe?q.push(()=>oe.p($,e)):(oe=v(pe,$),oe.c()),R.set(pe,U[ee]=oe),pe in W&&T.set(pe,Math.abs(ee-W[pe]))}const k=new Set,re=new Set;function ie($){lt($,1),$.m(m,g),u.set($.key,$),g=$.first,K--}for(;O&&K;){const $=U[K-1],pe=i[O-1],oe=$.key,De=pe.key;$===pe?(g=$.first,O--,K--):R.has(De)?!u.has(oe)||k.has(oe)?ie($):re.has(De)?O--:T.get(oe)>T.get(De)?(re.add(oe),ie($)):(k.add(De),O--):(_(pe,u),O--)}for(;O--;){const $=i[O];R.has($.key)||_($,u)}for(;K;)ie(U[K-1]);return Sn(q),U}function pa(i){let e,n,r=("00"+i[0].getHours()).slice(-2)+"",l,c,u,m=("00"+i[0].getMinutes()).slice(-2)+"",_,v,g,w,O=i[1]!=="minute"&&ma(i);return{c(){e=E("div"),n=E("span"),l=Ae(r),c=Ae(`:
		`),u=E("span"),_=Ae(m),v=te(),O&&O.c(),this.h()},l(K){e=S(K,"DIV",{class:!0,role:!0});var ee=H(e);n=S(ee,"SPAN",{role:!0,"aria-label":!0,tabindex:!0,contenteditable:!0,inputmode:!0,class:!0});var W=H(n);l=Oe(W,r),W.forEach(y),c=Oe(ee,`:
		`),u=S(ee,"SPAN",{role:!0,"aria-label":!0,tabindex:!0,contenteditable:!0,inputmode:!0,class:!0});var U=H(u);_=Oe(U,m),U.forEach(y),v=ne(ee),O&&O.l(ee),ee.forEach(y),this.h()},h(){h(n,"role","spinbutton"),h(n,"aria-label","Hours"),h(n,"tabindex","0"),h(n,"contenteditable",""),h(n,"inputmode","numeric"),h(n,"class","svelte-mzlxg7"),h(u,"role","spinbutton"),h(u,"aria-label","Minutes"),h(u,"tabindex","0"),h(u,"contenteditable",""),h(u,"inputmode","numeric"),h(u,"class","svelte-mzlxg7"),h(e,"class","time-picker svelte-mzlxg7"),h(e,"role","none")},m(K,ee){le(K,e,ee),p(e,n),p(n,l),i[6](n),p(e,c),p(e,u),p(u,_),i[7](u),p(e,v),O&&O.m(e,null),g||(w=[Ze(n,"keydown",i[3]),Ze(n,"input",i[4]),Ze(n,"focus",Wr),Ze(u,"keydown",i[3]),Ze(u,"input",i[4]),Ze(u,"focus",Wr),Ze(e,"mousedown",i[10])],g=!0)},p(K,ee){ee&1&&r!==(r=("00"+K[0].getHours()).slice(-2)+"")&&zr(l,r),ee&1&&m!==(m=("00"+K[0].getMinutes()).slice(-2)+"")&&zr(_,m),K[1]!=="minute"?O?O.p(K,ee):(O=ma(K),O.c(),O.m(e,null)):O&&(O.d(1),O=null)},d(K){K&&y(e),i[6](null),i[7](null),O&&O.d(),g=!1,Sn(w)}}}function ma(i){let e,n,r=("00"+i[0].getSeconds()).slice(-2)+"",l,c,u,m,_,v=i[1]!=="second"&&va(i);return{c(){e=Ae(":"),n=E("span"),l=Ae(r),c=te(),v&&v.c(),u=Ft(),this.h()},l(g){e=Oe(g,":"),n=S(g,"SPAN",{role:!0,"aria-label":!0,tabindex:!0,contenteditable:!0,inputmode:!0,class:!0});var w=H(n);l=Oe(w,r),w.forEach(y),c=ne(g),v&&v.l(g),u=Ft(),this.h()},h(){h(n,"role","spinbutton"),h(n,"aria-label","Seconds"),h(n,"tabindex","0"),h(n,"contenteditable",""),h(n,"inputmode","numeric"),h(n,"class","svelte-mzlxg7")},m(g,w){le(g,e,w),le(g,n,w),p(n,l),i[8](n),le(g,c,w),v&&v.m(g,w),le(g,u,w),m||(_=[Ze(n,"keydown",i[3]),Ze(n,"input",i[4]),Ze(n,"focus",Wr)],m=!0)},p(g,w){w&1&&r!==(r=("00"+g[0].getSeconds()).slice(-2)+"")&&zr(l,r),g[1]!=="second"?v?v.p(g,w):(v=va(g),v.c(),v.m(u.parentNode,u)):v&&(v.d(1),v=null)},d(g){g&&(y(e),y(n),y(c),y(u)),i[8](null),v&&v.d(g),m=!1,Sn(_)}}}function va(i){let e,n,r=("000"+i[0].getMilliseconds()).slice(-3)+"",l,c,u;return{c(){e=Ae("."),n=E("span"),l=Ae(r),this.h()},l(m){e=Oe(m,"."),n=S(m,"SPAN",{role:!0,"aria-label":!0,tabindex:!0,contenteditable:!0,inputmode:!0,class:!0});var _=H(n);l=Oe(_,r),_.forEach(y),this.h()},h(){h(n,"role","spinbutton"),h(n,"aria-label","Milliseconds"),h(n,"tabindex","0"),h(n,"contenteditable",""),h(n,"inputmode","numeric"),h(n,"class","svelte-mzlxg7")},m(m,_){le(m,e,_),le(m,n,_),p(n,l),i[9](n),c||(u=[Ze(n,"keydown",i[3]),Ze(n,"input",i[4]),Ze(n,"focus",Wr)],c=!0)},p(m,_){_&1&&r!==(r=("000"+m[0].getMilliseconds()).slice(-3)+"")&&zr(l,r)},d(m){m&&(y(e),y(n)),i[9](null),c=!1,Sn(u)}}}function Ml(i){let e,n=i[1]&&pa(i);return{c(){n&&n.c(),e=Ft()},l(r){n&&n.l(r),e=Ft()},m(r,l){n&&n.m(r,l),le(r,e,l)},p(r,[l]){r[1]?n?n.p(r,l):(n=pa(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:Et,o:Et,d(r){r&&y(e),n&&n.d(r)}}}function Vr(i){const e=window.getSelection(),n=document.createRange();n.selectNodeContents(i),e==null||e.removeAllRanges(),e==null||e.addRange(n)}function Ll(i,e,n){return n&&i<0?e:n&&i>e?0:Math.max(0,Math.min(e,i))}function Ei(i){const e=i.getAttribute("aria-label");if(e==="Hours")return{label:e,len:2,max:23};if(e==="Minutes")return{label:e,len:2,max:59};if(e==="Seconds")return{label:e,len:2,max:59};if(e==="Milliseconds")return{label:e,len:3,max:999};throw new Error("Invalid label "+e)}function Si(i,e){return parseInt(i.replace(/[^\d]/g,"").slice(-e))}function Wr(i){Vr(i.currentTarget)}function Rl(i,e,n){let{browseDate:r}=e,{timePrecision:l}=e,{setTime:c}=e,u=[];function m(R){if(R.key==="ArrowUp"||R.key==="ArrowDown"){const T=_(R.currentTarget),q=R.key==="ArrowUp"?1:-1;g(R.currentTarget,T+q,!0),R.preventDefault(),Vr(R.currentTarget)}else if(R.key==="ArrowLeft"||R.key==="ArrowRight"||":;-,.".includes(R.key)){const T=u.indexOf(R.currentTarget),q=R.key==="ArrowLeft"?-1:1,k=u[T+q];R.preventDefault(),k&&(k.focus(),Vr(k))}}function _(R){const T=Ei(R).label;return T==="Hours"?r.getHours():T==="Minutes"?r.getMinutes():T==="Seconds"?r.getSeconds():r.getMilliseconds()}function v(R){const T=("00"+R.getHours()).slice(-2),q=("00"+R.getMinutes()).slice(-2),k=("00"+R.getSeconds()).slice(-2),re=("000"+R.getMilliseconds()).slice(-3);u[0]&&u[0].innerText!==T&&n(2,u[0].innerText=T,u),u[1]&&u[1].innerText!==q&&n(2,u[1].innerText=q,u),u[2]&&u[2].innerText!==k&&n(2,u[2].innerText=k,u),u[3]&&u[3].innerText!==re&&n(2,u[3].innerText=re,u)}function g(R,T,q=!1){const k=Ei(R);T=Ll(T,k.max,q),k.label==="Hours"?r.setHours(T):k.label==="Minutes"?r.setMinutes(T):k.label==="Seconds"?r.setSeconds(T):k.label==="Milliseconds"&&r.setMilliseconds(T),n(0,r=c(r)),v(r)}function w(R){const T=R,q=Ei(T.currentTarget);let k;if(T.inputType==="insertText"){const re="000"+_(T.currentTarget);k=Si(re+T.currentTarget.innerText,q.len),k>q.max&&T.data&&(k=Si(T.data,q.len))}else k=Si("000"+T.currentTarget.innerText,q.len);g(T.currentTarget,k),Vr(T.currentTarget)}function O(R){rn[R?"unshift":"push"](()=>{u[0]=R,n(2,u)})}function K(R){rn[R?"unshift":"push"](()=>{u[1]=R,n(2,u)})}function ee(R){rn[R?"unshift":"push"](()=>{u[2]=R,n(2,u)})}function W(R){rn[R?"unshift":"push"](()=>{u[3]=R,n(2,u)})}const U=R=>{R.target instanceof HTMLElement&&R.target.tagName==="SPAN"&&(R.target.focus(),R.preventDefault())};return i.$$set=R=>{"browseDate"in R&&n(0,r=R.browseDate),"timePrecision"in R&&n(1,l=R.timePrecision),"setTime"in R&&n(5,c=R.setTime)},i.$$.update=()=>{i.$$.dirty&1&&v(r)},[r,l,u,m,w,c,O,K,ee,W,U]}class Nl extends un{constructor(e){super(),cn(this,e,Rl,Ml,an,{browseDate:0,timePrecision:1,setTime:5})}}function Bl(i){return i%4===0&&i%100!==0||i%400===0}function vr(i,e){return[31,Bl(i)?29:28,31,30,31,30,31,31,30,31,30,31][e]}function ga(i,e){let n="";if(i)for(const r of e)typeof r=="string"?n+=r:n+=r.toString(i);return n}function Ci(i,e){const n=vr(i,e),r=[];for(let l=0;l<n;l++)r.push({year:i,month:e,number:l+1});return r}function Kl(i,e){const n=i.getFullYear(),r=i.getMonth(),l=new Date(n,r,1).getDay();let c=[];const u=(l-e+7)%7;if(u>0){let g=r-1,w=n;g===-1&&(g=11,w=n-1),c=Ci(w,g).slice(-u)}c=c.concat(Ci(n,r));let m=r+1,_=n;m===12&&(m=0,_=n+1);const v=42-c.length;return c=c.concat(Ci(_,m).slice(0,v)),c}function Fl(){return{weekdays:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekStartsOn:1}}function Go(i){const e=Fl();return typeof i.weekStartsOn=="number"&&(e.weekStartsOn=i.weekStartsOn),i.months&&(e.months=i.months),i.shortMonths&&(e.shortMonths=i.shortMonths),i.weekdays&&(e.weekdays=i.weekdays),e}function _a(i,e,n){const r=i.slice();return r[36]=e[n],r[38]=n,r}function ya(i,e,n){const r=i.slice();return r[39]=e[n],r}function ba(i,e,n){const r=i.slice();return r[36]=e[n],r[43]=n,r}function wa(i,e,n){const r=i.slice();return r[44]=e[n],r}function ka(i,e,n){const r=i.slice();return r[44]=e[n],r}function Da(i,e,n){const r=i.slice();return r[49]=e[n],r[43]=n,r}function Ea(i,e,n){const r=i.slice();return r[49]=e[n],r[43]=n,r}function Sa(i){let e,n=i[49]+"",r,l;return{c(){e=E("option"),r=Ae(n),this.h()},l(c){e=S(c,"OPTION",{});var u=H(e);r=Oe(u,n),u.forEach(y),this.h()},h(){e.disabled=l=new Date(i[9],i[43],vr(i[9],i[43]),23,59,59,999)<i[2]||new Date(i[9],i[43])>i[3],e.__value=i[43],dt(e,e.__value)},m(c,u){le(c,e,u),p(e,r)},p(c,u){u[0]&32&&n!==(n=c[49]+"")&&$e(r,n),u[0]&588&&l!==(l=new Date(c[9],c[43],vr(c[9],c[43]),23,59,59,999)<c[2]||new Date(c[9],c[43])>c[3])&&(e.disabled=l)},d(c){c&&y(e)}}}function Ca(i){let e,n=i[49]+"",r,l;return{c(){e=E("option"),r=Ae(n),this.h()},l(c){e=S(c,"OPTION",{});var u=H(e);r=Oe(u,n),u.forEach(y),this.h()},h(){e.__value=i[43],dt(e,e.__value),e.selected=l=i[43]===i[8]},m(c,u){le(c,e,u),p(e,r)},p(c,u){u[0]&32&&n!==(n=c[49]+"")&&$e(r,n),u[0]&256&&l!==(l=c[43]===c[8])&&(e.selected=l)},d(c){c&&y(e)}}}function Ta(i){let e,n=i[44]+"",r,l;return{c(){e=E("option"),r=Ae(n),this.h()},l(c){e=S(c,"OPTION",{});var u=H(e);r=Oe(u,n),u.forEach(y),this.h()},h(){e.__value=l=i[44],dt(e,e.__value)},m(c,u){le(c,e,u),p(e,r)},p(c,u){u[0]&64&&n!==(n=c[44]+"")&&$e(r,n),u[0]&64&&l!==(l=c[44])&&(e.__value=l,dt(e,e.__value))},d(c){c&&y(e)}}}function Aa(i){let e,n=i[44]+"",r,l,c;return{c(){e=E("option"),r=Ae(n),this.h()},l(u){e=S(u,"OPTION",{});var m=H(e);r=Oe(m,n),m.forEach(y),this.h()},h(){e.__value=l=i[44],dt(e,e.__value),e.selected=c=i[44]===i[4].getFullYear()},m(u,m){le(u,e,m),p(e,r)},p(u,m){m[0]&64&&n!==(n=u[44]+"")&&$e(r,n),m[0]&64&&l!==(l=u[44])&&(e.__value=l,dt(e,e.__value)),m[0]&80&&c!==(c=u[44]===u[4].getFullYear())&&(e.selected=c)},d(u){u&&y(e)}}}function jl(i){let e,n=i[5].weekdays[i[5].weekStartsOn+i[43]-7]+"",r;return{c(){e=E("div"),r=Ae(n),this.h()},l(l){e=S(l,"DIV",{class:!0});var c=H(e);r=Oe(c,n),c.forEach(y),this.h()},h(){h(e,"class","header-cell svelte-w239uu")},m(l,c){le(l,e,c),p(e,r)},p(l,c){c[0]&32&&n!==(n=l[5].weekdays[l[5].weekStartsOn+l[43]-7]+"")&&$e(r,n)},d(l){l&&y(e)}}}function Vl(i){let e,n=i[5].weekdays[i[5].weekStartsOn+i[43]]+"",r;return{c(){e=E("div"),r=Ae(n),this.h()},l(l){e=S(l,"DIV",{class:!0});var c=H(e);r=Oe(c,n),c.forEach(y),this.h()},h(){h(e,"class","header-cell svelte-w239uu")},m(l,c){le(l,e,c),p(e,r)},p(l,c){c[0]&32&&n!==(n=l[5].weekdays[l[5].weekStartsOn+l[43]]+"")&&$e(r,n)},d(l){l&&y(e)}}}function Oa(i){let e;function n(c,u){return c[43]+c[5].weekStartsOn<7?Vl:jl}let r=n(i),l=r(i);return{c(){l.c(),e=Ft()},l(c){l.l(c),e=Ft()},m(c,u){l.m(c,u),le(c,e,u)},p(c,u){r===(r=n(c))&&l?l.p(c,u):(l.d(1),l=r(c),l&&(l.c(),l.m(e.parentNode,e)))},d(c){c&&y(e),l.d(c)}}}function Ia(i){let e,n,r=i[39].number+"",l,c,u;function m(){return i[27](i[39])}return{c(){e=E("div"),n=E("span"),l=Ae(r),this.h()},l(_){e=S(_,"DIV",{class:!0});var v=H(e);n=S(v,"SPAN",{class:!0});var g=H(n);l=Oe(g,r),g.forEach(y),v.forEach(y),this.h()},h(){h(n,"class","svelte-w239uu"),h(e,"class","cell svelte-w239uu"),Tt(e,"disabled",!Mi(i[39],i[2],i[3])),Tt(e,"selected",i[0]&&i[39].year===i[0].getFullYear()&&i[39].month===i[0].getMonth()&&i[39].number===i[0].getDate()),Tt(e,"today",i[39].year===i[11].getFullYear()&&i[39].month===i[11].getMonth()&&i[39].number===i[11].getDate()),Tt(e,"other-month",i[39].month!==i[8])},m(_,v){le(_,e,v),p(e,n),p(n,l),c||(u=Ze(e,"click",m),c=!0)},p(_,v){i=_,v[0]&128&&r!==(r=i[39].number+"")&&$e(l,r),v[0]&140&&Tt(e,"disabled",!Mi(i[39],i[2],i[3])),v[0]&129&&Tt(e,"selected",i[0]&&i[39].year===i[0].getFullYear()&&i[39].month===i[0].getMonth()&&i[39].number===i[0].getDate()),v[0]&2176&&Tt(e,"today",i[39].year===i[11].getFullYear()&&i[39].month===i[11].getMonth()&&i[39].number===i[11].getDate()),v[0]&384&&Tt(e,"other-month",i[39].month!==i[8])},d(_){_&&y(e),c=!1,u()}}}function Pa(i){let e,n=Qe(i[7].slice(i[38]*7,i[38]*7+7)),r=[];for(let l=0;l<n.length;l+=1)r[l]=Ia(ya(i,n,l));return{c(){e=E("div");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=S(l,"DIV",{class:!0});var c=H(e);for(let u=0;u<r.length;u+=1)r[u].l(c);c.forEach(y),this.h()},h(){h(e,"class","week svelte-w239uu")},m(l,c){le(l,e,c);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null)},p(l,c){if(c[0]&18829){n=Qe(l[7].slice(l[38]*7,l[38]*7+7));let u;for(u=0;u<n.length;u+=1){const m=ya(l,n,u);r[u]?r[u].p(m,c):(r[u]=Ia(m),r[u].c(),r[u].m(e,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=n.length}},d(l){l&&y(e),Lt(r,l)}}}function xl(i){let e,n,r,l,c='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="svelte-w239uu"><path d="M5 3l3.057-3 11.943 12-11.943 12-3.057-3 9-9z" transform="rotate(180, 12, 12)"></path></svg>',u,m,_,v,g,w,O,K,ee,W,U,R,T,q,k,re,ie,$,pe='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="svelte-w239uu"><path d="M5 3l3.057-3 11.943 12-11.943 12-3.057-3 9-9z"></path></svg>',oe,De,ge,ce,ye,se,Pe,Ce,Y,ue,C=Qe(i[5].months),M=[];for(let P=0;P<C.length;P+=1)M[P]=Sa(Ea(i,C,P));let G=Qe(i[5].months),he=[];for(let P=0;P<G.length;P+=1)he[P]=Ca(Da(i,G,P));let A=Qe(i[6]),_e=[];for(let P=0;P<A.length;P+=1)_e[P]=Ta(ka(i,A,P));let xe=Qe(i[6]),we=[];for(let P=0;P<xe.length;P+=1)we[P]=Aa(wa(i,xe,P));let qe=Qe(Array(7)),Ve=[];for(let P=0;P<qe.length;P+=1)Ve[P]=Oa(ba(i,qe,P));let Ee=Qe(Array(6)),J=[];for(let P=0;P<Ee.length;P+=1)J[P]=Pa(_a(i,Ee,P));function de(P){i[28](P)}let Se={timePrecision:i[1],setTime:i[10]};i[4]!==void 0&&(Se.browseDate=i[4]),ye=new Nl({props:Se}),rn.push(()=>Rn(ye,"browseDate",de));const Ke=i[21].default,Ie=xo(Ke,i,i[20],null);return{c(){e=E("div"),n=E("div"),r=E("div"),l=E("button"),l.innerHTML=c,u=te(),m=E("div"),_=E("select");for(let P=0;P<M.length;P+=1)M[P].c();v=te(),g=E("select");for(let P=0;P<he.length;P+=1)he[P].c();w=te(),O=Qt("svg"),K=Qt("path"),ee=te(),W=E("div"),U=E("select");for(let P=0;P<_e.length;P+=1)_e[P].c();R=te(),T=E("select");for(let P=0;P<we.length;P+=1)we[P].c();q=te(),k=Qt("svg"),re=Qt("path"),ie=te(),$=E("button"),$.innerHTML=pe,oe=te(),De=E("div");for(let P=0;P<Ve.length;P+=1)Ve[P].c();ge=te();for(let P=0;P<J.length;P+=1)J[P].c();ce=te(),Vt(ye.$$.fragment),Pe=te(),Ie&&Ie.c(),this.h()},l(P){e=S(P,"DIV",{class:!0,tabindex:!0});var Ue=H(e);n=S(Ue,"DIV",{class:!0,tabindex:!0});var Le=H(n);r=S(Le,"DIV",{class:!0});var fe=H(r);l=S(fe,"BUTTON",{type:!0,class:!0,tabindex:!0,"data-svelte-h":!0}),Ye(l)!=="svelte-t4cock"&&(l.innerHTML=c),u=ne(fe),m=S(fe,"DIV",{class:!0});var We=H(m);_=S(We,"SELECT",{class:!0});var nt=H(_);for(let Xe=0;Xe<M.length;Xe+=1)M[Xe].l(nt);nt.forEach(y),v=ne(We),g=S(We,"SELECT",{class:!0,tabindex:!0});var ut=H(g);for(let Xe=0;Xe<he.length;Xe+=1)he[Xe].l(ut);ut.forEach(y),w=ne(We),O=Xt(We,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,class:!0});var At=H(O);K=Xt(At,"path",{d:!0,transform:!0}),H(K).forEach(y),At.forEach(y),We.forEach(y),ee=ne(fe),W=S(fe,"DIV",{class:!0});var _t=H(W);U=S(_t,"SELECT",{class:!0});var St=H(U);for(let Xe=0;Xe<_e.length;Xe+=1)_e[Xe].l(St);St.forEach(y),R=ne(_t),T=S(_t,"SELECT",{class:!0,tabindex:!0});var gt=H(T);for(let Xe=0;Xe<we.length;Xe+=1)we[Xe].l(gt);gt.forEach(y),q=ne(_t),k=Xt(_t,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,class:!0});var yt=H(k);re=Xt(yt,"path",{d:!0,transform:!0}),H(re).forEach(y),yt.forEach(y),_t.forEach(y),ie=ne(fe),$=S(fe,"BUTTON",{type:!0,class:!0,tabindex:!0,"data-svelte-h":!0}),Ye($)!=="svelte-1a006lp"&&($.innerHTML=pe),fe.forEach(y),oe=ne(Le),De=S(Le,"DIV",{class:!0});var Ot=H(De);for(let Xe=0;Xe<Ve.length;Xe+=1)Ve[Xe].l(Ot);Ot.forEach(y),ge=ne(Le);for(let Xe=0;Xe<J.length;Xe+=1)J[Xe].l(Le);ce=ne(Le),xt(ye.$$.fragment,Le),Pe=ne(Le),Ie&&Ie.l(Le),Le.forEach(y),Ue.forEach(y),this.h()},h(){h(l,"type","button"),h(l,"class","page-button svelte-w239uu"),h(l,"tabindex","-1"),h(_,"class","svelte-w239uu"),h(g,"class","dummy-select svelte-w239uu"),h(g,"tabindex","-1"),h(K,"d","M6 0l12 12-12 12z"),h(K,"transform","rotate(90, 12, 12)"),h(O,"xmlns","http://www.w3.org/2000/svg"),h(O,"width","24"),h(O,"height","24"),h(O,"viewBox","0 0 24 24"),h(O,"class","svelte-w239uu"),h(m,"class","dropdown month svelte-w239uu"),h(U,"class","svelte-w239uu"),h(T,"class","dummy-select svelte-w239uu"),h(T,"tabindex","-1"),h(re,"d","M6 0l12 12-12 12z"),h(re,"transform","rotate(90, 12, 12)"),h(k,"xmlns","http://www.w3.org/2000/svg"),h(k,"width","24"),h(k,"height","24"),h(k,"viewBox","0 0 24 24"),h(k,"class","svelte-w239uu"),h(W,"class","dropdown year svelte-w239uu"),h($,"type","button"),h($,"class","page-button svelte-w239uu"),h($,"tabindex","-1"),h(r,"class","top svelte-w239uu"),h(De,"class","header svelte-w239uu"),h(n,"class","tab-container svelte-w239uu"),h(n,"tabindex","-1"),h(e,"class","date-time-picker svelte-w239uu"),h(e,"tabindex","0")},m(P,Ue){le(P,e,Ue),p(e,n),p(n,r),p(r,l),p(r,u),p(r,m),p(m,_);for(let Le=0;Le<M.length;Le+=1)M[Le]&&M[Le].m(_,null);$t(_,i[8]),p(m,v),p(m,g);for(let Le=0;Le<he.length;Le+=1)he[Le]&&he[Le].m(g,null);p(m,w),p(m,O),p(O,K),p(r,ee),p(r,W),p(W,U);for(let Le=0;Le<_e.length;Le+=1)_e[Le]&&_e[Le].m(U,null);$t(U,i[9]),p(W,R),p(W,T);for(let Le=0;Le<we.length;Le+=1)we[Le]&&we[Le].m(T,null);p(W,q),p(W,k),p(k,re),p(r,ie),p(r,$),p(n,oe),p(n,De);for(let Le=0;Le<Ve.length;Le+=1)Ve[Le]&&Ve[Le].m(De,null);p(n,ge);for(let Le=0;Le<J.length;Le+=1)J[Le]&&J[Le].m(n,null);p(n,ce),zt(ye,n,null),p(n,Pe),Ie&&Ie.m(n,null),Ce=!0,Y||(ue=[Ze(l,"click",i[23]),Ze(_,"keydown",i[16]),Ze(_,"input",i[24]),Ze(U,"input",i[25]),Ze(U,"keydown",i[15]),Ze($,"click",i[26]),Ze(e,"focusout",i[22]),Ze(e,"keydown",i[17])],Y=!0)},p(P,Ue){if(Ue[0]&556){C=Qe(P[5].months);let fe;for(fe=0;fe<C.length;fe+=1){const We=Ea(P,C,fe);M[fe]?M[fe].p(We,Ue):(M[fe]=Sa(We),M[fe].c(),M[fe].m(_,null))}for(;fe<M.length;fe+=1)M[fe].d(1);M.length=C.length}if((!Ce||Ue[0]&256)&&$t(_,P[8]),Ue[0]&288){G=Qe(P[5].months);let fe;for(fe=0;fe<G.length;fe+=1){const We=Da(P,G,fe);he[fe]?he[fe].p(We,Ue):(he[fe]=Ca(We),he[fe].c(),he[fe].m(g,null))}for(;fe<he.length;fe+=1)he[fe].d(1);he.length=G.length}if(Ue[0]&64){A=Qe(P[6]);let fe;for(fe=0;fe<A.length;fe+=1){const We=ka(P,A,fe);_e[fe]?_e[fe].p(We,Ue):(_e[fe]=Ta(We),_e[fe].c(),_e[fe].m(U,null))}for(;fe<_e.length;fe+=1)_e[fe].d(1);_e.length=A.length}if((!Ce||Ue[0]&576)&&$t(U,P[9]),Ue[0]&80){xe=Qe(P[6]);let fe;for(fe=0;fe<xe.length;fe+=1){const We=wa(P,xe,fe);we[fe]?we[fe].p(We,Ue):(we[fe]=Aa(We),we[fe].c(),we[fe].m(T,null))}for(;fe<we.length;fe+=1)we[fe].d(1);we.length=xe.length}if(Ue[0]&32){qe=Qe(Array(7));let fe;for(fe=0;fe<qe.length;fe+=1){const We=ba(P,qe,fe);Ve[fe]?Ve[fe].p(We,Ue):(Ve[fe]=Oa(We),Ve[fe].c(),Ve[fe].m(De,null))}for(;fe<Ve.length;fe+=1)Ve[fe].d(1);Ve.length=qe.length}if(Ue[0]&18829){Ee=Qe(Array(6));let fe;for(fe=0;fe<Ee.length;fe+=1){const We=_a(P,Ee,fe);J[fe]?J[fe].p(We,Ue):(J[fe]=Pa(We),J[fe].c(),J[fe].m(n,ce))}for(;fe<J.length;fe+=1)J[fe].d(1);J.length=Ee.length}const Le={};Ue[0]&2&&(Le.timePrecision=P[1]),!se&&Ue[0]&16&&(se=!0,Le.browseDate=P[4],Ln(()=>se=!1)),ye.$set(Le),Ie&&Ie.p&&(!Ce||Ue[0]&1048576)&&zo(Ie,Ke,P,P[20],Ce?Uo(Ke,P[20],Ue,null):Ho(P[20]),null)},i(P){Ce||(lt(ye.$$.fragment,P),lt(Ie,P),Ce=!0)},o(P){ht(ye.$$.fragment,P),ht(Ie,P),Ce=!1},d(P){P&&y(e),Lt(M,P),Lt(he,P),Lt(_e,P),Lt(we,P),Lt(Ve,P),Lt(J,P),Ht(ye),Ie&&Ie.d(P),Y=!1,Sn(ue)}}}function En(i){return new Date(i.getTime())}function Gr(i,e,n){return i>n?En(n):i<e?En(e):En(i)}function Ti(i,e,n){const r=Gr(i,e,n);return r.getTime()!==i.getTime()&&(i=new Date(r.getFullYear(),r.getMonth(),r.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()),i=Gr(i,e,n)),i}function Ma(i,e){let n=[];for(let r=i.getFullYear();r<=e.getFullYear();r++)n.push(r);return n}function Mi(i,e,n){const r=new Date(i.year,i.month,i.number),l=new Date(e.getFullYear(),e.getMonth(),e.getDate()),c=new Date(n.getFullYear(),n.getMonth(),n.getDate());return r>=l&&r<=c}function zl(i,e,n){let r,l,c,u,{$$slots:m={},$$scope:_}=e;const v=qo();let{value:g=null}=e;function w(A){A.getTime()!==(g==null?void 0:g.getTime())&&(n(4,k=Gr(A,T,q)),n(0,g=En(k)))}function O(A){A.getTime()!==(g==null?void 0:g.getTime())&&(n(4,k=Ti(A,T,q)),n(0,g=En(k)))}function K(A){n(4,k=Ti(A,T,q)),!pe&&g&&w(k)}function ee(A){return n(4,k=Gr(A,T,q)),g&&w(k),k}const W=new Date,U=new Date;let{timePrecision:R=null}=e,{min:T=new Date(U.getFullYear()-20,0,1)}=e,{max:q=new Date(U.getFullYear(),11,31,23,59,59,999)}=e,k=En(g||Ti(U,T,q));function re(A){k.getTime()!==(A==null?void 0:A.getTime())&&n(4,k=A?En(A):k)}let ie=Ma(T,q),{locale:$={}}=e,{browseWithoutSelecting:pe=!1}=e;function oe(A){k.setFullYear(A),K(k)}function De(A){let _e=k.getFullYear();A===12?(A=0,_e++):A===-1&&(A=11,_e--);const xe=vr(_e,A),we=Math.min(k.getDate(),xe);K(new Date(_e,A,we,k.getHours(),k.getMinutes(),k.getSeconds(),k.getMilliseconds()))}function ge(A){Mi(A,T,q)&&(k.setFullYear(0),k.setMonth(0),k.setDate(1),k.setFullYear(A.year),k.setMonth(A.month),k.setDate(A.number),O(k),v("select",En(k)))}function ce(A){if(A.shiftKey&&A.key==="ArrowUp")oe(k.getFullYear()-1);else if(A.shiftKey&&A.key==="ArrowDown")oe(k.getFullYear()+1);else if(A.shiftKey&&A.key==="ArrowLeft")De(k.getMonth()-1);else if(A.shiftKey&&A.key==="ArrowRight")De(k.getMonth()+1);else return!1;return A.preventDefault(),!0}function ye(A){if(A.shiftKey||A.altKey){ce(A);return}else if(A.key==="ArrowUp")oe(k.getFullYear()-1);else if(A.key==="ArrowDown")oe(k.getFullYear()+1);else if(A.key==="ArrowLeft")De(k.getMonth()-1);else if(A.key==="ArrowRight")De(k.getMonth()+1);else{ce(A);return}A.preventDefault()}function se(A){if(A.shiftKey||A.altKey){ce(A);return}else if(A.key==="ArrowUp"||A.key==="ArrowLeft")De(k.getMonth()-1);else if(A.key==="ArrowDown"||A.key==="ArrowRight")De(k.getMonth()+1);else{ce(A);return}A.preventDefault()}function Pe(A){var xe,we;let _e=A.shiftKey||A.altKey;if(!(((xe=A.target)==null?void 0:xe.tagName)==="SELECT"||((we=A.target)==null?void 0:we.tagName)==="SPAN")){if(_e){ce(A);return}else if(A.key==="ArrowUp")k.setDate(k.getDate()-7),O(k);else if(A.key==="ArrowDown")k.setDate(k.getDate()+7),O(k);else if(A.key==="ArrowLeft")k.setDate(k.getDate()-1),O(k);else if(A.key==="ArrowRight")k.setDate(k.getDate()+1),O(k);else if(A.key==="Enter")w(k),v("select",En(k));else return;A.preventDefault()}}function Ce(A){Dl.call(this,i,A)}const Y=()=>De(k.getMonth()-1),ue=A=>De(parseInt(A.currentTarget.value)),C=A=>oe(parseInt(A.currentTarget.value)),M=()=>De(k.getMonth()+1),G=A=>ge(A);function he(A){k=A,n(4,k)}return i.$$set=A=>{"value"in A&&n(0,g=A.value),"timePrecision"in A&&n(1,R=A.timePrecision),"min"in A&&n(2,T=A.min),"max"in A&&n(3,q=A.max),"locale"in A&&n(18,$=A.locale),"browseWithoutSelecting"in A&&n(19,pe=A.browseWithoutSelecting),"$$scope"in A&&n(20,_=A.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&13&&(g&&g>q?w(q):g&&g<T&&w(T)),i.$$.dirty[0]&1&&re(g),i.$$.dirty[0]&12&&n(6,ie=Ma(T,q)),i.$$.dirty[0]&262144&&n(5,r=Go($)),i.$$.dirty[0]&16&&n(9,l=k.getFullYear()),i.$$.dirty[0]&16&&n(8,c=k.getMonth()),i.$$.dirty[0]&48&&n(7,u=Kl(k,r.weekStartsOn))},[g,R,T,q,k,r,ie,u,c,l,ee,W,oe,De,ge,ye,se,Pe,$,pe,_,m,Ce,Y,ue,C,M,G,he]}class Hl extends un{constructor(e){super(),cn(this,e,zl,xl,an,{value:0,timePrecision:1,min:2,max:3,locale:18,browseWithoutSelecting:19},null,[-1,-1])}}function Ul(i){return i<.5?4*i*i*i:.5*Math.pow(2*i-2,3)+1}function ql(i){const e=i-1;return e*e*e+1}function Wl(i,{delay:e=0,duration:n=400,easing:r=ql,x:l=0,y:c=0,opacity:u=0}={}){const m=getComputedStyle(i),_=+m.opacity,v=m.transform==="none"?"":m.transform,g=_*(1-u),[w,O]=da(l),[K,ee]=da(c);return{delay:e,duration:n,easing:r,css:(W,U)=>`
			transform: ${v} translate(${(1-W)*w}${O}, ${(1-W)*K}${ee});
			opacity: ${_-g*U}`}}function La(i,e,n){let r="",l=!0;n=n||new Date(2020,0,1,0,0,0,0);let c=n.getFullYear(),u=n.getMonth(),m=n.getDate(),_=n.getHours(),v=n.getMinutes(),g=n.getSeconds();const w=n.getMilliseconds();function O(R){for(let T=0;T<R.length;T++)if(i.startsWith(R[T]))i=i.slice(1);else{l=!1,i.length===0&&(r=R.slice(T));return}}function K(R,T,q){const k=i.match(R);if(k!=null&&k[0]){i=i.slice(k[0].length);const re=parseInt(k[0]);return re>q||re<T?(l=!1,null):re}else return l=!1,null}function ee(R){const T=R.findIndex(q=>q.toLowerCase()===i.slice(0,q.length).toLowerCase());return T>=0?(i=i.slice(R[T].length),T):(l=!1,null)}function W(R){if(typeof R=="string")O(R);else if(R.id==="yy"){const T=K(/^[0-9]{2}/,0,99);T!==null&&(c=2e3+T)}else if(R.id==="yyyy"){const T=K(/^[0-9]{4}/,0,9999);T!==null&&(c=T)}else if(R.id==="MM"){const T=K(/^[0-9]{2}/,1,12);T!==null&&(u=T-1)}else if(R.id==="MMM"){const T=ee(R.allowedValues||[]);T!==null&&(u=T)}else if(R.id==="dd"){const T=K(/^[0-9]{2}/,1,31);T!==null&&(m=T)}else if(R.id==="HH"){const T=K(/^[0-9]{2}/,0,23);T!==null&&(_=T)}else if(R.id==="mm"){const T=K(/^[0-9]{2}/,0,59);T!==null&&(v=T)}else if(R.id==="ss"){const T=K(/^[0-9]{2}/,0,59);T!==null&&(g=T)}}for(const R of e)if(W(R),!l)break;const U=vr(c,u);return m>U&&(l=!1),{date:l?new Date(c,u,m,_,v,g,w):null,missingPunctuation:r}}function fr(i){return("0"+i.toString()).slice(-2)}function Gl(i,e){if(i.startsWith("yyyy"))return{id:"yyyy",toString:n=>n.getFullYear().toString()};if(i.startsWith("yy"))return{id:"yy",toString:n=>n.getFullYear().toString().slice(-2)};if(i.startsWith("MMM"))return{id:"MMM",allowedValues:e.shortMonths,toString:n=>e.shortMonths[n.getMonth()]};if(i.startsWith("MM"))return{id:"MM",toString:n=>fr(n.getMonth()+1)};if(i.startsWith("dd"))return{id:"dd",toString:n=>fr(n.getDate())};if(i.startsWith("HH"))return{id:"HH",toString:n=>fr(n.getHours())};if(i.startsWith("mm"))return{id:"mm",toString:n=>fr(n.getMinutes())};if(i.startsWith("ss"))return{id:"ss",toString:n=>fr(n.getSeconds())}}function Ra(i,e={}){const n=Go(e),r=[];for(;i.length>0;){const l=Gl(i,n);l?(r.push(l),i=i.slice(l.id.length)):typeof r[r.length-1]=="string"?(r[r.length-1]+=i[0],i=i.slice(1)):(r.push(i[0]),i=i.slice(1))}return r}function Na(i){let e,n,r,l,c=`${i[18]}px`,u;function m(v){i[34](v)}let _={min:i[3],max:i[4],locale:i[10],browseWithoutSelecting:i[11],timePrecision:i[12],$$slots:{default:[Yl]},$$scope:{ctx:i}};return i[14]!==void 0&&(_.value=i[14]),n=new Hl({props:_}),rn.push(()=>Rn(n,"value",m)),n.$on("focusout",i[21]),n.$on("select",i[23]),{c(){e=E("div"),Vt(n.$$.fragment),this.h()},l(v){e=S(v,"DIV",{class:!0});var g=H(e);xt(n.$$.fragment,g),g.forEach(y),this.h()},h(){h(e,"class","picker svelte-1vabmef"),Tt(e,"visible",i[2]),Tt(e,"above",i[17]),mr(e,"--picker-left-position",c)},m(v,g){le(v,e,g),zt(n,e,null),i[35](e),u=!0},p(v,g){const w={};g[0]&8&&(w.min=v[3]),g[0]&16&&(w.max=v[4]),g[0]&1024&&(w.locale=v[10]),g[0]&2048&&(w.browseWithoutSelecting=v[11]),g[0]&4096&&(w.timePrecision=v[12]),g[1]&32&&(w.$$scope={dirty:g,ctx:v}),!r&&g[0]&16384&&(r=!0,w.value=v[14],Ln(()=>r=!1)),n.$set(w),(!u||g[0]&4)&&Tt(e,"visible",v[2]),(!u||g[0]&131072)&&Tt(e,"above",v[17]),g[0]&262144&&c!==(c=`${v[18]}px`)&&mr(e,"--picker-left-position",c)},i(v){u||(lt(n.$$.fragment,v),v&&xn(()=>{u&&(l||(l=ha(e,i[24],{},!0)),l.run(1))}),u=!0)},o(v){ht(n.$$.fragment,v),v&&(l||(l=ha(e,i[24],{},!1)),l.run(0)),u=!1},d(v){v&&y(e),Ht(n),i[35](null),v&&l&&l.end()}}}function Yl(i){let e;const n=i[29].default,r=xo(n,i,i[36],null);return{c(){r&&r.c()},l(l){r&&r.l(l)},m(l,c){r&&r.m(l,c),e=!0},p(l,c){r&&r.p&&(!e||c[1]&32)&&zo(r,n,l,l[36],e?Uo(n,l[36],c,null):Ho(l[36]),null)},i(l){e||(lt(r,l),e=!0)},o(l){ht(r,l),e=!1},d(l){r&&r.d(l)}}}function Zl(i){let e,n,r,l,c,u,m,_=i[2]&&!i[7]&&Na(i);return{c(){e=E("div"),n=E("input"),r=te(),_&&_.c(),this.h()},l(v){e=S(v,"DIV",{class:!0});var g=H(e);n=S(g,"INPUT",{type:!0,autocomplete:!0,id:!0,placeholder:!0,class:!0}),r=ne(g),_&&_.l(g),g.forEach(y),this.h()},h(){h(n,"type","text"),h(n,"autocomplete","off"),n.value=i[0],h(n,"id",i[5]),h(n,"placeholder",i[6]),n.disabled=i[7],n.required=i[8],h(n,"class","svelte-1vabmef"),Tt(n,"invalid",!i[1]),h(e,"class",l="date-time-field "+i[9]+" svelte-1vabmef")},m(v,g){le(v,e,g),p(e,n),i[30](n),p(e,r),_&&_.m(e,null),c=!0,u||(m=[Ze(n,"focus",i[31]),Ze(n,"mousedown",i[32]),Ze(n,"input",i[33]),Ze(e,"focusout",i[21]),Ze(e,"keydown",i[22])],u=!0)},p(v,g){(!c||g[0]&1&&n.value!==v[0])&&(n.value=v[0]),(!c||g[0]&32)&&h(n,"id",v[5]),(!c||g[0]&64)&&h(n,"placeholder",v[6]),(!c||g[0]&128)&&(n.disabled=v[7]),(!c||g[0]&256)&&(n.required=v[8]),(!c||g[0]&2)&&Tt(n,"invalid",!v[1]),v[2]&&!v[7]?_?(_.p(v,g),g[0]&132&&lt(_,1)):(_=Na(v),_.c(),lt(_,1),_.m(e,null)):_&&(zn(),ht(_,1,1,()=>{_=null}),Hn()),(!c||g[0]&512&&l!==(l="date-time-field "+v[9]+" svelte-1vabmef"))&&h(e,"class",l)},i(v){c||(lt(_),c=!0)},o(v){ht(_),c=!1},d(v){v&&y(e),i[30](null),_&&_.d(),u=!1,Sn(m)}}}function Jl(i,e,n){let r,l,{$$slots:c={},$$scope:u}=e;const m=qo(),_=new Date,v=jr(null);Jn(i,v,J=>n(37,l=J));const g={subscribe:v.subscribe,set:J=>{J==null?(v.set(null),n(25,w=J)):J.getTime()!==(l==null?void 0:l.getTime())&&(v.set(J),n(25,w=J))}};Jn(i,g,J=>n(14,r=J));let{value:w=null}=e,{min:O=new Date(_.getFullYear()-20,0,1)}=e,{max:K=new Date(_.getFullYear(),11,31,23,59,59,999)}=e,{id:ee=null}=e,{placeholder:W="2020-12-31 23:00:00"}=e,{valid:U=!0}=e,{disabled:R=!1}=e,{required:T=!1}=e,{class:q=""}=e,{locale:k={}}=e,{format:re="yyyy-MM-dd HH:mm:ss"}=e,ie=Ra(re,k);function $(J,de){n(0,pe=ga(J,de))}let{text:pe=ga(r,ie)}=e;function oe(J,de){if(J.length){const Se=La(J,de,r);Se.date!==null?(n(1,U=!0),g.set(Se.date)):n(1,U=!1)}else n(1,U=!0),w&&(n(25,w=null),g.set(null))}let{visible:De=!1}=e,{closeOnSelection:ge=!1}=e,{browseWithoutSelecting:ce=!1}=e,{timePrecision:ye=null}=e;function se(J){(J==null?void 0:J.currentTarget)instanceof HTMLElement&&J.relatedTarget&&J.relatedTarget instanceof Node&&J.currentTarget.contains(J.relatedTarget)||n(2,De=!1)}function Pe(J){J.key==="Escape"&&De?(n(2,De=!1),J.preventDefault(),J.stopPropagation()):J.key==="Enter"&&(n(2,De=!De),J.preventDefault())}function Ce(J){m("select",J.detail),ge&&n(2,De=!1)}let{dynamicPositioning:Y=!1}=e,ue,C,M=!1,G=null;function he(){if(n(17,M=!1),n(18,G=null),De&&C&&Y){const J=ue.getBoundingClientRect(),de=C.offsetWidth-J.width,Se=J.bottom+C.offsetHeight+5,Ke=J.left+C.offsetWidth+5;if(Se>window.innerHeight&&n(17,M=!0),Ke>window.innerWidth&&(n(18,G=-de),J.left<de+5)){const P=window.innerWidth/2-C.offsetWidth/2;n(18,G=P-J.left)}}}function A(J){return he(),Wl(J,{duration:200,easing:Ul,y:M?5:-5})}function _e(J){rn[J?"unshift":"push"](()=>{ue=J,n(15,ue)})}const xe=()=>n(2,De=!0),we=()=>n(2,De=!0),qe=J=>{if(J instanceof InputEvent&&J.inputType==="insertText"&&typeof J.data=="string"&&J.currentTarget.value===pe+J.data){let de=La(pe,ie,r);if(de.missingPunctuation!==""&&!de.missingPunctuation.startsWith(J.data)){n(0,pe=pe+de.missingPunctuation+J.data);return}}n(0,pe=J.currentTarget.value)};function Ve(J){r=J,g.set(r)}function Ee(J){rn[J?"unshift":"push"](()=>{C=J,n(16,C)})}return i.$$set=J=>{"value"in J&&n(25,w=J.value),"min"in J&&n(3,O=J.min),"max"in J&&n(4,K=J.max),"id"in J&&n(5,ee=J.id),"placeholder"in J&&n(6,W=J.placeholder),"valid"in J&&n(1,U=J.valid),"disabled"in J&&n(7,R=J.disabled),"required"in J&&n(8,T=J.required),"class"in J&&n(9,q=J.class),"locale"in J&&n(10,k=J.locale),"format"in J&&n(26,re=J.format),"text"in J&&n(0,pe=J.text),"visible"in J&&n(2,De=J.visible),"closeOnSelection"in J&&n(27,ge=J.closeOnSelection),"browseWithoutSelecting"in J&&n(11,ce=J.browseWithoutSelecting),"timePrecision"in J&&n(12,ye=J.timePrecision),"dynamicPositioning"in J&&n(28,Y=J.dynamicPositioning),"$$scope"in J&&n(36,u=J.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&33554432&&g.set(w),i.$$.dirty[0]&67109888&&n(13,ie=Ra(re,k)),i.$$.dirty[0]&24576&&$(r,ie),i.$$.dirty[0]&8193&&oe(pe,ie)},[pe,U,De,O,K,ee,W,R,T,q,k,ce,ye,ie,r,ue,C,M,G,v,g,se,Pe,Ce,A,w,re,ge,Y,c,_e,xe,we,qe,Ve,Ee,u]}class Xn extends un{constructor(e){super(),cn(this,e,Jl,Zl,an,{value:25,min:3,max:4,id:5,placeholder:6,valid:1,disabled:7,required:8,class:9,locale:10,format:26,text:0,visible:2,closeOnSelection:27,browseWithoutSelecting:11,timePrecision:12,dynamicPositioning:28},null,[-1,-1])}}var Ba=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Yo(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Zo={exports:{}};(function(i,e){(function(n,r){i.exports=r()})(Ba,function(){var n=function(t,a){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var f in s)Object.prototype.hasOwnProperty.call(s,f)&&(o[f]=s[f])})(t,a)},r=function(){return(r=Object.assign||function(t){for(var a,o=1,s=arguments.length;o<s;o++)for(var f in a=arguments[o])Object.prototype.hasOwnProperty.call(a,f)&&(t[f]=a[f]);return t}).apply(this,arguments)};function l(t,a,o){for(var s,f=0,d=a.length;f<d;f++)!s&&f in a||((s=s||Array.prototype.slice.call(a,0,f))[f]=a[f]);return t.concat(s||Array.prototype.slice.call(a))}var c=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Ba,u=Object.keys,m=Array.isArray;function _(t,a){return typeof a!="object"||u(a).forEach(function(o){t[o]=a[o]}),t}typeof Promise>"u"||c.Promise||(c.Promise=Promise);var v=Object.getPrototypeOf,g={}.hasOwnProperty;function w(t,a){return g.call(t,a)}function O(t,a){typeof a=="function"&&(a=a(v(t))),(typeof Reflect>"u"?u:Reflect.ownKeys)(a).forEach(function(o){ee(t,o,a[o])})}var K=Object.defineProperty;function ee(t,a,o,s){K(t,a,_(o&&w(o,"get")&&typeof o.get=="function"?{get:o.get,set:o.set,configurable:!0}:{value:o,configurable:!0,writable:!0},s))}function W(t){return{from:function(a){return t.prototype=Object.create(a.prototype),ee(t.prototype,"constructor",t),{extend:O.bind(null,t.prototype)}}}}var U=Object.getOwnPropertyDescriptor,R=[].slice;function T(t,a,o){return R.call(t,a,o)}function q(t,a){return a(t)}function k(t){if(!t)throw new Error("Assertion Failed")}function re(t){c.setImmediate?setImmediate(t):setTimeout(t,0)}function ie(t,a){if(typeof a=="string"&&w(t,a))return t[a];if(!a)return t;if(typeof a!="string"){for(var o=[],s=0,f=a.length;s<f;++s){var d=ie(t,a[s]);o.push(d)}return o}var b=a.indexOf(".");if(b!==-1){var D=t[a.substr(0,b)];return D==null?void 0:ie(D,a.substr(b+1))}}function $(t,a,o){if(t&&a!==void 0&&!("isFrozen"in Object&&Object.isFrozen(t)))if(typeof a!="string"&&"length"in a){k(typeof o!="string"&&"length"in o);for(var s=0,f=a.length;s<f;++s)$(t,a[s],o[s])}else{var d,b,D=a.indexOf(".");D!==-1?(d=a.substr(0,D),(b=a.substr(D+1))===""?o===void 0?m(t)&&!isNaN(parseInt(d))?t.splice(d,1):delete t[d]:t[d]=o:$(D=!(D=t[d])||!w(t,d)?t[d]={}:D,b,o)):o===void 0?m(t)&&!isNaN(parseInt(a))?t.splice(a,1):delete t[a]:t[a]=o}}function pe(t){var a,o={};for(a in t)w(t,a)&&(o[a]=t[a]);return o}var oe=[].concat;function De(t){return oe.apply([],t)}var An="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(De([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(a){return a+t+"Array"})}))).filter(function(t){return c[t]}),ge=new Set(An.map(function(t){return c[t]})),ce=null;function ye(t){return ce=new WeakMap,t=function a(o){if(!o||typeof o!="object")return o;var s=ce.get(o);if(s)return s;if(m(o)){s=[],ce.set(o,s);for(var f=0,d=o.length;f<d;++f)s.push(a(o[f]))}else if(ge.has(o.constructor))s=o;else{var b,D=v(o);for(b in s=D===Object.prototype?{}:Object.create(D),ce.set(o,s),o)w(o,b)&&(s[b]=a(o[b]))}return s}(t),ce=null,t}var se={}.toString;function Pe(t){return se.call(t).slice(8,-1)}var Ce=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Y=typeof Ce=="symbol"?function(t){var a;return t!=null&&(a=t[Ce])&&a.apply(t)}:function(){return null};function ue(t,a){return a=t.indexOf(a),0<=a&&t.splice(a,1),0<=a}var C={};function M(t){var a,o,s,f;if(arguments.length===1){if(m(t))return t.slice();if(this===C&&typeof t=="string")return[t];if(f=Y(t)){for(o=[];!(s=f.next()).done;)o.push(s.value);return o}if(t==null)return[t];if(typeof(a=t.length)!="number")return[t];for(o=new Array(a);a--;)o[a]=t[a];return o}for(a=arguments.length,o=new Array(a);a--;)o[a]=arguments[a];return o}var G=typeof Symbol<"u"?function(t){return t[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},gt=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],dn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(gt),he={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function A(t,a){this.name=t,this.message=a}function _e(t,a){return t+". Errors: "+Object.keys(a).map(function(o){return a[o].toString()}).filter(function(o,s,f){return f.indexOf(o)===s}).join(`
`)}function xe(t,a,o,s){this.failures=a,this.failedKeys=s,this.successCount=o,this.message=_e(t,a)}function we(t,a){this.name="BulkError",this.failures=Object.keys(a).map(function(o){return a[o]}),this.failuresByPos=a,this.message=_e(t,this.failures)}W(A).from(Error).extend({toString:function(){return this.name+": "+this.message}}),W(xe).from(A),W(we).from(A);var qe=dn.reduce(function(t,a){return t[a]=a+"Error",t},{}),Ve=A,Ee=dn.reduce(function(t,a){var o=a+"Error";function s(f,d){this.name=o,f?typeof f=="string"?(this.message="".concat(f).concat(d?`
 `+d:""),this.inner=d||null):typeof f=="object"&&(this.message="".concat(f.name," ").concat(f.message),this.inner=f):(this.message=he[a]||o,this.inner=null)}return W(s).from(Ve),t[a]=s,t},{});Ee.Syntax=SyntaxError,Ee.Type=TypeError,Ee.Range=RangeError;var J=gt.reduce(function(t,a){return t[a+"Error"]=Ee[a],t},{}),de=dn.reduce(function(t,a){return["Syntax","Type","Range"].indexOf(a)===-1&&(t[a+"Error"]=Ee[a]),t},{});function Se(){}function Ke(t){return t}function Ie(t,a){return t==null||t===Ke?a:function(o){return a(t(o))}}function P(t,a){return function(){t.apply(this,arguments),a.apply(this,arguments)}}function Ue(t,a){return t===Se?a:function(){var o=t.apply(this,arguments);o!==void 0&&(arguments[0]=o);var s=this.onsuccess,f=this.onerror;this.onsuccess=null,this.onerror=null;var d=a.apply(this,arguments);return s&&(this.onsuccess=this.onsuccess?P(s,this.onsuccess):s),f&&(this.onerror=this.onerror?P(f,this.onerror):f),d!==void 0?d:o}}function Le(t,a){return t===Se?a:function(){t.apply(this,arguments);var o=this.onsuccess,s=this.onerror;this.onsuccess=this.onerror=null,a.apply(this,arguments),o&&(this.onsuccess=this.onsuccess?P(o,this.onsuccess):o),s&&(this.onerror=this.onerror?P(s,this.onerror):s)}}function fe(t,a){return t===Se?a:function(o){var s=t.apply(this,arguments);_(o,s);var f=this.onsuccess,d=this.onerror;return this.onsuccess=null,this.onerror=null,o=a.apply(this,arguments),f&&(this.onsuccess=this.onsuccess?P(f,this.onsuccess):f),d&&(this.onerror=this.onerror?P(d,this.onerror):d),s===void 0?o===void 0?void 0:o:_(s,o)}}function We(t,a){return t===Se?a:function(){return a.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function nt(t,a){return t===Se?a:function(){var o=t.apply(this,arguments);if(o&&typeof o.then=="function"){for(var s=this,f=arguments.length,d=new Array(f);f--;)d[f]=arguments[f];return o.then(function(){return a.apply(s,d)})}return a.apply(this,arguments)}}de.ModifyError=xe,de.DexieError=A,de.BulkError=we;var ut=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function At(t){ut=t}var _t={},St=100,An=typeof Promise>"u"?[]:function(){var t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,v(t),t];var a=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[a,v(a),t]}(),gt=An[0],dn=An[1],An=An[2],dn=dn&&dn.then,yt=gt&&gt.constructor,Ot=!!An,Xe=function(t,a){yn.push([t,a]),en&&(queueMicrotask(ct),en=!1)},Ut=!0,en=!0,Rt=[],on=[],Nt=Ke,wt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Se,pgp:!1,env:{},finalize:Se},Re=wt,yn=[],ln=0,qt=[];function ke(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var a=this._PSD=Re;if(typeof t!="function"){if(t!==_t)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&fn(this,this._value))}this._state=null,this._value=null,++a.ref,function o(s,f){try{f(function(d){if(s._state===null){if(d===s)throw new TypeError("A promise cannot be resolved with itself.");var b=s._lib&&Me();d&&typeof d.then=="function"?o(s,function(D,B){d instanceof ke?d._then(D,B):d.then(D,B)}):(s._state=!0,s._value=d,It(s)),b&&bt()}},fn.bind(null,s))}catch(d){fn(s,d)}}(this,t)}var jt={get:function(){var t=Re,a=pn;function o(s,f){var d=this,b=!t.global&&(t!==Re||a!==pn),D=b&&!Gt(),B=new ke(function(L,V){be(d,new at(er(s,t,b,D),er(f,t,b,D),L,V,t))});return this._consoleTask&&(B._consoleTask=this._consoleTask),B}return o.prototype=_t,o},set:function(t){ee(this,"then",t&&t.prototype===_t?jt:{get:function(){return t},set:jt.set})}};function at(t,a,o,s,f){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof a=="function"?a:null,this.resolve=o,this.reject=s,this.psd=f}function fn(t,a){var o,s;on.push(a),t._state===null&&(o=t._lib&&Me(),a=Nt(a),t._state=!1,t._value=a,s=t,Rt.some(function(f){return f._value===s._value})||Rt.push(s),It(t),o&&bt())}function It(t){var a=t._listeners;t._listeners=[];for(var o=0,s=a.length;o<s;++o)be(t,a[o]);var f=t._PSD;--f.ref||f.finalize(),ln===0&&(++ln,Xe(function(){--ln==0&&ft()},[]))}function be(t,a){if(t._state!==null){var o=t._state?a.onFulfilled:a.onRejected;if(o===null)return(t._state?a.resolve:a.reject)(t._value);++a.psd.ref,++ln,Xe(Ge,[o,t,a])}else t._listeners.push(a)}function Ge(t,a,o){try{var s,f=a._value;!a._state&&on.length&&(on=[]),s=ut&&a._consoleTask?a._consoleTask.run(function(){return t(f)}):t(f),a._state||on.indexOf(f)!==-1||function(d){for(var b=Rt.length;b;)if(Rt[--b]._value===d._value)return Rt.splice(b,1)}(a),o.resolve(s)}catch(d){o.reject(d)}finally{--ln==0&&ft(),--o.psd.ref||o.psd.finalize()}}function ct(){bn(wt,function(){Me()&&bt()})}function Me(){var t=Ut;return en=Ut=!1,t}function bt(){var t,a,o;do for(;0<yn.length;)for(t=yn,yn=[],o=t.length,a=0;a<o;++a){var s=t[a];s[0].apply(null,s[1])}while(0<yn.length);en=Ut=!0}function ft(){var t=Rt;Rt=[],t.forEach(function(s){s._PSD.onunhandled.call(null,s._value,s)});for(var a=qt.slice(0),o=a.length;o;)a[--o]()}function me(t){return new ke(_t,!1,t)}function ze(t,a){var o=Re;return function(){var s=Me(),f=Re;try{return vn(o,!0),t.apply(this,arguments)}catch(d){a&&a(d)}finally{vn(f,!1),s&&bt()}}}O(ke.prototype,{then:jt,_then:function(t,a){be(this,new at(null,null,t,a,Re))},catch:function(t){if(arguments.length===1)return this.then(null,t);var a=t,o=arguments[1];return typeof a=="function"?this.then(null,function(s){return(s instanceof a?o:me)(s)}):this.then(null,function(s){return(s&&s.name===a?o:me)(s)})},finally:function(t){return this.then(function(a){return ke.resolve(t()).then(function(){return a})},function(a){return ke.resolve(t()).then(function(){return me(a)})})},timeout:function(t,a){var o=this;return t<1/0?new ke(function(s,f){var d=setTimeout(function(){return f(new Ee.Timeout(a))},t);o.then(s,f).finally(clearTimeout.bind(null,d))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&ee(ke.prototype,Symbol.toStringTag,"Dexie.Promise"),wt.env=Cn(),O(ke,{all:function(){var t=M.apply(null,arguments).map(Ct);return new ke(function(a,o){t.length===0&&a([]);var s=t.length;t.forEach(function(f,d){return ke.resolve(f).then(function(b){t[d]=b,--s||a(t)},o)})})},resolve:function(t){return t instanceof ke?t:t&&typeof t.then=="function"?new ke(function(a,o){t.then(a,o)}):new ke(_t,!0,t)},reject:me,race:function(){var t=M.apply(null,arguments).map(Ct);return new ke(function(a,o){t.map(function(s){return ke.resolve(s).then(a,o)})})},PSD:{get:function(){return Re},set:function(t){return Re=t}},totalEchoes:{get:function(){return pn}},newPSD:Bt,usePSD:bn,scheduler:{get:function(){return Xe},set:function(t){Xe=t}},rejectionMapper:{get:function(){return Nt},set:function(t){Nt=t}},follow:function(t,a){return new ke(function(o,s){return Bt(function(f,d){var b=Re;b.unhandleds=[],b.onunhandled=d,b.finalize=P(function(){var D,B=this;D=function(){B.unhandleds.length===0?f():d(B.unhandleds[0])},qt.push(function L(){D(),qt.splice(qt.indexOf(L),1)}),++ln,Xe(function(){--ln==0&&ft()},[])},b.finalize),t()},a,o,s)})}}),yt&&(yt.allSettled&&ee(ke,"allSettled",function(){var t=M.apply(null,arguments).map(Ct);return new ke(function(a){t.length===0&&a([]);var o=t.length,s=new Array(o);t.forEach(function(f,d){return ke.resolve(f).then(function(b){return s[d]={status:"fulfilled",value:b}},function(b){return s[d]={status:"rejected",reason:b}}).then(function(){return--o||a(s)})})})}),yt.any&&typeof AggregateError<"u"&&ee(ke,"any",function(){var t=M.apply(null,arguments).map(Ct);return new ke(function(a,o){t.length===0&&o(new AggregateError([]));var s=t.length,f=new Array(s);t.forEach(function(d,b){return ke.resolve(d).then(function(D){return a(D)},function(D){f[b]=D,--s||o(new AggregateError(f))})})})}));var Je={awaits:0,echoes:0,id:0},He=0,pt=[],Wt=0,pn=0,mn=0;function Bt(t,a,o,s){var f=Re,d=Object.create(f);return d.parent=f,d.ref=0,d.global=!1,d.id=++mn,wt.env,d.env=Ot?{Promise:ke,PromiseProp:{value:ke,configurable:!0,writable:!0},all:ke.all,race:ke.race,allSettled:ke.allSettled,any:ke.any,resolve:ke.resolve,reject:ke.reject}:{},a&&_(d,a),++f.ref,d.finalize=function(){--this.parent.ref||this.parent.finalize()},s=bn(d,t,o,s),d.ref===0&&d.finalize(),s}function nn(){return Je.id||(Je.id=++He),++Je.awaits,Je.echoes+=St,Je.id}function Gt(){return!!Je.awaits&&(--Je.awaits==0&&(Je.id=0),Je.echoes=Je.awaits*St,!0)}function Ct(t){return Je.echoes&&t&&t.constructor===yt?(nn(),t.then(function(a){return Gt(),a},function(a){return Gt(),st(a)})):t}function Un(){var t=pt[pt.length-1];pt.pop(),vn(t,!1)}function vn(t,a){var o,s=Re;(a?!Je.echoes||Wt++&&t===Re:!Wt||--Wt&&t===Re)||queueMicrotask(a?(function(f){++pn,Je.echoes&&--Je.echoes!=0||(Je.echoes=Je.awaits=Je.id=0),pt.push(Re),vn(f,!0)}).bind(null,t):Un),t!==Re&&(Re=t,s===wt&&(wt.env=Cn()),Ot&&(o=wt.env.Promise,a=t.env,(s.global||t.global)&&(Object.defineProperty(c,"Promise",a.PromiseProp),o.all=a.all,o.race=a.race,o.resolve=a.resolve,o.reject=a.reject,a.allSettled&&(o.allSettled=a.allSettled),a.any&&(o.any=a.any))))}function Cn(){var t=c.Promise;return Ot?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(c,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject}:{}}function bn(t,a,o,s,f){var d=Re;try{return vn(t,!0),a(o,s,f)}finally{vn(d,!1)}}function er(t,a,o,s){return typeof t!="function"?t:function(){var f=Re;o&&nn(),vn(a,!0);try{return t.apply(this,arguments)}finally{vn(f,!1),s&&queueMicrotask(Gt)}}}function qn(t){Promise===yt&&Je.echoes===0?Wt===0?t():enqueueNativeMicroTask(t):setTimeout(t,0)}(""+dn).indexOf("[native code]")===-1&&(nn=Gt=Se);var st=ke.reject,Nn="ï¿¿",Tn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Vi="String expected.",Wn=[],yr="__dbnames",Jr="readonly",Qr="readwrite";function Bn(t,a){return t?a?function(){return t.apply(this,arguments)&&a.apply(this,arguments)}:t:a}var xi={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function br(t){return typeof t!="string"||/\./.test(t)?function(a){return a}:function(a){return a[t]===void 0&&t in a&&delete(a=ye(a))[t],a}}function zi(){throw Ee.Type()}function vt(t,a){try{var o=Hi(t),s=Hi(a);if(o!==s)return o==="Array"?1:s==="Array"?-1:o==="binary"?1:s==="binary"?-1:o==="string"?1:s==="string"?-1:o==="Date"?1:s!=="Date"?NaN:-1;switch(o){case"number":case"Date":case"string":return a<t?1:t<a?-1:0;case"binary":return function(f,d){for(var b=f.length,D=d.length,B=b<D?b:D,L=0;L<B;++L)if(f[L]!==d[L])return f[L]<d[L]?-1:1;return b===D?0:b<D?-1:1}(Ui(t),Ui(a));case"Array":return function(f,d){for(var b=f.length,D=d.length,B=b<D?b:D,L=0;L<B;++L){var V=vt(f[L],d[L]);if(V!==0)return V}return b===D?0:b<D?-1:1}(t,a)}}catch{}return NaN}function Hi(t){var a=typeof t;return a!="object"?a:ArrayBuffer.isView(t)?"binary":(t=Pe(t),t==="ArrayBuffer"?"binary":t)}function Ui(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}var qi=(Dt.prototype._trans=function(t,a,o){var s=this._tx||Re.trans,f=this.name,d=ut&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(t==="readonly"?"read":"write"," ").concat(this.name));function b(L,V,I){if(!I.schema[f])throw new Ee.NotFound("Table "+f+" not part of transaction");return a(I.idbtrans,I)}var D=Me();try{var B=s&&s.db._novip===this.db._novip?s===Re.trans?s._promise(t,b,o):Bt(function(){return s._promise(t,b,o)},{trans:s,transless:Re.transless||Re}):function L(V,I,x,N){if(V.idbdb&&(V._state.openComplete||Re.letThrough||V._vip)){var j=V._createTransaction(I,x,V._dbSchema);try{j.create(),V._state.PR1398_maxLoop=3}catch(z){return z.name===qe.InvalidState&&V.isOpen()&&0<--V._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),V.close({disableAutoOpen:!1}),V.open().then(function(){return L(V,I,x,N)})):st(z)}return j._promise(I,function(z,F){return Bt(function(){return Re.trans=j,N(z,F,j)})}).then(function(z){if(I==="readwrite")try{j.idbtrans.commit()}catch{}return I==="readonly"?z:j._completion.then(function(){return z})})}if(V._state.openComplete)return st(new Ee.DatabaseClosed(V._state.dbOpenError));if(!V._state.isBeingOpened){if(!V._state.autoOpen)return st(new Ee.DatabaseClosed);V.open().catch(Se)}return V._state.dbReadyPromise.then(function(){return L(V,I,x,N)})}(this.db,t,[this.name],b);return d&&(B._consoleTask=d,B=B.catch(function(L){return console.trace(L),st(L)})),B}finally{D&&bt()}},Dt.prototype.get=function(t,a){var o=this;return t&&t.constructor===Object?this.where(t).first(a):t==null?st(new Ee.Type("Invalid argument to Table.get()")):this._trans("readonly",function(s){return o.core.get({trans:s,key:t}).then(function(f){return o.hook.reading.fire(f)})}).then(a)},Dt.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(m(t))return new this.db.WhereClause(this,"[".concat(t.join("+"),"]"));var a=u(t);if(a.length===1)return this.where(a[0]).equals(t[a[0]]);var o=this.schema.indexes.concat(this.schema.primKey).filter(function(B){if(B.compound&&a.every(function(V){return 0<=B.keyPath.indexOf(V)})){for(var L=0;L<a.length;++L)if(a.indexOf(B.keyPath[L])===-1)return!1;return!0}return!1}).sort(function(B,L){return B.keyPath.length-L.keyPath.length})[0];if(o&&this.db._maxKey!==Nn){var b=o.keyPath.slice(0,a.length);return this.where(b).equals(b.map(function(L){return t[L]}))}!o&&ut&&console.warn("The query ".concat(JSON.stringify(t)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(a.join("+"),"]"));var s=this.schema.idxByName,f=this.db._deps.indexedDB;function d(B,L){return f.cmp(B,L)===0}var D=a.reduce(function(x,L){var V=x[0],I=x[1],x=s[L],N=t[L];return[V||x,V||!x?Bn(I,x&&x.multi?function(j){return j=ie(j,L),m(j)&&j.some(function(z){return d(N,z)})}:function(j){return d(N,ie(j,L))}):I]},[null,null]),b=D[0],D=D[1];return b?this.where(b.name).equals(t[b.keyPath]).filter(D):o?this.filter(D):this.where(a).equals("")},Dt.prototype.filter=function(t){return this.toCollection().and(t)},Dt.prototype.count=function(t){return this.toCollection().count(t)},Dt.prototype.offset=function(t){return this.toCollection().offset(t)},Dt.prototype.limit=function(t){return this.toCollection().limit(t)},Dt.prototype.each=function(t){return this.toCollection().each(t)},Dt.prototype.toArray=function(t){return this.toCollection().toArray(t)},Dt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Dt.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,m(t)?"[".concat(t.join("+"),"]"):t))},Dt.prototype.reverse=function(){return this.toCollection().reverse()},Dt.prototype.mapToClass=function(t){var a,o=this.db,s=this.name;function f(){return a!==null&&a.apply(this,arguments)||this}(this.schema.mappedClass=t).prototype instanceof zi&&(function(B,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");function V(){this.constructor=B}n(B,L),B.prototype=L===null?Object.create(L):(V.prototype=L.prototype,new V)}(f,a=t),Object.defineProperty(f.prototype,"db",{get:function(){return o},enumerable:!1,configurable:!0}),f.prototype.table=function(){return s},t=f);for(var d=new Set,b=t.prototype;b;b=v(b))Object.getOwnPropertyNames(b).forEach(function(B){return d.add(B)});function D(B){if(!B)return B;var L,V=Object.create(t.prototype);for(L in B)if(!d.has(L))try{V[L]=B[L]}catch{}return V}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=D,this.hook("reading",D),t},Dt.prototype.defineClass=function(){return this.mapToClass(function(t){_(this,t)})},Dt.prototype.add=function(t,a){var o=this,s=this.schema.primKey,f=s.auto,d=s.keyPath,b=t;return d&&f&&(b=br(d)(t)),this._trans("readwrite",function(D){return o.core.mutate({trans:D,type:"add",keys:a!=null?[a]:null,values:[b]})}).then(function(D){return D.numFailures?ke.reject(D.failures[0]):D.lastResult}).then(function(D){if(d)try{$(t,d,D)}catch{}return D})},Dt.prototype.update=function(t,a){return typeof t!="object"||m(t)?this.where(":id").equals(t).modify(a):(t=ie(t,this.schema.primKey.keyPath),t===void 0?st(new Ee.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(t).modify(a))},Dt.prototype.put=function(t,a){var o=this,s=this.schema.primKey,f=s.auto,d=s.keyPath,b=t;return d&&f&&(b=br(d)(t)),this._trans("readwrite",function(D){return o.core.mutate({trans:D,type:"put",values:[b],keys:a!=null?[a]:null})}).then(function(D){return D.numFailures?ke.reject(D.failures[0]):D.lastResult}).then(function(D){if(d)try{$(t,d,D)}catch{}return D})},Dt.prototype.delete=function(t){var a=this;return this._trans("readwrite",function(o){return a.core.mutate({trans:o,type:"delete",keys:[t]})}).then(function(o){return o.numFailures?ke.reject(o.failures[0]):void 0})},Dt.prototype.clear=function(){var t=this;return this._trans("readwrite",function(a){return t.core.mutate({trans:a,type:"deleteRange",range:xi})}).then(function(a){return a.numFailures?ke.reject(a.failures[0]):void 0})},Dt.prototype.bulkGet=function(t){var a=this;return this._trans("readonly",function(o){return a.core.getMany({keys:t,trans:o}).then(function(s){return s.map(function(f){return a.hook.reading.fire(f)})})})},Dt.prototype.bulkAdd=function(t,a,o){var s=this,f=Array.isArray(a)?a:void 0,d=(o=o||(f?void 0:a))?o.allKeys:void 0;return this._trans("readwrite",function(b){var L=s.schema.primKey,D=L.auto,L=L.keyPath;if(L&&f)throw new Ee.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(f&&f.length!==t.length)throw new Ee.InvalidArgument("Arguments objects and keys must have the same length");var B=t.length,L=L&&D?t.map(br(L)):t;return s.core.mutate({trans:b,type:"add",keys:f,values:L,wantResults:d}).then(function(j){var I=j.numFailures,x=j.results,N=j.lastResult,j=j.failures;if(I===0)return d?x:N;throw new we("".concat(s.name,".bulkAdd(): ").concat(I," of ").concat(B," operations failed"),j)})})},Dt.prototype.bulkPut=function(t,a,o){var s=this,f=Array.isArray(a)?a:void 0,d=(o=o||(f?void 0:a))?o.allKeys:void 0;return this._trans("readwrite",function(b){var L=s.schema.primKey,D=L.auto,L=L.keyPath;if(L&&f)throw new Ee.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(f&&f.length!==t.length)throw new Ee.InvalidArgument("Arguments objects and keys must have the same length");var B=t.length,L=L&&D?t.map(br(L)):t;return s.core.mutate({trans:b,type:"put",keys:f,values:L,wantResults:d}).then(function(j){var I=j.numFailures,x=j.results,N=j.lastResult,j=j.failures;if(I===0)return d?x:N;throw new we("".concat(s.name,".bulkPut(): ").concat(I," of ").concat(B," operations failed"),j)})})},Dt.prototype.bulkUpdate=function(t){var a=this,o=this.core,s=t.map(function(b){return b.key}),f=t.map(function(b){return b.changes}),d=[];return this._trans("readwrite",function(b){return o.getMany({trans:b,keys:s,cache:"clone"}).then(function(D){var B=[],L=[];t.forEach(function(I,x){var N=I.key,j=I.changes,z=D[x];if(z){for(var F=0,Z=Object.keys(j);F<Z.length;F++){var Q=Z[F],X=j[Q];if(Q===a.schema.primKey.keyPath){if(vt(X,N)!==0)throw new Ee.Constraint("Cannot update primary key in bulkUpdate()")}else $(z,Q,X)}d.push(x),B.push(N),L.push(z)}});var V=B.length;return o.mutate({trans:b,type:"put",keys:B,values:L,updates:{keys:s,changeSpecs:f}}).then(function(I){var x=I.numFailures,N=I.failures;if(x===0)return V;for(var j=0,z=Object.keys(N);j<z.length;j++){var F,Z=z[j],Q=d[Number(Z)];Q!=null&&(F=N[Z],delete N[Z],N[Q]=F)}throw new we("".concat(a.name,".bulkUpdate(): ").concat(x," of ").concat(V," operations failed"),N)})})})},Dt.prototype.bulkDelete=function(t){var a=this,o=t.length;return this._trans("readwrite",function(s){return a.core.mutate({trans:s,type:"delete",keys:t})}).then(function(b){var f=b.numFailures,d=b.lastResult,b=b.failures;if(f===0)return d;throw new we("".concat(a.name,".bulkDelete(): ").concat(f," of ").concat(o," operations failed"),b)})},Dt);function Dt(){}function tr(t){function a(b,D){if(D){for(var B=arguments.length,L=new Array(B-1);--B;)L[B-1]=arguments[B];return o[b].subscribe.apply(null,L),t}if(typeof b=="string")return o[b]}var o={};a.addEventType=d;for(var s=1,f=arguments.length;s<f;++s)d(arguments[s]);return a;function d(b,D,B){if(typeof b!="object"){var L;D=D||We;var V={subscribers:[],fire:B=B||Se,subscribe:function(I){V.subscribers.indexOf(I)===-1&&(V.subscribers.push(I),V.fire=D(V.fire,I))},unsubscribe:function(I){V.subscribers=V.subscribers.filter(function(x){return x!==I}),V.fire=V.subscribers.reduce(D,B)}};return o[b]=a[b]=V}u(L=b).forEach(function(I){var x=L[I];if(m(x))d(I,L[I][0],L[I][1]);else{if(x!=="asap")throw new Ee.InvalidArgument("Invalid event config");var N=d(I,Ke,function(){for(var j=arguments.length,z=new Array(j);j--;)z[j]=arguments[j];N.subscribers.forEach(function(F){re(function(){F.apply(null,z)})})})}})}}function nr(t,a){return W(a).from({prototype:t}),a}function Gn(t,a){return!(t.filter||t.algorithm||t.or)&&(a?t.justLimit:!t.replayFilter)}function Xr(t,a){t.filter=Bn(t.filter,a)}function $r(t,a,o){var s=t.replayFilter;t.replayFilter=s?function(){return Bn(s(),a())}:a,t.justLimit=o&&!s}function wr(t,a){if(t.isPrimKey)return a.primaryKey;var o=a.getIndexByKeyPath(t.index);if(!o)throw new Ee.Schema("KeyPath "+t.index+" on object store "+a.name+" is not indexed");return o}function Wi(t,a,o){var s=wr(t,a.schema);return a.openCursor({trans:o,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:s,range:t.range}})}function kr(t,a,o,s){var f=t.replayFilter?Bn(t.filter,t.replayFilter()):t.filter;if(t.or){var d={},b=function(D,B,L){var V,I;f&&!f(B,L,function(x){return B.stop(x)},function(x){return B.fail(x)})||((I=""+(V=B.primaryKey))=="[object ArrayBuffer]"&&(I=""+new Uint8Array(V)),w(d,I)||(d[I]=!0,a(D,B,L)))};return Promise.all([t.or._iterate(b,o),Gi(Wi(t,s,o),t.algorithm,b,!t.keysOnly&&t.valueMapper)])}return Gi(Wi(t,s,o),Bn(t.algorithm,f),a,!t.keysOnly&&t.valueMapper)}function Gi(t,a,o,s){var f=ze(s?function(d,b,D){return o(s(d),b,D)}:o);return t.then(function(d){if(d)return d.start(function(){var b=function(){return d.continue()};a&&!a(d,function(D){return b=D},function(D){d.stop(D),b=Se},function(D){d.fail(D),b=Se})||f(d.value,d,function(D){return b=D}),b()})})}var An=Symbol(),rr=(Yi.prototype.execute=function(t){if(this.add!==void 0){var a=this.add;if(m(a))return l(l([],m(t)?t:[],!0),a).sort();if(typeof a=="number")return(Number(t)||0)+a;if(typeof a=="bigint")try{return BigInt(t)+a}catch{return BigInt(0)+a}throw new TypeError("Invalid term ".concat(a))}if(this.remove!==void 0){var o=this.remove;if(m(o))return m(t)?t.filter(function(s){return!o.includes(s)}).sort():[];if(typeof o=="number")return Number(t)-o;if(typeof o=="bigint")try{return BigInt(t)-o}catch{return BigInt(0)-o}throw new TypeError("Invalid subtrahend ".concat(o))}return a=(a=this.replacePrefix)===null||a===void 0?void 0:a[0],a&&typeof t=="string"&&t.startsWith(a)?this.replacePrefix[1]+t.substring(a.length):t},Yi);function Yi(t){Object.assign(this,t)}var rl=(mt.prototype._read=function(t,a){var o=this._ctx;return o.error?o.table._trans(null,st.bind(null,o.error)):o.table._trans("readonly",t).then(a)},mt.prototype._write=function(t){var a=this._ctx;return a.error?a.table._trans(null,st.bind(null,a.error)):a.table._trans("readwrite",t,"locked")},mt.prototype._addAlgorithm=function(t){var a=this._ctx;a.algorithm=Bn(a.algorithm,t)},mt.prototype._iterate=function(t,a){return kr(this._ctx,t,a,this._ctx.table.core)},mt.prototype.clone=function(t){var a=Object.create(this.constructor.prototype),o=Object.create(this._ctx);return t&&_(o,t),a._ctx=o,a},mt.prototype.raw=function(){return this._ctx.valueMapper=null,this},mt.prototype.each=function(t){var a=this._ctx;return this._read(function(o){return kr(a,t,o,a.table.core)})},mt.prototype.count=function(t){var a=this;return this._read(function(o){var s=a._ctx,f=s.table.core;if(Gn(s,!0))return f.count({trans:o,query:{index:wr(s,f.schema),range:s.range}}).then(function(b){return Math.min(b,s.limit)});var d=0;return kr(s,function(){return++d,!1},o,f).then(function(){return d})}).then(t)},mt.prototype.sortBy=function(t,a){var o=t.split(".").reverse(),s=o[0],f=o.length-1;function d(B,L){return L?d(B[o[L]],L-1):B[s]}var b=this._ctx.dir==="next"?1:-1;function D(B,L){return B=d(B,f),L=d(L,f),B<L?-b:L<B?b:0}return this.toArray(function(B){return B.sort(D)}).then(a)},mt.prototype.toArray=function(t){var a=this;return this._read(function(o){var s=a._ctx;if(s.dir==="next"&&Gn(s,!0)&&0<s.limit){var f=s.valueMapper,d=wr(s,s.table.core.schema);return s.table.core.query({trans:o,limit:s.limit,values:!0,query:{index:d,range:s.range}}).then(function(D){return D=D.result,f?D.map(f):D})}var b=[];return kr(s,function(D){return b.push(D)},o,s.table.core).then(function(){return b})},t)},mt.prototype.offset=function(t){var a=this._ctx;return t<=0||(a.offset+=t,Gn(a)?$r(a,function(){var o=t;return function(s,f){return o===0||(o===1?--o:f(function(){s.advance(o),o=0}),!1)}}):$r(a,function(){var o=t;return function(){return--o<0}})),this},mt.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),$r(this._ctx,function(){var a=t;return function(o,s,f){return--a<=0&&s(f),0<=a}},!0),this},mt.prototype.until=function(t,a){return Xr(this._ctx,function(o,s,f){return!t(o.value)||(s(f),a)}),this},mt.prototype.first=function(t){return this.limit(1).toArray(function(a){return a[0]}).then(t)},mt.prototype.last=function(t){return this.reverse().first(t)},mt.prototype.filter=function(t){var a;return Xr(this._ctx,function(o){return t(o.value)}),(a=this._ctx).isMatch=Bn(a.isMatch,t),this},mt.prototype.and=function(t){return this.filter(t)},mt.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},mt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},mt.prototype.desc=function(){return this.reverse()},mt.prototype.eachKey=function(t){var a=this._ctx;return a.keysOnly=!a.isMatch,this.each(function(o,s){t(s.key,s)})},mt.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},mt.prototype.eachPrimaryKey=function(t){var a=this._ctx;return a.keysOnly=!a.isMatch,this.each(function(o,s){t(s.primaryKey,s)})},mt.prototype.keys=function(t){var a=this._ctx;a.keysOnly=!a.isMatch;var o=[];return this.each(function(s,f){o.push(f.key)}).then(function(){return o}).then(t)},mt.prototype.primaryKeys=function(t){var a=this._ctx;if(a.dir==="next"&&Gn(a,!0)&&0<a.limit)return this._read(function(s){var f=wr(a,a.table.core.schema);return a.table.core.query({trans:s,values:!1,limit:a.limit,query:{index:f,range:a.range}})}).then(function(s){return s.result}).then(t);a.keysOnly=!a.isMatch;var o=[];return this.each(function(s,f){o.push(f.primaryKey)}).then(function(){return o}).then(t)},mt.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},mt.prototype.firstKey=function(t){return this.limit(1).keys(function(a){return a[0]}).then(t)},mt.prototype.lastKey=function(t){return this.reverse().firstKey(t)},mt.prototype.distinct=function(){var t=this._ctx,t=t.index&&t.table.schema.idxByName[t.index];if(!t||!t.multi)return this;var a={};return Xr(this._ctx,function(f){var s=f.primaryKey.toString(),f=w(a,s);return a[s]=!0,!f}),this},mt.prototype.modify=function(t){var a=this,o=this._ctx;return this._write(function(s){var f,d,b;b=typeof t=="function"?t:(f=u(t),d=f.length,function(F){for(var Z=!1,Q=0;Q<d;++Q){var X=f[Q],ae=t[X],ve=ie(F,X);ae instanceof rr?($(F,X,ae.execute(ve)),Z=!0):ve!==ae&&($(F,X,ae),Z=!0)}return Z});function D(F,X){var Q=X.failures,X=X.numFailures;j+=F-X;for(var ae=0,ve=u(Q);ae<ve.length;ae++){var Fe=ve[ae];N.push(Q[Fe])}}var B=o.table.core,L=B.schema.primaryKey,V=L.outbound,I=L.extractKey,x=a.db._options.modifyChunkSize||200,N=[],j=0,z=[];return a.clone().primaryKeys().then(function(F){function Z(X){var ae=Math.min(x,F.length-X);return B.getMany({trans:s,keys:F.slice(X,X+ae),cache:"immutable"}).then(function(ve){for(var Fe=[],Te=[],Be=V?[]:null,je=[],Ne=0;Ne<ae;++Ne){var et=ve[Ne],tt={value:ye(et),primKey:F[X+Ne]};b.call(tt,tt.value,tt)!==!1&&(tt.value==null?je.push(F[X+Ne]):V||vt(I(et),I(tt.value))===0?(Te.push(tt.value),V&&Be.push(F[X+Ne])):(je.push(F[X+Ne]),Fe.push(tt.value)))}return Promise.resolve(0<Fe.length&&B.mutate({trans:s,type:"add",values:Fe}).then(function(ot){for(var rt in ot.failures)je.splice(parseInt(rt),1);D(Fe.length,ot)})).then(function(){return(0<Te.length||Q&&typeof t=="object")&&B.mutate({trans:s,type:"put",keys:Be,values:Te,criteria:Q,changeSpec:typeof t!="function"&&t,isAdditionalChunk:0<X}).then(function(ot){return D(Te.length,ot)})}).then(function(){return(0<je.length||Q&&t===ei)&&B.mutate({trans:s,type:"delete",keys:je,criteria:Q,isAdditionalChunk:0<X}).then(function(ot){return D(je.length,ot)})}).then(function(){return F.length>X+ae&&Z(X+x)})})}var Q=Gn(o)&&o.limit===1/0&&(typeof t!="function"||t===ei)&&{index:o.index,range:o.range};return Z(0).then(function(){if(0<N.length)throw new xe("Error modifying one or more objects",N,j,z);return F.length})})})},mt.prototype.delete=function(){var t=this._ctx,a=t.range;return Gn(t)&&(t.isPrimKey||a.type===3)?this._write(function(o){var s=t.table.core.schema.primaryKey,f=a;return t.table.core.count({trans:o,query:{index:s,range:f}}).then(function(d){return t.table.core.mutate({trans:o,type:"deleteRange",range:f}).then(function(b){var D=b.failures;if(b.lastResult,b.results,b=b.numFailures,b)throw new xe("Could not delete some values",Object.keys(D).map(function(B){return D[B]}),d-b);return d-b})})}):this.modify(ei)},mt);function mt(){}var ei=function(t,a){return a.value=null};function il(t,a){return t<a?-1:t===a?0:1}function al(t,a){return a<t?-1:t===a?0:1}function sn(t,a,o){return t=t instanceof Ji?new t.Collection(t):t,t._ctx.error=new(o||TypeError)(a),t}function Yn(t){return new t.Collection(t,function(){return Zi("")}).limit(0)}function Dr(t,a,o,s){var f,d,b,D,B,L,V,I=o.length;if(!o.every(function(j){return typeof j=="string"}))return sn(t,Vi);function x(j){f=j==="next"?function(F){return F.toUpperCase()}:function(F){return F.toLowerCase()},d=j==="next"?function(F){return F.toLowerCase()}:function(F){return F.toUpperCase()},b=j==="next"?il:al;var z=o.map(function(F){return{lower:d(F),upper:f(F)}}).sort(function(F,Z){return b(F.lower,Z.lower)});D=z.map(function(F){return F.upper}),B=z.map(function(F){return F.lower}),V=(L=j)==="next"?"":s}x("next"),t=new t.Collection(t,function(){return In(D[0],B[I-1]+s)}),t._ondirectionchange=function(j){x(j)};var N=0;return t._addAlgorithm(function(j,z,F){var Z=j.key;if(typeof Z!="string")return!1;var Q=d(Z);if(a(Q,B,N))return!0;for(var X=null,ae=N;ae<I;++ae){var ve=function(Fe,Te,Be,je,Ne,et){for(var tt=Math.min(Fe.length,je.length),ot=-1,rt=0;rt<tt;++rt){var gn=Te[rt];if(gn!==je[rt])return Ne(Fe[rt],Be[rt])<0?Fe.substr(0,rt)+Be[rt]+Be.substr(rt+1):Ne(Fe[rt],je[rt])<0?Fe.substr(0,rt)+je[rt]+Be.substr(rt+1):0<=ot?Fe.substr(0,ot)+Te[ot]+Be.substr(ot+1):null;Ne(Fe[rt],gn)<0&&(ot=rt)}return tt<je.length&&et==="next"?Fe+Be.substr(Fe.length):tt<Fe.length&&et==="prev"?Fe.substr(0,Be.length):ot<0?null:Fe.substr(0,ot)+je[ot]+Be.substr(ot+1)}(Z,Q,D[ae],B[ae],b,L);ve===null&&X===null?N=ae+1:(X===null||0<b(X,ve))&&(X=ve)}return z(X!==null?function(){j.continue(X+V)}:F),!1}),t}function In(t,a,o,s){return{type:2,lower:t,upper:a,lowerOpen:o,upperOpen:s}}function Zi(t){return{type:1,lower:t,upper:t}}var Ji=(Object.defineProperty(Kt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Kt.prototype.between=function(t,a,o,s){o=o!==!1,s=s===!0;try{return 0<this._cmp(t,a)||this._cmp(t,a)===0&&(o||s)&&(!o||!s)?Yn(this):new this.Collection(this,function(){return In(t,a,!o,!s)})}catch{return sn(this,Tn)}},Kt.prototype.equals=function(t){return t==null?sn(this,Tn):new this.Collection(this,function(){return Zi(t)})},Kt.prototype.above=function(t){return t==null?sn(this,Tn):new this.Collection(this,function(){return In(t,void 0,!0)})},Kt.prototype.aboveOrEqual=function(t){return t==null?sn(this,Tn):new this.Collection(this,function(){return In(t,void 0,!1)})},Kt.prototype.below=function(t){return t==null?sn(this,Tn):new this.Collection(this,function(){return In(void 0,t,!1,!0)})},Kt.prototype.belowOrEqual=function(t){return t==null?sn(this,Tn):new this.Collection(this,function(){return In(void 0,t)})},Kt.prototype.startsWith=function(t){return typeof t!="string"?sn(this,Vi):this.between(t,t+Nn,!0,!0)},Kt.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):Dr(this,function(a,o){return a.indexOf(o[0])===0},[t],Nn)},Kt.prototype.equalsIgnoreCase=function(t){return Dr(this,function(a,o){return a===o[0]},[t],"")},Kt.prototype.anyOfIgnoreCase=function(){var t=M.apply(C,arguments);return t.length===0?Yn(this):Dr(this,function(a,o){return o.indexOf(a)!==-1},t,"")},Kt.prototype.startsWithAnyOfIgnoreCase=function(){var t=M.apply(C,arguments);return t.length===0?Yn(this):Dr(this,function(a,o){return o.some(function(s){return a.indexOf(s)===0})},t,Nn)},Kt.prototype.anyOf=function(){var t=this,a=M.apply(C,arguments),o=this._cmp;try{a.sort(o)}catch{return sn(this,Tn)}if(a.length===0)return Yn(this);var s=new this.Collection(this,function(){return In(a[0],a[a.length-1])});s._ondirectionchange=function(d){o=d==="next"?t._ascending:t._descending,a.sort(o)};var f=0;return s._addAlgorithm(function(d,b,D){for(var B=d.key;0<o(B,a[f]);)if(++f===a.length)return b(D),!1;return o(B,a[f])===0||(b(function(){d.continue(a[f])}),!1)}),s},Kt.prototype.notEqual=function(t){return this.inAnyRange([[-1/0,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Kt.prototype.noneOf=function(){var t=M.apply(C,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return sn(this,Tn)}var a=t.reduce(function(o,s){return o?o.concat([[o[o.length-1][1],s]]):[[-1/0,s]]},null);return a.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(a,{includeLowers:!1,includeUppers:!1})},Kt.prototype.inAnyRange=function(Z,a){var o=this,s=this._cmp,f=this._ascending,d=this._descending,b=this._min,D=this._max;if(Z.length===0)return Yn(this);if(!Z.every(function(Q){return Q[0]!==void 0&&Q[1]!==void 0&&f(Q[0],Q[1])<=0}))return sn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Ee.InvalidArgument);var B=!a||a.includeLowers!==!1,L=a&&a.includeUppers===!0,V,I=f;function x(Q,X){return I(Q[0],X[0])}try{(V=Z.reduce(function(Q,X){for(var ae=0,ve=Q.length;ae<ve;++ae){var Fe=Q[ae];if(s(X[0],Fe[1])<0&&0<s(X[1],Fe[0])){Fe[0]=b(Fe[0],X[0]),Fe[1]=D(Fe[1],X[1]);break}}return ae===ve&&Q.push(X),Q},[])).sort(x)}catch{return sn(this,Tn)}var N=0,j=L?function(Q){return 0<f(Q,V[N][1])}:function(Q){return 0<=f(Q,V[N][1])},z=B?function(Q){return 0<d(Q,V[N][0])}:function(Q){return 0<=d(Q,V[N][0])},F=j,Z=new this.Collection(this,function(){return In(V[0][0],V[V.length-1][1],!B,!L)});return Z._ondirectionchange=function(Q){I=Q==="next"?(F=j,f):(F=z,d),V.sort(x)},Z._addAlgorithm(function(Q,X,ae){for(var ve,Fe=Q.key;F(Fe);)if(++N===V.length)return X(ae),!1;return!j(ve=Fe)&&!z(ve)||(o._cmp(Fe,V[N][1])===0||o._cmp(Fe,V[N][0])===0||X(function(){I===f?Q.continue(V[N][0]):Q.continue(V[N][1])}),!1)}),Z},Kt.prototype.startsWithAnyOf=function(){var t=M.apply(C,arguments);return t.every(function(a){return typeof a=="string"})?t.length===0?Yn(this):this.inAnyRange(t.map(function(a){return[a,a+Nn]})):sn(this,"startsWithAnyOf() only works with strings")},Kt);function Kt(){}function wn(t){return ze(function(a){return ir(a),t(a.target.error),!1})}function ir(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var ar="storagemutated",ti="x-storagemutated-1",Pn=tr(null,ar),ol=(kn.prototype._lock=function(){return k(!Re.global),++this._reculock,this._reculock!==1||Re.global||(Re.lockOwnerFor=this),this},kn.prototype._unlock=function(){if(k(!Re.global),--this._reculock==0)for(Re.global||(Re.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var t=this._blockedFuncs.shift();try{bn(t[1],t[0])}catch{}}return this},kn.prototype._locked=function(){return this._reculock&&Re.lockOwnerFor!==this},kn.prototype.create=function(t){var a=this;if(!this.mode)return this;var o=this.db.idbdb,s=this.db._state.dbOpenError;if(k(!this.idbtrans),!t&&!o)switch(s&&s.name){case"DatabaseClosedError":throw new Ee.DatabaseClosed(s);case"MissingAPIError":throw new Ee.MissingAPI(s.message,s);default:throw new Ee.OpenFailed(s)}if(!this.active)throw new Ee.TransactionInactive;return k(this._completion._state===null),(t=this.idbtrans=t||(this.db.core||o).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=ze(function(f){ir(f),a._reject(t.error)}),t.onabort=ze(function(f){ir(f),a.active&&a._reject(new Ee.Abort(t.error)),a.active=!1,a.on("abort").fire(f)}),t.oncomplete=ze(function(){a.active=!1,a._resolve(),"mutatedParts"in t&&Pn.storagemutated.fire(t.mutatedParts)}),this},kn.prototype._promise=function(t,a,o){var s=this;if(t==="readwrite"&&this.mode!=="readwrite")return st(new Ee.ReadOnly("Transaction is readonly"));if(!this.active)return st(new Ee.TransactionInactive);if(this._locked())return new ke(function(d,b){s._blockedFuncs.push([function(){s._promise(t,a,o).then(d,b)},Re])});if(o)return Bt(function(){var d=new ke(function(b,D){s._lock();var B=a(b,D,s);B&&B.then&&B.then(b,D)});return d.finally(function(){return s._unlock()}),d._lib=!0,d});var f=new ke(function(d,b){var D=a(d,b,s);D&&D.then&&D.then(d,b)});return f._lib=!0,f},kn.prototype._root=function(){return this.parent?this.parent._root():this},kn.prototype.waitFor=function(t){var a,o=this._root(),s=ke.resolve(t);o._waitingFor?o._waitingFor=o._waitingFor.then(function(){return s}):(o._waitingFor=s,o._waitingQueue=[],a=o.idbtrans.objectStore(o.storeNames[0]),function d(){for(++o._spinCount;o._waitingQueue.length;)o._waitingQueue.shift()();o._waitingFor&&(a.get(-1/0).onsuccess=d)}());var f=o._waitingFor;return new ke(function(d,b){s.then(function(D){return o._waitingQueue.push(ze(d.bind(null,D)))},function(D){return o._waitingQueue.push(ze(b.bind(null,D)))}).finally(function(){o._waitingFor===f&&(o._waitingFor=null)})})},kn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Ee.Abort))},kn.prototype.table=function(t){var a=this._memoizedTables||(this._memoizedTables={});if(w(a,t))return a[t];var o=this.schema[t];if(!o)throw new Ee.NotFound("Table "+t+" not part of transaction");return o=new this.db.Table(t,o,this),o.core=this.db.core.table(t),a[t]=o},kn);function kn(){}function ni(t,a,o,s,f,d,b){return{name:t,keyPath:a,unique:o,multi:s,auto:f,compound:d,src:(o&&!b?"&":"")+(s?"*":"")+(f?"++":"")+Qi(a)}}function Qi(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function ri(t,a,o){return{name:t,primKey:a,indexes:o,mappedClass:null,idxByName:(s=function(f){return[f.name,f]},o.reduce(function(f,d,b){return b=s(d,b),b&&(f[b[0]]=b[1]),f},{}))};var s}var or=function(t){try{return t.only([[]]),or=function(){return[[]]},[[]]}catch{return or=function(){return Nn},Nn}};function ii(t){return t==null?function(){}:typeof t=="string"?(a=t).split(".").length===1?function(o){return o[a]}:function(o){return ie(o,a)}:function(o){return ie(o,t)};var a}function Xi(t){return[].slice.call(t)}var ll=0;function lr(t){return t==null?":id":typeof t=="string"?t:"[".concat(t.join("+"),"]")}function sl(t,a,B){function s(F){if(F.type===3)return null;if(F.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var N=F.lower,j=F.upper,z=F.lowerOpen,F=F.upperOpen;return N===void 0?j===void 0?null:a.upperBound(j,!!F):j===void 0?a.lowerBound(N,!!z):a.bound(N,j,!!z,!!F)}function f(x){var N,j=x.name;return{name:j,schema:x,mutate:function(z){var F=z.trans,Z=z.type,Q=z.keys,X=z.values,ae=z.range;return new Promise(function(ve,Fe){ve=ze(ve);var Te=F.objectStore(j),Be=Te.keyPath==null,je=Z==="put"||Z==="add";if(!je&&Z!=="delete"&&Z!=="deleteRange")throw new Error("Invalid operation type: "+Z);var Ne,et=(Q||X||{length:1}).length;if(Q&&X&&Q.length!==X.length)throw new Error("Given keys array must have same length as given values array.");if(et===0)return ve({numFailures:0,failures:{},results:[],lastResult:void 0});function tt(tn){++gn,ir(tn)}var ot=[],rt=[],gn=0;if(Z==="deleteRange"){if(ae.type===4)return ve({numFailures:gn,failures:rt,results:[],lastResult:void 0});ae.type===3?ot.push(Ne=Te.clear()):ot.push(Ne=Te.delete(s(ae)))}else{var Be=je?Be?[X,Q]:[X,null]:[Q,null],it=Be[0],Zt=Be[1];if(je)for(var Jt=0;Jt<et;++Jt)ot.push(Ne=Zt&&Zt[Jt]!==void 0?Te[Z](it[Jt],Zt[Jt]):Te[Z](it[Jt])),Ne.onerror=tt;else for(Jt=0;Jt<et;++Jt)ot.push(Ne=Te[Z](it[Jt])),Ne.onerror=tt}function Br(tn){tn=tn.target.result,ot.forEach(function(jn,Di){return jn.error!=null&&(rt[Di]=jn.error)}),ve({numFailures:gn,failures:rt,results:Z==="delete"?Q:ot.map(function(jn){return jn.result}),lastResult:tn})}Ne.onerror=function(tn){tt(tn),Br(tn)},Ne.onsuccess=Br})},getMany:function(z){var F=z.trans,Z=z.keys;return new Promise(function(Q,X){Q=ze(Q);for(var ae,ve=F.objectStore(j),Fe=Z.length,Te=new Array(Fe),Be=0,je=0,Ne=function(ot){ot=ot.target,Te[ot._pos]=ot.result,++je===Be&&Q(Te)},et=wn(X),tt=0;tt<Fe;++tt)Z[tt]!=null&&((ae=ve.get(Z[tt]))._pos=tt,ae.onsuccess=Ne,ae.onerror=et,++Be);Be===0&&Q(Te)})},get:function(z){var F=z.trans,Z=z.key;return new Promise(function(Q,X){Q=ze(Q);var ae=F.objectStore(j).get(Z);ae.onsuccess=function(ve){return Q(ve.target.result)},ae.onerror=wn(X)})},query:(N=L,function(z){return new Promise(function(F,Z){F=ze(F);var Q,X,ae,Be=z.trans,ve=z.values,Fe=z.limit,Ne=z.query,Te=Fe===1/0?void 0:Fe,je=Ne.index,Ne=Ne.range,Be=Be.objectStore(j),je=je.isPrimaryKey?Be:Be.index(je.name),Ne=s(Ne);if(Fe===0)return F({result:[]});N?((Te=ve?je.getAll(Ne,Te):je.getAllKeys(Ne,Te)).onsuccess=function(et){return F({result:et.target.result})},Te.onerror=wn(Z)):(Q=0,X=!ve&&"openKeyCursor"in je?je.openKeyCursor(Ne):je.openCursor(Ne),ae=[],X.onsuccess=function(et){var tt=X.result;return tt?(ae.push(ve?tt.value:tt.primaryKey),++Q===Fe?F({result:ae}):void tt.continue()):F({result:ae})},X.onerror=wn(Z))})}),openCursor:function(z){var F=z.trans,Z=z.values,Q=z.query,X=z.reverse,ae=z.unique;return new Promise(function(ve,Fe){ve=ze(ve);var je=Q.index,Te=Q.range,Be=F.objectStore(j),Be=je.isPrimaryKey?Be:Be.index(je.name),je=X?ae?"prevunique":"prev":ae?"nextunique":"next",Ne=!Z&&"openKeyCursor"in Be?Be.openKeyCursor(s(Te),je):Be.openCursor(s(Te),je);Ne.onerror=wn(Fe),Ne.onsuccess=ze(function(et){var tt,ot,rt,gn,it=Ne.result;it?(it.___id=++ll,it.done=!1,tt=it.continue.bind(it),ot=(ot=it.continuePrimaryKey)&&ot.bind(it),rt=it.advance.bind(it),gn=function(){throw new Error("Cursor not stopped")},it.trans=F,it.stop=it.continue=it.continuePrimaryKey=it.advance=function(){throw new Error("Cursor not started")},it.fail=ze(Fe),it.next=function(){var Zt=this,Jt=1;return this.start(function(){return Jt--?Zt.continue():Zt.stop()}).then(function(){return Zt})},it.start=function(Zt){function Jt(){if(Ne.result)try{Zt()}catch(tn){it.fail(tn)}else it.done=!0,it.start=function(){throw new Error("Cursor behind last entry")},it.stop()}var Br=new Promise(function(tn,jn){tn=ze(tn),Ne.onerror=wn(jn),it.fail=jn,it.stop=function(Di){it.stop=it.continue=it.continuePrimaryKey=it.advance=gn,tn(Di)}});return Ne.onsuccess=ze(function(tn){Ne.onsuccess=Jt,Jt()}),it.continue=tt,it.continuePrimaryKey=ot,it.advance=rt,Jt(),Br},ve(it)):ve(null)},Fe)})},count:function(z){var F=z.query,Z=z.trans,Q=F.index,X=F.range;return new Promise(function(ae,ve){var Fe=Z.objectStore(j),Te=Q.isPrimaryKey?Fe:Fe.index(Q.name),Fe=s(X),Te=Fe?Te.count(Fe):Te.count();Te.onsuccess=ze(function(Be){return ae(Be.target.result)}),Te.onerror=wn(ve)})}}}var d,b,D,V=(b=B,D=Xi((d=t).objectStoreNames),{schema:{name:d.name,tables:D.map(function(x){return b.objectStore(x)}).map(function(x){var N=x.keyPath,F=x.autoIncrement,j=m(N),z={},F={name:x.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:N==null,compound:j,keyPath:N,autoIncrement:F,unique:!0,extractKey:ii(N)},indexes:Xi(x.indexNames).map(function(Z){return x.index(Z)}).map(function(ae){var Q=ae.name,X=ae.unique,ve=ae.multiEntry,ae=ae.keyPath,ve={name:Q,compound:m(ae),keyPath:ae,unique:X,multiEntry:ve,extractKey:ii(ae)};return z[lr(ae)]=ve}),getIndexByKeyPath:function(Z){return z[lr(Z)]}};return z[":id"]=F.primaryKey,N!=null&&(z[lr(N)]=F.primaryKey),F})},hasGetAll:0<D.length&&"getAll"in b.objectStore(D[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),B=V.schema,L=V.hasGetAll,V=B.tables.map(f),I={};return V.forEach(function(x){return I[x.name]=x}),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(x){if(!I[x])throw new Error("Table '".concat(x,"' not found"));return I[x]},MIN_KEY:-1/0,MAX_KEY:or(a),schema:B}}function ul(t,a,o,s){var f=o.IDBKeyRange;return o.indexedDB,{dbcore:(s=sl(a,f,s),t.dbcore.reduce(function(d,b){return b=b.create,r(r({},d),b(d))},s))}}function Er(t,s){var o=s.db,s=ul(t._middlewares,o,t._deps,s);t.core=s.dbcore,t.tables.forEach(function(f){var d=f.name;t.core.schema.tables.some(function(b){return b.name===d})&&(f.core=t.core.table(d),t[d]instanceof t.Table&&(t[d].core=f.core))})}function Sr(t,a,o,s){o.forEach(function(f){var d=s[f];a.forEach(function(b){var D=function B(L,V){return U(L,V)||(L=v(L))&&B(L,V)}(b,f);(!D||"value"in D&&D.value===void 0)&&(b===t.Transaction.prototype||b instanceof t.Transaction?ee(b,f,{get:function(){return this.table(f)},set:function(B){K(this,f,{value:B,writable:!0,configurable:!0,enumerable:!0})}}):b[f]=new t.Table(f,d))})})}function ai(t,a){a.forEach(function(o){for(var s in o)o[s]instanceof t.Table&&delete o[s]})}function cl(t,a){return t._cfg.version-a._cfg.version}function fl(t,a,o,s){var f=t._dbSchema;o.objectStoreNames.contains("$meta")&&!f.$meta&&(f.$meta=ri("$meta",ea("")[0],[]),t._storeNames.push("$meta"));var d=t._createTransaction("readwrite",t._storeNames,f);d.create(o),d._completion.catch(s);var b=d._reject.bind(d),D=Re.transless||Re;Bt(function(){return Re.trans=d,Re.transless=D,a!==0?(Er(t,o),L=a,((B=d).storeNames.includes("$meta")?B.table("$meta").get("version").then(function(V){return V??L}):ke.resolve(L)).then(function(V){return x=V,N=d,j=o,z=[],V=(I=t)._versions,F=I._dbSchema=Tr(0,I.idbdb,j),(V=V.filter(function(Z){return Z._cfg.version>=x})).length!==0?(V.forEach(function(Z){z.push(function(){var Q=F,X=Z._cfg.dbschema;Ar(I,Q,j),Ar(I,X,j),F=I._dbSchema=X;var ae=oi(Q,X);ae.add.forEach(function(je){li(j,je[0],je[1].primKey,je[1].indexes)}),ae.change.forEach(function(je){if(je.recreate)throw new Ee.Upgrade("Not yet support for changing primary key");var Ne=j.objectStore(je.name);je.add.forEach(function(et){return Cr(Ne,et)}),je.change.forEach(function(et){Ne.deleteIndex(et.name),Cr(Ne,et)}),je.del.forEach(function(et){return Ne.deleteIndex(et)})});var ve=Z._cfg.contentUpgrade;if(ve&&Z._cfg.version>x){Er(I,j),N._memoizedTables={};var Fe=pe(X);ae.del.forEach(function(je){Fe[je]=Q[je]}),ai(I,[I.Transaction.prototype]),Sr(I,[I.Transaction.prototype],u(Fe),Fe),N.schema=Fe;var Te,Be=G(ve);return Be&&nn(),ae=ke.follow(function(){var je;(Te=ve(N))&&Be&&(je=Gt.bind(null,null),Te.then(je,je))}),Te&&typeof Te.then=="function"?ke.resolve(Te):ae.then(function(){return Te})}}),z.push(function(Q){var X,ae,ve=Z._cfg.dbschema;X=ve,ae=Q,[].slice.call(ae.db.objectStoreNames).forEach(function(Fe){return X[Fe]==null&&ae.db.deleteObjectStore(Fe)}),ai(I,[I.Transaction.prototype]),Sr(I,[I.Transaction.prototype],I._storeNames,I._dbSchema),N.schema=I._dbSchema}),z.push(function(Q){I.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(I.idbdb.version/10)===Z._cfg.version?(I.idbdb.deleteObjectStore("$meta"),delete I._dbSchema.$meta,I._storeNames=I._storeNames.filter(function(X){return X!=="$meta"})):Q.objectStore("$meta").put(Z._cfg.version,"version"))})}),function Z(){return z.length?ke.resolve(z.shift()(N.idbtrans)).then(Z):ke.resolve()}().then(function(){$i(F,j)})):ke.resolve();var I,x,N,j,z,F}).catch(b)):(u(f).forEach(function(V){li(o,V,f[V].primKey,f[V].indexes)}),Er(t,o),void ke.follow(function(){return t.on.populate.fire(d)}).catch(b));var B,L})}function dl(t,a){$i(t._dbSchema,a),a.db.version%10!=0||a.objectStoreNames.contains("$meta")||a.db.createObjectStore("$meta").add(Math.ceil(a.db.version/10-1),"version");var o=Tr(0,t.idbdb,a);Ar(t,t._dbSchema,a);for(var s=0,f=oi(o,t._dbSchema).change;s<f.length;s++){var d=function(b){if(b.change.length||b.recreate)return console.warn("Unable to patch indexes of table ".concat(b.name," because it has changes on the type of index or primary key.")),{value:void 0};var D=a.objectStore(b.name);b.add.forEach(function(B){ut&&console.debug("Dexie upgrade patch: Creating missing index ".concat(b.name,".").concat(B.src)),Cr(D,B)})}(f[s]);if(typeof d=="object")return d.value}}function oi(t,a){var o,s={del:[],add:[],change:[]};for(o in t)a[o]||s.del.push(o);for(o in a){var f=t[o],d=a[o];if(f){var b={name:o,def:d,recreate:!1,del:[],add:[],change:[]};if(""+(f.primKey.keyPath||"")!=""+(d.primKey.keyPath||"")||f.primKey.auto!==d.primKey.auto)b.recreate=!0,s.change.push(b);else{var D=f.idxByName,B=d.idxByName,L=void 0;for(L in D)B[L]||b.del.push(L);for(L in B){var V=D[L],I=B[L];V?V.src!==I.src&&b.change.push(I):b.add.push(I)}(0<b.del.length||0<b.add.length||0<b.change.length)&&s.change.push(b)}}else s.add.push([o,d])}return s}function li(t,a,o,s){var f=t.db.createObjectStore(a,o.keyPath?{keyPath:o.keyPath,autoIncrement:o.auto}:{autoIncrement:o.auto});return s.forEach(function(d){return Cr(f,d)}),f}function $i(t,a){u(t).forEach(function(o){a.db.objectStoreNames.contains(o)||(ut&&console.debug("Dexie: Creating missing table",o),li(a,o,t[o].primKey,t[o].indexes))})}function Cr(t,a){t.createIndex(a.name,a.keyPath,{unique:a.unique,multiEntry:a.multi})}function Tr(t,a,o){var s={};return T(a.objectStoreNames,0).forEach(function(f){for(var d=o.objectStore(f),b=ni(Qi(L=d.keyPath),L||"",!0,!1,!!d.autoIncrement,L&&typeof L!="string",!0),D=[],B=0;B<d.indexNames.length;++B){var V=d.index(d.indexNames[B]),L=V.keyPath,V=ni(V.name,L,!!V.unique,!!V.multiEntry,!1,L&&typeof L!="string",!1);D.push(V)}s[f]=ri(f,b,D)}),s}function Ar(t,a,o){for(var s=o.db.objectStoreNames,f=0;f<s.length;++f){var d=s[f],b=o.objectStore(d);t._hasGetAll="getAll"in b;for(var D=0;D<b.indexNames.length;++D){var B=b.indexNames[D],L=b.index(B).keyPath,V=typeof L=="string"?L:"["+T(L).join("+")+"]";!a[d]||(L=a[d].idxByName[V])&&(L.name=B,delete a[d].idxByName[V],a[d].idxByName[B]=L)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&c.WorkerGlobalScope&&c instanceof c.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}function ea(t){return t.split(",").map(function(a,o){var s=(a=a.trim()).replace(/([&*]|\+\+)/g,""),f=/^\[/.test(s)?s.match(/^\[(.*)\]$/)[1].split("+"):s;return ni(s,f||null,/\&/.test(a),/\*/.test(a),/\+\+/.test(a),m(f),o===0)})}var hl=(Or.prototype._parseStoresSpec=function(t,a){u(t).forEach(function(o){if(t[o]!==null){var s=ea(t[o]),f=s.shift();if(f.unique=!0,f.multi)throw new Ee.Schema("Primary key cannot be multi-valued");s.forEach(function(d){if(d.auto)throw new Ee.Schema("Only primary key can be marked as autoIncrement (++)");if(!d.keyPath)throw new Ee.Schema("Index must have a name and cannot be an empty string")}),a[o]=ri(o,f,s)}})},Or.prototype.stores=function(o){var a=this.db;this._cfg.storesSource=this._cfg.storesSource?_(this._cfg.storesSource,o):o;var o=a._versions,s={},f={};return o.forEach(function(d){_(s,d._cfg.storesSource),f=d._cfg.dbschema={},d._parseStoresSpec(s,f)}),a._dbSchema=f,ai(a,[a._allTables,a,a.Transaction.prototype]),Sr(a,[a._allTables,a,a.Transaction.prototype,this._cfg.tables],u(f),f),a._storeNames=u(f),this},Or.prototype.upgrade=function(t){return this._cfg.contentUpgrade=nt(this._cfg.contentUpgrade||Se,t),this},Or);function Or(){}function si(t,a){var o=t._dbNamesDB;return o||(o=t._dbNamesDB=new On(yr,{addons:[],indexedDB:t,IDBKeyRange:a})).version(1).stores({dbnames:"name"}),o.table("dbnames")}function ui(t){return t&&typeof t.databases=="function"}function ci(t){return Bt(function(){return Re.letThrough=!0,t()})}function fi(t){return!("from"in t)}var Yt=function(t,a){if(!this){var o=new Yt;return t&&"d"in t&&_(o,t),o}_(this,arguments.length?{d:1,from:t,to:1<arguments.length?a:t}:{d:0})};function sr(t,a,o){var s=vt(a,o);if(!isNaN(s)){if(0<s)throw RangeError();if(fi(t))return _(t,{from:a,to:o,d:1});var f=t.l,s=t.r;if(vt(o,t.from)<0)return f?sr(f,a,o):t.l={from:a,to:o,d:1,l:null,r:null},ta(t);if(0<vt(a,t.to))return s?sr(s,a,o):t.r={from:a,to:o,d:1,l:null,r:null},ta(t);vt(a,t.from)<0&&(t.from=a,t.l=null,t.d=s?s.d+1:1),0<vt(o,t.to)&&(t.to=o,t.r=null,t.d=t.l?t.l.d+1:1),o=!t.r,f&&!t.l&&ur(t,f),s&&o&&ur(t,s)}}function ur(t,a){fi(a)||function o(s,B){var d=B.from,b=B.to,D=B.l,B=B.r;sr(s,d,b),D&&o(s,D),B&&o(s,B)}(t,a)}function Ir(t,a){var o=di(a),s=o.next();if(s.done)return!1;for(var f=s.value,d=di(t),b=d.next(f.from),D=b.value;!s.done&&!b.done;){if(vt(D.from,f.to)<=0&&0<=vt(D.to,f.from))return!0;vt(f.from,D.from)<0?f=(s=o.next(D.from)).value:D=(b=d.next(f.from)).value}return!1}function di(t){var a=fi(t)?null:{s:0,n:t};return{next:function(o){for(var s=0<arguments.length;a;)switch(a.s){case 0:if(a.s=1,s)for(;a.n.l&&vt(o,a.n.from)<0;)a={up:a,n:a.n.l,s:1};else for(;a.n.l;)a={up:a,n:a.n.l,s:1};case 1:if(a.s=2,!s||vt(o,a.n.to)<=0)return{value:a.n,done:!1};case 2:if(a.n.r){a.s=3,a={up:a,n:a.n.r,s:0};continue}case 3:a=a.up}return{done:!0}}}}function ta(t){var a,o,s=(((a=t.r)===null||a===void 0?void 0:a.d)||0)-(((o=t.l)===null||o===void 0?void 0:o.d)||0),f=1<s?"r":s<-1?"l":"";f&&(a=f=="r"?"l":"r",o=r({},t),s=t[f],t.from=s.from,t.to=s.to,t[f]=s[f],o[f]=s[a],(t[a]=o).d=na(o)),t.d=na(t)}function na(o){var a=o.r,o=o.l;return(a?o?Math.max(a.d,o.d):a.d:o?o.d:0)+1}function Pr(t,a){return u(a).forEach(function(o){t[o]?ur(t[o],a[o]):t[o]=function s(f){var d,b,D={};for(d in f)w(f,d)&&(b=f[d],D[d]=!b||typeof b!="object"||ge.has(b.constructor)?b:s(b));return D}(a[o])}),t}function hi(t,a){return t.all||a.all||Object.keys(t).some(function(o){return a[o]&&Ir(a[o],t[o])})}O(Yt.prototype,((dn={add:function(t){return ur(this,t),this},addKey:function(t){return sr(this,t,t),this},addKeys:function(t){var a=this;return t.forEach(function(o){return sr(a,o,o)}),this}})[Ce]=function(){return di(this)},dn));var Kn={},pi={},mi=!1;function Mr(t){Pr(pi,t),mi||(mi=!0,setTimeout(function(){mi=!1,vi(pi,!(pi={}))},0))}function vi(t,a){a===void 0&&(a=!1);var o=new Set;if(t.all)for(var s=0,f=Object.values(Kn);s<f.length;s++)ra(b=f[s],t,o,a);else for(var d in t){var b,D=/^idb\:\/\/(.*)\/(.*)\//.exec(d);D&&(d=D[1],D=D[2],(b=Kn["idb://".concat(d,"/").concat(D)])&&ra(b,t,o,a))}o.forEach(function(B){return B()})}function ra(t,a,o,s){for(var f=[],d=0,b=Object.entries(t.queries.query);d<b.length;d++){for(var D=b[d],B=D[0],L=[],V=0,I=D[1];V<I.length;V++){var x=I[V];hi(a,x.obsSet)?x.subscribers.forEach(function(F){return o.add(F)}):s&&L.push(x)}s&&f.push([B,L])}if(s)for(var N=0,j=f;N<j.length;N++){var z=j[N],B=z[0],L=z[1];t.queries.query[B]=L}}function pl(t){var a=t._state,o=t._deps.indexedDB;if(a.isBeingOpened||t.idbdb)return a.dbReadyPromise.then(function(){return a.dbOpenError?st(a.dbOpenError):t});a.isBeingOpened=!0,a.dbOpenError=null,a.openComplete=!1;var s=a.openCanceller,f=Math.round(10*t.verno),d=!1;function b(){if(a.openCanceller!==s)throw new Ee.DatabaseClosed("db.open() was cancelled")}function D(){return new ke(function(x,N){if(b(),!o)throw new Ee.MissingAPI;var j=t.name,z=a.autoSchema||!f?o.open(j):o.open(j,f);if(!z)throw new Ee.MissingAPI;z.onerror=wn(N),z.onblocked=ze(t._fireOnBlocked),z.onupgradeneeded=ze(function(F){var Z;V=z.transaction,a.autoSchema&&!t._options.allowEmptyDB?(z.onerror=ir,V.abort(),z.result.close(),(Z=o.deleteDatabase(j)).onsuccess=Z.onerror=ze(function(){N(new Ee.NoSuchDatabase("Database ".concat(j," doesnt exist")))})):(V.onerror=wn(N),F=F.oldVersion>Math.pow(2,62)?0:F.oldVersion,I=F<1,t.idbdb=z.result,d&&dl(t,V),fl(t,F/10,V,N))},N),z.onsuccess=ze(function(){V=null;var F,Z,Q,X,ae,ve=t.idbdb=z.result,Fe=T(ve.objectStoreNames);if(0<Fe.length)try{var Te=ve.transaction((X=Fe).length===1?X[0]:X,"readonly");if(a.autoSchema)Z=ve,Q=Te,(F=t).verno=Z.version/10,Q=F._dbSchema=Tr(0,Z,Q),F._storeNames=T(Z.objectStoreNames,0),Sr(F,[F._allTables],u(Q),Q);else if(Ar(t,t._dbSchema,Te),((ae=oi(Tr(0,(ae=t).idbdb,Te),ae._dbSchema)).add.length||ae.change.some(function(Be){return Be.add.length||Be.change.length}))&&!d)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),ve.close(),f=ve.version+1,d=!0,x(D());Er(t,Te)}catch{}Wn.push(t),ve.onversionchange=ze(function(Be){a.vcFired=!0,t.on("versionchange").fire(Be)}),ve.onclose=ze(function(Be){t.on("close").fire(Be)}),I&&(ae=t._deps,Te=j,ve=ae.indexedDB,ae=ae.IDBKeyRange,ui(ve)||Te===yr||si(ve,ae).put({name:Te}).catch(Se)),x()},N)}).catch(function(x){switch(x==null?void 0:x.name){case"UnknownError":if(0<a.PR1398_maxLoop)return a.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),D();break;case"VersionError":if(0<f)return f=0,D()}return ke.reject(x)})}var B,L=a.dbReadyResolve,V=null,I=!1;return ke.race([s,(typeof navigator>"u"?ke.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(x){function N(){return indexedDB.databases().finally(x)}B=setInterval(N,100),N()}).finally(function(){return clearInterval(B)}):Promise.resolve()).then(D)]).then(function(){return b(),a.onReadyBeingFired=[],ke.resolve(ci(function(){return t.on.ready.fire(t.vip)})).then(function x(){if(0<a.onReadyBeingFired.length){var N=a.onReadyBeingFired.reduce(nt,Se);return a.onReadyBeingFired=[],ke.resolve(ci(function(){return N(t.vip)})).then(x)}})}).finally(function(){a.openCanceller===s&&(a.onReadyBeingFired=null,a.isBeingOpened=!1)}).catch(function(x){a.dbOpenError=x;try{V&&V.abort()}catch{}return s===a.openCanceller&&t._close(),st(x)}).finally(function(){a.openComplete=!0,L()}).then(function(){var x;return I&&(x={},t.tables.forEach(function(N){N.schema.indexes.forEach(function(j){j.name&&(x["idb://".concat(t.name,"/").concat(N.name,"/").concat(j.name)]=new Yt(-1/0,[[[]]]))}),x["idb://".concat(t.name,"/").concat(N.name,"/")]=x["idb://".concat(t.name,"/").concat(N.name,"/:dels")]=new Yt(-1/0,[[[]]])}),Pn(ar).fire(x),vi(x,!0)),t})}function gi(t){function a(d){return t.next(d)}var o=f(a),s=f(function(d){return t.throw(d)});function f(d){return function(B){var D=d(B),B=D.value;return D.done?B:B&&typeof B.then=="function"?B.then(o,s):m(B)?Promise.all(B).then(o,s):o(B)}}return f(a)()}function Lr(t,a,o){for(var s=m(t)?t.slice():[t],f=0;f<o;++f)s.push(a);return s}var ml={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return r(r({},t),{table:function(a){var o=t.table(a),s=o.schema,f={},d=[];function b(I,x,N){var j=lr(I),z=f[j]=f[j]||[],F=I==null?0:typeof I=="string"?1:I.length,Z=0<x,Z=r(r({},N),{name:Z?"".concat(j,"(virtual-from:").concat(N.name,")"):N.name,lowLevelIndex:N,isVirtual:Z,keyTail:x,keyLength:F,extractKey:ii(I),unique:!Z&&N.unique});return z.push(Z),Z.isPrimaryKey||d.push(Z),1<F&&b(F===2?I[0]:I.slice(0,F-1),x+1,N),z.sort(function(Q,X){return Q.keyTail-X.keyTail}),Z}a=b(s.primaryKey.keyPath,0,s.primaryKey),f[":id"]=[a];for(var D=0,B=s.indexes;D<B.length;D++){var L=B[D];b(L.keyPath,0,L)}function V(I){var x,N=I.query.index;return N.isVirtual?r(r({},I),{query:{index:N.lowLevelIndex,range:(x=I.query.range,N=N.keyTail,{type:x.type===1?2:x.type,lower:Lr(x.lower,x.lowerOpen?t.MAX_KEY:t.MIN_KEY,N),lowerOpen:!0,upper:Lr(x.upper,x.upperOpen?t.MIN_KEY:t.MAX_KEY,N),upperOpen:!0})}}):I}return r(r({},o),{schema:r(r({},s),{primaryKey:a,indexes:d,getIndexByKeyPath:function(I){return(I=f[lr(I)])&&I[0]}}),count:function(I){return o.count(V(I))},query:function(I){return o.query(V(I))},openCursor:function(I){var x=I.query.index,N=x.keyTail,j=x.isVirtual,z=x.keyLength;return j?o.openCursor(V(I)).then(function(Z){return Z&&F(Z)}):o.openCursor(I);function F(Z){return Object.create(Z,{continue:{value:function(Q){Q!=null?Z.continue(Lr(Q,I.reverse?t.MAX_KEY:t.MIN_KEY,N)):I.unique?Z.continue(Z.key.slice(0,z).concat(I.reverse?t.MIN_KEY:t.MAX_KEY,N)):Z.continue()}},continuePrimaryKey:{value:function(Q,X){Z.continuePrimaryKey(Lr(Q,t.MAX_KEY,N),X)}},primaryKey:{get:function(){return Z.primaryKey}},key:{get:function(){var Q=Z.key;return z===1?Q[0]:Q.slice(0,z)}},value:{get:function(){return Z.value}}})}}})}})}};function _i(t,a,o,s){return o=o||{},s=s||"",u(t).forEach(function(f){var d,b,D;w(a,f)?(d=t[f],b=a[f],typeof d=="object"&&typeof b=="object"&&d&&b?(D=Pe(d))!==Pe(b)?o[s+f]=a[f]:D==="Object"?_i(d,b,o,s+f+"."):d!==b&&(o[s+f]=a[f]):d!==b&&(o[s+f]=a[f])):o[s+f]=void 0}),u(a).forEach(function(f){w(t,f)||(o[s+f]=a[f])}),o}function yi(t,a){return a.type==="delete"?a.keys:a.keys||a.values.map(t.extractKey)}var vl={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return r(r({},t),{table:function(a){var o=t.table(a),s=o.schema.primaryKey;return r(r({},o),{mutate:function(f){var d=Re.trans,b=d.table(a).hook,D=b.deleting,B=b.creating,L=b.updating;switch(f.type){case"add":if(B.fire===Se)break;return d._promise("readwrite",function(){return V(f)},!0);case"put":if(B.fire===Se&&L.fire===Se)break;return d._promise("readwrite",function(){return V(f)},!0);case"delete":if(D.fire===Se)break;return d._promise("readwrite",function(){return V(f)},!0);case"deleteRange":if(D.fire===Se)break;return d._promise("readwrite",function(){return function I(x,N,j){return o.query({trans:x,values:!1,query:{index:s,range:N},limit:j}).then(function(z){var F=z.result;return V({type:"delete",keys:F,trans:x}).then(function(Z){return 0<Z.numFailures?Promise.reject(Z.failures[0]):F.length<j?{failures:[],numFailures:0,lastResult:void 0}:I(x,r(r({},N),{lower:F[F.length-1],lowerOpen:!0}),j)})})}(f.trans,f.range,1e4)},!0)}return o.mutate(f);function V(I){var x,N,j,z=Re.trans,F=I.keys||yi(s,I);if(!F)throw new Error("Keys missing");return(I=I.type==="add"||I.type==="put"?r(r({},I),{keys:F}):r({},I)).type!=="delete"&&(I.values=l([],I.values)),I.keys&&(I.keys=l([],I.keys)),x=o,j=F,((N=I).type==="add"?Promise.resolve([]):x.getMany({trans:N.trans,keys:j,cache:"immutable"})).then(function(Z){var Q=F.map(function(X,ae){var ve,Fe,Te,Be=Z[ae],je={onerror:null,onsuccess:null};return I.type==="delete"?D.fire.call(je,X,Be,z):I.type==="add"||Be===void 0?(ve=B.fire.call(je,X,I.values[ae],z),X==null&&ve!=null&&(I.keys[ae]=X=ve,s.outbound||$(I.values[ae],s.keyPath,X))):(ve=_i(Be,I.values[ae]),(Fe=L.fire.call(je,ve,X,Be,z))&&(Te=I.values[ae],Object.keys(Fe).forEach(function(Ne){w(Te,Ne)?Te[Ne]=Fe[Ne]:$(Te,Ne,Fe[Ne])}))),je});return o.mutate(I).then(function(X){for(var ae=X.failures,ve=X.results,Fe=X.numFailures,X=X.lastResult,Te=0;Te<F.length;++Te){var Be=(ve||F)[Te],je=Q[Te];Be==null?je.onerror&&je.onerror(ae[Te]):je.onsuccess&&je.onsuccess(I.type==="put"&&Z[Te]?I.values[Te]:Be)}return{failures:ae,results:ve,numFailures:Fe,lastResult:X}}).catch(function(X){return Q.forEach(function(ae){return ae.onerror&&ae.onerror(X)}),Promise.reject(X)})})}}})}})}};function ia(t,a,o){try{if(!a||a.keys.length<t.length)return null;for(var s=[],f=0,d=0;f<a.keys.length&&d<t.length;++f)vt(a.keys[f],t[d])===0&&(s.push(o?ye(a.values[f]):a.values[f]),++d);return s.length===t.length?s:null}catch{return null}}var gl={stack:"dbcore",level:-1,create:function(t){return{table:function(a){var o=t.table(a);return r(r({},o),{getMany:function(s){if(!s.cache)return o.getMany(s);var f=ia(s.keys,s.trans._cache,s.cache==="clone");return f?ke.resolve(f):o.getMany(s).then(function(d){return s.trans._cache={keys:s.keys,values:s.cache==="clone"?ye(d):d},d})},mutate:function(s){return s.type!=="add"&&(s.trans._cache=null),o.mutate(s)}})}}}};function aa(t,a){return t.trans.mode==="readonly"&&!!t.subscr&&!t.trans.explicit&&t.trans.db._options.cache!=="disabled"&&!a.schema.primaryKey.outbound}function oa(t,a){switch(t){case"query":return a.values&&!a.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var _l={stack:"dbcore",level:0,name:"Observability",create:function(t){var a=t.schema.name,o=new Yt(t.MIN_KEY,t.MAX_KEY);return r(r({},t),{transaction:function(s,f,d){if(Re.subscr&&f!=="readonly")throw new Ee.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Re.querier));return t.transaction(s,f,d)},table:function(s){var f=t.table(s),d=f.schema,b=d.primaryKey,I=d.indexes,D=b.extractKey,B=b.outbound,L=b.autoIncrement&&I.filter(function(N){return N.compound&&N.keyPath.includes(b.keyPath)}),V=r(r({},f),{mutate:function(N){function j(Ne){return Ne="idb://".concat(a,"/").concat(s,"/").concat(Ne),X[Ne]||(X[Ne]=new Yt)}var z,F,Z,Q=N.trans,X=N.mutatedParts||(N.mutatedParts={}),ae=j(""),ve=j(":dels"),Fe=N.type,je=N.type==="deleteRange"?[N.range]:N.type==="delete"?[N.keys]:N.values.length<50?[yi(b,N).filter(function(Ne){return Ne}),N.values]:[],Te=je[0],Be=je[1],je=N.trans._cache;return m(Te)?(ae.addKeys(Te),(je=Fe==="delete"||Te.length===Be.length?ia(Te,je):null)||ve.addKeys(Te),(je||Be)&&(z=j,F=je,Z=Be,d.indexes.forEach(function(Ne){var et=z(Ne.name||"");function tt(rt){return rt!=null?Ne.extractKey(rt):null}function ot(rt){return Ne.multiEntry&&m(rt)?rt.forEach(function(gn){return et.addKey(gn)}):et.addKey(rt)}(F||Z).forEach(function(rt,Zt){var it=F&&tt(F[Zt]),Zt=Z&&tt(Z[Zt]);vt(it,Zt)!==0&&(it!=null&&ot(it),Zt!=null&&ot(Zt))})}))):Te?(Be={from:Te.lower,to:Te.upper},ve.add(Be),ae.add(Be)):(ae.add(o),ve.add(o),d.indexes.forEach(function(Ne){return j(Ne.name).add(o)})),f.mutate(N).then(function(Ne){return!Te||N.type!=="add"&&N.type!=="put"||(ae.addKeys(Ne.results),L&&L.forEach(function(et){var tt=N.values.map(function(rt){return et.extractKey(rt)}),ot=et.keyPath.findIndex(function(rt){return rt===b.keyPath});Ne.results.forEach(function(rt){return tt[ot]=rt}),j(et.name).addKeys(tt)})),Q.mutatedParts=Pr(Q.mutatedParts||{},X),Ne})}}),I=function(j){var z=j.query,j=z.index,z=z.range;return[j,new Yt((j=z.lower)!==null&&j!==void 0?j:t.MIN_KEY,(z=z.upper)!==null&&z!==void 0?z:t.MAX_KEY)]},x={get:function(N){return[b,new Yt(N.key)]},getMany:function(N){return[b,new Yt().addKeys(N.keys)]},count:I,query:I,openCursor:I};return u(x).forEach(function(N){V[N]=function(j){var z=Re.subscr,F=!!z,Z=aa(Re,f)&&oa(N,j)?j.obsSet={}:z;if(F){var Q=function(Be){return Be="idb://".concat(a,"/").concat(s,"/").concat(Be),Z[Be]||(Z[Be]=new Yt)},X=Q(""),ae=Q(":dels"),z=x[N](j),F=z[0],z=z[1];if((N==="query"&&F.isPrimaryKey&&!j.values?ae:Q(F.name||"")).add(z),!F.isPrimaryKey){if(N!=="count"){var ve=N==="query"&&B&&j.values&&f.query(r(r({},j),{values:!1}));return f[N].apply(this,arguments).then(function(Be){if(N==="query"){if(B&&j.values)return ve.then(function(tt){return tt=tt.result,X.addKeys(tt),Be});var je=j.values?Be.result.map(D):Be.result;(j.values?X:ae).addKeys(je)}else if(N==="openCursor"){var Ne=Be,et=j.values;return Ne&&Object.create(Ne,{key:{get:function(){return ae.addKey(Ne.primaryKey),Ne.key}},primaryKey:{get:function(){var tt=Ne.primaryKey;return ae.addKey(tt),tt}},value:{get:function(){return et&&X.addKey(Ne.primaryKey),Ne.value}}})}return Be})}ae.add(o)}}return f[N].apply(this,arguments)}}),V}})}};function la(t,a,o){if(o.numFailures===0)return a;if(a.type==="deleteRange")return null;var s=a.keys?a.keys.length:"values"in a&&a.values?a.values.length:1;return o.numFailures===s?null:(a=r({},a),m(a.keys)&&(a.keys=a.keys.filter(function(f,d){return!(d in o.failures)})),"values"in a&&m(a.values)&&(a.values=a.values.filter(function(f,d){return!(d in o.failures)})),a)}function bi(t,a){return o=t,((s=a).lower===void 0||(s.lowerOpen?0<vt(o,s.lower):0<=vt(o,s.lower)))&&(t=t,(a=a).upper===void 0||(a.upperOpen?vt(t,a.upper)<0:vt(t,a.upper)<=0));var o,s}function sa(t,a,x,s,f,d){if(!x||x.length===0)return t;var b=a.query.index,D=b.multiEntry,B=a.query.range,L=s.schema.primaryKey.extractKey,V=b.extractKey,I=(b.lowLevelIndex||b).extractKey,x=x.reduce(function(N,j){var z=N,F=j.type==="add"||j.type==="put"?j.values.filter(function(ae){return ae=V(ae),D&&m(ae)?ae.some(function(ve){return bi(ve,B)}):bi(ae,B)}).map(function(ae){return ae=ye(ae),d&&Object.freeze(ae),ae}):[];switch(j.type){case"add":z=N.concat(a.values?F:F.map(function(ve){return L(ve)}));break;case"put":var Z=new Yt().addKeys(j.values.map(function(ve){return L(ve)})),z=N.filter(function(ve){return ve=a.values?L(ve):ve,!Ir(new Yt(ve),Z)}).concat(a.values?F:F.map(function(ve){return L(ve)}));break;case"delete":var Q=new Yt().addKeys(j.keys);z=N.filter(function(ve){return ve=a.values?L(ve):ve,!Ir(new Yt(ve),Q)});break;case"deleteRange":var X=j.range;z=N.filter(function(ve){return!bi(L(ve),X)})}return z},t);return x===t?t:(x.sort(function(N,j){return vt(I(N),I(j))||vt(L(N),L(j))}),a.limit&&a.limit<1/0&&(x.length>a.limit?x.length=a.limit:t.length===a.limit&&x.length<a.limit&&(f.dirty=!0)),d?Object.freeze(x):x)}function ua(t,a){return vt(t.lower,a.lower)===0&&vt(t.upper,a.upper)===0&&!!t.lowerOpen==!!a.lowerOpen&&!!t.upperOpen==!!a.upperOpen}function yl(t,a){return function(o,s,f,d){if(o===void 0)return s!==void 0?-1:0;if(s===void 0)return 1;if((s=vt(o,s))===0){if(f&&d)return 0;if(f)return 1;if(d)return-1}return s}(t.lower,a.lower,t.lowerOpen,a.lowerOpen)<=0&&0<=function(o,s,f,d){if(o===void 0)return s!==void 0?1:0;if(s===void 0)return-1;if((s=vt(o,s))===0){if(f&&d)return 0;if(f)return-1;if(d)return 1}return s}(t.upper,a.upper,t.upperOpen,a.upperOpen)}function bl(t,a,o,s){t.subscribers.add(o),s.addEventListener("abort",function(){var f,d;t.subscribers.delete(o),t.subscribers.size===0&&(f=t,d=a,setTimeout(function(){f.subscribers.size===0&&ue(d,f)},3e3))})}var wl={stack:"dbcore",level:0,name:"Cache",create:function(t){var a=t.schema.name;return r(r({},t),{transaction:function(o,s,f){var d,b,D=t.transaction(o,s,f);return s==="readwrite"&&(b=(d=new AbortController).signal,f=function(B){return function(){if(d.abort(),s==="readwrite"){for(var L=new Set,V=0,I=o;V<I.length;V++){var x=I[V],N=Kn["idb://".concat(a,"/").concat(x)];if(N){var j=t.table(x),z=N.optimisticOps.filter(function(et){return et.trans===D});if(D._explicit&&B&&D.mutatedParts)for(var F=0,Z=Object.values(N.queries.query);F<Z.length;F++)for(var Q=0,X=(Fe=Z[F]).slice();Q<X.length;Q++)hi((Te=X[Q]).obsSet,D.mutatedParts)&&(ue(Fe,Te),Te.subscribers.forEach(function(et){return L.add(et)}));else if(0<z.length){N.optimisticOps=N.optimisticOps.filter(function(et){return et.trans!==D});for(var ae=0,ve=Object.values(N.queries.query);ae<ve.length;ae++)for(var Fe,Te,Be,je=0,Ne=(Fe=ve[ae]).slice();je<Ne.length;je++)(Te=Ne[je]).res!=null&&D.mutatedParts&&(B&&!Te.dirty?(Be=Object.isFrozen(Te.res),Be=sa(Te.res,Te.req,z,j,Te,Be),Te.dirty?(ue(Fe,Te),Te.subscribers.forEach(function(et){return L.add(et)})):Be!==Te.res&&(Te.res=Be,Te.promise=ke.resolve({result:Be}))):(Te.dirty&&ue(Fe,Te),Te.subscribers.forEach(function(et){return L.add(et)})))}}}L.forEach(function(et){return et()})}}},D.addEventListener("abort",f(!1),{signal:b}),D.addEventListener("error",f(!1),{signal:b}),D.addEventListener("complete",f(!0),{signal:b})),D},table:function(o){var s=t.table(o),f=s.schema.primaryKey;return r(r({},s),{mutate:function(d){var b=Re.trans;if(f.outbound||b.db._options.cache==="disabled"||b.explicit)return s.mutate(d);var D=Kn["idb://".concat(a,"/").concat(o)];return D?(b=s.mutate(d),d.type!=="add"&&d.type!=="put"||!(50<=d.values.length||yi(f,d).some(function(B){return B==null}))?(D.optimisticOps.push(d),d.mutatedParts&&Mr(d.mutatedParts),b.then(function(B){0<B.numFailures&&(ue(D.optimisticOps,d),(B=la(0,d,B))&&D.optimisticOps.push(B),d.mutatedParts&&Mr(d.mutatedParts))}),b.catch(function(){ue(D.optimisticOps,d),d.mutatedParts&&Mr(d.mutatedParts)})):b.then(function(B){var L=la(0,r(r({},d),{values:d.values.map(function(N,I){var x,N=(x=f.keyPath)!==null&&x!==void 0&&x.includes(".")?ye(N):r({},N);return $(N,f.keyPath,B.results[I]),N})}),B);D.optimisticOps.push(L),queueMicrotask(function(){return d.mutatedParts&&Mr(d.mutatedParts)})}),b):s.mutate(d)},query:function(d){if(!aa(Re,s)||!oa("query",d))return s.query(d);var b=((L=Re.trans)===null||L===void 0?void 0:L.db._options.cache)==="immutable",I=Re,D=I.requery,B=I.signal,L=function(j,z,F,Z){var Q=Kn["idb://".concat(j,"/").concat(z)];if(!Q)return[];if(!(z=Q.queries[F]))return[null,!1,Q,null];var X=z[(Z.query?Z.query.index.name:null)||""];if(!X)return[null,!1,Q,null];switch(F){case"query":var ae=X.find(function(ve){return ve.req.limit===Z.limit&&ve.req.values===Z.values&&ua(ve.req.query.range,Z.query.range)});return ae?[ae,!0,Q,X]:[X.find(function(ve){return("limit"in ve.req?ve.req.limit:1/0)>=Z.limit&&(!Z.values||ve.req.values)&&yl(ve.req.query.range,Z.query.range)}),!1,Q,X];case"count":return ae=X.find(function(ve){return ua(ve.req.query.range,Z.query.range)}),[ae,!!ae,Q,X]}}(a,o,"query",d),V=L[0],I=L[1],x=L[2],N=L[3];return V&&I?V.obsSet=d.obsSet:(I=s.query(d).then(function(j){var z=j.result;if(V&&(V.res=z),b){for(var F=0,Z=z.length;F<Z;++F)Object.freeze(z[F]);Object.freeze(z)}else j.result=ye(z);return j}).catch(function(j){return N&&V&&ue(N,V),Promise.reject(j)}),V={obsSet:d.obsSet,promise:I,subscribers:new Set,type:"query",req:d,dirty:!1},N?N.push(V):(N=[V],(x=x||(Kn["idb://".concat(a,"/").concat(o)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[d.query.index.name||""]=N)),bl(V,N,D,B),V.promise.then(function(j){return{result:sa(j.result,d,x==null?void 0:x.optimisticOps,s,V,b)}})}})}})}};function Rr(t,a){return new Proxy(t,{get:function(o,s,f){return s==="db"?a:Reflect.get(o,s,f)}})}var On=(Pt.prototype.version=function(t){if(isNaN(t)||t<.1)throw new Ee.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new Ee.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var a=this._versions,o=a.filter(function(s){return s._cfg.version===t})[0];return o||(o=new this.Version(t),a.push(o),a.sort(cl),o.stores({}),this._state.autoSchema=!1,o)},Pt.prototype._whenReady=function(t){var a=this;return this.idbdb&&(this._state.openComplete||Re.letThrough||this._vip)?t():new ke(function(o,s){if(a._state.openComplete)return s(new Ee.DatabaseClosed(a._state.dbOpenError));if(!a._state.isBeingOpened){if(!a._state.autoOpen)return void s(new Ee.DatabaseClosed);a.open().catch(Se)}a._state.dbReadyPromise.then(o,s)}).then(t)},Pt.prototype.use=function(t){var a=t.stack,o=t.create,s=t.level,f=t.name;return f&&this.unuse({stack:a,name:f}),t=this._middlewares[a]||(this._middlewares[a]=[]),t.push({stack:a,create:o,level:s??10,name:f}),t.sort(function(d,b){return d.level-b.level}),this},Pt.prototype.unuse=function(t){var a=t.stack,o=t.name,s=t.create;return a&&this._middlewares[a]&&(this._middlewares[a]=this._middlewares[a].filter(function(f){return s?f.create!==s:!!o&&f.name!==o})),this},Pt.prototype.open=function(){var t=this;return bn(wt,function(){return pl(t)})},Pt.prototype._close=function(){var t=this._state,a=Wn.indexOf(this);if(0<=a&&Wn.splice(a,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}t.isBeingOpened||(t.dbReadyPromise=new ke(function(o){t.dbReadyResolve=o}),t.openCanceller=new ke(function(o,s){t.cancelOpen=s}))},Pt.prototype.close=function(o){var a=(o===void 0?{disableAutoOpen:!0}:o).disableAutoOpen,o=this._state;a?(o.isBeingOpened&&o.cancelOpen(new Ee.DatabaseClosed),this._close(),o.autoOpen=!1,o.dbOpenError=new Ee.DatabaseClosed):(this._close(),o.autoOpen=this._options.autoOpen||o.isBeingOpened,o.openComplete=!1,o.dbOpenError=null)},Pt.prototype.delete=function(t){var a=this;t===void 0&&(t={disableAutoOpen:!0});var o=0<arguments.length&&typeof arguments[0]!="object",s=this._state;return new ke(function(f,d){function b(){a.close(t);var D=a._deps.indexedDB.deleteDatabase(a.name);D.onsuccess=ze(function(){var B,L,V;B=a._deps,L=a.name,V=B.indexedDB,B=B.IDBKeyRange,ui(V)||L===yr||si(V,B).delete(L).catch(Se),f()}),D.onerror=wn(d),D.onblocked=a._fireOnBlocked}if(o)throw new Ee.InvalidArgument("Invalid closeOptions argument to db.delete()");s.isBeingOpened?s.dbReadyPromise.then(b):b()})},Pt.prototype.backendDB=function(){return this.idbdb},Pt.prototype.isOpen=function(){return this.idbdb!==null},Pt.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},Pt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Pt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Pt.prototype,"tables",{get:function(){var t=this;return u(this._allTables).map(function(a){return t._allTables[a]})},enumerable:!1,configurable:!0}),Pt.prototype.transaction=function(){var t=(function(a,o,s){var f=arguments.length;if(f<2)throw new Ee.InvalidArgument("Too few arguments");for(var d=new Array(f-1);--f;)d[f-1]=arguments[f];return s=d.pop(),[a,De(d),s]}).apply(this,arguments);return this._transaction.apply(this,t)},Pt.prototype._transaction=function(t,a,o){var s=this,f=Re.trans;f&&f.db===this&&t.indexOf("!")===-1||(f=null);var d,b,D=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");try{if(b=a.map(function(L){if(L=L instanceof s.Table?L.name:L,typeof L!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return L}),t=="r"||t===Jr)d=Jr;else{if(t!="rw"&&t!=Qr)throw new Ee.InvalidArgument("Invalid transaction mode: "+t);d=Qr}if(f){if(f.mode===Jr&&d===Qr){if(!D)throw new Ee.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");f=null}f&&b.forEach(function(L){if(f&&f.storeNames.indexOf(L)===-1){if(!D)throw new Ee.SubTransaction("Table "+L+" not included in parent transaction.");f=null}}),D&&f&&!f.active&&(f=null)}}catch(L){return f?f._promise(null,function(V,I){I(L)}):st(L)}var B=(function L(V,I,x,N,j){return ke.resolve().then(function(){var z=Re.transless||Re,F=V._createTransaction(I,x,V._dbSchema,N);if(F.explicit=!0,z={trans:F,transless:z},N)F.idbtrans=N.idbtrans;else try{F.create(),F.idbtrans._explicit=!0,V._state.PR1398_maxLoop=3}catch(X){return X.name===qe.InvalidState&&V.isOpen()&&0<--V._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),V.close({disableAutoOpen:!1}),V.open().then(function(){return L(V,I,x,null,j)})):st(X)}var Z,Q=G(j);return Q&&nn(),z=ke.follow(function(){var X;(Z=j.call(F,F))&&(Q?(X=Gt.bind(null,null),Z.then(X,X)):typeof Z.next=="function"&&typeof Z.throw=="function"&&(Z=gi(Z)))},z),(Z&&typeof Z.then=="function"?ke.resolve(Z).then(function(X){return F.active?X:st(new Ee.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):z.then(function(){return Z})).then(function(X){return N&&F._resolve(),F._completion.then(function(){return X})}).catch(function(X){return F._reject(X),st(X)})})}).bind(null,this,d,b,f,o);return f?f._promise(d,B,"lock"):Re.trans?bn(Re.transless,function(){return s._whenReady(B)}):this._whenReady(B)},Pt.prototype.table=function(t){if(!w(this._allTables,t))throw new Ee.InvalidTable("Table ".concat(t," does not exist"));return this._allTables[t]},Pt);function Pt(t,a){var o=this;this._middlewares={},this.verno=0;var s=Pt.dependencies;this._options=a=r({addons:Pt.addons,autoOpen:!0,indexedDB:s.indexedDB,IDBKeyRange:s.IDBKeyRange,cache:"cloned"},a),this._deps={indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange},s=a.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var f,d,b,D,B,L={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Se,dbReadyPromise:null,cancelOpen:Se,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:a.autoOpen};L.dbReadyPromise=new ke(function(I){L.dbReadyResolve=I}),L.openCanceller=new ke(function(I,x){L.cancelOpen=x}),this._state=L,this.name=t,this.on=tr(this,"populate","blocked","versionchange","close",{ready:[nt,Se]}),this.on.ready.subscribe=q(this.on.ready.subscribe,function(I){return function(x,N){Pt.vip(function(){var j,z=o._state;z.openComplete?(z.dbOpenError||ke.resolve().then(x),N&&I(x)):z.onReadyBeingFired?(z.onReadyBeingFired.push(x),N&&I(x)):(I(x),j=o,N||I(function F(){j.on.ready.unsubscribe(x),j.on.ready.unsubscribe(F)}))})}}),this.Collection=(f=this,nr(rl.prototype,function(Z,F){this.db=f;var N=xi,j=null;if(F)try{N=F()}catch(Q){j=Q}var z=Z._ctx,F=z.table,Z=F.hook.reading.fire;this._ctx={table:F,index:z.index,isPrimKey:!z.index||F.schema.primKey.keyPath&&z.index===F.schema.primKey.name,range:N,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:j,or:z.or,valueMapper:Z!==Ke?Z:null}})),this.Table=(d=this,nr(qi.prototype,function(I,x,N){this.db=d,this._tx=N,this.name=I,this.schema=x,this.hook=d._allTables[I]?d._allTables[I].hook:tr(null,{creating:[Ue,Se],reading:[Ie,Ke],updating:[fe,Se],deleting:[Le,Se]})})),this.Transaction=(b=this,nr(ol.prototype,function(I,x,N,j,z){var F=this;this.db=b,this.mode=I,this.storeNames=x,this.schema=N,this.chromeTransactionDurability=j,this.idbtrans=null,this.on=tr(this,"complete","error","abort"),this.parent=z||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ke(function(Z,Q){F._resolve=Z,F._reject=Q}),this._completion.then(function(){F.active=!1,F.on.complete.fire()},function(Z){var Q=F.active;return F.active=!1,F.on.error.fire(Z),F.parent?F.parent._reject(Z):Q&&F.idbtrans&&F.idbtrans.abort(),st(Z)})})),this.Version=(D=this,nr(hl.prototype,function(I){this.db=D,this._cfg={version:I,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(B=this,nr(Ji.prototype,function(I,x,N){if(this.db=B,this._ctx={table:I,index:x===":id"?null:x,or:N},this._cmp=this._ascending=vt,this._descending=function(j,z){return vt(z,j)},this._max=function(j,z){return 0<vt(j,z)?j:z},this._min=function(j,z){return vt(j,z)<0?j:z},this._IDBKeyRange=B._deps.IDBKeyRange,!this._IDBKeyRange)throw new Ee.MissingAPI})),this.on("versionchange",function(I){0<I.newVersion?console.warn("Another connection wants to upgrade database '".concat(o.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(o.name,"'. Closing db now to resume the delete request.")),o.close({disableAutoOpen:!1})}),this.on("blocked",function(I){!I.newVersion||I.newVersion<I.oldVersion?console.warn("Dexie.delete('".concat(o.name,"') was blocked")):console.warn("Upgrade '".concat(o.name,"' blocked by other connection holding version ").concat(I.oldVersion/10))}),this._maxKey=or(a.IDBKeyRange),this._createTransaction=function(I,x,N,j){return new o.Transaction(I,x,N,o._options.chromeTransactionDurability,j)},this._fireOnBlocked=function(I){o.on("blocked").fire(I),Wn.filter(function(x){return x.name===o.name&&x!==o&&!x._state.vcFired}).map(function(x){return x.on("versionchange").fire(I)})},this.use(gl),this.use(wl),this.use(_l),this.use(ml),this.use(vl);var V=new Proxy(this,{get:function(I,x,N){if(x==="_vip")return!0;if(x==="table")return function(z){return Rr(o.table(z),V)};var j=Reflect.get(I,x,N);return j instanceof qi?Rr(j,V):x==="tables"?j.map(function(z){return Rr(z,V)}):x==="_createTransaction"?function(){return Rr(j.apply(this,arguments),V)}:j}});this.vip=V,s.forEach(function(I){return I(o)})}var Nr,dn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",kl=(wi.prototype.subscribe=function(t,a,o){return this._subscribe(t&&typeof t!="function"?t:{next:t,error:a,complete:o})},wi.prototype[dn]=function(){return this},wi);function wi(t){this._subscribe=t}try{Nr={indexedDB:c.indexedDB||c.mozIndexedDB||c.webkitIndexedDB||c.msIndexedDB,IDBKeyRange:c.IDBKeyRange||c.webkitIDBKeyRange}}catch{Nr={indexedDB:null,IDBKeyRange:null}}function ca(t){var a,o=!1,s=new kl(function(f){var d=G(t),b,D=!1,B={},L={},V={get closed(){return D},unsubscribe:function(){D||(D=!0,b&&b.abort(),I&&Pn.storagemutated.unsubscribe(N))}};f.start&&f.start(V);var I=!1,x=function(){return qn(j)},N=function(z){Pr(B,z),hi(L,B)&&x()},j=function(){var z,F,Z;!D&&Nr.indexedDB&&(B={},z={},b&&b.abort(),b=new AbortController,Z=function(Q){var X=Me();try{d&&nn();var ae=Bt(t,Q);return ae=d?ae.finally(Gt):ae}finally{X&&bt()}}(F={subscr:z,signal:b.signal,requery:x,querier:t,trans:null}),Promise.resolve(Z).then(function(Q){o=!0,a=Q,D||F.signal.aborted||(B={},function(X){for(var ae in X)if(w(X,ae))return;return 1}(L=z)||I||(Pn(ar,N),I=!0),qn(function(){return!D&&f.next&&f.next(Q)}))},function(Q){o=!1,["DatabaseClosedError","AbortError"].includes(Q==null?void 0:Q.name)||D||qn(function(){D||f.error&&f.error(Q)})}))};return setTimeout(x,0),V});return s.hasValue=function(){return o},s.getValue=function(){return a},s}var Fn=On;function ki(t){var a=Mn;try{Mn=!0,Pn.storagemutated.fire(t),vi(t,!0)}finally{Mn=a}}O(Fn,r(r({},de),{delete:function(t){return new Fn(t,{addons:[]}).delete()},exists:function(t){return new Fn(t,{addons:[]}).open().then(function(a){return a.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(t){try{return a=Fn.dependencies,o=a.indexedDB,a=a.IDBKeyRange,(ui(o)?Promise.resolve(o.databases()).then(function(s){return s.map(function(f){return f.name}).filter(function(f){return f!==yr})}):si(o,a).toCollection().primaryKeys()).then(t)}catch{return st(new Ee.MissingAPI)}var a,o},defineClass:function(){return function(t){_(this,t)}},ignoreTransaction:function(t){return Re.trans?bn(Re.transless,t):t()},vip:ci,async:function(t){return function(){try{var a=gi(t.apply(this,arguments));return a&&typeof a.then=="function"?a:ke.resolve(a)}catch(o){return st(o)}}},spawn:function(t,a,o){try{var s=gi(t.apply(o,a||[]));return s&&typeof s.then=="function"?s:ke.resolve(s)}catch(f){return st(f)}},currentTransaction:{get:function(){return Re.trans||null}},waitFor:function(t,a){return a=ke.resolve(typeof t=="function"?Fn.ignoreTransaction(t):t).timeout(a||6e4),Re.trans?Re.trans.waitFor(a):a},Promise:ke,debug:{get:function(){return ut},set:function(t){At(t)}},derive:W,extend:_,props:O,override:q,Events:tr,on:Pn,liveQuery:ca,extendObservabilitySet:Pr,getByKeyPath:ie,setByKeyPath:$,delByKeyPath:function(t,a){typeof a=="string"?$(t,a,void 0):"length"in a&&[].map.call(a,function(o){$(t,o,void 0)})},shallowClone:pe,deepClone:ye,getObjectDiff:_i,cmp:vt,asap:re,minKey:-1/0,addons:[],connections:Wn,errnames:qe,dependencies:Nr,cache:Kn,semVer:"4.0.7",version:"4.0.7".split(".").map(function(t){return parseInt(t)}).reduce(function(t,a,o){return t+a/Math.pow(10,2*o)})})),Fn.maxKey=or(Fn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Pn(ar,function(t){Mn||(t=new CustomEvent(ti,{detail:t}),Mn=!0,dispatchEvent(t),Mn=!1)}),addEventListener(ti,function(t){t=t.detail,Mn||ki(t)}));var Zn,Mn=!1,fa=function(){};return typeof BroadcastChannel<"u"&&((fa=function(){(Zn=new BroadcastChannel(ti)).onmessage=function(t){return t.data&&ki(t.data)}})(),typeof Zn.unref=="function"&&Zn.unref(),Pn(ar,function(t){Mn||Zn.postMessage(t)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(t){if(!On.disableBfCache&&t.persisted){ut&&console.debug("Dexie: handling persisted pagehide"),Zn!=null&&Zn.close();for(var a=0,o=Wn;a<o.length;a++)o[a].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(t){!On.disableBfCache&&t.persisted&&(ut&&console.debug("Dexie: handling persisted pageshow"),fa(),ki({all:new Yt(-1/0,[[]])}))})),ke.rejectionMapper=function(t,a){return!t||t instanceof A||t instanceof TypeError||t instanceof SyntaxError||!t.name||!J[t.name]?t:(a=new J[t.name](a||t.message,t),"stack"in t&&ee(a,"stack",{get:function(){return this.inner.stack}}),a)},At(ut),r(On,Object.freeze({__proto__:null,Dexie:On,liveQuery:ca,Entity:zi,cmp:vt,PropModSymbol:An,PropModification:rr,replacePrefix:function(t,a){return new rr({replacePrefix:[t,a]})},add:function(t){return new rr({add:t})},remove:function(t){return new rr({remove:t})},default:On,RangeSet:Yt,mergeRanges:ur,rangesOverlap:Ir}),{default:On}),On})})(Zo);var Ql=Zo.exports;const Li=Yo(Ql),Ka=Symbol.for("Dexie"),Yr=globalThis[Ka]||(globalThis[Ka]=Li);if(Li.semVer!==Yr.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Li.semVer} and ${Yr.semVer}`);const{liveQuery:gr,mergeRanges:wc,rangesOverlap:kc,RangeSet:Dc,cmp:Ec,Entity:Sc,PropModSymbol:Cc,PropModification:Tc,replacePrefix:Ac,add:Oc,remove:Ic}=Yr;var _r=(i=>(i.Accomodation="Accomodation",i.Food="Food & Drink",i.Transport="Transport",i.Other="Other",i))(_r||{});const Fa={Accomodation:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-house-fill" viewBox="0 0 16 16"><path d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L8 2.207l6.646 6.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293z"/><path d="m8 3.293 6 6V13.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5V9.293z"/></svg>',"Food & Drink":'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cup-hot-fill" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M.5 6a.5.5 0 0 0-.488.608l1.652 7.434A2.5 2.5 0 0 0 4.104 16h5.792a2.5 2.5 0 0 0 2.44-1.958l.131-.59a3 3 0 0 0 1.3-5.854l.221-.99A.5.5 0 0 0 13.5 6zM13 12.5a2 2 0 0 1-.316-.025l.867-3.898A2.001 2.001 0 0 1 13 12.5"/><path d="m4.4.8-.003.004-.014.019a4 4 0 0 0-.204.31 2 2 0 0 0-.141.267c-.026.06-.034.092-.037.103v.004a.6.6 0 0 0 .091.248c.075.133.178.272.308.445l.01.012c.118.158.26.347.37.543.112.2.22.455.22.745 0 .188-.065.368-.119.494a3 3 0 0 1-.202.388 5 5 0 0 1-.253.382l-.018.025-.005.008-.002.002A.5.5 0 0 1 3.6 4.2l.003-.004.014-.019a4 4 0 0 0 .204-.31 2 2 0 0 0 .141-.267c.026-.06.034-.092.037-.103a.6.6 0 0 0-.09-.252A4 4 0 0 0 3.6 2.8l-.01-.012a5 5 0 0 1-.37-.543A1.53 1.53 0 0 1 3 1.5c0-.188.065-.368.119-.494.059-.138.134-.274.202-.388a6 6 0 0 1 .253-.382l.025-.035A.5.5 0 0 1 4.4.8m3 0-.003.004-.014.019a4 4 0 0 0-.204.31 2 2 0 0 0-.141.267c-.026.06-.034.092-.037.103v.004a.6.6 0 0 0 .091.248c.075.133.178.272.308.445l.01.012c.118.158.26.347.37.543.112.2.22.455.22.745 0 .188-.065.368-.119.494a3 3 0 0 1-.202.388 5 5 0 0 1-.253.382l-.018.025-.005.008-.002.002A.5.5 0 0 1 6.6 4.2l.003-.004.014-.019a4 4 0 0 0 .204-.31 2 2 0 0 0 .141-.267c.026-.06.034-.092.037-.103a.6.6 0 0 0-.09-.252A4 4 0 0 0 6.6 2.8l-.01-.012a5 5 0 0 1-.37-.543A1.53 1.53 0 0 1 6 1.5c0-.188.065-.368.119-.494.059-.138.134-.274.202-.388a6 6 0 0 1 .253-.382l.025-.035A.5.5 0 0 1 7.4.8m3 0-.003.004-.014.019a4 4 0 0 0-.204.31 2 2 0 0 0-.141.267c-.026.06-.034.092-.037.103v.004a.6.6 0 0 0 .091.248c.075.133.178.272.308.445l.01.012c.118.158.26.347.37.543.112.2.22.455.22.745 0 .188-.065.368-.119.494a3 3 0 0 1-.202.388 5 5 0 0 1-.252.382l-.019.025-.005.008-.002.002A.5.5 0 0 1 9.6 4.2l.003-.004.014-.019a4 4 0 0 0 .204-.31 2 2 0 0 0 .141-.267c.026-.06.034-.092.037-.103a.6.6 0 0 0-.09-.252A4 4 0 0 0 9.6 2.8l-.01-.012a5 5 0 0 1-.37-.543A1.53 1.53 0 0 1 9 1.5c0-.188.065-.368.119-.494.059-.138.134-.274.202-.388a6 6 0 0 1 .253-.382l.025-.035A.5.5 0 0 1 10.4.8"/></svg>',Transport:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-car-front-fill" viewBox="0 0 16 16"> <path d="M2.52 3.515A2.5 2.5 0 0 1 4.82 2h6.362c1 0 1.904.596 2.298 1.515l.792 1.848c.075.175.21.319.38.404.5.25.855.715.965 1.262l.335 1.679q.05.242.049.49v.413c0 .814-.39 1.543-1 1.997V13.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-1.338c-1.292.048-2.745.088-4 .088s-2.708-.04-4-.088V13.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-1.892c-.61-.454-1-1.183-1-1.997v-.413a2.5 2.5 0 0 1 .049-.49l.335-1.68c.11-.546.465-1.012.964-1.261a.8.8 0 0 0 .381-.404l.792-1.848ZM3 10a1 1 0 1 0 0-2 1 1 0 0 0 0 2m10 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2M6 8a1 1 0 0 0 0 2h4a1 1 0 1 0 0-2zM2.906 5.189a.51.51 0 0 0 .497.731c.91-.073 3.35-.17 4.597-.17s3.688.097 4.597.17a.51.51 0 0 0 .497-.731l-.956-1.913A.5.5 0 0 0 11.691 3H4.309a.5.5 0 0 0-.447.276L2.906 5.19Z"/></svg>',Other:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-receipt" viewBox="0 0 16 16"><path d="M1.92.506a.5.5 0 0 1 .434.14L3 1.293l.646-.647a.5.5 0 0 1 .708 0L5 1.293l.646-.647a.5.5 0 0 1 .708 0L7 1.293l.646-.647a.5.5 0 0 1 .708 0L9 1.293l.646-.647a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 0 1 .801.13l.5 1A.5.5 0 0 1 15 2v12a.5.5 0 0 1-.053.224l-.5 1a.5.5 0 0 1-.8.13L13 14.707l-.646.647a.5.5 0 0 1-.708 0L11 14.707l-.646.647a.5.5 0 0 1-.708 0L9 14.707l-.646.647a.5.5 0 0 1-.708 0L7 14.707l-.646.647a.5.5 0 0 1-.708 0L5 14.707l-.646.647a.5.5 0 0 1-.708 0L3 14.707l-.646.647a.5.5 0 0 1-.801-.13l-.5-1A.5.5 0 0 1 1 14V2a.5.5 0 0 1 .053-.224l.5-1a.5.5 0 0 1 .367-.27m.217 1.338L2 2.118v11.764l.137.274.51-.51a.5.5 0 0 1 .707 0l.646.647.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.509.509.137-.274V2.118l-.137-.274-.51.51a.5.5 0 0 1-.707 0L12 1.707l-.646.647a.5.5 0 0 1-.708 0L10 1.707l-.646.647a.5.5 0 0 1-.708 0L8 1.707l-.646.647a.5.5 0 0 1-.708 0L6 1.707l-.646.647a.5.5 0 0 1-.708 0L4 1.707l-.646.647a.5.5 0 0 1-.708 0z"/><path d="M3 4.5a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5m8-6a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5"/></svg>'},Mt=new Yr("ExpensesDatabase");Mt.version(2).stores({trips:"++id, name, defaultCurrency, startDate, endDate",receipts:"++id, description, total, receiptDate, receiptType, currency, tripId, imageData"});Mt.version(3).stores({trips:"++id, name, defaultCurrency, startDate, startDateString, endDate, endDateString",receipts:"++id, description, total, receiptDate, receiptDateString, receiptType, currency, tripId, imageData"}).upgrade(i=>i.table("trips").toCollection().modify(e=>{e.startDateString=e.startDate.toDateString(),e.endDateString=e.endDate.toDateString()}).then(function(){i.table("receipts").toCollection().modify(e=>{e.receiptDateString=e.receiptDate.toDateString()})}));Mt.version(4).stores({trips:"++id, name, defaultCurrency, startDate, startDateString, endDate, endDateString",receipts:"++id, description, total, receiptDate, receiptDateString, receiptType, currency, tripId, imageData"}).upgrade(i=>i.table("receipts").where("receiptType").equals("Food").modify(e=>{e.receiptType="Food & Drink"}));Mt.version(5).stores({trips:"++id, name, defaultCurrency, startDate, startDateString, endDate, endDateString",receipts:"++id, description, total, receiptDate, receiptDateString, receiptType, currency, tripId, imageData, imageWidth, imageHeight"}).upgrade(i=>i.table("receipts").toCollection().modify(e=>{e.imageData=URL.createObjectURL(e.imageData)}));const kt={GBP:{symbol:"Â£",name:"British Pound Sterling",symbol_native:"Â£",decimal_digits:2,rounding:0,code:"GBP",name_plural:"British pounds sterling"},USD:{symbol:"$",name:"US Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"USD",name_plural:"US dollars"},CAD:{symbol:"CA$",name:"Canadian Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"CAD",name_plural:"Canadian dollars"},EUR:{symbol:"â¬",name:"Euro",symbol_native:"â¬",decimal_digits:2,rounding:0,code:"EUR",name_plural:"euros"},AED:{symbol:"AED",name:"United Arab Emirates Dirham",symbol_native:"Ø¯.Ø¥.â",decimal_digits:2,rounding:0,code:"AED",name_plural:"UAE dirhams"},AFN:{symbol:"Af",name:"Afghan Afghani",symbol_native:"Ø",decimal_digits:0,rounding:0,code:"AFN",name_plural:"Afghan Afghanis"},ALL:{symbol:"ALL",name:"Albanian Lek",symbol_native:"Lek",decimal_digits:0,rounding:0,code:"ALL",name_plural:"Albanian lekÃ«"},AMD:{symbol:"AMD",name:"Armenian Dram",symbol_native:"Õ¤Ö.",decimal_digits:0,rounding:0,code:"AMD",name_plural:"Armenian drams"},ARS:{symbol:"AR$",name:"Argentine Peso",symbol_native:"$",decimal_digits:2,rounding:0,code:"ARS",name_plural:"Argentine pesos"},AUD:{symbol:"AU$",name:"Australian Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"AUD",name_plural:"Australian dollars"},AZN:{symbol:"man.",name:"Azerbaijani Manat",symbol_native:"Ð¼Ð°Ð½.",decimal_digits:2,rounding:0,code:"AZN",name_plural:"Azerbaijani manats"},BAM:{symbol:"KM",name:"Bosnia-Herzegovina Convertible Mark",symbol_native:"KM",decimal_digits:2,rounding:0,code:"BAM",name_plural:"Bosnia-Herzegovina convertible marks"},BDT:{symbol:"Tk",name:"Bangladeshi Taka",symbol_native:"à§³",decimal_digits:2,rounding:0,code:"BDT",use_indian_numbering_system:!0,name_plural:"Bangladeshi takas"},BGN:{symbol:"BGN",name:"Bulgarian Lev",symbol_native:"Ð»Ð².",decimal_digits:2,rounding:0,code:"BGN",name_plural:"Bulgarian leva"},BHD:{symbol:"BD",name:"Bahraini Dinar",symbol_native:"Ø¯.Ø¨.â",decimal_digits:3,rounding:0,code:"BHD",name_plural:"Bahraini dinars"},BIF:{symbol:"FBu",name:"Burundian Franc",symbol_native:"FBu",decimal_digits:0,rounding:0,code:"BIF",name_plural:"Burundian francs"},BND:{symbol:"BN$",name:"Brunei Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"BND",name_plural:"Brunei dollars"},BOB:{symbol:"Bs",name:"Bolivian Boliviano",symbol_native:"Bs",decimal_digits:2,rounding:0,code:"BOB",name_plural:"Bolivian bolivianos"},BRL:{symbol:"R$",name:"Brazilian Real",symbol_native:"R$",decimal_digits:2,rounding:0,code:"BRL",name_plural:"Brazilian reals"},BWP:{symbol:"BWP",name:"Botswanan Pula",symbol_native:"P",decimal_digits:2,rounding:0,code:"BWP",name_plural:"Botswanan pulas"},BYN:{symbol:"Br",name:"Belarusian Ruble",symbol_native:"ÑÑÐ±.",decimal_digits:2,rounding:0,code:"BYN",name_plural:"Belarusian rubles"},BZD:{symbol:"BZ$",name:"Belize Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"BZD",name_plural:"Belize dollars"},CDF:{symbol:"CDF",name:"Congolese Franc",symbol_native:"FrCD",decimal_digits:2,rounding:0,code:"CDF",name_plural:"Congolese francs"},CHF:{symbol:"CHF",name:"Swiss Franc",symbol_native:"CHF",decimal_digits:2,rounding:.05,code:"CHF",name_plural:"Swiss francs"},CLP:{symbol:"CL$",name:"Chilean Peso",symbol_native:"$",decimal_digits:0,rounding:0,code:"CLP",name_plural:"Chilean pesos"},CNY:{symbol:"CNÂ¥",name:"Chinese Yuan",symbol_native:"CNÂ¥",decimal_digits:2,rounding:0,code:"CNY",name_plural:"Chinese yuan"},COP:{symbol:"CO$",name:"Colombian Peso",symbol_native:"$",decimal_digits:0,rounding:0,code:"COP",name_plural:"Colombian pesos"},CRC:{symbol:"â¡",name:"Costa Rican ColÃ³n",symbol_native:"â¡",decimal_digits:0,rounding:0,code:"CRC",name_plural:"Costa Rican colÃ³ns"},CVE:{symbol:"CV$",name:"Cape Verdean Escudo",symbol_native:"CV$",decimal_digits:2,rounding:0,code:"CVE",name_plural:"Cape Verdean escudos"},CZK:{symbol:"KÄ",name:"Czech Republic Koruna",symbol_native:"KÄ",decimal_digits:2,rounding:0,code:"CZK",name_plural:"Czech Republic korunas"},DJF:{symbol:"Fdj",name:"Djiboutian Franc",symbol_native:"Fdj",decimal_digits:0,rounding:0,code:"DJF",name_plural:"Djiboutian francs"},DKK:{symbol:"Dkr",name:"Danish Krone",symbol_native:"kr",decimal_digits:2,rounding:0,code:"DKK",name_plural:"Danish kroner"},DOP:{symbol:"RD$",name:"Dominican Peso",symbol_native:"RD$",decimal_digits:2,rounding:0,code:"DOP",name_plural:"Dominican pesos"},DZD:{symbol:"DA",name:"Algerian Dinar",symbol_native:"Ø¯.Ø¬.â",decimal_digits:2,rounding:0,code:"DZD",name_plural:"Algerian dinars"},EEK:{symbol:"Ekr",name:"Estonian Kroon",symbol_native:"kr",decimal_digits:2,rounding:0,code:"EEK",name_plural:"Estonian kroons"},EGP:{symbol:"EGP",name:"Egyptian Pound",symbol_native:"Ø¬.Ù.â",decimal_digits:2,rounding:0,code:"EGP",name_plural:"Egyptian pounds"},ERN:{symbol:"Nfk",name:"Eritrean Nakfa",symbol_native:"Nfk",decimal_digits:2,rounding:0,code:"ERN",name_plural:"Eritrean nakfas"},ETB:{symbol:"Br",name:"Ethiopian Birr",symbol_native:"Br",decimal_digits:2,rounding:0,code:"ETB",name_plural:"Ethiopian birrs"},GEL:{symbol:"GEL",name:"Georgian Lari",symbol_native:"GEL",decimal_digits:2,rounding:0,code:"GEL",name_plural:"Georgian laris"},GHS:{symbol:"GHâµ",name:"Ghanaian Cedi",symbol_native:"GHâµ",decimal_digits:2,rounding:0,code:"GHS",name_plural:"Ghanaian cedis"},GNF:{symbol:"FG",name:"Guinean Franc",symbol_native:"FG",decimal_digits:0,rounding:0,code:"GNF",name_plural:"Guinean francs"},GTQ:{symbol:"GTQ",name:"Guatemalan Quetzal",symbol_native:"Q",decimal_digits:2,rounding:0,code:"GTQ",name_plural:"Guatemalan quetzals"},HKD:{symbol:"HK$",name:"Hong Kong Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"HKD",name_plural:"Hong Kong dollars"},HNL:{symbol:"HNL",name:"Honduran Lempira",symbol_native:"L",decimal_digits:2,rounding:0,code:"HNL",name_plural:"Honduran lempiras"},HRK:{symbol:"kn",name:"Croatian Kuna",symbol_native:"kn",decimal_digits:2,rounding:0,code:"HRK",name_plural:"Croatian kunas"},HUF:{symbol:"Ft",name:"Hungarian Forint",symbol_native:"Ft",decimal_digits:0,rounding:0,code:"HUF",name_plural:"Hungarian forints"},IDR:{symbol:"Rp",name:"Indonesian Rupiah",symbol_native:"Rp",decimal_digits:0,rounding:0,code:"IDR",name_plural:"Indonesian rupiahs"},ILS:{symbol:"âª",name:"Israeli New Sheqel",symbol_native:"âª",decimal_digits:2,rounding:0,code:"ILS",name_plural:"Israeli new sheqels"},INR:{symbol:"Rs",name:"Indian Rupee",symbol_native:"à¦à¦à¦¾",decimal_digits:2,rounding:0,code:"INR",use_indian_numbering_system:!0,name_plural:"Indian rupees"},IQD:{symbol:"IQD",name:"Iraqi Dinar",symbol_native:"Ø¯.Ø¹.â",decimal_digits:0,rounding:0,code:"IQD",name_plural:"Iraqi dinars"},IRR:{symbol:"IRR",name:"Iranian Rial",symbol_native:"ï·¼",decimal_digits:0,rounding:0,code:"IRR",name_plural:"Iranian rials"},ISK:{symbol:"Ikr",name:"Icelandic KrÃ³na",symbol_native:"kr",decimal_digits:0,rounding:0,code:"ISK",name_plural:"Icelandic krÃ³nur"},JMD:{symbol:"J$",name:"Jamaican Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"JMD",name_plural:"Jamaican dollars"},JOD:{symbol:"JD",name:"Jordanian Dinar",symbol_native:"Ø¯.Ø£.â",decimal_digits:3,rounding:0,code:"JOD",name_plural:"Jordanian dinars"},JPY:{symbol:"Â¥",name:"Japanese Yen",symbol_native:"ï¿¥",decimal_digits:0,rounding:0,code:"JPY",name_plural:"Japanese yen"},KES:{symbol:"Ksh",name:"Kenyan Shilling",symbol_native:"Ksh",decimal_digits:2,rounding:0,code:"KES",name_plural:"Kenyan shillings"},KHR:{symbol:"KHR",name:"Cambodian Riel",symbol_native:"á",decimal_digits:2,rounding:0,code:"KHR",name_plural:"Cambodian riels"},KMF:{symbol:"CF",name:"Comorian Franc",symbol_native:"FC",decimal_digits:0,rounding:0,code:"KMF",name_plural:"Comorian francs"},KRW:{symbol:"â©",name:"South Korean Won",symbol_native:"â©",decimal_digits:0,rounding:0,code:"KRW",name_plural:"South Korean won"},KWD:{symbol:"KD",name:"Kuwaiti Dinar",symbol_native:"Ø¯.Ù.â",decimal_digits:3,rounding:0,code:"KWD",name_plural:"Kuwaiti dinars"},KZT:{symbol:"KZT",name:"Kazakhstani Tenge",symbol_native:"ÑÒ£Ð³.",decimal_digits:2,rounding:0,code:"KZT",name_plural:"Kazakhstani tenges"},LBP:{symbol:"L.L.",name:"Lebanese Pound",symbol_native:"Ù.Ù.â",decimal_digits:0,rounding:0,code:"LBP",name_plural:"Lebanese pounds"},LKR:{symbol:"SLRs",name:"Sri Lankan Rupee",symbol_native:"SL Re",decimal_digits:2,rounding:0,code:"LKR",name_plural:"Sri Lankan rupees"},LTL:{symbol:"Lt",name:"Lithuanian Litas",symbol_native:"Lt",decimal_digits:2,rounding:0,code:"LTL",name_plural:"Lithuanian litai"},LVL:{symbol:"Ls",name:"Latvian Lats",symbol_native:"Ls",decimal_digits:2,rounding:0,code:"LVL",name_plural:"Latvian lati"},LYD:{symbol:"LD",name:"Libyan Dinar",symbol_native:"Ø¯.Ù.â",decimal_digits:3,rounding:0,code:"LYD",name_plural:"Libyan dinars"},MAD:{symbol:"MAD",name:"Moroccan Dirham",symbol_native:"Ø¯.Ù.â",decimal_digits:2,rounding:0,code:"MAD",name_plural:"Moroccan dirhams"},MDL:{symbol:"MDL",name:"Moldovan Leu",symbol_native:"MDL",decimal_digits:2,rounding:0,code:"MDL",name_plural:"Moldovan lei"},MGA:{symbol:"MGA",name:"Malagasy Ariary",symbol_native:"MGA",decimal_digits:0,rounding:0,code:"MGA",name_plural:"Malagasy Ariaries"},MKD:{symbol:"MKD",name:"Macedonian Denar",symbol_native:"MKD",decimal_digits:2,rounding:0,code:"MKD",name_plural:"Macedonian denari"},MMK:{symbol:"MMK",name:"Myanma Kyat",symbol_native:"K",decimal_digits:0,rounding:0,code:"MMK",name_plural:"Myanma kyats"},MOP:{symbol:"MOP$",name:"Macanese Pataca",symbol_native:"MOP$",decimal_digits:2,rounding:0,code:"MOP",name_plural:"Macanese patacas"},MUR:{symbol:"MURs",name:"Mauritian Rupee",symbol_native:"MURs",decimal_digits:0,rounding:0,code:"MUR",name_plural:"Mauritian rupees"},MXN:{symbol:"MX$",name:"Mexican Peso",symbol_native:"$",decimal_digits:2,rounding:0,code:"MXN",name_plural:"Mexican pesos"},MYR:{symbol:"RM",name:"Malaysian Ringgit",symbol_native:"RM",decimal_digits:2,rounding:0,code:"MYR",name_plural:"Malaysian ringgits"},MZN:{symbol:"MTn",name:"Mozambican Metical",symbol_native:"MTn",decimal_digits:2,rounding:0,code:"MZN",name_plural:"Mozambican meticals"},NAD:{symbol:"N$",name:"Namibian Dollar",symbol_native:"N$",decimal_digits:2,rounding:0,code:"NAD",name_plural:"Namibian dollars"},NGN:{symbol:"â¦",name:"Nigerian Naira",symbol_native:"â¦",decimal_digits:2,rounding:0,code:"NGN",name_plural:"Nigerian nairas"},NIO:{symbol:"C$",name:"Nicaraguan CÃ³rdoba",symbol_native:"C$",decimal_digits:2,rounding:0,code:"NIO",name_plural:"Nicaraguan cÃ³rdobas"},NOK:{symbol:"Nkr",name:"Norwegian Krone",symbol_native:"kr",decimal_digits:2,rounding:0,code:"NOK",name_plural:"Norwegian kroner"},NPR:{symbol:"NPRs",name:"Nepalese Rupee",symbol_native:"à¤¨à¥à¤°à¥",decimal_digits:2,rounding:0,code:"NPR",use_indian_numbering_system:!0,name_plural:"Nepalese rupees"},NZD:{symbol:"NZ$",name:"New Zealand Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"NZD",name_plural:"New Zealand dollars"},OMR:{symbol:"OMR",name:"Omani Rial",symbol_native:"Ø±.Ø¹.â",decimal_digits:3,rounding:0,code:"OMR",name_plural:"Omani rials"},PAB:{symbol:"B/.",name:"Panamanian Balboa",symbol_native:"B/.",decimal_digits:2,rounding:0,code:"PAB",name_plural:"Panamanian balboas"},PEN:{symbol:"S/.",name:"Peruvian Nuevo Sol",symbol_native:"S/.",decimal_digits:2,rounding:0,code:"PEN",name_plural:"Peruvian nuevos soles"},PHP:{symbol:"â±",name:"Philippine Peso",symbol_native:"â±",decimal_digits:2,rounding:0,code:"PHP",name_plural:"Philippine pesos"},PKR:{symbol:"PKRs",name:"Pakistani Rupee",symbol_native:"â¨",decimal_digits:0,rounding:0,code:"PKR",use_indian_numbering_system:!0,name_plural:"Pakistani rupees"},PLN:{symbol:"zÅ",name:"Polish Zloty",symbol_native:"zÅ",decimal_digits:2,rounding:0,code:"PLN",name_plural:"Polish zlotys"},PYG:{symbol:"â²",name:"Paraguayan Guarani",symbol_native:"â²",decimal_digits:0,rounding:0,code:"PYG",name_plural:"Paraguayan guaranis"},QAR:{symbol:"QR",name:"Qatari Rial",symbol_native:"Ø±.Ù.â",decimal_digits:2,rounding:0,code:"QAR",name_plural:"Qatari rials"},RON:{symbol:"RON",name:"Romanian Leu",symbol_native:"RON",decimal_digits:2,rounding:0,code:"RON",name_plural:"Romanian lei"},RSD:{symbol:"din.",name:"Serbian Dinar",symbol_native:"Ð´Ð¸Ð½.",decimal_digits:0,rounding:0,code:"RSD",name_plural:"Serbian dinars"},RUB:{symbol:"RUB",name:"Russian Ruble",symbol_native:"â½.",decimal_digits:2,rounding:0,code:"RUB",name_plural:"Russian rubles"},RWF:{symbol:"RWF",name:"Rwandan Franc",symbol_native:"FR",decimal_digits:0,rounding:0,code:"RWF",name_plural:"Rwandan francs"},SAR:{symbol:"SR",name:"Saudi Riyal",symbol_native:"Ø±.Ø³.â",decimal_digits:2,rounding:0,code:"SAR",name_plural:"Saudi riyals"},SDG:{symbol:"SDG",name:"Sudanese Pound",symbol_native:"SDG",decimal_digits:2,rounding:0,code:"SDG",name_plural:"Sudanese pounds"},SEK:{symbol:"Skr",name:"Swedish Krona",symbol_native:"kr",decimal_digits:2,rounding:0,code:"SEK",name_plural:"Swedish kronor"},SGD:{symbol:"S$",name:"Singapore Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"SGD",name_plural:"Singapore dollars"},SOS:{symbol:"Ssh",name:"Somali Shilling",symbol_native:"Ssh",decimal_digits:0,rounding:0,code:"SOS",name_plural:"Somali shillings"},SYP:{symbol:"SYÂ£",name:"Syrian Pound",symbol_native:"Ù.Ø³.â",decimal_digits:0,rounding:0,code:"SYP",name_plural:"Syrian pounds"},THB:{symbol:"à¸¿",name:"Thai Baht",symbol_native:"à¸¿",decimal_digits:2,rounding:0,code:"THB",name_plural:"Thai baht"},TND:{symbol:"DT",name:"Tunisian Dinar",symbol_native:"Ø¯.Øª.â",decimal_digits:3,rounding:0,code:"TND",name_plural:"Tunisian dinars"},TOP:{symbol:"T$",name:"Tongan PaÊ»anga",symbol_native:"T$",decimal_digits:2,rounding:0,code:"TOP",name_plural:"Tongan paÊ»anga"},TRY:{symbol:"TL",name:"Turkish Lira",symbol_native:"TL",decimal_digits:2,rounding:0,code:"TRY",name_plural:"Turkish Lira"},TTD:{symbol:"TT$",name:"Trinidad and Tobago Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"TTD",name_plural:"Trinidad and Tobago dollars"},TWD:{symbol:"NT$",name:"New Taiwan Dollar",symbol_native:"NT$",decimal_digits:2,rounding:0,code:"TWD",name_plural:"New Taiwan dollars"},TZS:{symbol:"TSh",name:"Tanzanian Shilling",symbol_native:"TSh",decimal_digits:0,rounding:0,code:"TZS",name_plural:"Tanzanian shillings"},UAH:{symbol:"â´",name:"Ukrainian Hryvnia",symbol_native:"â´",decimal_digits:2,rounding:0,code:"UAH",name_plural:"Ukrainian hryvnias"},UGX:{symbol:"USh",name:"Ugandan Shilling",symbol_native:"USh",decimal_digits:0,rounding:0,code:"UGX",name_plural:"Ugandan shillings"},UYU:{symbol:"$U",name:"Uruguayan Peso",symbol_native:"$",decimal_digits:2,rounding:0,code:"UYU",name_plural:"Uruguayan pesos"},UZS:{symbol:"UZS",name:"Uzbekistan Som",symbol_native:"UZS",decimal_digits:0,rounding:0,code:"UZS",name_plural:"Uzbekistan som"},VEF:{symbol:"Bs.F.",name:"Venezuelan BolÃ­var",symbol_native:"Bs.F.",decimal_digits:2,rounding:0,code:"VEF",name_plural:"Venezuelan bolÃ­vars"},VND:{symbol:"â«",name:"Vietnamese Dong",symbol_native:"â«",decimal_digits:0,rounding:0,code:"VND",name_plural:"Vietnamese dong"},XAF:{symbol:"FCFA",name:"CFA Franc BEAC",symbol_native:"FCFA",decimal_digits:0,rounding:0,code:"XAF",name_plural:"CFA francs BEAC"},XOF:{symbol:"CFA",name:"CFA Franc BCEAO",symbol_native:"CFA",decimal_digits:0,rounding:0,code:"XOF",name_plural:"CFA francs BCEAO"},YER:{symbol:"YR",name:"Yemeni Rial",symbol_native:"Ø±.Ù.â",decimal_digits:0,rounding:0,code:"YER",name_plural:"Yemeni rials"},ZAR:{symbol:"R",name:"South African Rand",symbol_native:"R",decimal_digits:2,rounding:0,code:"ZAR",name_plural:"South African rand"},ZMK:{symbol:"ZK",name:"Zambian Kwacha",symbol_native:"ZK",decimal_digits:0,rounding:0,code:"ZMK",name_plural:"Zambian kwachas"},ZWL:{symbol:"ZWL$",name:"Zimbabwean Dollar",symbol_native:"ZWL$",decimal_digits:0,rounding:0,code:"ZWL",name_plural:"Zimbabwean Dollar"}};function ja(i,e,n){const r=i.slice();return r[9]=e[n],r}function Va(i){let e,n=i[9]+"",r,l,c=kt[i[9]].symbol+"",u,m;return{c(){e=E("option"),r=Ae(n),l=Ae(" ("),u=Ae(c),m=Ae(`)
          `),this.h()},l(_){e=S(_,"OPTION",{});var v=H(e);r=Oe(v,n),l=Oe(v," ("),u=Oe(v,c),m=Oe(v,`)
          `),v.forEach(y),this.h()},h(){e.__value=i[9],dt(e,e.__value)},m(_,v){le(_,e,v),p(e,r),p(e,l),p(e,u),p(e,m)},p:Et,d(_){_&&y(e)}}}function Xl(i){let e,n,r,l="Add New Trip",c,u,m,_="Trip Name",v,g,w,O,K,ee="Trip Currency",W,U,R,T,q,k="Trip Start",re,ie,$,pe,oe,De,ge="Trip End",ce,ye,se,Pe,Ce,Y,ue="Add Trip",C,M,G="Cancel",he,A,_e,xe=Qe(Object.keys(kt)),we=[];for(let de=0;de<xe.length;de+=1)we[de]=Va(ja(i,xe,de));function qe(de){i[7](de)}let Ve={format:"yyyy-MM-dd",closeOnSelection:!0,id:"tripStart"};i[2]!==void 0&&(Ve.value=i[2]),ie=new Xn({props:Ve}),rn.push(()=>Rn(ie,"value",qe));function Ee(de){i[8](de)}let J={format:"yyyy-MM-dd",closeOnSelection:!0,min:i[2],id:"tripEnd"};return i[3]!==void 0&&(J.value=i[3]),ye=new Xn({props:J}),rn.push(()=>Rn(ye,"value",Ee)),{c(){e=E("div"),n=E("form"),r=E("h1"),r.textContent=l,c=te(),u=E("div"),m=E("label"),m.textContent=_,v=te(),g=E("input"),w=te(),O=E("div"),K=E("label"),K.textContent=ee,W=te(),U=E("select");for(let de=0;de<we.length;de+=1)we[de].c();R=te(),T=E("div"),q=E("label"),q.textContent=k,re=te(),Vt(ie.$$.fragment),pe=te(),oe=E("div"),De=E("label"),De.textContent=ge,ce=te(),Vt(ye.$$.fragment),Pe=te(),Ce=E("div"),Y=E("button"),Y.textContent=ue,C=te(),M=E("a"),M.textContent=G,this.h()},l(de){e=S(de,"DIV",{class:!0});var Se=H(e);n=S(Se,"FORM",{});var Ke=H(n);r=S(Ke,"H1",{"data-svelte-h":!0}),Ye(r)!=="svelte-1x3twms"&&(r.textContent=l),c=ne(Ke),u=S(Ke,"DIV",{class:!0});var Ie=H(u);m=S(Ie,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ye(m)!=="svelte-1y8z10u"&&(m.textContent=_),v=ne(Ie),g=S(Ie,"INPUT",{id:!0,class:!0,type:!0}),Ie.forEach(y),w=ne(Ke),O=S(Ke,"DIV",{class:!0});var P=H(O);K=S(P,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ye(K)!=="svelte-1fzihue"&&(K.textContent=ee),W=ne(P),U=S(P,"SELECT",{id:!0,class:!0});var Ue=H(U);for(let nt=0;nt<we.length;nt+=1)we[nt].l(Ue);Ue.forEach(y),P.forEach(y),R=ne(Ke),T=S(Ke,"DIV",{class:!0});var Le=H(T);q=S(Le,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ye(q)!=="svelte-4n7gli"&&(q.textContent=k),re=ne(Le),xt(ie.$$.fragment,Le),Le.forEach(y),pe=ne(Ke),oe=S(Ke,"DIV",{class:!0});var fe=H(oe);De=S(fe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ye(De)!=="svelte-1dn7717"&&(De.textContent=ge),ce=ne(fe),xt(ye.$$.fragment,fe),fe.forEach(y),Pe=ne(Ke),Ce=S(Ke,"DIV",{class:!0});var We=H(Ce);Y=S(We,"BUTTON",{class:!0,"data-svelte-h":!0}),Ye(Y)!=="svelte-ik7jo4"&&(Y.textContent=ue),C=ne(We),M=S(We,"A",{href:!0,class:!0,"data-svelte-h":!0}),Ye(M)!=="svelte-wj5j6d"&&(M.textContent=G),We.forEach(y),Ke.forEach(y),Se.forEach(y),this.h()},h(){h(m,"for","tripName"),h(m,"class","form-label"),h(g,"id","tripName"),h(g,"class","form-control"),h(g,"type","text"),h(u,"class","mb-3"),h(K,"for","tripCurrency"),h(K,"class","form-label"),h(U,"id","tripCurrency"),h(U,"class","form-control"),i[1]===void 0&&xn(()=>i[6].call(U)),h(O,"class","mb-3"),h(q,"for","tripStart"),h(q,"class","form-label"),h(T,"class","mb-3"),h(De,"for","tripStart"),h(De,"class","form-label"),h(oe,"class","mb-3"),h(Y,"class","btn btn-primary"),h(M,"href","#/"),h(M,"class","btn btn-outline-primary"),h(Ce,"class","gap-3 d-grid d-md-block"),h(e,"class","w-100")},m(de,Se){le(de,e,Se),p(e,n),p(n,r),p(n,c),p(n,u),p(u,m),p(u,v),p(u,g),dt(g,i[0]),p(n,w),p(n,O),p(O,K),p(O,W),p(O,U);for(let Ke=0;Ke<we.length;Ke+=1)we[Ke]&&we[Ke].m(U,null);$t(U,i[1],!0),p(n,R),p(n,T),p(T,q),p(T,re),zt(ie,T,null),p(n,pe),p(n,oe),p(oe,De),p(oe,ce),zt(ye,oe,null),p(n,Pe),p(n,Ce),p(Ce,Y),p(Ce,C),p(Ce,M),he=!0,A||(_e=[Ze(g,"input",i[5]),Ze(U,"change",i[6]),Ze(Y,"click",i[4])],A=!0)},p(de,[Se]){if(Se&1&&g.value!==de[0]&&dt(g,de[0]),Se&0){xe=Qe(Object.keys(kt));let P;for(P=0;P<xe.length;P+=1){const Ue=ja(de,xe,P);we[P]?we[P].p(Ue,Se):(we[P]=Va(Ue),we[P].c(),we[P].m(U,null))}for(;P<we.length;P+=1)we[P].d(1);we.length=xe.length}Se&2&&$t(U,de[1]);const Ke={};!$&&Se&4&&($=!0,Ke.value=de[2],Ln(()=>$=!1)),ie.$set(Ke);const Ie={};Se&4&&(Ie.min=de[2]),!se&&Se&8&&(se=!0,Ie.value=de[3],Ln(()=>se=!1)),ye.$set(Ie)},i(de){he||(lt(ie.$$.fragment,de),lt(ye.$$.fragment,de),he=!0)},o(de){ht(ie.$$.fragment,de),ht(ye.$$.fragment,de),he=!1},d(de){de&&y(e),Lt(we,de),Ht(ie),Ht(ye),A=!1,Sn(_e)}}}function $l(i,e,n){let r="My Trip",l="GBP",c=new Date,u=new Date;async function m(){try{const O=await Mt.trips.add({name:r,defaultCurrency:l,startDate:c,startDateString:c.toDateString(),endDate:u,endDateString:u.toDateString()});window.location.href="#/trip/"+O}catch{window.location.href="#/"}}function _(){r=this.value,n(0,r)}function v(){l=Qn(this),n(1,l)}function g(O){c=O,n(2,c)}function w(O){u=O,n(3,u)}return[r,l,c,u,m,_,v,g,w]}class es extends un{constructor(e){super(),cn(this,e,$l,Xl,an,{})}}/*!
  * PhotoSwipe Lightbox 5.4.4 - https://photoswipe.com
  * (c) 2024 Dmytro Semenov
  */function dr(i,e,n){const r=document.createElement(e);return i&&(r.className=i),n&&n.appendChild(r),r}function ts(i,e,n){let r=`translate3d(${i}px,0px,0)`;return n!==void 0&&(r+=` scale3d(${n},${n},1)`),r}function Ri(i,e,n){i.style.width=typeof e=="number"?`${e}px`:e,i.style.height=typeof n=="number"?`${n}px`:n}const hn={IDLE:"idle",LOADING:"loading",LOADED:"loaded",ERROR:"error"};function ns(i){return"button"in i&&i.button===1||i.ctrlKey||i.metaKey||i.altKey||i.shiftKey}function hr(i,e,n=document){let r=[];if(i instanceof Element)r=[i];else if(i instanceof NodeList||Array.isArray(i))r=Array.from(i);else{const l=typeof i=="string"?i:e;l&&(r=Array.from(n.querySelectorAll(l)))}return r}function rs(i){return typeof i=="function"&&i.prototype&&i.prototype.goTo}function xa(){return!!(navigator.vendor&&navigator.vendor.match(/apple/i))}class is{constructor(e,n){this.type=e,this.defaultPrevented=!1,n&&Object.assign(this,n)}preventDefault(){this.defaultPrevented=!0}}class as{constructor(){this._listeners={},this._filters={},this.pswp=void 0,this.options=void 0}addFilter(e,n,r=100){var l,c,u;this._filters[e]||(this._filters[e]=[]),(l=this._filters[e])===null||l===void 0||l.push({fn:n,priority:r}),(c=this._filters[e])===null||c===void 0||c.sort((m,_)=>m.priority-_.priority),(u=this.pswp)===null||u===void 0||u.addFilter(e,n,r)}removeFilter(e,n){this._filters[e]&&(this._filters[e]=this._filters[e].filter(r=>r.fn!==n)),this.pswp&&this.pswp.removeFilter(e,n)}applyFilters(e,...n){var r;return(r=this._filters[e])===null||r===void 0||r.forEach(l=>{n[0]=l.fn.apply(this,n)}),n[0]}on(e,n){var r,l;this._listeners[e]||(this._listeners[e]=[]),(r=this._listeners[e])===null||r===void 0||r.push(n),(l=this.pswp)===null||l===void 0||l.on(e,n)}off(e,n){var r;this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter(l=>n!==l)),(r=this.pswp)===null||r===void 0||r.off(e,n)}dispatch(e,n){var r;if(this.pswp)return this.pswp.dispatch(e,n);const l=new is(e,n);return(r=this._listeners[e])===null||r===void 0||r.forEach(c=>{c.call(this,l)}),l}}class os{constructor(e,n){if(this.element=dr("pswp__img pswp__img--placeholder",e?"img":"div",n),e){const r=this.element;r.decoding="async",r.alt="",r.src=e,r.setAttribute("role","presentation")}this.element.setAttribute("aria-hidden","true")}setDisplayedSize(e,n){this.element&&(this.element.tagName==="IMG"?(Ri(this.element,250,"auto"),this.element.style.transformOrigin="0 0",this.element.style.transform=ts(0,0,e/250)):Ri(this.element,e,n))}destroy(){var e;(e=this.element)!==null&&e!==void 0&&e.parentNode&&this.element.remove(),this.element=null}}class ls{constructor(e,n,r){this.instance=n,this.data=e,this.index=r,this.element=void 0,this.placeholder=void 0,this.slide=void 0,this.displayedImageWidth=0,this.displayedImageHeight=0,this.width=Number(this.data.w)||Number(this.data.width)||0,this.height=Number(this.data.h)||Number(this.data.height)||0,this.isAttached=!1,this.hasSlide=!1,this.isDecoding=!1,this.state=hn.IDLE,this.data.type?this.type=this.data.type:this.data.src?this.type="image":this.type="html",this.instance.dispatch("contentInit",{content:this})}removePlaceholder(){this.placeholder&&!this.keepPlaceholder()&&setTimeout(()=>{this.placeholder&&(this.placeholder.destroy(),this.placeholder=void 0)},1e3)}load(e,n){if(this.slide&&this.usePlaceholder())if(this.placeholder){const r=this.placeholder.element;r&&!r.parentElement&&this.slide.container.prepend(r)}else{const r=this.instance.applyFilters("placeholderSrc",this.data.msrc&&this.slide.isFirstSlide?this.data.msrc:!1,this);this.placeholder=new os(r,this.slide.container)}this.element&&!n||this.instance.dispatch("contentLoad",{content:this,isLazy:e}).defaultPrevented||(this.isImageContent()?(this.element=dr("pswp__img","img"),this.displayedImageWidth&&this.loadImage(e)):(this.element=dr("pswp__content","div"),this.element.innerHTML=this.data.html||""),n&&this.slide&&this.slide.updateContentSize(!0))}loadImage(e){var n,r;if(!this.isImageContent()||!this.element||this.instance.dispatch("contentLoadImage",{content:this,isLazy:e}).defaultPrevented)return;const l=this.element;this.updateSrcsetSizes(),this.data.srcset&&(l.srcset=this.data.srcset),l.src=(n=this.data.src)!==null&&n!==void 0?n:"",l.alt=(r=this.data.alt)!==null&&r!==void 0?r:"",this.state=hn.LOADING,l.complete?this.onLoaded():(l.onload=()=>{this.onLoaded()},l.onerror=()=>{this.onError()})}setSlide(e){this.slide=e,this.hasSlide=!0,this.instance=e.pswp}onLoaded(){this.state=hn.LOADED,this.slide&&this.element&&(this.instance.dispatch("loadComplete",{slide:this.slide,content:this}),this.slide.isActive&&this.slide.heavyAppended&&!this.element.parentNode&&(this.append(),this.slide.updateContentSize(!0)),(this.state===hn.LOADED||this.state===hn.ERROR)&&this.removePlaceholder())}onError(){this.state=hn.ERROR,this.slide&&(this.displayError(),this.instance.dispatch("loadComplete",{slide:this.slide,isError:!0,content:this}),this.instance.dispatch("loadError",{slide:this.slide,content:this}))}isLoading(){return this.instance.applyFilters("isContentLoading",this.state===hn.LOADING,this)}isError(){return this.state===hn.ERROR}isImageContent(){return this.type==="image"}setDisplayedSize(e,n){if(this.element&&(this.placeholder&&this.placeholder.setDisplayedSize(e,n),!this.instance.dispatch("contentResize",{content:this,width:e,height:n}).defaultPrevented&&(Ri(this.element,e,n),this.isImageContent()&&!this.isError()))){const r=!this.displayedImageWidth&&e;this.displayedImageWidth=e,this.displayedImageHeight=n,r?this.loadImage(!1):this.updateSrcsetSizes(),this.slide&&this.instance.dispatch("imageSizeChange",{slide:this.slide,width:e,height:n,content:this})}}isZoomable(){return this.instance.applyFilters("isContentZoomable",this.isImageContent()&&this.state!==hn.ERROR,this)}updateSrcsetSizes(){if(!this.isImageContent()||!this.element||!this.data.srcset)return;const e=this.element,n=this.instance.applyFilters("srcsetSizesWidth",this.displayedImageWidth,this);(!e.dataset.largestUsedSize||n>parseInt(e.dataset.largestUsedSize,10))&&(e.sizes=n+"px",e.dataset.largestUsedSize=String(n))}usePlaceholder(){return this.instance.applyFilters("useContentPlaceholder",this.isImageContent(),this)}lazyLoad(){this.instance.dispatch("contentLazyLoad",{content:this}).defaultPrevented||this.load(!0)}keepPlaceholder(){return this.instance.applyFilters("isKeepingPlaceholder",this.isLoading(),this)}destroy(){this.hasSlide=!1,this.slide=void 0,!this.instance.dispatch("contentDestroy",{content:this}).defaultPrevented&&(this.remove(),this.placeholder&&(this.placeholder.destroy(),this.placeholder=void 0),this.isImageContent()&&this.element&&(this.element.onload=null,this.element.onerror=null,this.element=void 0))}displayError(){if(this.slide){var e,n;let r=dr("pswp__error-msg","div");r.innerText=(e=(n=this.instance.options)===null||n===void 0?void 0:n.errorMsg)!==null&&e!==void 0?e:"",r=this.instance.applyFilters("contentErrorElement",r,this),this.element=dr("pswp__content pswp__error-msg-container","div"),this.element.appendChild(r),this.slide.container.innerText="",this.slide.container.appendChild(this.element),this.slide.updateContentSize(!0),this.removePlaceholder()}}append(){if(this.isAttached||!this.element)return;if(this.isAttached=!0,this.state===hn.ERROR){this.displayError();return}if(this.instance.dispatch("contentAppend",{content:this}).defaultPrevented)return;const e="decode"in this.element;this.isImageContent()?e&&this.slide&&(!this.slide.isActive||xa())?(this.isDecoding=!0,this.element.decode().catch(()=>{}).finally(()=>{this.isDecoding=!1,this.appendImage()})):this.appendImage():this.slide&&!this.element.parentNode&&this.slide.container.appendChild(this.element)}activate(){this.instance.dispatch("contentActivate",{content:this}).defaultPrevented||!this.slide||(this.isImageContent()&&this.isDecoding&&!xa()?this.appendImage():this.isError()&&this.load(!1,!0),this.slide.holderElement&&this.slide.holderElement.setAttribute("aria-hidden","false"))}deactivate(){this.instance.dispatch("contentDeactivate",{content:this}),this.slide&&this.slide.holderElement&&this.slide.holderElement.setAttribute("aria-hidden","true")}remove(){this.isAttached=!1,!this.instance.dispatch("contentRemove",{content:this}).defaultPrevented&&(this.element&&this.element.parentNode&&this.element.remove(),this.placeholder&&this.placeholder.element&&this.placeholder.element.remove())}appendImage(){this.isAttached&&(this.instance.dispatch("contentAppendImage",{content:this}).defaultPrevented||(this.slide&&this.element&&!this.element.parentNode&&this.slide.container.appendChild(this.element),(this.state===hn.LOADED||this.state===hn.ERROR)&&this.removePlaceholder()))}}function ss(i,e){if(i.getViewportSizeFn){const n=i.getViewportSizeFn(i,e);if(n)return n}return{x:document.documentElement.clientWidth,y:window.innerHeight}}function Kr(i,e,n,r,l){let c=0;if(e.paddingFn)c=e.paddingFn(n,r,l)[i];else if(e.padding)c=e.padding[i];else{const u="padding"+i[0].toUpperCase()+i.slice(1);e[u]&&(c=e[u])}return Number(c)||0}function us(i,e,n,r){return{x:e.x-Kr("left",i,e,n,r)-Kr("right",i,e,n,r),y:e.y-Kr("top",i,e,n,r)-Kr("bottom",i,e,n,r)}}const za=4e3;class cs{constructor(e,n,r,l){this.pswp=l,this.options=e,this.itemData=n,this.index=r,this.panAreaSize=null,this.elementSize=null,this.fit=1,this.fill=1,this.vFill=1,this.initial=1,this.secondary=1,this.max=1,this.min=1}update(e,n,r){const l={x:e,y:n};this.elementSize=l,this.panAreaSize=r;const c=r.x/l.x,u=r.y/l.y;this.fit=Math.min(1,c<u?c:u),this.fill=Math.min(1,c>u?c:u),this.vFill=Math.min(1,u),this.initial=this._getInitial(),this.secondary=this._getSecondary(),this.max=Math.max(this.initial,this.secondary,this._getMax()),this.min=Math.min(this.fit,this.initial,this.secondary),this.pswp&&this.pswp.dispatch("zoomLevelsUpdate",{zoomLevels:this,slideData:this.itemData})}_parseZoomLevelOption(e){const n=e+"ZoomLevel",r=this.options[n];if(r)return typeof r=="function"?r(this):r==="fill"?this.fill:r==="fit"?this.fit:Number(r)}_getSecondary(){let e=this._parseZoomLevelOption("secondary");return e||(e=Math.min(1,this.fit*3),this.elementSize&&e*this.elementSize.x>za&&(e=za/this.elementSize.x),e)}_getInitial(){return this._parseZoomLevelOption("initial")||this.fit}_getMax(){return this._parseZoomLevelOption("max")||Math.max(1,this.fit*4)}}function Jo(i,e,n){const r=e.createContentFromData(i,n);let l;const{options:c}=e;if(c){l=new cs(c,i,-1);let u;e.pswp?u=e.pswp.viewportSize:u=ss(c,e);const m=us(c,u,i,n);l.update(r.width,r.height,m)}return r.lazyLoad(),l&&r.setDisplayedSize(Math.ceil(r.width*l.initial),Math.ceil(r.height*l.initial)),r}function fs(i,e){const n=e.getItemData(i);if(!e.dispatch("lazyLoadSlide",{index:i,itemData:n}).defaultPrevented)return Jo(n,e,i)}class ds extends as{getNumItems(){var e;let n=0;const r=(e=this.options)===null||e===void 0?void 0:e.dataSource;r&&"length"in r?n=r.length:r&&"gallery"in r&&(r.items||(r.items=this._getGalleryDOMElements(r.gallery)),r.items&&(n=r.items.length));const l=this.dispatch("numItems",{dataSource:r,numItems:n});return this.applyFilters("numItems",l.numItems,r)}createContentFromData(e,n){return new ls(e,this,n)}getItemData(e){var n;const r=(n=this.options)===null||n===void 0?void 0:n.dataSource;let l={};Array.isArray(r)?l=r[e]:r&&"gallery"in r&&(r.items||(r.items=this._getGalleryDOMElements(r.gallery)),l=r.items[e]);let c=l;c instanceof Element&&(c=this._domElementToItemData(c));const u=this.dispatch("itemData",{itemData:c||{},index:e});return this.applyFilters("itemData",u.itemData,e)}_getGalleryDOMElements(e){var n,r;return(n=this.options)!==null&&n!==void 0&&n.children||(r=this.options)!==null&&r!==void 0&&r.childSelector?hr(this.options.children,this.options.childSelector,e)||[]:[e]}_domElementToItemData(e){const n={element:e},r=e.tagName==="A"?e:e.querySelector("a");if(r){n.src=r.dataset.pswpSrc||r.href,r.dataset.pswpSrcset&&(n.srcset=r.dataset.pswpSrcset),n.width=r.dataset.pswpWidth?parseInt(r.dataset.pswpWidth,10):0,n.height=r.dataset.pswpHeight?parseInt(r.dataset.pswpHeight,10):0,n.w=n.width,n.h=n.height,r.dataset.pswpType&&(n.type=r.dataset.pswpType);const c=e.querySelector("img");if(c){var l;n.msrc=c.currentSrc||c.src,n.alt=(l=c.getAttribute("alt"))!==null&&l!==void 0?l:""}(r.dataset.pswpCropped||r.dataset.cropped)&&(n.thumbCropped=!0)}return this.applyFilters("domItemData",n,e,r)}lazyLoadData(e,n){return Jo(e,this,n)}}class hs extends ds{constructor(e){super(),this.options=e||{},this._uid=0,this.shouldOpen=!1,this._preloadedContent=void 0,this.onThumbnailsClick=this.onThumbnailsClick.bind(this)}init(){hr(this.options.gallery,this.options.gallerySelector).forEach(e=>{e.addEventListener("click",this.onThumbnailsClick,!1)})}onThumbnailsClick(e){if(ns(e)||window.pswp)return;let n={x:e.clientX,y:e.clientY};!n.x&&!n.y&&(n=null);let r=this.getClickedIndex(e);r=this.applyFilters("clickedIndex",r,e,this);const l={gallery:e.currentTarget};r>=0&&(e.preventDefault(),this.loadAndOpen(r,l,n))}getClickedIndex(e){if(this.options.getClickedIndexFn)return this.options.getClickedIndexFn.call(this,e);const n=e.target,l=hr(this.options.children,this.options.childSelector,e.currentTarget).findIndex(c=>c===n||c.contains(n));return l!==-1?l:this.options.children||this.options.childSelector?-1:0}loadAndOpen(e,n,r){if(window.pswp||!this.options)return!1;if(!n&&this.options.gallery&&this.options.children){const l=hr(this.options.gallery);l[0]&&(n={gallery:l[0]})}return this.options.index=e,this.options.initialPointerPos=r,this.shouldOpen=!0,this.preload(e,n),!0}preload(e,n){const{options:r}=this;n&&(r.dataSource=n);const l=[],c=typeof r.pswpModule;if(rs(r.pswpModule))l.push(Promise.resolve(r.pswpModule));else{if(c==="string")throw new Error("pswpModule as string is no longer supported");if(c==="function")l.push(r.pswpModule());else throw new Error("pswpModule is not valid")}typeof r.openPromise=="function"&&l.push(r.openPromise()),r.preloadFirstSlide!==!1&&e>=0&&(this._preloadedContent=fs(e,this));const u=++this._uid;Promise.all(l).then(m=>{if(this.shouldOpen){const _=m[0];this._openPhotoswipe(_,u)}})}_openPhotoswipe(e,n){if(n!==this._uid&&this.shouldOpen||(this.shouldOpen=!1,window.pswp))return;const r=typeof e=="object"?new e.default(this.options):new e(this.options);this.pswp=r,window.pswp=r,Object.keys(this._listeners).forEach(l=>{var c;(c=this._listeners[l])===null||c===void 0||c.forEach(u=>{r.on(l,u)})}),Object.keys(this._filters).forEach(l=>{var c;(c=this._filters[l])===null||c===void 0||c.forEach(u=>{r.addFilter(l,u.fn,u.priority)})}),this._preloadedContent&&(r.contentLoader.addToCache(this._preloadedContent),this._preloadedContent=void 0),r.on("destroy",()=>{this.pswp=void 0,delete window.pswp}),r.init()}destroy(){var e;(e=this.pswp)===null||e===void 0||e.destroy(),this.shouldOpen=!1,this._listeners={},hr(this.options.gallery,this.options.gallerySelector).forEach(n=>{n.removeEventListener("click",this.onThumbnailsClick,!1)})}}function Ha(i,e,n){const r=i.slice();return r[9]=e[n],r}function Ua(i,e,n){const r=i.slice();return r[12]=e[n],r}function Ai(i){const e=i.slice(),n=Array.from(new Set(e[2].map(r=>r.currency)));return e[8]=n,e}function qa(i){let e,n,r=i[0].name+"",l,c,u,m,_,v,g,w,O,K,ee='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash3" viewBox="0 0 16 16"><path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5M11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47M8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5"></path></svg>',W,U,R=i[0].startDate.toDateString()+"",T,q,k=i[0].endDate.toDateString()+"",re,ie,$,pe,oe=i[0].defaultCurrency+"",De,ge,ce=kt[i[0].defaultCurrency].symbol+"",ye,se,Pe,Ce,Y,ue,C,M,G,he,A,_e,xe,we,qe,Ve="Receipts:",Ee,J,de,Se,Ke=i[2]&&Wa(Ai(i));return{c(){e=E("h1"),n=E("span"),l=Ae(r),c=te(),u=E("span"),m=E("a"),_=Qt("svg"),v=Qt("path"),g=Qt("path"),O=te(),K=E("button"),K.innerHTML=ee,W=te(),U=E("h4"),T=Ae(R),q=Ae(" - "),re=Ae(k),ie=te(),$=E("p"),pe=Ae("Default currency: "),De=Ae(oe),ge=Ae(" ("),ye=Ae(ce),se=Ae(")"),Pe=te(),Ce=E("a"),Y=Ae("+ Add Receipt"),C=te(),M=E("a"),G=Qt("svg"),he=Qt("path"),A=Qt("path"),_e=Ae(`
        Export/Print`),we=te(),qe=E("h5"),qe.textContent=Ve,Ee=te(),Ke&&Ke.c(),J=Ft(),this.h()},l(Ie){e=S(Ie,"H1",{class:!0});var P=H(e);n=S(P,"SPAN",{});var Ue=H(n);l=Oe(Ue,r),Ue.forEach(y),c=ne(P),u=S(P,"SPAN",{});var Le=H(u);m=S(Le,"A",{href:!0,class:!0,title:!0});var fe=H(m);_=Xt(fe,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,class:!0,viewBox:!0});var We=H(_);v=Xt(We,"path",{d:!0}),H(v).forEach(y),g=Xt(We,"path",{"fill-rule":!0,d:!0}),H(g).forEach(y),We.forEach(y),fe.forEach(y),O=ne(Le),K=S(Le,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Ye(K)!=="svelte-7al2bn"&&(K.innerHTML=ee),Le.forEach(y),P.forEach(y),W=ne(Ie),U=S(Ie,"H4",{});var nt=H(U);T=Oe(nt,R),q=Oe(nt," - "),re=Oe(nt,k),nt.forEach(y),ie=ne(Ie),$=S(Ie,"P",{});var ut=H($);pe=Oe(ut,"Default currency: "),De=Oe(ut,oe),ge=Oe(ut," ("),ye=Oe(ut,ce),se=Oe(ut,")"),ut.forEach(y),Pe=ne(Ie),Ce=S(Ie,"A",{class:!0,href:!0});var At=H(Ce);Y=Oe(At,"+ Add Receipt"),At.forEach(y),C=ne(Ie),M=S(Ie,"A",{href:!0,target:!0,class:!0});var _t=H(M);G=Xt(_t,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,class:!0,viewBox:!0});var St=H(G);he=Xt(St,"path",{d:!0}),H(he).forEach(y),A=Xt(St,"path",{d:!0}),H(A).forEach(y),St.forEach(y),_e=Oe(_t,`
        Export/Print`),_t.forEach(y),we=ne(Ie),qe=S(Ie,"H5",{class:!0,"data-svelte-h":!0}),Ye(qe)!=="svelte-7onek5"&&(qe.textContent=Ve),Ee=ne(Ie),Ke&&Ke.l(Ie),J=Ft(),this.h()},h(){h(v,"d","M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"),h(g,"fill-rule","evenodd"),h(g,"d","M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"),h(_,"xmlns","http://www.w3.org/2000/svg"),h(_,"width","16"),h(_,"height","16"),h(_,"fill","currentColor"),h(_,"class","bi bi-pencil-square"),h(_,"viewBox","0 0 16 16"),h(m,"href",w="#/update/"+i[0].id),h(m,"class","btn btn-outline-secondary no-outline"),h(m,"title","Update Trip"),h(K,"class","btn btn-outline-secondary no-outline hover-red"),h(K,"title","Delete Trip"),h(e,"class","d-flex justify-content-between"),h(Ce,"class","btn btn-primary"),h(Ce,"href",ue="#/addreceipt/"+i[0].id),h(he,"d","M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"),h(A,"d","M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z"),h(G,"xmlns","http://www.w3.org/2000/svg"),h(G,"width","16"),h(G,"height","16"),h(G,"fill","currentColor"),h(G,"class","bi bi-download"),h(G,"viewBox","0 0 16 16"),h(M,"href",xe="#/print/"+i[0].id),h(M,"target","_blank"),h(M,"class","btn btn-outline-primary"),h(qe,"class","mt-3")},m(Ie,P){le(Ie,e,P),p(e,n),p(n,l),p(e,c),p(e,u),p(u,m),p(m,_),p(_,v),p(_,g),p(u,O),p(u,K),le(Ie,W,P),le(Ie,U,P),p(U,T),p(U,q),p(U,re),le(Ie,ie,P),le(Ie,$,P),p($,pe),p($,De),p($,ge),p($,ye),p($,se),le(Ie,Pe,P),le(Ie,Ce,P),p(Ce,Y),le(Ie,C,P),le(Ie,M,P),p(M,G),p(G,he),p(G,A),p(M,_e),le(Ie,we,P),le(Ie,qe,P),le(Ie,Ee,P),Ke&&Ke.m(Ie,P),le(Ie,J,P),de||(Se=Ze(K,"click",function(){Wo(i[3](i[0]))&&i[3](i[0]).apply(this,arguments)}),de=!0)},p(Ie,P){i=Ie,P&1&&r!==(r=i[0].name+"")&&$e(l,r),P&1&&w!==(w="#/update/"+i[0].id)&&h(m,"href",w),P&1&&R!==(R=i[0].startDate.toDateString()+"")&&$e(T,R),P&1&&k!==(k=i[0].endDate.toDateString()+"")&&$e(re,k),P&1&&oe!==(oe=i[0].defaultCurrency+"")&&$e(De,oe),P&1&&ce!==(ce=kt[i[0].defaultCurrency].symbol+"")&&$e(ye,ce),P&1&&ue!==(ue="#/addreceipt/"+i[0].id)&&h(Ce,"href",ue),P&1&&xe!==(xe="#/print/"+i[0].id)&&h(M,"href",xe),i[2]?Ke?Ke.p(Ai(i),P):(Ke=Wa(Ai(i)),Ke.c(),Ke.m(J.parentNode,J)):Ke&&(Ke.d(1),Ke=null)},d(Ie){Ie&&(y(e),y(W),y(U),y(ie),y($),y(Pe),y(Ce),y(C),y(M),y(we),y(qe),y(Ee),y(J)),Ke&&Ke.d(Ie),de=!1,Se()}}}function Wa(i){let e,n,r,l="<tr><th>Description</th> <th>Date</th> <th>Type</th> <th>Total</th> <th></th></tr>",c,u,m=[],_=new Map,v,g,w,O,K,ee,W,U,R="<strong>Total</strong>",T,q,k,re,ie,$,pe=Qe(i[2]);const oe=ce=>ce[12].id;for(let ce=0;ce<pe.length;ce+=1){let ye=Ua(i,pe,ce),se=oe(ye);_.set(se,m[ce]=Ga(se,ye))}let De=Qe(i[8]),ge=[];for(let ce=0;ce<De.length;ce+=1)ge[ce]=Ya(Ha(i,De,ce));return{c(){e=E("div"),n=E("table"),r=E("thead"),r.innerHTML=l,c=te(),u=E("tbody");for(let ce=0;ce<m.length;ce+=1)m[ce].c();v=te(),g=E("tfoot"),w=E("tr"),O=E("td"),K=te(),ee=E("td"),W=te(),U=E("td"),U.innerHTML=R,T=te(),q=E("td");for(let ce=0;ce<ge.length;ce+=1)ge[ce].c();k=te(),re=E("td"),this.h()},l(ce){e=S(ce,"DIV",{class:!0});var ye=H(e);n=S(ye,"TABLE",{class:!0});var se=H(n);r=S(se,"THEAD",{"data-svelte-h":!0}),Ye(r)!=="svelte-1vpbmbw"&&(r.innerHTML=l),c=ne(se),u=S(se,"TBODY",{});var Pe=H(u);for(let C=0;C<m.length;C+=1)m[C].l(Pe);Pe.forEach(y),v=ne(se),g=S(se,"TFOOT",{class:!0});var Ce=H(g);w=S(Ce,"TR",{});var Y=H(w);O=S(Y,"TD",{}),H(O).forEach(y),K=ne(Y),ee=S(Y,"TD",{}),H(ee).forEach(y),W=ne(Y),U=S(Y,"TD",{class:!0,"data-svelte-h":!0}),Ye(U)!=="svelte-14afisz"&&(U.innerHTML=R),T=ne(Y),q=S(Y,"TD",{});var ue=H(q);for(let C=0;C<ge.length;C+=1)ge[C].l(ue);ue.forEach(y),k=ne(Y),re=S(Y,"TD",{}),H(re).forEach(y),Y.forEach(y),Ce.forEach(y),se.forEach(y),ye.forEach(y),this.h()},h(){h(U,"class","text-end"),h(g,"class","table-group-divider"),h(n,"class","table table-striped table-hover"),h(e,"class","table-responsive")},m(ce,ye){le(ce,e,ye),p(e,n),p(n,r),p(n,c),p(n,u);for(let se=0;se<m.length;se+=1)m[se]&&m[se].m(u,null);p(n,v),p(n,g),p(g,w),p(w,O),p(w,K),p(w,ee),p(w,W),p(w,U),p(w,T),p(w,q);for(let se=0;se<ge.length;se+=1)ge[se]&&ge[se].m(q,null);p(w,k),p(w,re),ie||($=El(i[5].call(null,u)),ie=!0)},p(ce,ye){if(ye&20&&(pe=Qe(ce[2]),m=qr(m,ye,oe,1,ce,pe,_,u,Ur,Ga,null,Ua)),ye&4){De=Qe(ce[8]);let se;for(se=0;se<De.length;se+=1){const Pe=Ha(ce,De,se);ge[se]?ge[se].p(Pe,ye):(ge[se]=Ya(Pe),ge[se].c(),ge[se].m(q,null))}for(;se<ge.length;se+=1)ge[se].d(1);ge.length=De.length}},d(ce){ce&&y(e);for(let ye=0;ye<m.length;ye+=1)m[ye].d();Lt(ge,ce),ie=!1,$()}}}function Ga(i,e){let n,r,l,c,u,m,_,v,g,w,O,K,ee,W=e[12].description+"",U,R,T,q=e[12].receiptDateString+"",k,re,ie,$,pe,oe=Fa[e[12].receiptType]+"",De,ge,ce=e[12].receiptType+"",ye,se,Pe,Ce=kt[e[12].currency].symbol+"",Y,ue,C=e[12].total.toFixed(2)+"",M,G,he,A,_e,xe,we,qe,Ve,Ee,J='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash3" viewBox="0 0 16 16"><path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5M11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47M8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5"></path></svg>',de,Se,Ke;return{key:i,first:null,c(){n=E("tr"),r=E("td"),l=E("div"),c=E("span"),u=E("a"),m=Qt("svg"),_=Qt("path"),v=Qt("path"),K=te(),ee=E("span"),U=Ae(W),R=te(),T=E("td"),k=Ae(q),re=te(),ie=E("td"),$=E("abbr"),pe=new Sl(!1),ge=E("span"),ye=Ae(ce),se=te(),Pe=E("td"),Y=Ae(Ce),ue=te(),M=Ae(C),G=te(),he=E("td"),A=E("a"),_e=Qt("svg"),xe=Qt("path"),we=Qt("path"),Ve=te(),Ee=E("button"),Ee.innerHTML=J,de=te(),this.h()},l(Ie){n=S(Ie,"TR",{});var P=H(n);r=S(P,"TD",{});var Ue=H(r);l=S(Ue,"DIV",{class:!0});var Le=H(l);c=S(Le,"SPAN",{});var fe=H(c);u=S(fe,"A",{class:!0,href:!0,"data-pswp-width":!0,"data-pswp-height":!0,target:!0,rel:!0,title:!0,style:!0});var We=H(u);m=Xt(We,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,class:!0,viewBox:!0});var nt=H(m);_=Xt(nt,"path",{d:!0}),H(_).forEach(y),v=Xt(nt,"path",{d:!0}),H(v).forEach(y),nt.forEach(y),We.forEach(y),fe.forEach(y),K=ne(Le),ee=S(Le,"SPAN",{});var ut=H(ee);U=Oe(ut,W),ut.forEach(y),Le.forEach(y),Ue.forEach(y),R=ne(P),T=S(P,"TD",{});var At=H(T);k=Oe(At,q),At.forEach(y),re=ne(P),ie=S(P,"TD",{});var _t=H(ie);$=S(_t,"ABBR",{class:!0,title:!0});var St=H($);pe=Cl(St,!1),St.forEach(y),ge=S(_t,"SPAN",{class:!0});var gt=H(ge);ye=Oe(gt,ce),gt.forEach(y),_t.forEach(y),se=ne(P),Pe=S(P,"TD",{class:!0});var yt=H(Pe);Y=Oe(yt,Ce),ue=ne(yt),M=Oe(yt,C),yt.forEach(y),G=ne(P),he=S(P,"TD",{});var Ot=H(he);A=S(Ot,"A",{class:!0,href:!0,title:!0});var Xe=H(A);_e=Xt(Xe,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,class:!0,viewBox:!0});var Ut=H(_e);xe=Xt(Ut,"path",{d:!0}),H(xe).forEach(y),we=Xt(Ut,"path",{"fill-rule":!0,d:!0}),H(we).forEach(y),Ut.forEach(y),Xe.forEach(y),Ve=ne(Ot),Ee=S(Ot,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Ye(Ee)!=="svelte-mho9l"&&(Ee.innerHTML=J),Ot.forEach(y),de=ne(P),P.forEach(y),this.h()},h(){h(_,"d","M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0"),h(v,"d","M2.002 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2zm12 1a1 1 0 0 1 1 1v6.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12V3a1 1 0 0 1 1-1z"),h(m,"xmlns","http://www.w3.org/2000/svg"),h(m,"width","16"),h(m,"height","16"),h(m,"fill","currentColor"),h(m,"class","bi bi-image"),h(m,"viewBox","0 0 16 16"),h(u,"class","btn btn-outline-primary btn-sm rImages"),h(u,"href",g=e[12].imageData),h(u,"data-pswp-width",w=e[12].imageWidth),h(u,"data-pswp-height",O=e[12].imageHeight),h(u,"target","_blank"),h(u,"rel","noreferrer"),h(u,"title","View Image"),mr(u,"border","none"),h(l,"class","receiptDesc"),pe.a=null,h($,"class","me-2 typeIcon"),h($,"title",De=e[12].receiptType),h(ge,"class","typeText"),h(Pe,"class","text-nowrap"),h(xe,"d","M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"),h(we,"fill-rule","evenodd"),h(we,"d","M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"),h(_e,"xmlns","http://www.w3.org/2000/svg"),h(_e,"width","16"),h(_e,"height","16"),h(_e,"fill","currentColor"),h(_e,"class","bi bi-pencil-square"),h(_e,"viewBox","0 0 16 16"),h(A,"class","btn btn-outline-dark no-outline btn-sm"),h(A,"href",qe="#/editreceipt/"+e[12].id),h(A,"title","Edit Receipt"),h(Ee,"class","btn btn-outline-dark no-outline btn-sm hover-red"),h(Ee,"title","Delete Receipt"),this.first=n},m(Ie,P){le(Ie,n,P),p(n,r),p(r,l),p(l,c),p(c,u),p(u,m),p(m,_),p(m,v),p(l,K),p(l,ee),p(ee,U),p(n,R),p(n,T),p(T,k),p(n,re),p(n,ie),p(ie,$),pe.m(oe,$),p(ie,ge),p(ge,ye),p(n,se),p(n,Pe),p(Pe,Y),p(Pe,ue),p(Pe,M),p(n,G),p(n,he),p(he,A),p(A,_e),p(_e,xe),p(_e,we),p(he,Ve),p(he,Ee),p(n,de),Se||(Ke=Ze(Ee,"click",function(){Wo(e[4](e[12]))&&e[4](e[12]).apply(this,arguments)}),Se=!0)},p(Ie,P){e=Ie,P&4&&g!==(g=e[12].imageData)&&h(u,"href",g),P&4&&w!==(w=e[12].imageWidth)&&h(u,"data-pswp-width",w),P&4&&O!==(O=e[12].imageHeight)&&h(u,"data-pswp-height",O),P&4&&W!==(W=e[12].description+"")&&$e(U,W),P&4&&q!==(q=e[12].receiptDateString+"")&&$e(k,q),P&4&&oe!==(oe=Fa[e[12].receiptType]+"")&&pe.p(oe),P&4&&De!==(De=e[12].receiptType)&&h($,"title",De),P&4&&ce!==(ce=e[12].receiptType+"")&&$e(ye,ce),P&4&&Ce!==(Ce=kt[e[12].currency].symbol+"")&&$e(Y,Ce),P&4&&C!==(C=e[12].total.toFixed(2)+"")&&$e(M,C),P&4&&qe!==(qe="#/editreceipt/"+e[12].id)&&h(A,"href",qe)},d(Ie){Ie&&y(n),Se=!1,Ke()}}}function Ya(i){let e=kt[i[9]].symbol+"",n,r,l=i[2].filter(_).reduce(Za,0).toFixed(2)+"",c,u,m;function _(...v){return i[7](i[9],...v)}return{c(){n=Ae(e),r=te(),c=Ae(l),u=te(),m=E("br")},l(v){n=Oe(v,e),r=ne(v),c=Oe(v,l),u=ne(v),m=S(v,"BR",{})},m(v,g){le(v,n,g),le(v,r,g),le(v,c,g),le(v,u,g),le(v,m,g)},p(v,g){i=v,g&4&&e!==(e=kt[i[9]].symbol+"")&&$e(n,e),g&4&&l!==(l=i[2].filter(_).reduce(Za,0).toFixed(2)+"")&&$e(c,l)},d(v){v&&(y(n),y(r),y(c),y(u),y(m))}}}function ps(i){let e,n=i[0]&&qa(i);return{c(){e=E("div"),n&&n.c(),this.h()},l(r){e=S(r,"DIV",{class:!0});var l=H(e);n&&n.l(l),l.forEach(y),this.h()},h(){h(e,"class","w-100")},m(r,l){le(r,e,l),n&&n.m(e,null)},p(r,[l]){r[0]?n?n.p(r,l):(n=qa(r),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},i:Et,o:Et,d(r){r&&y(e),n&&n.d()}}}const Za=(i,e)=>i+e.total;function ms(i,e,n){let r,l=Et,c=()=>(l(),l=pr(_,K=>n(2,r=K)),_);i.$$.on_destroy.push(()=>l());let{tripId:u}=e,m,_;u>-1&&Mt.trips.get(u).then(K=>{n(0,m=K),c(n(1,_=gr(async()=>await Mt.receipts.where({tripId:u}).reverse().sortBy("receiptDate"))))});async function v(K){if(confirm(`Are you sure you want to delete trip "${K.name}"? It will also delete all receipts for this trip`)){let W=await Mt.trips.where("id").equals(K.id).delete();console.log(`Deleted ${W} trip(s)`),W=await Mt.receipts.where("tripId").equals(K.id).delete(),console.log(`Deleted ${W} receipts(s)`),window.location.href="#/"}}async function g(K){if(confirm(`Are you sure you want to delete receipt for "${K.description}"?`)){let W=await Mt.receipts.where("id").equals(K.id).delete();console.log(`Deleted ${W} receipts(s)`)}}function w(K){new hs({gallery:".rImages",pswpModule:()=>Il(()=>import("../chunks/photoswipe.esm.GXRgw7eJ.js"),[],import.meta.url)}).init()}const O=(K,ee)=>ee.currency==K;return i.$$set=K=>{"tripId"in K&&n(6,u=K.tripId)},[m,_,r,v,g,w,u,O]}class vs extends un{constructor(e){super(),cn(this,e,ms,ps,an,{tripId:6})}}function Qo(){let i=document.getElementById("tripToggle");i==null||i.classList.toggle("show")}function Ja(i,e,n){const r=i.slice();return r[8]=e[n],r}function Qa(i,e,n){const r=i.slice();return r[12]=e[n],r}function Oi(i){const e=i.slice(),n=Array.from(new Set(e[2].filter(function(...l){return i[5](e[8],...l)}).map(r=>r.currency)));return e[11]=n,e}function Xa(i){let e=[],n=new Map,r,l=Qe(i[1]);const c=u=>u[8].id;for(let u=0;u<l.length;u+=1){let m=Ja(i,l,u),_=c(m);n.set(_,e[u]=to(_,m))}return{c(){for(let u=0;u<e.length;u+=1)e[u].c();r=Ft()},l(u){for(let m=0;m<e.length;m+=1)e[m].l(u);r=Ft()},m(u,m){for(let _=0;_<e.length;_+=1)e[_]&&e[_].m(u,m);le(u,r,m)},p(u,m){m&7&&(l=Qe(u[1]),e=qr(e,m,c,1,u,l,n,r.parentNode,Ur,to,r,Ja))},d(u){u&&y(r);for(let m=0;m<e.length;m+=1)e[m].d(u)}}}function $a(i){let e,n=Qe(i[11]),r=[];for(let l=0;l<n.length;l+=1)r[l]=eo(Qa(i,n,l));return{c(){e=E("small");for(let l=0;l<r.length;l+=1)r[l].c()},l(l){e=S(l,"SMALL",{});var c=H(e);for(let u=0;u<r.length;u+=1)r[u].l(c);c.forEach(y)},m(l,c){le(l,e,c);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null)},p(l,c){if(c&6){n=Qe(l[11]);let u;for(u=0;u<n.length;u+=1){const m=Qa(l,n,u);r[u]?r[u].p(m,c):(r[u]=eo(m),r[u].c(),r[u].m(e,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=n.length}},d(l){l&&y(e),Lt(r,l)}}}function eo(i){let e=kt[i[12]].symbol+"",n,r,l=i[2].filter(_).filter(v).reduce(no,0).toFixed(2)+"",c,u,m;function _(...g){return i[6](i[8],...g)}function v(...g){return i[7](i[12],...g)}return{c(){n=Ae(e),r=te(),c=Ae(l),u=te(),m=E("br")},l(g){n=Oe(g,e),r=ne(g),c=Oe(g,l),u=ne(g),m=S(g,"BR",{})},m(g,w){le(g,n,w),le(g,r,w),le(g,c,w),le(g,u,w),le(g,m,w)},p(g,w){i=g,w&6&&e!==(e=kt[i[12]].symbol+"")&&$e(n,e),w&6&&l!==(l=i[2].filter(_).filter(v).reduce(no,0).toFixed(2)+"")&&$e(c,l)},d(g){g&&(y(n),y(r),y(c),y(u),y(m))}}}function to(i,e){let n,r,l,c=e[8].name+"",u,m,_,v,g=e[8].startDateString+"",w,O,K=e[8].endDateString+"",ee,W,U,R,T,q,k=e[2]&&$a(Oi(e));return{key:i,first:null,c(){n=E("a"),r=E("div"),l=E("strong"),u=Ae(c),m=te(),k&&k.c(),_=te(),v=E("div"),w=Ae(g),O=Ae(" - "),ee=Ae(K),W=te(),this.h()},l(re){n=S(re,"A",{href:!0,class:!0,"aria-current":!0,"data-trip-id":!0});var ie=H(n);r=S(ie,"DIV",{class:!0});var $=H(r);l=S($,"STRONG",{class:!0});var pe=H(l);u=Oe(pe,c),pe.forEach(y),m=ne($),k&&k.l($),$.forEach(y),_=ne(ie),v=S(ie,"DIV",{class:!0});var oe=H(v);w=Oe(oe,g),O=Oe(oe," - "),ee=Oe(oe,K),oe.forEach(y),W=ne(ie),ie.forEach(y),this.h()},h(){h(l,"class","mb-1"),h(r,"class","d-flex w-100 align-items-center justify-content-between"),h(v,"class","col-10 mb-1 small"),h(n,"href",U="#/trip/"+e[8].id),h(n,"class","list-group-item list-group-item-action py-3 lh-sm m-2"),h(n,"aria-current","false"),h(n,"data-trip-id",R=e[8].id),Tt(n,"active",e[0]==e[8].id),this.first=n},m(re,ie){le(re,n,ie),p(n,r),p(r,l),p(l,u),p(r,m),k&&k.m(r,null),p(n,_),p(n,v),p(v,w),p(v,O),p(v,ee),p(n,W),T||(q=Ze(n,"click",Qo),T=!0)},p(re,ie){e=re,ie&2&&c!==(c=e[8].name+"")&&$e(u,c),e[2]?k?k.p(Oi(e),ie):(k=$a(Oi(e)),k.c(),k.m(r,null)):k&&(k.d(1),k=null),ie&2&&g!==(g=e[8].startDateString+"")&&$e(w,g),ie&2&&K!==(K=e[8].endDateString+"")&&$e(ee,K),ie&2&&U!==(U="#/trip/"+e[8].id)&&h(n,"href",U),ie&2&&R!==(R=e[8].id)&&h(n,"data-trip-id",R),ie&3&&Tt(n,"active",e[0]==e[8].id)},d(re){re&&y(n),k&&k.d(),T=!1,q()}}}function gs(i){let e,n=i[1]&&Xa(i);return{c(){n&&n.c(),e=Ft()},l(r){n&&n.l(r),e=Ft()},m(r,l){n&&n.m(r,l),le(r,e,l)},p(r,[l]){r[1]?n?n.p(r,l):(n=Xa(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:Et,o:Et,d(r){r&&y(e),n&&n.d(r)}}}const no=(i,e)=>i+e.total;function _s(i,e,n){let r,l,{tripId:c}=e,u=gr(()=>Mt.trips.toCollection().reverse().sortBy("endDate"));Jn(i,u,w=>n(1,r=w));let m=gr(()=>Mt.receipts.toArray());Jn(i,m,w=>n(2,l=w));const _=(w,O)=>O.tripId==w.id,v=(w,O)=>O.tripId==w.id,g=(w,O)=>O.currency==w;return i.$$set=w=>{"tripId"in w&&n(0,c=w.tripId)},[c,r,l,u,m,_,v,g]}class ys extends un{constructor(e){super(),cn(this,e,_s,gs,an,{tripId:0})}}function ro(i,e,n){const r=i.slice();return r[9]=e[n],r}function io(i){let e,n,r="Update Trip",l,c,u,m="Trip Name",_,v,g,w,O,K="Trip Currency",ee,W,U,R,T,q="Trip Start",k,re,ie,$,pe,oe,De="Trip End",ge,ce,ye,se,Pe,Ce,Y="Update Trip",ue,C,M,G,he,A,_e,xe=Qe(Object.keys(kt)),we=[];for(let de=0;de<xe.length;de+=1)we[de]=ao(ro(i,xe,de));function qe(de){i[7](de)}let Ve={format:"yyyy-MM-dd",closeOnSelection:!0,id:"tripStart"};i[1]!==void 0&&(Ve.value=i[1]),re=new Xn({props:Ve}),rn.push(()=>Rn(re,"value",qe));function Ee(de){i[8](de)}let J={format:"yyyy-MM-dd",closeOnSelection:!0,min:i[1],id:"tripEnd"};return i[2]!==void 0&&(J.value=i[2]),ce=new Xn({props:J}),rn.push(()=>Rn(ce,"value",Ee)),{c(){e=E("form"),n=E("h1"),n.textContent=r,l=te(),c=E("div"),u=E("label"),u.textContent=m,_=te(),v=E("input"),g=te(),w=E("div"),O=E("label"),O.textContent=K,ee=te(),W=E("select");for(let de=0;de<we.length;de+=1)we[de].c();U=te(),R=E("div"),T=E("label"),T.textContent=q,k=te(),Vt(re.$$.fragment),$=te(),pe=E("div"),oe=E("label"),oe.textContent=De,ge=te(),Vt(ce.$$.fragment),se=te(),Pe=E("div"),Ce=E("button"),Ce.textContent=Y,ue=te(),C=E("a"),M=Ae("Cancel"),this.h()},l(de){e=S(de,"FORM",{});var Se=H(e);n=S(Se,"H1",{"data-svelte-h":!0}),Ye(n)!=="svelte-9352dq"&&(n.textContent=r),l=ne(Se),c=S(Se,"DIV",{class:!0});var Ke=H(c);u=S(Ke,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ye(u)!=="svelte-1y8z10u"&&(u.textContent=m),_=ne(Ke),v=S(Ke,"INPUT",{id:!0,class:!0,type:!0}),Ke.forEach(y),g=ne(Se),w=S(Se,"DIV",{class:!0});var Ie=H(w);O=S(Ie,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ye(O)!=="svelte-1fzihue"&&(O.textContent=K),ee=ne(Ie),W=S(Ie,"SELECT",{id:!0,class:!0});var P=H(W);for(let nt=0;nt<we.length;nt+=1)we[nt].l(P);P.forEach(y),Ie.forEach(y),U=ne(Se),R=S(Se,"DIV",{class:!0});var Ue=H(R);T=S(Ue,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ye(T)!=="svelte-4n7gli"&&(T.textContent=q),k=ne(Ue),xt(re.$$.fragment,Ue),Ue.forEach(y),$=ne(Se),pe=S(Se,"DIV",{class:!0});var Le=H(pe);oe=S(Le,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ye(oe)!=="svelte-1dn7717"&&(oe.textContent=De),ge=ne(Le),xt(ce.$$.fragment,Le),Le.forEach(y),se=ne(Se),Pe=S(Se,"DIV",{class:!0});var fe=H(Pe);Ce=S(fe,"BUTTON",{class:!0,"data-svelte-h":!0}),Ye(Ce)!=="svelte-bsugmm"&&(Ce.textContent=Y),ue=ne(fe),C=S(fe,"A",{href:!0,class:!0});var We=H(C);M=Oe(We,"Cancel"),We.forEach(y),fe.forEach(y),Se.forEach(y),this.h()},h(){h(u,"for","tripName"),h(u,"class","form-label"),h(v,"id","tripName"),h(v,"class","form-control"),h(v,"type","text"),h(c,"class","mb-3"),h(O,"for","tripCurrency"),h(O,"class","form-label"),h(W,"id","tripCurrency"),h(W,"class","form-control"),i[0].defaultCurrency===void 0&&xn(()=>i[6].call(W)),h(w,"class","mb-3"),h(T,"for","tripStart"),h(T,"class","form-label"),h(R,"class","mb-3"),h(oe,"for","tripStart"),h(oe,"class","form-label"),h(pe,"class","mb-3"),h(Ce,"class","btn btn-primary"),h(C,"href",G="#/trip/"+i[0].id),h(C,"class","btn btn-outline-primary"),h(Pe,"class","gap-3 d-grid d-md-block")},m(de,Se){le(de,e,Se),p(e,n),p(e,l),p(e,c),p(c,u),p(c,_),p(c,v),dt(v,i[0].name),p(e,g),p(e,w),p(w,O),p(w,ee),p(w,W);for(let Ke=0;Ke<we.length;Ke+=1)we[Ke]&&we[Ke].m(W,null);$t(W,i[0].defaultCurrency,!0),p(e,U),p(e,R),p(R,T),p(R,k),zt(re,R,null),p(e,$),p(e,pe),p(pe,oe),p(pe,ge),zt(ce,pe,null),p(e,se),p(e,Pe),p(Pe,Ce),p(Pe,ue),p(Pe,C),p(C,M),he=!0,A||(_e=[Ze(v,"input",i[5]),Ze(W,"change",i[6]),Ze(Ce,"click",i[3])],A=!0)},p(de,Se){if(Se&1&&v.value!==de[0].name&&dt(v,de[0].name),Se&0){xe=Qe(Object.keys(kt));let P;for(P=0;P<xe.length;P+=1){const Ue=ro(de,xe,P);we[P]?we[P].p(Ue,Se):(we[P]=ao(Ue),we[P].c(),we[P].m(W,null))}for(;P<we.length;P+=1)we[P].d(1);we.length=xe.length}Se&1&&$t(W,de[0].defaultCurrency);const Ke={};!ie&&Se&2&&(ie=!0,Ke.value=de[1],Ln(()=>ie=!1)),re.$set(Ke);const Ie={};Se&2&&(Ie.min=de[1]),!ye&&Se&4&&(ye=!0,Ie.value=de[2],Ln(()=>ye=!1)),ce.$set(Ie),(!he||Se&1&&G!==(G="#/trip/"+de[0].id))&&h(C,"href",G)},i(de){he||(lt(re.$$.fragment,de),lt(ce.$$.fragment,de),he=!0)},o(de){ht(re.$$.fragment,de),ht(ce.$$.fragment,de),he=!1},d(de){de&&y(e),Lt(we,de),Ht(re),Ht(ce),A=!1,Sn(_e)}}}function ao(i){let e,n=i[9]+"",r,l,c=kt[i[9]].symbol+"",u,m;return{c(){e=E("option"),r=Ae(n),l=Ae(" ("),u=Ae(c),m=Ae(`)
          `),this.h()},l(_){e=S(_,"OPTION",{});var v=H(e);r=Oe(v,n),l=Oe(v," ("),u=Oe(v,c),m=Oe(v,`)
          `),v.forEach(y),this.h()},h(){e.__value=i[9],dt(e,e.__value)},m(_,v){le(_,e,v),p(e,r),p(e,l),p(e,u),p(e,m)},p:Et,d(_){_&&y(e)}}}function bs(i){let e,n,r=i[0]&&io(i);return{c(){e=E("div"),r&&r.c(),this.h()},l(l){e=S(l,"DIV",{class:!0});var c=H(e);r&&r.l(c),c.forEach(y),this.h()},h(){h(e,"class","w-100")},m(l,c){le(l,e,c),r&&r.m(e,null),n=!0},p(l,[c]){l[0]?r?(r.p(l,c),c&1&&lt(r,1)):(r=io(l),r.c(),lt(r,1),r.m(e,null)):r&&(zn(),ht(r,1,1,()=>{r=null}),Hn())},i(l){n||(lt(r),n=!0)},o(l){ht(r),n=!1},d(l){l&&y(e),r&&r.d()}}}function ws(i,e,n){let{tripId:r}=e,l,c,u;r>-1&&Mt.trips.get(r).then(O=>{n(0,l=O),n(1,c=new Date(l.startDateString)),n(2,u=new Date(l.endDateString))});async function m(){try{const O=await Mt.trips.update(l.id,{name:l.name,defaultCurrency:l.defaultCurrency,startDate:c,endDate:u,startDateString:c.toDateString(),endDateString:u.toDateString()});window.location.href="#/trip/"+l.id}catch{window.location.href="#/"}}function _(){l.name=this.value,n(0,l)}function v(){l.defaultCurrency=Qn(this),n(0,l)}function g(O){c=O,n(1,c)}function w(O){u=O,n(2,u)}return i.$$set=O=>{"tripId"in O&&n(4,r=O.tripId)},[l,c,u,m,r,_,v,g,w]}class ks extends un{constructor(e){super(),cn(this,e,ws,bs,an,{tripId:4})}}/*!
 * currency.js - v2.0.4
 * http://scurker.github.io/currency.js
 *
 * Copyright (c) 2021 Jason Wilson
 * Released under MIT license
 */var Ds={symbol:"$",separator:",",decimal:".",errorOnInvalid:!1,precision:2,pattern:"!#",negativePattern:"-!#",format:Ts,fromCents:!1},Xo=function(e){return Math.round(e)},Ki=function(e){return Math.pow(10,e)},Es=function(e,n){return Xo(e/n)*n},Ss=/(\d)(?=(\d{3})+\b)/g,Cs=/(\d)(?=(\d\d)+\d\b)/g;function _n(i,e){var n=this;if(!(n instanceof _n))return new _n(i,e);var r=Object.assign({},Ds,e),l=Ki(r.precision),c=xr(i,r);n.intValue=c,n.value=c/l,r.increment=r.increment||1/l,r.useVedic?r.groups=Cs:r.groups=Ss,this.s=r,this.p=l}function xr(i,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=0,l=e.decimal,c=e.errorOnInvalid,u=e.precision,m=e.fromCents,_=Ki(u),v=typeof i=="number",g=i instanceof _n;if(g&&m)return i.intValue;if(v||g)r=g?i.value:i;else if(typeof i=="string"){var w=new RegExp("[^-\\d"+l+"]","g"),O=new RegExp("\\"+l,"g");r=i.replace(/\((.*)\)/,"-$1").replace(w,"").replace(O,"."),r=r||0}else{if(c)throw Error("Invalid Input");r=0}return m||(r*=_,r=r.toFixed(4)),n?Xo(r):r}function Ts(i,e){var n=e.pattern,r=e.negativePattern,l=e.symbol,c=e.separator,u=e.decimal,m=e.groups,_=(""+i).replace(/^-/,"").split("."),v=_[0],g=_[1];return(i.value>=0?n:r).replace("!",l).replace("#",v.replace(m,"$1"+c)+(g?u+g:""))}_n.prototype={add:function(e){var n=this.intValue,r=this.s,l=this.p;return _n((n+=xr(e,r))/(r.fromCents?1:l),r)},subtract:function(e){var n=this.intValue,r=this.s,l=this.p;return _n((n-=xr(e,r))/(r.fromCents?1:l),r)},multiply:function(e){var n=this.intValue,r=this.s;return _n((n*=e)/(r.fromCents?1:Ki(r.precision)),r)},divide:function(e){var n=this.intValue,r=this.s;return _n(n/=xr(e,r,!1),r)},distribute:function(e){for(var n=this.intValue,r=this.p,l=this.s,c=[],u=Math[n>=0?"floor":"ceil"](n/e),m=Math.abs(n-u*e),_=l.fromCents?1:r;e!==0;e--){var v=_n(u/_,l);m-- >0&&(v=v[n>=0?"add":"subtract"](1/_)),c.push(v)}return c},dollars:function(){return~~this.value},cents:function(){var e=this.intValue,n=this.p;return~~(e%n)},format:function(e){var n=this.s;return typeof e=="function"?e(this,n):n.format(this,Object.assign({},n,e))},toString:function(){var e=this.intValue,n=this.p,r=this.s;return Es(e/n,r.increment).toFixed(r.precision)},toJSON:function(){return this.value}};var As={exports:{}};(function(i){var e=function(n){var r=Object.prototype,l=r.hasOwnProperty,c=Object.defineProperty||function(C,M,G){C[M]=G.value},u,m=typeof Symbol=="function"?Symbol:{},_=m.iterator||"@@iterator",v=m.asyncIterator||"@@asyncIterator",g=m.toStringTag||"@@toStringTag";function w(C,M,G){return Object.defineProperty(C,M,{value:G,enumerable:!0,configurable:!0,writable:!0}),C[M]}try{w({},"")}catch{w=function(M,G,he){return M[G]=he}}function O(C,M,G,he){var A=M&&M.prototype instanceof q?M:q,_e=Object.create(A.prototype),xe=new Ce(he||[]);return c(_e,"_invoke",{value:ce(C,G,xe)}),_e}n.wrap=O;function K(C,M,G){try{return{type:"normal",arg:C.call(M,G)}}catch(he){return{type:"throw",arg:he}}}var ee="suspendedStart",W="suspendedYield",U="executing",R="completed",T={};function q(){}function k(){}function re(){}var ie={};w(ie,_,function(){return this});var $=Object.getPrototypeOf,pe=$&&$($(Y([])));pe&&pe!==r&&l.call(pe,_)&&(ie=pe);var oe=re.prototype=q.prototype=Object.create(ie);k.prototype=re,c(oe,"constructor",{value:re,configurable:!0}),c(re,"constructor",{value:k,configurable:!0}),k.displayName=w(re,g,"GeneratorFunction");function De(C){["next","throw","return"].forEach(function(M){w(C,M,function(G){return this._invoke(M,G)})})}n.isGeneratorFunction=function(C){var M=typeof C=="function"&&C.constructor;return M?M===k||(M.displayName||M.name)==="GeneratorFunction":!1},n.mark=function(C){return Object.setPrototypeOf?Object.setPrototypeOf(C,re):(C.__proto__=re,w(C,g,"GeneratorFunction")),C.prototype=Object.create(oe),C},n.awrap=function(C){return{__await:C}};function ge(C,M){function G(_e,xe,we,qe){var Ve=K(C[_e],C,xe);if(Ve.type==="throw")qe(Ve.arg);else{var Ee=Ve.arg,J=Ee.value;return J&&typeof J=="object"&&l.call(J,"__await")?M.resolve(J.__await).then(function(de){G("next",de,we,qe)},function(de){G("throw",de,we,qe)}):M.resolve(J).then(function(de){Ee.value=de,we(Ee)},function(de){return G("throw",de,we,qe)})}}var he;function A(_e,xe){function we(){return new M(function(qe,Ve){G(_e,xe,qe,Ve)})}return he=he?he.then(we,we):we()}c(this,"_invoke",{value:A})}De(ge.prototype),w(ge.prototype,v,function(){return this}),n.AsyncIterator=ge,n.async=function(C,M,G,he,A){A===void 0&&(A=Promise);var _e=new ge(O(C,M,G,he),A);return n.isGeneratorFunction(M)?_e:_e.next().then(function(xe){return xe.done?xe.value:_e.next()})};function ce(C,M,G){var he=ee;return function(_e,xe){if(he===U)throw new Error("Generator is already running");if(he===R){if(_e==="throw")throw xe;return ue()}for(G.method=_e,G.arg=xe;;){var we=G.delegate;if(we){var qe=ye(we,G);if(qe){if(qe===T)continue;return qe}}if(G.method==="next")G.sent=G._sent=G.arg;else if(G.method==="throw"){if(he===ee)throw he=R,G.arg;G.dispatchException(G.arg)}else G.method==="return"&&G.abrupt("return",G.arg);he=U;var Ve=K(C,M,G);if(Ve.type==="normal"){if(he=G.done?R:W,Ve.arg===T)continue;return{value:Ve.arg,done:G.done}}else Ve.type==="throw"&&(he=R,G.method="throw",G.arg=Ve.arg)}}}function ye(C,M){var G=M.method,he=C.iterator[G];if(he===u)return M.delegate=null,G==="throw"&&C.iterator.return&&(M.method="return",M.arg=u,ye(C,M),M.method==="throw")||G!=="return"&&(M.method="throw",M.arg=new TypeError("The iterator does not provide a '"+G+"' method")),T;var A=K(he,C.iterator,M.arg);if(A.type==="throw")return M.method="throw",M.arg=A.arg,M.delegate=null,T;var _e=A.arg;if(!_e)return M.method="throw",M.arg=new TypeError("iterator result is not an object"),M.delegate=null,T;if(_e.done)M[C.resultName]=_e.value,M.next=C.nextLoc,M.method!=="return"&&(M.method="next",M.arg=u);else return _e;return M.delegate=null,T}De(oe),w(oe,g,"Generator"),w(oe,_,function(){return this}),w(oe,"toString",function(){return"[object Generator]"});function se(C){var M={tryLoc:C[0]};1 in C&&(M.catchLoc=C[1]),2 in C&&(M.finallyLoc=C[2],M.afterLoc=C[3]),this.tryEntries.push(M)}function Pe(C){var M=C.completion||{};M.type="normal",delete M.arg,C.completion=M}function Ce(C){this.tryEntries=[{tryLoc:"root"}],C.forEach(se,this),this.reset(!0)}n.keys=function(C){var M=Object(C),G=[];for(var he in M)G.push(he);return G.reverse(),function A(){for(;G.length;){var _e=G.pop();if(_e in M)return A.value=_e,A.done=!1,A}return A.done=!0,A}};function Y(C){if(C){var M=C[_];if(M)return M.call(C);if(typeof C.next=="function")return C;if(!isNaN(C.length)){var G=-1,he=function A(){for(;++G<C.length;)if(l.call(C,G))return A.value=C[G],A.done=!1,A;return A.value=u,A.done=!0,A};return he.next=he}}return{next:ue}}n.values=Y;function ue(){return{value:u,done:!0}}return Ce.prototype={constructor:Ce,reset:function(C){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(Pe),!C)for(var M in this)M.charAt(0)==="t"&&l.call(this,M)&&!isNaN(+M.slice(1))&&(this[M]=u)},stop:function(){this.done=!0;var C=this.tryEntries[0],M=C.completion;if(M.type==="throw")throw M.arg;return this.rval},dispatchException:function(C){if(this.done)throw C;var M=this;function G(qe,Ve){return _e.type="throw",_e.arg=C,M.next=qe,Ve&&(M.method="next",M.arg=u),!!Ve}for(var he=this.tryEntries.length-1;he>=0;--he){var A=this.tryEntries[he],_e=A.completion;if(A.tryLoc==="root")return G("end");if(A.tryLoc<=this.prev){var xe=l.call(A,"catchLoc"),we=l.call(A,"finallyLoc");if(xe&&we){if(this.prev<A.catchLoc)return G(A.catchLoc,!0);if(this.prev<A.finallyLoc)return G(A.finallyLoc)}else if(xe){if(this.prev<A.catchLoc)return G(A.catchLoc,!0)}else if(we){if(this.prev<A.finallyLoc)return G(A.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(C,M){for(var G=this.tryEntries.length-1;G>=0;--G){var he=this.tryEntries[G];if(he.tryLoc<=this.prev&&l.call(he,"finallyLoc")&&this.prev<he.finallyLoc){var A=he;break}}A&&(C==="break"||C==="continue")&&A.tryLoc<=M&&M<=A.finallyLoc&&(A=null);var _e=A?A.completion:{};return _e.type=C,_e.arg=M,A?(this.method="next",this.next=A.finallyLoc,T):this.complete(_e)},complete:function(C,M){if(C.type==="throw")throw C.arg;return C.type==="break"||C.type==="continue"?this.next=C.arg:C.type==="return"?(this.rval=this.arg=C.arg,this.method="return",this.next="end"):C.type==="normal"&&M&&(this.next=M),T},finish:function(C){for(var M=this.tryEntries.length-1;M>=0;--M){var G=this.tryEntries[M];if(G.finallyLoc===C)return this.complete(G.completion,G.afterLoc),Pe(G),T}},catch:function(C){for(var M=this.tryEntries.length-1;M>=0;--M){var G=this.tryEntries[M];if(G.tryLoc===C){var he=G.completion;if(he.type==="throw"){var A=he.arg;Pe(G)}return A}}throw new Error("illegal catch attempt")},delegateYield:function(C,M,G){return this.delegate={iterator:Y(C),resultName:M,nextLoc:G},this.method==="next"&&(this.arg=u),T}},n}(i.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(As);var Fi=(i,e)=>`${i}-${e}-${Math.random().toString(16).slice(3,8)}`;const Os=Fi;let oo=0;var $o=({id:i,action:e,payload:n={}})=>{let r=i;return typeof r>"u"&&(r=Os("Job",oo),oo+=1),{id:r,action:e,payload:n}},$n={};let ji=!1;$n.logging=ji;$n.setLogging=i=>{ji=i};$n.log=(...i)=>ji?console.log.apply(void 0,i):null;const Is=$o,{log:Fr}=$n,Ps=Fi;let lo=0;var Ms=()=>{const i=Ps("Scheduler",lo),e={},n={};let r=[];lo+=1;const l=()=>r.length,c=()=>Object.keys(e).length,u=()=>{if(r.length!==0){const w=Object.keys(e);for(let O=0;O<w.length;O+=1)if(typeof n[w[O]]>"u"){r[0](e[w[O]]);break}}},m=(w,O)=>new Promise((K,ee)=>{const W=Is({action:w,payload:O});r.push(async U=>{r.shift(),n[U.id]=W;try{K(await U[w].apply(void 0,[...O,W.id]))}catch(R){ee(R)}finally{delete n[U.id],u()}}),Fr(`[${i}]: Add ${W.id} to JobQueue`),Fr(`[${i}]: JobQueue length=${r.length}`),u()});return{addWorker:w=>(e[w.id]=w,Fr(`[${i}]: Add ${w.id}`),Fr(`[${i}]: Number of workers=${c()}`),u(),w.id),addJob:async(w,...O)=>{if(c()===0)throw Error(`[${i}]: You need to have at least one worker before adding jobs`);return m(w,O)},terminate:async()=>{Object.keys(e).forEach(async w=>{await e[w].terminate()}),r=[]},getQueueLen:l,getNumWorkers:c}};function Ls(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Rs=i=>{const e={};return typeof WorkerGlobalScope<"u"?e.type="webworker":typeof document=="object"?e.type="browser":typeof process=="object"&&typeof Ls=="function"&&(e.type="node"),typeof i>"u"?e:e[i]};const Ns=Rs("type")==="browser",Bs=Ns?i=>new URL(i,window.location.href).href:i=>i;var Ks=i=>{const e={...i};return["corePath","workerPath","langPath"].forEach(n=>{i[n]&&(e[n]=Bs(e[n]))}),e},el={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3};const Fs="tesseract.js",js="6.0.0",Vs="Pure Javascript Multilingual OCR",xs="src/index.js",zs="src/index.d.ts",Hs="dist/tesseract.min.js",Us="dist/tesseract.min.js",qs={start:"node scripts/server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js && rollup -c scripts/rollup.esm.mjs","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json",prepublishOnly:"npm run build",wait:"rimraf dist && wait-on http://localhost:3000/dist/tesseract.min.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:* test:node:all","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser-tpl":"mocha-headless-chrome -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:detect":"npm run test:browser-tpl -- -f ./tests/detect.test.html","test:browser:recognize":"npm run test:browser-tpl -- -f ./tests/recognize.test.html","test:browser:scheduler":"npm run test:browser-tpl -- -f ./tests/scheduler.test.html","test:browser:FS":"npm run test:browser-tpl -- -f ./tests/FS.test.html",lint:"eslint src","lint:fix":"eslint --fix src",postinstall:"opencollective-postinstall || true"},Ws={"./src/worker/node/index.js":"./src/worker/browser/index.js"},Gs="",Ys=["jeromewu"],Zs="Apache-2.0",Js={"@babel/core":"^7.21.4","@babel/eslint-parser":"^7.21.3","@babel/preset-env":"^7.21.4","@rollup/plugin-commonjs":"^24.1.0",acorn:"^8.8.2","babel-loader":"^9.1.2",buffer:"^6.0.3",cors:"^2.8.5",eslint:"^7.32.0","eslint-config-airbnb-base":"^14.2.1","eslint-plugin-import":"^2.27.5","expect.js":"^0.3.1",express:"^4.18.2",mocha:"^10.2.0","mocha-headless-chrome":"^4.0.0","npm-run-all":"^4.1.5",nyc:"^15.1.0",rimraf:"^5.0.0",rollup:"^3.20.7","wait-on":"^7.0.1",webpack:"^5.79.0","webpack-bundle-analyzer":"^4.8.0","webpack-cli":"^5.0.1","webpack-dev-middleware":"^6.0.2","rollup-plugin-sourcemaps":"^0.6.3"},Qs={"bmp-js":"^0.1.0","idb-keyval":"^6.2.0","is-url":"^1.2.4","node-fetch":"^2.6.9","opencollective-postinstall":"^2.0.3","regenerator-runtime":"^0.13.3","tesseract.js-core":"^6.0.0","wasm-feature-detect":"^1.2.11",zlibjs:"^0.3.1"},Xs={"@rollup/pluginutils":"^5.0.2"},$s={type:"git",url:"https://github.com/naptha/tesseract.js.git"},eu={url:"https://github.com/naptha/tesseract.js/issues"},tu="https://github.com/naptha/tesseract.js",nu={type:"opencollective",url:"https://opencollective.com/tesseractjs"},ru={name:Fs,version:js,description:Vs,main:xs,types:zs,unpkg:Hs,jsdelivr:Us,scripts:qs,browser:Ws,author:Gs,contributors:Ys,license:Zs,devDependencies:Js,dependencies:Qs,overrides:Xs,repository:$s,bugs:eu,homepage:tu,collective:nu};var iu={workerBlobURL:!0,logger:()=>{}};const au=ru.version,ou=iu;var lu={...ou,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${au}/dist/worker.min.js`},su=({workerPath:i,workerBlobURL:e})=>{let n;if(Blob&&URL&&e){const r=new Blob([`importScripts("${i}");`],{type:"application/javascript"});n=new Worker(URL.createObjectURL(r))}else n=new Worker(i);return n},uu=i=>{i.terminate()},cu=(i,e)=>{i.onmessage=({data:n})=>{e(n)}},fu=async(i,e)=>{i.postMessage(e)};const Ii=i=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{e(r.result)},r.onerror=({target:{error:{code:l}}})=>{n(Error(`File could not be read! Code=${l}`))},r.readAsArrayBuffer(i)}),Ni=async i=>{let e=i;if(typeof i>"u")return"undefined";if(typeof i=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(i)?e=atob(i.split(",")[1]).split("").map(n=>n.charCodeAt(0)):e=await(await fetch(i)).arrayBuffer();else if(typeof HTMLElement<"u"&&i instanceof HTMLElement)i.tagName==="IMG"&&(e=await Ni(i.src)),i.tagName==="VIDEO"&&(e=await Ni(i.poster)),i.tagName==="CANVAS"&&await new Promise(n=>{i.toBlob(async r=>{e=await Ii(r),n()})});else if(typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas){const n=await i.convertToBlob();e=await Ii(n)}else(i instanceof File||i instanceof Blob)&&(e=await Ii(i));return new Uint8Array(e)};var du=Ni;const hu=lu,pu=su,mu=uu,vu=cu,gu=fu,_u=du;var yu={defaultOptions:hu,spawnWorker:pu,terminateWorker:mu,onMessage:vu,send:gu,loadImage:_u};const bu=Ks,Dn=$o,{log:so}=$n,wu=Fi,Vn=el,{defaultOptions:ku,spawnWorker:Du,terminateWorker:Eu,onMessage:Su,loadImage:uo,send:Cu}=yu;let co=0;var tl=async(i="eng",e=Vn.LSTM_ONLY,n={},r={})=>{const l=wu("Worker",co),{logger:c,errorHandler:u,...m}=bu({...ku,...n}),_={},v=typeof i=="string"?i.split("+"):i;let g=e,w=r;const O=[Vn.DEFAULT,Vn.LSTM_ONLY].includes(e)&&!m.legacyCore;let K,ee;const W=new Promise((Y,ue)=>{ee=Y,K=ue}),U=Y=>{K(Y.message)};let R=Du(m);R.onerror=U,co+=1;const T=({id:Y,action:ue,payload:C})=>new Promise((M,G)=>{so(`[${l}]: Start ${Y}, action=${ue}`);const he=`${ue}-${Y}`;_[he]={resolve:M,reject:G},Cu(R,{workerId:l,jobId:Y,action:ue,payload:C})}),q=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),k=Y=>T(Dn({id:Y,action:"load",payload:{options:{lstmOnly:O,corePath:m.corePath,logging:m.logging}}})),re=(Y,ue,C)=>T(Dn({id:C,action:"FS",payload:{method:"writeFile",args:[Y,ue]}})),ie=(Y,ue)=>T(Dn({id:ue,action:"FS",payload:{method:"readFile",args:[Y,{encoding:"utf8"}]}})),$=(Y,ue)=>T(Dn({id:ue,action:"FS",payload:{method:"unlink",args:[Y]}})),pe=(Y,ue,C)=>T(Dn({id:C,action:"FS",payload:{method:Y,args:ue}})),oe=(Y,ue)=>T(Dn({id:ue,action:"loadLanguage",payload:{langs:Y,options:{langPath:m.langPath,dataPath:m.dataPath,cachePath:m.cachePath,cacheMethod:m.cacheMethod,gzip:m.gzip,lstmOnly:[Vn.DEFAULT,Vn.LSTM_ONLY].includes(g)&&!m.legacyLang}}})),De=(Y,ue,C,M)=>T(Dn({id:M,action:"initialize",payload:{langs:Y,oem:ue,config:C}})),ge=(Y="eng",ue,C,M)=>{if(O&&[Vn.TESSERACT_ONLY,Vn.TESSERACT_LSTM_COMBINED].includes(ue))throw Error("Legacy model requested but code missing.");const G=ue||g;g=G;const he=C||w;w=he;const _e=(typeof Y=="string"?Y.split("+"):Y).filter(xe=>!v.includes(xe));return v.push(..._e),_e.length>0?oe(_e,M).then(()=>De(Y,G,he,M)):De(Y,G,he,M)},ce=(Y={},ue)=>T(Dn({id:ue,action:"setParameters",payload:{params:Y}})),ye=async(Y,ue={},C={text:!0},M)=>T(Dn({id:M,action:"recognize",payload:{image:await uo(Y),options:ue,output:C}})),se=async(Y,ue)=>{if(O)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return T(Dn({id:ue,action:"detect",payload:{image:await uo(Y)}}))},Pe=async()=>(R!==null&&(Eu(R),R=null),Promise.resolve());Su(R,({workerId:Y,jobId:ue,status:C,action:M,data:G})=>{const he=`${M}-${ue}`;if(C==="resolve")so(`[${Y}]: Complete ${ue}`),_[he].resolve({jobId:ue,data:G}),delete _[he];else if(C==="reject")if(_[he].reject(G),delete _[he],M==="load"&&K(G),u)u(G);else throw Error(G);else C==="progress"&&c({...G,userJobId:ue})});const Ce={id:l,worker:R,load:q,writeText:re,readText:ie,removeFile:$,FS:pe,reinitialize:ge,setParameters:ce,recognize:ye,detect:se,terminate:Pe};return k().then(()=>oe(i)).then(()=>De(i,e,r)).then(()=>ee(Ce)).catch(()=>{}),W};const nl=tl,Tu=async(i,e,n)=>{const r=await nl(e,1,n);return r.recognize(i).finally(async()=>{await r.terminate()})},Au=async(i,e)=>{const n=await nl("osd",0,e);return n.detect(i).finally(async()=>{await n.terminate()})};var Ou={recognize:Tu,detect:Au},Iu={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"},Pu={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"};const Mu=Ms,Lu=tl,Ru=Ou,Nu=Iu,Bu=el,Ku=Pu,{setLogging:Fu}=$n;var ju={languages:Nu,OEM:Bu,PSM:Ku,createScheduler:Mu,createWorker:Lu,setLogging:Fu,...Ru};const Bi=Yo(ju);function fo(i,e,n){const r=i.slice();return r[27]=e[n],r}function ho(i,e,n){const r=i.slice();return r[30]=e[n],r}function po(i,e,n){const r=i.slice();return r[33]=e[n],r}function mo(i,e,n){const r=i.slice();return r[36]=e[n],r}function vo(i){let e,n,r=i[0].name+"",l,c,u,m,_,v,g,w,O,K='<img id="imgChosen" class="img-fluid" alt="Your chosen receipt"/>',ee,W,U,R,T="Receipt description",q,k,re,ie,$,pe,oe,De="Receipt Date",ge,ce,ye,se,Pe,Ce,Y="Receipt value:",ue,C,M,G,he,A,_e,xe="Receipt Type",we,qe,Ve,Ee="--Please choose type--",J,de,Se,Ke="Receipt Currency",Ie,P,Ue,Le,fe="Add Receipt",We,nt,ut,At="Scanning image...",_t,St,gt,yt,Ot,Xe="Stop scan and enter manually",Ut,en,Rt,on,Nt,wt,Re,yn;function ln(me,ze){return me[8]?xu:Vu}let qt=ln(i),ke=qt(i),jt=Qe(i[1]),at=[];for(let me=0;me<jt.length;me+=1)at[me]=go(mo(i,jt,me));function fn(me){i[16](me)}let It={format:"yyyy-MM-dd",closeOnSelection:!0,id:"rDate"};i[3]!==void 0&&(It.value=i[3]),ce=new Xn({props:It}),rn.push(()=>Rn(ce,"value",fn));let be=Qe(i[2]),Ge=[];for(let me=0;me<be.length;me+=1)Ge[me]=_o(po(i,be,me));let ct=Qe(Object.values(_r)),Me=[];for(let me=0;me<ct.length;me+=1)Me[me]=yo(ho(i,ct,me));let bt=Qe(Object.keys(kt)),ft=[];for(let me=0;me<bt.length;me+=1)ft[me]=bo(fo(i,bt,me));return{c(){e=E("h1"),n=Ae('Add Receipt to "'),l=Ae(r),c=Ae('"'),u=te(),ke.c(),m=te(),_=E("div"),v=E("input"),g=te(),w=E("div"),O=E("div"),O.innerHTML=K,ee=te(),W=E("div"),U=E("div"),R=E("label"),R.textContent=T,q=te(),k=E("input"),re=te(),ie=E("datalist");for(let me=0;me<at.length;me+=1)at[me].c();$=te(),pe=E("div"),oe=E("label"),oe.textContent=De,ge=te(),Vt(ce.$$.fragment),se=te(),Pe=E("div"),Ce=E("label"),Ce.textContent=Y,ue=te(),C=E("input"),M=te(),G=E("datalist");for(let me=0;me<Ge.length;me+=1)Ge[me].c();he=te(),A=E("div"),_e=E("label"),_e.textContent=xe,we=te(),qe=E("select"),Ve=E("option"),Ve.textContent=Ee;for(let me=0;me<Me.length;me+=1)Me[me].c();J=te(),de=E("div"),Se=E("label"),Se.textContent=Ke,Ie=te(),P=E("select");for(let me=0;me<ft.length;me+=1)ft[me].c();Ue=te(),Le=E("button"),Le.textContent=fe,We=te(),nt=E("div"),ut=E("h4"),ut.textContent=At,_t=te(),St=E("div"),gt=E("div"),yt=te(),Ot=E("button"),Ot.textContent=Xe,Ut=te(),en=E("div"),Rt=E("a"),on=Ae("Cancel"),this.h()},l(me){e=S(me,"H1",{});var ze=H(e);n=Oe(ze,'Add Receipt to "'),l=Oe(ze,r),c=Oe(ze,'"'),ze.forEach(y),u=ne(me),ke.l(me),m=ne(me),_=S(me,"DIV",{class:!0});var Je=H(_);v=S(Je,"INPUT",{id:!0,type:!0,accept:!0}),Je.forEach(y),g=ne(me),w=S(me,"DIV",{id:!0});var He=H(w);O=S(He,"DIV",{class:!0,"data-svelte-h":!0}),Ye(O)!=="svelte-lr06dx"&&(O.innerHTML=K),ee=ne(He),W=S(He,"DIV",{class:!0});var pt=H(W);U=S(pt,"DIV",{class:!0});var Wt=H(U);R=S(Wt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ye(R)!=="svelte-1glg0dd"&&(R.textContent=T),q=ne(Wt),k=S(Wt,"INPUT",{class:!0,list:!0,id:!0,name:!0,placeholder:!0}),re=ne(Wt),ie=S(Wt,"DATALIST",{id:!0});var pn=H(ie);for(let st=0;st<at.length;st+=1)at[st].l(pn);pn.forEach(y),Wt.forEach(y),$=ne(pt),pe=S(pt,"DIV",{class:!0});var mn=H(pe);oe=S(mn,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ye(oe)!=="svelte-cn0bms"&&(oe.textContent=De),ge=ne(mn),xt(ce.$$.fragment,mn),mn.forEach(y),se=ne(pt),Pe=S(pt,"DIV",{class:!0});var Bt=H(Pe);Ce=S(Bt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ye(Ce)!=="svelte-1y6fy9c"&&(Ce.textContent=Y),ue=ne(Bt),C=S(Bt,"INPUT",{class:!0,list:!0,id:!0,name:!0,type:!0,step:!0,placeholder:!0}),M=ne(Bt),G=S(Bt,"DATALIST",{id:!0});var nn=H(G);for(let st=0;st<Ge.length;st+=1)Ge[st].l(nn);nn.forEach(y),Bt.forEach(y),he=ne(pt),A=S(pt,"DIV",{class:!0});var Gt=H(A);_e=S(Gt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ye(_e)!=="svelte-1vxf1l8"&&(_e.textContent=xe),we=ne(Gt),qe=S(Gt,"SELECT",{id:!0,class:!0});var Ct=H(qe);Ve=S(Ct,"OPTION",{"data-svelte-h":!0}),Ye(Ve)!=="svelte-ua8958"&&(Ve.textContent=Ee);for(let st=0;st<Me.length;st+=1)Me[st].l(Ct);Ct.forEach(y),Gt.forEach(y),J=ne(pt),de=S(pt,"DIV",{class:!0});var Un=H(de);Se=S(Un,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ye(Se)!=="svelte-15s44q2"&&(Se.textContent=Ke),Ie=ne(Un),P=S(Un,"SELECT",{id:!0,class:!0});var vn=H(P);for(let st=0;st<ft.length;st+=1)ft[st].l(vn);vn.forEach(y),Un.forEach(y),Ue=ne(pt),Le=S(pt,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Ye(Le)!=="svelte-1059pct"&&(Le.textContent=fe),pt.forEach(y),He.forEach(y),We=ne(me),nt=S(me,"DIV",{class:!0});var Cn=H(nt);ut=S(Cn,"H4",{"data-svelte-h":!0}),Ye(ut)!=="svelte-7jxjwi"&&(ut.textContent=At),_t=ne(Cn),St=S(Cn,"DIV",{class:!0});var bn=H(St);gt=S(bn,"DIV",{class:!0,style:!0,role:!0,"aria-valuenow":!0,"aria-valuemin":!0,"aria-valuemax":!0}),H(gt).forEach(y),bn.forEach(y),yt=ne(Cn),Ot=S(Cn,"BUTTON",{class:!0,"data-svelte-h":!0}),Ye(Ot)!=="svelte-1741erf"&&(Ot.textContent=Xe),Cn.forEach(y),Ut=ne(me),en=S(me,"DIV",{class:!0});var er=H(en);Rt=S(er,"A",{href:!0,class:!0});var qn=H(Rt);on=Oe(qn,"Cancel"),qn.forEach(y),er.forEach(y),this.h()},h(){h(v,"id","imageInput"),h(v,"type","file"),h(v,"accept","image/*;capture=camera"),h(_,"class","mb-3"),h(O,"class","img-scan d-flex col-md-6 col-sm-12"),h(R,"for","rDesc"),h(R,"class","form-label"),h(k,"class","form-control"),h(k,"list","descOptions"),h(k,"id","rDesc"),h(k,"name","rDesc"),h(k,"placeholder","Double-click for suggestions"),h(ie,"id","descOptions"),h(U,"class","mb-3"),h(oe,"for","rDate"),h(oe,"class","form-label"),h(pe,"class","mb-3"),h(Ce,"for","rVal"),h(Ce,"class","form-label"),h(C,"class","form-control"),h(C,"list","valOptions"),h(C,"id","rVal"),h(C,"name","rVal"),h(C,"type","number"),h(C,"step","0.01"),h(C,"placeholder","Double-click for suggestions"),h(G,"id","valOptions"),h(Pe,"class","mb-3"),h(_e,"for","rType"),h(_e,"class","form-label"),Ve.selected=!0,Ve.__value="--Please choose type--",dt(Ve,Ve.__value),h(qe,"id","rType"),h(qe,"class","form-control"),i[7]===void 0&&xn(()=>i[18].call(qe)),h(A,"class","mb-3"),h(Se,"for","rCurrency"),h(Se,"class","form-label"),h(P,"id","rCurrency"),h(P,"class","form-control"),i[4]===void 0&&xn(()=>i[19].call(P)),h(de,"class","mb-3"),h(Le,"type","button"),h(Le,"class","btn btn-primary"),h(W,"class","d-flex flex-column col-md-6 col-sm-12"),h(w,"id","receiptEntry"),Tt(w,"show",i[9]),h(gt,"class","progress-bar"),mr(gt,"width",i[10]+"%"),h(gt,"role","progressbar"),h(gt,"aria-valuenow",i[10]),h(gt,"aria-valuemin","0"),h(gt,"aria-valuemax","100"),h(St,"class","progress"),h(Ot,"class","d-block mt-3 btn btn-outline-primary"),h(nt,"class","flex-column hide"),Tt(nt,"show",!i[9]&&i[8]),h(Rt,"href",Nt="#/trip/"+i[0].id),h(Rt,"class","btn btn-outline-primary"),h(en,"class","mt-3 d-grid d-md-block")},m(me,ze){le(me,e,ze),p(e,n),p(e,l),p(e,c),le(me,u,ze),ke.m(me,ze),le(me,m,ze),le(me,_,ze),p(_,v),le(me,g,ze),le(me,w,ze),p(w,O),p(w,ee),p(w,W),p(W,U),p(U,R),p(U,q),p(U,k),dt(k,i[5]),p(U,re),p(U,ie);for(let Je=0;Je<at.length;Je+=1)at[Je]&&at[Je].m(ie,null);p(W,$),p(W,pe),p(pe,oe),p(pe,ge),zt(ce,pe,null),p(W,se),p(W,Pe),p(Pe,Ce),p(Pe,ue),p(Pe,C),dt(C,i[6]),p(Pe,M),p(Pe,G);for(let Je=0;Je<Ge.length;Je+=1)Ge[Je]&&Ge[Je].m(G,null);p(W,he),p(W,A),p(A,_e),p(A,we),p(A,qe),p(qe,Ve);for(let Je=0;Je<Me.length;Je+=1)Me[Je]&&Me[Je].m(qe,null);$t(qe,i[7],!0),p(W,J),p(W,de),p(de,Se),p(de,Ie),p(de,P);for(let Je=0;Je<ft.length;Je+=1)ft[Je]&&ft[Je].m(P,null);$t(P,i[4],!0),p(W,Ue),p(W,Le),le(me,We,ze),le(me,nt,ze),p(nt,ut),p(nt,_t),p(nt,St),p(St,gt),p(nt,yt),p(nt,Ot),le(me,Ut,ze),le(me,en,ze),p(en,Rt),p(Rt,on),wt=!0,Re||(yn=[Ze(v,"change",i[13]),Ze(k,"input",i[15]),Ze(C,"input",i[17]),Ze(qe,"change",i[18]),Ze(P,"change",i[19]),Ze(Le,"click",i[11]),Ze(Ot,"click",i[20])],Re=!0)},p(me,ze){if((!wt||ze[0]&1)&&r!==(r=me[0].name+"")&&$e(l,r),qt!==(qt=ln(me))&&(ke.d(1),ke=qt(me),ke&&(ke.c(),ke.m(m.parentNode,m))),ze[0]&32&&k.value!==me[5]&&dt(k,me[5]),ze[0]&2){jt=Qe(me[1]);let He;for(He=0;He<jt.length;He+=1){const pt=mo(me,jt,He);at[He]?at[He].p(pt,ze):(at[He]=go(pt),at[He].c(),at[He].m(ie,null))}for(;He<at.length;He+=1)at[He].d(1);at.length=jt.length}const Je={};if(!ye&&ze[0]&8&&(ye=!0,Je.value=me[3],Ln(()=>ye=!1)),ce.$set(Je),ze[0]&64&&Zr(C.value)!==me[6]&&dt(C,me[6]),ze[0]&4){be=Qe(me[2]);let He;for(He=0;He<be.length;He+=1){const pt=po(me,be,He);Ge[He]?Ge[He].p(pt,ze):(Ge[He]=_o(pt),Ge[He].c(),Ge[He].m(G,null))}for(;He<Ge.length;He+=1)Ge[He].d(1);Ge.length=be.length}if(ze&0){ct=Qe(Object.values(_r));let He;for(He=0;He<ct.length;He+=1){const pt=ho(me,ct,He);Me[He]?Me[He].p(pt,ze):(Me[He]=yo(pt),Me[He].c(),Me[He].m(qe,null))}for(;He<Me.length;He+=1)Me[He].d(1);Me.length=ct.length}if(ze[0]&128&&$t(qe,me[7]),ze&0){bt=Qe(Object.keys(kt));let He;for(He=0;He<bt.length;He+=1){const pt=fo(me,bt,He);ft[He]?ft[He].p(pt,ze):(ft[He]=bo(pt),ft[He].c(),ft[He].m(P,null))}for(;He<ft.length;He+=1)ft[He].d(1);ft.length=bt.length}ze[0]&16&&$t(P,me[4]),(!wt||ze[0]&512)&&Tt(w,"show",me[9]),(!wt||ze[0]&1024)&&mr(gt,"width",me[10]+"%"),(!wt||ze[0]&1024)&&h(gt,"aria-valuenow",me[10]),(!wt||ze[0]&768)&&Tt(nt,"show",!me[9]&&me[8]),(!wt||ze[0]&1&&Nt!==(Nt="#/trip/"+me[0].id))&&h(Rt,"href",Nt)},i(me){wt||(lt(ce.$$.fragment,me),wt=!0)},o(me){ht(ce.$$.fragment,me),wt=!1},d(me){me&&(y(e),y(u),y(m),y(_),y(g),y(w),y(We),y(nt),y(Ut),y(en)),ke.d(me),Lt(at,me),Ht(ce),Lt(Ge,me),Lt(Me,me),Lt(ft,me),Re=!1,Sn(yn)}}}function Vu(i){let e,n="Choose image to begin";return{c(){e=E("p"),e.textContent=n},l(r){e=S(r,"P",{"data-svelte-h":!0}),Ye(e)!=="svelte-1rdbglw"&&(e.textContent=n)},m(r,l){le(r,e,l)},d(r){r&&y(e)}}}function xu(i){let e,n="Click 'Browse' to start again";return{c(){e=E("p"),e.textContent=n},l(r){e=S(r,"P",{"data-svelte-h":!0}),Ye(e)!=="svelte-1raiglx"&&(e.textContent=n)},m(r,l){le(r,e,l)},d(r){r&&y(e)}}}function go(i){let e,n;return{c(){e=E("option"),this.h()},l(r){e=S(r,"OPTION",{}),H(e).forEach(y),this.h()},h(){e.__value=n=i[36],dt(e,e.__value)},m(r,l){le(r,e,l)},p(r,l){l[0]&2&&n!==(n=r[36])&&(e.__value=n,dt(e,e.__value))},d(r){r&&y(e)}}}function _o(i){let e,n=i[33]+"",r,l;return{c(){e=E("option"),r=Ae(n),this.h()},l(c){e=S(c,"OPTION",{});var u=H(e);r=Oe(u,n),u.forEach(y),this.h()},h(){e.__value=l=i[33],dt(e,e.__value)},m(c,u){le(c,e,u),p(e,r)},p(c,u){u[0]&4&&n!==(n=c[33]+"")&&$e(r,n),u[0]&4&&l!==(l=c[33])&&(e.__value=l,dt(e,e.__value))},d(c){c&&y(e)}}}function yo(i){let e,n=i[30]+"",r;return{c(){e=E("option"),r=Ae(n),this.h()},l(l){e=S(l,"OPTION",{});var c=H(e);r=Oe(c,n),c.forEach(y),this.h()},h(){e.__value=i[30],dt(e,e.__value)},m(l,c){le(l,e,c),p(e,r)},p:Et,d(l){l&&y(e)}}}function bo(i){let e,n=i[27]+"",r,l,c=kt[i[27]].symbol+"",u,m;return{c(){e=E("option"),r=Ae(n),l=Ae(" ("),u=Ae(c),m=Ae(`)
                `),this.h()},l(_){e=S(_,"OPTION",{});var v=H(e);r=Oe(v,n),l=Oe(v," ("),u=Oe(v,c),m=Oe(v,`)
                `),v.forEach(y),this.h()},h(){e.__value=i[27],dt(e,e.__value)},m(_,v){le(_,e,v),p(e,r),p(e,l),p(e,u),p(e,m)},p:Et,d(_){_&&y(e)}}}function zu(i){let e,n,r=i[0]&&vo(i);return{c(){e=E("div"),r&&r.c(),this.h()},l(l){e=S(l,"DIV",{class:!0});var c=H(e);r&&r.l(c),c.forEach(y),this.h()},h(){h(e,"class","w-100")},m(l,c){le(l,e,c),r&&r.m(e,null),n=!0},p(l,c){l[0]?r?(r.p(l,c),c[0]&1&&lt(r,1)):(r=vo(l),r.c(),lt(r,1),r.m(e,null)):r&&(zn(),ht(r,1,1,()=>{r=null}),Hn())},i(l){n||(lt(r),n=!0)},o(l){ht(r),n=!1},d(l){l&&y(e),r&&r.d()}}}function Hu(i){return/,\d{2}$/.test(i)}function Uu(i,e){const n=document.createElement("canvas"),r=n.getContext("2d");return n.width=i.width,n.height=i.height,r.drawImage(i,0,0,i.width,i.height),n.toDataURL("image/jpeg",e)}function qu(i,e,n){const{createWorker:r}=Bi;let{tripId:l}=e,c,u=[],m=[],_=new Date,v,g,w,O,K,ee,W,U=!1,R=0,T;l>-1&&Mt.trips.get(l).then(se=>{n(0,c=se),n(4,v=c.defaultCurrency)});async function q(){let se=document.getElementById("imgChosen");W=se.naturalWidth,ee=se.naturalHeight,n(8,K=Uu(se,.5)),await Mt.receipts.add({description:g,currency:v,receiptDate:_,receiptDateString:_.toDateString(),receiptType:O,total:w,tripId:l,imageData:K,imageHeight:ee,imageWidth:W}),window.location.href="#/trip/"+l}function k(se){se.status=="recognizing text"&&n(10,R=Math.floor(se.progress*100))}async function re(se){T=await r("eng",1,{logger:Ce=>k(Ce)}),await T.setParameters({tessedit_pageseg_mode:Bi.PSM.SPARSE_TEXT});var Pe=await T.recognize(se,{},{blocks:!0});return Pe.data.blocks?Pe.data.blocks:[]}async function ie(se){n(10,R=0),!U&&T&&await T.terminate(),se&&n(9,U=!0)}async function $(se){n(1,u=[]),n(2,m=[]),n(9,U=!1),await ie(!1);var Pe=se.target.files[0];n(8,K=Pe);var Ce=URL.createObjectURL(Pe);const Y=document.getElementById("imgChosen");Y.src=Ce;var ue=await re(Ce);for(let C of ue){if(C.confidence<40)continue;let M=C.text.trim();u.push(M),console.log(`"${M}"`);let G=_n(M,{decimal:Hu(M)?",":"."});G.value>0&&m.push(G.format({symbol:"",separator:"",decimal:"."}))}n(1,u),n(2,m=m.reverse()),n(9,U=!0)}Ol(()=>{ie(!1)});function pe(){g=this.value,n(5,g)}function oe(se){_=se,n(3,_)}function De(){w=Zr(this.value),n(6,w)}function ge(){O=Qn(this),n(7,O)}function ce(){v=Qn(this),n(4,v)}const ye=()=>ie(!0);return i.$$set=se=>{"tripId"in se&&n(14,l=se.tripId)},[c,u,m,_,v,g,w,O,K,U,R,q,ie,$,l,pe,oe,De,ge,ce,ye]}class Wu extends un{constructor(e){super(),cn(this,e,qu,zu,an,{tripId:14},null,[-1,-1])}}function wo(i,e,n){const r=i.slice();return r[21]=e[n],r}function ko(i,e,n){const r=i.slice();return r[24]=e[n],r}function Do(i,e,n){const r=i.slice();return r[27]=e[n],r}function Eo(i,e,n){const r=i.slice();return r[30]=e[n],r}function So(i){let e,n,r=i[0].description+"",l,c,u,m,_,v,g,w,O,K,ee,W,U,R,T,q="Receipt description",k,re,ie,$,pe,oe,De,ge="Receipt Date",ce,ye,se,Pe,Ce,Y,ue="Receipt value:",C,M,G,he,A,_e,xe,we="Receipt Type",qe,Ve,Ee,J="--Please choose type--",de,Se,Ke,Ie="Receipt Currency",P,Ue,Le,fe,We,nt="Update Receipt",ut,At,_t,St,gt,yt,Ot="<h4>Scanning image...</h4> <progress>Scanning image...</progress>",Xe,Ut,en;function Rt(be,Ge){return be[8]?Yu:Gu}let on=Rt(i),Nt=on(i),wt=Qe(i[1]),Re=[];for(let be=0;be<wt.length;be+=1)Re[be]=Co(Eo(i,wt,be));function yn(be){i[14](be)}let ln={format:"yyyy-MM-dd",closeOnSelection:!0,id:"rDate"};i[3]!==void 0&&(ln.value=i[3]),ye=new Xn({props:ln}),rn.push(()=>Rn(ye,"value",yn));let qt=Qe(i[2]),ke=[];for(let be=0;be<qt.length;be+=1)ke[be]=To(Do(i,qt,be));let jt=Qe(Object.values(_r)),at=[];for(let be=0;be<jt.length;be+=1)at[be]=Ao(ko(i,jt,be));let fn=Qe(Object.keys(kt)),It=[];for(let be=0;be<fn.length;be+=1)It[be]=Oo(wo(i,fn,be));return{c(){e=E("h1"),n=Ae('Update Receipt for "'),l=Ae(r),c=Ae('"'),u=te(),Nt.c(),m=te(),_=E("div"),v=E("input"),g=te(),w=E("div"),O=E("div"),K=E("img"),W=te(),U=E("div"),R=E("div"),T=E("label"),T.textContent=q,k=te(),re=E("input"),ie=te(),$=E("datalist");for(let be=0;be<Re.length;be+=1)Re[be].c();pe=te(),oe=E("div"),De=E("label"),De.textContent=ge,ce=te(),Vt(ye.$$.fragment),Pe=te(),Ce=E("div"),Y=E("label"),Y.textContent=ue,C=te(),M=E("input"),G=te(),he=E("datalist");for(let be=0;be<ke.length;be+=1)ke[be].c();A=te(),_e=E("div"),xe=E("label"),xe.textContent=we,qe=te(),Ve=E("select"),Ee=E("option"),Ee.textContent=J;for(let be=0;be<at.length;be+=1)at[be].c();de=te(),Se=E("div"),Ke=E("label"),Ke.textContent=Ie,P=te(),Ue=E("select");for(let be=0;be<It.length;be+=1)It[be].c();Le=te(),fe=E("div"),We=E("button"),We.textContent=nt,ut=te(),At=E("a"),_t=Ae("Cancel"),gt=te(),yt=E("div"),yt.innerHTML=Ot,this.h()},l(be){e=S(be,"H1",{});var Ge=H(e);n=Oe(Ge,'Update Receipt for "'),l=Oe(Ge,r),c=Oe(Ge,'"'),Ge.forEach(y),u=ne(be),Nt.l(be),m=ne(be),_=S(be,"DIV",{class:!0});var ct=H(_);v=S(ct,"INPUT",{id:!0,type:!0,accept:!0}),ct.forEach(y),g=ne(be),w=S(be,"DIV",{id:!0});var Me=H(w);O=S(Me,"DIV",{class:!0});var bt=H(O);K=S(bt,"IMG",{id:!0,class:!0,src:!0,alt:!0}),bt.forEach(y),W=ne(Me),U=S(Me,"DIV",{class:!0});var ft=H(U);R=S(ft,"DIV",{class:!0});var me=H(R);T=S(me,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ye(T)!=="svelte-1glg0dd"&&(T.textContent=q),k=ne(me),re=S(me,"INPUT",{class:!0,list:!0,id:!0,name:!0,placeholder:!0}),ie=ne(me),$=S(me,"DATALIST",{id:!0});var ze=H($);for(let Ct=0;Ct<Re.length;Ct+=1)Re[Ct].l(ze);ze.forEach(y),me.forEach(y),pe=ne(ft),oe=S(ft,"DIV",{class:!0});var Je=H(oe);De=S(Je,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ye(De)!=="svelte-cn0bms"&&(De.textContent=ge),ce=ne(Je),xt(ye.$$.fragment,Je),Je.forEach(y),Pe=ne(ft),Ce=S(ft,"DIV",{class:!0});var He=H(Ce);Y=S(He,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ye(Y)!=="svelte-1y6fy9c"&&(Y.textContent=ue),C=ne(He),M=S(He,"INPUT",{class:!0,list:!0,id:!0,name:!0,type:!0,step:!0,placeholder:!0}),G=ne(He),he=S(He,"DATALIST",{id:!0});var pt=H(he);for(let Ct=0;Ct<ke.length;Ct+=1)ke[Ct].l(pt);pt.forEach(y),He.forEach(y),A=ne(ft),_e=S(ft,"DIV",{class:!0});var Wt=H(_e);xe=S(Wt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ye(xe)!=="svelte-1vxf1l8"&&(xe.textContent=we),qe=ne(Wt),Ve=S(Wt,"SELECT",{id:!0,class:!0});var pn=H(Ve);Ee=S(pn,"OPTION",{"data-svelte-h":!0}),Ye(Ee)!=="svelte-10m9j2x"&&(Ee.textContent=J);for(let Ct=0;Ct<at.length;Ct+=1)at[Ct].l(pn);pn.forEach(y),Wt.forEach(y),de=ne(ft),Se=S(ft,"DIV",{class:!0});var mn=H(Se);Ke=S(mn,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ye(Ke)!=="svelte-15s44q2"&&(Ke.textContent=Ie),P=ne(mn),Ue=S(mn,"SELECT",{id:!0,class:!0});var Bt=H(Ue);for(let Ct=0;Ct<It.length;Ct+=1)It[Ct].l(Bt);Bt.forEach(y),mn.forEach(y),Le=ne(ft),fe=S(ft,"DIV",{class:!0});var nn=H(fe);We=S(nn,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Ye(We)!=="svelte-jbq1gp"&&(We.textContent=nt),ut=ne(nn),At=S(nn,"A",{href:!0,class:!0});var Gt=H(At);_t=Oe(Gt,"Cancel"),Gt.forEach(y),nn.forEach(y),ft.forEach(y),Me.forEach(y),gt=ne(be),yt=S(be,"DIV",{class:!0,"data-svelte-h":!0}),Ye(yt)!=="svelte-z0xj81"&&(yt.innerHTML=Ot),this.h()},h(){h(v,"id","imageInput"),h(v,"type","file"),h(v,"accept","image/*;capture=camera"),h(_,"class","mb-3"),h(K,"id","imgChosen"),h(K,"class","img-fluid"),Hr(K.src,ee=i[8])||h(K,"src",ee),h(K,"alt","Your chosen receipt"),h(O,"class","img-scan d-flex col-md-6 col-sm-12"),h(T,"for","rDesc"),h(T,"class","form-label"),h(re,"class","form-control"),h(re,"list","descOptions"),h(re,"id","rDesc"),h(re,"name","rDesc"),h(re,"placeholder","Double-click for suggestions"),h($,"id","descOptions"),h(R,"class","mb-3"),h(De,"for","rDate"),h(De,"class","form-label"),h(oe,"class","mb-3"),h(Y,"for","rVal"),h(Y,"class","form-label"),h(M,"class","form-control"),h(M,"list","valOptions"),h(M,"id","rVal"),h(M,"name","rVal"),h(M,"type","number"),h(M,"step","0.01"),h(M,"placeholder","Double-click for suggestions"),h(he,"id","valOptions"),h(Ce,"class","mb-3"),h(xe,"for","rType"),h(xe,"class","form-label"),Ee.__value="--Please choose type--",dt(Ee,Ee.__value),h(Ve,"id","rType"),h(Ve,"class","form-control"),i[7]===void 0&&xn(()=>i[16].call(Ve)),h(_e,"class","mb-3"),h(Ke,"for","rCurrency"),h(Ke,"class","form-label"),h(Ue,"id","rCurrency"),h(Ue,"class","form-control"),i[4]===void 0&&xn(()=>i[17].call(Ue)),h(Se,"class","mb-3"),h(We,"type","button"),h(We,"class","btn btn-primary"),h(At,"href",St="#/trip/"+i[0].tripId),h(At,"class","btn btn-outline-primary"),h(fe,"class","gap-3 d-grid d-md-block"),h(U,"class","d-flex flex-column col-md-6 col-sm-12"),h(w,"id","receiptEntry"),Tt(w,"show",i[9]),h(yt,"class","flex-column hide"),Tt(yt,"show",!i[9]&&i[8])},m(be,Ge){le(be,e,Ge),p(e,n),p(e,l),p(e,c),le(be,u,Ge),Nt.m(be,Ge),le(be,m,Ge),le(be,_,Ge),p(_,v),le(be,g,Ge),le(be,w,Ge),p(w,O),p(O,K),p(w,W),p(w,U),p(U,R),p(R,T),p(R,k),p(R,re),dt(re,i[5]),p(R,ie),p(R,$);for(let ct=0;ct<Re.length;ct+=1)Re[ct]&&Re[ct].m($,null);p(U,pe),p(U,oe),p(oe,De),p(oe,ce),zt(ye,oe,null),p(U,Pe),p(U,Ce),p(Ce,Y),p(Ce,C),p(Ce,M),dt(M,i[6]),p(Ce,G),p(Ce,he);for(let ct=0;ct<ke.length;ct+=1)ke[ct]&&ke[ct].m(he,null);p(U,A),p(U,_e),p(_e,xe),p(_e,qe),p(_e,Ve),p(Ve,Ee);for(let ct=0;ct<at.length;ct+=1)at[ct]&&at[ct].m(Ve,null);$t(Ve,i[7],!0),p(U,de),p(U,Se),p(Se,Ke),p(Se,P),p(Se,Ue);for(let ct=0;ct<It.length;ct+=1)It[ct]&&It[ct].m(Ue,null);$t(Ue,i[4],!0),p(U,Le),p(U,fe),p(fe,We),p(fe,ut),p(fe,At),p(At,_t),le(be,gt,Ge),le(be,yt,Ge),Xe=!0,Ut||(en=[Ze(v,"change",i[11]),Ze(re,"input",i[13]),Ze(M,"input",i[15]),Ze(Ve,"change",i[16]),Ze(Ue,"change",i[17]),Ze(We,"click",i[10])],Ut=!0)},p(be,Ge){if((!Xe||Ge[0]&1)&&r!==(r=be[0].description+"")&&$e(l,r),on!==(on=Rt(be))&&(Nt.d(1),Nt=on(be),Nt&&(Nt.c(),Nt.m(m.parentNode,m))),(!Xe||Ge[0]&256&&!Hr(K.src,ee=be[8]))&&h(K,"src",ee),Ge[0]&32&&re.value!==be[5]&&dt(re,be[5]),Ge[0]&2){wt=Qe(be[1]);let Me;for(Me=0;Me<wt.length;Me+=1){const bt=Eo(be,wt,Me);Re[Me]?Re[Me].p(bt,Ge):(Re[Me]=Co(bt),Re[Me].c(),Re[Me].m($,null))}for(;Me<Re.length;Me+=1)Re[Me].d(1);Re.length=wt.length}const ct={};if(!se&&Ge[0]&8&&(se=!0,ct.value=be[3],Ln(()=>se=!1)),ye.$set(ct),Ge[0]&64&&Zr(M.value)!==be[6]&&dt(M,be[6]),Ge[0]&4){qt=Qe(be[2]);let Me;for(Me=0;Me<qt.length;Me+=1){const bt=Do(be,qt,Me);ke[Me]?ke[Me].p(bt,Ge):(ke[Me]=To(bt),ke[Me].c(),ke[Me].m(he,null))}for(;Me<ke.length;Me+=1)ke[Me].d(1);ke.length=qt.length}if(Ge&0){jt=Qe(Object.values(_r));let Me;for(Me=0;Me<jt.length;Me+=1){const bt=ko(be,jt,Me);at[Me]?at[Me].p(bt,Ge):(at[Me]=Ao(bt),at[Me].c(),at[Me].m(Ve,null))}for(;Me<at.length;Me+=1)at[Me].d(1);at.length=jt.length}if(Ge[0]&128&&$t(Ve,be[7]),Ge&0){fn=Qe(Object.keys(kt));let Me;for(Me=0;Me<fn.length;Me+=1){const bt=wo(be,fn,Me);It[Me]?It[Me].p(bt,Ge):(It[Me]=Oo(bt),It[Me].c(),It[Me].m(Ue,null))}for(;Me<It.length;Me+=1)It[Me].d(1);It.length=fn.length}Ge[0]&16&&$t(Ue,be[4]),(!Xe||Ge[0]&1&&St!==(St="#/trip/"+be[0].tripId))&&h(At,"href",St),(!Xe||Ge[0]&512)&&Tt(w,"show",be[9]),(!Xe||Ge[0]&768)&&Tt(yt,"show",!be[9]&&be[8])},i(be){Xe||(lt(ye.$$.fragment,be),Xe=!0)},o(be){ht(ye.$$.fragment,be),Xe=!1},d(be){be&&(y(e),y(u),y(m),y(_),y(g),y(w),y(gt),y(yt)),Nt.d(be),Lt(Re,be),Ht(ye),Lt(ke,be),Lt(at,be),Lt(It,be),Ut=!1,Sn(en)}}}function Gu(i){let e,n="Choose image to begin";return{c(){e=E("p"),e.textContent=n},l(r){e=S(r,"P",{"data-svelte-h":!0}),Ye(e)!=="svelte-1rdbglw"&&(e.textContent=n)},m(r,l){le(r,e,l)},d(r){r&&y(e)}}}function Yu(i){let e,n="'Choose file' to start again";return{c(){e=E("p"),e.textContent=n},l(r){e=S(r,"P",{"data-svelte-h":!0}),Ye(e)!=="svelte-ffknqs"&&(e.textContent=n)},m(r,l){le(r,e,l)},d(r){r&&y(e)}}}function Co(i){let e,n;return{c(){e=E("option"),this.h()},l(r){e=S(r,"OPTION",{}),H(e).forEach(y),this.h()},h(){e.__value=n=i[30],dt(e,e.__value)},m(r,l){le(r,e,l)},p(r,l){l[0]&2&&n!==(n=r[30])&&(e.__value=n,dt(e,e.__value))},d(r){r&&y(e)}}}function To(i){let e,n=i[27]+"",r,l;return{c(){e=E("option"),r=Ae(n),this.h()},l(c){e=S(c,"OPTION",{});var u=H(e);r=Oe(u,n),u.forEach(y),this.h()},h(){e.__value=l=i[27],dt(e,e.__value)},m(c,u){le(c,e,u),p(e,r)},p(c,u){u[0]&4&&n!==(n=c[27]+"")&&$e(r,n),u[0]&4&&l!==(l=c[27])&&(e.__value=l,dt(e,e.__value))},d(c){c&&y(e)}}}function Ao(i){let e,n=i[24]+"",r;return{c(){e=E("option"),r=Ae(n),this.h()},l(l){e=S(l,"OPTION",{});var c=H(e);r=Oe(c,n),c.forEach(y),this.h()},h(){e.__value=i[24],dt(e,e.__value)},m(l,c){le(l,e,c),p(e,r)},p:Et,d(l){l&&y(e)}}}function Oo(i){let e,n=i[21]+"",r,l,c=kt[i[21]].symbol+"",u,m;return{c(){e=E("option"),r=Ae(n),l=Ae(" ("),u=Ae(c),m=Ae(`)
                `),this.h()},l(_){e=S(_,"OPTION",{});var v=H(e);r=Oe(v,n),l=Oe(v," ("),u=Oe(v,c),m=Oe(v,`)
                `),v.forEach(y),this.h()},h(){e.__value=i[21],dt(e,e.__value)},m(_,v){le(_,e,v),p(e,r),p(e,l),p(e,u),p(e,m)},p:Et,d(_){_&&y(e)}}}function Zu(i){let e,n,r=i[0]&&So(i);return{c(){e=E("div"),r&&r.c(),this.h()},l(l){e=S(l,"DIV",{class:!0});var c=H(e);r&&r.l(c),c.forEach(y),this.h()},h(){h(e,"class","w-100")},m(l,c){le(l,e,c),r&&r.m(e,null),n=!0},p(l,c){l[0]?r?(r.p(l,c),c[0]&1&&lt(r,1)):(r=So(l),r.c(),lt(r,1),r.m(e,null)):r&&(zn(),ht(r,1,1,()=>{r=null}),Hn())},i(l){n||(lt(r),n=!0)},o(l){ht(r),n=!1},d(l){l&&y(e),r&&r.d()}}}function Ju(i,e,n){let{receiptId:r}=e,l,c=[],u=[],m=new Date,_,v,g,w,O,K,ee,W=!1;r>-1&&Mt.receipts.get(r).then(pe=>{n(0,l=pe),n(3,m=new Date(l.receiptDateString)),n(4,_=l.currency),n(5,v=l.description),n(6,g=l.total),n(7,w=l.receiptType),n(8,O=l.imageData),n(9,W=!0)});async function U(){let pe=document.getElementById("imgChosen");ee=pe.naturalWidth,K=pe.naturalHeight,await Mt.receipts.update(l.id,{description:v,currency:_,receiptDate:m,receiptDateString:m.toDateString(),receiptType:w,total:g,tripId:l.tripId,imageData:O,imageHeight:K,imageWidth:ee}),window.location.href="#/trip/"+l.tripId}async function R(pe){var oe=await Bi.recognize(pe,"eng");return oe.data.lines}async function T(pe){n(1,c=[]),n(2,u=[]),n(9,W=!1);var oe=pe.target.files[0];n(8,O=oe);var De=URL.createObjectURL(oe),ge=await R(De);for(let ce of ge){if(ce.confidence<40)continue;c.push(ce.text);let ye=_n(ce.text);ye.value>0&&u.push(ye.format({symbol:"",separator:""}))}n(1,c),n(2,u=u.reverse()),n(9,W=!0)}function q(){v=this.value,n(5,v)}function k(pe){m=pe,n(3,m)}function re(){g=Zr(this.value),n(6,g)}function ie(){w=Qn(this),n(7,w)}function $(){_=Qn(this),n(4,_)}return i.$$set=pe=>{"receiptId"in pe&&n(12,r=pe.receiptId)},[l,c,u,m,_,v,g,w,O,W,U,T,r,q,k,re,ie,$]}class Qu extends un{constructor(e){super(),cn(this,e,Ju,Zu,an,{receiptId:12},null,[-1,-1])}}function Io(i){let e,n="Your most recent trip:",r,l,c,u,m,_,v=i[0].name+"",g,w,O,K=i[0].startDateString+"",ee,W,U=i[0].endDateString+"",R,T;return{c(){e=E("h4"),e.textContent=n,r=te(),l=E("div"),c=E("div"),u=E("a"),m=E("div"),_=E("strong"),g=Ae(v),w=te(),O=E("div"),ee=Ae(K),W=Ae(" - "),R=Ae(U),this.h()},l(q){e=S(q,"H4",{"data-svelte-h":!0}),Ye(e)!=="svelte-1dpo13w"&&(e.textContent=n),r=ne(q),l=S(q,"DIV",{class:!0});var k=H(l);c=S(k,"DIV",{class:!0});var re=H(c);u=S(re,"A",{href:!0,class:!0});var ie=H(u);m=S(ie,"DIV",{class:!0});var $=H(m);_=S($,"STRONG",{class:!0});var pe=H(_);g=Oe(pe,v),pe.forEach(y),w=ne($),O=S($,"DIV",{class:!0});var oe=H(O);ee=Oe(oe,K),W=Oe(oe," - "),R=Oe(oe,U),oe.forEach(y),$.forEach(y),ie.forEach(y),re.forEach(y),k.forEach(y),this.h()},h(){h(_,"class","mb-1"),h(O,"class","col-10 mb-1 text-center"),h(m,"class","d-flex w-100 align-items-center justify-content-between flex-column"),h(u,"href",T="#/trip/"+i[0].id),h(u,"class","py-3 lh-sm m-2 welcomeTrip"),h(c,"class","col-lg-6 col-md-8 col-sm-12"),h(l,"class","row")},m(q,k){le(q,e,k),le(q,r,k),le(q,l,k),p(l,c),p(c,u),p(u,m),p(m,_),p(_,g),p(m,w),p(m,O),p(O,ee),p(O,W),p(O,R)},p(q,k){k&1&&v!==(v=q[0].name+"")&&$e(g,v),k&1&&K!==(K=q[0].startDateString+"")&&$e(ee,K),k&1&&U!==(U=q[0].endDateString+"")&&$e(R,U),k&1&&T!==(T="#/trip/"+q[0].id)&&h(u,"href",T)},d(q){q&&(y(e),y(r),y(l))}}}function Xu(i){let e,n,r="Welcome!",l,c,u="Create a trip using the button at the top",m,_,v="Or add receipts by selecting a trip",g,w=i[0]&&Io(i);return{c(){e=E("div"),n=E("h1"),n.textContent=r,l=te(),c=E("p"),c.textContent=u,m=te(),_=E("p"),_.textContent=v,g=te(),w&&w.c(),this.h()},l(O){e=S(O,"DIV",{class:!0});var K=H(e);n=S(K,"H1",{"data-svelte-h":!0}),Ye(n)!=="svelte-w9d2nb"&&(n.textContent=r),l=ne(K),c=S(K,"P",{"data-svelte-h":!0}),Ye(c)!=="svelte-xbo4ew"&&(c.textContent=u),m=ne(K),_=S(K,"P",{"data-svelte-h":!0}),Ye(_)!=="svelte-1g1vmu2"&&(_.textContent=v),g=ne(K),w&&w.l(K),K.forEach(y),this.h()},h(){h(e,"class","col-sm-12")},m(O,K){le(O,e,K),p(e,n),p(e,l),p(e,c),p(e,m),p(e,_),p(e,g),w&&w.m(e,null)},p(O,[K]){O[0]?w?w.p(O,K):(w=Io(O),w.c(),w.m(e,null)):w&&(w.d(1),w=null)},i:Et,o:Et,d(O){O&&y(e),w&&w.d()}}}function $u(i,e,n){let r,l=gr(()=>Mt.trips.orderBy("endDate").reverse().first());return Jn(i,l,c=>n(0,r=c)),[r,l]}class ec extends un{constructor(e){super(),cn(this,e,$u,Xu,an,{})}}function Po(i,e,n){const r=i.slice();return r[6]=e[n],r}function Mo(i,e,n){const r=i.slice();return r[9]=e[n],r}function Lo(i,e,n){const r=i.slice();return r[6]=e[n],r}function Pi(i){const e=i.slice(),n=Array.from(new Set(e[2].map(r=>r.currency)));return e[5]=n,e}function Ro(i){let e,n='<p>After clicking &#39;Export/Print&#39;, you should be able to print/save to PDF</p> <button class="btn btn-primary" onclick="window.print()">Export/Print</button>',r,l,c=i[0].name+"",u,m,_,v=i[0].startDateString+"",g,w,O=i[0].endDateString+"",K,ee,W,U="Receipt Summary",R,T,q=i[2]&&No(Pi(i));return{c(){e=E("div"),e.innerHTML=n,r=te(),l=E("h1"),u=Ae(c),m=te(),_=E("h4"),g=Ae(v),w=Ae(" - "),K=Ae(O),ee=te(),W=E("h5"),W.textContent=U,R=te(),q&&q.c(),T=Ft(),this.h()},l(k){e=S(k,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),Ye(e)!=="svelte-1xvffp3"&&(e.innerHTML=n),r=ne(k),l=S(k,"H1",{});var re=H(l);u=Oe(re,c),re.forEach(y),m=ne(k),_=S(k,"H4",{});var ie=H(_);g=Oe(ie,v),w=Oe(ie," - "),K=Oe(ie,O),ie.forEach(y),ee=ne(k),W=S(k,"H5",{"data-svelte-h":!0}),Ye(W)!=="svelte-1hbjnf6"&&(W.textContent=U),R=ne(k),q&&q.l(k),T=Ft(),this.h()},h(){h(e,"class","no-print mt-3 hide"),h(e,"id","printMessage")},m(k,re){le(k,e,re),le(k,r,re),le(k,l,re),p(l,u),le(k,m,re),le(k,_,re),p(_,g),p(_,w),p(_,K),le(k,ee,re),le(k,W,re),le(k,R,re),q&&q.m(k,re),le(k,T,re)},p(k,re){re&1&&c!==(c=k[0].name+"")&&$e(u,c),re&1&&v!==(v=k[0].startDateString+"")&&$e(g,v),re&1&&O!==(O=k[0].endDateString+"")&&$e(K,O),k[2]?q?q.p(Pi(k),re):(q=No(Pi(k)),q.c(),q.m(T.parentNode,T)):q&&(q.d(1),q=null)},d(k){k&&(y(e),y(r),y(l),y(m),y(_),y(ee),y(W),y(R),y(T)),q&&q.d(k)}}}function No(i){let e,n,r="<tr><th>Receipt Description</th> <th>Receipt Date</th> <th>Receipt Type</th> <th>Receipt Total</th></tr>",l,c,u=[],m=new Map,_,v,g,w,O,K,ee,W,U="<strong>Total</strong>",R,T,q,k,re,ie=[],$=new Map,pe,oe,De=`// Wait for images to render before printing
        var imgs = document.images,
        len = imgs.length,
        counter = 0;

        [].forEach.call( imgs, function( img ) {
            if(img.complete)
              incrementCounter();
            else
              img.addEventListener( 'load', incrementCounter, false );
        } );

        function printDiaglog() {
          window.print()
        }
        function incrementCounter() {
            counter++;
            if ( counter === len ) {
              document.getElementById("printMessage").classList.remove("hide");
            }
        }`,ge=Qe(i[2]);const ce=Y=>Y[6].id;for(let Y=0;Y<ge.length;Y+=1){let ue=Lo(i,ge,Y),C=ce(ue);m.set(C,u[Y]=Bo(C,ue))}let ye=Qe(i[5]),se=[];for(let Y=0;Y<ye.length;Y+=1)se[Y]=Ko(Mo(i,ye,Y));let Pe=Qe(i[2]);const Ce=Y=>Y[6].id;for(let Y=0;Y<Pe.length;Y+=1){let ue=Po(i,Pe,Y),C=Ce(ue);$.set(C,ie[Y]=Fo(C,ue))}return{c(){e=E("table"),n=E("thead"),n.innerHTML=r,l=te(),c=E("tbody");for(let Y=0;Y<u.length;Y+=1)u[Y].c();_=te(),v=E("tfoot"),g=E("tr"),w=E("td"),O=te(),K=E("td"),ee=te(),W=E("td"),W.innerHTML=U,R=te(),T=E("td");for(let Y=0;Y<se.length;Y+=1)se[Y].c();q=te(),k=E("td"),re=te();for(let Y=0;Y<ie.length;Y+=1)ie[Y].c();pe=te(),oe=E("script"),oe.textContent=De,this.h()},l(Y){e=S(Y,"TABLE",{class:!0});var ue=H(e);n=S(ue,"THEAD",{"data-svelte-h":!0}),Ye(n)!=="svelte-1yqevk1"&&(n.innerHTML=r),l=ne(ue),c=S(ue,"TBODY",{});var C=H(c);for(let A=0;A<u.length;A+=1)u[A].l(C);C.forEach(y),_=ne(ue),v=S(ue,"TFOOT",{class:!0});var M=H(v);g=S(M,"TR",{});var G=H(g);w=S(G,"TD",{}),H(w).forEach(y),O=ne(G),K=S(G,"TD",{}),H(K).forEach(y),ee=ne(G),W=S(G,"TD",{class:!0,"data-svelte-h":!0}),Ye(W)!=="svelte-14afisz"&&(W.innerHTML=U),R=ne(G),T=S(G,"TD",{});var he=H(T);for(let A=0;A<se.length;A+=1)se[A].l(he);he.forEach(y),q=ne(G),k=S(G,"TD",{}),H(k).forEach(y),G.forEach(y),M.forEach(y),ue.forEach(y),re=ne(Y);for(let A=0;A<ie.length;A+=1)ie[A].l(Y);pe=ne(Y),oe=S(Y,"SCRIPT",{"data-svelte-h":!0}),Ye(oe)!=="svelte-wsa5ae"&&(oe.textContent=De),this.h()},h(){h(W,"class","text-end"),h(v,"class","table-group-divider"),h(e,"class","table table-striped table-hover")},m(Y,ue){le(Y,e,ue),p(e,n),p(e,l),p(e,c);for(let C=0;C<u.length;C+=1)u[C]&&u[C].m(c,null);p(e,_),p(e,v),p(v,g),p(g,w),p(g,O),p(g,K),p(g,ee),p(g,W),p(g,R),p(g,T);for(let C=0;C<se.length;C+=1)se[C]&&se[C].m(T,null);p(g,q),p(g,k),le(Y,re,ue);for(let C=0;C<ie.length;C+=1)ie[C]&&ie[C].m(Y,ue);le(Y,pe,ue),le(Y,oe,ue)},p(Y,ue){if(ue&4&&(ge=Qe(Y[2]),u=qr(u,ue,ce,1,Y,ge,m,c,Ur,Bo,null,Lo)),ue&4){ye=Qe(Y[5]);let C;for(C=0;C<ye.length;C+=1){const M=Mo(Y,ye,C);se[C]?se[C].p(M,ue):(se[C]=Ko(M),se[C].c(),se[C].m(T,null))}for(;C<se.length;C+=1)se[C].d(1);se.length=ye.length}ue&4&&(Pe=Qe(Y[2]),ie=qr(ie,ue,Ce,1,Y,Pe,$,pe.parentNode,Ur,Fo,pe,Po))},d(Y){Y&&(y(e),y(re),y(pe),y(oe));for(let ue=0;ue<u.length;ue+=1)u[ue].d();Lt(se,Y);for(let ue=0;ue<ie.length;ue+=1)ie[ue].d(Y)}}}function Bo(i,e){let n,r,l=e[6].description+"",c,u,m,_=e[6].receiptDateString+"",v,g,w,O=e[6].receiptType+"",K,ee,W,U=kt[e[6].currency].symbol+"",R,T,q=e[6].total.toFixed(2)+"",k,re;return{key:i,first:null,c(){n=E("tr"),r=E("td"),c=Ae(l),u=te(),m=E("td"),v=Ae(_),g=te(),w=E("td"),K=Ae(O),ee=te(),W=E("td"),R=Ae(U),T=te(),k=Ae(q),re=te(),this.h()},l(ie){n=S(ie,"TR",{});var $=H(n);r=S($,"TD",{});var pe=H(r);c=Oe(pe,l),pe.forEach(y),u=ne($),m=S($,"TD",{});var oe=H(m);v=Oe(oe,_),oe.forEach(y),g=ne($),w=S($,"TD",{});var De=H(w);K=Oe(De,O),De.forEach(y),ee=ne($),W=S($,"TD",{});var ge=H(W);R=Oe(ge,U),T=ne(ge),k=Oe(ge,q),ge.forEach(y),re=ne($),$.forEach(y),this.h()},h(){this.first=n},m(ie,$){le(ie,n,$),p(n,r),p(r,c),p(n,u),p(n,m),p(m,v),p(n,g),p(n,w),p(w,K),p(n,ee),p(n,W),p(W,R),p(W,T),p(W,k),p(n,re)},p(ie,$){e=ie,$&4&&l!==(l=e[6].description+"")&&$e(c,l),$&4&&_!==(_=e[6].receiptDateString+"")&&$e(v,_),$&4&&O!==(O=e[6].receiptType+"")&&$e(K,O),$&4&&U!==(U=kt[e[6].currency].symbol+"")&&$e(R,U),$&4&&q!==(q=e[6].total.toFixed(2)+"")&&$e(k,q)},d(ie){ie&&y(n)}}}function Ko(i){let e=kt[i[9]].symbol+"",n,r,l=i[2].filter(_).reduce(jo,0).toFixed(2)+"",c,u,m;function _(...v){return i[4](i[9],...v)}return{c(){n=Ae(e),r=te(),c=Ae(l),u=te(),m=E("br")},l(v){n=Oe(v,e),r=ne(v),c=Oe(v,l),u=ne(v),m=S(v,"BR",{})},m(v,g){le(v,n,g),le(v,r,g),le(v,c,g),le(v,u,g),le(v,m,g)},p(v,g){i=v,g&4&&e!==(e=kt[i[9]].symbol+"")&&$e(n,e),g&4&&l!==(l=i[2].filter(_).reduce(jo,0).toFixed(2)+"")&&$e(c,l)},d(v){v&&(y(n),y(r),y(c),y(u),y(m))}}}function Fo(i,e){let n,r=e[6].description+"",l,c,u,m=kt[e[6].currency].symbol+"",_,v,g=e[6].total.toFixed(2)+"",w,O,K,ee,W;return{key:i,first:null,c(){n=E("div"),l=Ae(r),c=te(),u=E("strong"),_=Ae(m),v=te(),w=Ae(g),O=te(),K=E("img"),this.h()},l(U){n=S(U,"DIV",{class:!0});var R=H(n);l=Oe(R,r),c=ne(R),u=S(R,"STRONG",{});var T=H(u);_=Oe(T,m),v=ne(T),w=Oe(T,g),T.forEach(y),R.forEach(y),O=ne(U),K=S(U,"IMG",{class:!0,alt:!0,src:!0}),this.h()},h(){h(n,"class","page-print mb-2"),h(K,"class","img-print"),h(K,"alt",ee="receipt with description '"+e[6].description+"'"),Hr(K.src,W=e[6].imageData)||h(K,"src",W),this.first=n},m(U,R){le(U,n,R),p(n,l),p(n,c),p(n,u),p(u,_),p(u,v),p(u,w),le(U,O,R),le(U,K,R)},p(U,R){e=U,R&4&&r!==(r=e[6].description+"")&&$e(l,r),R&4&&m!==(m=kt[e[6].currency].symbol+"")&&$e(_,m),R&4&&g!==(g=e[6].total.toFixed(2)+"")&&$e(w,g),R&4&&ee!==(ee="receipt with description '"+e[6].description+"'")&&h(K,"alt",ee),R&4&&!Hr(K.src,W=e[6].imageData)&&h(K,"src",W)},d(U){U&&(y(n),y(O),y(K))}}}function tc(i){let e,n=i[0]&&Ro(i);return{c(){e=E("div"),n&&n.c()},l(r){e=S(r,"DIV",{});var l=H(e);n&&n.l(l),l.forEach(y)},m(r,l){le(r,e,l),n&&n.m(e,null)},p(r,[l]){r[0]?n?n.p(r,l):(n=Ro(r),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},i:Et,o:Et,d(r){r&&y(e),n&&n.d()}}}const jo=(i,e)=>i+e.total;function nc(i,e,n){let r,l=Et,c=()=>(l(),l=pr(_,g=>n(2,r=g)),_);i.$$.on_destroy.push(()=>l());let{tripId:u=-1}=e,m,_;u>-1&&Mt.trips.get(u).then(g=>{n(0,m=g),c(n(1,_=gr(()=>Mt.receipts.where({tripId:u}).reverse().sortBy("receiptDate"))))});const v=(g,w)=>w.currency==g;return i.$$set=g=>{"tripId"in g&&n(3,u=g.tripId)},[m,_,r,u,v]}class rc extends un{constructor(e){super(),cn(this,e,nc,tc,an,{tripId:3})}}function ic(i){let e,n,r,l=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="38" viewBox="0 0 375.91 152.28" style="enable-background:new 0 0 375.91 152.28;" xml:space="preserve"><style type="text/css">.st0{fill:currentColor;}
		   </style><g id="Layer_1"><g><path class="st0" d="M0,19.62h59.19V36.2H0V19.62z M20.94,27.62h17.24v88.06H20.94V27.62z" fill="currentColor"></path><path class="st0" d="M60.18,47.1h17.84v68.58H60.18V47.1z M93.28,63.69c-1.01-0.22-2.14-0.33-3.37-0.33
					   c-3.74,0-6.66,1.17-8.75,3.5c-2.09,2.33-3.14,5.57-3.14,9.71l-1.39-17.51c1.94-4.1,4.44-7.3,7.5-9.61
					   c3.06-2.31,6.42-3.47,10.08-3.47c1.41,0,2.7,0.23,3.87,0.69c1.17,0.46,2.17,1.13,3.01,2.01l-5.22,16.05
					   C95.15,64.26,94.29,63.91,93.28,63.69z"></path><path class="st0" d="M109,19.62h17.24v17.11H109V19.62z M109,47.1h17.24v68.58H109V47.1z"></path><path class="st0" d="M140.58,47.1h17.18v96.46h-17.18V47.1z M162.68,113.6c-2.62-2.05-4.57-4.94-5.85-8.69l0.92-12.62
					   c0,1.85,0.3,3.41,0.89,4.69c0.59,1.28,1.47,2.25,2.64,2.91c1.17,0.66,2.59,0.99,4.26,0.99c2.51,0,4.45-0.86,5.81-2.58
					   s2.05-4.14,2.05-7.27V71.61c0-3.08-0.68-5.49-2.05-7.23c-1.37-1.74-3.3-2.61-5.81-2.61c-1.67,0-3.09,0.33-4.26,0.99
					   c-1.17,0.66-2.05,1.64-2.64,2.94c-0.59,1.3-0.89,2.85-0.89,4.66l-1.39-11.83c1.72-3.96,3.94-7.05,6.67-9.25
					   c2.73-2.2,5.75-3.3,9.05-3.3c3.88,0,7.19,0.95,9.94,2.84c2.75,1.89,4.84,4.67,6.28,8.32c1.43,3.66,2.15,8.08,2.15,13.28v21.8
					   c0,5.2-0.73,9.61-2.18,13.25c-1.45,3.63-3.57,6.41-6.34,8.32c-2.77,1.92-6.1,2.87-9.98,2.87
					   C168.4,116.67,165.3,115.65,162.68,113.6z"></path><path class="st0" d="M204.6,47.1h17.18v96.46H204.6V47.1z M226.7,113.6c-2.62-2.05-4.57-4.94-5.85-8.69l0.92-12.62
					   c0,1.85,0.3,3.41,0.89,4.69c0.59,1.28,1.47,2.25,2.64,2.91c1.17,0.66,2.59,0.99,4.26,0.99c2.51,0,4.45-0.86,5.81-2.58
					   s2.05-4.14,2.05-7.27V71.61c0-3.08-0.68-5.49-2.05-7.23c-1.37-1.74-3.3-2.61-5.81-2.61c-1.67,0-3.09,0.33-4.26,0.99
					   c-1.17,0.66-2.05,1.64-2.64,2.94c-0.59,1.3-0.89,2.85-0.89,4.66l-1.39-11.83c1.72-3.96,3.94-7.05,6.67-9.25
					   c2.73-2.2,5.75-3.3,9.05-3.3c3.88,0,7.19,0.95,9.94,2.84c2.75,1.89,4.84,4.67,6.28,8.32c1.43,3.66,2.15,8.08,2.15,13.28v21.8
					   c0,5.2-0.73,9.61-2.18,13.25c-1.45,3.63-3.57,6.41-6.34,8.32c-2.77,1.92-6.1,2.87-9.98,2.87
					   C232.42,116.67,229.32,115.65,226.7,113.6z"></path><path class="st0" d="M267.43,19.62h17.24v17.11h-17.24V19.62z M267.43,47.1h17.24v68.58h-17.24V47.1z"></path><path class="st0" d="M299.01,47.1h17.24v68.58h-17.24V47.1z M332.31,70.62c0-2.73-0.72-4.83-2.15-6.31
					   c-1.43-1.48-3.45-2.21-6.04-2.21c-2.51,0-4.45,0.74-5.81,2.21c-1.37,1.48-2.05,3.6-2.05,6.38l-1.39-11.63
					   c1.72-4.27,3.96-7.52,6.74-9.74c2.77-2.22,6.05-3.34,9.84-3.34c5.72,0,10.16,1.98,13.31,5.95c3.15,3.96,4.72,9.54,4.72,16.71
					   v47.04h-17.18V70.62z"></path><path class="st0" d="M356.55,19.62h17.24v23.65l-17.24,16.91V19.62z"></path></g></g></svg>`,c,u,m,_='<li class="nav-item"><a class="btn btn-outline-light" href="#/add">+ Add Trip</a></li>',v,g,w=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-list-ul" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m-3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2m0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2m0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2"></path></svg>
				My Trips`,O,K,ee,W,U,R,T,q,k,re,ie,$;U=new ys({props:{tripId:i[3]}});const pe=[fc,cc,uc,sc,lc,oc],oe=[];function De(ge,ce){return ge[4]==="add"?0:ge[4]==="trip"&&ge[3]>-1?1:ge[4]==="update"&&ge[3]>-1?2:ge[4]==="addreceipt"&&ge[3]>-1?3:ge[4]==="editreceipt"&&ge[3]>-1?4:5}return q=De(i),k=oe[q]=pe[q](i),{c(){e=E("nav"),n=E("div"),r=E("a"),r.innerHTML=l,c=te(),u=E("div"),m=E("ul"),m.innerHTML=_,v=te(),g=E("button"),g.innerHTML=w,O=te(),K=E("main"),ee=E("div"),W=E("div"),Vt(U.$$.fragment),R=te(),T=E("div"),k.c(),this.h()},l(ge){e=S(ge,"NAV",{class:!0,"aria-label":!0});var ce=H(e);n=S(ce,"DIV",{class:!0});var ye=H(n);r=S(ye,"A",{"aria-current":!0,class:!0,href:!0,"data-svelte-h":!0}),Ye(r)!=="svelte-184qgqe"&&(r.innerHTML=l),c=ne(ye),u=S(ye,"DIV",{class:!0});var se=H(u);m=S(se,"UL",{class:!0,"data-svelte-h":!0}),Ye(m)!=="svelte-d6xdjk"&&(m.innerHTML=_),v=ne(se),g=S(se,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),Ye(g)!=="svelte-1yyazi7"&&(g.innerHTML=w),se.forEach(y),ye.forEach(y),ce.forEach(y),O=ne(ge),K=S(ge,"MAIN",{class:!0});var Pe=H(K);ee=S(Pe,"DIV",{class:!0});var Ce=H(ee);W=S(Ce,"DIV",{class:!0,id:!0});var Y=H(W);xt(U.$$.fragment,Y),Y.forEach(y),Ce.forEach(y),R=ne(Pe),T=S(Pe,"DIV",{class:!0,id:!0});var ue=H(T);k.l(ue),ue.forEach(y),Pe.forEach(y),this.h()},h(){h(r,"aria-current","page"),h(r,"class","navbar-brand text-light"),h(r,"href","#"),h(m,"class","navbar-nav me-auto"),h(g,"class","listTitleSmall btn btn-outline-light me-2"),h(g,"type","button"),h(u,"class","collapse navbar-collapse"),h(n,"class","container-fluid"),h(e,"class","navbar navbar-expand navbar-dark bg-dark"),h(e,"aria-label","Second navbar example"),h(W,"class","list-group scrollarea d-none"),h(W,"id","tripToggle"),h(ee,"class","tripList d-flex flex-column align-items-stretch flex-shrink-0 bg-body-tertiary"),h(T,"class","d-flex p-3 w-100"),h(T,"id","mainPane"),h(K,"class","d-flex flex-nowrap")},m(ge,ce){le(ge,e,ce),p(e,n),p(n,r),p(n,c),p(n,u),p(u,m),p(u,v),p(u,g),le(ge,O,ce),le(ge,K,ce),p(K,ee),p(ee,W),zt(U,W,null),p(K,R),p(K,T),oe[q].m(T,null),re=!0,ie||($=Ze(g,"click",Qo),ie=!0)},p(ge,ce){const ye={};ce&8&&(ye.tripId=ge[3]),U.$set(ye);let se=q;q=De(ge),q===se?oe[q].p(ge,ce):(zn(),ht(oe[se],1,1,()=>{oe[se]=null}),Hn(),k=oe[q],k?k.p(ge,ce):(k=oe[q]=pe[q](ge),k.c()),lt(k,1),k.m(T,null))},i(ge){re||(lt(U.$$.fragment,ge),lt(k),re=!0)},o(ge){ht(U.$$.fragment,ge),ht(k),re=!1},d(ge){ge&&(y(e),y(O),y(K)),Ht(U),oe[q].d(),ie=!1,$()}}}function ac(i){let e,n;return e=new rc({props:{tripId:i[3]}}),{c(){Vt(e.$$.fragment)},l(r){xt(e.$$.fragment,r)},m(r,l){zt(e,r,l),n=!0},p(r,l){const c={};l&8&&(c.tripId=r[3]),e.$set(c)},i(r){n||(lt(e.$$.fragment,r),n=!0)},o(r){ht(e.$$.fragment,r),n=!1},d(r){Ht(e,r)}}}function oc(i){let e,n;return e=new ec({}),{c(){Vt(e.$$.fragment)},l(r){xt(e.$$.fragment,r)},m(r,l){zt(e,r,l),n=!0},p:Et,i(r){n||(lt(e.$$.fragment,r),n=!0)},o(r){ht(e.$$.fragment,r),n=!1},d(r){Ht(e,r)}}}function lc(i){let e,n;return e=new Qu({props:{receiptId:i[5]}}),{c(){Vt(e.$$.fragment)},l(r){xt(e.$$.fragment,r)},m(r,l){zt(e,r,l),n=!0},p(r,l){const c={};l&32&&(c.receiptId=r[5]),e.$set(c)},i(r){n||(lt(e.$$.fragment,r),n=!0)},o(r){ht(e.$$.fragment,r),n=!1},d(r){Ht(e,r)}}}function sc(i){let e,n;return e=new Wu({props:{tripId:i[3]}}),{c(){Vt(e.$$.fragment)},l(r){xt(e.$$.fragment,r)},m(r,l){zt(e,r,l),n=!0},p(r,l){const c={};l&8&&(c.tripId=r[3]),e.$set(c)},i(r){n||(lt(e.$$.fragment,r),n=!0)},o(r){ht(e.$$.fragment,r),n=!1},d(r){Ht(e,r)}}}function uc(i){let e,n;return e=new ks({props:{tripId:i[3]}}),{c(){Vt(e.$$.fragment)},l(r){xt(e.$$.fragment,r)},m(r,l){zt(e,r,l),n=!0},p(r,l){const c={};l&8&&(c.tripId=r[3]),e.$set(c)},i(r){n||(lt(e.$$.fragment,r),n=!0)},o(r){ht(e.$$.fragment,r),n=!1},d(r){Ht(e,r)}}}function cc(i){let e=i[3],n,r,l=Vo(i);return{c(){l.c(),n=Ft()},l(c){l.l(c),n=Ft()},m(c,u){l.m(c,u),le(c,n,u),r=!0},p(c,u){u&8&&an(e,e=c[3])?(zn(),ht(l,1,1,Et),Hn(),l=Vo(c),l.c(),lt(l,1),l.m(n.parentNode,n)):l.p(c,u)},i(c){r||(lt(l),r=!0)},o(c){ht(l),r=!1},d(c){c&&y(n),l.d(c)}}}function fc(i){let e,n;return e=new es({}),{c(){Vt(e.$$.fragment)},l(r){xt(e.$$.fragment,r)},m(r,l){zt(e,r,l),n=!0},p:Et,i(r){n||(lt(e.$$.fragment,r),n=!0)},o(r){ht(e.$$.fragment,r),n=!1},d(r){Ht(e,r)}}}function Vo(i){let e,n;return e=new vs({props:{tripId:i[3]}}),{c(){Vt(e.$$.fragment)},l(r){xt(e.$$.fragment,r)},m(r,l){zt(e,r,l),n=!0},p(r,l){const c={};l&8&&(c.tripId=r[3]),e.$set(c)},i(r){n||(lt(e.$$.fragment,r),n=!0)},o(r){ht(e.$$.fragment,r),n=!1},d(r){Ht(e,r)}}}function dc(i){let e,n,r,l;const c=[ac,ic],u=[];function m(_,v){return _[4]==="print"&&_[3]>-1?0:1}return e=m(i),n=u[e]=c[e](i),{c(){n.c(),r=Ft()},l(_){n.l(_),r=Ft()},m(_,v){u[e].m(_,v),le(_,r,v),l=!0},p(_,[v]){let g=e;e=m(_),e===g?u[e].p(_,v):(zn(),ht(u[g],1,1,()=>{u[g]=null}),Hn(),n=u[e],n?n.p(_,v):(n=u[e]=c[e](_),n.c()),lt(n,1),n.m(r.parentNode,r))},i(_){l||(lt(n),l=!0)},o(_){ht(n),l=!1},d(_){_&&y(r),u[e].d(_)}}}function hc(i,e,n){let r,l,c,u,m,_=Et,v=()=>(_(),_=pr(r,q=>n(3,m=q)),r),g,w=Et,O=()=>(w(),w=pr(c,q=>n(4,g=q)),c),K,ee=Et,W=()=>(ee(),ee=pr(l,q=>n(5,K=q)),l),U;Jn(i,Pl,q=>n(6,U=q)),i.$$.on_destroy.push(()=>_()),i.$$.on_destroy.push(()=>w()),i.$$.on_destroy.push(()=>ee());const R=new RegExp("#/(?<route>[a-z]+)(?<tripId>/[0-9]+|$)");function T(){var q;(q=document.getElementById("tripToggle"))==null||q.classList.remove("show"),u?(cr(c,g=u.groups.route||"",g),g=="editreceipt"?cr(l,K=parseInt(u.groups.tripId.replace("/","")||"-1"),K):cr(r,m=parseInt(u.groups.tripId.replace("/","")||"-1"),m)):(cr(c,g="",g),cr(r,m=-1,m))}return Tl(()=>{T()}),i.$$.update=()=>{i.$$.dirty&64&&(u=R.exec(U.url.hash))},v(n(2,r=jr(-1))),W(n(1,l=jr(-1))),O(n(0,c=jr(""))),[c,l,r,m,g,K,U]}class pc extends un{constructor(e){super(),cn(this,e,hc,dc,an,{})}}function mc(i){let e,n,r;return n=new pc({}),{c(){e=te(),Vt(n.$$.fragment),this.h()},l(l){Al("svelte-1mxz4jk",document.head).forEach(y),e=ne(l),xt(n.$$.fragment,l),this.h()},h(){document.title="Trippin'"},m(l,c){le(l,e,c),zt(n,l,c),r=!0},p:Et,i(l){r||(lt(n.$$.fragment,l),r=!0)},o(l){ht(n.$$.fragment,l),r=!1},d(l){l&&y(e),Ht(n,l)}}}class Pc extends un{constructor(e){super(),cn(this,e,null,mc,an,{})}}export{Pc as component};
