import{C as kn,s as rn,p as Ft,k as fe,n as kt,i as b,e as S,t as Le,b as ie,d as T,f as H,h as Re,j as ae,v as h,l as p,S as Ye,T as Br,x as nn,c as Fo,U as Yt,V as Ge,W as Zt,X as Jt,Y as Pn,u as jo,g as Vo,a as zo,Z as Lt,_ as Uo,$ as ot,m as Xe,a0 as kl,a1 as Tt,a2 as ca,o as cr,w as Ai,E as Vn,a3 as Gn,D as Ho,a4 as Dl,a5 as El,a6 as Sl,a7 as ur,a8 as qr,a9 as Kr,aa as Tl,ab as ar,ac as Cl}from"../chunks/scheduler.OewxY0I8.js";import{t as rt,S as ln,i as sn,f as Mn,b as Vt,d as zt,m as Ut,a as st,e as Ht,g as zn,c as Un,h as fa}from"../chunks/index.C1a3JXG5.js";import{w as Lr}from"../chunks/entry.DbnBAWvc.js";import{_ as Al}from"../chunks/preload-helper.D6kgxu3v.js";import{p as Ol}from"../chunks/stores.C_UWDUft.js";function Ze(i){return(i==null?void 0:i.length)!==void 0?i:Array.from(i)}function Fr(i,e){i.d(1),e.delete(i.key)}function jr(i,e,n,r,l,c,u,g,_,m,v,k){let R=i.length,U=c.length,le=R;const x={};for(;le--;)x[i[le].key]=le;const q=[],B=new Map,I=new Map,X=[];for(le=U;le--;){const J=k(l,c,le),se=n(J);let me=u.get(se);me?X.push(()=>me.p(J,e)):(me=m(se,J),me.c()),B.set(se,q[le]=me),se in x&&I.set(se,Math.abs(le-x[se]))}const E=new Set,Z=new Set;function te(J){rt(J,1),J.m(g,v),u.set(J.key,J),v=J.first,U--}for(;R&&U;){const J=q[U-1],se=i[R-1],me=J.key,we=se.key;J===se?(v=J.first,R--,U--):B.has(we)?!u.has(me)||E.has(me)?te(J):Z.has(we)?R--:I.get(me)>I.get(we)?(Z.add(me),te(J)):(E.add(we),R--):(_(se,u),R--)}for(;R--;){const J=i[R];B.has(J.key)||_(J,u)}for(;U;)te(q[U-1]);return kn(X),q}function da(i){let e,n,r=("00"+i[0].getHours()).slice(-2)+"",l,c,u,g=("00"+i[0].getMinutes()).slice(-2)+"",_,m,v,k,R=i[1]!=="minute"&&ha(i);return{c(){e=S("div"),n=S("span"),l=Le(r),c=Le(`:
		`),u=S("span"),_=Le(g),m=ie(),R&&R.c(),this.h()},l(U){e=T(U,"DIV",{class:!0,role:!0});var le=H(e);n=T(le,"SPAN",{role:!0,"aria-label":!0,tabindex:!0,contenteditable:!0,inputmode:!0,class:!0});var x=H(n);l=Re(x,r),x.forEach(b),c=Re(le,`:
		`),u=T(le,"SPAN",{role:!0,"aria-label":!0,tabindex:!0,contenteditable:!0,inputmode:!0,class:!0});var q=H(u);_=Re(q,g),q.forEach(b),m=ae(le),R&&R.l(le),le.forEach(b),this.h()},h(){h(n,"role","spinbutton"),h(n,"aria-label","Hours"),h(n,"tabindex","0"),h(n,"contenteditable",""),h(n,"inputmode","numeric"),h(n,"class","svelte-mzlxg7"),h(u,"role","spinbutton"),h(u,"aria-label","Minutes"),h(u,"tabindex","0"),h(u,"contenteditable",""),h(u,"inputmode","numeric"),h(u,"class","svelte-mzlxg7"),h(e,"class","time-picker svelte-mzlxg7"),h(e,"role","none")},m(U,le){fe(U,e,le),p(e,n),p(n,l),i[6](n),p(e,c),p(e,u),p(u,_),i[7](u),p(e,m),R&&R.m(e,null),v||(k=[Ye(n,"keydown",i[3]),Ye(n,"input",i[4]),Ye(n,"focus",Vr),Ye(u,"keydown",i[3]),Ye(u,"input",i[4]),Ye(u,"focus",Vr),Ye(e,"mousedown",i[10])],v=!0)},p(U,le){le&1&&r!==(r=("00"+U[0].getHours()).slice(-2)+"")&&Br(l,r),le&1&&g!==(g=("00"+U[0].getMinutes()).slice(-2)+"")&&Br(_,g),U[1]!=="minute"?R?R.p(U,le):(R=ha(U),R.c(),R.m(e,null)):R&&(R.d(1),R=null)},d(U){U&&b(e),i[6](null),i[7](null),R&&R.d(),v=!1,kn(k)}}}function ha(i){let e,n,r=("00"+i[0].getSeconds()).slice(-2)+"",l,c,u,g,_,m=i[1]!=="second"&&pa(i);return{c(){e=Le(":"),n=S("span"),l=Le(r),c=ie(),m&&m.c(),u=Ft(),this.h()},l(v){e=Re(v,":"),n=T(v,"SPAN",{role:!0,"aria-label":!0,tabindex:!0,contenteditable:!0,inputmode:!0,class:!0});var k=H(n);l=Re(k,r),k.forEach(b),c=ae(v),m&&m.l(v),u=Ft(),this.h()},h(){h(n,"role","spinbutton"),h(n,"aria-label","Seconds"),h(n,"tabindex","0"),h(n,"contenteditable",""),h(n,"inputmode","numeric"),h(n,"class","svelte-mzlxg7")},m(v,k){fe(v,e,k),fe(v,n,k),p(n,l),i[8](n),fe(v,c,k),m&&m.m(v,k),fe(v,u,k),g||(_=[Ye(n,"keydown",i[3]),Ye(n,"input",i[4]),Ye(n,"focus",Vr)],g=!0)},p(v,k){k&1&&r!==(r=("00"+v[0].getSeconds()).slice(-2)+"")&&Br(l,r),v[1]!=="second"?m?m.p(v,k):(m=pa(v),m.c(),m.m(u.parentNode,u)):m&&(m.d(1),m=null)},d(v){v&&(b(e),b(n),b(c),b(u)),i[8](null),m&&m.d(v),g=!1,kn(_)}}}function pa(i){let e,n,r=("000"+i[0].getMilliseconds()).slice(-3)+"",l,c,u;return{c(){e=Le("."),n=S("span"),l=Le(r),this.h()},l(g){e=Re(g,"."),n=T(g,"SPAN",{role:!0,"aria-label":!0,tabindex:!0,contenteditable:!0,inputmode:!0,class:!0});var _=H(n);l=Re(_,r),_.forEach(b),this.h()},h(){h(n,"role","spinbutton"),h(n,"aria-label","Milliseconds"),h(n,"tabindex","0"),h(n,"contenteditable",""),h(n,"inputmode","numeric"),h(n,"class","svelte-mzlxg7")},m(g,_){fe(g,e,_),fe(g,n,_),p(n,l),i[9](n),c||(u=[Ye(n,"keydown",i[3]),Ye(n,"input",i[4]),Ye(n,"focus",Vr)],c=!0)},p(g,_){_&1&&r!==(r=("000"+g[0].getMilliseconds()).slice(-3)+"")&&Br(l,r)},d(g){g&&(b(e),b(n)),i[9](null),c=!1,kn(u)}}}function Il(i){let e,n=i[1]&&da(i);return{c(){n&&n.c(),e=Ft()},l(r){n&&n.l(r),e=Ft()},m(r,l){n&&n.m(r,l),fe(r,e,l)},p(r,[l]){r[1]?n?n.p(r,l):(n=da(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:kt,o:kt,d(r){r&&b(e),n&&n.d(r)}}}function Rr(i){const e=window.getSelection(),n=document.createRange();n.selectNodeContents(i),e==null||e.removeAllRanges(),e==null||e.addRange(n)}function Pl(i,e,n){return n&&i<0?e:n&&i>e?0:Math.max(0,Math.min(e,i))}function bi(i){const e=i.getAttribute("aria-label");if(e==="Hours")return{label:e,len:2,max:23};if(e==="Minutes")return{label:e,len:2,max:59};if(e==="Seconds")return{label:e,len:2,max:59};if(e==="Milliseconds")return{label:e,len:3,max:999};throw new Error("Invalid label "+e)}function wi(i,e){return parseInt(i.replace(/[^\d]/g,"").slice(-e))}function Vr(i){Rr(i.currentTarget)}function Ml(i,e,n){let{browseDate:r}=e,{timePrecision:l}=e,{setTime:c}=e,u=[];function g(B){if(B.key==="ArrowUp"||B.key==="ArrowDown"){const I=_(B.currentTarget),X=B.key==="ArrowUp"?1:-1;v(B.currentTarget,I+X,!0),B.preventDefault(),Rr(B.currentTarget)}else if(B.key==="ArrowLeft"||B.key==="ArrowRight"||":;-,.".includes(B.key)){const I=u.indexOf(B.currentTarget),X=B.key==="ArrowLeft"?-1:1,E=u[I+X];B.preventDefault(),E&&(E.focus(),Rr(E))}}function _(B){const I=bi(B).label;return I==="Hours"?r.getHours():I==="Minutes"?r.getMinutes():I==="Seconds"?r.getSeconds():r.getMilliseconds()}function m(B){const I=("00"+B.getHours()).slice(-2),X=("00"+B.getMinutes()).slice(-2),E=("00"+B.getSeconds()).slice(-2),Z=("000"+B.getMilliseconds()).slice(-3);u[0]&&u[0].innerText!==I&&n(2,u[0].innerText=I,u),u[1]&&u[1].innerText!==X&&n(2,u[1].innerText=X,u),u[2]&&u[2].innerText!==E&&n(2,u[2].innerText=E,u),u[3]&&u[3].innerText!==Z&&n(2,u[3].innerText=Z,u)}function v(B,I,X=!1){const E=bi(B);I=Pl(I,E.max,X),E.label==="Hours"?r.setHours(I):E.label==="Minutes"?r.setMinutes(I):E.label==="Seconds"?r.setSeconds(I):E.label==="Milliseconds"&&r.setMilliseconds(I),n(0,r=c(r)),m(r)}function k(B){const I=B,X=bi(I.currentTarget);let E;if(I.inputType==="insertText"){const Z="000"+_(I.currentTarget);E=wi(Z+I.currentTarget.innerText,X.len),E>X.max&&I.data&&(E=wi(I.data,X.len))}else E=wi("000"+I.currentTarget.innerText,X.len);v(I.currentTarget,E),Rr(I.currentTarget)}function R(B){nn[B?"unshift":"push"](()=>{u[0]=B,n(2,u)})}function U(B){nn[B?"unshift":"push"](()=>{u[1]=B,n(2,u)})}function le(B){nn[B?"unshift":"push"](()=>{u[2]=B,n(2,u)})}function x(B){nn[B?"unshift":"push"](()=>{u[3]=B,n(2,u)})}const q=B=>{B.target instanceof HTMLElement&&B.target.tagName==="SPAN"&&(B.target.focus(),B.preventDefault())};return i.$$set=B=>{"browseDate"in B&&n(0,r=B.browseDate),"timePrecision"in B&&n(1,l=B.timePrecision),"setTime"in B&&n(5,c=B.setTime)},i.$$.update=()=>{i.$$.dirty&1&&m(r)},[r,l,u,g,k,c,R,U,le,x,q]}class Ll extends ln{constructor(e){super(),sn(this,e,Ml,Il,rn,{browseDate:0,timePrecision:1,setTime:5})}}function Rl(i){return i%4===0&&i%100!==0||i%400===0}function fr(i,e){return[31,Rl(i)?29:28,31,30,31,30,31,31,30,31,30,31][e]}function ma(i,e){let n="";if(i)for(const r of e)typeof r=="string"?n+=r:n+=r.toString(i);return n}function ki(i,e){const n=fr(i,e),r=[];for(let l=0;l<n;l++)r.push({year:i,month:e,number:l+1});return r}function Nl(i,e){const n=i.getFullYear(),r=i.getMonth(),l=new Date(n,r,1).getDay();let c=[];const u=(l-e+7)%7;if(u>0){let v=r-1,k=n;v===-1&&(v=11,k=n-1),c=ki(k,v).slice(-u)}c=c.concat(ki(n,r));let g=r+1,_=n;g===12&&(g=0,_=n+1);const m=42-c.length;return c=c.concat(ki(_,g).slice(0,m)),c}function Bl(){return{weekdays:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekStartsOn:1}}function qo(i){const e=Bl();return typeof i.weekStartsOn=="number"&&(e.weekStartsOn=i.weekStartsOn),i.months&&(e.months=i.months),i.shortMonths&&(e.shortMonths=i.shortMonths),i.weekdays&&(e.weekdays=i.weekdays),e}function ga(i,e,n){const r=i.slice();return r[36]=e[n],r[38]=n,r}function va(i,e,n){const r=i.slice();return r[39]=e[n],r}function _a(i,e,n){const r=i.slice();return r[36]=e[n],r[43]=n,r}function ya(i,e,n){const r=i.slice();return r[44]=e[n],r}function ba(i,e,n){const r=i.slice();return r[44]=e[n],r}function wa(i,e,n){const r=i.slice();return r[49]=e[n],r[43]=n,r}function ka(i,e,n){const r=i.slice();return r[49]=e[n],r[43]=n,r}function Da(i){let e,n=i[49]+"",r,l;return{c(){e=S("option"),r=Le(n),this.h()},l(c){e=T(c,"OPTION",{});var u=H(e);r=Re(u,n),u.forEach(b),this.h()},h(){e.disabled=l=new Date(i[9],i[43],fr(i[9],i[43]),23,59,59,999)<i[2]||new Date(i[9],i[43])>i[3],e.__value=i[43],ot(e,e.__value)},m(c,u){fe(c,e,u),p(e,r)},p(c,u){u[0]&32&&n!==(n=c[49]+"")&&Xe(r,n),u[0]&588&&l!==(l=new Date(c[9],c[43],fr(c[9],c[43]),23,59,59,999)<c[2]||new Date(c[9],c[43])>c[3])&&(e.disabled=l)},d(c){c&&b(e)}}}function Ea(i){let e,n=i[49]+"",r,l;return{c(){e=S("option"),r=Le(n),this.h()},l(c){e=T(c,"OPTION",{});var u=H(e);r=Re(u,n),u.forEach(b),this.h()},h(){e.__value=i[43],ot(e,e.__value),e.selected=l=i[43]===i[8]},m(c,u){fe(c,e,u),p(e,r)},p(c,u){u[0]&32&&n!==(n=c[49]+"")&&Xe(r,n),u[0]&256&&l!==(l=c[43]===c[8])&&(e.selected=l)},d(c){c&&b(e)}}}function Sa(i){let e,n=i[44]+"",r,l;return{c(){e=S("option"),r=Le(n),this.h()},l(c){e=T(c,"OPTION",{});var u=H(e);r=Re(u,n),u.forEach(b),this.h()},h(){e.__value=l=i[44],ot(e,e.__value)},m(c,u){fe(c,e,u),p(e,r)},p(c,u){u[0]&64&&n!==(n=c[44]+"")&&Xe(r,n),u[0]&64&&l!==(l=c[44])&&(e.__value=l,ot(e,e.__value))},d(c){c&&b(e)}}}function Ta(i){let e,n=i[44]+"",r,l,c;return{c(){e=S("option"),r=Le(n),this.h()},l(u){e=T(u,"OPTION",{});var g=H(e);r=Re(g,n),g.forEach(b),this.h()},h(){e.__value=l=i[44],ot(e,e.__value),e.selected=c=i[44]===i[4].getFullYear()},m(u,g){fe(u,e,g),p(e,r)},p(u,g){g[0]&64&&n!==(n=u[44]+"")&&Xe(r,n),g[0]&64&&l!==(l=u[44])&&(e.__value=l,ot(e,e.__value)),g[0]&80&&c!==(c=u[44]===u[4].getFullYear())&&(e.selected=c)},d(u){u&&b(e)}}}function Kl(i){let e,n=i[5].weekdays[i[5].weekStartsOn+i[43]-7]+"",r;return{c(){e=S("div"),r=Le(n),this.h()},l(l){e=T(l,"DIV",{class:!0});var c=H(e);r=Re(c,n),c.forEach(b),this.h()},h(){h(e,"class","header-cell svelte-w239uu")},m(l,c){fe(l,e,c),p(e,r)},p(l,c){c[0]&32&&n!==(n=l[5].weekdays[l[5].weekStartsOn+l[43]-7]+"")&&Xe(r,n)},d(l){l&&b(e)}}}function Fl(i){let e,n=i[5].weekdays[i[5].weekStartsOn+i[43]]+"",r;return{c(){e=S("div"),r=Le(n),this.h()},l(l){e=T(l,"DIV",{class:!0});var c=H(e);r=Re(c,n),c.forEach(b),this.h()},h(){h(e,"class","header-cell svelte-w239uu")},m(l,c){fe(l,e,c),p(e,r)},p(l,c){c[0]&32&&n!==(n=l[5].weekdays[l[5].weekStartsOn+l[43]]+"")&&Xe(r,n)},d(l){l&&b(e)}}}function Ca(i){let e;function n(c,u){return c[43]+c[5].weekStartsOn<7?Fl:Kl}let r=n(i),l=r(i);return{c(){l.c(),e=Ft()},l(c){l.l(c),e=Ft()},m(c,u){l.m(c,u),fe(c,e,u)},p(c,u){r===(r=n(c))&&l?l.p(c,u):(l.d(1),l=r(c),l&&(l.c(),l.m(e.parentNode,e)))},d(c){c&&b(e),l.d(c)}}}function Aa(i){let e,n,r=i[39].number+"",l,c,u;function g(){return i[27](i[39])}return{c(){e=S("div"),n=S("span"),l=Le(r),this.h()},l(_){e=T(_,"DIV",{class:!0});var m=H(e);n=T(m,"SPAN",{class:!0});var v=H(n);l=Re(v,r),v.forEach(b),m.forEach(b),this.h()},h(){h(n,"class","svelte-w239uu"),h(e,"class","cell svelte-w239uu"),Tt(e,"disabled",!Oi(i[39],i[2],i[3])),Tt(e,"selected",i[0]&&i[39].year===i[0].getFullYear()&&i[39].month===i[0].getMonth()&&i[39].number===i[0].getDate()),Tt(e,"today",i[39].year===i[11].getFullYear()&&i[39].month===i[11].getMonth()&&i[39].number===i[11].getDate()),Tt(e,"other-month",i[39].month!==i[8])},m(_,m){fe(_,e,m),p(e,n),p(n,l),c||(u=Ye(e,"click",g),c=!0)},p(_,m){i=_,m[0]&128&&r!==(r=i[39].number+"")&&Xe(l,r),m[0]&140&&Tt(e,"disabled",!Oi(i[39],i[2],i[3])),m[0]&129&&Tt(e,"selected",i[0]&&i[39].year===i[0].getFullYear()&&i[39].month===i[0].getMonth()&&i[39].number===i[0].getDate()),m[0]&2176&&Tt(e,"today",i[39].year===i[11].getFullYear()&&i[39].month===i[11].getMonth()&&i[39].number===i[11].getDate()),m[0]&384&&Tt(e,"other-month",i[39].month!==i[8])},d(_){_&&b(e),c=!1,u()}}}function Oa(i){let e,n=Ze(i[7].slice(i[38]*7,i[38]*7+7)),r=[];for(let l=0;l<n.length;l+=1)r[l]=Aa(va(i,n,l));return{c(){e=S("div");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=T(l,"DIV",{class:!0});var c=H(e);for(let u=0;u<r.length;u+=1)r[u].l(c);c.forEach(b),this.h()},h(){h(e,"class","week svelte-w239uu")},m(l,c){fe(l,e,c);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null)},p(l,c){if(c[0]&18829){n=Ze(l[7].slice(l[38]*7,l[38]*7+7));let u;for(u=0;u<n.length;u+=1){const g=va(l,n,u);r[u]?r[u].p(g,c):(r[u]=Aa(g),r[u].c(),r[u].m(e,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=n.length}},d(l){l&&b(e),Lt(r,l)}}}function jl(i){let e,n,r,l,c='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="svelte-w239uu"><path d="M5 3l3.057-3 11.943 12-11.943 12-3.057-3 9-9z" transform="rotate(180, 12, 12)"></path></svg>',u,g,_,m,v,k,R,U,le,x,q,B,I,X,E,Z,te,J,se='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="svelte-w239uu"><path d="M5 3l3.057-3 11.943 12-11.943 12-3.057-3 9-9z"></path></svg>',me,we,Ne,ge,be,ue,Oe,Ee,oe,Ae,O=Ze(i[5].months),N=[];for(let A=0;A<O.length;A+=1)N[A]=Da(ka(i,O,A));let Y=Ze(i[5].months),_e=[];for(let A=0;A<Y.length;A+=1)_e[A]=Ea(wa(i,Y,A));let w=Ze(i[6]),$=[];for(let A=0;A<w.length;A+=1)$[A]=Sa(ba(i,w,A));let Te=Ze(i[6]),de=[];for(let A=0;A<Te.length;A+=1)de[A]=Ta(ya(i,Te,A));let Ve=Ze(Array(7)),Ie=[];for(let A=0;A<Ve.length;A+=1)Ie[A]=Ca(_a(i,Ve,A));let ye=Ze(Array(6)),G=[];for(let A=0;A<ye.length;A+=1)G[A]=Oa(ga(i,ye,A));function ce(A){i[28](A)}let ke={timePrecision:i[1],setTime:i[10]};i[4]!==void 0&&(ke.browseDate=i[4]),be=new Ll({props:ke}),nn.push(()=>Mn(be,"browseDate",ce));const ze=i[21].default,Me=Fo(ze,i,i[20],null);return{c(){e=S("div"),n=S("div"),r=S("div"),l=S("button"),l.innerHTML=c,u=ie(),g=S("div"),_=S("select");for(let A=0;A<N.length;A+=1)N[A].c();m=ie(),v=S("select");for(let A=0;A<_e.length;A+=1)_e[A].c();k=ie(),R=Yt("svg"),U=Yt("path"),le=ie(),x=S("div"),q=S("select");for(let A=0;A<$.length;A+=1)$[A].c();B=ie(),I=S("select");for(let A=0;A<de.length;A+=1)de[A].c();X=ie(),E=Yt("svg"),Z=Yt("path"),te=ie(),J=S("button"),J.innerHTML=se,me=ie(),we=S("div");for(let A=0;A<Ie.length;A+=1)Ie[A].c();Ne=ie();for(let A=0;A<G.length;A+=1)G[A].c();ge=ie(),Vt(be.$$.fragment),Oe=ie(),Me&&Me.c(),this.h()},l(A){e=T(A,"DIV",{class:!0,tabindex:!0});var qe=H(e);n=T(qe,"DIV",{class:!0,tabindex:!0});var Be=H(n);r=T(Be,"DIV",{class:!0});var he=H(r);l=T(he,"BUTTON",{type:!0,class:!0,tabindex:!0,"data-svelte-h":!0}),Ge(l)!=="svelte-t4cock"&&(l.innerHTML=c),u=ae(he),g=T(he,"DIV",{class:!0});var We=H(g);_=T(We,"SELECT",{class:!0});var it=H(_);for(let Je=0;Je<N.length;Je+=1)N[Je].l(it);it.forEach(b),m=ae(We),v=T(We,"SELECT",{class:!0,tabindex:!0});var dt=H(v);for(let Je=0;Je<_e.length;Je+=1)_e[Je].l(dt);dt.forEach(b),k=ae(We),R=Zt(We,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,class:!0});var Et=H(R);U=Zt(Et,"path",{d:!0,transform:!0}),H(U).forEach(b),Et.forEach(b),We.forEach(b),le=ae(he),x=T(he,"DIV",{class:!0});var ut=H(x);q=T(ut,"SELECT",{class:!0});var bt=H(q);for(let Je=0;Je<$.length;Je+=1)$[Je].l(bt);bt.forEach(b),B=ae(ut),I=T(ut,"SELECT",{class:!0,tabindex:!0});var It=H(I);for(let Je=0;Je<de.length;Je+=1)de[Je].l(It);It.forEach(b),X=ae(ut),E=Zt(ut,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,class:!0});var ht=H(E);Z=Zt(ht,"path",{d:!0,transform:!0}),H(Z).forEach(b),ht.forEach(b),ut.forEach(b),te=ae(he),J=T(he,"BUTTON",{type:!0,class:!0,tabindex:!0,"data-svelte-h":!0}),Ge(J)!=="svelte-1a006lp"&&(J.innerHTML=se),he.forEach(b),me=ae(Be),we=T(Be,"DIV",{class:!0});var Ct=H(we);for(let Je=0;Je<Ie.length;Je+=1)Ie[Je].l(Ct);Ct.forEach(b),Ne=ae(Be);for(let Je=0;Je<G.length;Je+=1)G[Je].l(Be);ge=ae(Be),zt(be.$$.fragment,Be),Oe=ae(Be),Me&&Me.l(Be),Be.forEach(b),qe.forEach(b),this.h()},h(){h(l,"type","button"),h(l,"class","page-button svelte-w239uu"),h(l,"tabindex","-1"),h(_,"class","svelte-w239uu"),h(v,"class","dummy-select svelte-w239uu"),h(v,"tabindex","-1"),h(U,"d","M6 0l12 12-12 12z"),h(U,"transform","rotate(90, 12, 12)"),h(R,"xmlns","http://www.w3.org/2000/svg"),h(R,"width","24"),h(R,"height","24"),h(R,"viewBox","0 0 24 24"),h(R,"class","svelte-w239uu"),h(g,"class","dropdown month svelte-w239uu"),h(q,"class","svelte-w239uu"),h(I,"class","dummy-select svelte-w239uu"),h(I,"tabindex","-1"),h(Z,"d","M6 0l12 12-12 12z"),h(Z,"transform","rotate(90, 12, 12)"),h(E,"xmlns","http://www.w3.org/2000/svg"),h(E,"width","24"),h(E,"height","24"),h(E,"viewBox","0 0 24 24"),h(E,"class","svelte-w239uu"),h(x,"class","dropdown year svelte-w239uu"),h(J,"type","button"),h(J,"class","page-button svelte-w239uu"),h(J,"tabindex","-1"),h(r,"class","top svelte-w239uu"),h(we,"class","header svelte-w239uu"),h(n,"class","tab-container svelte-w239uu"),h(n,"tabindex","-1"),h(e,"class","date-time-picker svelte-w239uu"),h(e,"tabindex","0")},m(A,qe){fe(A,e,qe),p(e,n),p(n,r),p(r,l),p(r,u),p(r,g),p(g,_);for(let Be=0;Be<N.length;Be+=1)N[Be]&&N[Be].m(_,null);Jt(_,i[8]),p(g,m),p(g,v);for(let Be=0;Be<_e.length;Be+=1)_e[Be]&&_e[Be].m(v,null);p(g,k),p(g,R),p(R,U),p(r,le),p(r,x),p(x,q);for(let Be=0;Be<$.length;Be+=1)$[Be]&&$[Be].m(q,null);Jt(q,i[9]),p(x,B),p(x,I);for(let Be=0;Be<de.length;Be+=1)de[Be]&&de[Be].m(I,null);p(x,X),p(x,E),p(E,Z),p(r,te),p(r,J),p(n,me),p(n,we);for(let Be=0;Be<Ie.length;Be+=1)Ie[Be]&&Ie[Be].m(we,null);p(n,Ne);for(let Be=0;Be<G.length;Be+=1)G[Be]&&G[Be].m(n,null);p(n,ge),Ut(be,n,null),p(n,Oe),Me&&Me.m(n,null),Ee=!0,oe||(Ae=[Ye(l,"click",i[23]),Ye(_,"keydown",i[16]),Ye(_,"input",i[24]),Ye(q,"input",i[25]),Ye(q,"keydown",i[15]),Ye(J,"click",i[26]),Ye(e,"focusout",i[22]),Ye(e,"keydown",i[17])],oe=!0)},p(A,qe){if(qe[0]&556){O=Ze(A[5].months);let he;for(he=0;he<O.length;he+=1){const We=ka(A,O,he);N[he]?N[he].p(We,qe):(N[he]=Da(We),N[he].c(),N[he].m(_,null))}for(;he<N.length;he+=1)N[he].d(1);N.length=O.length}if((!Ee||qe[0]&256)&&Jt(_,A[8]),qe[0]&288){Y=Ze(A[5].months);let he;for(he=0;he<Y.length;he+=1){const We=wa(A,Y,he);_e[he]?_e[he].p(We,qe):(_e[he]=Ea(We),_e[he].c(),_e[he].m(v,null))}for(;he<_e.length;he+=1)_e[he].d(1);_e.length=Y.length}if(qe[0]&64){w=Ze(A[6]);let he;for(he=0;he<w.length;he+=1){const We=ba(A,w,he);$[he]?$[he].p(We,qe):($[he]=Sa(We),$[he].c(),$[he].m(q,null))}for(;he<$.length;he+=1)$[he].d(1);$.length=w.length}if((!Ee||qe[0]&576)&&Jt(q,A[9]),qe[0]&80){Te=Ze(A[6]);let he;for(he=0;he<Te.length;he+=1){const We=ya(A,Te,he);de[he]?de[he].p(We,qe):(de[he]=Ta(We),de[he].c(),de[he].m(I,null))}for(;he<de.length;he+=1)de[he].d(1);de.length=Te.length}if(qe[0]&32){Ve=Ze(Array(7));let he;for(he=0;he<Ve.length;he+=1){const We=_a(A,Ve,he);Ie[he]?Ie[he].p(We,qe):(Ie[he]=Ca(We),Ie[he].c(),Ie[he].m(we,null))}for(;he<Ie.length;he+=1)Ie[he].d(1);Ie.length=Ve.length}if(qe[0]&18829){ye=Ze(Array(6));let he;for(he=0;he<ye.length;he+=1){const We=ga(A,ye,he);G[he]?G[he].p(We,qe):(G[he]=Oa(We),G[he].c(),G[he].m(n,ge))}for(;he<G.length;he+=1)G[he].d(1);G.length=ye.length}const Be={};qe[0]&2&&(Be.timePrecision=A[1]),!ue&&qe[0]&16&&(ue=!0,Be.browseDate=A[4],Pn(()=>ue=!1)),be.$set(Be),Me&&Me.p&&(!Ee||qe[0]&1048576)&&jo(Me,ze,A,A[20],Ee?zo(ze,A[20],qe,null):Vo(A[20]),null)},i(A){Ee||(rt(be.$$.fragment,A),rt(Me,A),Ee=!0)},o(A){st(be.$$.fragment,A),st(Me,A),Ee=!1},d(A){A&&b(e),Lt(N,A),Lt(_e,A),Lt($,A),Lt(de,A),Lt(Ie,A),Lt(G,A),Ht(be),Me&&Me.d(A),oe=!1,kn(Ae)}}}function wn(i){return new Date(i.getTime())}function zr(i,e,n){return i>n?wn(n):i<e?wn(e):wn(i)}function Di(i,e,n){const r=zr(i,e,n);return r.getTime()!==i.getTime()&&(i=new Date(r.getFullYear(),r.getMonth(),r.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()),i=zr(i,e,n)),i}function Ia(i,e){let n=[];for(let r=i.getFullYear();r<=e.getFullYear();r++)n.push(r);return n}function Oi(i,e,n){const r=new Date(i.year,i.month,i.number),l=new Date(e.getFullYear(),e.getMonth(),e.getDate()),c=new Date(n.getFullYear(),n.getMonth(),n.getDate());return r>=l&&r<=c}function Vl(i,e,n){let r,l,c,u,{$$slots:g={},$$scope:_}=e;const m=Uo();let{value:v=null}=e;function k(w){w.getTime()!==(v==null?void 0:v.getTime())&&(n(4,E=zr(w,I,X)),n(0,v=wn(E)))}function R(w){w.getTime()!==(v==null?void 0:v.getTime())&&(n(4,E=Di(w,I,X)),n(0,v=wn(E)))}function U(w){n(4,E=Di(w,I,X)),!se&&v&&k(E)}function le(w){return n(4,E=zr(w,I,X)),v&&k(E),E}const x=new Date,q=new Date;let{timePrecision:B=null}=e,{min:I=new Date(q.getFullYear()-20,0,1)}=e,{max:X=new Date(q.getFullYear(),11,31,23,59,59,999)}=e,E=wn(v||Di(q,I,X));function Z(w){E.getTime()!==(w==null?void 0:w.getTime())&&n(4,E=w?wn(w):E)}let te=Ia(I,X),{locale:J={}}=e,{browseWithoutSelecting:se=!1}=e;function me(w){E.setFullYear(w),U(E)}function we(w){let $=E.getFullYear();w===12?(w=0,$++):w===-1&&(w=11,$--);const Te=fr($,w),de=Math.min(E.getDate(),Te);U(new Date($,w,de,E.getHours(),E.getMinutes(),E.getSeconds(),E.getMilliseconds()))}function Ne(w){Oi(w,I,X)&&(E.setFullYear(0),E.setMonth(0),E.setDate(1),E.setFullYear(w.year),E.setMonth(w.month),E.setDate(w.number),R(E),m("select",wn(E)))}function ge(w){if(w.shiftKey&&w.key==="ArrowUp")me(E.getFullYear()-1);else if(w.shiftKey&&w.key==="ArrowDown")me(E.getFullYear()+1);else if(w.shiftKey&&w.key==="ArrowLeft")we(E.getMonth()-1);else if(w.shiftKey&&w.key==="ArrowRight")we(E.getMonth()+1);else return!1;return w.preventDefault(),!0}function be(w){if(w.shiftKey||w.altKey){ge(w);return}else if(w.key==="ArrowUp")me(E.getFullYear()-1);else if(w.key==="ArrowDown")me(E.getFullYear()+1);else if(w.key==="ArrowLeft")we(E.getMonth()-1);else if(w.key==="ArrowRight")we(E.getMonth()+1);else{ge(w);return}w.preventDefault()}function ue(w){if(w.shiftKey||w.altKey){ge(w);return}else if(w.key==="ArrowUp"||w.key==="ArrowLeft")we(E.getMonth()-1);else if(w.key==="ArrowDown"||w.key==="ArrowRight")we(E.getMonth()+1);else{ge(w);return}w.preventDefault()}function Oe(w){var Te,de;let $=w.shiftKey||w.altKey;if(!(((Te=w.target)==null?void 0:Te.tagName)==="SELECT"||((de=w.target)==null?void 0:de.tagName)==="SPAN")){if($){ge(w);return}else if(w.key==="ArrowUp")E.setDate(E.getDate()-7),R(E);else if(w.key==="ArrowDown")E.setDate(E.getDate()+7),R(E);else if(w.key==="ArrowLeft")E.setDate(E.getDate()-1),R(E);else if(w.key==="ArrowRight")E.setDate(E.getDate()+1),R(E);else if(w.key==="Enter")k(E),m("select",wn(E));else return;w.preventDefault()}}function Ee(w){kl.call(this,i,w)}const oe=()=>we(E.getMonth()-1),Ae=w=>we(parseInt(w.currentTarget.value)),O=w=>me(parseInt(w.currentTarget.value)),N=()=>we(E.getMonth()+1),Y=w=>Ne(w);function _e(w){E=w,n(4,E)}return i.$$set=w=>{"value"in w&&n(0,v=w.value),"timePrecision"in w&&n(1,B=w.timePrecision),"min"in w&&n(2,I=w.min),"max"in w&&n(3,X=w.max),"locale"in w&&n(18,J=w.locale),"browseWithoutSelecting"in w&&n(19,se=w.browseWithoutSelecting),"$$scope"in w&&n(20,_=w.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&13&&(v&&v>X?k(X):v&&v<I&&k(I)),i.$$.dirty[0]&1&&Z(v),i.$$.dirty[0]&12&&n(6,te=Ia(I,X)),i.$$.dirty[0]&262144&&n(5,r=qo(J)),i.$$.dirty[0]&16&&n(9,l=E.getFullYear()),i.$$.dirty[0]&16&&n(8,c=E.getMonth()),i.$$.dirty[0]&48&&n(7,u=Nl(E,r.weekStartsOn))},[v,B,I,X,E,r,te,u,c,l,le,x,me,we,Ne,be,ue,Oe,J,se,_,g,Ee,oe,Ae,O,N,Y,_e]}class zl extends ln{constructor(e){super(),sn(this,e,Vl,jl,rn,{value:0,timePrecision:1,min:2,max:3,locale:18,browseWithoutSelecting:19},null,[-1,-1])}}function Ul(i){return i<.5?4*i*i*i:.5*Math.pow(2*i-2,3)+1}function Hl(i){const e=i-1;return e*e*e+1}function ql(i,{delay:e=0,duration:n=400,easing:r=Hl,x:l=0,y:c=0,opacity:u=0}={}){const g=getComputedStyle(i),_=+g.opacity,m=g.transform==="none"?"":g.transform,v=_*(1-u),[k,R]=ca(l),[U,le]=ca(c);return{delay:e,duration:n,easing:r,css:(x,q)=>`
			transform: ${m} translate(${(1-x)*k}${R}, ${(1-x)*U}${le});
			opacity: ${_-v*q}`}}function Pa(i,e,n){let r="",l=!0;n=n||new Date(2020,0,1,0,0,0,0);let c=n.getFullYear(),u=n.getMonth(),g=n.getDate(),_=n.getHours(),m=n.getMinutes(),v=n.getSeconds();const k=n.getMilliseconds();function R(B){for(let I=0;I<B.length;I++)if(i.startsWith(B[I]))i=i.slice(1);else{l=!1,i.length===0&&(r=B.slice(I));return}}function U(B,I,X){const E=i.match(B);if(E!=null&&E[0]){i=i.slice(E[0].length);const Z=parseInt(E[0]);return Z>X||Z<I?(l=!1,null):Z}else return l=!1,null}function le(B){const I=B.findIndex(X=>X.toLowerCase()===i.slice(0,X.length).toLowerCase());return I>=0?(i=i.slice(B[I].length),I):(l=!1,null)}function x(B){if(typeof B=="string")R(B);else if(B.id==="yy"){const I=U(/^[0-9]{2}/,0,99);I!==null&&(c=2e3+I)}else if(B.id==="yyyy"){const I=U(/^[0-9]{4}/,0,9999);I!==null&&(c=I)}else if(B.id==="MM"){const I=U(/^[0-9]{2}/,1,12);I!==null&&(u=I-1)}else if(B.id==="MMM"){const I=le(B.allowedValues||[]);I!==null&&(u=I)}else if(B.id==="dd"){const I=U(/^[0-9]{2}/,1,31);I!==null&&(g=I)}else if(B.id==="HH"){const I=U(/^[0-9]{2}/,0,23);I!==null&&(_=I)}else if(B.id==="mm"){const I=U(/^[0-9]{2}/,0,59);I!==null&&(m=I)}else if(B.id==="ss"){const I=U(/^[0-9]{2}/,0,59);I!==null&&(v=I)}}for(const B of e)if(x(B),!l)break;const q=fr(c,u);return g>q&&(l=!1),{date:l?new Date(c,u,g,_,m,v,k):null,missingPunctuation:r}}function or(i){return("0"+i.toString()).slice(-2)}function xl(i,e){if(i.startsWith("yyyy"))return{id:"yyyy",toString:n=>n.getFullYear().toString()};if(i.startsWith("yy"))return{id:"yy",toString:n=>n.getFullYear().toString().slice(-2)};if(i.startsWith("MMM"))return{id:"MMM",allowedValues:e.shortMonths,toString:n=>e.shortMonths[n.getMonth()]};if(i.startsWith("MM"))return{id:"MM",toString:n=>or(n.getMonth()+1)};if(i.startsWith("dd"))return{id:"dd",toString:n=>or(n.getDate())};if(i.startsWith("HH"))return{id:"HH",toString:n=>or(n.getHours())};if(i.startsWith("mm"))return{id:"mm",toString:n=>or(n.getMinutes())};if(i.startsWith("ss"))return{id:"ss",toString:n=>or(n.getSeconds())}}function Ma(i,e={}){const n=qo(e),r=[];for(;i.length>0;){const l=xl(i,n);l?(r.push(l),i=i.slice(l.id.length)):typeof r[r.length-1]=="string"?(r[r.length-1]+=i[0],i=i.slice(1)):(r.push(i[0]),i=i.slice(1))}return r}function La(i){let e,n,r,l,c=`${i[18]}px`,u;function g(m){i[34](m)}let _={min:i[3],max:i[4],locale:i[10],browseWithoutSelecting:i[11],timePrecision:i[12],$$slots:{default:[Wl]},$$scope:{ctx:i}};return i[14]!==void 0&&(_.value=i[14]),n=new zl({props:_}),nn.push(()=>Mn(n,"value",g)),n.$on("focusout",i[21]),n.$on("select",i[23]),{c(){e=S("div"),Vt(n.$$.fragment),this.h()},l(m){e=T(m,"DIV",{class:!0});var v=H(e);zt(n.$$.fragment,v),v.forEach(b),this.h()},h(){h(e,"class","picker svelte-1vabmef"),Tt(e,"visible",i[2]),Tt(e,"above",i[17]),Ai(e,"--picker-left-position",c)},m(m,v){fe(m,e,v),Ut(n,e,null),i[35](e),u=!0},p(m,v){const k={};v[0]&8&&(k.min=m[3]),v[0]&16&&(k.max=m[4]),v[0]&1024&&(k.locale=m[10]),v[0]&2048&&(k.browseWithoutSelecting=m[11]),v[0]&4096&&(k.timePrecision=m[12]),v[1]&32&&(k.$$scope={dirty:v,ctx:m}),!r&&v[0]&16384&&(r=!0,k.value=m[14],Pn(()=>r=!1)),n.$set(k),(!u||v[0]&4)&&Tt(e,"visible",m[2]),(!u||v[0]&131072)&&Tt(e,"above",m[17]),v[0]&262144&&c!==(c=`${m[18]}px`)&&Ai(e,"--picker-left-position",c)},i(m){u||(rt(n.$$.fragment,m),m&&Vn(()=>{u&&(l||(l=fa(e,i[24],{},!0)),l.run(1))}),u=!0)},o(m){st(n.$$.fragment,m),m&&(l||(l=fa(e,i[24],{},!1)),l.run(0)),u=!1},d(m){m&&b(e),Ht(n),i[35](null),m&&l&&l.end()}}}function Wl(i){let e;const n=i[29].default,r=Fo(n,i,i[36],null);return{c(){r&&r.c()},l(l){r&&r.l(l)},m(l,c){r&&r.m(l,c),e=!0},p(l,c){r&&r.p&&(!e||c[1]&32)&&jo(r,n,l,l[36],e?zo(n,l[36],c,null):Vo(l[36]),null)},i(l){e||(rt(r,l),e=!0)},o(l){st(r,l),e=!1},d(l){r&&r.d(l)}}}function Gl(i){let e,n,r,l,c,u,g,_=i[2]&&!i[7]&&La(i);return{c(){e=S("div"),n=S("input"),r=ie(),_&&_.c(),this.h()},l(m){e=T(m,"DIV",{class:!0});var v=H(e);n=T(v,"INPUT",{type:!0,autocomplete:!0,id:!0,placeholder:!0,class:!0}),r=ae(v),_&&_.l(v),v.forEach(b),this.h()},h(){h(n,"type","text"),h(n,"autocomplete","off"),n.value=i[0],h(n,"id",i[5]),h(n,"placeholder",i[6]),n.disabled=i[7],n.required=i[8],h(n,"class","svelte-1vabmef"),Tt(n,"invalid",!i[1]),h(e,"class",l="date-time-field "+i[9]+" svelte-1vabmef")},m(m,v){fe(m,e,v),p(e,n),i[30](n),p(e,r),_&&_.m(e,null),c=!0,u||(g=[Ye(n,"focus",i[31]),Ye(n,"mousedown",i[32]),Ye(n,"input",i[33]),Ye(e,"focusout",i[21]),Ye(e,"keydown",i[22])],u=!0)},p(m,v){(!c||v[0]&1&&n.value!==m[0])&&(n.value=m[0]),(!c||v[0]&32)&&h(n,"id",m[5]),(!c||v[0]&64)&&h(n,"placeholder",m[6]),(!c||v[0]&128)&&(n.disabled=m[7]),(!c||v[0]&256)&&(n.required=m[8]),(!c||v[0]&2)&&Tt(n,"invalid",!m[1]),m[2]&&!m[7]?_?(_.p(m,v),v[0]&132&&rt(_,1)):(_=La(m),_.c(),rt(_,1),_.m(e,null)):_&&(zn(),st(_,1,1,()=>{_=null}),Un()),(!c||v[0]&512&&l!==(l="date-time-field "+m[9]+" svelte-1vabmef"))&&h(e,"class",l)},i(m){c||(rt(_),c=!0)},o(m){st(_),c=!1},d(m){m&&b(e),i[30](null),_&&_.d(),u=!1,kn(g)}}}function Yl(i,e,n){let r,l,{$$slots:c={},$$scope:u}=e;const g=Uo(),_=new Date,m=Lr(null);cr(i,m,G=>n(37,l=G));const v={subscribe:m.subscribe,set:G=>{G==null?(m.set(null),n(25,k=G)):G.getTime()!==(l==null?void 0:l.getTime())&&(m.set(G),n(25,k=G))}};cr(i,v,G=>n(14,r=G));let{value:k=null}=e,{min:R=new Date(_.getFullYear()-20,0,1)}=e,{max:U=new Date(_.getFullYear(),11,31,23,59,59,999)}=e,{id:le=null}=e,{placeholder:x="2020-12-31 23:00:00"}=e,{valid:q=!0}=e,{disabled:B=!1}=e,{required:I=!1}=e,{class:X=""}=e,{locale:E={}}=e,{format:Z="yyyy-MM-dd HH:mm:ss"}=e,te=Ma(Z,E);function J(G,ce){n(0,se=ma(G,ce))}let{text:se=ma(r,te)}=e;function me(G,ce){if(G.length){const ke=Pa(G,ce,r);ke.date!==null?(n(1,q=!0),v.set(ke.date)):n(1,q=!1)}else n(1,q=!0),k&&(n(25,k=null),v.set(null))}let{visible:we=!1}=e,{closeOnSelection:Ne=!1}=e,{browseWithoutSelecting:ge=!1}=e,{timePrecision:be=null}=e;function ue(G){(G==null?void 0:G.currentTarget)instanceof HTMLElement&&G.relatedTarget&&G.relatedTarget instanceof Node&&G.currentTarget.contains(G.relatedTarget)||n(2,we=!1)}function Oe(G){G.key==="Escape"&&we?(n(2,we=!1),G.preventDefault(),G.stopPropagation()):G.key==="Enter"&&(n(2,we=!we),G.preventDefault())}function Ee(G){g("select",G.detail),Ne&&n(2,we=!1)}let{dynamicPositioning:oe=!1}=e,Ae,O,N=!1,Y=null;function _e(){if(n(17,N=!1),n(18,Y=null),we&&O&&oe){const G=Ae.getBoundingClientRect(),ce=O.offsetWidth-G.width,ke=G.bottom+O.offsetHeight+5,ze=G.left+O.offsetWidth+5;if(ke>window.innerHeight&&n(17,N=!0),ze>window.innerWidth&&(n(18,Y=-ce),G.left<ce+5)){const A=window.innerWidth/2-O.offsetWidth/2;n(18,Y=A-G.left)}}}function w(G){return _e(),ql(G,{duration:200,easing:Ul,y:N?5:-5})}function $(G){nn[G?"unshift":"push"](()=>{Ae=G,n(15,Ae)})}const Te=()=>n(2,we=!0),de=()=>n(2,we=!0),Ve=G=>{if(G instanceof InputEvent&&G.inputType==="insertText"&&typeof G.data=="string"&&G.currentTarget.value===se+G.data){let ce=Pa(se,te,r);if(ce.missingPunctuation!==""&&!ce.missingPunctuation.startsWith(G.data)){n(0,se=se+ce.missingPunctuation+G.data);return}}n(0,se=G.currentTarget.value)};function Ie(G){r=G,v.set(r)}function ye(G){nn[G?"unshift":"push"](()=>{O=G,n(16,O)})}return i.$$set=G=>{"value"in G&&n(25,k=G.value),"min"in G&&n(3,R=G.min),"max"in G&&n(4,U=G.max),"id"in G&&n(5,le=G.id),"placeholder"in G&&n(6,x=G.placeholder),"valid"in G&&n(1,q=G.valid),"disabled"in G&&n(7,B=G.disabled),"required"in G&&n(8,I=G.required),"class"in G&&n(9,X=G.class),"locale"in G&&n(10,E=G.locale),"format"in G&&n(26,Z=G.format),"text"in G&&n(0,se=G.text),"visible"in G&&n(2,we=G.visible),"closeOnSelection"in G&&n(27,Ne=G.closeOnSelection),"browseWithoutSelecting"in G&&n(11,ge=G.browseWithoutSelecting),"timePrecision"in G&&n(12,be=G.timePrecision),"dynamicPositioning"in G&&n(28,oe=G.dynamicPositioning),"$$scope"in G&&n(36,u=G.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&33554432&&v.set(k),i.$$.dirty[0]&67109888&&n(13,te=Ma(Z,E)),i.$$.dirty[0]&24576&&J(r,te),i.$$.dirty[0]&8193&&me(se,te)},[se,q,we,R,U,le,x,B,I,X,E,ge,be,te,r,Ae,O,N,Y,m,v,ue,Oe,Ee,w,k,Z,Ne,oe,c,$,Te,de,Ve,Ie,ye,u]}class Yn extends ln{constructor(e){super(),sn(this,e,Yl,Gl,rn,{value:25,min:3,max:4,id:5,placeholder:6,valid:1,disabled:7,required:8,class:9,locale:10,format:26,text:0,visible:2,closeOnSelection:27,browseWithoutSelecting:11,timePrecision:12,dynamicPositioning:28},null,[-1,-1])}}var Ra=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xo(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Wo={exports:{}};(function(i,e){(function(n,r){i.exports=r()})(Ra,function(){var n=function(t,a){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var f in s)Object.prototype.hasOwnProperty.call(s,f)&&(o[f]=s[f])})(t,a)},r=function(){return(r=Object.assign||function(t){for(var a,o=1,s=arguments.length;o<s;o++)for(var f in a=arguments[o])Object.prototype.hasOwnProperty.call(a,f)&&(t[f]=a[f]);return t}).apply(this,arguments)};function l(t,a,o){for(var s,f=0,d=a.length;f<d;f++)!s&&f in a||((s=s||Array.prototype.slice.call(a,0,f))[f]=a[f]);return t.concat(s||Array.prototype.slice.call(a))}var c=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Ra,u=Object.keys,g=Array.isArray;function _(t,a){return typeof a!="object"||u(a).forEach(function(o){t[o]=a[o]}),t}typeof Promise>"u"||c.Promise||(c.Promise=Promise);var m=Object.getPrototypeOf,v={}.hasOwnProperty;function k(t,a){return v.call(t,a)}function R(t,a){typeof a=="function"&&(a=a(m(t))),(typeof Reflect>"u"?u:Reflect.ownKeys)(a).forEach(function(o){le(t,o,a[o])})}var U=Object.defineProperty;function le(t,a,o,s){U(t,a,_(o&&k(o,"get")&&typeof o.get=="function"?{get:o.get,set:o.set,configurable:!0}:{value:o,configurable:!0,writable:!0},s))}function x(t){return{from:function(a){return t.prototype=Object.create(a.prototype),le(t.prototype,"constructor",t),{extend:R.bind(null,t.prototype)}}}}var q=Object.getOwnPropertyDescriptor,B=[].slice;function I(t,a,o){return B.call(t,a,o)}function X(t,a){return a(t)}function E(t){if(!t)throw new Error("Assertion Failed")}function Z(t){c.setImmediate?setImmediate(t):setTimeout(t,0)}function te(t,a){if(typeof a=="string"&&k(t,a))return t[a];if(!a)return t;if(typeof a!="string"){for(var o=[],s=0,f=a.length;s<f;++s){var d=te(t,a[s]);o.push(d)}return o}var y=a.indexOf(".");if(y!==-1){var D=t[a.substr(0,y)];return D==null?void 0:te(D,a.substr(y+1))}}function J(t,a,o){if(t&&a!==void 0&&!("isFrozen"in Object&&Object.isFrozen(t)))if(typeof a!="string"&&"length"in a){E(typeof o!="string"&&"length"in o);for(var s=0,f=a.length;s<f;++s)J(t,a[s],o[s])}else{var d,y,D=a.indexOf(".");D!==-1?(d=a.substr(0,D),(y=a.substr(D+1))===""?o===void 0?g(t)&&!isNaN(parseInt(d))?t.splice(d,1):delete t[d]:t[d]=o:J(D=!(D=t[d])||!k(t,d)?t[d]={}:D,y,o)):o===void 0?g(t)&&!isNaN(parseInt(a))?t.splice(a,1):delete t[a]:t[a]=o}}function se(t){var a,o={};for(a in t)k(t,a)&&(o[a]=t[a]);return o}var me=[].concat;function we(t){return me.apply([],t)}var Sn="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(we([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(a){return a+t+"Array"})}))).filter(function(t){return c[t]}),Ne=new Set(Sn.map(function(t){return c[t]})),ge=null;function be(t){return ge=new WeakMap,t=function a(o){if(!o||typeof o!="object")return o;var s=ge.get(o);if(s)return s;if(g(o)){s=[],ge.set(o,s);for(var f=0,d=o.length;f<d;++f)s.push(a(o[f]))}else if(Ne.has(o.constructor))s=o;else{var y,D=m(o);for(y in s=D===Object.prototype?{}:Object.create(D),ge.set(o,s),o)k(o,y)&&(s[y]=a(o[y]))}return s}(t),ge=null,t}var ue={}.toString;function Oe(t){return ue.call(t).slice(8,-1)}var Ee=typeof Symbol<"u"?Symbol.iterator:"@@iterator",oe=typeof Ee=="symbol"?function(t){var a;return t!=null&&(a=t[Ee])&&a.apply(t)}:function(){return null};function Ae(t,a){return a=t.indexOf(a),0<=a&&t.splice(a,1),0<=a}var O={};function N(t){var a,o,s,f;if(arguments.length===1){if(g(t))return t.slice();if(this===O&&typeof t=="string")return[t];if(f=oe(t)){for(o=[];!(s=f.next()).done;)o.push(s.value);return o}if(t==null)return[t];if(typeof(a=t.length)!="number")return[t];for(o=new Array(a);a--;)o[a]=t[a];return o}for(a=arguments.length,o=new Array(a);a--;)o[a]=arguments[a];return o}var Y=typeof Symbol<"u"?function(t){return t[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},It=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],un=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(It),_e={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function w(t,a){this.name=t,this.message=a}function $(t,a){return t+". Errors: "+Object.keys(a).map(function(o){return a[o].toString()}).filter(function(o,s,f){return f.indexOf(o)===s}).join(`
`)}function Te(t,a,o,s){this.failures=a,this.failedKeys=s,this.successCount=o,this.message=$(t,a)}function de(t,a){this.name="BulkError",this.failures=Object.keys(a).map(function(o){return a[o]}),this.failuresByPos=a,this.message=$(t,this.failures)}x(w).from(Error).extend({toString:function(){return this.name+": "+this.message}}),x(Te).from(w),x(de).from(w);var Ve=un.reduce(function(t,a){return t[a]=a+"Error",t},{}),Ie=w,ye=un.reduce(function(t,a){var o=a+"Error";function s(f,d){this.name=o,f?typeof f=="string"?(this.message="".concat(f).concat(d?`
 `+d:""),this.inner=d||null):typeof f=="object"&&(this.message="".concat(f.name," ").concat(f.message),this.inner=f):(this.message=_e[a]||o,this.inner=null)}return x(s).from(Ie),t[a]=s,t},{});ye.Syntax=SyntaxError,ye.Type=TypeError,ye.Range=RangeError;var G=It.reduce(function(t,a){return t[a+"Error"]=ye[a],t},{}),ce=un.reduce(function(t,a){return["Syntax","Type","Range"].indexOf(a)===-1&&(t[a+"Error"]=ye[a]),t},{});function ke(){}function ze(t){return t}function Me(t,a){return t==null||t===ze?a:function(o){return a(t(o))}}function A(t,a){return function(){t.apply(this,arguments),a.apply(this,arguments)}}function qe(t,a){return t===ke?a:function(){var o=t.apply(this,arguments);o!==void 0&&(arguments[0]=o);var s=this.onsuccess,f=this.onerror;this.onsuccess=null,this.onerror=null;var d=a.apply(this,arguments);return s&&(this.onsuccess=this.onsuccess?A(s,this.onsuccess):s),f&&(this.onerror=this.onerror?A(f,this.onerror):f),d!==void 0?d:o}}function Be(t,a){return t===ke?a:function(){t.apply(this,arguments);var o=this.onsuccess,s=this.onerror;this.onsuccess=this.onerror=null,a.apply(this,arguments),o&&(this.onsuccess=this.onsuccess?A(o,this.onsuccess):o),s&&(this.onerror=this.onerror?A(s,this.onerror):s)}}function he(t,a){return t===ke?a:function(o){var s=t.apply(this,arguments);_(o,s);var f=this.onsuccess,d=this.onerror;return this.onsuccess=null,this.onerror=null,o=a.apply(this,arguments),f&&(this.onsuccess=this.onsuccess?A(f,this.onsuccess):f),d&&(this.onerror=this.onerror?A(d,this.onerror):d),s===void 0?o===void 0?void 0:o:_(s,o)}}function We(t,a){return t===ke?a:function(){return a.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function it(t,a){return t===ke?a:function(){var o=t.apply(this,arguments);if(o&&typeof o.then=="function"){for(var s=this,f=arguments.length,d=new Array(f);f--;)d[f]=arguments[f];return o.then(function(){return a.apply(s,d)})}return a.apply(this,arguments)}}ce.ModifyError=Te,ce.DexieError=w,ce.BulkError=de;var dt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Et(t){dt=t}var ut={},bt=100,Sn=typeof Promise>"u"?[]:function(){var t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,m(t),t];var a=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[a,m(a),t]}(),It=Sn[0],un=Sn[1],Sn=Sn[2],un=un&&un.then,ht=It&&It.constructor,Ct=!!Sn,Je=function(t,a){_n.push([t,a]),vn&&(queueMicrotask(Pe),vn=!1)},Xt=!0,vn=!0,Qt=[],Rt=[],Pt=ze,lt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ke,pgp:!1,env:{},finalize:ke},Fe=lt,_n=[],jt=0,pt=[];function De(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var a=this._PSD=Fe;if(typeof t!="function"){if(t!==ut)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&gt(this,this._value))}this._state=null,this._value=null,++a.ref,function o(s,f){try{f(function(d){if(s._state===null){if(d===s)throw new TypeError("A promise cannot be resolved with itself.");var y=s._lib&&Ce();d&&typeof d.then=="function"?o(s,function(D,L){d instanceof De?d._then(D,L):d.then(D,L)}):(s._state=!0,s._value=d,pe(s)),y&&vt()}},gt.bind(null,s))}catch(d){gt(s,d)}}(this,t)}var mt={get:function(){var t=Fe,a=dn;function o(s,f){var d=this,y=!t.global&&(t!==Fe||a!==dn),D=y&&!hn(),L=new De(function(P,j){ne(d,new _t(Ki(s,t,y,D),Ki(f,t,y,D),P,j,t))});return this._consoleTask&&(L._consoleTask=this._consoleTask),L}return o.prototype=ut,o},set:function(t){le(this,"then",t&&t.prototype===ut?mt:{get:function(){return t},set:mt.set})}};function _t(t,a,o,s,f){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof a=="function"?a:null,this.resolve=o,this.reject=s,this.psd=f}function gt(t,a){var o,s;Rt.push(a),t._state===null&&(o=t._lib&&Ce(),a=Pt(a),t._state=!1,t._value=a,s=t,Qt.some(function(f){return f._value===s._value})||Qt.push(s),pe(t),o&&vt())}function pe(t){var a=t._listeners;t._listeners=[];for(var o=0,s=a.length;o<s;++o)ne(t,a[o]);var f=t._PSD;--f.ref||f.finalize(),jt===0&&(++jt,Je(function(){--jt==0&&Nt()},[]))}function ne(t,a){if(t._state!==null){var o=t._state?a.onFulfilled:a.onRejected;if(o===null)return(t._state?a.resolve:a.reject)(t._value);++a.psd.ref,++jt,Je(xe,[o,t,a])}else t._listeners.push(a)}function xe(t,a,o){try{var s,f=a._value;!a._state&&Rt.length&&(Rt=[]),s=dt&&a._consoleTask?a._consoleTask.run(function(){return t(f)}):t(f),a._state||Rt.indexOf(f)!==-1||function(d){for(var y=Qt.length;y;)if(Qt[--y]._value===d._value)return Qt.splice(y,1)}(a),o.resolve(s)}catch(d){o.reject(d)}finally{--jt==0&&Nt(),--o.psd.ref||o.psd.finalize()}}function Pe(){Ln(lt,function(){Ce()&&vt()})}function Ce(){var t=Xt;return vn=Xt=!1,t}function vt(){var t,a,o;do for(;0<_n.length;)for(t=_n,_n=[],o=t.length,a=0;a<o;++a){var s=t[a];s[0].apply(null,s[1])}while(0<_n.length);vn=Xt=!0}function Nt(){var t=Qt;Qt=[],t.forEach(function(s){s._PSD.onunhandled.call(null,s._value,s)});for(var a=pt.slice(0),o=a.length;o;)a[--o]()}function qt(t){return new De(ut,!1,t)}function at(t,a){var o=Fe;return function(){var s=Ce(),f=Fe;try{return Cn(o,!0),t.apply(this,arguments)}catch(d){a&&a(d)}finally{Cn(f,!1),s&&vt()}}}R(De.prototype,{then:mt,_then:function(t,a){ne(this,new _t(null,null,t,a,Fe))},catch:function(t){if(arguments.length===1)return this.then(null,t);var a=t,o=arguments[1];return typeof a=="function"?this.then(null,function(s){return(s instanceof a?o:qt)(s)}):this.then(null,function(s){return(s&&s.name===a?o:qt)(s)})},finally:function(t){return this.then(function(a){return De.resolve(t()).then(function(){return a})},function(a){return De.resolve(t()).then(function(){return qt(a)})})},timeout:function(t,a){var o=this;return t<1/0?new De(function(s,f){var d=setTimeout(function(){return f(new ye.Timeout(a))},t);o.then(s,f).finally(clearTimeout.bind(null,d))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&le(De.prototype,Symbol.toStringTag,"Dexie.Promise"),lt.env=Bi(),R(De,{all:function(){var t=N.apply(null,arguments).map(Mt);return new De(function(a,o){t.length===0&&a([]);var s=t.length;t.forEach(function(f,d){return De.resolve(f).then(function(y){t[d]=y,--s||a(t)},o)})})},resolve:function(t){return t instanceof De?t:t&&typeof t.then=="function"?new De(function(a,o){t.then(a,o)}):new De(ut,!0,t)},reject:qt,race:function(){var t=N.apply(null,arguments).map(Mt);return new De(function(a,o){t.map(function(s){return De.resolve(s).then(a,o)})})},PSD:{get:function(){return Fe},set:function(t){return Fe=t}},totalEchoes:{get:function(){return dn}},newPSD:tn,usePSD:Ln,scheduler:{get:function(){return Je},set:function(t){Je=t}},rejectionMapper:{get:function(){return Pt},set:function(t){Pt=t}},follow:function(t,a){return new De(function(o,s){return tn(function(f,d){var y=Fe;y.unhandleds=[],y.onunhandled=d,y.finalize=A(function(){var D,L=this;D=function(){L.unhandleds.length===0?f():d(L.unhandleds[0])},pt.push(function P(){D(),pt.splice(pt.indexOf(P),1)}),++jt,Je(function(){--jt==0&&Nt()},[])},y.finalize),t()},a,o,s)})}}),ht&&(ht.allSettled&&le(De,"allSettled",function(){var t=N.apply(null,arguments).map(Mt);return new De(function(a){t.length===0&&a([]);var o=t.length,s=new Array(o);t.forEach(function(f,d){return De.resolve(f).then(function(y){return s[d]={status:"fulfilled",value:y}},function(y){return s[d]={status:"rejected",reason:y}}).then(function(){return--o||a(s)})})})}),ht.any&&typeof AggregateError<"u"&&le(De,"any",function(){var t=N.apply(null,arguments).map(Mt);return new De(function(a,o){t.length===0&&o(new AggregateError([]));var s=t.length,f=new Array(s);t.forEach(function(d,y){return De.resolve(d).then(function(D){return a(D)},function(D){f[y]=D,--s||o(new AggregateError(f))})})})}));var wt={awaits:0,echoes:0,id:0},an=0,fn=[],en=0,dn=0,Dn=0;function tn(t,a,o,s){var f=Fe,d=Object.create(f);return d.parent=f,d.ref=0,d.global=!1,d.id=++Dn,lt.env,d.env=Ct?{Promise:De,PromiseProp:{value:De,configurable:!0,writable:!0},all:De.all,race:De.race,allSettled:De.allSettled,any:De.any,resolve:De.resolve,reject:De.reject}:{},a&&_(d,a),++f.ref,d.finalize=function(){--this.parent.ref||this.parent.finalize()},s=Ln(d,t,o,s),d.ref===0&&d.finalize(),s}function yt(){return wt.id||(wt.id=++an),++wt.awaits,wt.echoes+=bt,wt.id}function hn(){return!!wt.awaits&&(--wt.awaits==0&&(wt.id=0),wt.echoes=wt.awaits*bt,!0)}function Mt(t){return wt.echoes&&t&&t.constructor===ht?(yt(),t.then(function(a){return hn(),a},function(a){return hn(),At(a)})):t}function tl(){var t=fn[fn.length-1];fn.pop(),Cn(t,!1)}function Cn(t,a){var o,s=Fe;(a?!wt.echoes||en++&&t===Fe:!en||--en&&t===Fe)||queueMicrotask(a?(function(f){++dn,wt.echoes&&--wt.echoes!=0||(wt.echoes=wt.awaits=wt.id=0),fn.push(Fe),Cn(f,!0)}).bind(null,t):tl),t!==Fe&&(Fe=t,s===lt&&(lt.env=Bi()),Ct&&(o=lt.env.Promise,a=t.env,(s.global||t.global)&&(Object.defineProperty(c,"Promise",a.PromiseProp),o.all=a.all,o.race=a.race,o.resolve=a.resolve,o.reject=a.reject,a.allSettled&&(o.allSettled=a.allSettled),a.any&&(o.any=a.any))))}function Bi(){var t=c.Promise;return Ct?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(c,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject}:{}}function Ln(t,a,o,s,f){var d=Fe;try{return Cn(t,!0),a(o,s,f)}finally{Cn(d,!1)}}function Ki(t,a,o,s){return typeof t!="function"?t:function(){var f=Fe;o&&yt(),Cn(a,!0);try{return t.apply(this,arguments)}finally{Cn(f,!1),s&&queueMicrotask(hn)}}}function xr(t){Promise===ht&&wt.echoes===0?en===0?t():enqueueNativeMicroTask(t):setTimeout(t,0)}(""+un).indexOf("[native code]")===-1&&(yt=hn=ke);var At=De.reject,Rn="ï¿¿",En="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Fi="String expected.",Hn=[],hr="__dbnames",Wr="readonly",Gr="readwrite";function Nn(t,a){return t?a?function(){return t.apply(this,arguments)&&a.apply(this,arguments)}:t:a}var ji={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function pr(t){return typeof t!="string"||/\./.test(t)?function(a){return a}:function(a){return a[t]===void 0&&t in a&&delete(a=be(a))[t],a}}function Vi(){throw ye.Type()}function ft(t,a){try{var o=zi(t),s=zi(a);if(o!==s)return o==="Array"?1:s==="Array"?-1:o==="binary"?1:s==="binary"?-1:o==="string"?1:s==="string"?-1:o==="Date"?1:s!=="Date"?NaN:-1;switch(o){case"number":case"Date":case"string":return a<t?1:t<a?-1:0;case"binary":return function(f,d){for(var y=f.length,D=d.length,L=y<D?y:D,P=0;P<L;++P)if(f[P]!==d[P])return f[P]<d[P]?-1:1;return y===D?0:y<D?-1:1}(Ui(t),Ui(a));case"Array":return function(f,d){for(var y=f.length,D=d.length,L=y<D?y:D,P=0;P<L;++P){var j=ft(f[P],d[P]);if(j!==0)return j}return y===D?0:y<D?-1:1}(t,a)}}catch{}return NaN}function zi(t){var a=typeof t;return a!="object"?a:ArrayBuffer.isView(t)?"binary":(t=Oe(t),t==="ArrayBuffer"?"binary":t)}function Ui(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}var Hi=(St.prototype._trans=function(t,a,o){var s=this._tx||Fe.trans,f=this.name,d=dt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(t==="readonly"?"read":"write"," ").concat(this.name));function y(P,j,C){if(!C.schema[f])throw new ye.NotFound("Table "+f+" not part of transaction");return a(C.idbtrans,C)}var D=Ce();try{var L=s&&s.db._novip===this.db._novip?s===Fe.trans?s._promise(t,y,o):tn(function(){return s._promise(t,y,o)},{trans:s,transless:Fe.transless||Fe}):function P(j,C,V,M){if(j.idbdb&&(j._state.openComplete||Fe.letThrough||j._vip)){var F=j._createTransaction(C,V,j._dbSchema);try{F.create(),j._state.PR1398_maxLoop=3}catch(z){return z.name===Ve.InvalidState&&j.isOpen()&&0<--j._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),j.close({disableAutoOpen:!1}),j.open().then(function(){return P(j,C,V,M)})):At(z)}return F._promise(C,function(z,K){return tn(function(){return Fe.trans=F,M(z,K,F)})}).then(function(z){if(C==="readwrite")try{F.idbtrans.commit()}catch{}return C==="readonly"?z:F._completion.then(function(){return z})})}if(j._state.openComplete)return At(new ye.DatabaseClosed(j._state.dbOpenError));if(!j._state.isBeingOpened){if(!j._state.autoOpen)return At(new ye.DatabaseClosed);j.open().catch(ke)}return j._state.dbReadyPromise.then(function(){return P(j,C,V,M)})}(this.db,t,[this.name],y);return d&&(L._consoleTask=d,L=L.catch(function(P){return console.trace(P),At(P)})),L}finally{D&&vt()}},St.prototype.get=function(t,a){var o=this;return t&&t.constructor===Object?this.where(t).first(a):t==null?At(new ye.Type("Invalid argument to Table.get()")):this._trans("readonly",function(s){return o.core.get({trans:s,key:t}).then(function(f){return o.hook.reading.fire(f)})}).then(a)},St.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(g(t))return new this.db.WhereClause(this,"[".concat(t.join("+"),"]"));var a=u(t);if(a.length===1)return this.where(a[0]).equals(t[a[0]]);var o=this.schema.indexes.concat(this.schema.primKey).filter(function(L){if(L.compound&&a.every(function(j){return 0<=L.keyPath.indexOf(j)})){for(var P=0;P<a.length;++P)if(a.indexOf(L.keyPath[P])===-1)return!1;return!0}return!1}).sort(function(L,P){return L.keyPath.length-P.keyPath.length})[0];if(o&&this.db._maxKey!==Rn){var y=o.keyPath.slice(0,a.length);return this.where(y).equals(y.map(function(P){return t[P]}))}!o&&dt&&console.warn("The query ".concat(JSON.stringify(t)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(a.join("+"),"]"));var s=this.schema.idxByName,f=this.db._deps.indexedDB;function d(L,P){return f.cmp(L,P)===0}var D=a.reduce(function(V,P){var j=V[0],C=V[1],V=s[P],M=t[P];return[j||V,j||!V?Nn(C,V&&V.multi?function(F){return F=te(F,P),g(F)&&F.some(function(z){return d(M,z)})}:function(F){return d(M,te(F,P))}):C]},[null,null]),y=D[0],D=D[1];return y?this.where(y.name).equals(t[y.keyPath]).filter(D):o?this.filter(D):this.where(a).equals("")},St.prototype.filter=function(t){return this.toCollection().and(t)},St.prototype.count=function(t){return this.toCollection().count(t)},St.prototype.offset=function(t){return this.toCollection().offset(t)},St.prototype.limit=function(t){return this.toCollection().limit(t)},St.prototype.each=function(t){return this.toCollection().each(t)},St.prototype.toArray=function(t){return this.toCollection().toArray(t)},St.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},St.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,g(t)?"[".concat(t.join("+"),"]"):t))},St.prototype.reverse=function(){return this.toCollection().reverse()},St.prototype.mapToClass=function(t){var a,o=this.db,s=this.name;function f(){return a!==null&&a.apply(this,arguments)||this}(this.schema.mappedClass=t).prototype instanceof Vi&&(function(L,P){if(typeof P!="function"&&P!==null)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function j(){this.constructor=L}n(L,P),L.prototype=P===null?Object.create(P):(j.prototype=P.prototype,new j)}(f,a=t),Object.defineProperty(f.prototype,"db",{get:function(){return o},enumerable:!1,configurable:!0}),f.prototype.table=function(){return s},t=f);for(var d=new Set,y=t.prototype;y;y=m(y))Object.getOwnPropertyNames(y).forEach(function(L){return d.add(L)});function D(L){if(!L)return L;var P,j=Object.create(t.prototype);for(P in L)if(!d.has(P))try{j[P]=L[P]}catch{}return j}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=D,this.hook("reading",D),t},St.prototype.defineClass=function(){return this.mapToClass(function(t){_(this,t)})},St.prototype.add=function(t,a){var o=this,s=this.schema.primKey,f=s.auto,d=s.keyPath,y=t;return d&&f&&(y=pr(d)(t)),this._trans("readwrite",function(D){return o.core.mutate({trans:D,type:"add",keys:a!=null?[a]:null,values:[y]})}).then(function(D){return D.numFailures?De.reject(D.failures[0]):D.lastResult}).then(function(D){if(d)try{J(t,d,D)}catch{}return D})},St.prototype.update=function(t,a){return typeof t!="object"||g(t)?this.where(":id").equals(t).modify(a):(t=te(t,this.schema.primKey.keyPath),t===void 0?At(new ye.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(t).modify(a))},St.prototype.put=function(t,a){var o=this,s=this.schema.primKey,f=s.auto,d=s.keyPath,y=t;return d&&f&&(y=pr(d)(t)),this._trans("readwrite",function(D){return o.core.mutate({trans:D,type:"put",values:[y],keys:a!=null?[a]:null})}).then(function(D){return D.numFailures?De.reject(D.failures[0]):D.lastResult}).then(function(D){if(d)try{J(t,d,D)}catch{}return D})},St.prototype.delete=function(t){var a=this;return this._trans("readwrite",function(o){return a.core.mutate({trans:o,type:"delete",keys:[t]})}).then(function(o){return o.numFailures?De.reject(o.failures[0]):void 0})},St.prototype.clear=function(){var t=this;return this._trans("readwrite",function(a){return t.core.mutate({trans:a,type:"deleteRange",range:ji})}).then(function(a){return a.numFailures?De.reject(a.failures[0]):void 0})},St.prototype.bulkGet=function(t){var a=this;return this._trans("readonly",function(o){return a.core.getMany({keys:t,trans:o}).then(function(s){return s.map(function(f){return a.hook.reading.fire(f)})})})},St.prototype.bulkAdd=function(t,a,o){var s=this,f=Array.isArray(a)?a:void 0,d=(o=o||(f?void 0:a))?o.allKeys:void 0;return this._trans("readwrite",function(y){var P=s.schema.primKey,D=P.auto,P=P.keyPath;if(P&&f)throw new ye.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(f&&f.length!==t.length)throw new ye.InvalidArgument("Arguments objects and keys must have the same length");var L=t.length,P=P&&D?t.map(pr(P)):t;return s.core.mutate({trans:y,type:"add",keys:f,values:P,wantResults:d}).then(function(F){var C=F.numFailures,V=F.results,M=F.lastResult,F=F.failures;if(C===0)return d?V:M;throw new de("".concat(s.name,".bulkAdd(): ").concat(C," of ").concat(L," operations failed"),F)})})},St.prototype.bulkPut=function(t,a,o){var s=this,f=Array.isArray(a)?a:void 0,d=(o=o||(f?void 0:a))?o.allKeys:void 0;return this._trans("readwrite",function(y){var P=s.schema.primKey,D=P.auto,P=P.keyPath;if(P&&f)throw new ye.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(f&&f.length!==t.length)throw new ye.InvalidArgument("Arguments objects and keys must have the same length");var L=t.length,P=P&&D?t.map(pr(P)):t;return s.core.mutate({trans:y,type:"put",keys:f,values:P,wantResults:d}).then(function(F){var C=F.numFailures,V=F.results,M=F.lastResult,F=F.failures;if(C===0)return d?V:M;throw new de("".concat(s.name,".bulkPut(): ").concat(C," of ").concat(L," operations failed"),F)})})},St.prototype.bulkUpdate=function(t){var a=this,o=this.core,s=t.map(function(y){return y.key}),f=t.map(function(y){return y.changes}),d=[];return this._trans("readwrite",function(y){return o.getMany({trans:y,keys:s,cache:"clone"}).then(function(D){var L=[],P=[];t.forEach(function(C,V){var M=C.key,F=C.changes,z=D[V];if(z){for(var K=0,W=Object.keys(F);K<W.length;K++){var Q=W[K],ee=F[Q];if(Q===a.schema.primKey.keyPath){if(ft(ee,M)!==0)throw new ye.Constraint("Cannot update primary key in bulkUpdate()")}else J(z,Q,ee)}d.push(V),L.push(M),P.push(z)}});var j=L.length;return o.mutate({trans:y,type:"put",keys:L,values:P,updates:{keys:s,changeSpecs:f}}).then(function(C){var V=C.numFailures,M=C.failures;if(V===0)return j;for(var F=0,z=Object.keys(M);F<z.length;F++){var K,W=z[F],Q=d[Number(W)];Q!=null&&(K=M[W],delete M[W],M[Q]=K)}throw new de("".concat(a.name,".bulkUpdate(): ").concat(V," of ").concat(j," operations failed"),M)})})})},St.prototype.bulkDelete=function(t){var a=this,o=t.length;return this._trans("readwrite",function(s){return a.core.mutate({trans:s,type:"delete",keys:t})}).then(function(y){var f=y.numFailures,d=y.lastResult,y=y.failures;if(f===0)return d;throw new de("".concat(a.name,".bulkDelete(): ").concat(f," of ").concat(o," operations failed"),y)})},St);function St(){}function Jn(t){function a(y,D){if(D){for(var L=arguments.length,P=new Array(L-1);--L;)P[L-1]=arguments[L];return o[y].subscribe.apply(null,P),t}if(typeof y=="string")return o[y]}var o={};a.addEventType=d;for(var s=1,f=arguments.length;s<f;++s)d(arguments[s]);return a;function d(y,D,L){if(typeof y!="object"){var P;D=D||We;var j={subscribers:[],fire:L=L||ke,subscribe:function(C){j.subscribers.indexOf(C)===-1&&(j.subscribers.push(C),j.fire=D(j.fire,C))},unsubscribe:function(C){j.subscribers=j.subscribers.filter(function(V){return V!==C}),j.fire=j.subscribers.reduce(D,L)}};return o[y]=a[y]=j}u(P=y).forEach(function(C){var V=P[C];if(g(V))d(C,P[C][0],P[C][1]);else{if(V!=="asap")throw new ye.InvalidArgument("Invalid event config");var M=d(C,ze,function(){for(var F=arguments.length,z=new Array(F);F--;)z[F]=arguments[F];M.subscribers.forEach(function(K){Z(function(){K.apply(null,z)})})})}})}}function Qn(t,a){return x(a).from({prototype:t}),a}function qn(t,a){return!(t.filter||t.algorithm||t.or)&&(a?t.justLimit:!t.replayFilter)}function Yr(t,a){t.filter=Nn(t.filter,a)}function Zr(t,a,o){var s=t.replayFilter;t.replayFilter=s?function(){return Nn(s(),a())}:a,t.justLimit=o&&!s}function mr(t,a){if(t.isPrimKey)return a.primaryKey;var o=a.getIndexByKeyPath(t.index);if(!o)throw new ye.Schema("KeyPath "+t.index+" on object store "+a.name+" is not indexed");return o}function qi(t,a,o){var s=mr(t,a.schema);return a.openCursor({trans:o,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:s,range:t.range}})}function gr(t,a,o,s){var f=t.replayFilter?Nn(t.filter,t.replayFilter()):t.filter;if(t.or){var d={},y=function(D,L,P){var j,C;f&&!f(L,P,function(V){return L.stop(V)},function(V){return L.fail(V)})||((C=""+(j=L.primaryKey))=="[object ArrayBuffer]"&&(C=""+new Uint8Array(j)),k(d,C)||(d[C]=!0,a(D,L,P)))};return Promise.all([t.or._iterate(y,o),xi(qi(t,s,o),t.algorithm,y,!t.keysOnly&&t.valueMapper)])}return xi(qi(t,s,o),Nn(t.algorithm,f),a,!t.keysOnly&&t.valueMapper)}function xi(t,a,o,s){var f=at(s?function(d,y,D){return o(s(d),y,D)}:o);return t.then(function(d){if(d)return d.start(function(){var y=function(){return d.continue()};a&&!a(d,function(D){return y=D},function(D){d.stop(D),y=ke},function(D){d.fail(D),y=ke})||f(d.value,d,function(D){return y=D}),y()})})}var Sn=Symbol(),$n=(Wi.prototype.execute=function(t){if(this.add!==void 0){var a=this.add;if(g(a))return l(l([],g(t)?t:[],!0),a).sort();if(typeof a=="number")return(Number(t)||0)+a;if(typeof a=="bigint")try{return BigInt(t)+a}catch{return BigInt(0)+a}throw new TypeError("Invalid term ".concat(a))}if(this.remove!==void 0){var o=this.remove;if(g(o))return g(t)?t.filter(function(s){return!o.includes(s)}).sort():[];if(typeof o=="number")return Number(t)-o;if(typeof o=="bigint")try{return BigInt(t)-o}catch{return BigInt(0)-o}throw new TypeError("Invalid subtrahend ".concat(o))}return a=(a=this.replacePrefix)===null||a===void 0?void 0:a[0],a&&typeof t=="string"&&t.startsWith(a)?this.replacePrefix[1]+t.substring(a.length):t},Wi);function Wi(t){Object.assign(this,t)}var nl=(ct.prototype._read=function(t,a){var o=this._ctx;return o.error?o.table._trans(null,At.bind(null,o.error)):o.table._trans("readonly",t).then(a)},ct.prototype._write=function(t){var a=this._ctx;return a.error?a.table._trans(null,At.bind(null,a.error)):a.table._trans("readwrite",t,"locked")},ct.prototype._addAlgorithm=function(t){var a=this._ctx;a.algorithm=Nn(a.algorithm,t)},ct.prototype._iterate=function(t,a){return gr(this._ctx,t,a,this._ctx.table.core)},ct.prototype.clone=function(t){var a=Object.create(this.constructor.prototype),o=Object.create(this._ctx);return t&&_(o,t),a._ctx=o,a},ct.prototype.raw=function(){return this._ctx.valueMapper=null,this},ct.prototype.each=function(t){var a=this._ctx;return this._read(function(o){return gr(a,t,o,a.table.core)})},ct.prototype.count=function(t){var a=this;return this._read(function(o){var s=a._ctx,f=s.table.core;if(qn(s,!0))return f.count({trans:o,query:{index:mr(s,f.schema),range:s.range}}).then(function(y){return Math.min(y,s.limit)});var d=0;return gr(s,function(){return++d,!1},o,f).then(function(){return d})}).then(t)},ct.prototype.sortBy=function(t,a){var o=t.split(".").reverse(),s=o[0],f=o.length-1;function d(L,P){return P?d(L[o[P]],P-1):L[s]}var y=this._ctx.dir==="next"?1:-1;function D(L,P){return L=d(L,f),P=d(P,f),L<P?-y:P<L?y:0}return this.toArray(function(L){return L.sort(D)}).then(a)},ct.prototype.toArray=function(t){var a=this;return this._read(function(o){var s=a._ctx;if(s.dir==="next"&&qn(s,!0)&&0<s.limit){var f=s.valueMapper,d=mr(s,s.table.core.schema);return s.table.core.query({trans:o,limit:s.limit,values:!0,query:{index:d,range:s.range}}).then(function(D){return D=D.result,f?D.map(f):D})}var y=[];return gr(s,function(D){return y.push(D)},o,s.table.core).then(function(){return y})},t)},ct.prototype.offset=function(t){var a=this._ctx;return t<=0||(a.offset+=t,qn(a)?Zr(a,function(){var o=t;return function(s,f){return o===0||(o===1?--o:f(function(){s.advance(o),o=0}),!1)}}):Zr(a,function(){var o=t;return function(){return--o<0}})),this},ct.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),Zr(this._ctx,function(){var a=t;return function(o,s,f){return--a<=0&&s(f),0<=a}},!0),this},ct.prototype.until=function(t,a){return Yr(this._ctx,function(o,s,f){return!t(o.value)||(s(f),a)}),this},ct.prototype.first=function(t){return this.limit(1).toArray(function(a){return a[0]}).then(t)},ct.prototype.last=function(t){return this.reverse().first(t)},ct.prototype.filter=function(t){var a;return Yr(this._ctx,function(o){return t(o.value)}),(a=this._ctx).isMatch=Nn(a.isMatch,t),this},ct.prototype.and=function(t){return this.filter(t)},ct.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},ct.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},ct.prototype.desc=function(){return this.reverse()},ct.prototype.eachKey=function(t){var a=this._ctx;return a.keysOnly=!a.isMatch,this.each(function(o,s){t(s.key,s)})},ct.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},ct.prototype.eachPrimaryKey=function(t){var a=this._ctx;return a.keysOnly=!a.isMatch,this.each(function(o,s){t(s.primaryKey,s)})},ct.prototype.keys=function(t){var a=this._ctx;a.keysOnly=!a.isMatch;var o=[];return this.each(function(s,f){o.push(f.key)}).then(function(){return o}).then(t)},ct.prototype.primaryKeys=function(t){var a=this._ctx;if(a.dir==="next"&&qn(a,!0)&&0<a.limit)return this._read(function(s){var f=mr(a,a.table.core.schema);return a.table.core.query({trans:s,values:!1,limit:a.limit,query:{index:f,range:a.range}})}).then(function(s){return s.result}).then(t);a.keysOnly=!a.isMatch;var o=[];return this.each(function(s,f){o.push(f.primaryKey)}).then(function(){return o}).then(t)},ct.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},ct.prototype.firstKey=function(t){return this.limit(1).keys(function(a){return a[0]}).then(t)},ct.prototype.lastKey=function(t){return this.reverse().firstKey(t)},ct.prototype.distinct=function(){var t=this._ctx,t=t.index&&t.table.schema.idxByName[t.index];if(!t||!t.multi)return this;var a={};return Yr(this._ctx,function(f){var s=f.primaryKey.toString(),f=k(a,s);return a[s]=!0,!f}),this},ct.prototype.modify=function(t){var a=this,o=this._ctx;return this._write(function(s){var f,d,y;y=typeof t=="function"?t:(f=u(t),d=f.length,function(K){for(var W=!1,Q=0;Q<d;++Q){var ee=f[Q],re=t[ee],ve=te(K,ee);re instanceof $n?(J(K,ee,re.execute(ve)),W=!0):ve!==re&&(J(K,ee,re),W=!0)}return W});function D(K,ee){var Q=ee.failures,ee=ee.numFailures;F+=K-ee;for(var re=0,ve=u(Q);re<ve.length;re++){var Ue=ve[re];M.push(Q[Ue])}}var L=o.table.core,P=L.schema.primaryKey,j=P.outbound,C=P.extractKey,V=a.db._options.modifyChunkSize||200,M=[],F=0,z=[];return a.clone().primaryKeys().then(function(K){function W(ee){var re=Math.min(V,K.length-ee);return L.getMany({trans:s,keys:K.slice(ee,ee+re),cache:"immutable"}).then(function(ve){for(var Ue=[],Se=[],je=j?[]:null,He=[],Ke=0;Ke<re;++Ke){var Qe=ve[Ke],$e={value:be(Qe),primKey:K[ee+Ke]};y.call($e,$e.value,$e)!==!1&&($e.value==null?He.push(K[ee+Ke]):j||ft(C(Qe),C($e.value))===0?(Se.push($e.value),j&&je.push(K[ee+Ke])):(He.push(K[ee+Ke]),Ue.push($e.value)))}return Promise.resolve(0<Ue.length&&L.mutate({trans:s,type:"add",values:Ue}).then(function(nt){for(var et in nt.failures)He.splice(parseInt(et),1);D(Ue.length,nt)})).then(function(){return(0<Se.length||Q&&typeof t=="object")&&L.mutate({trans:s,type:"put",keys:je,values:Se,criteria:Q,changeSpec:typeof t!="function"&&t,isAdditionalChunk:0<ee}).then(function(nt){return D(Se.length,nt)})}).then(function(){return(0<He.length||Q&&t===Jr)&&L.mutate({trans:s,type:"delete",keys:He,criteria:Q,isAdditionalChunk:0<ee}).then(function(nt){return D(He.length,nt)})}).then(function(){return K.length>ee+re&&W(ee+V)})})}var Q=qn(o)&&o.limit===1/0&&(typeof t!="function"||t===Jr)&&{index:o.index,range:o.range};return W(0).then(function(){if(0<M.length)throw new Te("Error modifying one or more objects",M,F,z);return K.length})})})},ct.prototype.delete=function(){var t=this._ctx,a=t.range;return qn(t)&&(t.isPrimKey||a.type===3)?this._write(function(o){var s=t.table.core.schema.primaryKey,f=a;return t.table.core.count({trans:o,query:{index:s,range:f}}).then(function(d){return t.table.core.mutate({trans:o,type:"deleteRange",range:f}).then(function(y){var D=y.failures;if(y.lastResult,y.results,y=y.numFailures,y)throw new Te("Could not delete some values",Object.keys(D).map(function(L){return D[L]}),d-y);return d-y})})}):this.modify(Jr)},ct);function ct(){}var Jr=function(t,a){return a.value=null};function rl(t,a){return t<a?-1:t===a?0:1}function il(t,a){return a<t?-1:t===a?0:1}function on(t,a,o){return t=t instanceof Yi?new t.Collection(t):t,t._ctx.error=new(o||TypeError)(a),t}function xn(t){return new t.Collection(t,function(){return Gi("")}).limit(0)}function vr(t,a,o,s){var f,d,y,D,L,P,j,C=o.length;if(!o.every(function(F){return typeof F=="string"}))return on(t,Fi);function V(F){f=F==="next"?function(K){return K.toUpperCase()}:function(K){return K.toLowerCase()},d=F==="next"?function(K){return K.toLowerCase()}:function(K){return K.toUpperCase()},y=F==="next"?rl:il;var z=o.map(function(K){return{lower:d(K),upper:f(K)}}).sort(function(K,W){return y(K.lower,W.lower)});D=z.map(function(K){return K.upper}),L=z.map(function(K){return K.lower}),j=(P=F)==="next"?"":s}V("next"),t=new t.Collection(t,function(){return An(D[0],L[C-1]+s)}),t._ondirectionchange=function(F){V(F)};var M=0;return t._addAlgorithm(function(F,z,K){var W=F.key;if(typeof W!="string")return!1;var Q=d(W);if(a(Q,L,M))return!0;for(var ee=null,re=M;re<C;++re){var ve=function(Ue,Se,je,He,Ke,Qe){for(var $e=Math.min(Ue.length,He.length),nt=-1,et=0;et<$e;++et){var pn=Se[et];if(pn!==He[et])return Ke(Ue[et],je[et])<0?Ue.substr(0,et)+je[et]+je.substr(et+1):Ke(Ue[et],He[et])<0?Ue.substr(0,et)+He[et]+je.substr(et+1):0<=nt?Ue.substr(0,nt)+Se[nt]+je.substr(nt+1):null;Ke(Ue[et],pn)<0&&(nt=et)}return $e<He.length&&Qe==="next"?Ue+je.substr(Ue.length):$e<Ue.length&&Qe==="prev"?Ue.substr(0,je.length):nt<0?null:Ue.substr(0,nt)+He[nt]+je.substr(nt+1)}(W,Q,D[re],L[re],y,P);ve===null&&ee===null?M=re+1:(ee===null||0<y(ee,ve))&&(ee=ve)}return z(ee!==null?function(){F.continue(ee+j)}:K),!1}),t}function An(t,a,o,s){return{type:2,lower:t,upper:a,lowerOpen:o,upperOpen:s}}function Gi(t){return{type:1,lower:t,upper:t}}var Yi=(Object.defineProperty(Kt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Kt.prototype.between=function(t,a,o,s){o=o!==!1,s=s===!0;try{return 0<this._cmp(t,a)||this._cmp(t,a)===0&&(o||s)&&(!o||!s)?xn(this):new this.Collection(this,function(){return An(t,a,!o,!s)})}catch{return on(this,En)}},Kt.prototype.equals=function(t){return t==null?on(this,En):new this.Collection(this,function(){return Gi(t)})},Kt.prototype.above=function(t){return t==null?on(this,En):new this.Collection(this,function(){return An(t,void 0,!0)})},Kt.prototype.aboveOrEqual=function(t){return t==null?on(this,En):new this.Collection(this,function(){return An(t,void 0,!1)})},Kt.prototype.below=function(t){return t==null?on(this,En):new this.Collection(this,function(){return An(void 0,t,!1,!0)})},Kt.prototype.belowOrEqual=function(t){return t==null?on(this,En):new this.Collection(this,function(){return An(void 0,t)})},Kt.prototype.startsWith=function(t){return typeof t!="string"?on(this,Fi):this.between(t,t+Rn,!0,!0)},Kt.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):vr(this,function(a,o){return a.indexOf(o[0])===0},[t],Rn)},Kt.prototype.equalsIgnoreCase=function(t){return vr(this,function(a,o){return a===o[0]},[t],"")},Kt.prototype.anyOfIgnoreCase=function(){var t=N.apply(O,arguments);return t.length===0?xn(this):vr(this,function(a,o){return o.indexOf(a)!==-1},t,"")},Kt.prototype.startsWithAnyOfIgnoreCase=function(){var t=N.apply(O,arguments);return t.length===0?xn(this):vr(this,function(a,o){return o.some(function(s){return a.indexOf(s)===0})},t,Rn)},Kt.prototype.anyOf=function(){var t=this,a=N.apply(O,arguments),o=this._cmp;try{a.sort(o)}catch{return on(this,En)}if(a.length===0)return xn(this);var s=new this.Collection(this,function(){return An(a[0],a[a.length-1])});s._ondirectionchange=function(d){o=d==="next"?t._ascending:t._descending,a.sort(o)};var f=0;return s._addAlgorithm(function(d,y,D){for(var L=d.key;0<o(L,a[f]);)if(++f===a.length)return y(D),!1;return o(L,a[f])===0||(y(function(){d.continue(a[f])}),!1)}),s},Kt.prototype.notEqual=function(t){return this.inAnyRange([[-1/0,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Kt.prototype.noneOf=function(){var t=N.apply(O,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return on(this,En)}var a=t.reduce(function(o,s){return o?o.concat([[o[o.length-1][1],s]]):[[-1/0,s]]},null);return a.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(a,{includeLowers:!1,includeUppers:!1})},Kt.prototype.inAnyRange=function(W,a){var o=this,s=this._cmp,f=this._ascending,d=this._descending,y=this._min,D=this._max;if(W.length===0)return xn(this);if(!W.every(function(Q){return Q[0]!==void 0&&Q[1]!==void 0&&f(Q[0],Q[1])<=0}))return on(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ye.InvalidArgument);var L=!a||a.includeLowers!==!1,P=a&&a.includeUppers===!0,j,C=f;function V(Q,ee){return C(Q[0],ee[0])}try{(j=W.reduce(function(Q,ee){for(var re=0,ve=Q.length;re<ve;++re){var Ue=Q[re];if(s(ee[0],Ue[1])<0&&0<s(ee[1],Ue[0])){Ue[0]=y(Ue[0],ee[0]),Ue[1]=D(Ue[1],ee[1]);break}}return re===ve&&Q.push(ee),Q},[])).sort(V)}catch{return on(this,En)}var M=0,F=P?function(Q){return 0<f(Q,j[M][1])}:function(Q){return 0<=f(Q,j[M][1])},z=L?function(Q){return 0<d(Q,j[M][0])}:function(Q){return 0<=d(Q,j[M][0])},K=F,W=new this.Collection(this,function(){return An(j[0][0],j[j.length-1][1],!L,!P)});return W._ondirectionchange=function(Q){C=Q==="next"?(K=F,f):(K=z,d),j.sort(V)},W._addAlgorithm(function(Q,ee,re){for(var ve,Ue=Q.key;K(Ue);)if(++M===j.length)return ee(re),!1;return!F(ve=Ue)&&!z(ve)||(o._cmp(Ue,j[M][1])===0||o._cmp(Ue,j[M][0])===0||ee(function(){C===f?Q.continue(j[M][0]):Q.continue(j[M][1])}),!1)}),W},Kt.prototype.startsWithAnyOf=function(){var t=N.apply(O,arguments);return t.every(function(a){return typeof a=="string"})?t.length===0?xn(this):this.inAnyRange(t.map(function(a){return[a,a+Rn]})):on(this,"startsWithAnyOf() only works with strings")},Kt);function Kt(){}function yn(t){return at(function(a){return Xn(a),t(a.target.error),!1})}function Xn(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var er="storagemutated",Qr="x-storagemutated-1",On=Jn(null,er),al=(bn.prototype._lock=function(){return E(!Fe.global),++this._reculock,this._reculock!==1||Fe.global||(Fe.lockOwnerFor=this),this},bn.prototype._unlock=function(){if(E(!Fe.global),--this._reculock==0)for(Fe.global||(Fe.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var t=this._blockedFuncs.shift();try{Ln(t[1],t[0])}catch{}}return this},bn.prototype._locked=function(){return this._reculock&&Fe.lockOwnerFor!==this},bn.prototype.create=function(t){var a=this;if(!this.mode)return this;var o=this.db.idbdb,s=this.db._state.dbOpenError;if(E(!this.idbtrans),!t&&!o)switch(s&&s.name){case"DatabaseClosedError":throw new ye.DatabaseClosed(s);case"MissingAPIError":throw new ye.MissingAPI(s.message,s);default:throw new ye.OpenFailed(s)}if(!this.active)throw new ye.TransactionInactive;return E(this._completion._state===null),(t=this.idbtrans=t||(this.db.core||o).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=at(function(f){Xn(f),a._reject(t.error)}),t.onabort=at(function(f){Xn(f),a.active&&a._reject(new ye.Abort(t.error)),a.active=!1,a.on("abort").fire(f)}),t.oncomplete=at(function(){a.active=!1,a._resolve(),"mutatedParts"in t&&On.storagemutated.fire(t.mutatedParts)}),this},bn.prototype._promise=function(t,a,o){var s=this;if(t==="readwrite"&&this.mode!=="readwrite")return At(new ye.ReadOnly("Transaction is readonly"));if(!this.active)return At(new ye.TransactionInactive);if(this._locked())return new De(function(d,y){s._blockedFuncs.push([function(){s._promise(t,a,o).then(d,y)},Fe])});if(o)return tn(function(){var d=new De(function(y,D){s._lock();var L=a(y,D,s);L&&L.then&&L.then(y,D)});return d.finally(function(){return s._unlock()}),d._lib=!0,d});var f=new De(function(d,y){var D=a(d,y,s);D&&D.then&&D.then(d,y)});return f._lib=!0,f},bn.prototype._root=function(){return this.parent?this.parent._root():this},bn.prototype.waitFor=function(t){var a,o=this._root(),s=De.resolve(t);o._waitingFor?o._waitingFor=o._waitingFor.then(function(){return s}):(o._waitingFor=s,o._waitingQueue=[],a=o.idbtrans.objectStore(o.storeNames[0]),function d(){for(++o._spinCount;o._waitingQueue.length;)o._waitingQueue.shift()();o._waitingFor&&(a.get(-1/0).onsuccess=d)}());var f=o._waitingFor;return new De(function(d,y){s.then(function(D){return o._waitingQueue.push(at(d.bind(null,D)))},function(D){return o._waitingQueue.push(at(y.bind(null,D)))}).finally(function(){o._waitingFor===f&&(o._waitingFor=null)})})},bn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ye.Abort))},bn.prototype.table=function(t){var a=this._memoizedTables||(this._memoizedTables={});if(k(a,t))return a[t];var o=this.schema[t];if(!o)throw new ye.NotFound("Table "+t+" not part of transaction");return o=new this.db.Table(t,o,this),o.core=this.db.core.table(t),a[t]=o},bn);function bn(){}function $r(t,a,o,s,f,d,y){return{name:t,keyPath:a,unique:o,multi:s,auto:f,compound:d,src:(o&&!y?"&":"")+(s?"*":"")+(f?"++":"")+Zi(a)}}function Zi(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function Xr(t,a,o){return{name:t,primKey:a,indexes:o,mappedClass:null,idxByName:(s=function(f){return[f.name,f]},o.reduce(function(f,d,y){return y=s(d,y),y&&(f[y[0]]=y[1]),f},{}))};var s}var tr=function(t){try{return t.only([[]]),tr=function(){return[[]]},[[]]}catch{return tr=function(){return Rn},Rn}};function ei(t){return t==null?function(){}:typeof t=="string"?(a=t).split(".").length===1?function(o){return o[a]}:function(o){return te(o,a)}:function(o){return te(o,t)};var a}function Ji(t){return[].slice.call(t)}var ol=0;function nr(t){return t==null?":id":typeof t=="string"?t:"[".concat(t.join("+"),"]")}function ll(t,a,L){function s(K){if(K.type===3)return null;if(K.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var M=K.lower,F=K.upper,z=K.lowerOpen,K=K.upperOpen;return M===void 0?F===void 0?null:a.upperBound(F,!!K):F===void 0?a.lowerBound(M,!!z):a.bound(M,F,!!z,!!K)}function f(V){var M,F=V.name;return{name:F,schema:V,mutate:function(z){var K=z.trans,W=z.type,Q=z.keys,ee=z.values,re=z.range;return new Promise(function(ve,Ue){ve=at(ve);var Se=K.objectStore(F),je=Se.keyPath==null,He=W==="put"||W==="add";if(!He&&W!=="delete"&&W!=="deleteRange")throw new Error("Invalid operation type: "+W);var Ke,Qe=(Q||ee||{length:1}).length;if(Q&&ee&&Q.length!==ee.length)throw new Error("Given keys array must have same length as given values array.");if(Qe===0)return ve({numFailures:0,failures:{},results:[],lastResult:void 0});function $e($t){++pn,Xn($t)}var nt=[],et=[],pn=0;if(W==="deleteRange"){if(re.type===4)return ve({numFailures:pn,failures:et,results:[],lastResult:void 0});re.type===3?nt.push(Ke=Se.clear()):nt.push(Ke=Se.delete(s(re)))}else{var je=He?je?[ee,Q]:[ee,null]:[Q,null],tt=je[0],Wt=je[1];if(He)for(var Gt=0;Gt<Qe;++Gt)nt.push(Ke=Wt&&Wt[Gt]!==void 0?Se[W](tt[Gt],Wt[Gt]):Se[W](tt[Gt])),Ke.onerror=$e;else for(Gt=0;Gt<Qe;++Gt)nt.push(Ke=Se[W](tt[Gt])),Ke.onerror=$e}function Ir($t){$t=$t.target.result,nt.forEach(function(Fn,yi){return Fn.error!=null&&(et[yi]=Fn.error)}),ve({numFailures:pn,failures:et,results:W==="delete"?Q:nt.map(function(Fn){return Fn.result}),lastResult:$t})}Ke.onerror=function($t){$e($t),Ir($t)},Ke.onsuccess=Ir})},getMany:function(z){var K=z.trans,W=z.keys;return new Promise(function(Q,ee){Q=at(Q);for(var re,ve=K.objectStore(F),Ue=W.length,Se=new Array(Ue),je=0,He=0,Ke=function(nt){nt=nt.target,Se[nt._pos]=nt.result,++He===je&&Q(Se)},Qe=yn(ee),$e=0;$e<Ue;++$e)W[$e]!=null&&((re=ve.get(W[$e]))._pos=$e,re.onsuccess=Ke,re.onerror=Qe,++je);je===0&&Q(Se)})},get:function(z){var K=z.trans,W=z.key;return new Promise(function(Q,ee){Q=at(Q);var re=K.objectStore(F).get(W);re.onsuccess=function(ve){return Q(ve.target.result)},re.onerror=yn(ee)})},query:(M=P,function(z){return new Promise(function(K,W){K=at(K);var Q,ee,re,je=z.trans,ve=z.values,Ue=z.limit,Ke=z.query,Se=Ue===1/0?void 0:Ue,He=Ke.index,Ke=Ke.range,je=je.objectStore(F),He=He.isPrimaryKey?je:je.index(He.name),Ke=s(Ke);if(Ue===0)return K({result:[]});M?((Se=ve?He.getAll(Ke,Se):He.getAllKeys(Ke,Se)).onsuccess=function(Qe){return K({result:Qe.target.result})},Se.onerror=yn(W)):(Q=0,ee=!ve&&"openKeyCursor"in He?He.openKeyCursor(Ke):He.openCursor(Ke),re=[],ee.onsuccess=function(Qe){var $e=ee.result;return $e?(re.push(ve?$e.value:$e.primaryKey),++Q===Ue?K({result:re}):void $e.continue()):K({result:re})},ee.onerror=yn(W))})}),openCursor:function(z){var K=z.trans,W=z.values,Q=z.query,ee=z.reverse,re=z.unique;return new Promise(function(ve,Ue){ve=at(ve);var He=Q.index,Se=Q.range,je=K.objectStore(F),je=He.isPrimaryKey?je:je.index(He.name),He=ee?re?"prevunique":"prev":re?"nextunique":"next",Ke=!W&&"openKeyCursor"in je?je.openKeyCursor(s(Se),He):je.openCursor(s(Se),He);Ke.onerror=yn(Ue),Ke.onsuccess=at(function(Qe){var $e,nt,et,pn,tt=Ke.result;tt?(tt.___id=++ol,tt.done=!1,$e=tt.continue.bind(tt),nt=(nt=tt.continuePrimaryKey)&&nt.bind(tt),et=tt.advance.bind(tt),pn=function(){throw new Error("Cursor not stopped")},tt.trans=K,tt.stop=tt.continue=tt.continuePrimaryKey=tt.advance=function(){throw new Error("Cursor not started")},tt.fail=at(Ue),tt.next=function(){var Wt=this,Gt=1;return this.start(function(){return Gt--?Wt.continue():Wt.stop()}).then(function(){return Wt})},tt.start=function(Wt){function Gt(){if(Ke.result)try{Wt()}catch($t){tt.fail($t)}else tt.done=!0,tt.start=function(){throw new Error("Cursor behind last entry")},tt.stop()}var Ir=new Promise(function($t,Fn){$t=at($t),Ke.onerror=yn(Fn),tt.fail=Fn,tt.stop=function(yi){tt.stop=tt.continue=tt.continuePrimaryKey=tt.advance=pn,$t(yi)}});return Ke.onsuccess=at(function($t){Ke.onsuccess=Gt,Gt()}),tt.continue=$e,tt.continuePrimaryKey=nt,tt.advance=et,Gt(),Ir},ve(tt)):ve(null)},Ue)})},count:function(z){var K=z.query,W=z.trans,Q=K.index,ee=K.range;return new Promise(function(re,ve){var Ue=W.objectStore(F),Se=Q.isPrimaryKey?Ue:Ue.index(Q.name),Ue=s(ee),Se=Ue?Se.count(Ue):Se.count();Se.onsuccess=at(function(je){return re(je.target.result)}),Se.onerror=yn(ve)})}}}var d,y,D,j=(y=L,D=Ji((d=t).objectStoreNames),{schema:{name:d.name,tables:D.map(function(V){return y.objectStore(V)}).map(function(V){var M=V.keyPath,K=V.autoIncrement,F=g(M),z={},K={name:V.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:M==null,compound:F,keyPath:M,autoIncrement:K,unique:!0,extractKey:ei(M)},indexes:Ji(V.indexNames).map(function(W){return V.index(W)}).map(function(re){var Q=re.name,ee=re.unique,ve=re.multiEntry,re=re.keyPath,ve={name:Q,compound:g(re),keyPath:re,unique:ee,multiEntry:ve,extractKey:ei(re)};return z[nr(re)]=ve}),getIndexByKeyPath:function(W){return z[nr(W)]}};return z[":id"]=K.primaryKey,M!=null&&(z[nr(M)]=K.primaryKey),K})},hasGetAll:0<D.length&&"getAll"in y.objectStore(D[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),L=j.schema,P=j.hasGetAll,j=L.tables.map(f),C={};return j.forEach(function(V){return C[V.name]=V}),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(V){if(!C[V])throw new Error("Table '".concat(V,"' not found"));return C[V]},MIN_KEY:-1/0,MAX_KEY:tr(a),schema:L}}function sl(t,a,o,s){var f=o.IDBKeyRange;return o.indexedDB,{dbcore:(s=ll(a,f,s),t.dbcore.reduce(function(d,y){return y=y.create,r(r({},d),y(d))},s))}}function _r(t,s){var o=s.db,s=sl(t._middlewares,o,t._deps,s);t.core=s.dbcore,t.tables.forEach(function(f){var d=f.name;t.core.schema.tables.some(function(y){return y.name===d})&&(f.core=t.core.table(d),t[d]instanceof t.Table&&(t[d].core=f.core))})}function yr(t,a,o,s){o.forEach(function(f){var d=s[f];a.forEach(function(y){var D=function L(P,j){return q(P,j)||(P=m(P))&&L(P,j)}(y,f);(!D||"value"in D&&D.value===void 0)&&(y===t.Transaction.prototype||y instanceof t.Transaction?le(y,f,{get:function(){return this.table(f)},set:function(L){U(this,f,{value:L,writable:!0,configurable:!0,enumerable:!0})}}):y[f]=new t.Table(f,d))})})}function ti(t,a){a.forEach(function(o){for(var s in o)o[s]instanceof t.Table&&delete o[s]})}function ul(t,a){return t._cfg.version-a._cfg.version}function cl(t,a,o,s){var f=t._dbSchema;o.objectStoreNames.contains("$meta")&&!f.$meta&&(f.$meta=Xr("$meta",$i("")[0],[]),t._storeNames.push("$meta"));var d=t._createTransaction("readwrite",t._storeNames,f);d.create(o),d._completion.catch(s);var y=d._reject.bind(d),D=Fe.transless||Fe;tn(function(){return Fe.trans=d,Fe.transless=D,a!==0?(_r(t,o),P=a,((L=d).storeNames.includes("$meta")?L.table("$meta").get("version").then(function(j){return j??P}):De.resolve(P)).then(function(j){return V=j,M=d,F=o,z=[],j=(C=t)._versions,K=C._dbSchema=wr(0,C.idbdb,F),(j=j.filter(function(W){return W._cfg.version>=V})).length!==0?(j.forEach(function(W){z.push(function(){var Q=K,ee=W._cfg.dbschema;kr(C,Q,F),kr(C,ee,F),K=C._dbSchema=ee;var re=ni(Q,ee);re.add.forEach(function(He){ri(F,He[0],He[1].primKey,He[1].indexes)}),re.change.forEach(function(He){if(He.recreate)throw new ye.Upgrade("Not yet support for changing primary key");var Ke=F.objectStore(He.name);He.add.forEach(function(Qe){return br(Ke,Qe)}),He.change.forEach(function(Qe){Ke.deleteIndex(Qe.name),br(Ke,Qe)}),He.del.forEach(function(Qe){return Ke.deleteIndex(Qe)})});var ve=W._cfg.contentUpgrade;if(ve&&W._cfg.version>V){_r(C,F),M._memoizedTables={};var Ue=se(ee);re.del.forEach(function(He){Ue[He]=Q[He]}),ti(C,[C.Transaction.prototype]),yr(C,[C.Transaction.prototype],u(Ue),Ue),M.schema=Ue;var Se,je=Y(ve);return je&&yt(),re=De.follow(function(){var He;(Se=ve(M))&&je&&(He=hn.bind(null,null),Se.then(He,He))}),Se&&typeof Se.then=="function"?De.resolve(Se):re.then(function(){return Se})}}),z.push(function(Q){var ee,re,ve=W._cfg.dbschema;ee=ve,re=Q,[].slice.call(re.db.objectStoreNames).forEach(function(Ue){return ee[Ue]==null&&re.db.deleteObjectStore(Ue)}),ti(C,[C.Transaction.prototype]),yr(C,[C.Transaction.prototype],C._storeNames,C._dbSchema),M.schema=C._dbSchema}),z.push(function(Q){C.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(C.idbdb.version/10)===W._cfg.version?(C.idbdb.deleteObjectStore("$meta"),delete C._dbSchema.$meta,C._storeNames=C._storeNames.filter(function(ee){return ee!=="$meta"})):Q.objectStore("$meta").put(W._cfg.version,"version"))})}),function W(){return z.length?De.resolve(z.shift()(M.idbtrans)).then(W):De.resolve()}().then(function(){Qi(K,F)})):De.resolve();var C,V,M,F,z,K}).catch(y)):(u(f).forEach(function(j){ri(o,j,f[j].primKey,f[j].indexes)}),_r(t,o),void De.follow(function(){return t.on.populate.fire(d)}).catch(y));var L,P})}function fl(t,a){Qi(t._dbSchema,a),a.db.version%10!=0||a.objectStoreNames.contains("$meta")||a.db.createObjectStore("$meta").add(Math.ceil(a.db.version/10-1),"version");var o=wr(0,t.idbdb,a);kr(t,t._dbSchema,a);for(var s=0,f=ni(o,t._dbSchema).change;s<f.length;s++){var d=function(y){if(y.change.length||y.recreate)return console.warn("Unable to patch indexes of table ".concat(y.name," because it has changes on the type of index or primary key.")),{value:void 0};var D=a.objectStore(y.name);y.add.forEach(function(L){dt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(y.name,".").concat(L.src)),br(D,L)})}(f[s]);if(typeof d=="object")return d.value}}function ni(t,a){var o,s={del:[],add:[],change:[]};for(o in t)a[o]||s.del.push(o);for(o in a){var f=t[o],d=a[o];if(f){var y={name:o,def:d,recreate:!1,del:[],add:[],change:[]};if(""+(f.primKey.keyPath||"")!=""+(d.primKey.keyPath||"")||f.primKey.auto!==d.primKey.auto)y.recreate=!0,s.change.push(y);else{var D=f.idxByName,L=d.idxByName,P=void 0;for(P in D)L[P]||y.del.push(P);for(P in L){var j=D[P],C=L[P];j?j.src!==C.src&&y.change.push(C):y.add.push(C)}(0<y.del.length||0<y.add.length||0<y.change.length)&&s.change.push(y)}}else s.add.push([o,d])}return s}function ri(t,a,o,s){var f=t.db.createObjectStore(a,o.keyPath?{keyPath:o.keyPath,autoIncrement:o.auto}:{autoIncrement:o.auto});return s.forEach(function(d){return br(f,d)}),f}function Qi(t,a){u(t).forEach(function(o){a.db.objectStoreNames.contains(o)||(dt&&console.debug("Dexie: Creating missing table",o),ri(a,o,t[o].primKey,t[o].indexes))})}function br(t,a){t.createIndex(a.name,a.keyPath,{unique:a.unique,multiEntry:a.multi})}function wr(t,a,o){var s={};return I(a.objectStoreNames,0).forEach(function(f){for(var d=o.objectStore(f),y=$r(Zi(P=d.keyPath),P||"",!0,!1,!!d.autoIncrement,P&&typeof P!="string",!0),D=[],L=0;L<d.indexNames.length;++L){var j=d.index(d.indexNames[L]),P=j.keyPath,j=$r(j.name,P,!!j.unique,!!j.multiEntry,!1,P&&typeof P!="string",!1);D.push(j)}s[f]=Xr(f,y,D)}),s}function kr(t,a,o){for(var s=o.db.objectStoreNames,f=0;f<s.length;++f){var d=s[f],y=o.objectStore(d);t._hasGetAll="getAll"in y;for(var D=0;D<y.indexNames.length;++D){var L=y.indexNames[D],P=y.index(L).keyPath,j=typeof P=="string"?P:"["+I(P).join("+")+"]";!a[d]||(P=a[d].idxByName[j])&&(P.name=L,delete a[d].idxByName[j],a[d].idxByName[L]=P)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&c.WorkerGlobalScope&&c instanceof c.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}function $i(t){return t.split(",").map(function(a,o){var s=(a=a.trim()).replace(/([&*]|\+\+)/g,""),f=/^\[/.test(s)?s.match(/^\[(.*)\]$/)[1].split("+"):s;return $r(s,f||null,/\&/.test(a),/\*/.test(a),/\+\+/.test(a),g(f),o===0)})}var dl=(Dr.prototype._parseStoresSpec=function(t,a){u(t).forEach(function(o){if(t[o]!==null){var s=$i(t[o]),f=s.shift();if(f.unique=!0,f.multi)throw new ye.Schema("Primary key cannot be multi-valued");s.forEach(function(d){if(d.auto)throw new ye.Schema("Only primary key can be marked as autoIncrement (++)");if(!d.keyPath)throw new ye.Schema("Index must have a name and cannot be an empty string")}),a[o]=Xr(o,f,s)}})},Dr.prototype.stores=function(o){var a=this.db;this._cfg.storesSource=this._cfg.storesSource?_(this._cfg.storesSource,o):o;var o=a._versions,s={},f={};return o.forEach(function(d){_(s,d._cfg.storesSource),f=d._cfg.dbschema={},d._parseStoresSpec(s,f)}),a._dbSchema=f,ti(a,[a._allTables,a,a.Transaction.prototype]),yr(a,[a._allTables,a,a.Transaction.prototype,this._cfg.tables],u(f),f),a._storeNames=u(f),this},Dr.prototype.upgrade=function(t){return this._cfg.contentUpgrade=it(this._cfg.contentUpgrade||ke,t),this},Dr);function Dr(){}function ii(t,a){var o=t._dbNamesDB;return o||(o=t._dbNamesDB=new Tn(hr,{addons:[],indexedDB:t,IDBKeyRange:a})).version(1).stores({dbnames:"name"}),o.table("dbnames")}function ai(t){return t&&typeof t.databases=="function"}function oi(t){return tn(function(){return Fe.letThrough=!0,t()})}function li(t){return!("from"in t)}var xt=function(t,a){if(!this){var o=new xt;return t&&"d"in t&&_(o,t),o}_(this,arguments.length?{d:1,from:t,to:1<arguments.length?a:t}:{d:0})};function rr(t,a,o){var s=ft(a,o);if(!isNaN(s)){if(0<s)throw RangeError();if(li(t))return _(t,{from:a,to:o,d:1});var f=t.l,s=t.r;if(ft(o,t.from)<0)return f?rr(f,a,o):t.l={from:a,to:o,d:1,l:null,r:null},Xi(t);if(0<ft(a,t.to))return s?rr(s,a,o):t.r={from:a,to:o,d:1,l:null,r:null},Xi(t);ft(a,t.from)<0&&(t.from=a,t.l=null,t.d=s?s.d+1:1),0<ft(o,t.to)&&(t.to=o,t.r=null,t.d=t.l?t.l.d+1:1),o=!t.r,f&&!t.l&&ir(t,f),s&&o&&ir(t,s)}}function ir(t,a){li(a)||function o(s,L){var d=L.from,y=L.to,D=L.l,L=L.r;rr(s,d,y),D&&o(s,D),L&&o(s,L)}(t,a)}function Er(t,a){var o=si(a),s=o.next();if(s.done)return!1;for(var f=s.value,d=si(t),y=d.next(f.from),D=y.value;!s.done&&!y.done;){if(ft(D.from,f.to)<=0&&0<=ft(D.to,f.from))return!0;ft(f.from,D.from)<0?f=(s=o.next(D.from)).value:D=(y=d.next(f.from)).value}return!1}function si(t){var a=li(t)?null:{s:0,n:t};return{next:function(o){for(var s=0<arguments.length;a;)switch(a.s){case 0:if(a.s=1,s)for(;a.n.l&&ft(o,a.n.from)<0;)a={up:a,n:a.n.l,s:1};else for(;a.n.l;)a={up:a,n:a.n.l,s:1};case 1:if(a.s=2,!s||ft(o,a.n.to)<=0)return{value:a.n,done:!1};case 2:if(a.n.r){a.s=3,a={up:a,n:a.n.r,s:0};continue}case 3:a=a.up}return{done:!0}}}}function Xi(t){var a,o,s=(((a=t.r)===null||a===void 0?void 0:a.d)||0)-(((o=t.l)===null||o===void 0?void 0:o.d)||0),f=1<s?"r":s<-1?"l":"";f&&(a=f=="r"?"l":"r",o=r({},t),s=t[f],t.from=s.from,t.to=s.to,t[f]=s[f],o[f]=s[a],(t[a]=o).d=ea(o)),t.d=ea(t)}function ea(o){var a=o.r,o=o.l;return(a?o?Math.max(a.d,o.d):a.d:o?o.d:0)+1}function Sr(t,a){return u(a).forEach(function(o){t[o]?ir(t[o],a[o]):t[o]=function s(f){var d,y,D={};for(d in f)k(f,d)&&(y=f[d],D[d]=!y||typeof y!="object"||Ne.has(y.constructor)?y:s(y));return D}(a[o])}),t}function ui(t,a){return t.all||a.all||Object.keys(t).some(function(o){return a[o]&&Er(a[o],t[o])})}R(xt.prototype,((un={add:function(t){return ir(this,t),this},addKey:function(t){return rr(this,t,t),this},addKeys:function(t){var a=this;return t.forEach(function(o){return rr(a,o,o)}),this}})[Ee]=function(){return si(this)},un));var Bn={},ci={},fi=!1;function Tr(t){Sr(ci,t),fi||(fi=!0,setTimeout(function(){fi=!1,di(ci,!(ci={}))},0))}function di(t,a){a===void 0&&(a=!1);var o=new Set;if(t.all)for(var s=0,f=Object.values(Bn);s<f.length;s++)ta(y=f[s],t,o,a);else for(var d in t){var y,D=/^idb\:\/\/(.*)\/(.*)\//.exec(d);D&&(d=D[1],D=D[2],(y=Bn["idb://".concat(d,"/").concat(D)])&&ta(y,t,o,a))}o.forEach(function(L){return L()})}function ta(t,a,o,s){for(var f=[],d=0,y=Object.entries(t.queries.query);d<y.length;d++){for(var D=y[d],L=D[0],P=[],j=0,C=D[1];j<C.length;j++){var V=C[j];ui(a,V.obsSet)?V.subscribers.forEach(function(K){return o.add(K)}):s&&P.push(V)}s&&f.push([L,P])}if(s)for(var M=0,F=f;M<F.length;M++){var z=F[M],L=z[0],P=z[1];t.queries.query[L]=P}}function hl(t){var a=t._state,o=t._deps.indexedDB;if(a.isBeingOpened||t.idbdb)return a.dbReadyPromise.then(function(){return a.dbOpenError?At(a.dbOpenError):t});a.isBeingOpened=!0,a.dbOpenError=null,a.openComplete=!1;var s=a.openCanceller,f=Math.round(10*t.verno),d=!1;function y(){if(a.openCanceller!==s)throw new ye.DatabaseClosed("db.open() was cancelled")}function D(){return new De(function(V,M){if(y(),!o)throw new ye.MissingAPI;var F=t.name,z=a.autoSchema||!f?o.open(F):o.open(F,f);if(!z)throw new ye.MissingAPI;z.onerror=yn(M),z.onblocked=at(t._fireOnBlocked),z.onupgradeneeded=at(function(K){var W;j=z.transaction,a.autoSchema&&!t._options.allowEmptyDB?(z.onerror=Xn,j.abort(),z.result.close(),(W=o.deleteDatabase(F)).onsuccess=W.onerror=at(function(){M(new ye.NoSuchDatabase("Database ".concat(F," doesnt exist")))})):(j.onerror=yn(M),K=K.oldVersion>Math.pow(2,62)?0:K.oldVersion,C=K<1,t.idbdb=z.result,d&&fl(t,j),cl(t,K/10,j,M))},M),z.onsuccess=at(function(){j=null;var K,W,Q,ee,re,ve=t.idbdb=z.result,Ue=I(ve.objectStoreNames);if(0<Ue.length)try{var Se=ve.transaction((ee=Ue).length===1?ee[0]:ee,"readonly");if(a.autoSchema)W=ve,Q=Se,(K=t).verno=W.version/10,Q=K._dbSchema=wr(0,W,Q),K._storeNames=I(W.objectStoreNames,0),yr(K,[K._allTables],u(Q),Q);else if(kr(t,t._dbSchema,Se),((re=ni(wr(0,(re=t).idbdb,Se),re._dbSchema)).add.length||re.change.some(function(je){return je.add.length||je.change.length}))&&!d)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),ve.close(),f=ve.version+1,d=!0,V(D());_r(t,Se)}catch{}Hn.push(t),ve.onversionchange=at(function(je){a.vcFired=!0,t.on("versionchange").fire(je)}),ve.onclose=at(function(je){t.on("close").fire(je)}),C&&(re=t._deps,Se=F,ve=re.indexedDB,re=re.IDBKeyRange,ai(ve)||Se===hr||ii(ve,re).put({name:Se}).catch(ke)),V()},M)}).catch(function(V){switch(V==null?void 0:V.name){case"UnknownError":if(0<a.PR1398_maxLoop)return a.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),D();break;case"VersionError":if(0<f)return f=0,D()}return De.reject(V)})}var L,P=a.dbReadyResolve,j=null,C=!1;return De.race([s,(typeof navigator>"u"?De.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(V){function M(){return indexedDB.databases().finally(V)}L=setInterval(M,100),M()}).finally(function(){return clearInterval(L)}):Promise.resolve()).then(D)]).then(function(){return y(),a.onReadyBeingFired=[],De.resolve(oi(function(){return t.on.ready.fire(t.vip)})).then(function V(){if(0<a.onReadyBeingFired.length){var M=a.onReadyBeingFired.reduce(it,ke);return a.onReadyBeingFired=[],De.resolve(oi(function(){return M(t.vip)})).then(V)}})}).finally(function(){a.openCanceller===s&&(a.onReadyBeingFired=null,a.isBeingOpened=!1)}).catch(function(V){a.dbOpenError=V;try{j&&j.abort()}catch{}return s===a.openCanceller&&t._close(),At(V)}).finally(function(){a.openComplete=!0,P()}).then(function(){var V;return C&&(V={},t.tables.forEach(function(M){M.schema.indexes.forEach(function(F){F.name&&(V["idb://".concat(t.name,"/").concat(M.name,"/").concat(F.name)]=new xt(-1/0,[[[]]]))}),V["idb://".concat(t.name,"/").concat(M.name,"/")]=V["idb://".concat(t.name,"/").concat(M.name,"/:dels")]=new xt(-1/0,[[[]]])}),On(er).fire(V),di(V,!0)),t})}function hi(t){function a(d){return t.next(d)}var o=f(a),s=f(function(d){return t.throw(d)});function f(d){return function(L){var D=d(L),L=D.value;return D.done?L:L&&typeof L.then=="function"?L.then(o,s):g(L)?Promise.all(L).then(o,s):o(L)}}return f(a)()}function Cr(t,a,o){for(var s=g(t)?t.slice():[t],f=0;f<o;++f)s.push(a);return s}var pl={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return r(r({},t),{table:function(a){var o=t.table(a),s=o.schema,f={},d=[];function y(C,V,M){var F=nr(C),z=f[F]=f[F]||[],K=C==null?0:typeof C=="string"?1:C.length,W=0<V,W=r(r({},M),{name:W?"".concat(F,"(virtual-from:").concat(M.name,")"):M.name,lowLevelIndex:M,isVirtual:W,keyTail:V,keyLength:K,extractKey:ei(C),unique:!W&&M.unique});return z.push(W),W.isPrimaryKey||d.push(W),1<K&&y(K===2?C[0]:C.slice(0,K-1),V+1,M),z.sort(function(Q,ee){return Q.keyTail-ee.keyTail}),W}a=y(s.primaryKey.keyPath,0,s.primaryKey),f[":id"]=[a];for(var D=0,L=s.indexes;D<L.length;D++){var P=L[D];y(P.keyPath,0,P)}function j(C){var V,M=C.query.index;return M.isVirtual?r(r({},C),{query:{index:M.lowLevelIndex,range:(V=C.query.range,M=M.keyTail,{type:V.type===1?2:V.type,lower:Cr(V.lower,V.lowerOpen?t.MAX_KEY:t.MIN_KEY,M),lowerOpen:!0,upper:Cr(V.upper,V.upperOpen?t.MIN_KEY:t.MAX_KEY,M),upperOpen:!0})}}):C}return r(r({},o),{schema:r(r({},s),{primaryKey:a,indexes:d,getIndexByKeyPath:function(C){return(C=f[nr(C)])&&C[0]}}),count:function(C){return o.count(j(C))},query:function(C){return o.query(j(C))},openCursor:function(C){var V=C.query.index,M=V.keyTail,F=V.isVirtual,z=V.keyLength;return F?o.openCursor(j(C)).then(function(W){return W&&K(W)}):o.openCursor(C);function K(W){return Object.create(W,{continue:{value:function(Q){Q!=null?W.continue(Cr(Q,C.reverse?t.MAX_KEY:t.MIN_KEY,M)):C.unique?W.continue(W.key.slice(0,z).concat(C.reverse?t.MIN_KEY:t.MAX_KEY,M)):W.continue()}},continuePrimaryKey:{value:function(Q,ee){W.continuePrimaryKey(Cr(Q,t.MAX_KEY,M),ee)}},primaryKey:{get:function(){return W.primaryKey}},key:{get:function(){var Q=W.key;return z===1?Q[0]:Q.slice(0,z)}},value:{get:function(){return W.value}}})}}})}})}};function pi(t,a,o,s){return o=o||{},s=s||"",u(t).forEach(function(f){var d,y,D;k(a,f)?(d=t[f],y=a[f],typeof d=="object"&&typeof y=="object"&&d&&y?(D=Oe(d))!==Oe(y)?o[s+f]=a[f]:D==="Object"?pi(d,y,o,s+f+"."):d!==y&&(o[s+f]=a[f]):d!==y&&(o[s+f]=a[f])):o[s+f]=void 0}),u(a).forEach(function(f){k(t,f)||(o[s+f]=a[f])}),o}function mi(t,a){return a.type==="delete"?a.keys:a.keys||a.values.map(t.extractKey)}var ml={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return r(r({},t),{table:function(a){var o=t.table(a),s=o.schema.primaryKey;return r(r({},o),{mutate:function(f){var d=Fe.trans,y=d.table(a).hook,D=y.deleting,L=y.creating,P=y.updating;switch(f.type){case"add":if(L.fire===ke)break;return d._promise("readwrite",function(){return j(f)},!0);case"put":if(L.fire===ke&&P.fire===ke)break;return d._promise("readwrite",function(){return j(f)},!0);case"delete":if(D.fire===ke)break;return d._promise("readwrite",function(){return j(f)},!0);case"deleteRange":if(D.fire===ke)break;return d._promise("readwrite",function(){return function C(V,M,F){return o.query({trans:V,values:!1,query:{index:s,range:M},limit:F}).then(function(z){var K=z.result;return j({type:"delete",keys:K,trans:V}).then(function(W){return 0<W.numFailures?Promise.reject(W.failures[0]):K.length<F?{failures:[],numFailures:0,lastResult:void 0}:C(V,r(r({},M),{lower:K[K.length-1],lowerOpen:!0}),F)})})}(f.trans,f.range,1e4)},!0)}return o.mutate(f);function j(C){var V,M,F,z=Fe.trans,K=C.keys||mi(s,C);if(!K)throw new Error("Keys missing");return(C=C.type==="add"||C.type==="put"?r(r({},C),{keys:K}):r({},C)).type!=="delete"&&(C.values=l([],C.values)),C.keys&&(C.keys=l([],C.keys)),V=o,F=K,((M=C).type==="add"?Promise.resolve([]):V.getMany({trans:M.trans,keys:F,cache:"immutable"})).then(function(W){var Q=K.map(function(ee,re){var ve,Ue,Se,je=W[re],He={onerror:null,onsuccess:null};return C.type==="delete"?D.fire.call(He,ee,je,z):C.type==="add"||je===void 0?(ve=L.fire.call(He,ee,C.values[re],z),ee==null&&ve!=null&&(C.keys[re]=ee=ve,s.outbound||J(C.values[re],s.keyPath,ee))):(ve=pi(je,C.values[re]),(Ue=P.fire.call(He,ve,ee,je,z))&&(Se=C.values[re],Object.keys(Ue).forEach(function(Ke){k(Se,Ke)?Se[Ke]=Ue[Ke]:J(Se,Ke,Ue[Ke])}))),He});return o.mutate(C).then(function(ee){for(var re=ee.failures,ve=ee.results,Ue=ee.numFailures,ee=ee.lastResult,Se=0;Se<K.length;++Se){var je=(ve||K)[Se],He=Q[Se];je==null?He.onerror&&He.onerror(re[Se]):He.onsuccess&&He.onsuccess(C.type==="put"&&W[Se]?C.values[Se]:je)}return{failures:re,results:ve,numFailures:Ue,lastResult:ee}}).catch(function(ee){return Q.forEach(function(re){return re.onerror&&re.onerror(ee)}),Promise.reject(ee)})})}}})}})}};function na(t,a,o){try{if(!a||a.keys.length<t.length)return null;for(var s=[],f=0,d=0;f<a.keys.length&&d<t.length;++f)ft(a.keys[f],t[d])===0&&(s.push(o?be(a.values[f]):a.values[f]),++d);return s.length===t.length?s:null}catch{return null}}var gl={stack:"dbcore",level:-1,create:function(t){return{table:function(a){var o=t.table(a);return r(r({},o),{getMany:function(s){if(!s.cache)return o.getMany(s);var f=na(s.keys,s.trans._cache,s.cache==="clone");return f?De.resolve(f):o.getMany(s).then(function(d){return s.trans._cache={keys:s.keys,values:s.cache==="clone"?be(d):d},d})},mutate:function(s){return s.type!=="add"&&(s.trans._cache=null),o.mutate(s)}})}}}};function ra(t,a){return t.trans.mode==="readonly"&&!!t.subscr&&!t.trans.explicit&&t.trans.db._options.cache!=="disabled"&&!a.schema.primaryKey.outbound}function ia(t,a){switch(t){case"query":return a.values&&!a.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var vl={stack:"dbcore",level:0,name:"Observability",create:function(t){var a=t.schema.name,o=new xt(t.MIN_KEY,t.MAX_KEY);return r(r({},t),{transaction:function(s,f,d){if(Fe.subscr&&f!=="readonly")throw new ye.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Fe.querier));return t.transaction(s,f,d)},table:function(s){var f=t.table(s),d=f.schema,y=d.primaryKey,C=d.indexes,D=y.extractKey,L=y.outbound,P=y.autoIncrement&&C.filter(function(M){return M.compound&&M.keyPath.includes(y.keyPath)}),j=r(r({},f),{mutate:function(M){function F(Ke){return Ke="idb://".concat(a,"/").concat(s,"/").concat(Ke),ee[Ke]||(ee[Ke]=new xt)}var z,K,W,Q=M.trans,ee=M.mutatedParts||(M.mutatedParts={}),re=F(""),ve=F(":dels"),Ue=M.type,He=M.type==="deleteRange"?[M.range]:M.type==="delete"?[M.keys]:M.values.length<50?[mi(y,M).filter(function(Ke){return Ke}),M.values]:[],Se=He[0],je=He[1],He=M.trans._cache;return g(Se)?(re.addKeys(Se),(He=Ue==="delete"||Se.length===je.length?na(Se,He):null)||ve.addKeys(Se),(He||je)&&(z=F,K=He,W=je,d.indexes.forEach(function(Ke){var Qe=z(Ke.name||"");function $e(et){return et!=null?Ke.extractKey(et):null}function nt(et){return Ke.multiEntry&&g(et)?et.forEach(function(pn){return Qe.addKey(pn)}):Qe.addKey(et)}(K||W).forEach(function(et,Wt){var tt=K&&$e(K[Wt]),Wt=W&&$e(W[Wt]);ft(tt,Wt)!==0&&(tt!=null&&nt(tt),Wt!=null&&nt(Wt))})}))):Se?(je={from:Se.lower,to:Se.upper},ve.add(je),re.add(je)):(re.add(o),ve.add(o),d.indexes.forEach(function(Ke){return F(Ke.name).add(o)})),f.mutate(M).then(function(Ke){return!Se||M.type!=="add"&&M.type!=="put"||(re.addKeys(Ke.results),P&&P.forEach(function(Qe){var $e=M.values.map(function(et){return Qe.extractKey(et)}),nt=Qe.keyPath.findIndex(function(et){return et===y.keyPath});Ke.results.forEach(function(et){return $e[nt]=et}),F(Qe.name).addKeys($e)})),Q.mutatedParts=Sr(Q.mutatedParts||{},ee),Ke})}}),C=function(F){var z=F.query,F=z.index,z=z.range;return[F,new xt((F=z.lower)!==null&&F!==void 0?F:t.MIN_KEY,(z=z.upper)!==null&&z!==void 0?z:t.MAX_KEY)]},V={get:function(M){return[y,new xt(M.key)]},getMany:function(M){return[y,new xt().addKeys(M.keys)]},count:C,query:C,openCursor:C};return u(V).forEach(function(M){j[M]=function(F){var z=Fe.subscr,K=!!z,W=ra(Fe,f)&&ia(M,F)?F.obsSet={}:z;if(K){var Q=function(je){return je="idb://".concat(a,"/").concat(s,"/").concat(je),W[je]||(W[je]=new xt)},ee=Q(""),re=Q(":dels"),z=V[M](F),K=z[0],z=z[1];if((M==="query"&&K.isPrimaryKey&&!F.values?re:Q(K.name||"")).add(z),!K.isPrimaryKey){if(M!=="count"){var ve=M==="query"&&L&&F.values&&f.query(r(r({},F),{values:!1}));return f[M].apply(this,arguments).then(function(je){if(M==="query"){if(L&&F.values)return ve.then(function($e){return $e=$e.result,ee.addKeys($e),je});var He=F.values?je.result.map(D):je.result;(F.values?ee:re).addKeys(He)}else if(M==="openCursor"){var Ke=je,Qe=F.values;return Ke&&Object.create(Ke,{key:{get:function(){return re.addKey(Ke.primaryKey),Ke.key}},primaryKey:{get:function(){var $e=Ke.primaryKey;return re.addKey($e),$e}},value:{get:function(){return Qe&&ee.addKey(Ke.primaryKey),Ke.value}}})}return je})}re.add(o)}}return f[M].apply(this,arguments)}}),j}})}};function aa(t,a,o){if(o.numFailures===0)return a;if(a.type==="deleteRange")return null;var s=a.keys?a.keys.length:"values"in a&&a.values?a.values.length:1;return o.numFailures===s?null:(a=r({},a),g(a.keys)&&(a.keys=a.keys.filter(function(f,d){return!(d in o.failures)})),"values"in a&&g(a.values)&&(a.values=a.values.filter(function(f,d){return!(d in o.failures)})),a)}function gi(t,a){return o=t,((s=a).lower===void 0||(s.lowerOpen?0<ft(o,s.lower):0<=ft(o,s.lower)))&&(t=t,(a=a).upper===void 0||(a.upperOpen?ft(t,a.upper)<0:ft(t,a.upper)<=0));var o,s}function oa(t,a,V,s,f,d){if(!V||V.length===0)return t;var y=a.query.index,D=y.multiEntry,L=a.query.range,P=s.schema.primaryKey.extractKey,j=y.extractKey,C=(y.lowLevelIndex||y).extractKey,V=V.reduce(function(M,F){var z=M,K=F.type==="add"||F.type==="put"?F.values.filter(function(re){return re=j(re),D&&g(re)?re.some(function(ve){return gi(ve,L)}):gi(re,L)}).map(function(re){return re=be(re),d&&Object.freeze(re),re}):[];switch(F.type){case"add":z=M.concat(a.values?K:K.map(function(ve){return P(ve)}));break;case"put":var W=new xt().addKeys(F.values.map(function(ve){return P(ve)})),z=M.filter(function(ve){return ve=a.values?P(ve):ve,!Er(new xt(ve),W)}).concat(a.values?K:K.map(function(ve){return P(ve)}));break;case"delete":var Q=new xt().addKeys(F.keys);z=M.filter(function(ve){return ve=a.values?P(ve):ve,!Er(new xt(ve),Q)});break;case"deleteRange":var ee=F.range;z=M.filter(function(ve){return!gi(P(ve),ee)})}return z},t);return V===t?t:(V.sort(function(M,F){return ft(C(M),C(F))||ft(P(M),P(F))}),a.limit&&a.limit<1/0&&(V.length>a.limit?V.length=a.limit:t.length===a.limit&&V.length<a.limit&&(f.dirty=!0)),d?Object.freeze(V):V)}function la(t,a){return ft(t.lower,a.lower)===0&&ft(t.upper,a.upper)===0&&!!t.lowerOpen==!!a.lowerOpen&&!!t.upperOpen==!!a.upperOpen}function _l(t,a){return function(o,s,f,d){if(o===void 0)return s!==void 0?-1:0;if(s===void 0)return 1;if((s=ft(o,s))===0){if(f&&d)return 0;if(f)return 1;if(d)return-1}return s}(t.lower,a.lower,t.lowerOpen,a.lowerOpen)<=0&&0<=function(o,s,f,d){if(o===void 0)return s!==void 0?1:0;if(s===void 0)return-1;if((s=ft(o,s))===0){if(f&&d)return 0;if(f)return-1;if(d)return 1}return s}(t.upper,a.upper,t.upperOpen,a.upperOpen)}function yl(t,a,o,s){t.subscribers.add(o),s.addEventListener("abort",function(){var f,d;t.subscribers.delete(o),t.subscribers.size===0&&(f=t,d=a,setTimeout(function(){f.subscribers.size===0&&Ae(d,f)},3e3))})}var bl={stack:"dbcore",level:0,name:"Cache",create:function(t){var a=t.schema.name;return r(r({},t),{transaction:function(o,s,f){var d,y,D=t.transaction(o,s,f);return s==="readwrite"&&(y=(d=new AbortController).signal,f=function(L){return function(){if(d.abort(),s==="readwrite"){for(var P=new Set,j=0,C=o;j<C.length;j++){var V=C[j],M=Bn["idb://".concat(a,"/").concat(V)];if(M){var F=t.table(V),z=M.optimisticOps.filter(function(Qe){return Qe.trans===D});if(D._explicit&&L&&D.mutatedParts)for(var K=0,W=Object.values(M.queries.query);K<W.length;K++)for(var Q=0,ee=(Ue=W[K]).slice();Q<ee.length;Q++)ui((Se=ee[Q]).obsSet,D.mutatedParts)&&(Ae(Ue,Se),Se.subscribers.forEach(function(Qe){return P.add(Qe)}));else if(0<z.length){M.optimisticOps=M.optimisticOps.filter(function(Qe){return Qe.trans!==D});for(var re=0,ve=Object.values(M.queries.query);re<ve.length;re++)for(var Ue,Se,je,He=0,Ke=(Ue=ve[re]).slice();He<Ke.length;He++)(Se=Ke[He]).res!=null&&D.mutatedParts&&(L&&!Se.dirty?(je=Object.isFrozen(Se.res),je=oa(Se.res,Se.req,z,F,Se,je),Se.dirty?(Ae(Ue,Se),Se.subscribers.forEach(function(Qe){return P.add(Qe)})):je!==Se.res&&(Se.res=je,Se.promise=De.resolve({result:je}))):(Se.dirty&&Ae(Ue,Se),Se.subscribers.forEach(function(Qe){return P.add(Qe)})))}}}P.forEach(function(Qe){return Qe()})}}},D.addEventListener("abort",f(!1),{signal:y}),D.addEventListener("error",f(!1),{signal:y}),D.addEventListener("complete",f(!0),{signal:y})),D},table:function(o){var s=t.table(o),f=s.schema.primaryKey;return r(r({},s),{mutate:function(d){var y=Fe.trans;if(f.outbound||y.db._options.cache==="disabled"||y.explicit)return s.mutate(d);var D=Bn["idb://".concat(a,"/").concat(o)];return D?(y=s.mutate(d),d.type!=="add"&&d.type!=="put"||!(50<=d.values.length||mi(f,d).some(function(L){return L==null}))?(D.optimisticOps.push(d),d.mutatedParts&&Tr(d.mutatedParts),y.then(function(L){0<L.numFailures&&(Ae(D.optimisticOps,d),(L=aa(0,d,L))&&D.optimisticOps.push(L),d.mutatedParts&&Tr(d.mutatedParts))}),y.catch(function(){Ae(D.optimisticOps,d),d.mutatedParts&&Tr(d.mutatedParts)})):y.then(function(L){var P=aa(0,r(r({},d),{values:d.values.map(function(M,C){var V,M=(V=f.keyPath)!==null&&V!==void 0&&V.includes(".")?be(M):r({},M);return J(M,f.keyPath,L.results[C]),M})}),L);D.optimisticOps.push(P),queueMicrotask(function(){return d.mutatedParts&&Tr(d.mutatedParts)})}),y):s.mutate(d)},query:function(d){if(!ra(Fe,s)||!ia("query",d))return s.query(d);var y=((P=Fe.trans)===null||P===void 0?void 0:P.db._options.cache)==="immutable",C=Fe,D=C.requery,L=C.signal,P=function(F,z,K,W){var Q=Bn["idb://".concat(F,"/").concat(z)];if(!Q)return[];if(!(z=Q.queries[K]))return[null,!1,Q,null];var ee=z[(W.query?W.query.index.name:null)||""];if(!ee)return[null,!1,Q,null];switch(K){case"query":var re=ee.find(function(ve){return ve.req.limit===W.limit&&ve.req.values===W.values&&la(ve.req.query.range,W.query.range)});return re?[re,!0,Q,ee]:[ee.find(function(ve){return("limit"in ve.req?ve.req.limit:1/0)>=W.limit&&(!W.values||ve.req.values)&&_l(ve.req.query.range,W.query.range)}),!1,Q,ee];case"count":return re=ee.find(function(ve){return la(ve.req.query.range,W.query.range)}),[re,!!re,Q,ee]}}(a,o,"query",d),j=P[0],C=P[1],V=P[2],M=P[3];return j&&C?j.obsSet=d.obsSet:(C=s.query(d).then(function(F){var z=F.result;if(j&&(j.res=z),y){for(var K=0,W=z.length;K<W;++K)Object.freeze(z[K]);Object.freeze(z)}else F.result=be(z);return F}).catch(function(F){return M&&j&&Ae(M,j),Promise.reject(F)}),j={obsSet:d.obsSet,promise:C,subscribers:new Set,type:"query",req:d,dirty:!1},M?M.push(j):(M=[j],(V=V||(Bn["idb://".concat(a,"/").concat(o)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[d.query.index.name||""]=M)),yl(j,M,D,L),j.promise.then(function(F){return{result:oa(F.result,d,V==null?void 0:V.optimisticOps,s,j,y)}})}})}})}};function Ar(t,a){return new Proxy(t,{get:function(o,s,f){return s==="db"?a:Reflect.get(o,s,f)}})}var Tn=(Ot.prototype.version=function(t){if(isNaN(t)||t<.1)throw new ye.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new ye.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var a=this._versions,o=a.filter(function(s){return s._cfg.version===t})[0];return o||(o=new this.Version(t),a.push(o),a.sort(ul),o.stores({}),this._state.autoSchema=!1,o)},Ot.prototype._whenReady=function(t){var a=this;return this.idbdb&&(this._state.openComplete||Fe.letThrough||this._vip)?t():new De(function(o,s){if(a._state.openComplete)return s(new ye.DatabaseClosed(a._state.dbOpenError));if(!a._state.isBeingOpened){if(!a._state.autoOpen)return void s(new ye.DatabaseClosed);a.open().catch(ke)}a._state.dbReadyPromise.then(o,s)}).then(t)},Ot.prototype.use=function(t){var a=t.stack,o=t.create,s=t.level,f=t.name;return f&&this.unuse({stack:a,name:f}),t=this._middlewares[a]||(this._middlewares[a]=[]),t.push({stack:a,create:o,level:s??10,name:f}),t.sort(function(d,y){return d.level-y.level}),this},Ot.prototype.unuse=function(t){var a=t.stack,o=t.name,s=t.create;return a&&this._middlewares[a]&&(this._middlewares[a]=this._middlewares[a].filter(function(f){return s?f.create!==s:!!o&&f.name!==o})),this},Ot.prototype.open=function(){var t=this;return Ln(lt,function(){return hl(t)})},Ot.prototype._close=function(){var t=this._state,a=Hn.indexOf(this);if(0<=a&&Hn.splice(a,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}t.isBeingOpened||(t.dbReadyPromise=new De(function(o){t.dbReadyResolve=o}),t.openCanceller=new De(function(o,s){t.cancelOpen=s}))},Ot.prototype.close=function(o){var a=(o===void 0?{disableAutoOpen:!0}:o).disableAutoOpen,o=this._state;a?(o.isBeingOpened&&o.cancelOpen(new ye.DatabaseClosed),this._close(),o.autoOpen=!1,o.dbOpenError=new ye.DatabaseClosed):(this._close(),o.autoOpen=this._options.autoOpen||o.isBeingOpened,o.openComplete=!1,o.dbOpenError=null)},Ot.prototype.delete=function(t){var a=this;t===void 0&&(t={disableAutoOpen:!0});var o=0<arguments.length&&typeof arguments[0]!="object",s=this._state;return new De(function(f,d){function y(){a.close(t);var D=a._deps.indexedDB.deleteDatabase(a.name);D.onsuccess=at(function(){var L,P,j;L=a._deps,P=a.name,j=L.indexedDB,L=L.IDBKeyRange,ai(j)||P===hr||ii(j,L).delete(P).catch(ke),f()}),D.onerror=yn(d),D.onblocked=a._fireOnBlocked}if(o)throw new ye.InvalidArgument("Invalid closeOptions argument to db.delete()");s.isBeingOpened?s.dbReadyPromise.then(y):y()})},Ot.prototype.backendDB=function(){return this.idbdb},Ot.prototype.isOpen=function(){return this.idbdb!==null},Ot.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},Ot.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Ot.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Ot.prototype,"tables",{get:function(){var t=this;return u(this._allTables).map(function(a){return t._allTables[a]})},enumerable:!1,configurable:!0}),Ot.prototype.transaction=function(){var t=(function(a,o,s){var f=arguments.length;if(f<2)throw new ye.InvalidArgument("Too few arguments");for(var d=new Array(f-1);--f;)d[f-1]=arguments[f];return s=d.pop(),[a,we(d),s]}).apply(this,arguments);return this._transaction.apply(this,t)},Ot.prototype._transaction=function(t,a,o){var s=this,f=Fe.trans;f&&f.db===this&&t.indexOf("!")===-1||(f=null);var d,y,D=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");try{if(y=a.map(function(P){if(P=P instanceof s.Table?P.name:P,typeof P!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return P}),t=="r"||t===Wr)d=Wr;else{if(t!="rw"&&t!=Gr)throw new ye.InvalidArgument("Invalid transaction mode: "+t);d=Gr}if(f){if(f.mode===Wr&&d===Gr){if(!D)throw new ye.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");f=null}f&&y.forEach(function(P){if(f&&f.storeNames.indexOf(P)===-1){if(!D)throw new ye.SubTransaction("Table "+P+" not included in parent transaction.");f=null}}),D&&f&&!f.active&&(f=null)}}catch(P){return f?f._promise(null,function(j,C){C(P)}):At(P)}var L=(function P(j,C,V,M,F){return De.resolve().then(function(){var z=Fe.transless||Fe,K=j._createTransaction(C,V,j._dbSchema,M);if(K.explicit=!0,z={trans:K,transless:z},M)K.idbtrans=M.idbtrans;else try{K.create(),K.idbtrans._explicit=!0,j._state.PR1398_maxLoop=3}catch(ee){return ee.name===Ve.InvalidState&&j.isOpen()&&0<--j._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),j.close({disableAutoOpen:!1}),j.open().then(function(){return P(j,C,V,null,F)})):At(ee)}var W,Q=Y(F);return Q&&yt(),z=De.follow(function(){var ee;(W=F.call(K,K))&&(Q?(ee=hn.bind(null,null),W.then(ee,ee)):typeof W.next=="function"&&typeof W.throw=="function"&&(W=hi(W)))},z),(W&&typeof W.then=="function"?De.resolve(W).then(function(ee){return K.active?ee:At(new ye.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):z.then(function(){return W})).then(function(ee){return M&&K._resolve(),K._completion.then(function(){return ee})}).catch(function(ee){return K._reject(ee),At(ee)})})}).bind(null,this,d,y,f,o);return f?f._promise(d,L,"lock"):Fe.trans?Ln(Fe.transless,function(){return s._whenReady(L)}):this._whenReady(L)},Ot.prototype.table=function(t){if(!k(this._allTables,t))throw new ye.InvalidTable("Table ".concat(t," does not exist"));return this._allTables[t]},Ot);function Ot(t,a){var o=this;this._middlewares={},this.verno=0;var s=Ot.dependencies;this._options=a=r({addons:Ot.addons,autoOpen:!0,indexedDB:s.indexedDB,IDBKeyRange:s.IDBKeyRange,cache:"cloned"},a),this._deps={indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange},s=a.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var f,d,y,D,L,P={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ke,dbReadyPromise:null,cancelOpen:ke,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:a.autoOpen};P.dbReadyPromise=new De(function(C){P.dbReadyResolve=C}),P.openCanceller=new De(function(C,V){P.cancelOpen=V}),this._state=P,this.name=t,this.on=Jn(this,"populate","blocked","versionchange","close",{ready:[it,ke]}),this.on.ready.subscribe=X(this.on.ready.subscribe,function(C){return function(V,M){Ot.vip(function(){var F,z=o._state;z.openComplete?(z.dbOpenError||De.resolve().then(V),M&&C(V)):z.onReadyBeingFired?(z.onReadyBeingFired.push(V),M&&C(V)):(C(V),F=o,M||C(function K(){F.on.ready.unsubscribe(V),F.on.ready.unsubscribe(K)}))})}}),this.Collection=(f=this,Qn(nl.prototype,function(W,K){this.db=f;var M=ji,F=null;if(K)try{M=K()}catch(Q){F=Q}var z=W._ctx,K=z.table,W=K.hook.reading.fire;this._ctx={table:K,index:z.index,isPrimKey:!z.index||K.schema.primKey.keyPath&&z.index===K.schema.primKey.name,range:M,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:F,or:z.or,valueMapper:W!==ze?W:null}})),this.Table=(d=this,Qn(Hi.prototype,function(C,V,M){this.db=d,this._tx=M,this.name=C,this.schema=V,this.hook=d._allTables[C]?d._allTables[C].hook:Jn(null,{creating:[qe,ke],reading:[Me,ze],updating:[he,ke],deleting:[Be,ke]})})),this.Transaction=(y=this,Qn(al.prototype,function(C,V,M,F,z){var K=this;this.db=y,this.mode=C,this.storeNames=V,this.schema=M,this.chromeTransactionDurability=F,this.idbtrans=null,this.on=Jn(this,"complete","error","abort"),this.parent=z||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new De(function(W,Q){K._resolve=W,K._reject=Q}),this._completion.then(function(){K.active=!1,K.on.complete.fire()},function(W){var Q=K.active;return K.active=!1,K.on.error.fire(W),K.parent?K.parent._reject(W):Q&&K.idbtrans&&K.idbtrans.abort(),At(W)})})),this.Version=(D=this,Qn(dl.prototype,function(C){this.db=D,this._cfg={version:C,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(L=this,Qn(Yi.prototype,function(C,V,M){if(this.db=L,this._ctx={table:C,index:V===":id"?null:V,or:M},this._cmp=this._ascending=ft,this._descending=function(F,z){return ft(z,F)},this._max=function(F,z){return 0<ft(F,z)?F:z},this._min=function(F,z){return ft(F,z)<0?F:z},this._IDBKeyRange=L._deps.IDBKeyRange,!this._IDBKeyRange)throw new ye.MissingAPI})),this.on("versionchange",function(C){0<C.newVersion?console.warn("Another connection wants to upgrade database '".concat(o.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(o.name,"'. Closing db now to resume the delete request.")),o.close({disableAutoOpen:!1})}),this.on("blocked",function(C){!C.newVersion||C.newVersion<C.oldVersion?console.warn("Dexie.delete('".concat(o.name,"') was blocked")):console.warn("Upgrade '".concat(o.name,"' blocked by other connection holding version ").concat(C.oldVersion/10))}),this._maxKey=tr(a.IDBKeyRange),this._createTransaction=function(C,V,M,F){return new o.Transaction(C,V,M,o._options.chromeTransactionDurability,F)},this._fireOnBlocked=function(C){o.on("blocked").fire(C),Hn.filter(function(V){return V.name===o.name&&V!==o&&!V._state.vcFired}).map(function(V){return V.on("versionchange").fire(C)})},this.use(gl),this.use(bl),this.use(vl),this.use(pl),this.use(ml);var j=new Proxy(this,{get:function(C,V,M){if(V==="_vip")return!0;if(V==="table")return function(z){return Ar(o.table(z),j)};var F=Reflect.get(C,V,M);return F instanceof Hi?Ar(F,j):V==="tables"?F.map(function(z){return Ar(z,j)}):V==="_createTransaction"?function(){return Ar(F.apply(this,arguments),j)}:F}});this.vip=j,s.forEach(function(C){return C(o)})}var Or,un=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",wl=(vi.prototype.subscribe=function(t,a,o){return this._subscribe(t&&typeof t!="function"?t:{next:t,error:a,complete:o})},vi.prototype[un]=function(){return this},vi);function vi(t){this._subscribe=t}try{Or={indexedDB:c.indexedDB||c.mozIndexedDB||c.webkitIndexedDB||c.msIndexedDB,IDBKeyRange:c.IDBKeyRange||c.webkitIDBKeyRange}}catch{Or={indexedDB:null,IDBKeyRange:null}}function sa(t){var a,o=!1,s=new wl(function(f){var d=Y(t),y,D=!1,L={},P={},j={get closed(){return D},unsubscribe:function(){D||(D=!0,y&&y.abort(),C&&On.storagemutated.unsubscribe(M))}};f.start&&f.start(j);var C=!1,V=function(){return xr(F)},M=function(z){Sr(L,z),ui(P,L)&&V()},F=function(){var z,K,W;!D&&Or.indexedDB&&(L={},z={},y&&y.abort(),y=new AbortController,W=function(Q){var ee=Ce();try{d&&yt();var re=tn(t,Q);return re=d?re.finally(hn):re}finally{ee&&vt()}}(K={subscr:z,signal:y.signal,requery:V,querier:t,trans:null}),Promise.resolve(W).then(function(Q){o=!0,a=Q,D||K.signal.aborted||(L={},function(ee){for(var re in ee)if(k(ee,re))return;return 1}(P=z)||C||(On(er,M),C=!0),xr(function(){return!D&&f.next&&f.next(Q)}))},function(Q){o=!1,["DatabaseClosedError","AbortError"].includes(Q==null?void 0:Q.name)||D||xr(function(){D||f.error&&f.error(Q)})}))};return setTimeout(V,0),j});return s.hasValue=function(){return o},s.getValue=function(){return a},s}var Kn=Tn;function _i(t){var a=In;try{In=!0,On.storagemutated.fire(t),di(t,!0)}finally{In=a}}R(Kn,r(r({},ce),{delete:function(t){return new Kn(t,{addons:[]}).delete()},exists:function(t){return new Kn(t,{addons:[]}).open().then(function(a){return a.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(t){try{return a=Kn.dependencies,o=a.indexedDB,a=a.IDBKeyRange,(ai(o)?Promise.resolve(o.databases()).then(function(s){return s.map(function(f){return f.name}).filter(function(f){return f!==hr})}):ii(o,a).toCollection().primaryKeys()).then(t)}catch{return At(new ye.MissingAPI)}var a,o},defineClass:function(){return function(t){_(this,t)}},ignoreTransaction:function(t){return Fe.trans?Ln(Fe.transless,t):t()},vip:oi,async:function(t){return function(){try{var a=hi(t.apply(this,arguments));return a&&typeof a.then=="function"?a:De.resolve(a)}catch(o){return At(o)}}},spawn:function(t,a,o){try{var s=hi(t.apply(o,a||[]));return s&&typeof s.then=="function"?s:De.resolve(s)}catch(f){return At(f)}},currentTransaction:{get:function(){return Fe.trans||null}},waitFor:function(t,a){return a=De.resolve(typeof t=="function"?Kn.ignoreTransaction(t):t).timeout(a||6e4),Fe.trans?Fe.trans.waitFor(a):a},Promise:De,debug:{get:function(){return dt},set:function(t){Et(t)}},derive:x,extend:_,props:R,override:X,Events:Jn,on:On,liveQuery:sa,extendObservabilitySet:Sr,getByKeyPath:te,setByKeyPath:J,delByKeyPath:function(t,a){typeof a=="string"?J(t,a,void 0):"length"in a&&[].map.call(a,function(o){J(t,o,void 0)})},shallowClone:se,deepClone:be,getObjectDiff:pi,cmp:ft,asap:Z,minKey:-1/0,addons:[],connections:Hn,errnames:Ve,dependencies:Or,cache:Bn,semVer:"4.0.7",version:"4.0.7".split(".").map(function(t){return parseInt(t)}).reduce(function(t,a,o){return t+a/Math.pow(10,2*o)})})),Kn.maxKey=tr(Kn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(On(er,function(t){In||(t=new CustomEvent(Qr,{detail:t}),In=!0,dispatchEvent(t),In=!1)}),addEventListener(Qr,function(t){t=t.detail,In||_i(t)}));var Wn,In=!1,ua=function(){};return typeof BroadcastChannel<"u"&&((ua=function(){(Wn=new BroadcastChannel(Qr)).onmessage=function(t){return t.data&&_i(t.data)}})(),typeof Wn.unref=="function"&&Wn.unref(),On(er,function(t){In||Wn.postMessage(t)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(t){if(!Tn.disableBfCache&&t.persisted){dt&&console.debug("Dexie: handling persisted pagehide"),Wn!=null&&Wn.close();for(var a=0,o=Hn;a<o.length;a++)o[a].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(t){!Tn.disableBfCache&&t.persisted&&(dt&&console.debug("Dexie: handling persisted pageshow"),ua(),_i({all:new xt(-1/0,[[]])}))})),De.rejectionMapper=function(t,a){return!t||t instanceof w||t instanceof TypeError||t instanceof SyntaxError||!t.name||!G[t.name]?t:(a=new G[t.name](a||t.message,t),"stack"in t&&le(a,"stack",{get:function(){return this.inner.stack}}),a)},Et(dt),r(Tn,Object.freeze({__proto__:null,Dexie:Tn,liveQuery:sa,Entity:Vi,cmp:ft,PropModSymbol:Sn,PropModification:$n,replacePrefix:function(t,a){return new $n({replacePrefix:[t,a]})},add:function(t){return new $n({add:t})},remove:function(t){return new $n({remove:t})},default:Tn,RangeSet:xt,mergeRanges:ir,rangesOverlap:Er}),{default:Tn}),Tn})})(Wo);var Zl=Wo.exports;const Ii=xo(Zl),Na=Symbol.for("Dexie"),Ur=globalThis[Na]||(globalThis[Na]=Ii);if(Ii.semVer!==Ur.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Ii.semVer} and ${Ur.semVer}`);const{liveQuery:Hr,mergeRanges:wc,rangesOverlap:kc,RangeSet:Dc,cmp:Ec,Entity:Sc,PropModSymbol:Tc,PropModification:Cc,replacePrefix:Ac,add:Oc,remove:Ic}=Ur;var dr=(i=>(i.Accomodation="Accomodation",i.Food="Food & Drink",i.Transport="Transport",i.Other="Other",i))(dr||{});const Ba={Accomodation:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-house-fill" viewBox="0 0 16 16"><path d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L8 2.207l6.646 6.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293z"/><path d="m8 3.293 6 6V13.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5V9.293z"/></svg>',"Food & Drink":'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cup-hot-fill" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M.5 6a.5.5 0 0 0-.488.608l1.652 7.434A2.5 2.5 0 0 0 4.104 16h5.792a2.5 2.5 0 0 0 2.44-1.958l.131-.59a3 3 0 0 0 1.3-5.854l.221-.99A.5.5 0 0 0 13.5 6zM13 12.5a2 2 0 0 1-.316-.025l.867-3.898A2.001 2.001 0 0 1 13 12.5"/><path d="m4.4.8-.003.004-.014.019a4 4 0 0 0-.204.31 2 2 0 0 0-.141.267c-.026.06-.034.092-.037.103v.004a.6.6 0 0 0 .091.248c.075.133.178.272.308.445l.01.012c.118.158.26.347.37.543.112.2.22.455.22.745 0 .188-.065.368-.119.494a3 3 0 0 1-.202.388 5 5 0 0 1-.253.382l-.018.025-.005.008-.002.002A.5.5 0 0 1 3.6 4.2l.003-.004.014-.019a4 4 0 0 0 .204-.31 2 2 0 0 0 .141-.267c.026-.06.034-.092.037-.103a.6.6 0 0 0-.09-.252A4 4 0 0 0 3.6 2.8l-.01-.012a5 5 0 0 1-.37-.543A1.53 1.53 0 0 1 3 1.5c0-.188.065-.368.119-.494.059-.138.134-.274.202-.388a6 6 0 0 1 .253-.382l.025-.035A.5.5 0 0 1 4.4.8m3 0-.003.004-.014.019a4 4 0 0 0-.204.31 2 2 0 0 0-.141.267c-.026.06-.034.092-.037.103v.004a.6.6 0 0 0 .091.248c.075.133.178.272.308.445l.01.012c.118.158.26.347.37.543.112.2.22.455.22.745 0 .188-.065.368-.119.494a3 3 0 0 1-.202.388 5 5 0 0 1-.253.382l-.018.025-.005.008-.002.002A.5.5 0 0 1 6.6 4.2l.003-.004.014-.019a4 4 0 0 0 .204-.31 2 2 0 0 0 .141-.267c.026-.06.034-.092.037-.103a.6.6 0 0 0-.09-.252A4 4 0 0 0 6.6 2.8l-.01-.012a5 5 0 0 1-.37-.543A1.53 1.53 0 0 1 6 1.5c0-.188.065-.368.119-.494.059-.138.134-.274.202-.388a6 6 0 0 1 .253-.382l.025-.035A.5.5 0 0 1 7.4.8m3 0-.003.004-.014.019a4 4 0 0 0-.204.31 2 2 0 0 0-.141.267c-.026.06-.034.092-.037.103v.004a.6.6 0 0 0 .091.248c.075.133.178.272.308.445l.01.012c.118.158.26.347.37.543.112.2.22.455.22.745 0 .188-.065.368-.119.494a3 3 0 0 1-.202.388 5 5 0 0 1-.252.382l-.019.025-.005.008-.002.002A.5.5 0 0 1 9.6 4.2l.003-.004.014-.019a4 4 0 0 0 .204-.31 2 2 0 0 0 .141-.267c.026-.06.034-.092.037-.103a.6.6 0 0 0-.09-.252A4 4 0 0 0 9.6 2.8l-.01-.012a5 5 0 0 1-.37-.543A1.53 1.53 0 0 1 9 1.5c0-.188.065-.368.119-.494.059-.138.134-.274.202-.388a6 6 0 0 1 .253-.382l.025-.035A.5.5 0 0 1 10.4.8"/></svg>',Transport:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-car-front-fill" viewBox="0 0 16 16"> <path d="M2.52 3.515A2.5 2.5 0 0 1 4.82 2h6.362c1 0 1.904.596 2.298 1.515l.792 1.848c.075.175.21.319.38.404.5.25.855.715.965 1.262l.335 1.679q.05.242.049.49v.413c0 .814-.39 1.543-1 1.997V13.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-1.338c-1.292.048-2.745.088-4 .088s-2.708-.04-4-.088V13.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-1.892c-.61-.454-1-1.183-1-1.997v-.413a2.5 2.5 0 0 1 .049-.49l.335-1.68c.11-.546.465-1.012.964-1.261a.8.8 0 0 0 .381-.404l.792-1.848ZM3 10a1 1 0 1 0 0-2 1 1 0 0 0 0 2m10 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2M6 8a1 1 0 0 0 0 2h4a1 1 0 1 0 0-2zM2.906 5.189a.51.51 0 0 0 .497.731c.91-.073 3.35-.17 4.597-.17s3.688.097 4.597.17a.51.51 0 0 0 .497-.731l-.956-1.913A.5.5 0 0 0 11.691 3H4.309a.5.5 0 0 0-.447.276L2.906 5.19Z"/></svg>',Other:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-receipt" viewBox="0 0 16 16"><path d="M1.92.506a.5.5 0 0 1 .434.14L3 1.293l.646-.647a.5.5 0 0 1 .708 0L5 1.293l.646-.647a.5.5 0 0 1 .708 0L7 1.293l.646-.647a.5.5 0 0 1 .708 0L9 1.293l.646-.647a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 0 1 .801.13l.5 1A.5.5 0 0 1 15 2v12a.5.5 0 0 1-.053.224l-.5 1a.5.5 0 0 1-.8.13L13 14.707l-.646.647a.5.5 0 0 1-.708 0L11 14.707l-.646.647a.5.5 0 0 1-.708 0L9 14.707l-.646.647a.5.5 0 0 1-.708 0L7 14.707l-.646.647a.5.5 0 0 1-.708 0L5 14.707l-.646.647a.5.5 0 0 1-.708 0L3 14.707l-.646.647a.5.5 0 0 1-.801-.13l-.5-1A.5.5 0 0 1 1 14V2a.5.5 0 0 1 .053-.224l.5-1a.5.5 0 0 1 .367-.27m.217 1.338L2 2.118v11.764l.137.274.51-.51a.5.5 0 0 1 .707 0l.646.647.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.509.509.137-.274V2.118l-.137-.274-.51.51a.5.5 0 0 1-.707 0L12 1.707l-.646.647a.5.5 0 0 1-.708 0L10 1.707l-.646.647a.5.5 0 0 1-.708 0L8 1.707l-.646.647a.5.5 0 0 1-.708 0L6 1.707l-.646.647a.5.5 0 0 1-.708 0L4 1.707l-.646.647a.5.5 0 0 1-.708 0z"/><path d="M3 4.5a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5m8-6a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5"/></svg>'},Bt=new Ur("ExpensesDatabase");Bt.version(2).stores({trips:"++id, name, defaultCurrency, startDate, endDate",receipts:"++id, description, total, receiptDate, receiptType, currency, tripId, imageData"});Bt.version(3).stores({trips:"++id, name, defaultCurrency, startDate, startDateString, endDate, endDateString",receipts:"++id, description, total, receiptDate, receiptDateString, receiptType, currency, tripId, imageData"}).upgrade(i=>i.table("trips").toCollection().modify(e=>{e.startDateString=e.startDate.toDateString(),e.endDateString=e.endDate.toDateString()}).then(function(){i.table("receipts").toCollection().modify(e=>{e.receiptDateString=e.receiptDate.toDateString()})}));Bt.version(4).stores({trips:"++id, name, defaultCurrency, startDate, startDateString, endDate, endDateString",receipts:"++id, description, total, receiptDate, receiptDateString, receiptType, currency, tripId, imageData"}).upgrade(i=>i.table("receipts").where("receiptType").equals("Food").modify(e=>{e.receiptType="Food & Drink"}));const Dt={GBP:{symbol:"Â£",name:"British Pound Sterling",symbol_native:"Â£",decimal_digits:2,rounding:0,code:"GBP",name_plural:"British pounds sterling"},USD:{symbol:"$",name:"US Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"USD",name_plural:"US dollars"},CAD:{symbol:"CA$",name:"Canadian Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"CAD",name_plural:"Canadian dollars"},EUR:{symbol:"â¬",name:"Euro",symbol_native:"â¬",decimal_digits:2,rounding:0,code:"EUR",name_plural:"euros"},AED:{symbol:"AED",name:"United Arab Emirates Dirham",symbol_native:"Ø¯.Ø¥.â",decimal_digits:2,rounding:0,code:"AED",name_plural:"UAE dirhams"},AFN:{symbol:"Af",name:"Afghan Afghani",symbol_native:"Ø",decimal_digits:0,rounding:0,code:"AFN",name_plural:"Afghan Afghanis"},ALL:{symbol:"ALL",name:"Albanian Lek",symbol_native:"Lek",decimal_digits:0,rounding:0,code:"ALL",name_plural:"Albanian lekÃ«"},AMD:{symbol:"AMD",name:"Armenian Dram",symbol_native:"Õ¤Ö.",decimal_digits:0,rounding:0,code:"AMD",name_plural:"Armenian drams"},ARS:{symbol:"AR$",name:"Argentine Peso",symbol_native:"$",decimal_digits:2,rounding:0,code:"ARS",name_plural:"Argentine pesos"},AUD:{symbol:"AU$",name:"Australian Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"AUD",name_plural:"Australian dollars"},AZN:{symbol:"man.",name:"Azerbaijani Manat",symbol_native:"Ð¼Ð°Ð½.",decimal_digits:2,rounding:0,code:"AZN",name_plural:"Azerbaijani manats"},BAM:{symbol:"KM",name:"Bosnia-Herzegovina Convertible Mark",symbol_native:"KM",decimal_digits:2,rounding:0,code:"BAM",name_plural:"Bosnia-Herzegovina convertible marks"},BDT:{symbol:"Tk",name:"Bangladeshi Taka",symbol_native:"à§³",decimal_digits:2,rounding:0,code:"BDT",name_plural:"Bangladeshi takas"},BGN:{symbol:"BGN",name:"Bulgarian Lev",symbol_native:"Ð»Ð².",decimal_digits:2,rounding:0,code:"BGN",name_plural:"Bulgarian leva"},BHD:{symbol:"BD",name:"Bahraini Dinar",symbol_native:"Ø¯.Ø¨.â",decimal_digits:3,rounding:0,code:"BHD",name_plural:"Bahraini dinars"},BIF:{symbol:"FBu",name:"Burundian Franc",symbol_native:"FBu",decimal_digits:0,rounding:0,code:"BIF",name_plural:"Burundian francs"},BND:{symbol:"BN$",name:"Brunei Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"BND",name_plural:"Brunei dollars"},BOB:{symbol:"Bs",name:"Bolivian Boliviano",symbol_native:"Bs",decimal_digits:2,rounding:0,code:"BOB",name_plural:"Bolivian bolivianos"},BRL:{symbol:"R$",name:"Brazilian Real",symbol_native:"R$",decimal_digits:2,rounding:0,code:"BRL",name_plural:"Brazilian reals"},BWP:{symbol:"BWP",name:"Botswanan Pula",symbol_native:"P",decimal_digits:2,rounding:0,code:"BWP",name_plural:"Botswanan pulas"},BYN:{symbol:"Br",name:"Belarusian Ruble",symbol_native:"ÑÑÐ±.",decimal_digits:2,rounding:0,code:"BYN",name_plural:"Belarusian rubles"},BZD:{symbol:"BZ$",name:"Belize Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"BZD",name_plural:"Belize dollars"},CDF:{symbol:"CDF",name:"Congolese Franc",symbol_native:"FrCD",decimal_digits:2,rounding:0,code:"CDF",name_plural:"Congolese francs"},CHF:{symbol:"CHF",name:"Swiss Franc",symbol_native:"CHF",decimal_digits:2,rounding:.05,code:"CHF",name_plural:"Swiss francs"},CLP:{symbol:"CL$",name:"Chilean Peso",symbol_native:"$",decimal_digits:0,rounding:0,code:"CLP",name_plural:"Chilean pesos"},CNY:{symbol:"CNÂ¥",name:"Chinese Yuan",symbol_native:"CNÂ¥",decimal_digits:2,rounding:0,code:"CNY",name_plural:"Chinese yuan"},COP:{symbol:"CO$",name:"Colombian Peso",symbol_native:"$",decimal_digits:0,rounding:0,code:"COP",name_plural:"Colombian pesos"},CRC:{symbol:"â¡",name:"Costa Rican ColÃ³n",symbol_native:"â¡",decimal_digits:0,rounding:0,code:"CRC",name_plural:"Costa Rican colÃ³ns"},CVE:{symbol:"CV$",name:"Cape Verdean Escudo",symbol_native:"CV$",decimal_digits:2,rounding:0,code:"CVE",name_plural:"Cape Verdean escudos"},CZK:{symbol:"KÄ",name:"Czech Republic Koruna",symbol_native:"KÄ",decimal_digits:2,rounding:0,code:"CZK",name_plural:"Czech Republic korunas"},DJF:{symbol:"Fdj",name:"Djiboutian Franc",symbol_native:"Fdj",decimal_digits:0,rounding:0,code:"DJF",name_plural:"Djiboutian francs"},DKK:{symbol:"Dkr",name:"Danish Krone",symbol_native:"kr",decimal_digits:2,rounding:0,code:"DKK",name_plural:"Danish kroner"},DOP:{symbol:"RD$",name:"Dominican Peso",symbol_native:"RD$",decimal_digits:2,rounding:0,code:"DOP",name_plural:"Dominican pesos"},DZD:{symbol:"DA",name:"Algerian Dinar",symbol_native:"Ø¯.Ø¬.â",decimal_digits:2,rounding:0,code:"DZD",name_plural:"Algerian dinars"},EEK:{symbol:"Ekr",name:"Estonian Kroon",symbol_native:"kr",decimal_digits:2,rounding:0,code:"EEK",name_plural:"Estonian kroons"},EGP:{symbol:"EGP",name:"Egyptian Pound",symbol_native:"Ø¬.Ù.â",decimal_digits:2,rounding:0,code:"EGP",name_plural:"Egyptian pounds"},ERN:{symbol:"Nfk",name:"Eritrean Nakfa",symbol_native:"Nfk",decimal_digits:2,rounding:0,code:"ERN",name_plural:"Eritrean nakfas"},ETB:{symbol:"Br",name:"Ethiopian Birr",symbol_native:"Br",decimal_digits:2,rounding:0,code:"ETB",name_plural:"Ethiopian birrs"},GEL:{symbol:"GEL",name:"Georgian Lari",symbol_native:"GEL",decimal_digits:2,rounding:0,code:"GEL",name_plural:"Georgian laris"},GHS:{symbol:"GHâµ",name:"Ghanaian Cedi",symbol_native:"GHâµ",decimal_digits:2,rounding:0,code:"GHS",name_plural:"Ghanaian cedis"},GNF:{symbol:"FG",name:"Guinean Franc",symbol_native:"FG",decimal_digits:0,rounding:0,code:"GNF",name_plural:"Guinean francs"},GTQ:{symbol:"GTQ",name:"Guatemalan Quetzal",symbol_native:"Q",decimal_digits:2,rounding:0,code:"GTQ",name_plural:"Guatemalan quetzals"},HKD:{symbol:"HK$",name:"Hong Kong Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"HKD",name_plural:"Hong Kong dollars"},HNL:{symbol:"HNL",name:"Honduran Lempira",symbol_native:"L",decimal_digits:2,rounding:0,code:"HNL",name_plural:"Honduran lempiras"},HRK:{symbol:"kn",name:"Croatian Kuna",symbol_native:"kn",decimal_digits:2,rounding:0,code:"HRK",name_plural:"Croatian kunas"},HUF:{symbol:"Ft",name:"Hungarian Forint",symbol_native:"Ft",decimal_digits:0,rounding:0,code:"HUF",name_plural:"Hungarian forints"},IDR:{symbol:"Rp",name:"Indonesian Rupiah",symbol_native:"Rp",decimal_digits:0,rounding:0,code:"IDR",name_plural:"Indonesian rupiahs"},ILS:{symbol:"âª",name:"Israeli New Sheqel",symbol_native:"âª",decimal_digits:2,rounding:0,code:"ILS",name_plural:"Israeli new sheqels"},INR:{symbol:"Rs",name:"Indian Rupee",symbol_native:"à¦à¦à¦¾",decimal_digits:2,rounding:0,code:"INR",name_plural:"Indian rupees"},IQD:{symbol:"IQD",name:"Iraqi Dinar",symbol_native:"Ø¯.Ø¹.â",decimal_digits:0,rounding:0,code:"IQD",name_plural:"Iraqi dinars"},IRR:{symbol:"IRR",name:"Iranian Rial",symbol_native:"ï·¼",decimal_digits:0,rounding:0,code:"IRR",name_plural:"Iranian rials"},ISK:{symbol:"Ikr",name:"Icelandic KrÃ³na",symbol_native:"kr",decimal_digits:0,rounding:0,code:"ISK",name_plural:"Icelandic krÃ³nur"},JMD:{symbol:"J$",name:"Jamaican Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"JMD",name_plural:"Jamaican dollars"},JOD:{symbol:"JD",name:"Jordanian Dinar",symbol_native:"Ø¯.Ø£.â",decimal_digits:3,rounding:0,code:"JOD",name_plural:"Jordanian dinars"},JPY:{symbol:"Â¥",name:"Japanese Yen",symbol_native:"ï¿¥",decimal_digits:0,rounding:0,code:"JPY",name_plural:"Japanese yen"},KES:{symbol:"Ksh",name:"Kenyan Shilling",symbol_native:"Ksh",decimal_digits:2,rounding:0,code:"KES",name_plural:"Kenyan shillings"},KHR:{symbol:"KHR",name:"Cambodian Riel",symbol_native:"á",decimal_digits:2,rounding:0,code:"KHR",name_plural:"Cambodian riels"},KMF:{symbol:"CF",name:"Comorian Franc",symbol_native:"FC",decimal_digits:0,rounding:0,code:"KMF",name_plural:"Comorian francs"},KRW:{symbol:"â©",name:"South Korean Won",symbol_native:"â©",decimal_digits:0,rounding:0,code:"KRW",name_plural:"South Korean won"},KWD:{symbol:"KD",name:"Kuwaiti Dinar",symbol_native:"Ø¯.Ù.â",decimal_digits:3,rounding:0,code:"KWD",name_plural:"Kuwaiti dinars"},KZT:{symbol:"KZT",name:"Kazakhstani Tenge",symbol_native:"ÑÒ£Ð³.",decimal_digits:2,rounding:0,code:"KZT",name_plural:"Kazakhstani tenges"},LBP:{symbol:"L.L.",name:"Lebanese Pound",symbol_native:"Ù.Ù.â",decimal_digits:0,rounding:0,code:"LBP",name_plural:"Lebanese pounds"},LKR:{symbol:"SLRs",name:"Sri Lankan Rupee",symbol_native:"SL Re",decimal_digits:2,rounding:0,code:"LKR",name_plural:"Sri Lankan rupees"},LTL:{symbol:"Lt",name:"Lithuanian Litas",symbol_native:"Lt",decimal_digits:2,rounding:0,code:"LTL",name_plural:"Lithuanian litai"},LVL:{symbol:"Ls",name:"Latvian Lats",symbol_native:"Ls",decimal_digits:2,rounding:0,code:"LVL",name_plural:"Latvian lati"},LYD:{symbol:"LD",name:"Libyan Dinar",symbol_native:"Ø¯.Ù.â",decimal_digits:3,rounding:0,code:"LYD",name_plural:"Libyan dinars"},MAD:{symbol:"MAD",name:"Moroccan Dirham",symbol_native:"Ø¯.Ù.â",decimal_digits:2,rounding:0,code:"MAD",name_plural:"Moroccan dirhams"},MDL:{symbol:"MDL",name:"Moldovan Leu",symbol_native:"MDL",decimal_digits:2,rounding:0,code:"MDL",name_plural:"Moldovan lei"},MGA:{symbol:"MGA",name:"Malagasy Ariary",symbol_native:"MGA",decimal_digits:0,rounding:0,code:"MGA",name_plural:"Malagasy Ariaries"},MKD:{symbol:"MKD",name:"Macedonian Denar",symbol_native:"MKD",decimal_digits:2,rounding:0,code:"MKD",name_plural:"Macedonian denari"},MMK:{symbol:"MMK",name:"Myanma Kyat",symbol_native:"K",decimal_digits:0,rounding:0,code:"MMK",name_plural:"Myanma kyats"},MOP:{symbol:"MOP$",name:"Macanese Pataca",symbol_native:"MOP$",decimal_digits:2,rounding:0,code:"MOP",name_plural:"Macanese patacas"},MUR:{symbol:"MURs",name:"Mauritian Rupee",symbol_native:"MURs",decimal_digits:0,rounding:0,code:"MUR",name_plural:"Mauritian rupees"},MXN:{symbol:"MX$",name:"Mexican Peso",symbol_native:"$",decimal_digits:2,rounding:0,code:"MXN",name_plural:"Mexican pesos"},MYR:{symbol:"RM",name:"Malaysian Ringgit",symbol_native:"RM",decimal_digits:2,rounding:0,code:"MYR",name_plural:"Malaysian ringgits"},MZN:{symbol:"MTn",name:"Mozambican Metical",symbol_native:"MTn",decimal_digits:2,rounding:0,code:"MZN",name_plural:"Mozambican meticals"},NAD:{symbol:"N$",name:"Namibian Dollar",symbol_native:"N$",decimal_digits:2,rounding:0,code:"NAD",name_plural:"Namibian dollars"},NGN:{symbol:"â¦",name:"Nigerian Naira",symbol_native:"â¦",decimal_digits:2,rounding:0,code:"NGN",name_plural:"Nigerian nairas"},NIO:{symbol:"C$",name:"Nicaraguan CÃ³rdoba",symbol_native:"C$",decimal_digits:2,rounding:0,code:"NIO",name_plural:"Nicaraguan cÃ³rdobas"},NOK:{symbol:"Nkr",name:"Norwegian Krone",symbol_native:"kr",decimal_digits:2,rounding:0,code:"NOK",name_plural:"Norwegian kroner"},NPR:{symbol:"NPRs",name:"Nepalese Rupee",symbol_native:"à¤¨à¥à¤°à¥",decimal_digits:2,rounding:0,code:"NPR",name_plural:"Nepalese rupees"},NZD:{symbol:"NZ$",name:"New Zealand Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"NZD",name_plural:"New Zealand dollars"},OMR:{symbol:"OMR",name:"Omani Rial",symbol_native:"Ø±.Ø¹.â",decimal_digits:3,rounding:0,code:"OMR",name_plural:"Omani rials"},PAB:{symbol:"B/.",name:"Panamanian Balboa",symbol_native:"B/.",decimal_digits:2,rounding:0,code:"PAB",name_plural:"Panamanian balboas"},PEN:{symbol:"S/.",name:"Peruvian Nuevo Sol",symbol_native:"S/.",decimal_digits:2,rounding:0,code:"PEN",name_plural:"Peruvian nuevos soles"},PHP:{symbol:"â±",name:"Philippine Peso",symbol_native:"â±",decimal_digits:2,rounding:0,code:"PHP",name_plural:"Philippine pesos"},PKR:{symbol:"PKRs",name:"Pakistani Rupee",symbol_native:"â¨",decimal_digits:0,rounding:0,code:"PKR",name_plural:"Pakistani rupees"},PLN:{symbol:"zÅ",name:"Polish Zloty",symbol_native:"zÅ",decimal_digits:2,rounding:0,code:"PLN",name_plural:"Polish zlotys"},PYG:{symbol:"â²",name:"Paraguayan Guarani",symbol_native:"â²",decimal_digits:0,rounding:0,code:"PYG",name_plural:"Paraguayan guaranis"},QAR:{symbol:"QR",name:"Qatari Rial",symbol_native:"Ø±.Ù.â",decimal_digits:2,rounding:0,code:"QAR",name_plural:"Qatari rials"},RON:{symbol:"RON",name:"Romanian Leu",symbol_native:"RON",decimal_digits:2,rounding:0,code:"RON",name_plural:"Romanian lei"},RSD:{symbol:"din.",name:"Serbian Dinar",symbol_native:"Ð´Ð¸Ð½.",decimal_digits:0,rounding:0,code:"RSD",name_plural:"Serbian dinars"},RUB:{symbol:"RUB",name:"Russian Ruble",symbol_native:"â½.",decimal_digits:2,rounding:0,code:"RUB",name_plural:"Russian rubles"},RWF:{symbol:"RWF",name:"Rwandan Franc",symbol_native:"FR",decimal_digits:0,rounding:0,code:"RWF",name_plural:"Rwandan francs"},SAR:{symbol:"SR",name:"Saudi Riyal",symbol_native:"Ø±.Ø³.â",decimal_digits:2,rounding:0,code:"SAR",name_plural:"Saudi riyals"},SDG:{symbol:"SDG",name:"Sudanese Pound",symbol_native:"SDG",decimal_digits:2,rounding:0,code:"SDG",name_plural:"Sudanese pounds"},SEK:{symbol:"Skr",name:"Swedish Krona",symbol_native:"kr",decimal_digits:2,rounding:0,code:"SEK",name_plural:"Swedish kronor"},SGD:{symbol:"S$",name:"Singapore Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"SGD",name_plural:"Singapore dollars"},SOS:{symbol:"Ssh",name:"Somali Shilling",symbol_native:"Ssh",decimal_digits:0,rounding:0,code:"SOS",name_plural:"Somali shillings"},SYP:{symbol:"SYÂ£",name:"Syrian Pound",symbol_native:"Ù.Ø³.â",decimal_digits:0,rounding:0,code:"SYP",name_plural:"Syrian pounds"},THB:{symbol:"à¸¿",name:"Thai Baht",symbol_native:"à¸¿",decimal_digits:2,rounding:0,code:"THB",name_plural:"Thai baht"},TND:{symbol:"DT",name:"Tunisian Dinar",symbol_native:"Ø¯.Øª.â",decimal_digits:3,rounding:0,code:"TND",name_plural:"Tunisian dinars"},TOP:{symbol:"T$",name:"Tongan PaÊ»anga",symbol_native:"T$",decimal_digits:2,rounding:0,code:"TOP",name_plural:"Tongan paÊ»anga"},TRY:{symbol:"TL",name:"Turkish Lira",symbol_native:"TL",decimal_digits:2,rounding:0,code:"TRY",name_plural:"Turkish Lira"},TTD:{symbol:"TT$",name:"Trinidad and Tobago Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"TTD",name_plural:"Trinidad and Tobago dollars"},TWD:{symbol:"NT$",name:"New Taiwan Dollar",symbol_native:"NT$",decimal_digits:2,rounding:0,code:"TWD",name_plural:"New Taiwan dollars"},TZS:{symbol:"TSh",name:"Tanzanian Shilling",symbol_native:"TSh",decimal_digits:0,rounding:0,code:"TZS",name_plural:"Tanzanian shillings"},UAH:{symbol:"â´",name:"Ukrainian Hryvnia",symbol_native:"â´",decimal_digits:2,rounding:0,code:"UAH",name_plural:"Ukrainian hryvnias"},UGX:{symbol:"USh",name:"Ugandan Shilling",symbol_native:"USh",decimal_digits:0,rounding:0,code:"UGX",name_plural:"Ugandan shillings"},UYU:{symbol:"$U",name:"Uruguayan Peso",symbol_native:"$",decimal_digits:2,rounding:0,code:"UYU",name_plural:"Uruguayan pesos"},UZS:{symbol:"UZS",name:"Uzbekistan Som",symbol_native:"UZS",decimal_digits:0,rounding:0,code:"UZS",name_plural:"Uzbekistan som"},VEF:{symbol:"Bs.F.",name:"Venezuelan BolÃ­var",symbol_native:"Bs.F.",decimal_digits:2,rounding:0,code:"VEF",name_plural:"Venezuelan bolÃ­vars"},VND:{symbol:"â«",name:"Vietnamese Dong",symbol_native:"â«",decimal_digits:0,rounding:0,code:"VND",name_plural:"Vietnamese dong"},XAF:{symbol:"FCFA",name:"CFA Franc BEAC",symbol_native:"FCFA",decimal_digits:0,rounding:0,code:"XAF",name_plural:"CFA francs BEAC"},XOF:{symbol:"CFA",name:"CFA Franc BCEAO",symbol_native:"CFA",decimal_digits:0,rounding:0,code:"XOF",name_plural:"CFA francs BCEAO"},YER:{symbol:"YR",name:"Yemeni Rial",symbol_native:"Ø±.Ù.â",decimal_digits:0,rounding:0,code:"YER",name_plural:"Yemeni rials"},ZAR:{symbol:"R",name:"South African Rand",symbol_native:"R",decimal_digits:2,rounding:0,code:"ZAR",name_plural:"South African rand"},ZMK:{symbol:"ZK",name:"Zambian Kwacha",symbol_native:"ZK",decimal_digits:0,rounding:0,code:"ZMK",name_plural:"Zambian kwachas"},ZWL:{symbol:"ZWL$",name:"Zimbabwean Dollar",symbol_native:"ZWL$",decimal_digits:0,rounding:0,code:"ZWL",name_plural:"Zimbabwean Dollar"}};function Ka(i,e,n){const r=i.slice();return r[9]=e[n],r}function Fa(i){let e,n=i[9]+"",r,l,c=Dt[i[9]].symbol+"",u,g;return{c(){e=S("option"),r=Le(n),l=Le(" ("),u=Le(c),g=Le(`)
          `),this.h()},l(_){e=T(_,"OPTION",{});var m=H(e);r=Re(m,n),l=Re(m," ("),u=Re(m,c),g=Re(m,`)
          `),m.forEach(b),this.h()},h(){e.__value=i[9],ot(e,e.__value)},m(_,m){fe(_,e,m),p(e,r),p(e,l),p(e,u),p(e,g)},p:kt,d(_){_&&b(e)}}}function Jl(i){let e,n,r,l="Add New Trip",c,u,g,_="Trip Name",m,v,k,R,U,le="Trip Currency",x,q,B,I,X,E="Trip Start",Z,te,J,se,me,we,Ne="Trip End",ge,be,ue,Oe,Ee,oe,Ae="Add Trip",O,N,Y="Cancel",_e,w,$,Te=Ze(Object.keys(Dt)),de=[];for(let ce=0;ce<Te.length;ce+=1)de[ce]=Fa(Ka(i,Te,ce));function Ve(ce){i[7](ce)}let Ie={format:"yyyy-MM-dd",closeOnSelection:!0,id:"tripStart"};i[2]!==void 0&&(Ie.value=i[2]),te=new Yn({props:Ie}),nn.push(()=>Mn(te,"value",Ve));function ye(ce){i[8](ce)}let G={format:"yyyy-MM-dd",closeOnSelection:!0,min:i[2],id:"tripEnd"};return i[3]!==void 0&&(G.value=i[3]),be=new Yn({props:G}),nn.push(()=>Mn(be,"value",ye)),{c(){e=S("div"),n=S("form"),r=S("h1"),r.textContent=l,c=ie(),u=S("div"),g=S("label"),g.textContent=_,m=ie(),v=S("input"),k=ie(),R=S("div"),U=S("label"),U.textContent=le,x=ie(),q=S("select");for(let ce=0;ce<de.length;ce+=1)de[ce].c();B=ie(),I=S("div"),X=S("label"),X.textContent=E,Z=ie(),Vt(te.$$.fragment),se=ie(),me=S("div"),we=S("label"),we.textContent=Ne,ge=ie(),Vt(be.$$.fragment),Oe=ie(),Ee=S("div"),oe=S("button"),oe.textContent=Ae,O=ie(),N=S("a"),N.textContent=Y,this.h()},l(ce){e=T(ce,"DIV",{class:!0});var ke=H(e);n=T(ke,"FORM",{});var ze=H(n);r=T(ze,"H1",{"data-svelte-h":!0}),Ge(r)!=="svelte-1x3twms"&&(r.textContent=l),c=ae(ze),u=T(ze,"DIV",{class:!0});var Me=H(u);g=T(Me,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ge(g)!=="svelte-1y8z10u"&&(g.textContent=_),m=ae(Me),v=T(Me,"INPUT",{id:!0,class:!0,type:!0}),Me.forEach(b),k=ae(ze),R=T(ze,"DIV",{class:!0});var A=H(R);U=T(A,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ge(U)!=="svelte-1fzihue"&&(U.textContent=le),x=ae(A),q=T(A,"SELECT",{id:!0,class:!0});var qe=H(q);for(let it=0;it<de.length;it+=1)de[it].l(qe);qe.forEach(b),A.forEach(b),B=ae(ze),I=T(ze,"DIV",{class:!0});var Be=H(I);X=T(Be,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ge(X)!=="svelte-4n7gli"&&(X.textContent=E),Z=ae(Be),zt(te.$$.fragment,Be),Be.forEach(b),se=ae(ze),me=T(ze,"DIV",{class:!0});var he=H(me);we=T(he,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ge(we)!=="svelte-1dn7717"&&(we.textContent=Ne),ge=ae(he),zt(be.$$.fragment,he),he.forEach(b),Oe=ae(ze),Ee=T(ze,"DIV",{class:!0});var We=H(Ee);oe=T(We,"BUTTON",{class:!0,"data-svelte-h":!0}),Ge(oe)!=="svelte-ik7jo4"&&(oe.textContent=Ae),O=ae(We),N=T(We,"A",{href:!0,class:!0,"data-svelte-h":!0}),Ge(N)!=="svelte-wj5j6d"&&(N.textContent=Y),We.forEach(b),ze.forEach(b),ke.forEach(b),this.h()},h(){h(g,"for","tripName"),h(g,"class","form-label"),h(v,"id","tripName"),h(v,"class","form-control"),h(v,"type","text"),h(u,"class","mb-3"),h(U,"for","tripCurrency"),h(U,"class","form-label"),h(q,"id","tripCurrency"),h(q,"class","form-control"),i[1]===void 0&&Vn(()=>i[6].call(q)),h(R,"class","mb-3"),h(X,"for","tripStart"),h(X,"class","form-label"),h(I,"class","mb-3"),h(we,"for","tripStart"),h(we,"class","form-label"),h(me,"class","mb-3"),h(oe,"class","btn btn-primary"),h(N,"href","#/"),h(N,"class","btn btn-outline-primary"),h(Ee,"class","gap-3 d-grid d-md-block"),h(e,"class","w-100")},m(ce,ke){fe(ce,e,ke),p(e,n),p(n,r),p(n,c),p(n,u),p(u,g),p(u,m),p(u,v),ot(v,i[0]),p(n,k),p(n,R),p(R,U),p(R,x),p(R,q);for(let ze=0;ze<de.length;ze+=1)de[ze]&&de[ze].m(q,null);Jt(q,i[1],!0),p(n,B),p(n,I),p(I,X),p(I,Z),Ut(te,I,null),p(n,se),p(n,me),p(me,we),p(me,ge),Ut(be,me,null),p(n,Oe),p(n,Ee),p(Ee,oe),p(Ee,O),p(Ee,N),_e=!0,w||($=[Ye(v,"input",i[5]),Ye(q,"change",i[6]),Ye(oe,"click",i[4])],w=!0)},p(ce,[ke]){if(ke&1&&v.value!==ce[0]&&ot(v,ce[0]),ke&0){Te=Ze(Object.keys(Dt));let A;for(A=0;A<Te.length;A+=1){const qe=Ka(ce,Te,A);de[A]?de[A].p(qe,ke):(de[A]=Fa(qe),de[A].c(),de[A].m(q,null))}for(;A<de.length;A+=1)de[A].d(1);de.length=Te.length}ke&2&&Jt(q,ce[1]);const ze={};!J&&ke&4&&(J=!0,ze.value=ce[2],Pn(()=>J=!1)),te.$set(ze);const Me={};ke&4&&(Me.min=ce[2]),!ue&&ke&8&&(ue=!0,Me.value=ce[3],Pn(()=>ue=!1)),be.$set(Me)},i(ce){_e||(rt(te.$$.fragment,ce),rt(be.$$.fragment,ce),_e=!0)},o(ce){st(te.$$.fragment,ce),st(be.$$.fragment,ce),_e=!1},d(ce){ce&&b(e),Lt(de,ce),Ht(te),Ht(be),w=!1,kn($)}}}function Ql(i,e,n){let r="My Trip",l="GBP",c=new Date,u=new Date;async function g(){try{const R=await Bt.trips.add({name:r,defaultCurrency:l,startDate:c,startDateString:c.toDateString(),endDate:u,endDateString:u.toDateString()});window.location.href="#/trip/"+R}catch{window.location.href="#/"}}function _(){r=this.value,n(0,r)}function m(){l=Gn(this),n(1,l)}function v(R){c=R,n(2,c)}function k(R){u=R,n(3,u)}return[r,l,c,u,g,_,m,v,k]}class $l extends ln{constructor(e){super(),sn(this,e,Ql,Jl,rn,{})}}/*!
  * PhotoSwipe Lightbox 5.4.4 - https://photoswipe.com
  * (c) 2024 Dmytro Semenov
  */function lr(i,e,n){const r=document.createElement(e);return i&&(r.className=i),n&&n.appendChild(r),r}function Xl(i,e,n){let r=`translate3d(${i}px,0px,0)`;return n!==void 0&&(r+=` scale3d(${n},${n},1)`),r}function Pi(i,e,n){i.style.width=typeof e=="number"?`${e}px`:e,i.style.height=typeof n=="number"?`${n}px`:n}const cn={IDLE:"idle",LOADING:"loading",LOADED:"loaded",ERROR:"error"};function es(i){return"button"in i&&i.button===1||i.ctrlKey||i.metaKey||i.altKey||i.shiftKey}function sr(i,e,n=document){let r=[];if(i instanceof Element)r=[i];else if(i instanceof NodeList||Array.isArray(i))r=Array.from(i);else{const l=typeof i=="string"?i:e;l&&(r=Array.from(n.querySelectorAll(l)))}return r}function ts(i){return typeof i=="function"&&i.prototype&&i.prototype.goTo}function ja(){return!!(navigator.vendor&&navigator.vendor.match(/apple/i))}class ns{constructor(e,n){this.type=e,this.defaultPrevented=!1,n&&Object.assign(this,n)}preventDefault(){this.defaultPrevented=!0}}class rs{constructor(){this._listeners={},this._filters={},this.pswp=void 0,this.options=void 0}addFilter(e,n,r=100){var l,c,u;this._filters[e]||(this._filters[e]=[]),(l=this._filters[e])===null||l===void 0||l.push({fn:n,priority:r}),(c=this._filters[e])===null||c===void 0||c.sort((g,_)=>g.priority-_.priority),(u=this.pswp)===null||u===void 0||u.addFilter(e,n,r)}removeFilter(e,n){this._filters[e]&&(this._filters[e]=this._filters[e].filter(r=>r.fn!==n)),this.pswp&&this.pswp.removeFilter(e,n)}applyFilters(e,...n){var r;return(r=this._filters[e])===null||r===void 0||r.forEach(l=>{n[0]=l.fn.apply(this,n)}),n[0]}on(e,n){var r,l;this._listeners[e]||(this._listeners[e]=[]),(r=this._listeners[e])===null||r===void 0||r.push(n),(l=this.pswp)===null||l===void 0||l.on(e,n)}off(e,n){var r;this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter(l=>n!==l)),(r=this.pswp)===null||r===void 0||r.off(e,n)}dispatch(e,n){var r;if(this.pswp)return this.pswp.dispatch(e,n);const l=new ns(e,n);return(r=this._listeners[e])===null||r===void 0||r.forEach(c=>{c.call(this,l)}),l}}class is{constructor(e,n){if(this.element=lr("pswp__img pswp__img--placeholder",e?"img":"div",n),e){const r=this.element;r.decoding="async",r.alt="",r.src=e,r.setAttribute("role","presentation")}this.element.setAttribute("aria-hidden","true")}setDisplayedSize(e,n){this.element&&(this.element.tagName==="IMG"?(Pi(this.element,250,"auto"),this.element.style.transformOrigin="0 0",this.element.style.transform=Xl(0,0,e/250)):Pi(this.element,e,n))}destroy(){var e;(e=this.element)!==null&&e!==void 0&&e.parentNode&&this.element.remove(),this.element=null}}class as{constructor(e,n,r){this.instance=n,this.data=e,this.index=r,this.element=void 0,this.placeholder=void 0,this.slide=void 0,this.displayedImageWidth=0,this.displayedImageHeight=0,this.width=Number(this.data.w)||Number(this.data.width)||0,this.height=Number(this.data.h)||Number(this.data.height)||0,this.isAttached=!1,this.hasSlide=!1,this.isDecoding=!1,this.state=cn.IDLE,this.data.type?this.type=this.data.type:this.data.src?this.type="image":this.type="html",this.instance.dispatch("contentInit",{content:this})}removePlaceholder(){this.placeholder&&!this.keepPlaceholder()&&setTimeout(()=>{this.placeholder&&(this.placeholder.destroy(),this.placeholder=void 0)},1e3)}load(e,n){if(this.slide&&this.usePlaceholder())if(this.placeholder){const r=this.placeholder.element;r&&!r.parentElement&&this.slide.container.prepend(r)}else{const r=this.instance.applyFilters("placeholderSrc",this.data.msrc&&this.slide.isFirstSlide?this.data.msrc:!1,this);this.placeholder=new is(r,this.slide.container)}this.element&&!n||this.instance.dispatch("contentLoad",{content:this,isLazy:e}).defaultPrevented||(this.isImageContent()?(this.element=lr("pswp__img","img"),this.displayedImageWidth&&this.loadImage(e)):(this.element=lr("pswp__content","div"),this.element.innerHTML=this.data.html||""),n&&this.slide&&this.slide.updateContentSize(!0))}loadImage(e){var n,r;if(!this.isImageContent()||!this.element||this.instance.dispatch("contentLoadImage",{content:this,isLazy:e}).defaultPrevented)return;const l=this.element;this.updateSrcsetSizes(),this.data.srcset&&(l.srcset=this.data.srcset),l.src=(n=this.data.src)!==null&&n!==void 0?n:"",l.alt=(r=this.data.alt)!==null&&r!==void 0?r:"",this.state=cn.LOADING,l.complete?this.onLoaded():(l.onload=()=>{this.onLoaded()},l.onerror=()=>{this.onError()})}setSlide(e){this.slide=e,this.hasSlide=!0,this.instance=e.pswp}onLoaded(){this.state=cn.LOADED,this.slide&&this.element&&(this.instance.dispatch("loadComplete",{slide:this.slide,content:this}),this.slide.isActive&&this.slide.heavyAppended&&!this.element.parentNode&&(this.append(),this.slide.updateContentSize(!0)),(this.state===cn.LOADED||this.state===cn.ERROR)&&this.removePlaceholder())}onError(){this.state=cn.ERROR,this.slide&&(this.displayError(),this.instance.dispatch("loadComplete",{slide:this.slide,isError:!0,content:this}),this.instance.dispatch("loadError",{slide:this.slide,content:this}))}isLoading(){return this.instance.applyFilters("isContentLoading",this.state===cn.LOADING,this)}isError(){return this.state===cn.ERROR}isImageContent(){return this.type==="image"}setDisplayedSize(e,n){if(this.element&&(this.placeholder&&this.placeholder.setDisplayedSize(e,n),!this.instance.dispatch("contentResize",{content:this,width:e,height:n}).defaultPrevented&&(Pi(this.element,e,n),this.isImageContent()&&!this.isError()))){const r=!this.displayedImageWidth&&e;this.displayedImageWidth=e,this.displayedImageHeight=n,r?this.loadImage(!1):this.updateSrcsetSizes(),this.slide&&this.instance.dispatch("imageSizeChange",{slide:this.slide,width:e,height:n,content:this})}}isZoomable(){return this.instance.applyFilters("isContentZoomable",this.isImageContent()&&this.state!==cn.ERROR,this)}updateSrcsetSizes(){if(!this.isImageContent()||!this.element||!this.data.srcset)return;const e=this.element,n=this.instance.applyFilters("srcsetSizesWidth",this.displayedImageWidth,this);(!e.dataset.largestUsedSize||n>parseInt(e.dataset.largestUsedSize,10))&&(e.sizes=n+"px",e.dataset.largestUsedSize=String(n))}usePlaceholder(){return this.instance.applyFilters("useContentPlaceholder",this.isImageContent(),this)}lazyLoad(){this.instance.dispatch("contentLazyLoad",{content:this}).defaultPrevented||this.load(!0)}keepPlaceholder(){return this.instance.applyFilters("isKeepingPlaceholder",this.isLoading(),this)}destroy(){this.hasSlide=!1,this.slide=void 0,!this.instance.dispatch("contentDestroy",{content:this}).defaultPrevented&&(this.remove(),this.placeholder&&(this.placeholder.destroy(),this.placeholder=void 0),this.isImageContent()&&this.element&&(this.element.onload=null,this.element.onerror=null,this.element=void 0))}displayError(){if(this.slide){var e,n;let r=lr("pswp__error-msg","div");r.innerText=(e=(n=this.instance.options)===null||n===void 0?void 0:n.errorMsg)!==null&&e!==void 0?e:"",r=this.instance.applyFilters("contentErrorElement",r,this),this.element=lr("pswp__content pswp__error-msg-container","div"),this.element.appendChild(r),this.slide.container.innerText="",this.slide.container.appendChild(this.element),this.slide.updateContentSize(!0),this.removePlaceholder()}}append(){if(this.isAttached||!this.element)return;if(this.isAttached=!0,this.state===cn.ERROR){this.displayError();return}if(this.instance.dispatch("contentAppend",{content:this}).defaultPrevented)return;const e="decode"in this.element;this.isImageContent()?e&&this.slide&&(!this.slide.isActive||ja())?(this.isDecoding=!0,this.element.decode().catch(()=>{}).finally(()=>{this.isDecoding=!1,this.appendImage()})):this.appendImage():this.slide&&!this.element.parentNode&&this.slide.container.appendChild(this.element)}activate(){this.instance.dispatch("contentActivate",{content:this}).defaultPrevented||!this.slide||(this.isImageContent()&&this.isDecoding&&!ja()?this.appendImage():this.isError()&&this.load(!1,!0),this.slide.holderElement&&this.slide.holderElement.setAttribute("aria-hidden","false"))}deactivate(){this.instance.dispatch("contentDeactivate",{content:this}),this.slide&&this.slide.holderElement&&this.slide.holderElement.setAttribute("aria-hidden","true")}remove(){this.isAttached=!1,!this.instance.dispatch("contentRemove",{content:this}).defaultPrevented&&(this.element&&this.element.parentNode&&this.element.remove(),this.placeholder&&this.placeholder.element&&this.placeholder.element.remove())}appendImage(){this.isAttached&&(this.instance.dispatch("contentAppendImage",{content:this}).defaultPrevented||(this.slide&&this.element&&!this.element.parentNode&&this.slide.container.appendChild(this.element),(this.state===cn.LOADED||this.state===cn.ERROR)&&this.removePlaceholder()))}}function os(i,e){if(i.getViewportSizeFn){const n=i.getViewportSizeFn(i,e);if(n)return n}return{x:document.documentElement.clientWidth,y:window.innerHeight}}function Pr(i,e,n,r,l){let c=0;if(e.paddingFn)c=e.paddingFn(n,r,l)[i];else if(e.padding)c=e.padding[i];else{const u="padding"+i[0].toUpperCase()+i.slice(1);e[u]&&(c=e[u])}return Number(c)||0}function ls(i,e,n,r){return{x:e.x-Pr("left",i,e,n,r)-Pr("right",i,e,n,r),y:e.y-Pr("top",i,e,n,r)-Pr("bottom",i,e,n,r)}}const Va=4e3;class ss{constructor(e,n,r,l){this.pswp=l,this.options=e,this.itemData=n,this.index=r,this.panAreaSize=null,this.elementSize=null,this.fit=1,this.fill=1,this.vFill=1,this.initial=1,this.secondary=1,this.max=1,this.min=1}update(e,n,r){const l={x:e,y:n};this.elementSize=l,this.panAreaSize=r;const c=r.x/l.x,u=r.y/l.y;this.fit=Math.min(1,c<u?c:u),this.fill=Math.min(1,c>u?c:u),this.vFill=Math.min(1,u),this.initial=this._getInitial(),this.secondary=this._getSecondary(),this.max=Math.max(this.initial,this.secondary,this._getMax()),this.min=Math.min(this.fit,this.initial,this.secondary),this.pswp&&this.pswp.dispatch("zoomLevelsUpdate",{zoomLevels:this,slideData:this.itemData})}_parseZoomLevelOption(e){const n=e+"ZoomLevel",r=this.options[n];if(r)return typeof r=="function"?r(this):r==="fill"?this.fill:r==="fit"?this.fit:Number(r)}_getSecondary(){let e=this._parseZoomLevelOption("secondary");return e||(e=Math.min(1,this.fit*3),this.elementSize&&e*this.elementSize.x>Va&&(e=Va/this.elementSize.x),e)}_getInitial(){return this._parseZoomLevelOption("initial")||this.fit}_getMax(){return this._parseZoomLevelOption("max")||Math.max(1,this.fit*4)}}function Go(i,e,n){const r=e.createContentFromData(i,n);let l;const{options:c}=e;if(c){l=new ss(c,i,-1);let u;e.pswp?u=e.pswp.viewportSize:u=os(c,e);const g=ls(c,u,i,n);l.update(r.width,r.height,g)}return r.lazyLoad(),l&&r.setDisplayedSize(Math.ceil(r.width*l.initial),Math.ceil(r.height*l.initial)),r}function us(i,e){const n=e.getItemData(i);if(!e.dispatch("lazyLoadSlide",{index:i,itemData:n}).defaultPrevented)return Go(n,e,i)}class cs extends rs{getNumItems(){var e;let n=0;const r=(e=this.options)===null||e===void 0?void 0:e.dataSource;r&&"length"in r?n=r.length:r&&"gallery"in r&&(r.items||(r.items=this._getGalleryDOMElements(r.gallery)),r.items&&(n=r.items.length));const l=this.dispatch("numItems",{dataSource:r,numItems:n});return this.applyFilters("numItems",l.numItems,r)}createContentFromData(e,n){return new as(e,this,n)}getItemData(e){var n;const r=(n=this.options)===null||n===void 0?void 0:n.dataSource;let l={};Array.isArray(r)?l=r[e]:r&&"gallery"in r&&(r.items||(r.items=this._getGalleryDOMElements(r.gallery)),l=r.items[e]);let c=l;c instanceof Element&&(c=this._domElementToItemData(c));const u=this.dispatch("itemData",{itemData:c||{},index:e});return this.applyFilters("itemData",u.itemData,e)}_getGalleryDOMElements(e){var n,r;return(n=this.options)!==null&&n!==void 0&&n.children||(r=this.options)!==null&&r!==void 0&&r.childSelector?sr(this.options.children,this.options.childSelector,e)||[]:[e]}_domElementToItemData(e){const n={element:e},r=e.tagName==="A"?e:e.querySelector("a");if(r){n.src=r.dataset.pswpSrc||r.href,r.dataset.pswpSrcset&&(n.srcset=r.dataset.pswpSrcset),n.width=r.dataset.pswpWidth?parseInt(r.dataset.pswpWidth,10):0,n.height=r.dataset.pswpHeight?parseInt(r.dataset.pswpHeight,10):0,n.w=n.width,n.h=n.height,r.dataset.pswpType&&(n.type=r.dataset.pswpType);const c=e.querySelector("img");if(c){var l;n.msrc=c.currentSrc||c.src,n.alt=(l=c.getAttribute("alt"))!==null&&l!==void 0?l:""}(r.dataset.pswpCropped||r.dataset.cropped)&&(n.thumbCropped=!0)}return this.applyFilters("domItemData",n,e,r)}lazyLoadData(e,n){return Go(e,this,n)}}class fs extends cs{constructor(e){super(),this.options=e||{},this._uid=0,this.shouldOpen=!1,this._preloadedContent=void 0,this.onThumbnailsClick=this.onThumbnailsClick.bind(this)}init(){sr(this.options.gallery,this.options.gallerySelector).forEach(e=>{e.addEventListener("click",this.onThumbnailsClick,!1)})}onThumbnailsClick(e){if(es(e)||window.pswp)return;let n={x:e.clientX,y:e.clientY};!n.x&&!n.y&&(n=null);let r=this.getClickedIndex(e);r=this.applyFilters("clickedIndex",r,e,this);const l={gallery:e.currentTarget};r>=0&&(e.preventDefault(),this.loadAndOpen(r,l,n))}getClickedIndex(e){if(this.options.getClickedIndexFn)return this.options.getClickedIndexFn.call(this,e);const n=e.target,l=sr(this.options.children,this.options.childSelector,e.currentTarget).findIndex(c=>c===n||c.contains(n));return l!==-1?l:this.options.children||this.options.childSelector?-1:0}loadAndOpen(e,n,r){if(window.pswp||!this.options)return!1;if(!n&&this.options.gallery&&this.options.children){const l=sr(this.options.gallery);l[0]&&(n={gallery:l[0]})}return this.options.index=e,this.options.initialPointerPos=r,this.shouldOpen=!0,this.preload(e,n),!0}preload(e,n){const{options:r}=this;n&&(r.dataSource=n);const l=[],c=typeof r.pswpModule;if(ts(r.pswpModule))l.push(Promise.resolve(r.pswpModule));else{if(c==="string")throw new Error("pswpModule as string is no longer supported");if(c==="function")l.push(r.pswpModule());else throw new Error("pswpModule is not valid")}typeof r.openPromise=="function"&&l.push(r.openPromise()),r.preloadFirstSlide!==!1&&e>=0&&(this._preloadedContent=us(e,this));const u=++this._uid;Promise.all(l).then(g=>{if(this.shouldOpen){const _=g[0];this._openPhotoswipe(_,u)}})}_openPhotoswipe(e,n){if(n!==this._uid&&this.shouldOpen||(this.shouldOpen=!1,window.pswp))return;const r=typeof e=="object"?new e.default(this.options):new e(this.options);this.pswp=r,window.pswp=r,Object.keys(this._listeners).forEach(l=>{var c;(c=this._listeners[l])===null||c===void 0||c.forEach(u=>{r.on(l,u)})}),Object.keys(this._filters).forEach(l=>{var c;(c=this._filters[l])===null||c===void 0||c.forEach(u=>{r.addFilter(l,u.fn,u.priority)})}),this._preloadedContent&&(r.contentLoader.addToCache(this._preloadedContent),this._preloadedContent=void 0),r.on("destroy",()=>{this.pswp=void 0,delete window.pswp}),r.init()}destroy(){var e;(e=this.pswp)===null||e===void 0||e.destroy(),this.shouldOpen=!1,this._listeners={},sr(this.options.gallery,this.options.gallerySelector).forEach(n=>{n.removeEventListener("click",this.onThumbnailsClick,!1)})}}function za(i,e,n){const r=i.slice();return r[9]=e[n],r}function Ua(i,e,n){const r=i.slice();return r[12]=e[n],r}function Ei(i){const e=i.slice(),n=Array.from(new Set(e[2].map(r=>r.currency)));return e[8]=n,e}function Ha(i){let e,n,r=i[0].name+"",l,c,u,g,_,m,v,k,R,U,le='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash3" viewBox="0 0 16 16"><path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5M11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47M8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5"></path></svg>',x,q,B=i[0].startDate.toDateString()+"",I,X,E=i[0].endDate.toDateString()+"",Z,te,J,se,me=i[0].defaultCurrency+"",we,Ne,ge=Dt[i[0].defaultCurrency].symbol+"",be,ue,Oe,Ee,oe,Ae,O,N,Y,_e,w,$,Te,de,Ve,Ie="Receipts:",ye,G,ce,ke,ze=i[2]&&qa(Ei(i));return{c(){e=S("h1"),n=S("span"),l=Le(r),c=ie(),u=S("span"),g=S("a"),_=Yt("svg"),m=Yt("path"),v=Yt("path"),R=ie(),U=S("button"),U.innerHTML=le,x=ie(),q=S("h4"),I=Le(B),X=Le(" - "),Z=Le(E),te=ie(),J=S("p"),se=Le("Default currency: "),we=Le(me),Ne=Le(" ("),be=Le(ge),ue=Le(")"),Oe=ie(),Ee=S("a"),oe=Le("+ Add Receipt"),O=ie(),N=S("a"),Y=Yt("svg"),_e=Yt("path"),w=Yt("path"),$=Le(`
        Export/Print`),de=ie(),Ve=S("h5"),Ve.textContent=Ie,ye=ie(),ze&&ze.c(),G=Ft(),this.h()},l(Me){e=T(Me,"H1",{class:!0});var A=H(e);n=T(A,"SPAN",{});var qe=H(n);l=Re(qe,r),qe.forEach(b),c=ae(A),u=T(A,"SPAN",{});var Be=H(u);g=T(Be,"A",{href:!0,class:!0,title:!0});var he=H(g);_=Zt(he,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,class:!0,viewBox:!0});var We=H(_);m=Zt(We,"path",{d:!0}),H(m).forEach(b),v=Zt(We,"path",{"fill-rule":!0,d:!0}),H(v).forEach(b),We.forEach(b),he.forEach(b),R=ae(Be),U=T(Be,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Ge(U)!=="svelte-3nbotr"&&(U.innerHTML=le),Be.forEach(b),A.forEach(b),x=ae(Me),q=T(Me,"H4",{});var it=H(q);I=Re(it,B),X=Re(it," - "),Z=Re(it,E),it.forEach(b),te=ae(Me),J=T(Me,"P",{});var dt=H(J);se=Re(dt,"Default currency: "),we=Re(dt,me),Ne=Re(dt," ("),be=Re(dt,ge),ue=Re(dt,")"),dt.forEach(b),Oe=ae(Me),Ee=T(Me,"A",{class:!0,href:!0});var Et=H(Ee);oe=Re(Et,"+ Add Receipt"),Et.forEach(b),O=ae(Me),N=T(Me,"A",{href:!0,target:!0,class:!0});var ut=H(N);Y=Zt(ut,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,class:!0,viewBox:!0});var bt=H(Y);_e=Zt(bt,"path",{d:!0}),H(_e).forEach(b),w=Zt(bt,"path",{d:!0}),H(w).forEach(b),bt.forEach(b),$=Re(ut,`
        Export/Print`),ut.forEach(b),de=ae(Me),Ve=T(Me,"H5",{class:!0,"data-svelte-h":!0}),Ge(Ve)!=="svelte-7onek5"&&(Ve.textContent=Ie),ye=ae(Me),ze&&ze.l(Me),G=Ft(),this.h()},h(){h(m,"d","M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"),h(v,"fill-rule","evenodd"),h(v,"d","M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"),h(_,"xmlns","http://www.w3.org/2000/svg"),h(_,"width","16"),h(_,"height","16"),h(_,"fill","currentColor"),h(_,"class","bi bi-pencil-square"),h(_,"viewBox","0 0 16 16"),h(g,"href",k="#/update/"+i[0].id),h(g,"class","btn btn-outline-secondary"),h(g,"title","Update Trip"),h(U,"class","btn btn-outline-secondary hover-red"),h(U,"title","Delete Trip"),h(e,"class","d-flex justify-content-between"),h(Ee,"class","btn btn-primary"),h(Ee,"href",Ae="#/addreceipt/"+i[0].id),h(_e,"d","M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"),h(w,"d","M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z"),h(Y,"xmlns","http://www.w3.org/2000/svg"),h(Y,"width","16"),h(Y,"height","16"),h(Y,"fill","currentColor"),h(Y,"class","bi bi-download"),h(Y,"viewBox","0 0 16 16"),h(N,"href",Te="#/print/"+i[0].id),h(N,"target","_blank"),h(N,"class","btn btn-outline-primary"),h(Ve,"class","mt-3")},m(Me,A){fe(Me,e,A),p(e,n),p(n,l),p(e,c),p(e,u),p(u,g),p(g,_),p(_,m),p(_,v),p(u,R),p(u,U),fe(Me,x,A),fe(Me,q,A),p(q,I),p(q,X),p(q,Z),fe(Me,te,A),fe(Me,J,A),p(J,se),p(J,we),p(J,Ne),p(J,be),p(J,ue),fe(Me,Oe,A),fe(Me,Ee,A),p(Ee,oe),fe(Me,O,A),fe(Me,N,A),p(N,Y),p(Y,_e),p(Y,w),p(N,$),fe(Me,de,A),fe(Me,Ve,A),fe(Me,ye,A),ze&&ze.m(Me,A),fe(Me,G,A),ce||(ke=Ye(U,"click",function(){Ho(i[3](i[0]))&&i[3](i[0]).apply(this,arguments)}),ce=!0)},p(Me,A){i=Me,A&1&&r!==(r=i[0].name+"")&&Xe(l,r),A&1&&k!==(k="#/update/"+i[0].id)&&h(g,"href",k),A&1&&B!==(B=i[0].startDate.toDateString()+"")&&Xe(I,B),A&1&&E!==(E=i[0].endDate.toDateString()+"")&&Xe(Z,E),A&1&&me!==(me=i[0].defaultCurrency+"")&&Xe(we,me),A&1&&ge!==(ge=Dt[i[0].defaultCurrency].symbol+"")&&Xe(be,ge),A&1&&Ae!==(Ae="#/addreceipt/"+i[0].id)&&h(Ee,"href",Ae),A&1&&Te!==(Te="#/print/"+i[0].id)&&h(N,"href",Te),i[2]?ze?ze.p(Ei(i),A):(ze=qa(Ei(i)),ze.c(),ze.m(G.parentNode,G)):ze&&(ze.d(1),ze=null)},d(Me){Me&&(b(e),b(x),b(q),b(te),b(J),b(Oe),b(Ee),b(O),b(N),b(de),b(Ve),b(ye),b(G)),ze&&ze.d(Me),ce=!1,ke()}}}function qa(i){let e,n,r,l="<tr><th>Description</th> <th>Date</th> <th>Type</th> <th>Total</th> <th></th></tr>",c,u,g=[],_=new Map,m,v,k,R,U,le,x,q,B="<strong>Total</strong>",I,X,E,Z,te,J,se=Ze(i[2]);const me=ge=>ge[12].id;for(let ge=0;ge<se.length;ge+=1){let be=Ua(i,se,ge),ue=me(be);_.set(ue,g[ge]=xa(ue,be))}let we=Ze(i[8]),Ne=[];for(let ge=0;ge<we.length;ge+=1)Ne[ge]=Wa(za(i,we,ge));return{c(){e=S("div"),n=S("table"),r=S("thead"),r.innerHTML=l,c=ie(),u=S("tbody");for(let ge=0;ge<g.length;ge+=1)g[ge].c();m=ie(),v=S("tfoot"),k=S("tr"),R=S("td"),U=ie(),le=S("td"),x=ie(),q=S("td"),q.innerHTML=B,I=ie(),X=S("td");for(let ge=0;ge<Ne.length;ge+=1)Ne[ge].c();E=ie(),Z=S("td"),this.h()},l(ge){e=T(ge,"DIV",{class:!0});var be=H(e);n=T(be,"TABLE",{class:!0});var ue=H(n);r=T(ue,"THEAD",{"data-svelte-h":!0}),Ge(r)!=="svelte-1vpbmbw"&&(r.innerHTML=l),c=ae(ue),u=T(ue,"TBODY",{});var Oe=H(u);for(let O=0;O<g.length;O+=1)g[O].l(Oe);Oe.forEach(b),m=ae(ue),v=T(ue,"TFOOT",{class:!0});var Ee=H(v);k=T(Ee,"TR",{});var oe=H(k);R=T(oe,"TD",{}),H(R).forEach(b),U=ae(oe),le=T(oe,"TD",{}),H(le).forEach(b),x=ae(oe),q=T(oe,"TD",{class:!0,"data-svelte-h":!0}),Ge(q)!=="svelte-14afisz"&&(q.innerHTML=B),I=ae(oe),X=T(oe,"TD",{});var Ae=H(X);for(let O=0;O<Ne.length;O+=1)Ne[O].l(Ae);Ae.forEach(b),E=ae(oe),Z=T(oe,"TD",{}),H(Z).forEach(b),oe.forEach(b),Ee.forEach(b),ue.forEach(b),be.forEach(b),this.h()},h(){h(q,"class","text-end"),h(v,"class","table-group-divider"),h(n,"class","table table-striped table-hover"),h(e,"class","table-responsive")},m(ge,be){fe(ge,e,be),p(e,n),p(n,r),p(n,c),p(n,u);for(let ue=0;ue<g.length;ue+=1)g[ue]&&g[ue].m(u,null);p(n,m),p(n,v),p(v,k),p(k,R),p(k,U),p(k,le),p(k,x),p(k,q),p(k,I),p(k,X);for(let ue=0;ue<Ne.length;ue+=1)Ne[ue]&&Ne[ue].m(X,null);p(k,E),p(k,Z),te||(J=Dl(i[5].call(null,u)),te=!0)},p(ge,be){if(be&20&&(se=Ze(ge[2]),g=jr(g,be,me,1,ge,se,_,u,Fr,xa,null,Ua)),be&4){we=Ze(ge[8]);let ue;for(ue=0;ue<we.length;ue+=1){const Oe=za(ge,we,ue);Ne[ue]?Ne[ue].p(Oe,be):(Ne[ue]=Wa(Oe),Ne[ue].c(),Ne[ue].m(X,null))}for(;ue<Ne.length;ue+=1)Ne[ue].d(1);Ne.length=we.length}},d(ge){ge&&b(e);for(let be=0;be<g.length;be+=1)g[be].d();Lt(Ne,ge),te=!1,J()}}}function xa(i,e){let n,r,l,c,u,g,_,m,v,k,R,U,le,x=e[12].description+"",q,B,I,X=e[12].receiptDateString+"",E,Z,te,J,se,me=Ba[e[12].receiptType]+"",we,Ne,ge=e[12].receiptType+"",be,ue,Oe,Ee=Dt[e[12].currency].symbol+"",oe,Ae,O=e[12].total.toFixed(2)+"",N,Y,_e,w,$,Te,de,Ve,Ie,ye,G='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash3" viewBox="0 0 16 16"><path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5M11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47M8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5"></path></svg>',ce,ke,ze;return{key:i,first:null,c(){n=S("tr"),r=S("td"),l=S("div"),c=S("span"),u=S("a"),g=Yt("svg"),_=Yt("path"),m=Yt("path"),U=ie(),le=S("span"),q=Le(x),B=ie(),I=S("td"),E=Le(X),Z=ie(),te=S("td"),J=S("abbr"),se=new El(!1),Ne=S("span"),be=Le(ge),ue=ie(),Oe=S("td"),oe=Le(Ee),Ae=ie(),N=Le(O),Y=ie(),_e=S("td"),w=S("a"),$=Yt("svg"),Te=Yt("path"),de=Yt("path"),Ie=ie(),ye=S("button"),ye.innerHTML=G,ce=ie(),this.h()},l(Me){n=T(Me,"TR",{});var A=H(n);r=T(A,"TD",{});var qe=H(r);l=T(qe,"DIV",{class:!0});var Be=H(l);c=T(Be,"SPAN",{});var he=H(c);u=T(he,"A",{class:!0,href:!0,"data-pswp-width":!0,"data-pswp-height":!0,target:!0,rel:!0,title:!0,style:!0});var We=H(u);g=Zt(We,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,class:!0,viewBox:!0});var it=H(g);_=Zt(it,"path",{d:!0}),H(_).forEach(b),m=Zt(it,"path",{d:!0}),H(m).forEach(b),it.forEach(b),We.forEach(b),he.forEach(b),U=ae(Be),le=T(Be,"SPAN",{});var dt=H(le);q=Re(dt,x),dt.forEach(b),Be.forEach(b),qe.forEach(b),B=ae(A),I=T(A,"TD",{});var Et=H(I);E=Re(Et,X),Et.forEach(b),Z=ae(A),te=T(A,"TD",{});var ut=H(te);J=T(ut,"ABBR",{class:!0,title:!0});var bt=H(J);se=Sl(bt,!1),bt.forEach(b),Ne=T(ut,"SPAN",{class:!0});var It=H(Ne);be=Re(It,ge),It.forEach(b),ut.forEach(b),ue=ae(A),Oe=T(A,"TD",{class:!0});var ht=H(Oe);oe=Re(ht,Ee),Ae=ae(ht),N=Re(ht,O),ht.forEach(b),Y=ae(A),_e=T(A,"TD",{});var Ct=H(_e);w=T(Ct,"A",{class:!0,href:!0,title:!0});var Je=H(w);$=Zt(Je,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,class:!0,viewBox:!0});var Xt=H($);Te=Zt(Xt,"path",{d:!0}),H(Te).forEach(b),de=Zt(Xt,"path",{"fill-rule":!0,d:!0}),H(de).forEach(b),Xt.forEach(b),Je.forEach(b),Ie=ae(Ct),ye=T(Ct,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Ge(ye)!=="svelte-rhumqt"&&(ye.innerHTML=G),Ct.forEach(b),ce=ae(A),A.forEach(b),this.h()},h(){h(_,"d","M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0"),h(m,"d","M2.002 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2zm12 1a1 1 0 0 1 1 1v6.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12V3a1 1 0 0 1 1-1z"),h(g,"xmlns","http://www.w3.org/2000/svg"),h(g,"width","16"),h(g,"height","16"),h(g,"fill","currentColor"),h(g,"class","bi bi-image"),h(g,"viewBox","0 0 16 16"),h(u,"class","btn btn-outline-primary btn-sm rImages"),h(u,"href",v=URL.createObjectURL(e[12].imageData)),h(u,"data-pswp-width",k=e[12].imageWidth),h(u,"data-pswp-height",R=e[12].imageHeight),h(u,"target","_blank"),h(u,"rel","noreferrer"),h(u,"title","View Image"),Ai(u,"border","none"),h(l,"class","receiptDesc"),se.a=null,h(J,"class","me-2 typeIcon"),h(J,"title",we=e[12].receiptType),h(Ne,"class","typeText"),h(Oe,"class","text-nowrap"),h(Te,"d","M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"),h(de,"fill-rule","evenodd"),h(de,"d","M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"),h($,"xmlns","http://www.w3.org/2000/svg"),h($,"width","16"),h($,"height","16"),h($,"fill","currentColor"),h($,"class","bi bi-pencil-square"),h($,"viewBox","0 0 16 16"),h(w,"class","btn btn-outline-dark btn-sm"),h(w,"href",Ve="#/editreceipt/"+e[12].id),h(w,"title","Edit Receipt"),h(ye,"class","btn btn-outline-dark btn-sm hover-red"),h(ye,"title","Delete Receipt"),this.first=n},m(Me,A){fe(Me,n,A),p(n,r),p(r,l),p(l,c),p(c,u),p(u,g),p(g,_),p(g,m),p(l,U),p(l,le),p(le,q),p(n,B),p(n,I),p(I,E),p(n,Z),p(n,te),p(te,J),se.m(me,J),p(te,Ne),p(Ne,be),p(n,ue),p(n,Oe),p(Oe,oe),p(Oe,Ae),p(Oe,N),p(n,Y),p(n,_e),p(_e,w),p(w,$),p($,Te),p($,de),p(_e,Ie),p(_e,ye),p(n,ce),ke||(ze=Ye(ye,"click",function(){Ho(e[4](e[12]))&&e[4](e[12]).apply(this,arguments)}),ke=!0)},p(Me,A){e=Me,A&4&&v!==(v=URL.createObjectURL(e[12].imageData))&&h(u,"href",v),A&4&&k!==(k=e[12].imageWidth)&&h(u,"data-pswp-width",k),A&4&&R!==(R=e[12].imageHeight)&&h(u,"data-pswp-height",R),A&4&&x!==(x=e[12].description+"")&&Xe(q,x),A&4&&X!==(X=e[12].receiptDateString+"")&&Xe(E,X),A&4&&me!==(me=Ba[e[12].receiptType]+"")&&se.p(me),A&4&&we!==(we=e[12].receiptType)&&h(J,"title",we),A&4&&ge!==(ge=e[12].receiptType+"")&&Xe(be,ge),A&4&&Ee!==(Ee=Dt[e[12].currency].symbol+"")&&Xe(oe,Ee),A&4&&O!==(O=e[12].total.toFixed(2)+"")&&Xe(N,O),A&4&&Ve!==(Ve="#/editreceipt/"+e[12].id)&&h(w,"href",Ve)},d(Me){Me&&b(n),ke=!1,ze()}}}function Wa(i){let e=Dt[i[9]].symbol+"",n,r,l=i[2].filter(_).reduce(Ga,0).toFixed(2)+"",c,u,g;function _(...m){return i[7](i[9],...m)}return{c(){n=Le(e),r=ie(),c=Le(l),u=ie(),g=S("br")},l(m){n=Re(m,e),r=ae(m),c=Re(m,l),u=ae(m),g=T(m,"BR",{})},m(m,v){fe(m,n,v),fe(m,r,v),fe(m,c,v),fe(m,u,v),fe(m,g,v)},p(m,v){i=m,v&4&&e!==(e=Dt[i[9]].symbol+"")&&Xe(n,e),v&4&&l!==(l=i[2].filter(_).reduce(Ga,0).toFixed(2)+"")&&Xe(c,l)},d(m){m&&(b(n),b(r),b(c),b(u),b(g))}}}function ds(i){let e,n=i[0]&&Ha(i);return{c(){e=S("div"),n&&n.c(),this.h()},l(r){e=T(r,"DIV",{class:!0});var l=H(e);n&&n.l(l),l.forEach(b),this.h()},h(){h(e,"class","w-100")},m(r,l){fe(r,e,l),n&&n.m(e,null)},p(r,[l]){r[0]?n?n.p(r,l):(n=Ha(r),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},i:kt,o:kt,d(r){r&&b(e),n&&n.d()}}}const Ga=(i,e)=>i+e.total;function hs(i,e,n){let r,l=kt,c=()=>(l(),l=ur(_,U=>n(2,r=U)),_);i.$$.on_destroy.push(()=>l());let{tripId:u}=e,g,_;u>-1&&Bt.trips.get(u).then(U=>{n(0,g=U),c(n(1,_=Hr(async()=>await Bt.receipts.where({tripId:u}).reverse().sortBy("receiptDate"))))});async function m(U){if(confirm(`Are you sure you want to delete trip "${U.name}"? It will also delete all receipts for this trip`)){let x=await Bt.trips.where("id").equals(U.id).delete();console.log(`Deleted ${x} trip(s)`),x=await Bt.receipts.where("tripId").equals(U.id).delete(),console.log(`Deleted ${x} receipts(s)`),window.location.href="#/"}}async function v(U){if(confirm(`Are you sure you want to delete receipt for "${U.description}"?`)){let x=await Bt.receipts.where("id").equals(U.id).delete();console.log(`Deleted ${x} receipts(s)`)}}function k(U){new fs({gallery:".rImages",pswpModule:()=>Al(()=>import("../chunks/photoswipe.esm.GXRgw7eJ.js"),[],import.meta.url)}).init()}const R=(U,le)=>le.currency==U;return i.$$set=U=>{"tripId"in U&&n(6,u=U.tripId)},[g,_,r,m,v,k,u,R]}class ps extends ln{constructor(e){super(),sn(this,e,hs,ds,rn,{tripId:6})}}function Yo(){let i=document.getElementById("tripToggle"),e=document.getElementById("mainPane");i!=null&&i.classList.contains("show")?(i==null||i.classList.remove("show"),e==null||e.classList.remove("d-none")):(i==null||i.classList.add("show"),e==null||e.classList.add("d-none"))}function Ya(i,e,n){const r=i.slice();return r[8]=e[n],r}function Za(i,e,n){const r=i.slice();return r[12]=e[n],r}function Si(i){const e=i.slice(),n=Array.from(new Set(e[2].filter(function(...l){return i[5](e[8],...l)}).map(r=>r.currency)));return e[11]=n,e}function Ja(i){let e=[],n=new Map,r,l=Ze(i[1]);const c=u=>u[8].id;for(let u=0;u<l.length;u+=1){let g=Ya(i,l,u),_=c(g);n.set(_,e[u]=Xa(_,g))}return{c(){for(let u=0;u<e.length;u+=1)e[u].c();r=Ft()},l(u){for(let g=0;g<e.length;g+=1)e[g].l(u);r=Ft()},m(u,g){for(let _=0;_<e.length;_+=1)e[_]&&e[_].m(u,g);fe(u,r,g)},p(u,g){g&7&&(l=Ze(u[1]),e=jr(e,g,c,1,u,l,n,r.parentNode,Fr,Xa,r,Ya))},d(u){u&&b(r);for(let g=0;g<e.length;g+=1)e[g].d(u)}}}function Qa(i){let e,n=Ze(i[11]),r=[];for(let l=0;l<n.length;l+=1)r[l]=$a(Za(i,n,l));return{c(){e=S("small");for(let l=0;l<r.length;l+=1)r[l].c()},l(l){e=T(l,"SMALL",{});var c=H(e);for(let u=0;u<r.length;u+=1)r[u].l(c);c.forEach(b)},m(l,c){fe(l,e,c);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null)},p(l,c){if(c&6){n=Ze(l[11]);let u;for(u=0;u<n.length;u+=1){const g=Za(l,n,u);r[u]?r[u].p(g,c):(r[u]=$a(g),r[u].c(),r[u].m(e,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=n.length}},d(l){l&&b(e),Lt(r,l)}}}function $a(i){let e=Dt[i[12]].symbol+"",n,r,l=i[2].filter(_).filter(m).reduce(eo,0).toFixed(2)+"",c,u,g;function _(...v){return i[6](i[8],...v)}function m(...v){return i[7](i[12],...v)}return{c(){n=Le(e),r=ie(),c=Le(l),u=ie(),g=S("br")},l(v){n=Re(v,e),r=ae(v),c=Re(v,l),u=ae(v),g=T(v,"BR",{})},m(v,k){fe(v,n,k),fe(v,r,k),fe(v,c,k),fe(v,u,k),fe(v,g,k)},p(v,k){i=v,k&6&&e!==(e=Dt[i[12]].symbol+"")&&Xe(n,e),k&6&&l!==(l=i[2].filter(_).filter(m).reduce(eo,0).toFixed(2)+"")&&Xe(c,l)},d(v){v&&(b(n),b(r),b(c),b(u),b(g))}}}function Xa(i,e){let n,r,l,c=e[8].name+"",u,g,_,m,v=e[8].startDateString+"",k,R,U=e[8].endDateString+"",le,x,q,B,I,X,E=e[2]&&Qa(Si(e));return{key:i,first:null,c(){n=S("a"),r=S("div"),l=S("strong"),u=Le(c),g=ie(),E&&E.c(),_=ie(),m=S("div"),k=Le(v),R=Le(" - "),le=Le(U),x=ie(),this.h()},l(Z){n=T(Z,"A",{href:!0,class:!0,"aria-current":!0,"data-trip-id":!0});var te=H(n);r=T(te,"DIV",{class:!0});var J=H(r);l=T(J,"STRONG",{class:!0});var se=H(l);u=Re(se,c),se.forEach(b),g=ae(J),E&&E.l(J),J.forEach(b),_=ae(te),m=T(te,"DIV",{class:!0});var me=H(m);k=Re(me,v),R=Re(me," - "),le=Re(me,U),me.forEach(b),x=ae(te),te.forEach(b),this.h()},h(){h(l,"class","mb-1"),h(r,"class","d-flex w-100 align-items-center justify-content-between"),h(m,"class","col-10 mb-1 small"),h(n,"href",q="#/trip/"+e[8].id),h(n,"class","list-group-item list-group-item-action py-3 lh-sm m-2"),h(n,"aria-current","false"),h(n,"data-trip-id",B=e[8].id),Tt(n,"active",e[0]==e[8].id),this.first=n},m(Z,te){fe(Z,n,te),p(n,r),p(r,l),p(l,u),p(r,g),E&&E.m(r,null),p(n,_),p(n,m),p(m,k),p(m,R),p(m,le),p(n,x),I||(X=Ye(n,"click",Yo),I=!0)},p(Z,te){e=Z,te&2&&c!==(c=e[8].name+"")&&Xe(u,c),e[2]?E?E.p(Si(e),te):(E=Qa(Si(e)),E.c(),E.m(r,null)):E&&(E.d(1),E=null),te&2&&v!==(v=e[8].startDateString+"")&&Xe(k,v),te&2&&U!==(U=e[8].endDateString+"")&&Xe(le,U),te&2&&q!==(q="#/trip/"+e[8].id)&&h(n,"href",q),te&2&&B!==(B=e[8].id)&&h(n,"data-trip-id",B),te&3&&Tt(n,"active",e[0]==e[8].id)},d(Z){Z&&b(n),E&&E.d(),I=!1,X()}}}function ms(i){let e,n=i[1]&&Ja(i);return{c(){n&&n.c(),e=Ft()},l(r){n&&n.l(r),e=Ft()},m(r,l){n&&n.m(r,l),fe(r,e,l)},p(r,[l]){r[1]?n?n.p(r,l):(n=Ja(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:kt,o:kt,d(r){r&&b(e),n&&n.d(r)}}}const eo=(i,e)=>i+e.total;function gs(i,e,n){let r,l,{tripId:c}=e,u=Hr(()=>Bt.trips.toCollection().reverse().sortBy("endDate"));cr(i,u,k=>n(1,r=k));let g=Hr(()=>Bt.receipts.toArray());cr(i,g,k=>n(2,l=k));const _=(k,R)=>R.tripId==k.id,m=(k,R)=>R.tripId==k.id,v=(k,R)=>R.currency==k;return i.$$set=k=>{"tripId"in k&&n(0,c=k.tripId)},[c,r,l,u,g,_,m,v]}class vs extends ln{constructor(e){super(),sn(this,e,gs,ms,rn,{tripId:0})}}function to(i,e,n){const r=i.slice();return r[9]=e[n],r}function no(i){let e,n,r="Update Trip",l,c,u,g="Trip Name",_,m,v,k,R,U="Trip Currency",le,x,q,B,I,X="Trip Start",E,Z,te,J,se,me,we="Trip End",Ne,ge,be,ue,Oe,Ee,oe="Update Trip",Ae,O,N,Y,_e,w,$,Te=Ze(Object.keys(Dt)),de=[];for(let ce=0;ce<Te.length;ce+=1)de[ce]=ro(to(i,Te,ce));function Ve(ce){i[7](ce)}let Ie={format:"yyyy-MM-dd",closeOnSelection:!0,id:"tripStart"};i[1]!==void 0&&(Ie.value=i[1]),Z=new Yn({props:Ie}),nn.push(()=>Mn(Z,"value",Ve));function ye(ce){i[8](ce)}let G={format:"yyyy-MM-dd",closeOnSelection:!0,min:i[1],id:"tripEnd"};return i[2]!==void 0&&(G.value=i[2]),ge=new Yn({props:G}),nn.push(()=>Mn(ge,"value",ye)),{c(){e=S("form"),n=S("h1"),n.textContent=r,l=ie(),c=S("div"),u=S("label"),u.textContent=g,_=ie(),m=S("input"),v=ie(),k=S("div"),R=S("label"),R.textContent=U,le=ie(),x=S("select");for(let ce=0;ce<de.length;ce+=1)de[ce].c();q=ie(),B=S("div"),I=S("label"),I.textContent=X,E=ie(),Vt(Z.$$.fragment),J=ie(),se=S("div"),me=S("label"),me.textContent=we,Ne=ie(),Vt(ge.$$.fragment),ue=ie(),Oe=S("div"),Ee=S("button"),Ee.textContent=oe,Ae=ie(),O=S("a"),N=Le("Cancel"),this.h()},l(ce){e=T(ce,"FORM",{});var ke=H(e);n=T(ke,"H1",{"data-svelte-h":!0}),Ge(n)!=="svelte-9352dq"&&(n.textContent=r),l=ae(ke),c=T(ke,"DIV",{class:!0});var ze=H(c);u=T(ze,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ge(u)!=="svelte-1y8z10u"&&(u.textContent=g),_=ae(ze),m=T(ze,"INPUT",{id:!0,class:!0,type:!0}),ze.forEach(b),v=ae(ke),k=T(ke,"DIV",{class:!0});var Me=H(k);R=T(Me,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ge(R)!=="svelte-1fzihue"&&(R.textContent=U),le=ae(Me),x=T(Me,"SELECT",{id:!0,class:!0});var A=H(x);for(let it=0;it<de.length;it+=1)de[it].l(A);A.forEach(b),Me.forEach(b),q=ae(ke),B=T(ke,"DIV",{class:!0});var qe=H(B);I=T(qe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ge(I)!=="svelte-4n7gli"&&(I.textContent=X),E=ae(qe),zt(Z.$$.fragment,qe),qe.forEach(b),J=ae(ke),se=T(ke,"DIV",{class:!0});var Be=H(se);me=T(Be,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ge(me)!=="svelte-1dn7717"&&(me.textContent=we),Ne=ae(Be),zt(ge.$$.fragment,Be),Be.forEach(b),ue=ae(ke),Oe=T(ke,"DIV",{class:!0});var he=H(Oe);Ee=T(he,"BUTTON",{class:!0,"data-svelte-h":!0}),Ge(Ee)!=="svelte-bsugmm"&&(Ee.textContent=oe),Ae=ae(he),O=T(he,"A",{href:!0,class:!0});var We=H(O);N=Re(We,"Cancel"),We.forEach(b),he.forEach(b),ke.forEach(b),this.h()},h(){h(u,"for","tripName"),h(u,"class","form-label"),h(m,"id","tripName"),h(m,"class","form-control"),h(m,"type","text"),h(c,"class","mb-3"),h(R,"for","tripCurrency"),h(R,"class","form-label"),h(x,"id","tripCurrency"),h(x,"class","form-control"),i[0].defaultCurrency===void 0&&Vn(()=>i[6].call(x)),h(k,"class","mb-3"),h(I,"for","tripStart"),h(I,"class","form-label"),h(B,"class","mb-3"),h(me,"for","tripStart"),h(me,"class","form-label"),h(se,"class","mb-3"),h(Ee,"class","btn btn-primary"),h(O,"href",Y="#/trip/"+i[0].id),h(O,"class","btn btn-outline-primary"),h(Oe,"class","gap-3 d-grid d-md-block")},m(ce,ke){fe(ce,e,ke),p(e,n),p(e,l),p(e,c),p(c,u),p(c,_),p(c,m),ot(m,i[0].name),p(e,v),p(e,k),p(k,R),p(k,le),p(k,x);for(let ze=0;ze<de.length;ze+=1)de[ze]&&de[ze].m(x,null);Jt(x,i[0].defaultCurrency,!0),p(e,q),p(e,B),p(B,I),p(B,E),Ut(Z,B,null),p(e,J),p(e,se),p(se,me),p(se,Ne),Ut(ge,se,null),p(e,ue),p(e,Oe),p(Oe,Ee),p(Oe,Ae),p(Oe,O),p(O,N),_e=!0,w||($=[Ye(m,"input",i[5]),Ye(x,"change",i[6]),Ye(Ee,"click",i[3])],w=!0)},p(ce,ke){if(ke&1&&m.value!==ce[0].name&&ot(m,ce[0].name),ke&0){Te=Ze(Object.keys(Dt));let A;for(A=0;A<Te.length;A+=1){const qe=to(ce,Te,A);de[A]?de[A].p(qe,ke):(de[A]=ro(qe),de[A].c(),de[A].m(x,null))}for(;A<de.length;A+=1)de[A].d(1);de.length=Te.length}ke&1&&Jt(x,ce[0].defaultCurrency);const ze={};!te&&ke&2&&(te=!0,ze.value=ce[1],Pn(()=>te=!1)),Z.$set(ze);const Me={};ke&2&&(Me.min=ce[1]),!be&&ke&4&&(be=!0,Me.value=ce[2],Pn(()=>be=!1)),ge.$set(Me),(!_e||ke&1&&Y!==(Y="#/trip/"+ce[0].id))&&h(O,"href",Y)},i(ce){_e||(rt(Z.$$.fragment,ce),rt(ge.$$.fragment,ce),_e=!0)},o(ce){st(Z.$$.fragment,ce),st(ge.$$.fragment,ce),_e=!1},d(ce){ce&&b(e),Lt(de,ce),Ht(Z),Ht(ge),w=!1,kn($)}}}function ro(i){let e,n=i[9]+"",r,l,c=Dt[i[9]].symbol+"",u,g;return{c(){e=S("option"),r=Le(n),l=Le(" ("),u=Le(c),g=Le(`)
          `),this.h()},l(_){e=T(_,"OPTION",{});var m=H(e);r=Re(m,n),l=Re(m," ("),u=Re(m,c),g=Re(m,`)
          `),m.forEach(b),this.h()},h(){e.__value=i[9],ot(e,e.__value)},m(_,m){fe(_,e,m),p(e,r),p(e,l),p(e,u),p(e,g)},p:kt,d(_){_&&b(e)}}}function _s(i){let e,n,r=i[0]&&no(i);return{c(){e=S("div"),r&&r.c(),this.h()},l(l){e=T(l,"DIV",{class:!0});var c=H(e);r&&r.l(c),c.forEach(b),this.h()},h(){h(e,"class","w-100")},m(l,c){fe(l,e,c),r&&r.m(e,null),n=!0},p(l,[c]){l[0]?r?(r.p(l,c),c&1&&rt(r,1)):(r=no(l),r.c(),rt(r,1),r.m(e,null)):r&&(zn(),st(r,1,1,()=>{r=null}),Un())},i(l){n||(rt(r),n=!0)},o(l){st(r),n=!1},d(l){l&&b(e),r&&r.d()}}}function ys(i,e,n){let{tripId:r}=e,l,c,u;r>-1&&Bt.trips.get(r).then(R=>{n(0,l=R),n(1,c=new Date(l.startDateString)),n(2,u=new Date(l.endDateString))});async function g(){try{const R=await Bt.trips.update(l.id,{name:l.name,defaultCurrency:l.defaultCurrency,startDate:c,endDate:u,startDateString:c.toDateString(),endDateString:u.toDateString()});window.location.href="#/trip/"+l.id}catch{window.location.href="#/"}}function _(){l.name=this.value,n(0,l)}function m(){l.defaultCurrency=Gn(this),n(0,l)}function v(R){c=R,n(1,c)}function k(R){u=R,n(2,u)}return i.$$set=R=>{"tripId"in R&&n(4,r=R.tripId)},[l,c,u,g,r,_,m,v,k]}class bs extends ln{constructor(e){super(),sn(this,e,ys,_s,rn,{tripId:4})}}/*!
 * currency.js - v2.0.4
 * http://scurker.github.io/currency.js
 *
 * Copyright (c) 2021 Jason Wilson
 * Released under MIT license
 */var ws={symbol:"$",separator:",",decimal:".",errorOnInvalid:!1,precision:2,pattern:"!#",negativePattern:"-!#",format:Ss,fromCents:!1},Zo=function(e){return Math.round(e)},Li=function(e){return Math.pow(10,e)},ks=function(e,n){return Zo(e/n)*n},Ds=/(\d)(?=(\d{3})+\b)/g,Es=/(\d)(?=(\d\d)+\d\b)/g;function gn(i,e){var n=this;if(!(n instanceof gn))return new gn(i,e);var r=Object.assign({},ws,e),l=Li(r.precision),c=Nr(i,r);n.intValue=c,n.value=c/l,r.increment=r.increment||1/l,r.useVedic?r.groups=Es:r.groups=Ds,this.s=r,this.p=l}function Nr(i,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=0,l=e.decimal,c=e.errorOnInvalid,u=e.precision,g=e.fromCents,_=Li(u),m=typeof i=="number",v=i instanceof gn;if(v&&g)return i.intValue;if(m||v)r=v?i.value:i;else if(typeof i=="string"){var k=new RegExp("[^-\\d"+l+"]","g"),R=new RegExp("\\"+l,"g");r=i.replace(/\((.*)\)/,"-$1").replace(k,"").replace(R,"."),r=r||0}else{if(c)throw Error("Invalid Input");r=0}return g||(r*=_,r=r.toFixed(4)),n?Zo(r):r}function Ss(i,e){var n=e.pattern,r=e.negativePattern,l=e.symbol,c=e.separator,u=e.decimal,g=e.groups,_=(""+i).replace(/^-/,"").split("."),m=_[0],v=_[1];return(i.value>=0?n:r).replace("!",l).replace("#",m.replace(g,"$1"+c)+(v?u+v:""))}gn.prototype={add:function(e){var n=this.intValue,r=this.s,l=this.p;return gn((n+=Nr(e,r))/(r.fromCents?1:l),r)},subtract:function(e){var n=this.intValue,r=this.s,l=this.p;return gn((n-=Nr(e,r))/(r.fromCents?1:l),r)},multiply:function(e){var n=this.intValue,r=this.s;return gn((n*=e)/(r.fromCents?1:Li(r.precision)),r)},divide:function(e){var n=this.intValue,r=this.s;return gn(n/=Nr(e,r,!1),r)},distribute:function(e){for(var n=this.intValue,r=this.p,l=this.s,c=[],u=Math[n>=0?"floor":"ceil"](n/e),g=Math.abs(n-u*e),_=l.fromCents?1:r;e!==0;e--){var m=gn(u/_,l);g-- >0&&(m=m[n>=0?"add":"subtract"](1/_)),c.push(m)}return c},dollars:function(){return~~this.value},cents:function(){var e=this.intValue,n=this.p;return~~(e%n)},format:function(e){var n=this.s;return typeof e=="function"?e(this,n):n.format(this,Object.assign({},n,e))},toString:function(){var e=this.intValue,n=this.p,r=this.s;return ks(e/n,r.increment).toFixed(r.precision)},toJSON:function(){return this.value}};var Ts={exports:{}};(function(i){var e=function(n){var r=Object.prototype,l=r.hasOwnProperty,c=Object.defineProperty||function(O,N,Y){O[N]=Y.value},u,g=typeof Symbol=="function"?Symbol:{},_=g.iterator||"@@iterator",m=g.asyncIterator||"@@asyncIterator",v=g.toStringTag||"@@toStringTag";function k(O,N,Y){return Object.defineProperty(O,N,{value:Y,enumerable:!0,configurable:!0,writable:!0}),O[N]}try{k({},"")}catch{k=function(N,Y,_e){return N[Y]=_e}}function R(O,N,Y,_e){var w=N&&N.prototype instanceof X?N:X,$=Object.create(w.prototype),Te=new Ee(_e||[]);return c($,"_invoke",{value:ge(O,Y,Te)}),$}n.wrap=R;function U(O,N,Y){try{return{type:"normal",arg:O.call(N,Y)}}catch(_e){return{type:"throw",arg:_e}}}var le="suspendedStart",x="suspendedYield",q="executing",B="completed",I={};function X(){}function E(){}function Z(){}var te={};k(te,_,function(){return this});var J=Object.getPrototypeOf,se=J&&J(J(oe([])));se&&se!==r&&l.call(se,_)&&(te=se);var me=Z.prototype=X.prototype=Object.create(te);E.prototype=Z,c(me,"constructor",{value:Z,configurable:!0}),c(Z,"constructor",{value:E,configurable:!0}),E.displayName=k(Z,v,"GeneratorFunction");function we(O){["next","throw","return"].forEach(function(N){k(O,N,function(Y){return this._invoke(N,Y)})})}n.isGeneratorFunction=function(O){var N=typeof O=="function"&&O.constructor;return N?N===E||(N.displayName||N.name)==="GeneratorFunction":!1},n.mark=function(O){return Object.setPrototypeOf?Object.setPrototypeOf(O,Z):(O.__proto__=Z,k(O,v,"GeneratorFunction")),O.prototype=Object.create(me),O},n.awrap=function(O){return{__await:O}};function Ne(O,N){function Y($,Te,de,Ve){var Ie=U(O[$],O,Te);if(Ie.type==="throw")Ve(Ie.arg);else{var ye=Ie.arg,G=ye.value;return G&&typeof G=="object"&&l.call(G,"__await")?N.resolve(G.__await).then(function(ce){Y("next",ce,de,Ve)},function(ce){Y("throw",ce,de,Ve)}):N.resolve(G).then(function(ce){ye.value=ce,de(ye)},function(ce){return Y("throw",ce,de,Ve)})}}var _e;function w($,Te){function de(){return new N(function(Ve,Ie){Y($,Te,Ve,Ie)})}return _e=_e?_e.then(de,de):de()}c(this,"_invoke",{value:w})}we(Ne.prototype),k(Ne.prototype,m,function(){return this}),n.AsyncIterator=Ne,n.async=function(O,N,Y,_e,w){w===void 0&&(w=Promise);var $=new Ne(R(O,N,Y,_e),w);return n.isGeneratorFunction(N)?$:$.next().then(function(Te){return Te.done?Te.value:$.next()})};function ge(O,N,Y){var _e=le;return function($,Te){if(_e===q)throw new Error("Generator is already running");if(_e===B){if($==="throw")throw Te;return Ae()}for(Y.method=$,Y.arg=Te;;){var de=Y.delegate;if(de){var Ve=be(de,Y);if(Ve){if(Ve===I)continue;return Ve}}if(Y.method==="next")Y.sent=Y._sent=Y.arg;else if(Y.method==="throw"){if(_e===le)throw _e=B,Y.arg;Y.dispatchException(Y.arg)}else Y.method==="return"&&Y.abrupt("return",Y.arg);_e=q;var Ie=U(O,N,Y);if(Ie.type==="normal"){if(_e=Y.done?B:x,Ie.arg===I)continue;return{value:Ie.arg,done:Y.done}}else Ie.type==="throw"&&(_e=B,Y.method="throw",Y.arg=Ie.arg)}}}function be(O,N){var Y=N.method,_e=O.iterator[Y];if(_e===u)return N.delegate=null,Y==="throw"&&O.iterator.return&&(N.method="return",N.arg=u,be(O,N),N.method==="throw")||Y!=="return"&&(N.method="throw",N.arg=new TypeError("The iterator does not provide a '"+Y+"' method")),I;var w=U(_e,O.iterator,N.arg);if(w.type==="throw")return N.method="throw",N.arg=w.arg,N.delegate=null,I;var $=w.arg;if(!$)return N.method="throw",N.arg=new TypeError("iterator result is not an object"),N.delegate=null,I;if($.done)N[O.resultName]=$.value,N.next=O.nextLoc,N.method!=="return"&&(N.method="next",N.arg=u);else return $;return N.delegate=null,I}we(me),k(me,v,"Generator"),k(me,_,function(){return this}),k(me,"toString",function(){return"[object Generator]"});function ue(O){var N={tryLoc:O[0]};1 in O&&(N.catchLoc=O[1]),2 in O&&(N.finallyLoc=O[2],N.afterLoc=O[3]),this.tryEntries.push(N)}function Oe(O){var N=O.completion||{};N.type="normal",delete N.arg,O.completion=N}function Ee(O){this.tryEntries=[{tryLoc:"root"}],O.forEach(ue,this),this.reset(!0)}n.keys=function(O){var N=Object(O),Y=[];for(var _e in N)Y.push(_e);return Y.reverse(),function w(){for(;Y.length;){var $=Y.pop();if($ in N)return w.value=$,w.done=!1,w}return w.done=!0,w}};function oe(O){if(O){var N=O[_];if(N)return N.call(O);if(typeof O.next=="function")return O;if(!isNaN(O.length)){var Y=-1,_e=function w(){for(;++Y<O.length;)if(l.call(O,Y))return w.value=O[Y],w.done=!1,w;return w.value=u,w.done=!0,w};return _e.next=_e}}return{next:Ae}}n.values=oe;function Ae(){return{value:u,done:!0}}return Ee.prototype={constructor:Ee,reset:function(O){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(Oe),!O)for(var N in this)N.charAt(0)==="t"&&l.call(this,N)&&!isNaN(+N.slice(1))&&(this[N]=u)},stop:function(){this.done=!0;var O=this.tryEntries[0],N=O.completion;if(N.type==="throw")throw N.arg;return this.rval},dispatchException:function(O){if(this.done)throw O;var N=this;function Y(Ve,Ie){return $.type="throw",$.arg=O,N.next=Ve,Ie&&(N.method="next",N.arg=u),!!Ie}for(var _e=this.tryEntries.length-1;_e>=0;--_e){var w=this.tryEntries[_e],$=w.completion;if(w.tryLoc==="root")return Y("end");if(w.tryLoc<=this.prev){var Te=l.call(w,"catchLoc"),de=l.call(w,"finallyLoc");if(Te&&de){if(this.prev<w.catchLoc)return Y(w.catchLoc,!0);if(this.prev<w.finallyLoc)return Y(w.finallyLoc)}else if(Te){if(this.prev<w.catchLoc)return Y(w.catchLoc,!0)}else if(de){if(this.prev<w.finallyLoc)return Y(w.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(O,N){for(var Y=this.tryEntries.length-1;Y>=0;--Y){var _e=this.tryEntries[Y];if(_e.tryLoc<=this.prev&&l.call(_e,"finallyLoc")&&this.prev<_e.finallyLoc){var w=_e;break}}w&&(O==="break"||O==="continue")&&w.tryLoc<=N&&N<=w.finallyLoc&&(w=null);var $=w?w.completion:{};return $.type=O,$.arg=N,w?(this.method="next",this.next=w.finallyLoc,I):this.complete($)},complete:function(O,N){if(O.type==="throw")throw O.arg;return O.type==="break"||O.type==="continue"?this.next=O.arg:O.type==="return"?(this.rval=this.arg=O.arg,this.method="return",this.next="end"):O.type==="normal"&&N&&(this.next=N),I},finish:function(O){for(var N=this.tryEntries.length-1;N>=0;--N){var Y=this.tryEntries[N];if(Y.finallyLoc===O)return this.complete(Y.completion,Y.afterLoc),Oe(Y),I}},catch:function(O){for(var N=this.tryEntries.length-1;N>=0;--N){var Y=this.tryEntries[N];if(Y.tryLoc===O){var _e=Y.completion;if(_e.type==="throw"){var w=_e.arg;Oe(Y)}return w}}throw new Error("illegal catch attempt")},delegateYield:function(O,N,Y){return this.delegate={iterator:oe(O),resultName:N,nextLoc:Y},this.method==="next"&&(this.arg=u),I}},n}(i.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(Ts);var Ri=(i,e)=>`${i}-${e}-${Math.random().toString(16).slice(3,8)}`;const Cs=Ri;let io=0;var Jo=({id:i,action:e,payload:n={}})=>{let r=i;return typeof r>"u"&&(r=Cs("Job",io),io+=1),{id:r,action:e,payload:n}},Zn={};let Ni=!1;Zn.logging=Ni;Zn.setLogging=i=>{Ni=i};Zn.log=(...i)=>Ni?console.log.apply(void 0,i):null;const As=Jo,{log:Mr}=Zn,Os=Ri;let ao=0;var Is=()=>{const i=Os("Scheduler",ao),e={},n={};let r=[];ao+=1;const l=()=>r.length,c=()=>Object.keys(e).length,u=()=>{if(r.length!==0){const k=Object.keys(e);for(let R=0;R<k.length;R+=1)if(typeof n[k[R]]>"u"){r[0](e[k[R]]);break}}},g=(k,R)=>new Promise((U,le)=>{const x=As({action:k,payload:R});r.push(async q=>{r.shift(),n[q.id]=x;try{U(await q[k].apply(void 0,[...R,x.id]))}catch(B){le(B)}finally{delete n[q.id],u()}}),Mr(`[${i}]: Add ${x.id} to JobQueue`),Mr(`[${i}]: JobQueue length=${r.length}`),u()});return{addWorker:k=>(e[k.id]=k,Mr(`[${i}]: Add ${k.id}`),Mr(`[${i}]: Number of workers=${c()}`),u(),k.id),addJob:async(k,...R)=>{if(c()===0)throw Error(`[${i}]: You need to have at least one worker before adding jobs`);return g(k,R)},terminate:async()=>{Object.keys(e).forEach(async k=>{await e[k].terminate()}),r=[]},getQueueLen:l,getNumWorkers:c}};function Ps(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}function Ms(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var Ls=Ms;const Rs=Ls;var Ns=i=>{const e={};return typeof WorkerGlobalScope<"u"?e.type="webworker":Rs()?e.type="electron":typeof document=="object"?e.type="browser":typeof process=="object"&&typeof Ps=="function"&&(e.type="node"),typeof i>"u"?e:e[i]};const Bs=Ns("type")==="browser",Ks=Bs?i=>new URL(i,window.location.href).href:i=>i;var Fs=i=>{const e={...i};return["corePath","workerPath","langPath"].forEach(n=>{i[n]&&(e[n]=Ks(e[n]))}),e},js=i=>{const e=[],n=[],r=[],l=[],c=[];return i.blocks&&i.blocks.forEach(u=>{u.paragraphs.forEach(g=>{g.lines.forEach(_=>{_.words.forEach(m=>{m.symbols.forEach(v=>{c.push({...v,page:i,block:u,paragraph:g,line:_,word:m})}),l.push({...m,page:i,block:u,paragraph:g,line:_})}),r.push({..._,page:i,block:u,paragraph:g})}),n.push({...g,page:i,block:u})}),e.push({...u,page:i})}),{...i,blocks:e,paragraphs:n,lines:r,words:l,symbols:c}},Qo={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3};const Vs="tesseract.js",zs="5.1.0",Us="Pure Javascript Multilingual OCR",Hs="src/index.js",qs="src/index.d.ts",xs="dist/tesseract.min.js",Ws="dist/tesseract.min.js",Gs={start:"node scripts/server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js && rollup -c scripts/rollup.esm.mjs","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json",prepublishOnly:"npm run build",wait:"rimraf dist && wait-on http://localhost:3000/dist/tesseract.min.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:* test:node:all","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser-tpl":"mocha-headless-chrome -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:detect":"npm run test:browser-tpl -- -f ./tests/detect.test.html","test:browser:recognize":"npm run test:browser-tpl -- -f ./tests/recognize.test.html","test:browser:scheduler":"npm run test:browser-tpl -- -f ./tests/scheduler.test.html","test:browser:FS":"npm run test:browser-tpl -- -f ./tests/FS.test.html",lint:"eslint src","lint:fix":"eslint --fix src",postinstall:"opencollective-postinstall || true"},Ys={"./src/worker/node/index.js":"./src/worker/browser/index.js"},Zs="",Js=["jeromewu"],Qs="Apache-2.0",$s={"@babel/core":"^7.21.4","@babel/eslint-parser":"^7.21.3","@babel/preset-env":"^7.21.4","@rollup/plugin-commonjs":"^24.1.0",acorn:"^8.8.2","babel-loader":"^9.1.2",buffer:"^6.0.3",cors:"^2.8.5",eslint:"^7.32.0","eslint-config-airbnb-base":"^14.2.1","eslint-plugin-import":"^2.27.5","expect.js":"^0.3.1",express:"^4.18.2",mocha:"^10.2.0","mocha-headless-chrome":"^4.0.0","npm-run-all":"^4.1.5",nyc:"^15.1.0",rimraf:"^5.0.0",rollup:"^3.20.7","wait-on":"^7.0.1",webpack:"^5.79.0","webpack-bundle-analyzer":"^4.8.0","webpack-cli":"^5.0.1","webpack-dev-middleware":"^6.0.2","rollup-plugin-sourcemaps":"^0.6.3"},Xs={"bmp-js":"^0.1.0","idb-keyval":"^6.2.0","is-electron":"^2.2.2","is-url":"^1.2.4","node-fetch":"^2.6.9","opencollective-postinstall":"^2.0.3","regenerator-runtime":"^0.13.3","tesseract.js-core":"^5.1.0","wasm-feature-detect":"^1.2.11",zlibjs:"^0.3.1"},eu={"@rollup/pluginutils":"^5.0.2"},tu={type:"git",url:"https://github.com/naptha/tesseract.js.git"},nu={url:"https://github.com/naptha/tesseract.js/issues"},ru="https://github.com/naptha/tesseract.js",iu={type:"opencollective",url:"https://opencollective.com/tesseractjs"},au={name:Vs,version:zs,description:Us,main:Hs,types:qs,unpkg:xs,jsdelivr:Ws,scripts:Gs,browser:Ys,author:Zs,contributors:Js,license:Qs,devDependencies:$s,dependencies:Xs,overrides:eu,repository:tu,bugs:nu,homepage:ru,collective:iu};var ou={workerBlobURL:!0,logger:()=>{}};const lu=au.version,su=ou;var uu={...su,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${lu}/dist/worker.min.js`},cu=({workerPath:i,workerBlobURL:e})=>{let n;if(Blob&&URL&&e){const r=new Blob([`importScripts("${i}");`],{type:"application/javascript"});n=new Worker(URL.createObjectURL(r))}else n=new Worker(i);return n},fu=i=>{i.terminate()},du=(i,e)=>{i.onmessage=({data:n})=>{e(n)}},hu=async(i,e)=>{i.postMessage(e)};const Ti=i=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{e(r.result)},r.onerror=({target:{error:{code:l}}})=>{n(Error(`File could not be read! Code=${l}`))},r.readAsArrayBuffer(i)}),Mi=async i=>{let e=i;if(typeof i>"u")return"undefined";if(typeof i=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(i)?e=atob(i.split(",")[1]).split("").map(n=>n.charCodeAt(0)):e=await(await fetch(i)).arrayBuffer();else if(typeof HTMLElement<"u"&&i instanceof HTMLElement)i.tagName==="IMG"&&(e=await Mi(i.src)),i.tagName==="VIDEO"&&(e=await Mi(i.poster)),i.tagName==="CANVAS"&&await new Promise(n=>{i.toBlob(async r=>{e=await Ti(r),n()})});else if(typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas){const n=await i.convertToBlob();e=await Ti(n)}else(i instanceof File||i instanceof Blob)&&(e=await Ti(i));return new Uint8Array(e)};var pu=Mi;const mu=uu,gu=cu,vu=fu,_u=du,yu=hu,bu=pu;var wu={defaultOptions:mu,spawnWorker:gu,terminateWorker:vu,onMessage:_u,send:yu,loadImage:bu};const ku=Fs,Du=js,mn=Jo,{log:oo}=Zn,Eu=Ri,jn=Qo,{defaultOptions:Su,spawnWorker:Tu,terminateWorker:Cu,onMessage:Au,loadImage:lo,send:Ou}=wu;let so=0;var $o=async(i="eng",e=jn.LSTM_ONLY,n={},r={})=>{const l=Eu("Worker",so),{logger:c,errorHandler:u,...g}=ku({...Su,...n}),_={},m={},v=typeof i=="string"?i.split("+"):i;let k=e,R=r;const U=[jn.DEFAULT,jn.LSTM_ONLY].includes(e)&&!g.legacyCore;let le,x;const q=new Promise((w,$)=>{x=w,le=$}),B=w=>{le(w.message)};let I=Tu(g);I.onerror=B,so+=1;const X=(w,$)=>{_[w]=$},E=(w,$)=>{m[w]=$},Z=({id:w,action:$,payload:Te})=>new Promise((de,Ve)=>{oo(`[${l}]: Start ${w}, action=${$}`);const Ie=`${$}-${w}`;X(Ie,de),E(Ie,Ve),Ou(I,{workerId:l,jobId:w,action:$,payload:Te})}),te=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),J=w=>Z(mn({id:w,action:"load",payload:{options:{lstmOnly:U,corePath:g.corePath,logging:g.logging}}})),se=(w,$,Te)=>Z(mn({id:Te,action:"FS",payload:{method:"writeFile",args:[w,$]}})),me=(w,$)=>Z(mn({id:$,action:"FS",payload:{method:"readFile",args:[w,{encoding:"utf8"}]}})),we=(w,$)=>Z(mn({id:$,action:"FS",payload:{method:"unlink",args:[w]}})),Ne=(w,$,Te)=>Z(mn({id:Te,action:"FS",payload:{method:w,args:$}})),ge=()=>console.warn("`loadLanguage` is depreciated and should be removed from code (workers now come with language pre-loaded)"),be=(w,$)=>Z(mn({id:$,action:"loadLanguage",payload:{langs:w,options:{langPath:g.langPath,dataPath:g.dataPath,cachePath:g.cachePath,cacheMethod:g.cacheMethod,gzip:g.gzip,lstmOnly:[jn.LSTM_ONLY,jn.TESSERACT_LSTM_COMBINED].includes(k)&&!g.legacyLang}}})),ue=()=>console.warn("`initialize` is depreciated and should be removed from code (workers now come pre-initialized)"),Oe=(w,$,Te,de)=>Z(mn({id:de,action:"initialize",payload:{langs:w,oem:$,config:Te}})),Ee=(w="eng",$,Te,de)=>{if(U&&[jn.TESSERACT_ONLY,jn.TESSERACT_LSTM_COMBINED].includes($))throw Error("Legacy model requested but code missing.");const Ve=$||k;k=Ve;const Ie=Te||R;R=Ie;const G=(typeof w=="string"?w.split("+"):w).filter(ce=>!v.includes(ce));return v.push(...G),G.length>0?be(G,de).then(()=>Oe(w,Ve,Ie,de)):Oe(w,Ve,Ie,de)},oe=(w={},$)=>Z(mn({id:$,action:"setParameters",payload:{params:w}})),Ae=async(w,$={},Te={blocks:!0,text:!0,hocr:!0,tsv:!0},de)=>Z(mn({id:de,action:"recognize",payload:{image:await lo(w),options:$,output:Te}})),O=(w="Tesseract OCR Result",$=!1,Te)=>(console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),Z(mn({id:Te,action:"getPDF",payload:{title:w,textonly:$}}))),N=async(w,$)=>{if(U)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return Z(mn({id:$,action:"detect",payload:{image:await lo(w)}}))},Y=async()=>(I!==null&&(Cu(I),I=null),Promise.resolve());Au(I,({workerId:w,jobId:$,status:Te,action:de,data:Ve})=>{const Ie=`${de}-${$}`;if(Te==="resolve"){oo(`[${w}]: Complete ${$}`);let ye=Ve;de==="recognize"?ye=Du(Ve):de==="getPDF"&&(ye=Array.from({...Ve,length:Object.keys(Ve).length})),_[Ie]({jobId:$,data:ye})}else if(Te==="reject")if(m[Ie](Ve),de==="load"&&le(Ve),u)u(Ve);else throw Error(Ve);else Te==="progress"&&c({...Ve,userJobId:$})});const _e={id:l,worker:I,setResolve:X,setReject:E,load:te,writeText:se,readText:me,removeFile:we,FS:Ne,loadLanguage:ge,initialize:ue,reinitialize:Ee,setParameters:oe,recognize:Ae,getPDF:O,detect:N,terminate:Y};return J().then(()=>be(i)).then(()=>Oe(i,e,r)).then(()=>x(_e)).catch(()=>{}),q};const Xo=$o,Iu=async(i,e,n)=>{const r=await Xo(e,1,n);return r.recognize(i).finally(async()=>{await r.terminate()})},Pu=async(i,e)=>{const n=await Xo("osd",0,e);return n.detect(i).finally(async()=>{await n.terminate()})};var Mu={recognize:Iu,detect:Pu},Lu={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"},Ru={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"};const Nu=Is,Bu=$o,Ku=Mu,Fu=Lu,ju=Qo,Vu=Ru,{setLogging:zu}=Zn;var Uu={languages:Fu,OEM:ju,PSM:Vu,createScheduler:Nu,createWorker:Bu,setLogging:zu,...Ku};const el=xo(Uu);function uo(i,e,n){const r=i.slice();return r[21]=e[n],r}function co(i,e,n){const r=i.slice();return r[24]=e[n],r}function fo(i,e,n){const r=i.slice();return r[27]=e[n],r}function ho(i,e,n){const r=i.slice();return r[30]=e[n],r}function po(i){let e,n,r=i[0].name+"",l,c,u,g,_,m,v,k,R,U='<img id="imgChosen" class="img-fluid" alt="Your chosen receipt"/>',le,x,q,B,I="Receipt description",X,E,Z,te,J,se,me,we="Receipt Date",Ne,ge,be,ue,Oe,Ee,oe="Receipt value:",Ae,O,N,Y,_e,w,$,Te="Receipt Type",de,Ve,Ie,ye="--Please choose type--",G,ce,ke,ze="Receipt Currency",Me,A,qe,Be,he="Add Receipt",We,it,dt="<h4>Scanning image...</h4> <progress>Scanning image...</progress>",Et,ut,bt,It,ht,Ct,Je,Xt;function vn(pe,ne){return pe[8]?qu:Hu}let Qt=vn(i),Rt=Qt(i),Pt=Ze(i[1]),lt=[];for(let pe=0;pe<Pt.length;pe+=1)lt[pe]=mo(ho(i,Pt,pe));function Fe(pe){i[14](pe)}let _n={format:"yyyy-MM-dd",closeOnSelection:!0,id:"rDate"};i[3]!==void 0&&(_n.value=i[3]),ge=new Yn({props:_n}),nn.push(()=>Mn(ge,"value",Fe));let jt=Ze(i[2]),pt=[];for(let pe=0;pe<jt.length;pe+=1)pt[pe]=go(fo(i,jt,pe));let De=Ze(Object.values(dr)),mt=[];for(let pe=0;pe<De.length;pe+=1)mt[pe]=vo(co(i,De,pe));let _t=Ze(Object.keys(Dt)),gt=[];for(let pe=0;pe<_t.length;pe+=1)gt[pe]=_o(uo(i,_t,pe));return{c(){e=S("h1"),n=Le('Add Receipt to "'),l=Le(r),c=Le('"'),u=ie(),Rt.c(),g=ie(),_=S("div"),m=S("input"),v=ie(),k=S("div"),R=S("div"),R.innerHTML=U,le=ie(),x=S("div"),q=S("div"),B=S("label"),B.textContent=I,X=ie(),E=S("input"),Z=ie(),te=S("datalist");for(let pe=0;pe<lt.length;pe+=1)lt[pe].c();J=ie(),se=S("div"),me=S("label"),me.textContent=we,Ne=ie(),Vt(ge.$$.fragment),ue=ie(),Oe=S("div"),Ee=S("label"),Ee.textContent=oe,Ae=ie(),O=S("input"),N=ie(),Y=S("datalist");for(let pe=0;pe<pt.length;pe+=1)pt[pe].c();_e=ie(),w=S("div"),$=S("label"),$.textContent=Te,de=ie(),Ve=S("select"),Ie=S("option"),Ie.textContent=ye;for(let pe=0;pe<mt.length;pe+=1)mt[pe].c();G=ie(),ce=S("div"),ke=S("label"),ke.textContent=ze,Me=ie(),A=S("select");for(let pe=0;pe<gt.length;pe+=1)gt[pe].c();qe=ie(),Be=S("button"),Be.textContent=he,We=ie(),it=S("div"),it.innerHTML=dt,Et=ie(),ut=S("div"),bt=S("a"),It=Le("Cancel"),this.h()},l(pe){e=T(pe,"H1",{});var ne=H(e);n=Re(ne,'Add Receipt to "'),l=Re(ne,r),c=Re(ne,'"'),ne.forEach(b),u=ae(pe),Rt.l(pe),g=ae(pe),_=T(pe,"DIV",{class:!0});var xe=H(_);m=T(xe,"INPUT",{id:!0,type:!0,accept:!0}),xe.forEach(b),v=ae(pe),k=T(pe,"DIV",{id:!0});var Pe=H(k);R=T(Pe,"DIV",{class:!0,"data-svelte-h":!0}),Ge(R)!=="svelte-lr06dx"&&(R.innerHTML=U),le=ae(Pe),x=T(Pe,"DIV",{class:!0});var Ce=H(x);q=T(Ce,"DIV",{class:!0});var vt=H(q);B=T(vt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ge(B)!=="svelte-1glg0dd"&&(B.textContent=I),X=ae(vt),E=T(vt,"INPUT",{class:!0,list:!0,id:!0,name:!0,placeholder:!0}),Z=ae(vt),te=T(vt,"DATALIST",{id:!0});var Nt=H(te);for(let yt=0;yt<lt.length;yt+=1)lt[yt].l(Nt);Nt.forEach(b),vt.forEach(b),J=ae(Ce),se=T(Ce,"DIV",{class:!0});var qt=H(se);me=T(qt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ge(me)!=="svelte-cn0bms"&&(me.textContent=we),Ne=ae(qt),zt(ge.$$.fragment,qt),qt.forEach(b),ue=ae(Ce),Oe=T(Ce,"DIV",{class:!0});var at=H(Oe);Ee=T(at,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ge(Ee)!=="svelte-1y6fy9c"&&(Ee.textContent=oe),Ae=ae(at),O=T(at,"INPUT",{class:!0,list:!0,id:!0,name:!0,type:!0,step:!0,placeholder:!0}),N=ae(at),Y=T(at,"DATALIST",{id:!0});var wt=H(Y);for(let yt=0;yt<pt.length;yt+=1)pt[yt].l(wt);wt.forEach(b),at.forEach(b),_e=ae(Ce),w=T(Ce,"DIV",{class:!0});var an=H(w);$=T(an,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ge($)!=="svelte-1vxf1l8"&&($.textContent=Te),de=ae(an),Ve=T(an,"SELECT",{id:!0,class:!0});var fn=H(Ve);Ie=T(fn,"OPTION",{"data-svelte-h":!0}),Ge(Ie)!=="svelte-ua8958"&&(Ie.textContent=ye);for(let yt=0;yt<mt.length;yt+=1)mt[yt].l(fn);fn.forEach(b),an.forEach(b),G=ae(Ce),ce=T(Ce,"DIV",{class:!0});var en=H(ce);ke=T(en,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ge(ke)!=="svelte-15s44q2"&&(ke.textContent=ze),Me=ae(en),A=T(en,"SELECT",{id:!0,class:!0});var dn=H(A);for(let yt=0;yt<gt.length;yt+=1)gt[yt].l(dn);dn.forEach(b),en.forEach(b),qe=ae(Ce),Be=T(Ce,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Ge(Be)!=="svelte-1059pct"&&(Be.textContent=he),Ce.forEach(b),Pe.forEach(b),We=ae(pe),it=T(pe,"DIV",{class:!0,"data-svelte-h":!0}),Ge(it)!=="svelte-z0xj81"&&(it.innerHTML=dt),Et=ae(pe),ut=T(pe,"DIV",{class:!0});var Dn=H(ut);bt=T(Dn,"A",{href:!0,class:!0});var tn=H(bt);It=Re(tn,"Cancel"),tn.forEach(b),Dn.forEach(b),this.h()},h(){h(m,"id","imageInput"),h(m,"type","file"),h(m,"accept","image/*;capture=camera"),h(_,"class","mb-3"),h(R,"class","img-scan d-flex col-md-6 col-sm-12"),h(B,"for","rDesc"),h(B,"class","form-label"),h(E,"class","form-control"),h(E,"list","descOptions"),h(E,"id","rDesc"),h(E,"name","rDesc"),h(E,"placeholder","Double-click for suggestions"),h(te,"id","descOptions"),h(q,"class","mb-3"),h(me,"for","rDate"),h(me,"class","form-label"),h(se,"class","mb-3"),h(Ee,"for","rVal"),h(Ee,"class","form-label"),h(O,"class","form-control"),h(O,"list","valOptions"),h(O,"id","rVal"),h(O,"name","rVal"),h(O,"type","number"),h(O,"step","0.01"),h(O,"placeholder","Double-click for suggestions"),h(Y,"id","valOptions"),h(Oe,"class","mb-3"),h($,"for","rType"),h($,"class","form-label"),Ie.selected=!0,Ie.__value="--Please choose type--",ot(Ie,Ie.__value),h(Ve,"id","rType"),h(Ve,"class","form-control"),i[7]===void 0&&Vn(()=>i[16].call(Ve)),h(w,"class","mb-3"),h(ke,"for","rCurrency"),h(ke,"class","form-label"),h(A,"id","rCurrency"),h(A,"class","form-control"),i[4]===void 0&&Vn(()=>i[17].call(A)),h(ce,"class","mb-3"),h(Be,"type","button"),h(Be,"class","btn btn-primary"),h(x,"class","d-flex flex-column col-md-6 col-sm-12"),h(k,"id","receiptEntry"),Tt(k,"show",i[9]),h(it,"class","flex-column hide"),Tt(it,"show",!i[9]&&i[8]),h(bt,"href",ht="#/trip/"+i[0].id),h(bt,"class","btn btn-outline-primary"),h(ut,"class","mt-3 d-grid d-md-block")},m(pe,ne){fe(pe,e,ne),p(e,n),p(e,l),p(e,c),fe(pe,u,ne),Rt.m(pe,ne),fe(pe,g,ne),fe(pe,_,ne),p(_,m),fe(pe,v,ne),fe(pe,k,ne),p(k,R),p(k,le),p(k,x),p(x,q),p(q,B),p(q,X),p(q,E),ot(E,i[5]),p(q,Z),p(q,te);for(let xe=0;xe<lt.length;xe+=1)lt[xe]&&lt[xe].m(te,null);p(x,J),p(x,se),p(se,me),p(se,Ne),Ut(ge,se,null),p(x,ue),p(x,Oe),p(Oe,Ee),p(Oe,Ae),p(Oe,O),ot(O,i[6]),p(Oe,N),p(Oe,Y);for(let xe=0;xe<pt.length;xe+=1)pt[xe]&&pt[xe].m(Y,null);p(x,_e),p(x,w),p(w,$),p(w,de),p(w,Ve),p(Ve,Ie);for(let xe=0;xe<mt.length;xe+=1)mt[xe]&&mt[xe].m(Ve,null);Jt(Ve,i[7],!0),p(x,G),p(x,ce),p(ce,ke),p(ce,Me),p(ce,A);for(let xe=0;xe<gt.length;xe+=1)gt[xe]&&gt[xe].m(A,null);Jt(A,i[4],!0),p(x,qe),p(x,Be),fe(pe,We,ne),fe(pe,it,ne),fe(pe,Et,ne),fe(pe,ut,ne),p(ut,bt),p(bt,It),Ct=!0,Je||(Xt=[Ye(m,"change",i[11]),Ye(E,"input",i[13]),Ye(O,"input",i[15]),Ye(Ve,"change",i[16]),Ye(A,"change",i[17]),Ye(Be,"click",i[10])],Je=!0)},p(pe,ne){if((!Ct||ne[0]&1)&&r!==(r=pe[0].name+"")&&Xe(l,r),Qt!==(Qt=vn(pe))&&(Rt.d(1),Rt=Qt(pe),Rt&&(Rt.c(),Rt.m(g.parentNode,g))),ne[0]&32&&E.value!==pe[5]&&ot(E,pe[5]),ne[0]&2){Pt=Ze(pe[1]);let Pe;for(Pe=0;Pe<Pt.length;Pe+=1){const Ce=ho(pe,Pt,Pe);lt[Pe]?lt[Pe].p(Ce,ne):(lt[Pe]=mo(Ce),lt[Pe].c(),lt[Pe].m(te,null))}for(;Pe<lt.length;Pe+=1)lt[Pe].d(1);lt.length=Pt.length}const xe={};if(!be&&ne[0]&8&&(be=!0,xe.value=pe[3],Pn(()=>be=!1)),ge.$set(xe),ne[0]&64&&qr(O.value)!==pe[6]&&ot(O,pe[6]),ne[0]&4){jt=Ze(pe[2]);let Pe;for(Pe=0;Pe<jt.length;Pe+=1){const Ce=fo(pe,jt,Pe);pt[Pe]?pt[Pe].p(Ce,ne):(pt[Pe]=go(Ce),pt[Pe].c(),pt[Pe].m(Y,null))}for(;Pe<pt.length;Pe+=1)pt[Pe].d(1);pt.length=jt.length}if(ne&0){De=Ze(Object.values(dr));let Pe;for(Pe=0;Pe<De.length;Pe+=1){const Ce=co(pe,De,Pe);mt[Pe]?mt[Pe].p(Ce,ne):(mt[Pe]=vo(Ce),mt[Pe].c(),mt[Pe].m(Ve,null))}for(;Pe<mt.length;Pe+=1)mt[Pe].d(1);mt.length=De.length}if(ne[0]&128&&Jt(Ve,pe[7]),ne&0){_t=Ze(Object.keys(Dt));let Pe;for(Pe=0;Pe<_t.length;Pe+=1){const Ce=uo(pe,_t,Pe);gt[Pe]?gt[Pe].p(Ce,ne):(gt[Pe]=_o(Ce),gt[Pe].c(),gt[Pe].m(A,null))}for(;Pe<gt.length;Pe+=1)gt[Pe].d(1);gt.length=_t.length}ne[0]&16&&Jt(A,pe[4]),(!Ct||ne[0]&512)&&Tt(k,"show",pe[9]),(!Ct||ne[0]&768)&&Tt(it,"show",!pe[9]&&pe[8]),(!Ct||ne[0]&1&&ht!==(ht="#/trip/"+pe[0].id))&&h(bt,"href",ht)},i(pe){Ct||(rt(ge.$$.fragment,pe),Ct=!0)},o(pe){st(ge.$$.fragment,pe),Ct=!1},d(pe){pe&&(b(e),b(u),b(g),b(_),b(v),b(k),b(We),b(it),b(Et),b(ut)),Rt.d(pe),Lt(lt,pe),Ht(ge),Lt(pt,pe),Lt(mt,pe),Lt(gt,pe),Je=!1,kn(Xt)}}}function Hu(i){let e,n="Choose image to begin";return{c(){e=S("p"),e.textContent=n},l(r){e=T(r,"P",{"data-svelte-h":!0}),Ge(e)!=="svelte-1rdbglw"&&(e.textContent=n)},m(r,l){fe(r,e,l)},d(r){r&&b(e)}}}function qu(i){let e,n="Click 'Browse' to start again";return{c(){e=S("p"),e.textContent=n},l(r){e=T(r,"P",{"data-svelte-h":!0}),Ge(e)!=="svelte-1raiglx"&&(e.textContent=n)},m(r,l){fe(r,e,l)},d(r){r&&b(e)}}}function mo(i){let e,n;return{c(){e=S("option"),this.h()},l(r){e=T(r,"OPTION",{}),H(e).forEach(b),this.h()},h(){e.__value=n=i[30],ot(e,e.__value)},m(r,l){fe(r,e,l)},p(r,l){l[0]&2&&n!==(n=r[30])&&(e.__value=n,ot(e,e.__value))},d(r){r&&b(e)}}}function go(i){let e,n=i[27]+"",r,l;return{c(){e=S("option"),r=Le(n),this.h()},l(c){e=T(c,"OPTION",{});var u=H(e);r=Re(u,n),u.forEach(b),this.h()},h(){e.__value=l=i[27],ot(e,e.__value)},m(c,u){fe(c,e,u),p(e,r)},p(c,u){u[0]&4&&n!==(n=c[27]+"")&&Xe(r,n),u[0]&4&&l!==(l=c[27])&&(e.__value=l,ot(e,e.__value))},d(c){c&&b(e)}}}function vo(i){let e,n=i[24]+"",r;return{c(){e=S("option"),r=Le(n),this.h()},l(l){e=T(l,"OPTION",{});var c=H(e);r=Re(c,n),c.forEach(b),this.h()},h(){e.__value=i[24],ot(e,e.__value)},m(l,c){fe(l,e,c),p(e,r)},p:kt,d(l){l&&b(e)}}}function _o(i){let e,n=i[21]+"",r,l,c=Dt[i[21]].symbol+"",u,g;return{c(){e=S("option"),r=Le(n),l=Le(" ("),u=Le(c),g=Le(`)
                `),this.h()},l(_){e=T(_,"OPTION",{});var m=H(e);r=Re(m,n),l=Re(m," ("),u=Re(m,c),g=Re(m,`)
                `),m.forEach(b),this.h()},h(){e.__value=i[21],ot(e,e.__value)},m(_,m){fe(_,e,m),p(e,r),p(e,l),p(e,u),p(e,g)},p:kt,d(_){_&&b(e)}}}function xu(i){let e,n,r=i[0]&&po(i);return{c(){e=S("div"),r&&r.c(),this.h()},l(l){e=T(l,"DIV",{class:!0});var c=H(e);r&&r.l(c),c.forEach(b),this.h()},h(){h(e,"class","w-100")},m(l,c){fe(l,e,c),r&&r.m(e,null),n=!0},p(l,c){l[0]?r?(r.p(l,c),c[0]&1&&rt(r,1)):(r=po(l),r.c(),rt(r,1),r.m(e,null)):r&&(zn(),st(r,1,1,()=>{r=null}),Un())},i(l){n||(rt(r),n=!0)},o(l){st(r),n=!1},d(l){l&&b(e),r&&r.d()}}}function Wu(i,e,n){let{tripId:r}=e,l,c=[],u=[],g=new Date,_,m,v,k,R,U,le,x=!1;r>-1&&Bt.trips.get(r).then(se=>{n(0,l=se),n(4,_=l.defaultCurrency)});async function q(){let se=document.getElementById("imgChosen");le=se.naturalWidth,U=se.naturalHeight,await Bt.receipts.add({description:m,currency:_,receiptDate:g,receiptDateString:g.toDateString(),receiptType:k,total:v,tripId:r,imageData:R,imageHeight:U,imageWidth:le}),window.location.href="#/trip/"+r}async function B(se){var me=await el.recognize(se,"eng");return me.data.lines}async function I(se){n(1,c=[]),n(2,u=[]),n(9,x=!1);var me=se.target.files[0];n(8,R=me);var we=URL.createObjectURL(me);const Ne=document.getElementById("imgChosen");Ne.src=we;var ge=await B(we);for(let be of ge){if(be.confidence<40)continue;c.push(be.text);let ue=gn(be.text);ue.value>0&&u.push(ue.format({symbol:"",separator:""}))}n(1,c),n(2,u=u.reverse()),n(9,x=!0)}function X(){m=this.value,n(5,m)}function E(se){g=se,n(3,g)}function Z(){v=qr(this.value),n(6,v)}function te(){k=Gn(this),n(7,k)}function J(){_=Gn(this),n(4,_)}return i.$$set=se=>{"tripId"in se&&n(12,r=se.tripId)},[l,c,u,g,_,m,v,k,R,x,q,I,r,X,E,Z,te,J]}class Gu extends ln{constructor(e){super(),sn(this,e,Wu,xu,rn,{tripId:12},null,[-1,-1])}}function yo(i,e,n){const r=i.slice();return r[21]=e[n],r}function bo(i,e,n){const r=i.slice();return r[24]=e[n],r}function wo(i,e,n){const r=i.slice();return r[27]=e[n],r}function ko(i,e,n){const r=i.slice();return r[30]=e[n],r}function Do(i){let e,n,r=i[0].description+"",l,c,u,g,_,m,v,k,R,U,le,x,q,B,I,X="Receipt description",E,Z,te,J,se,me,we,Ne="Receipt Date",ge,be,ue,Oe,Ee,oe,Ae="Receipt value:",O,N,Y,_e,w,$,Te,de="Receipt Type",Ve,Ie,ye,G="--Please choose type--",ce,ke,ze,Me="Receipt Currency",A,qe,Be,he,We,it="Update Receipt",dt,Et,ut,bt,It,ht,Ct="<h4>Scanning image...</h4> <progress>Scanning image...</progress>",Je,Xt,vn;function Qt(ne,xe){return ne[8]?Zu:Yu}let Rt=Qt(i),Pt=Rt(i),lt=Ze(i[1]),Fe=[];for(let ne=0;ne<lt.length;ne+=1)Fe[ne]=Eo(ko(i,lt,ne));function _n(ne){i[14](ne)}let jt={format:"yyyy-MM-dd",closeOnSelection:!0,id:"rDate"};i[3]!==void 0&&(jt.value=i[3]),be=new Yn({props:jt}),nn.push(()=>Mn(be,"value",_n));let pt=Ze(i[2]),De=[];for(let ne=0;ne<pt.length;ne+=1)De[ne]=So(wo(i,pt,ne));let mt=Ze(Object.values(dr)),_t=[];for(let ne=0;ne<mt.length;ne+=1)_t[ne]=To(bo(i,mt,ne));let gt=Ze(Object.keys(Dt)),pe=[];for(let ne=0;ne<gt.length;ne+=1)pe[ne]=Co(yo(i,gt,ne));return{c(){e=S("h1"),n=Le('Update Receipt for "'),l=Le(r),c=Le('"'),u=ie(),Pt.c(),g=ie(),_=S("div"),m=S("input"),v=ie(),k=S("div"),R=S("div"),U=S("img"),x=ie(),q=S("div"),B=S("div"),I=S("label"),I.textContent=X,E=ie(),Z=S("input"),te=ie(),J=S("datalist");for(let ne=0;ne<Fe.length;ne+=1)Fe[ne].c();se=ie(),me=S("div"),we=S("label"),we.textContent=Ne,ge=ie(),Vt(be.$$.fragment),Oe=ie(),Ee=S("div"),oe=S("label"),oe.textContent=Ae,O=ie(),N=S("input"),Y=ie(),_e=S("datalist");for(let ne=0;ne<De.length;ne+=1)De[ne].c();w=ie(),$=S("div"),Te=S("label"),Te.textContent=de,Ve=ie(),Ie=S("select"),ye=S("option"),ye.textContent=G;for(let ne=0;ne<_t.length;ne+=1)_t[ne].c();ce=ie(),ke=S("div"),ze=S("label"),ze.textContent=Me,A=ie(),qe=S("select");for(let ne=0;ne<pe.length;ne+=1)pe[ne].c();Be=ie(),he=S("div"),We=S("button"),We.textContent=it,dt=ie(),Et=S("a"),ut=Le("Cancel"),It=ie(),ht=S("div"),ht.innerHTML=Ct,this.h()},l(ne){e=T(ne,"H1",{});var xe=H(e);n=Re(xe,'Update Receipt for "'),l=Re(xe,r),c=Re(xe,'"'),xe.forEach(b),u=ae(ne),Pt.l(ne),g=ae(ne),_=T(ne,"DIV",{class:!0});var Pe=H(_);m=T(Pe,"INPUT",{id:!0,type:!0,accept:!0}),Pe.forEach(b),v=ae(ne),k=T(ne,"DIV",{id:!0});var Ce=H(k);R=T(Ce,"DIV",{class:!0});var vt=H(R);U=T(vt,"IMG",{id:!0,class:!0,src:!0,alt:!0}),vt.forEach(b),x=ae(Ce),q=T(Ce,"DIV",{class:!0});var Nt=H(q);B=T(Nt,"DIV",{class:!0});var qt=H(B);I=T(qt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ge(I)!=="svelte-1glg0dd"&&(I.textContent=X),E=ae(qt),Z=T(qt,"INPUT",{class:!0,list:!0,id:!0,name:!0,placeholder:!0}),te=ae(qt),J=T(qt,"DATALIST",{id:!0});var at=H(J);for(let Mt=0;Mt<Fe.length;Mt+=1)Fe[Mt].l(at);at.forEach(b),qt.forEach(b),se=ae(Nt),me=T(Nt,"DIV",{class:!0});var wt=H(me);we=T(wt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ge(we)!=="svelte-cn0bms"&&(we.textContent=Ne),ge=ae(wt),zt(be.$$.fragment,wt),wt.forEach(b),Oe=ae(Nt),Ee=T(Nt,"DIV",{class:!0});var an=H(Ee);oe=T(an,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ge(oe)!=="svelte-1y6fy9c"&&(oe.textContent=Ae),O=ae(an),N=T(an,"INPUT",{class:!0,list:!0,id:!0,name:!0,type:!0,step:!0,placeholder:!0}),Y=ae(an),_e=T(an,"DATALIST",{id:!0});var fn=H(_e);for(let Mt=0;Mt<De.length;Mt+=1)De[Mt].l(fn);fn.forEach(b),an.forEach(b),w=ae(Nt),$=T(Nt,"DIV",{class:!0});var en=H($);Te=T(en,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ge(Te)!=="svelte-1vxf1l8"&&(Te.textContent=de),Ve=ae(en),Ie=T(en,"SELECT",{id:!0,class:!0});var dn=H(Ie);ye=T(dn,"OPTION",{"data-svelte-h":!0}),Ge(ye)!=="svelte-10m9j2x"&&(ye.textContent=G);for(let Mt=0;Mt<_t.length;Mt+=1)_t[Mt].l(dn);dn.forEach(b),en.forEach(b),ce=ae(Nt),ke=T(Nt,"DIV",{class:!0});var Dn=H(ke);ze=T(Dn,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ge(ze)!=="svelte-15s44q2"&&(ze.textContent=Me),A=ae(Dn),qe=T(Dn,"SELECT",{id:!0,class:!0});var tn=H(qe);for(let Mt=0;Mt<pe.length;Mt+=1)pe[Mt].l(tn);tn.forEach(b),Dn.forEach(b),Be=ae(Nt),he=T(Nt,"DIV",{class:!0});var yt=H(he);We=T(yt,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Ge(We)!=="svelte-jbq1gp"&&(We.textContent=it),dt=ae(yt),Et=T(yt,"A",{href:!0,class:!0});var hn=H(Et);ut=Re(hn,"Cancel"),hn.forEach(b),yt.forEach(b),Nt.forEach(b),Ce.forEach(b),It=ae(ne),ht=T(ne,"DIV",{class:!0,"data-svelte-h":!0}),Ge(ht)!=="svelte-z0xj81"&&(ht.innerHTML=Ct),this.h()},h(){h(m,"id","imageInput"),h(m,"type","file"),h(m,"accept","image/*;capture=camera"),h(_,"class","mb-3"),h(U,"id","imgChosen"),h(U,"class","img-fluid"),Kr(U.src,le=URL.createObjectURL(i[8]))||h(U,"src",le),h(U,"alt","Your chosen receipt"),h(R,"class","img-scan d-flex col-md-6 col-sm-12"),h(I,"for","rDesc"),h(I,"class","form-label"),h(Z,"class","form-control"),h(Z,"list","descOptions"),h(Z,"id","rDesc"),h(Z,"name","rDesc"),h(Z,"placeholder","Double-click for suggestions"),h(J,"id","descOptions"),h(B,"class","mb-3"),h(we,"for","rDate"),h(we,"class","form-label"),h(me,"class","mb-3"),h(oe,"for","rVal"),h(oe,"class","form-label"),h(N,"class","form-control"),h(N,"list","valOptions"),h(N,"id","rVal"),h(N,"name","rVal"),h(N,"type","number"),h(N,"step","0.01"),h(N,"placeholder","Double-click for suggestions"),h(_e,"id","valOptions"),h(Ee,"class","mb-3"),h(Te,"for","rType"),h(Te,"class","form-label"),ye.__value="--Please choose type--",ot(ye,ye.__value),h(Ie,"id","rType"),h(Ie,"class","form-control"),i[7]===void 0&&Vn(()=>i[16].call(Ie)),h($,"class","mb-3"),h(ze,"for","rCurrency"),h(ze,"class","form-label"),h(qe,"id","rCurrency"),h(qe,"class","form-control"),i[4]===void 0&&Vn(()=>i[17].call(qe)),h(ke,"class","mb-3"),h(We,"type","button"),h(We,"class","btn btn-primary"),h(Et,"href",bt="#/trip/"+i[0].tripId),h(Et,"class","btn btn-outline-primary"),h(he,"class","gap-3 d-grid d-md-block"),h(q,"class","d-flex flex-column col-md-6 col-sm-12"),h(k,"id","receiptEntry"),Tt(k,"show",i[9]),h(ht,"class","flex-column hide"),Tt(ht,"show",!i[9]&&i[8])},m(ne,xe){fe(ne,e,xe),p(e,n),p(e,l),p(e,c),fe(ne,u,xe),Pt.m(ne,xe),fe(ne,g,xe),fe(ne,_,xe),p(_,m),fe(ne,v,xe),fe(ne,k,xe),p(k,R),p(R,U),p(k,x),p(k,q),p(q,B),p(B,I),p(B,E),p(B,Z),ot(Z,i[5]),p(B,te),p(B,J);for(let Pe=0;Pe<Fe.length;Pe+=1)Fe[Pe]&&Fe[Pe].m(J,null);p(q,se),p(q,me),p(me,we),p(me,ge),Ut(be,me,null),p(q,Oe),p(q,Ee),p(Ee,oe),p(Ee,O),p(Ee,N),ot(N,i[6]),p(Ee,Y),p(Ee,_e);for(let Pe=0;Pe<De.length;Pe+=1)De[Pe]&&De[Pe].m(_e,null);p(q,w),p(q,$),p($,Te),p($,Ve),p($,Ie),p(Ie,ye);for(let Pe=0;Pe<_t.length;Pe+=1)_t[Pe]&&_t[Pe].m(Ie,null);Jt(Ie,i[7],!0),p(q,ce),p(q,ke),p(ke,ze),p(ke,A),p(ke,qe);for(let Pe=0;Pe<pe.length;Pe+=1)pe[Pe]&&pe[Pe].m(qe,null);Jt(qe,i[4],!0),p(q,Be),p(q,he),p(he,We),p(he,dt),p(he,Et),p(Et,ut),fe(ne,It,xe),fe(ne,ht,xe),Je=!0,Xt||(vn=[Ye(m,"change",i[11]),Ye(Z,"input",i[13]),Ye(N,"input",i[15]),Ye(Ie,"change",i[16]),Ye(qe,"change",i[17]),Ye(We,"click",i[10])],Xt=!0)},p(ne,xe){if((!Je||xe[0]&1)&&r!==(r=ne[0].description+"")&&Xe(l,r),Rt!==(Rt=Qt(ne))&&(Pt.d(1),Pt=Rt(ne),Pt&&(Pt.c(),Pt.m(g.parentNode,g))),(!Je||xe[0]&256&&!Kr(U.src,le=URL.createObjectURL(ne[8])))&&h(U,"src",le),xe[0]&32&&Z.value!==ne[5]&&ot(Z,ne[5]),xe[0]&2){lt=Ze(ne[1]);let Ce;for(Ce=0;Ce<lt.length;Ce+=1){const vt=ko(ne,lt,Ce);Fe[Ce]?Fe[Ce].p(vt,xe):(Fe[Ce]=Eo(vt),Fe[Ce].c(),Fe[Ce].m(J,null))}for(;Ce<Fe.length;Ce+=1)Fe[Ce].d(1);Fe.length=lt.length}const Pe={};if(!ue&&xe[0]&8&&(ue=!0,Pe.value=ne[3],Pn(()=>ue=!1)),be.$set(Pe),xe[0]&64&&qr(N.value)!==ne[6]&&ot(N,ne[6]),xe[0]&4){pt=Ze(ne[2]);let Ce;for(Ce=0;Ce<pt.length;Ce+=1){const vt=wo(ne,pt,Ce);De[Ce]?De[Ce].p(vt,xe):(De[Ce]=So(vt),De[Ce].c(),De[Ce].m(_e,null))}for(;Ce<De.length;Ce+=1)De[Ce].d(1);De.length=pt.length}if(xe&0){mt=Ze(Object.values(dr));let Ce;for(Ce=0;Ce<mt.length;Ce+=1){const vt=bo(ne,mt,Ce);_t[Ce]?_t[Ce].p(vt,xe):(_t[Ce]=To(vt),_t[Ce].c(),_t[Ce].m(Ie,null))}for(;Ce<_t.length;Ce+=1)_t[Ce].d(1);_t.length=mt.length}if(xe[0]&128&&Jt(Ie,ne[7]),xe&0){gt=Ze(Object.keys(Dt));let Ce;for(Ce=0;Ce<gt.length;Ce+=1){const vt=yo(ne,gt,Ce);pe[Ce]?pe[Ce].p(vt,xe):(pe[Ce]=Co(vt),pe[Ce].c(),pe[Ce].m(qe,null))}for(;Ce<pe.length;Ce+=1)pe[Ce].d(1);pe.length=gt.length}xe[0]&16&&Jt(qe,ne[4]),(!Je||xe[0]&1&&bt!==(bt="#/trip/"+ne[0].tripId))&&h(Et,"href",bt),(!Je||xe[0]&512)&&Tt(k,"show",ne[9]),(!Je||xe[0]&768)&&Tt(ht,"show",!ne[9]&&ne[8])},i(ne){Je||(rt(be.$$.fragment,ne),Je=!0)},o(ne){st(be.$$.fragment,ne),Je=!1},d(ne){ne&&(b(e),b(u),b(g),b(_),b(v),b(k),b(It),b(ht)),Pt.d(ne),Lt(Fe,ne),Ht(be),Lt(De,ne),Lt(_t,ne),Lt(pe,ne),Xt=!1,kn(vn)}}}function Yu(i){let e,n="Choose image to begin";return{c(){e=S("p"),e.textContent=n},l(r){e=T(r,"P",{"data-svelte-h":!0}),Ge(e)!=="svelte-1rdbglw"&&(e.textContent=n)},m(r,l){fe(r,e,l)},d(r){r&&b(e)}}}function Zu(i){let e,n="'Choose file' to start again";return{c(){e=S("p"),e.textContent=n},l(r){e=T(r,"P",{"data-svelte-h":!0}),Ge(e)!=="svelte-ffknqs"&&(e.textContent=n)},m(r,l){fe(r,e,l)},d(r){r&&b(e)}}}function Eo(i){let e,n;return{c(){e=S("option"),this.h()},l(r){e=T(r,"OPTION",{}),H(e).forEach(b),this.h()},h(){e.__value=n=i[30],ot(e,e.__value)},m(r,l){fe(r,e,l)},p(r,l){l[0]&2&&n!==(n=r[30])&&(e.__value=n,ot(e,e.__value))},d(r){r&&b(e)}}}function So(i){let e,n=i[27]+"",r,l;return{c(){e=S("option"),r=Le(n),this.h()},l(c){e=T(c,"OPTION",{});var u=H(e);r=Re(u,n),u.forEach(b),this.h()},h(){e.__value=l=i[27],ot(e,e.__value)},m(c,u){fe(c,e,u),p(e,r)},p(c,u){u[0]&4&&n!==(n=c[27]+"")&&Xe(r,n),u[0]&4&&l!==(l=c[27])&&(e.__value=l,ot(e,e.__value))},d(c){c&&b(e)}}}function To(i){let e,n=i[24]+"",r;return{c(){e=S("option"),r=Le(n),this.h()},l(l){e=T(l,"OPTION",{});var c=H(e);r=Re(c,n),c.forEach(b),this.h()},h(){e.__value=i[24],ot(e,e.__value)},m(l,c){fe(l,e,c),p(e,r)},p:kt,d(l){l&&b(e)}}}function Co(i){let e,n=i[21]+"",r,l,c=Dt[i[21]].symbol+"",u,g;return{c(){e=S("option"),r=Le(n),l=Le(" ("),u=Le(c),g=Le(`)
                `),this.h()},l(_){e=T(_,"OPTION",{});var m=H(e);r=Re(m,n),l=Re(m," ("),u=Re(m,c),g=Re(m,`)
                `),m.forEach(b),this.h()},h(){e.__value=i[21],ot(e,e.__value)},m(_,m){fe(_,e,m),p(e,r),p(e,l),p(e,u),p(e,g)},p:kt,d(_){_&&b(e)}}}function Ju(i){let e,n,r=i[0]&&Do(i);return{c(){e=S("div"),r&&r.c(),this.h()},l(l){e=T(l,"DIV",{class:!0});var c=H(e);r&&r.l(c),c.forEach(b),this.h()},h(){h(e,"class","w-100")},m(l,c){fe(l,e,c),r&&r.m(e,null),n=!0},p(l,c){l[0]?r?(r.p(l,c),c[0]&1&&rt(r,1)):(r=Do(l),r.c(),rt(r,1),r.m(e,null)):r&&(zn(),st(r,1,1,()=>{r=null}),Un())},i(l){n||(rt(r),n=!0)},o(l){st(r),n=!1},d(l){l&&b(e),r&&r.d()}}}function Qu(i,e,n){let{receiptId:r}=e,l,c=[],u=[],g=new Date,_,m,v,k,R,U,le,x=!1;r>-1&&Bt.receipts.get(r).then(se=>{n(0,l=se),n(3,g=new Date(l.receiptDateString)),n(4,_=l.currency),n(5,m=l.description),n(6,v=l.total),n(7,k=l.receiptType),n(8,R=l.imageData),n(9,x=!0)});async function q(){let se=document.getElementById("imgChosen");le=se.naturalWidth,U=se.naturalHeight,await Bt.receipts.update(l.id,{description:m,currency:_,receiptDate:g,receiptDateString:g.toDateString(),receiptType:k,total:v,tripId:l.tripId,imageData:R,imageHeight:U,imageWidth:le}),window.location.href="#/trip/"+l.tripId}async function B(se){var me=await el.recognize(se,"eng");return me.data.lines}async function I(se){n(1,c=[]),n(2,u=[]),n(9,x=!1);var me=se.target.files[0];n(8,R=me);var we=URL.createObjectURL(me),Ne=await B(we);for(let ge of Ne){if(ge.confidence<40)continue;c.push(ge.text);let be=gn(ge.text);be.value>0&&u.push(be.format({symbol:"",separator:""}))}n(1,c),n(2,u=u.reverse()),n(9,x=!0)}function X(){m=this.value,n(5,m)}function E(se){g=se,n(3,g)}function Z(){v=qr(this.value),n(6,v)}function te(){k=Gn(this),n(7,k)}function J(){_=Gn(this),n(4,_)}return i.$$set=se=>{"receiptId"in se&&n(12,r=se.receiptId)},[l,c,u,g,_,m,v,k,R,x,q,I,r,X,E,Z,te,J]}class $u extends ln{constructor(e){super(),sn(this,e,Qu,Ju,rn,{receiptId:12},null,[-1,-1])}}function Xu(i){let e,n="<h1>Welcome!</h1> <p>Create a trip using the button at the top</p> <p>Or add receipts by selecting a trip</p>";return{c(){e=S("div"),e.innerHTML=n},l(r){e=T(r,"DIV",{"data-svelte-h":!0}),Ge(e)!=="svelte-klyxeq"&&(e.innerHTML=n)},m(r,l){fe(r,e,l)},p:kt,i:kt,o:kt,d(r){r&&b(e)}}}class ec extends ln{constructor(e){super(),sn(this,e,null,Xu,rn,{})}}function Ao(i,e,n){const r=i.slice();return r[6]=e[n],r}function Oo(i,e,n){const r=i.slice();return r[9]=e[n],r}function Io(i,e,n){const r=i.slice();return r[6]=e[n],r}function Ci(i){const e=i.slice(),n=Array.from(new Set(e[2].map(r=>r.currency)));return e[5]=n,e}function Po(i){let e,n='<p>After clicking &#39;Export/Print&#39;, you should be able to print/save to PDF</p> <button class="btn btn-primary" onclick="window.print()">Export/Print</button>',r,l,c=i[0].name+"",u,g,_,m=i[0].startDateString+"",v,k,R=i[0].endDateString+"",U,le,x,q="Receipt Summary",B,I,X=i[2]&&Mo(Ci(i));return{c(){e=S("div"),e.innerHTML=n,r=ie(),l=S("h1"),u=Le(c),g=ie(),_=S("h4"),v=Le(m),k=Le(" - "),U=Le(R),le=ie(),x=S("h5"),x.textContent=q,B=ie(),X&&X.c(),I=Ft(),this.h()},l(E){e=T(E,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),Ge(e)!=="svelte-1xvffp3"&&(e.innerHTML=n),r=ae(E),l=T(E,"H1",{});var Z=H(l);u=Re(Z,c),Z.forEach(b),g=ae(E),_=T(E,"H4",{});var te=H(_);v=Re(te,m),k=Re(te," - "),U=Re(te,R),te.forEach(b),le=ae(E),x=T(E,"H5",{"data-svelte-h":!0}),Ge(x)!=="svelte-1hbjnf6"&&(x.textContent=q),B=ae(E),X&&X.l(E),I=Ft(),this.h()},h(){h(e,"class","no-print mt-3 hide"),h(e,"id","printMessage")},m(E,Z){fe(E,e,Z),fe(E,r,Z),fe(E,l,Z),p(l,u),fe(E,g,Z),fe(E,_,Z),p(_,v),p(_,k),p(_,U),fe(E,le,Z),fe(E,x,Z),fe(E,B,Z),X&&X.m(E,Z),fe(E,I,Z)},p(E,Z){Z&1&&c!==(c=E[0].name+"")&&Xe(u,c),Z&1&&m!==(m=E[0].startDateString+"")&&Xe(v,m),Z&1&&R!==(R=E[0].endDateString+"")&&Xe(U,R),E[2]?X?X.p(Ci(E),Z):(X=Mo(Ci(E)),X.c(),X.m(I.parentNode,I)):X&&(X.d(1),X=null)},d(E){E&&(b(e),b(r),b(l),b(g),b(_),b(le),b(x),b(B),b(I)),X&&X.d(E)}}}function Mo(i){let e,n,r="<tr><th>Receipt Description</th> <th>Receipt Date</th> <th>Receipt Type</th> <th>Receipt Total</th></tr>",l,c,u=[],g=new Map,_,m,v,k,R,U,le,x,q="<strong>Total</strong>",B,I,X,E,Z,te=[],J=new Map,se,me,we=`// Wait for images to render before printing
        var imgs = document.images,
        len = imgs.length,
        counter = 0;

        [].forEach.call( imgs, function( img ) {
            if(img.complete)
              incrementCounter();
            else
              img.addEventListener( 'load', incrementCounter, false );
        } );

        function printDiaglog() {
          window.print()
        }
        function incrementCounter() {
            counter++;
            if ( counter === len ) {
              document.getElementById("printMessage").classList.remove("hide");
            }
        }`,Ne=Ze(i[2]);const ge=oe=>oe[6].id;for(let oe=0;oe<Ne.length;oe+=1){let Ae=Io(i,Ne,oe),O=ge(Ae);g.set(O,u[oe]=Lo(O,Ae))}let be=Ze(i[5]),ue=[];for(let oe=0;oe<be.length;oe+=1)ue[oe]=Ro(Oo(i,be,oe));let Oe=Ze(i[2]);const Ee=oe=>oe[6].id;for(let oe=0;oe<Oe.length;oe+=1){let Ae=Ao(i,Oe,oe),O=Ee(Ae);J.set(O,te[oe]=No(O,Ae))}return{c(){e=S("table"),n=S("thead"),n.innerHTML=r,l=ie(),c=S("tbody");for(let oe=0;oe<u.length;oe+=1)u[oe].c();_=ie(),m=S("tfoot"),v=S("tr"),k=S("td"),R=ie(),U=S("td"),le=ie(),x=S("td"),x.innerHTML=q,B=ie(),I=S("td");for(let oe=0;oe<ue.length;oe+=1)ue[oe].c();X=ie(),E=S("td"),Z=ie();for(let oe=0;oe<te.length;oe+=1)te[oe].c();se=ie(),me=S("script"),me.textContent=we,this.h()},l(oe){e=T(oe,"TABLE",{class:!0});var Ae=H(e);n=T(Ae,"THEAD",{"data-svelte-h":!0}),Ge(n)!=="svelte-1yqevk1"&&(n.innerHTML=r),l=ae(Ae),c=T(Ae,"TBODY",{});var O=H(c);for(let w=0;w<u.length;w+=1)u[w].l(O);O.forEach(b),_=ae(Ae),m=T(Ae,"TFOOT",{class:!0});var N=H(m);v=T(N,"TR",{});var Y=H(v);k=T(Y,"TD",{}),H(k).forEach(b),R=ae(Y),U=T(Y,"TD",{}),H(U).forEach(b),le=ae(Y),x=T(Y,"TD",{class:!0,"data-svelte-h":!0}),Ge(x)!=="svelte-14afisz"&&(x.innerHTML=q),B=ae(Y),I=T(Y,"TD",{});var _e=H(I);for(let w=0;w<ue.length;w+=1)ue[w].l(_e);_e.forEach(b),X=ae(Y),E=T(Y,"TD",{}),H(E).forEach(b),Y.forEach(b),N.forEach(b),Ae.forEach(b),Z=ae(oe);for(let w=0;w<te.length;w+=1)te[w].l(oe);se=ae(oe),me=T(oe,"SCRIPT",{"data-svelte-h":!0}),Ge(me)!=="svelte-wsa5ae"&&(me.textContent=we),this.h()},h(){h(x,"class","text-end"),h(m,"class","table-group-divider"),h(e,"class","table table-striped table-hover")},m(oe,Ae){fe(oe,e,Ae),p(e,n),p(e,l),p(e,c);for(let O=0;O<u.length;O+=1)u[O]&&u[O].m(c,null);p(e,_),p(e,m),p(m,v),p(v,k),p(v,R),p(v,U),p(v,le),p(v,x),p(v,B),p(v,I);for(let O=0;O<ue.length;O+=1)ue[O]&&ue[O].m(I,null);p(v,X),p(v,E),fe(oe,Z,Ae);for(let O=0;O<te.length;O+=1)te[O]&&te[O].m(oe,Ae);fe(oe,se,Ae),fe(oe,me,Ae)},p(oe,Ae){if(Ae&4&&(Ne=Ze(oe[2]),u=jr(u,Ae,ge,1,oe,Ne,g,c,Fr,Lo,null,Io)),Ae&4){be=Ze(oe[5]);let O;for(O=0;O<be.length;O+=1){const N=Oo(oe,be,O);ue[O]?ue[O].p(N,Ae):(ue[O]=Ro(N),ue[O].c(),ue[O].m(I,null))}for(;O<ue.length;O+=1)ue[O].d(1);ue.length=be.length}Ae&4&&(Oe=Ze(oe[2]),te=jr(te,Ae,Ee,1,oe,Oe,J,se.parentNode,Fr,No,se,Ao))},d(oe){oe&&(b(e),b(Z),b(se),b(me));for(let Ae=0;Ae<u.length;Ae+=1)u[Ae].d();Lt(ue,oe);for(let Ae=0;Ae<te.length;Ae+=1)te[Ae].d(oe)}}}function Lo(i,e){let n,r,l=e[6].description+"",c,u,g,_=e[6].receiptDateString+"",m,v,k,R=e[6].receiptType+"",U,le,x,q=Dt[e[6].currency].symbol+"",B,I,X=e[6].total.toFixed(2)+"",E,Z;return{key:i,first:null,c(){n=S("tr"),r=S("td"),c=Le(l),u=ie(),g=S("td"),m=Le(_),v=ie(),k=S("td"),U=Le(R),le=ie(),x=S("td"),B=Le(q),I=ie(),E=Le(X),Z=ie(),this.h()},l(te){n=T(te,"TR",{});var J=H(n);r=T(J,"TD",{});var se=H(r);c=Re(se,l),se.forEach(b),u=ae(J),g=T(J,"TD",{});var me=H(g);m=Re(me,_),me.forEach(b),v=ae(J),k=T(J,"TD",{});var we=H(k);U=Re(we,R),we.forEach(b),le=ae(J),x=T(J,"TD",{});var Ne=H(x);B=Re(Ne,q),I=ae(Ne),E=Re(Ne,X),Ne.forEach(b),Z=ae(J),J.forEach(b),this.h()},h(){this.first=n},m(te,J){fe(te,n,J),p(n,r),p(r,c),p(n,u),p(n,g),p(g,m),p(n,v),p(n,k),p(k,U),p(n,le),p(n,x),p(x,B),p(x,I),p(x,E),p(n,Z)},p(te,J){e=te,J&4&&l!==(l=e[6].description+"")&&Xe(c,l),J&4&&_!==(_=e[6].receiptDateString+"")&&Xe(m,_),J&4&&R!==(R=e[6].receiptType+"")&&Xe(U,R),J&4&&q!==(q=Dt[e[6].currency].symbol+"")&&Xe(B,q),J&4&&X!==(X=e[6].total.toFixed(2)+"")&&Xe(E,X)},d(te){te&&b(n)}}}function Ro(i){let e=Dt[i[9]].symbol+"",n,r,l=i[2].filter(_).reduce(Bo,0).toFixed(2)+"",c,u,g;function _(...m){return i[4](i[9],...m)}return{c(){n=Le(e),r=ie(),c=Le(l),u=ie(),g=S("br")},l(m){n=Re(m,e),r=ae(m),c=Re(m,l),u=ae(m),g=T(m,"BR",{})},m(m,v){fe(m,n,v),fe(m,r,v),fe(m,c,v),fe(m,u,v),fe(m,g,v)},p(m,v){i=m,v&4&&e!==(e=Dt[i[9]].symbol+"")&&Xe(n,e),v&4&&l!==(l=i[2].filter(_).reduce(Bo,0).toFixed(2)+"")&&Xe(c,l)},d(m){m&&(b(n),b(r),b(c),b(u),b(g))}}}function No(i,e){let n,r=e[6].description+"",l,c,u,g=Dt[e[6].currency].symbol+"",_,m,v=e[6].total.toFixed(2)+"",k,R,U,le,x;return{key:i,first:null,c(){n=S("div"),l=Le(r),c=ie(),u=S("strong"),_=Le(g),m=ie(),k=Le(v),R=ie(),U=S("img"),this.h()},l(q){n=T(q,"DIV",{class:!0});var B=H(n);l=Re(B,r),c=ae(B),u=T(B,"STRONG",{});var I=H(u);_=Re(I,g),m=ae(I),k=Re(I,v),I.forEach(b),B.forEach(b),R=ae(q),U=T(q,"IMG",{class:!0,alt:!0,src:!0}),this.h()},h(){h(n,"class","page-print mb-2"),h(U,"class","img-print"),h(U,"alt",le="receipt with description '"+e[6].description+"'"),Kr(U.src,x=URL.createObjectURL(e[6].imageData))||h(U,"src",x),this.first=n},m(q,B){fe(q,n,B),p(n,l),p(n,c),p(n,u),p(u,_),p(u,m),p(u,k),fe(q,R,B),fe(q,U,B)},p(q,B){e=q,B&4&&r!==(r=e[6].description+"")&&Xe(l,r),B&4&&g!==(g=Dt[e[6].currency].symbol+"")&&Xe(_,g),B&4&&v!==(v=e[6].total.toFixed(2)+"")&&Xe(k,v),B&4&&le!==(le="receipt with description '"+e[6].description+"'")&&h(U,"alt",le),B&4&&!Kr(U.src,x=URL.createObjectURL(e[6].imageData))&&h(U,"src",x)},d(q){q&&(b(n),b(R),b(U))}}}function tc(i){let e,n=i[0]&&Po(i);return{c(){e=S("div"),n&&n.c()},l(r){e=T(r,"DIV",{});var l=H(e);n&&n.l(l),l.forEach(b)},m(r,l){fe(r,e,l),n&&n.m(e,null)},p(r,[l]){r[0]?n?n.p(r,l):(n=Po(r),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},i:kt,o:kt,d(r){r&&b(e),n&&n.d()}}}const Bo=(i,e)=>i+e.total;function nc(i,e,n){let r,l=kt,c=()=>(l(),l=ur(_,v=>n(2,r=v)),_);i.$$.on_destroy.push(()=>l());let{tripId:u=-1}=e,g,_;u>-1&&Bt.trips.get(u).then(v=>{n(0,g=v),c(n(1,_=Hr(()=>Bt.receipts.where({tripId:u}).reverse().sortBy("receiptDate"))))});const m=(v,k)=>k.currency==v;return i.$$set=v=>{"tripId"in v&&n(3,u=v.tripId)},[g,_,r,u,m]}class rc extends ln{constructor(e){super(),sn(this,e,nc,tc,rn,{tripId:3})}}function ic(i){let e,n,r,l=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="38" viewBox="0 0 375.91 152.28" style="enable-background:new 0 0 375.91 152.28;" xml:space="preserve"><style type="text/css">.st0{fill:currentColor;}
		   </style><g id="Layer_1"><g><path class="st0" d="M0,19.62h59.19V36.2H0V19.62z M20.94,27.62h17.24v88.06H20.94V27.62z" fill="currentColor"></path><path class="st0" d="M60.18,47.1h17.84v68.58H60.18V47.1z M93.28,63.69c-1.01-0.22-2.14-0.33-3.37-0.33
					   c-3.74,0-6.66,1.17-8.75,3.5c-2.09,2.33-3.14,5.57-3.14,9.71l-1.39-17.51c1.94-4.1,4.44-7.3,7.5-9.61
					   c3.06-2.31,6.42-3.47,10.08-3.47c1.41,0,2.7,0.23,3.87,0.69c1.17,0.46,2.17,1.13,3.01,2.01l-5.22,16.05
					   C95.15,64.26,94.29,63.91,93.28,63.69z"></path><path class="st0" d="M109,19.62h17.24v17.11H109V19.62z M109,47.1h17.24v68.58H109V47.1z"></path><path class="st0" d="M140.58,47.1h17.18v96.46h-17.18V47.1z M162.68,113.6c-2.62-2.05-4.57-4.94-5.85-8.69l0.92-12.62
					   c0,1.85,0.3,3.41,0.89,4.69c0.59,1.28,1.47,2.25,2.64,2.91c1.17,0.66,2.59,0.99,4.26,0.99c2.51,0,4.45-0.86,5.81-2.58
					   s2.05-4.14,2.05-7.27V71.61c0-3.08-0.68-5.49-2.05-7.23c-1.37-1.74-3.3-2.61-5.81-2.61c-1.67,0-3.09,0.33-4.26,0.99
					   c-1.17,0.66-2.05,1.64-2.64,2.94c-0.59,1.3-0.89,2.85-0.89,4.66l-1.39-11.83c1.72-3.96,3.94-7.05,6.67-9.25
					   c2.73-2.2,5.75-3.3,9.05-3.3c3.88,0,7.19,0.95,9.94,2.84c2.75,1.89,4.84,4.67,6.28,8.32c1.43,3.66,2.15,8.08,2.15,13.28v21.8
					   c0,5.2-0.73,9.61-2.18,13.25c-1.45,3.63-3.57,6.41-6.34,8.32c-2.77,1.92-6.1,2.87-9.98,2.87
					   C168.4,116.67,165.3,115.65,162.68,113.6z"></path><path class="st0" d="M204.6,47.1h17.18v96.46H204.6V47.1z M226.7,113.6c-2.62-2.05-4.57-4.94-5.85-8.69l0.92-12.62
					   c0,1.85,0.3,3.41,0.89,4.69c0.59,1.28,1.47,2.25,2.64,2.91c1.17,0.66,2.59,0.99,4.26,0.99c2.51,0,4.45-0.86,5.81-2.58
					   s2.05-4.14,2.05-7.27V71.61c0-3.08-0.68-5.49-2.05-7.23c-1.37-1.74-3.3-2.61-5.81-2.61c-1.67,0-3.09,0.33-4.26,0.99
					   c-1.17,0.66-2.05,1.64-2.64,2.94c-0.59,1.3-0.89,2.85-0.89,4.66l-1.39-11.83c1.72-3.96,3.94-7.05,6.67-9.25
					   c2.73-2.2,5.75-3.3,9.05-3.3c3.88,0,7.19,0.95,9.94,2.84c2.75,1.89,4.84,4.67,6.28,8.32c1.43,3.66,2.15,8.08,2.15,13.28v21.8
					   c0,5.2-0.73,9.61-2.18,13.25c-1.45,3.63-3.57,6.41-6.34,8.32c-2.77,1.92-6.1,2.87-9.98,2.87
					   C232.42,116.67,229.32,115.65,226.7,113.6z"></path><path class="st0" d="M267.43,19.62h17.24v17.11h-17.24V19.62z M267.43,47.1h17.24v68.58h-17.24V47.1z"></path><path class="st0" d="M299.01,47.1h17.24v68.58h-17.24V47.1z M332.31,70.62c0-2.73-0.72-4.83-2.15-6.31
					   c-1.43-1.48-3.45-2.21-6.04-2.21c-2.51,0-4.45,0.74-5.81,2.21c-1.37,1.48-2.05,3.6-2.05,6.38l-1.39-11.63
					   c1.72-4.27,3.96-7.52,6.74-9.74c2.77-2.22,6.05-3.34,9.84-3.34c5.72,0,10.16,1.98,13.31,5.95c3.15,3.96,4.72,9.54,4.72,16.71
					   v47.04h-17.18V70.62z"></path><path class="st0" d="M356.55,19.62h17.24v23.65l-17.24,16.91V19.62z"></path></g></g></svg>`,c,u,g,_='<li class="nav-item"><a class="btn btn-outline-light" href="#/add">+ Add Trip</a></li>',m,v,k=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-list-ul" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m-3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2m0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2m0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2"></path></svg>
				My Trips`,R,U,le="Settings",x,q,B,I,X,E,Z,te,J,se,me,we;X=new vs({props:{tripId:i[3]}});const Ne=[fc,cc,uc,sc,lc,oc],ge=[];function be(ue,Oe){return ue[4]==="add"?0:ue[4]==="trip"&&ue[3]>-1?1:ue[4]==="update"&&ue[3]>-1?2:ue[4]==="addreceipt"&&ue[3]>-1?3:ue[4]==="editreceipt"&&ue[3]>-1?4:5}return te=be(i),J=ge[te]=Ne[te](i),{c(){e=S("nav"),n=S("div"),r=S("a"),r.innerHTML=l,c=ie(),u=S("div"),g=S("ul"),g.innerHTML=_,m=ie(),v=S("button"),v.innerHTML=k,R=ie(),U=S("a"),U.textContent=le,x=ie(),q=S("main"),B=S("div"),I=S("div"),Vt(X.$$.fragment),E=ie(),Z=S("div"),J.c(),this.h()},l(ue){e=T(ue,"NAV",{class:!0,"aria-label":!0});var Oe=H(e);n=T(Oe,"DIV",{class:!0});var Ee=H(n);r=T(Ee,"A",{"aria-current":!0,class:!0,href:!0,"data-svelte-h":!0}),Ge(r)!=="svelte-184qgqe"&&(r.innerHTML=l),c=ae(Ee),u=T(Ee,"DIV",{class:!0});var oe=H(u);g=T(oe,"UL",{class:!0,"data-svelte-h":!0}),Ge(g)!=="svelte-d6xdjk"&&(g.innerHTML=_),m=ae(oe),v=T(oe,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),Ge(v)!=="svelte-1yyazi7"&&(v.innerHTML=k),R=ae(oe),U=T(oe,"A",{class:!0,href:!0,"data-svelte-h":!0}),Ge(U)!=="svelte-9s3op1"&&(U.textContent=le),oe.forEach(b),Ee.forEach(b),Oe.forEach(b),x=ae(ue),q=T(ue,"MAIN",{class:!0});var Ae=H(q);B=T(Ae,"DIV",{class:!0});var O=H(B);I=T(O,"DIV",{class:!0,id:!0});var N=H(I);zt(X.$$.fragment,N),N.forEach(b),O.forEach(b),E=ae(Ae),Z=T(Ae,"DIV",{class:!0,id:!0});var Y=H(Z);J.l(Y),Y.forEach(b),Ae.forEach(b),this.h()},h(){h(r,"aria-current","page"),h(r,"class","navbar-brand text-light"),h(r,"href","#"),h(g,"class","navbar-nav me-auto"),h(v,"class","listTitleSmall btn btn-outline-light me-2"),h(v,"type","button"),h(U,"class","btn btn-outline-light"),h(U,"href","#/settings"),h(u,"class","collapse navbar-collapse"),h(n,"class","container-fluid"),h(e,"class","navbar navbar-expand navbar-dark bg-dark"),h(e,"aria-label","Second navbar example"),h(I,"class","list-group scrollarea d-none"),h(I,"id","tripToggle"),h(B,"class","tripList d-flex flex-column align-items-stretch flex-shrink-0 bg-body-tertiary"),h(Z,"class","d-flex p-3 w-100"),h(Z,"id","mainPane"),h(q,"class","d-flex flex-nowrap")},m(ue,Oe){fe(ue,e,Oe),p(e,n),p(n,r),p(n,c),p(n,u),p(u,g),p(u,m),p(u,v),p(u,R),p(u,U),fe(ue,x,Oe),fe(ue,q,Oe),p(q,B),p(B,I),Ut(X,I,null),p(q,E),p(q,Z),ge[te].m(Z,null),se=!0,me||(we=Ye(v,"click",Yo),me=!0)},p(ue,Oe){const Ee={};Oe&8&&(Ee.tripId=ue[3]),X.$set(Ee);let oe=te;te=be(ue),te===oe?ge[te].p(ue,Oe):(zn(),st(ge[oe],1,1,()=>{ge[oe]=null}),Un(),J=ge[te],J?J.p(ue,Oe):(J=ge[te]=Ne[te](ue),J.c()),rt(J,1),J.m(Z,null))},i(ue){se||(rt(X.$$.fragment,ue),rt(J),se=!0)},o(ue){st(X.$$.fragment,ue),st(J),se=!1},d(ue){ue&&(b(e),b(x),b(q)),Ht(X),ge[te].d(),me=!1,we()}}}function ac(i){let e,n;return e=new rc({props:{tripId:i[3]}}),{c(){Vt(e.$$.fragment)},l(r){zt(e.$$.fragment,r)},m(r,l){Ut(e,r,l),n=!0},p(r,l){const c={};l&8&&(c.tripId=r[3]),e.$set(c)},i(r){n||(rt(e.$$.fragment,r),n=!0)},o(r){st(e.$$.fragment,r),n=!1},d(r){Ht(e,r)}}}function oc(i){let e,n;return e=new ec({}),{c(){Vt(e.$$.fragment)},l(r){zt(e.$$.fragment,r)},m(r,l){Ut(e,r,l),n=!0},p:kt,i(r){n||(rt(e.$$.fragment,r),n=!0)},o(r){st(e.$$.fragment,r),n=!1},d(r){Ht(e,r)}}}function lc(i){let e,n;return e=new $u({props:{receiptId:i[5]}}),{c(){Vt(e.$$.fragment)},l(r){zt(e.$$.fragment,r)},m(r,l){Ut(e,r,l),n=!0},p(r,l){const c={};l&32&&(c.receiptId=r[5]),e.$set(c)},i(r){n||(rt(e.$$.fragment,r),n=!0)},o(r){st(e.$$.fragment,r),n=!1},d(r){Ht(e,r)}}}function sc(i){let e,n;return e=new Gu({props:{tripId:i[3]}}),{c(){Vt(e.$$.fragment)},l(r){zt(e.$$.fragment,r)},m(r,l){Ut(e,r,l),n=!0},p(r,l){const c={};l&8&&(c.tripId=r[3]),e.$set(c)},i(r){n||(rt(e.$$.fragment,r),n=!0)},o(r){st(e.$$.fragment,r),n=!1},d(r){Ht(e,r)}}}function uc(i){let e,n;return e=new bs({props:{tripId:i[3]}}),{c(){Vt(e.$$.fragment)},l(r){zt(e.$$.fragment,r)},m(r,l){Ut(e,r,l),n=!0},p(r,l){const c={};l&8&&(c.tripId=r[3]),e.$set(c)},i(r){n||(rt(e.$$.fragment,r),n=!0)},o(r){st(e.$$.fragment,r),n=!1},d(r){Ht(e,r)}}}function cc(i){let e=i[3],n,r,l=Ko(i);return{c(){l.c(),n=Ft()},l(c){l.l(c),n=Ft()},m(c,u){l.m(c,u),fe(c,n,u),r=!0},p(c,u){u&8&&rn(e,e=c[3])?(zn(),st(l,1,1,kt),Un(),l=Ko(c),l.c(),rt(l,1),l.m(n.parentNode,n)):l.p(c,u)},i(c){r||(rt(l),r=!0)},o(c){st(l),r=!1},d(c){c&&b(n),l.d(c)}}}function fc(i){let e,n;return e=new $l({}),{c(){Vt(e.$$.fragment)},l(r){zt(e.$$.fragment,r)},m(r,l){Ut(e,r,l),n=!0},p:kt,i(r){n||(rt(e.$$.fragment,r),n=!0)},o(r){st(e.$$.fragment,r),n=!1},d(r){Ht(e,r)}}}function Ko(i){let e,n;return e=new ps({props:{tripId:i[3]}}),{c(){Vt(e.$$.fragment)},l(r){zt(e.$$.fragment,r)},m(r,l){Ut(e,r,l),n=!0},p(r,l){const c={};l&8&&(c.tripId=r[3]),e.$set(c)},i(r){n||(rt(e.$$.fragment,r),n=!0)},o(r){st(e.$$.fragment,r),n=!1},d(r){Ht(e,r)}}}function dc(i){let e,n,r,l;const c=[ac,ic],u=[];function g(_,m){return _[4]==="print"&&_[3]>-1?0:1}return e=g(i),n=u[e]=c[e](i),{c(){n.c(),r=Ft()},l(_){n.l(_),r=Ft()},m(_,m){u[e].m(_,m),fe(_,r,m),l=!0},p(_,[m]){let v=e;e=g(_),e===v?u[e].p(_,m):(zn(),st(u[v],1,1,()=>{u[v]=null}),Un(),n=u[e],n?n.p(_,m):(n=u[e]=c[e](_),n.c()),rt(n,1),n.m(r.parentNode,r))},i(_){l||(rt(n),l=!0)},o(_){st(n),l=!1},d(_){_&&b(r),u[e].d(_)}}}function hc(i,e,n){let r,l,c,u,g,_=kt,m=()=>(_(),_=ur(r,X=>n(3,g=X)),r),v,k=kt,R=()=>(k(),k=ur(c,X=>n(4,v=X)),c),U,le=kt,x=()=>(le(),le=ur(l,X=>n(5,U=X)),l),q;cr(i,Ol,X=>n(6,q=X)),i.$$.on_destroy.push(()=>_()),i.$$.on_destroy.push(()=>k()),i.$$.on_destroy.push(()=>le());const B=new RegExp("#/(?<route>[a-z]+)(?<tripId>/[0-9]+|$)");function I(){u?(ar(c,v=u.groups.route||"",v),v=="editreceipt"?ar(l,U=parseInt(u.groups.tripId.replace("/","")||"-1"),U):ar(r,g=parseInt(u.groups.tripId.replace("/","")||"-1"),g)):(ar(c,v="",v),ar(r,g=-1,g))}return Tl(()=>{I()}),i.$$.update=()=>{i.$$.dirty&64&&(u=B.exec(q.url.hash))},m(n(2,r=Lr(-1))),x(n(1,l=Lr(-1))),R(n(0,c=Lr(""))),[c,l,r,g,v,U,q]}class pc extends ln{constructor(e){super(),sn(this,e,hc,dc,rn,{})}}function mc(i){let e,n,r;return n=new pc({}),{c(){e=ie(),Vt(n.$$.fragment),this.h()},l(l){Cl("svelte-1mxz4jk",document.head).forEach(b),e=ae(l),zt(n.$$.fragment,l),this.h()},h(){document.title="Trippin'"},m(l,c){fe(l,e,c),Ut(n,l,c),r=!0},p:kt,i(l){r||(rt(n.$$.fragment,l),r=!0)},o(l){st(n.$$.fragment,l),r=!1},d(l){l&&b(e),Ht(n,l)}}}class Pc extends ln{constructor(e){super(),sn(this,e,null,mc,rn,{})}}export{Pc as component};
