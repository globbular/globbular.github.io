import{C as hn,s as Zt,p as It,k as fe,n as vt,i as b,e as L,t as Ie,b as le,d as M,f as te,h as Re,j as ue,v as y,l as m,S as xe,T as Lr,x as Yt,c as Bo,U as Tr,V as Ve,W as Cr,X as Vt,Y as Dn,u as Ko,g as Fo,a as jo,Z as Ct,_ as Uo,$ as rt,m as et,a0 as bs,a1 as bt,a2 as la,o as tr,w as ua,E as Rn,a3 as Un,D as qo,a4 as ws,a5 as Mr,a6 as Vr,a7 as Nr,a8 as ks,a9 as Or,aa as Ds}from"../chunks/scheduler.B6UoHciB.js";import{t as tt,S as $t,i as Xt,f as En,b as Lt,d as Mt,m as Nt,a as at,e as Bt,g as Ln,c as Mn,h as ca}from"../chunks/index.CC47NhgM.js";import{w as Ti}from"../chunks/entry.Bcx0gHF-.js";import{_ as Es}from"../chunks/preload-helper.D6kgxu3v.js";import{p as Ss}from"../chunks/stores.BDn5OFHf.js";function ze(a){return(a==null?void 0:a.length)!==void 0?a:Array.from(a)}function Br(a,e){a.d(1),e.delete(a.key)}function Kr(a,e,n,r,s,u,c,v,_,h,p,E){let K=a.length,G=u.length,ie=K;const W={};for(;ie--;)W[a[ie].key]=ie;const Z=[],A=new Map,T=new Map,J=[];for(ie=G;ie--;){const X=E(s,u,ie),he=n(X);let pe=c.get(he);pe?J.push(()=>pe.p(X,e)):(pe=h(he,X),pe.c()),A.set(he,Z[ie]=pe),he in W&&T.set(he,Math.abs(ie-W[he]))}const O=new Set,ce=new Set;function ge(X){tt(X,1),X.m(v,p),c.set(X.key,X),p=X.first,G--}for(;K&&G;){const X=Z[G-1],he=a[K-1],pe=X.key,be=he.key;X===he?(p=X.first,K--,G--):A.has(be)?!c.has(pe)||O.has(pe)?ge(X):ce.has(be)?K--:T.get(pe)>T.get(be)?(ce.add(pe),ge(X)):(O.add(be),K--):(_(he,c),K--)}for(;K--;){const X=a[K];A.has(X.key)||_(X,c)}for(;G;)ge(Z[G-1]);return hn(J),Z}function fa(a){let e,n,r=("00"+a[0].getHours()).slice(-2)+"",s,u,c,v=("00"+a[0].getMinutes()).slice(-2)+"",_,h,p,E,K=a[1]!=="minute"&&da(a);return{c(){e=L("div"),n=L("span"),s=Ie(r),u=Ie(`:
		`),c=L("span"),_=Ie(v),h=le(),K&&K.c(),this.h()},l(G){e=M(G,"DIV",{class:!0,role:!0});var ie=te(e);n=M(ie,"SPAN",{role:!0,"aria-label":!0,tabindex:!0,contenteditable:!0,inputmode:!0,class:!0});var W=te(n);s=Re(W,r),W.forEach(b),u=Re(ie,`:
		`),c=M(ie,"SPAN",{role:!0,"aria-label":!0,tabindex:!0,contenteditable:!0,inputmode:!0,class:!0});var Z=te(c);_=Re(Z,v),Z.forEach(b),h=ue(ie),K&&K.l(ie),ie.forEach(b),this.h()},h(){y(n,"role","spinbutton"),y(n,"aria-label","Hours"),y(n,"tabindex","0"),y(n,"contenteditable",""),y(n,"inputmode","numeric"),y(n,"class","svelte-mzlxg7"),y(c,"role","spinbutton"),y(c,"aria-label","Minutes"),y(c,"tabindex","0"),y(c,"contenteditable",""),y(c,"inputmode","numeric"),y(c,"class","svelte-mzlxg7"),y(e,"class","time-picker svelte-mzlxg7"),y(e,"role","none")},m(G,ie){fe(G,e,ie),m(e,n),m(n,s),a[6](n),m(e,u),m(e,c),m(c,_),a[7](c),m(e,h),K&&K.m(e,null),p||(E=[xe(n,"keydown",a[3]),xe(n,"input",a[4]),xe(n,"focus",Fr),xe(c,"keydown",a[3]),xe(c,"input",a[4]),xe(c,"focus",Fr),xe(e,"mousedown",a[10])],p=!0)},p(G,ie){ie&1&&r!==(r=("00"+G[0].getHours()).slice(-2)+"")&&Lr(s,r),ie&1&&v!==(v=("00"+G[0].getMinutes()).slice(-2)+"")&&Lr(_,v),G[1]!=="minute"?K?K.p(G,ie):(K=da(G),K.c(),K.m(e,null)):K&&(K.d(1),K=null)},d(G){G&&b(e),a[6](null),a[7](null),K&&K.d(),p=!1,hn(E)}}}function da(a){let e,n,r=("00"+a[0].getSeconds()).slice(-2)+"",s,u,c,v,_,h=a[1]!=="second"&&ha(a);return{c(){e=Ie(":"),n=L("span"),s=Ie(r),u=le(),h&&h.c(),c=It(),this.h()},l(p){e=Re(p,":"),n=M(p,"SPAN",{role:!0,"aria-label":!0,tabindex:!0,contenteditable:!0,inputmode:!0,class:!0});var E=te(n);s=Re(E,r),E.forEach(b),u=ue(p),h&&h.l(p),c=It(),this.h()},h(){y(n,"role","spinbutton"),y(n,"aria-label","Seconds"),y(n,"tabindex","0"),y(n,"contenteditable",""),y(n,"inputmode","numeric"),y(n,"class","svelte-mzlxg7")},m(p,E){fe(p,e,E),fe(p,n,E),m(n,s),a[8](n),fe(p,u,E),h&&h.m(p,E),fe(p,c,E),v||(_=[xe(n,"keydown",a[3]),xe(n,"input",a[4]),xe(n,"focus",Fr)],v=!0)},p(p,E){E&1&&r!==(r=("00"+p[0].getSeconds()).slice(-2)+"")&&Lr(s,r),p[1]!=="second"?h?h.p(p,E):(h=ha(p),h.c(),h.m(c.parentNode,c)):h&&(h.d(1),h=null)},d(p){p&&(b(e),b(n),b(u),b(c)),a[8](null),h&&h.d(p),v=!1,hn(_)}}}function ha(a){let e,n,r=("000"+a[0].getMilliseconds()).slice(-3)+"",s,u,c;return{c(){e=Ie("."),n=L("span"),s=Ie(r),this.h()},l(v){e=Re(v,"."),n=M(v,"SPAN",{role:!0,"aria-label":!0,tabindex:!0,contenteditable:!0,inputmode:!0,class:!0});var _=te(n);s=Re(_,r),_.forEach(b),this.h()},h(){y(n,"role","spinbutton"),y(n,"aria-label","Milliseconds"),y(n,"tabindex","0"),y(n,"contenteditable",""),y(n,"inputmode","numeric"),y(n,"class","svelte-mzlxg7")},m(v,_){fe(v,e,_),fe(v,n,_),m(n,s),a[9](n),u||(c=[xe(n,"keydown",a[3]),xe(n,"input",a[4]),xe(n,"focus",Fr)],u=!0)},p(v,_){_&1&&r!==(r=("000"+v[0].getMilliseconds()).slice(-3)+"")&&Lr(s,r)},d(v){v&&(b(e),b(n)),a[9](null),u=!1,hn(c)}}}function Ts(a){let e,n=a[1]&&fa(a);return{c(){n&&n.c(),e=It()},l(r){n&&n.l(r),e=It()},m(r,s){n&&n.m(r,s),fe(r,e,s)},p(r,[s]){r[1]?n?n.p(r,s):(n=fa(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:vt,o:vt,d(r){r&&b(e),n&&n.d(r)}}}function Ir(a){const e=window.getSelection(),n=document.createRange();n.selectNodeContents(a),e==null||e.removeAllRanges(),e==null||e.addRange(n)}function Cs(a,e,n){return n&&a<0?e:n&&a>e?0:Math.max(0,Math.min(e,a))}function _i(a){const e=a.getAttribute("aria-label");if(e==="Hours")return{label:e,len:2,max:23};if(e==="Minutes")return{label:e,len:2,max:59};if(e==="Seconds")return{label:e,len:2,max:59};if(e==="Milliseconds")return{label:e,len:3,max:999};throw new Error("Invalid label "+e)}function yi(a,e){return parseInt(a.replace(/[^\d]/g,"").slice(-e))}function Fr(a){Ir(a.currentTarget)}function Os(a,e,n){let{browseDate:r}=e,{timePrecision:s}=e,{setTime:u}=e,c=[];function v(A){if(A.key==="ArrowUp"||A.key==="ArrowDown"){const T=_(A.currentTarget),J=A.key==="ArrowUp"?1:-1;p(A.currentTarget,T+J,!0),A.preventDefault(),Ir(A.currentTarget)}else if(A.key==="ArrowLeft"||A.key==="ArrowRight"||":;-,.".includes(A.key)){const T=c.indexOf(A.currentTarget),J=A.key==="ArrowLeft"?-1:1,O=c[T+J];A.preventDefault(),O&&(O.focus(),Ir(O))}}function _(A){const T=_i(A).label;return T==="Hours"?r.getHours():T==="Minutes"?r.getMinutes():T==="Seconds"?r.getSeconds():r.getMilliseconds()}function h(A){const T=("00"+A.getHours()).slice(-2),J=("00"+A.getMinutes()).slice(-2),O=("00"+A.getSeconds()).slice(-2),ce=("000"+A.getMilliseconds()).slice(-3);c[0]&&c[0].innerText!==T&&n(2,c[0].innerText=T,c),c[1]&&c[1].innerText!==J&&n(2,c[1].innerText=J,c),c[2]&&c[2].innerText!==O&&n(2,c[2].innerText=O,c),c[3]&&c[3].innerText!==ce&&n(2,c[3].innerText=ce,c)}function p(A,T,J=!1){const O=_i(A);T=Cs(T,O.max,J),O.label==="Hours"?r.setHours(T):O.label==="Minutes"?r.setMinutes(T):O.label==="Seconds"?r.setSeconds(T):O.label==="Milliseconds"&&r.setMilliseconds(T),n(0,r=u(r)),h(r)}function E(A){const T=A,J=_i(T.currentTarget);let O;if(T.inputType==="insertText"){const ce="000"+_(T.currentTarget);O=yi(ce+T.currentTarget.innerText,J.len),O>J.max&&T.data&&(O=yi(T.data,J.len))}else O=yi("000"+T.currentTarget.innerText,J.len);p(T.currentTarget,O),Ir(T.currentTarget)}function K(A){Yt[A?"unshift":"push"](()=>{c[0]=A,n(2,c)})}function G(A){Yt[A?"unshift":"push"](()=>{c[1]=A,n(2,c)})}function ie(A){Yt[A?"unshift":"push"](()=>{c[2]=A,n(2,c)})}function W(A){Yt[A?"unshift":"push"](()=>{c[3]=A,n(2,c)})}const Z=A=>{A.target instanceof HTMLElement&&A.target.tagName==="SPAN"&&(A.target.focus(),A.preventDefault())};return a.$$set=A=>{"browseDate"in A&&n(0,r=A.browseDate),"timePrecision"in A&&n(1,s=A.timePrecision),"setTime"in A&&n(5,u=A.setTime)},a.$$.update=()=>{a.$$.dirty&1&&h(r)},[r,s,c,v,E,u,K,G,ie,W,Z]}class Ps extends $t{constructor(e){super(),Xt(this,e,Os,Ts,Zt,{browseDate:0,timePrecision:1,setTime:5})}}function As(a){return a%4===0&&a%100!==0||a%400===0}function nr(a,e){return[31,As(a)?29:28,31,30,31,30,31,31,30,31,30,31][e]}function pa(a,e){let n="";if(a)for(const r of e)typeof r=="string"?n+=r:n+=r.toString(a);return n}function bi(a,e){const n=nr(a,e),r=[];for(let s=0;s<n;s++)r.push({year:a,month:e,number:s+1});return r}function Is(a,e){const n=a.getFullYear(),r=a.getMonth(),s=new Date(n,r,1).getDay();let u=[];const c=(s-e+7)%7;if(c>0){let p=r-1,E=n;p===-1&&(p=11,E=n-1),u=bi(E,p).slice(-c)}u=u.concat(bi(n,r));let v=r+1,_=n;v===12&&(v=0,_=n+1);const h=42-u.length;return u=u.concat(bi(_,v).slice(0,h)),u}function Rs(){return{weekdays:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekStartsOn:1}}function Vo(a){const e=Rs();return typeof a.weekStartsOn=="number"&&(e.weekStartsOn=a.weekStartsOn),a.months&&(e.months=a.months),a.shortMonths&&(e.shortMonths=a.shortMonths),a.weekdays&&(e.weekdays=a.weekdays),e}function ma(a,e,n){const r=a.slice();return r[36]=e[n],r[38]=n,r}function ga(a,e,n){const r=a.slice();return r[39]=e[n],r}function va(a,e,n){const r=a.slice();return r[36]=e[n],r[43]=n,r}function _a(a,e,n){const r=a.slice();return r[44]=e[n],r}function ya(a,e,n){const r=a.slice();return r[44]=e[n],r}function ba(a,e,n){const r=a.slice();return r[49]=e[n],r[43]=n,r}function wa(a,e,n){const r=a.slice();return r[49]=e[n],r[43]=n,r}function ka(a){let e,n=a[49]+"",r,s;return{c(){e=L("option"),r=Ie(n),this.h()},l(u){e=M(u,"OPTION",{});var c=te(e);r=Re(c,n),c.forEach(b),this.h()},h(){e.disabled=s=new Date(a[9],a[43],nr(a[9],a[43]),23,59,59,999)<a[2]||new Date(a[9],a[43])>a[3],e.__value=a[43],rt(e,e.__value)},m(u,c){fe(u,e,c),m(e,r)},p(u,c){c[0]&32&&n!==(n=u[49]+"")&&et(r,n),c[0]&588&&s!==(s=new Date(u[9],u[43],nr(u[9],u[43]),23,59,59,999)<u[2]||new Date(u[9],u[43])>u[3])&&(e.disabled=s)},d(u){u&&b(e)}}}function Da(a){let e,n=a[49]+"",r,s;return{c(){e=L("option"),r=Ie(n),this.h()},l(u){e=M(u,"OPTION",{});var c=te(e);r=Re(c,n),c.forEach(b),this.h()},h(){e.__value=a[43],rt(e,e.__value),e.selected=s=a[43]===a[8]},m(u,c){fe(u,e,c),m(e,r)},p(u,c){c[0]&32&&n!==(n=u[49]+"")&&et(r,n),c[0]&256&&s!==(s=u[43]===u[8])&&(e.selected=s)},d(u){u&&b(e)}}}function Ea(a){let e,n=a[44]+"",r,s;return{c(){e=L("option"),r=Ie(n),this.h()},l(u){e=M(u,"OPTION",{});var c=te(e);r=Re(c,n),c.forEach(b),this.h()},h(){e.__value=s=a[44],rt(e,e.__value)},m(u,c){fe(u,e,c),m(e,r)},p(u,c){c[0]&64&&n!==(n=u[44]+"")&&et(r,n),c[0]&64&&s!==(s=u[44])&&(e.__value=s,rt(e,e.__value))},d(u){u&&b(e)}}}function Sa(a){let e,n=a[44]+"",r,s,u;return{c(){e=L("option"),r=Ie(n),this.h()},l(c){e=M(c,"OPTION",{});var v=te(e);r=Re(v,n),v.forEach(b),this.h()},h(){e.__value=s=a[44],rt(e,e.__value),e.selected=u=a[44]===a[4].getFullYear()},m(c,v){fe(c,e,v),m(e,r)},p(c,v){v[0]&64&&n!==(n=c[44]+"")&&et(r,n),v[0]&64&&s!==(s=c[44])&&(e.__value=s,rt(e,e.__value)),v[0]&80&&u!==(u=c[44]===c[4].getFullYear())&&(e.selected=u)},d(c){c&&b(e)}}}function Ls(a){let e,n=a[5].weekdays[a[5].weekStartsOn+a[43]-7]+"",r;return{c(){e=L("div"),r=Ie(n),this.h()},l(s){e=M(s,"DIV",{class:!0});var u=te(e);r=Re(u,n),u.forEach(b),this.h()},h(){y(e,"class","header-cell svelte-w239uu")},m(s,u){fe(s,e,u),m(e,r)},p(s,u){u[0]&32&&n!==(n=s[5].weekdays[s[5].weekStartsOn+s[43]-7]+"")&&et(r,n)},d(s){s&&b(e)}}}function Ms(a){let e,n=a[5].weekdays[a[5].weekStartsOn+a[43]]+"",r;return{c(){e=L("div"),r=Ie(n),this.h()},l(s){e=M(s,"DIV",{class:!0});var u=te(e);r=Re(u,n),u.forEach(b),this.h()},h(){y(e,"class","header-cell svelte-w239uu")},m(s,u){fe(s,e,u),m(e,r)},p(s,u){u[0]&32&&n!==(n=s[5].weekdays[s[5].weekStartsOn+s[43]]+"")&&et(r,n)},d(s){s&&b(e)}}}function Ta(a){let e;function n(u,c){return u[43]+u[5].weekStartsOn<7?Ms:Ls}let r=n(a),s=r(a);return{c(){s.c(),e=It()},l(u){s.l(u),e=It()},m(u,c){s.m(u,c),fe(u,e,c)},p(u,c){r===(r=n(u))&&s?s.p(u,c):(s.d(1),s=r(u),s&&(s.c(),s.m(e.parentNode,e)))},d(u){u&&b(e),s.d(u)}}}function Ca(a){let e,n,r=a[39].number+"",s,u,c;function v(){return a[27](a[39])}return{c(){e=L("div"),n=L("span"),s=Ie(r),this.h()},l(_){e=M(_,"DIV",{class:!0});var h=te(e);n=M(h,"SPAN",{class:!0});var p=te(n);s=Re(p,r),p.forEach(b),h.forEach(b),this.h()},h(){y(n,"class","svelte-w239uu"),y(e,"class","cell svelte-w239uu"),bt(e,"disabled",!Ci(a[39],a[2],a[3])),bt(e,"selected",a[0]&&a[39].year===a[0].getFullYear()&&a[39].month===a[0].getMonth()&&a[39].number===a[0].getDate()),bt(e,"today",a[39].year===a[11].getFullYear()&&a[39].month===a[11].getMonth()&&a[39].number===a[11].getDate()),bt(e,"other-month",a[39].month!==a[8])},m(_,h){fe(_,e,h),m(e,n),m(n,s),u||(c=xe(e,"click",v),u=!0)},p(_,h){a=_,h[0]&128&&r!==(r=a[39].number+"")&&et(s,r),h[0]&140&&bt(e,"disabled",!Ci(a[39],a[2],a[3])),h[0]&129&&bt(e,"selected",a[0]&&a[39].year===a[0].getFullYear()&&a[39].month===a[0].getMonth()&&a[39].number===a[0].getDate()),h[0]&2176&&bt(e,"today",a[39].year===a[11].getFullYear()&&a[39].month===a[11].getMonth()&&a[39].number===a[11].getDate()),h[0]&384&&bt(e,"other-month",a[39].month!==a[8])},d(_){_&&b(e),u=!1,c()}}}function Oa(a){let e,n=ze(a[7].slice(a[38]*7,a[38]*7+7)),r=[];for(let s=0;s<n.length;s+=1)r[s]=Ca(ga(a,n,s));return{c(){e=L("div");for(let s=0;s<r.length;s+=1)r[s].c();this.h()},l(s){e=M(s,"DIV",{class:!0});var u=te(e);for(let c=0;c<r.length;c+=1)r[c].l(u);u.forEach(b),this.h()},h(){y(e,"class","week svelte-w239uu")},m(s,u){fe(s,e,u);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(e,null)},p(s,u){if(u[0]&18829){n=ze(s[7].slice(s[38]*7,s[38]*7+7));let c;for(c=0;c<n.length;c+=1){const v=ga(s,n,c);r[c]?r[c].p(v,u):(r[c]=Ca(v),r[c].c(),r[c].m(e,null))}for(;c<r.length;c+=1)r[c].d(1);r.length=n.length}},d(s){s&&b(e),Ct(r,s)}}}function Ns(a){let e,n,r,s,u='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="svelte-w239uu"><path d="M5 3l3.057-3 11.943 12-11.943 12-3.057-3 9-9z" transform="rotate(180, 12, 12)"></path></svg>',c,v,_,h,p,E,K,G,ie,W,Z,A,T,J,O,ce,ge,X,he='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="svelte-w239uu"><path d="M5 3l3.057-3 11.943 12-11.943 12-3.057-3 9-9z"></path></svg>',pe,be,Fe,Oe,ye,Ee,Te,ve,Ke,je,x=ze(a[5].months),k=[];for(let ne=0;ne<x.length;ne+=1)k[ne]=ka(wa(a,x,ne));let B=ze(a[5].months),Q=[];for(let ne=0;ne<B.length;ne+=1)Q[ne]=Da(ba(a,B,ne));let w=ze(a[6]),z=[];for(let ne=0;ne<w.length;ne+=1)z[ne]=Ea(ya(a,w,ne));let Ce=ze(a[6]),ae=[];for(let ne=0;ne<Ce.length;ne+=1)ae[ne]=Sa(_a(a,Ce,ne));let oe=ze(Array(7)),se=[];for(let ne=0;ne<oe.length;ne+=1)se[ne]=Ta(va(a,oe,ne));let H=ze(Array(6)),N=[];for(let ne=0;ne<H.length;ne+=1)N[ne]=Oa(ma(a,H,ne));function Le(ne){a[28](ne)}let Be={timePrecision:a[1],setTime:a[10]};a[4]!==void 0&&(Be.browseDate=a[4]),ye=new Ps({props:Be}),Yt.push(()=>En(ye,"browseDate",Le));const $e=a[21].default,lt=Bo($e,a,a[20],null);return{c(){e=L("div"),n=L("div"),r=L("div"),s=L("button"),s.innerHTML=u,c=le(),v=L("div"),_=L("select");for(let ne=0;ne<k.length;ne+=1)k[ne].c();h=le(),p=L("select");for(let ne=0;ne<Q.length;ne+=1)Q[ne].c();E=le(),K=Tr("svg"),G=Tr("path"),ie=le(),W=L("div"),Z=L("select");for(let ne=0;ne<z.length;ne+=1)z[ne].c();A=le(),T=L("select");for(let ne=0;ne<ae.length;ne+=1)ae[ne].c();J=le(),O=Tr("svg"),ce=Tr("path"),ge=le(),X=L("button"),X.innerHTML=he,pe=le(),be=L("div");for(let ne=0;ne<se.length;ne+=1)se[ne].c();Fe=le();for(let ne=0;ne<N.length;ne+=1)N[ne].c();Oe=le(),Lt(ye.$$.fragment),Te=le(),lt&&lt.c(),this.h()},l(ne){e=M(ne,"DIV",{class:!0,tabindex:!0});var We=te(e);n=M(We,"DIV",{class:!0,tabindex:!0});var qe=te(n);r=M(qe,"DIV",{class:!0});var _e=te(r);s=M(_e,"BUTTON",{type:!0,class:!0,tabindex:!0,"data-svelte-h":!0}),Ve(s)!=="svelte-t4cock"&&(s.innerHTML=u),c=ue(_e),v=M(_e,"DIV",{class:!0});var nt=te(v);_=M(nt,"SELECT",{class:!0});var kt=te(_);for(let He=0;He<k.length;He+=1)k[He].l(kt);kt.forEach(b),h=ue(nt),p=M(nt,"SELECT",{class:!0,tabindex:!0});var pt=te(p);for(let He=0;He<Q.length;He+=1)Q[He].l(pt);pt.forEach(b),E=ue(nt),K=Cr(nt,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,class:!0});var Kt=te(K);G=Cr(Kt,"path",{d:!0,transform:!0}),te(G).forEach(b),Kt.forEach(b),nt.forEach(b),ie=ue(_e),W=M(_e,"DIV",{class:!0});var mt=te(W);Z=M(mt,"SELECT",{class:!0});var en=te(Z);for(let He=0;He<z.length;He+=1)z[He].l(en);en.forEach(b),A=ue(mt),T=M(mt,"SELECT",{class:!0,tabindex:!0});var xt=te(T);for(let He=0;He<ae.length;He+=1)ae[He].l(xt);xt.forEach(b),J=ue(mt),O=Cr(mt,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,class:!0});var Ft=te(O);ce=Cr(Ft,"path",{d:!0,transform:!0}),te(ce).forEach(b),Ft.forEach(b),mt.forEach(b),ge=ue(_e),X=M(_e,"BUTTON",{type:!0,class:!0,tabindex:!0,"data-svelte-h":!0}),Ve(X)!=="svelte-1a006lp"&&(X.innerHTML=he),_e.forEach(b),pe=ue(qe),be=M(qe,"DIV",{class:!0});var Dt=te(be);for(let He=0;He<se.length;He+=1)se[He].l(Dt);Dt.forEach(b),Fe=ue(qe);for(let He=0;He<N.length;He+=1)N[He].l(qe);Oe=ue(qe),Mt(ye.$$.fragment,qe),Te=ue(qe),lt&&lt.l(qe),qe.forEach(b),We.forEach(b),this.h()},h(){y(s,"type","button"),y(s,"class","page-button svelte-w239uu"),y(s,"tabindex","-1"),y(_,"class","svelte-w239uu"),y(p,"class","dummy-select svelte-w239uu"),y(p,"tabindex","-1"),y(G,"d","M6 0l12 12-12 12z"),y(G,"transform","rotate(90, 12, 12)"),y(K,"xmlns","http://www.w3.org/2000/svg"),y(K,"width","24"),y(K,"height","24"),y(K,"viewBox","0 0 24 24"),y(K,"class","svelte-w239uu"),y(v,"class","dropdown month svelte-w239uu"),y(Z,"class","svelte-w239uu"),y(T,"class","dummy-select svelte-w239uu"),y(T,"tabindex","-1"),y(ce,"d","M6 0l12 12-12 12z"),y(ce,"transform","rotate(90, 12, 12)"),y(O,"xmlns","http://www.w3.org/2000/svg"),y(O,"width","24"),y(O,"height","24"),y(O,"viewBox","0 0 24 24"),y(O,"class","svelte-w239uu"),y(W,"class","dropdown year svelte-w239uu"),y(X,"type","button"),y(X,"class","page-button svelte-w239uu"),y(X,"tabindex","-1"),y(r,"class","top svelte-w239uu"),y(be,"class","header svelte-w239uu"),y(n,"class","tab-container svelte-w239uu"),y(n,"tabindex","-1"),y(e,"class","date-time-picker svelte-w239uu"),y(e,"tabindex","0")},m(ne,We){fe(ne,e,We),m(e,n),m(n,r),m(r,s),m(r,c),m(r,v),m(v,_);for(let qe=0;qe<k.length;qe+=1)k[qe]&&k[qe].m(_,null);Vt(_,a[8]),m(v,h),m(v,p);for(let qe=0;qe<Q.length;qe+=1)Q[qe]&&Q[qe].m(p,null);m(v,E),m(v,K),m(K,G),m(r,ie),m(r,W),m(W,Z);for(let qe=0;qe<z.length;qe+=1)z[qe]&&z[qe].m(Z,null);Vt(Z,a[9]),m(W,A),m(W,T);for(let qe=0;qe<ae.length;qe+=1)ae[qe]&&ae[qe].m(T,null);m(W,J),m(W,O),m(O,ce),m(r,ge),m(r,X),m(n,pe),m(n,be);for(let qe=0;qe<se.length;qe+=1)se[qe]&&se[qe].m(be,null);m(n,Fe);for(let qe=0;qe<N.length;qe+=1)N[qe]&&N[qe].m(n,null);m(n,Oe),Nt(ye,n,null),m(n,Te),lt&&lt.m(n,null),ve=!0,Ke||(je=[xe(s,"click",a[23]),xe(_,"keydown",a[16]),xe(_,"input",a[24]),xe(Z,"input",a[25]),xe(Z,"keydown",a[15]),xe(X,"click",a[26]),xe(e,"focusout",a[22]),xe(e,"keydown",a[17])],Ke=!0)},p(ne,We){if(We[0]&556){x=ze(ne[5].months);let _e;for(_e=0;_e<x.length;_e+=1){const nt=wa(ne,x,_e);k[_e]?k[_e].p(nt,We):(k[_e]=ka(nt),k[_e].c(),k[_e].m(_,null))}for(;_e<k.length;_e+=1)k[_e].d(1);k.length=x.length}if((!ve||We[0]&256)&&Vt(_,ne[8]),We[0]&288){B=ze(ne[5].months);let _e;for(_e=0;_e<B.length;_e+=1){const nt=ba(ne,B,_e);Q[_e]?Q[_e].p(nt,We):(Q[_e]=Da(nt),Q[_e].c(),Q[_e].m(p,null))}for(;_e<Q.length;_e+=1)Q[_e].d(1);Q.length=B.length}if(We[0]&64){w=ze(ne[6]);let _e;for(_e=0;_e<w.length;_e+=1){const nt=ya(ne,w,_e);z[_e]?z[_e].p(nt,We):(z[_e]=Ea(nt),z[_e].c(),z[_e].m(Z,null))}for(;_e<z.length;_e+=1)z[_e].d(1);z.length=w.length}if((!ve||We[0]&576)&&Vt(Z,ne[9]),We[0]&80){Ce=ze(ne[6]);let _e;for(_e=0;_e<Ce.length;_e+=1){const nt=_a(ne,Ce,_e);ae[_e]?ae[_e].p(nt,We):(ae[_e]=Sa(nt),ae[_e].c(),ae[_e].m(T,null))}for(;_e<ae.length;_e+=1)ae[_e].d(1);ae.length=Ce.length}if(We[0]&32){oe=ze(Array(7));let _e;for(_e=0;_e<oe.length;_e+=1){const nt=va(ne,oe,_e);se[_e]?se[_e].p(nt,We):(se[_e]=Ta(nt),se[_e].c(),se[_e].m(be,null))}for(;_e<se.length;_e+=1)se[_e].d(1);se.length=oe.length}if(We[0]&18829){H=ze(Array(6));let _e;for(_e=0;_e<H.length;_e+=1){const nt=ma(ne,H,_e);N[_e]?N[_e].p(nt,We):(N[_e]=Oa(nt),N[_e].c(),N[_e].m(n,Oe))}for(;_e<N.length;_e+=1)N[_e].d(1);N.length=H.length}const qe={};We[0]&2&&(qe.timePrecision=ne[1]),!Ee&&We[0]&16&&(Ee=!0,qe.browseDate=ne[4],Dn(()=>Ee=!1)),ye.$set(qe),lt&&lt.p&&(!ve||We[0]&1048576)&&Ko(lt,$e,ne,ne[20],ve?jo($e,ne[20],We,null):Fo(ne[20]),null)},i(ne){ve||(tt(ye.$$.fragment,ne),tt(lt,ne),ve=!0)},o(ne){at(ye.$$.fragment,ne),at(lt,ne),ve=!1},d(ne){ne&&b(e),Ct(k,ne),Ct(Q,ne),Ct(z,ne),Ct(ae,ne),Ct(se,ne),Ct(N,ne),Bt(ye),lt&&lt.d(ne),Ke=!1,hn(je)}}}function dn(a){return new Date(a.getTime())}function jr(a,e,n){return a>n?dn(n):a<e?dn(e):dn(a)}function wi(a,e,n){const r=jr(a,e,n);return r.getTime()!==a.getTime()&&(a=new Date(r.getFullYear(),r.getMonth(),r.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()),a=jr(a,e,n)),a}function Pa(a,e){let n=[];for(let r=a.getFullYear();r<=e.getFullYear();r++)n.push(r);return n}function Ci(a,e,n){const r=new Date(a.year,a.month,a.number),s=new Date(e.getFullYear(),e.getMonth(),e.getDate()),u=new Date(n.getFullYear(),n.getMonth(),n.getDate());return r>=s&&r<=u}function Bs(a,e,n){let r,s,u,c,{$$slots:v={},$$scope:_}=e;const h=Uo();let{value:p=null}=e;function E(w){w.getTime()!==(p==null?void 0:p.getTime())&&(n(4,O=jr(w,T,J)),n(0,p=dn(O)))}function K(w){w.getTime()!==(p==null?void 0:p.getTime())&&(n(4,O=wi(w,T,J)),n(0,p=dn(O)))}function G(w){n(4,O=wi(w,T,J)),!he&&p&&E(O)}function ie(w){return n(4,O=jr(w,T,J)),p&&E(O),O}const W=new Date,Z=new Date;let{timePrecision:A=null}=e,{min:T=new Date(Z.getFullYear()-20,0,1)}=e,{max:J=new Date(Z.getFullYear(),11,31,23,59,59,999)}=e,O=dn(p||wi(Z,T,J));function ce(w){O.getTime()!==(w==null?void 0:w.getTime())&&n(4,O=w?dn(w):O)}let ge=Pa(T,J),{locale:X={}}=e,{browseWithoutSelecting:he=!1}=e;function pe(w){O.setFullYear(w),G(O)}function be(w){let z=O.getFullYear();w===12?(w=0,z++):w===-1&&(w=11,z--);const Ce=nr(z,w),ae=Math.min(O.getDate(),Ce);G(new Date(z,w,ae,O.getHours(),O.getMinutes(),O.getSeconds(),O.getMilliseconds()))}function Fe(w){Ci(w,T,J)&&(O.setFullYear(0),O.setMonth(0),O.setDate(1),O.setFullYear(w.year),O.setMonth(w.month),O.setDate(w.number),K(O),h("select",dn(O)))}function Oe(w){if(w.shiftKey&&w.key==="ArrowUp")pe(O.getFullYear()-1);else if(w.shiftKey&&w.key==="ArrowDown")pe(O.getFullYear()+1);else if(w.shiftKey&&w.key==="ArrowLeft")be(O.getMonth()-1);else if(w.shiftKey&&w.key==="ArrowRight")be(O.getMonth()+1);else return!1;return w.preventDefault(),!0}function ye(w){if(w.shiftKey||w.altKey){Oe(w);return}else if(w.key==="ArrowUp")pe(O.getFullYear()-1);else if(w.key==="ArrowDown")pe(O.getFullYear()+1);else if(w.key==="ArrowLeft")be(O.getMonth()-1);else if(w.key==="ArrowRight")be(O.getMonth()+1);else{Oe(w);return}w.preventDefault()}function Ee(w){if(w.shiftKey||w.altKey){Oe(w);return}else if(w.key==="ArrowUp"||w.key==="ArrowLeft")be(O.getMonth()-1);else if(w.key==="ArrowDown"||w.key==="ArrowRight")be(O.getMonth()+1);else{Oe(w);return}w.preventDefault()}function Te(w){var Ce,ae;let z=w.shiftKey||w.altKey;if(!(((Ce=w.target)==null?void 0:Ce.tagName)==="SELECT"||((ae=w.target)==null?void 0:ae.tagName)==="SPAN")){if(z){Oe(w);return}else if(w.key==="ArrowUp")O.setDate(O.getDate()-7),K(O);else if(w.key==="ArrowDown")O.setDate(O.getDate()+7),K(O);else if(w.key==="ArrowLeft")O.setDate(O.getDate()-1),K(O);else if(w.key==="ArrowRight")O.setDate(O.getDate()+1),K(O);else if(w.key==="Enter")E(O),h("select",dn(O));else return;w.preventDefault()}}function ve(w){bs.call(this,a,w)}const Ke=()=>be(O.getMonth()-1),je=w=>be(parseInt(w.currentTarget.value)),x=w=>pe(parseInt(w.currentTarget.value)),k=()=>be(O.getMonth()+1),B=w=>Fe(w);function Q(w){O=w,n(4,O)}return a.$$set=w=>{"value"in w&&n(0,p=w.value),"timePrecision"in w&&n(1,A=w.timePrecision),"min"in w&&n(2,T=w.min),"max"in w&&n(3,J=w.max),"locale"in w&&n(18,X=w.locale),"browseWithoutSelecting"in w&&n(19,he=w.browseWithoutSelecting),"$$scope"in w&&n(20,_=w.$$scope)},a.$$.update=()=>{a.$$.dirty[0]&13&&(p&&p>J?E(J):p&&p<T&&E(T)),a.$$.dirty[0]&1&&ce(p),a.$$.dirty[0]&12&&n(6,ge=Pa(T,J)),a.$$.dirty[0]&262144&&n(5,r=Vo(X)),a.$$.dirty[0]&16&&n(9,s=O.getFullYear()),a.$$.dirty[0]&16&&n(8,u=O.getMonth()),a.$$.dirty[0]&48&&n(7,c=Is(O,r.weekStartsOn))},[p,A,T,J,O,r,ge,c,u,s,ie,W,pe,be,Fe,ye,Ee,Te,X,he,_,v,ve,Ke,je,x,k,B,Q]}class Ks extends $t{constructor(e){super(),Xt(this,e,Bs,Ns,Zt,{value:0,timePrecision:1,min:2,max:3,locale:18,browseWithoutSelecting:19},null,[-1,-1])}}function Fs(a){return a<.5?4*a*a*a:.5*Math.pow(2*a-2,3)+1}function js(a){const e=a-1;return e*e*e+1}function Us(a,{delay:e=0,duration:n=400,easing:r=js,x:s=0,y:u=0,opacity:c=0}={}){const v=getComputedStyle(a),_=+v.opacity,h=v.transform==="none"?"":v.transform,p=_*(1-c),[E,K]=la(s),[G,ie]=la(u);return{delay:e,duration:n,easing:r,css:(W,Z)=>`
			transform: ${h} translate(${(1-W)*E}${K}, ${(1-W)*G}${ie});
			opacity: ${_-p*Z}`}}function Aa(a,e,n){let r="",s=!0;n=n||new Date(2020,0,1,0,0,0,0);let u=n.getFullYear(),c=n.getMonth(),v=n.getDate(),_=n.getHours(),h=n.getMinutes(),p=n.getSeconds();const E=n.getMilliseconds();function K(A){for(let T=0;T<A.length;T++)if(a.startsWith(A[T]))a=a.slice(1);else{s=!1,a.length===0&&(r=A.slice(T));return}}function G(A,T,J){const O=a.match(A);if(O!=null&&O[0]){a=a.slice(O[0].length);const ce=parseInt(O[0]);return ce>J||ce<T?(s=!1,null):ce}else return s=!1,null}function ie(A){const T=A.findIndex(J=>J.toLowerCase()===a.slice(0,J.length).toLowerCase());return T>=0?(a=a.slice(A[T].length),T):(s=!1,null)}function W(A){if(typeof A=="string")K(A);else if(A.id==="yy"){const T=G(/^[0-9]{2}/,0,99);T!==null&&(u=2e3+T)}else if(A.id==="yyyy"){const T=G(/^[0-9]{4}/,0,9999);T!==null&&(u=T)}else if(A.id==="MM"){const T=G(/^[0-9]{2}/,1,12);T!==null&&(c=T-1)}else if(A.id==="MMM"){const T=ie(A.allowedValues||[]);T!==null&&(c=T)}else if(A.id==="dd"){const T=G(/^[0-9]{2}/,1,31);T!==null&&(v=T)}else if(A.id==="HH"){const T=G(/^[0-9]{2}/,0,23);T!==null&&(_=T)}else if(A.id==="mm"){const T=G(/^[0-9]{2}/,0,59);T!==null&&(h=T)}else if(A.id==="ss"){const T=G(/^[0-9]{2}/,0,59);T!==null&&(p=T)}}for(const A of e)if(W(A),!s)break;const Z=nr(u,c);return v>Z&&(s=!1),{date:s?new Date(u,c,v,_,h,p,E):null,missingPunctuation:r}}function $n(a){return("0"+a.toString()).slice(-2)}function qs(a,e){if(a.startsWith("yyyy"))return{id:"yyyy",toString:n=>n.getFullYear().toString()};if(a.startsWith("yy"))return{id:"yy",toString:n=>n.getFullYear().toString().slice(-2)};if(a.startsWith("MMM"))return{id:"MMM",allowedValues:e.shortMonths,toString:n=>e.shortMonths[n.getMonth()]};if(a.startsWith("MM"))return{id:"MM",toString:n=>$n(n.getMonth()+1)};if(a.startsWith("dd"))return{id:"dd",toString:n=>$n(n.getDate())};if(a.startsWith("HH"))return{id:"HH",toString:n=>$n(n.getHours())};if(a.startsWith("mm"))return{id:"mm",toString:n=>$n(n.getMinutes())};if(a.startsWith("ss"))return{id:"ss",toString:n=>$n(n.getSeconds())}}function Ia(a,e={}){const n=Vo(e),r=[];for(;a.length>0;){const s=qs(a,n);s?(r.push(s),a=a.slice(s.id.length)):typeof r[r.length-1]=="string"?(r[r.length-1]+=a[0],a=a.slice(1)):(r.push(a[0]),a=a.slice(1))}return r}function Ra(a){let e,n,r,s,u=`${a[18]}px`,c;function v(h){a[34](h)}let _={min:a[3],max:a[4],locale:a[10],browseWithoutSelecting:a[11],timePrecision:a[12],$$slots:{default:[Vs]},$$scope:{ctx:a}};return a[14]!==void 0&&(_.value=a[14]),n=new Ks({props:_}),Yt.push(()=>En(n,"value",v)),n.$on("focusout",a[21]),n.$on("select",a[23]),{c(){e=L("div"),Lt(n.$$.fragment),this.h()},l(h){e=M(h,"DIV",{class:!0});var p=te(e);Mt(n.$$.fragment,p),p.forEach(b),this.h()},h(){y(e,"class","picker svelte-1vabmef"),bt(e,"visible",a[2]),bt(e,"above",a[17]),ua(e,"--picker-left-position",u)},m(h,p){fe(h,e,p),Nt(n,e,null),a[35](e),c=!0},p(h,p){const E={};p[0]&8&&(E.min=h[3]),p[0]&16&&(E.max=h[4]),p[0]&1024&&(E.locale=h[10]),p[0]&2048&&(E.browseWithoutSelecting=h[11]),p[0]&4096&&(E.timePrecision=h[12]),p[1]&32&&(E.$$scope={dirty:p,ctx:h}),!r&&p[0]&16384&&(r=!0,E.value=h[14],Dn(()=>r=!1)),n.$set(E),(!c||p[0]&4)&&bt(e,"visible",h[2]),(!c||p[0]&131072)&&bt(e,"above",h[17]),p[0]&262144&&u!==(u=`${h[18]}px`)&&ua(e,"--picker-left-position",u)},i(h){c||(tt(n.$$.fragment,h),h&&Rn(()=>{c&&(s||(s=ca(e,a[24],{},!0)),s.run(1))}),c=!0)},o(h){at(n.$$.fragment,h),h&&(s||(s=ca(e,a[24],{},!1)),s.run(0)),c=!1},d(h){h&&b(e),Bt(n),a[35](null),h&&s&&s.end()}}}function Vs(a){let e;const n=a[29].default,r=Bo(n,a,a[36],null);return{c(){r&&r.c()},l(s){r&&r.l(s)},m(s,u){r&&r.m(s,u),e=!0},p(s,u){r&&r.p&&(!e||u[1]&32)&&Ko(r,n,s,s[36],e?jo(n,s[36],u,null):Fo(s[36]),null)},i(s){e||(tt(r,s),e=!0)},o(s){at(r,s),e=!1},d(s){r&&r.d(s)}}}function zs(a){let e,n,r,s,u,c,v,_=a[2]&&!a[7]&&Ra(a);return{c(){e=L("div"),n=L("input"),r=le(),_&&_.c(),this.h()},l(h){e=M(h,"DIV",{class:!0});var p=te(e);n=M(p,"INPUT",{type:!0,autocomplete:!0,id:!0,placeholder:!0,class:!0}),r=ue(p),_&&_.l(p),p.forEach(b),this.h()},h(){y(n,"type","text"),y(n,"autocomplete","off"),n.value=a[0],y(n,"id",a[5]),y(n,"placeholder",a[6]),n.disabled=a[7],n.required=a[8],y(n,"class","svelte-1vabmef"),bt(n,"invalid",!a[1]),y(e,"class",s="date-time-field "+a[9]+" svelte-1vabmef")},m(h,p){fe(h,e,p),m(e,n),a[30](n),m(e,r),_&&_.m(e,null),u=!0,c||(v=[xe(n,"focus",a[31]),xe(n,"mousedown",a[32]),xe(n,"input",a[33]),xe(e,"focusout",a[21]),xe(e,"keydown",a[22])],c=!0)},p(h,p){(!u||p[0]&1&&n.value!==h[0])&&(n.value=h[0]),(!u||p[0]&32)&&y(n,"id",h[5]),(!u||p[0]&64)&&y(n,"placeholder",h[6]),(!u||p[0]&128)&&(n.disabled=h[7]),(!u||p[0]&256)&&(n.required=h[8]),(!u||p[0]&2)&&bt(n,"invalid",!h[1]),h[2]&&!h[7]?_?(_.p(h,p),p[0]&132&&tt(_,1)):(_=Ra(h),_.c(),tt(_,1),_.m(e,null)):_&&(Ln(),at(_,1,1,()=>{_=null}),Mn()),(!u||p[0]&512&&s!==(s="date-time-field "+h[9]+" svelte-1vabmef"))&&y(e,"class",s)},i(h){u||(tt(_),u=!0)},o(h){at(_),u=!1},d(h){h&&b(e),a[30](null),_&&_.d(),c=!1,hn(v)}}}function xs(a,e,n){let r,s,{$$slots:u={},$$scope:c}=e;const v=Uo(),_=new Date,h=Ti(null);tr(a,h,N=>n(37,s=N));const p={subscribe:h.subscribe,set:N=>{N==null?(h.set(null),n(25,E=N)):N.getTime()!==(s==null?void 0:s.getTime())&&(h.set(N),n(25,E=N))}};tr(a,p,N=>n(14,r=N));let{value:E=null}=e,{min:K=new Date(_.getFullYear()-20,0,1)}=e,{max:G=new Date(_.getFullYear(),11,31,23,59,59,999)}=e,{id:ie=null}=e,{placeholder:W="2020-12-31 23:00:00"}=e,{valid:Z=!0}=e,{disabled:A=!1}=e,{required:T=!1}=e,{class:J=""}=e,{locale:O={}}=e,{format:ce="yyyy-MM-dd HH:mm:ss"}=e,ge=Ia(ce,O);function X(N,Le){n(0,he=pa(N,Le))}let{text:he=pa(r,ge)}=e;function pe(N,Le){if(N.length){const Be=Aa(N,Le,r);Be.date!==null?(n(1,Z=!0),p.set(Be.date)):n(1,Z=!1)}else n(1,Z=!0),E&&(n(25,E=null),p.set(null))}let{visible:be=!1}=e,{closeOnSelection:Fe=!1}=e,{browseWithoutSelecting:Oe=!1}=e,{timePrecision:ye=null}=e;function Ee(N){(N==null?void 0:N.currentTarget)instanceof HTMLElement&&N.relatedTarget&&N.relatedTarget instanceof Node&&N.currentTarget.contains(N.relatedTarget)||n(2,be=!1)}function Te(N){N.key==="Escape"&&be?(n(2,be=!1),N.preventDefault(),N.stopPropagation()):N.key==="Enter"&&(n(2,be=!be),N.preventDefault())}function ve(N){v("select",N.detail),Fe&&n(2,be=!1)}let{dynamicPositioning:Ke=!1}=e,je,x,k=!1,B=null;function Q(){if(n(17,k=!1),n(18,B=null),be&&x&&Ke){const N=je.getBoundingClientRect(),Le=x.offsetWidth-N.width,Be=N.bottom+x.offsetHeight+5,$e=N.left+x.offsetWidth+5;if(Be>window.innerHeight&&n(17,k=!0),$e>window.innerWidth&&(n(18,B=-Le),N.left<Le+5)){const ne=window.innerWidth/2-x.offsetWidth/2;n(18,B=ne-N.left)}}}function w(N){return Q(),Us(N,{duration:200,easing:Fs,y:k?5:-5})}function z(N){Yt[N?"unshift":"push"](()=>{je=N,n(15,je)})}const Ce=()=>n(2,be=!0),ae=()=>n(2,be=!0),oe=N=>{if(N instanceof InputEvent&&N.inputType==="insertText"&&typeof N.data=="string"&&N.currentTarget.value===he+N.data){let Le=Aa(he,ge,r);if(Le.missingPunctuation!==""&&!Le.missingPunctuation.startsWith(N.data)){n(0,he=he+Le.missingPunctuation+N.data);return}}n(0,he=N.currentTarget.value)};function se(N){r=N,p.set(r)}function H(N){Yt[N?"unshift":"push"](()=>{x=N,n(16,x)})}return a.$$set=N=>{"value"in N&&n(25,E=N.value),"min"in N&&n(3,K=N.min),"max"in N&&n(4,G=N.max),"id"in N&&n(5,ie=N.id),"placeholder"in N&&n(6,W=N.placeholder),"valid"in N&&n(1,Z=N.valid),"disabled"in N&&n(7,A=N.disabled),"required"in N&&n(8,T=N.required),"class"in N&&n(9,J=N.class),"locale"in N&&n(10,O=N.locale),"format"in N&&n(26,ce=N.format),"text"in N&&n(0,he=N.text),"visible"in N&&n(2,be=N.visible),"closeOnSelection"in N&&n(27,Fe=N.closeOnSelection),"browseWithoutSelecting"in N&&n(11,Oe=N.browseWithoutSelecting),"timePrecision"in N&&n(12,ye=N.timePrecision),"dynamicPositioning"in N&&n(28,Ke=N.dynamicPositioning),"$$scope"in N&&n(36,c=N.$$scope)},a.$$.update=()=>{a.$$.dirty[0]&33554432&&p.set(E),a.$$.dirty[0]&67109888&&n(13,ge=Ia(ce,O)),a.$$.dirty[0]&24576&&X(r,ge),a.$$.dirty[0]&8193&&pe(he,ge)},[he,Z,be,K,G,ie,W,A,T,J,O,Oe,ye,ge,r,je,x,k,B,h,p,Ee,Te,ve,w,E,ce,Fe,Ke,u,z,Ce,ae,oe,se,H,c]}class qn extends $t{constructor(e){super(),Xt(this,e,xs,zs,Zt,{value:25,min:3,max:4,id:5,placeholder:6,valid:1,disabled:7,required:8,class:9,locale:10,format:26,text:0,visible:2,closeOnSelection:27,browseWithoutSelecting:11,timePrecision:12,dynamicPositioning:28},null,[-1,-1])}}var La=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zo(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var xo={exports:{}};(function(a,e){(function(n,r){a.exports=r()})(La,function(){var n=function(t,i){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(o[f]=l[f])})(t,i)},r=function(){return(r=Object.assign||function(t){for(var i,o=1,l=arguments.length;o<l;o++)for(var f in i=arguments[o])Object.prototype.hasOwnProperty.call(i,f)&&(t[f]=i[f]);return t}).apply(this,arguments)};function s(t,i,o){for(var l,f=0,d=i.length;f<d;f++)!l&&f in i||((l=l||Array.prototype.slice.call(i,0,f))[f]=i[f]);return t.concat(l||Array.prototype.slice.call(i))}var u=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:La,c=Object.keys,v=Array.isArray;function _(t,i){return typeof i!="object"||c(i).forEach(function(o){t[o]=i[o]}),t}typeof Promise>"u"||u.Promise||(u.Promise=Promise);var h=Object.getPrototypeOf,p={}.hasOwnProperty;function E(t,i){return p.call(t,i)}function K(t,i){typeof i=="function"&&(i=i(h(t))),(typeof Reflect>"u"?c:Reflect.ownKeys)(i).forEach(function(o){ie(t,o,i[o])})}var G=Object.defineProperty;function ie(t,i,o,l){G(t,i,_(o&&E(o,"get")&&typeof o.get=="function"?{get:o.get,set:o.set,configurable:!0}:{value:o,configurable:!0,writable:!0},l))}function W(t){return{from:function(i){return t.prototype=Object.create(i.prototype),ie(t.prototype,"constructor",t),{extend:K.bind(null,t.prototype)}}}}var Z=Object.getOwnPropertyDescriptor,A=[].slice;function T(t,i,o){return A.call(t,i,o)}function J(t,i){return i(t)}function O(t){if(!t)throw new Error("Assertion Failed")}function ce(t){u.setImmediate?setImmediate(t):setTimeout(t,0)}function ge(t,i){if(typeof i=="string"&&E(t,i))return t[i];if(!i)return t;if(typeof i!="string"){for(var o=[],l=0,f=i.length;l<f;++l){var d=ge(t,i[l]);o.push(d)}return o}var g=i.indexOf(".");if(g!==-1){var D=t[i.substr(0,g)];return D==null?void 0:ge(D,i.substr(g+1))}}function X(t,i,o){if(t&&i!==void 0&&!("isFrozen"in Object&&Object.isFrozen(t)))if(typeof i!="string"&&"length"in i){O(typeof o!="string"&&"length"in o);for(var l=0,f=i.length;l<f;++l)X(t,i[l],o[l])}else{var d,g,D=i.indexOf(".");D!==-1?(d=i.substr(0,D),(g=i.substr(D+1))===""?o===void 0?v(t)&&!isNaN(parseInt(d))?t.splice(d,1):delete t[d]:t[d]=o:X(D=!(D=t[d])||!E(t,d)?t[d]={}:D,g,o)):o===void 0?v(t)&&!isNaN(parseInt(i))?t.splice(i,1):delete t[i]:t[i]=o}}function he(t){var i,o={};for(i in t)E(t,i)&&(o[i]=t[i]);return o}var pe=[].concat;function be(t){return pe.apply([],t)}var mn="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(be([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(i){return i+t+"Array"})}))).filter(function(t){return u[t]}),Fe=new Set(mn.map(function(t){return u[t]})),Oe=null;function ye(t){return Oe=new WeakMap,t=function i(o){if(!o||typeof o!="object")return o;var l=Oe.get(o);if(l)return l;if(v(o)){l=[],Oe.set(o,l);for(var f=0,d=o.length;f<d;++f)l.push(i(o[f]))}else if(Fe.has(o.constructor))l=o;else{var g,D=h(o);for(g in l=D===Object.prototype?{}:Object.create(D),Oe.set(o,l),o)E(o,g)&&(l[g]=i(o[g]))}return l}(t),Oe=null,t}var Ee={}.toString;function Te(t){return Ee.call(t).slice(8,-1)}var ve=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ke=typeof ve=="symbol"?function(t){var i;return t!=null&&(i=t[ve])&&i.apply(t)}:function(){return null};function je(t,i){return i=t.indexOf(i),0<=i&&t.splice(i,1),0<=i}var x={};function k(t){var i,o,l,f;if(arguments.length===1){if(v(t))return t.slice();if(this===x&&typeof t=="string")return[t];if(f=Ke(t)){for(o=[];!(l=f.next()).done;)o.push(l.value);return o}if(t==null)return[t];if(typeof(i=t.length)!="number")return[t];for(o=new Array(i);i--;)o[i]=t[i];return o}for(i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return o}var B=typeof Symbol<"u"?function(t){return t[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},xt=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],nn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(xt),Q={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function w(t,i){this.name=t,this.message=i}function z(t,i){return t+". Errors: "+Object.keys(i).map(function(o){return i[o].toString()}).filter(function(o,l,f){return f.indexOf(o)===l}).join(`
`)}function Ce(t,i,o,l){this.failures=i,this.failedKeys=l,this.successCount=o,this.message=z(t,i)}function ae(t,i){this.name="BulkError",this.failures=Object.keys(i).map(function(o){return i[o]}),this.failuresByPos=i,this.message=z(t,this.failures)}W(w).from(Error).extend({toString:function(){return this.name+": "+this.message}}),W(Ce).from(w),W(ae).from(w);var oe=nn.reduce(function(t,i){return t[i]=i+"Error",t},{}),se=w,H=nn.reduce(function(t,i){var o=i+"Error";function l(f,d){this.name=o,f?typeof f=="string"?(this.message="".concat(f).concat(d?`
 `+d:""),this.inner=d||null):typeof f=="object"&&(this.message="".concat(f.name," ").concat(f.message),this.inner=f):(this.message=Q[i]||o,this.inner=null)}return W(l).from(se),t[i]=l,t},{});H.Syntax=SyntaxError,H.Type=TypeError,H.Range=RangeError;var N=xt.reduce(function(t,i){return t[i+"Error"]=H[i],t},{}),Le=nn.reduce(function(t,i){return["Syntax","Type","Range"].indexOf(i)===-1&&(t[i+"Error"]=H[i]),t},{});function Be(){}function $e(t){return t}function lt(t,i){return t==null||t===$e?i:function(o){return i(t(o))}}function ne(t,i){return function(){t.apply(this,arguments),i.apply(this,arguments)}}function We(t,i){return t===Be?i:function(){var o=t.apply(this,arguments);o!==void 0&&(arguments[0]=o);var l=this.onsuccess,f=this.onerror;this.onsuccess=null,this.onerror=null;var d=i.apply(this,arguments);return l&&(this.onsuccess=this.onsuccess?ne(l,this.onsuccess):l),f&&(this.onerror=this.onerror?ne(f,this.onerror):f),d!==void 0?d:o}}function qe(t,i){return t===Be?i:function(){t.apply(this,arguments);var o=this.onsuccess,l=this.onerror;this.onsuccess=this.onerror=null,i.apply(this,arguments),o&&(this.onsuccess=this.onsuccess?ne(o,this.onsuccess):o),l&&(this.onerror=this.onerror?ne(l,this.onerror):l)}}function _e(t,i){return t===Be?i:function(o){var l=t.apply(this,arguments);_(o,l);var f=this.onsuccess,d=this.onerror;return this.onsuccess=null,this.onerror=null,o=i.apply(this,arguments),f&&(this.onsuccess=this.onsuccess?ne(f,this.onsuccess):f),d&&(this.onerror=this.onerror?ne(d,this.onerror):d),l===void 0?o===void 0?void 0:o:_(l,o)}}function nt(t,i){return t===Be?i:function(){return i.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function kt(t,i){return t===Be?i:function(){var o=t.apply(this,arguments);if(o&&typeof o.then=="function"){for(var l=this,f=arguments.length,d=new Array(f);f--;)d[f]=arguments[f];return o.then(function(){return i.apply(l,d)})}return i.apply(this,arguments)}}Le.ModifyError=Ce,Le.DexieError=w,Le.BulkError=ae;var pt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Kt(t){pt=t}var mt={},en=100,mn=typeof Promise>"u"?[]:function(){var t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,h(t),t];var i=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[i,h(i),t]}(),xt=mn[0],nn=mn[1],mn=mn[2],nn=nn&&nn.then,Ft=xt&&xt.constructor,Dt=!!mn,He=function(t,i){ft.push([t,i]),_t&&(queueMicrotask(an),_t=!1)},dt=!0,_t=!0,tn=[],Ht=[],ht=$e,it={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Be,pgp:!1,env:{},finalize:Be},Se=it,ft=[],ot=0,de=[];function P(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var i=this._PSD=Se;if(typeof t!="function"){if(t!==mt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&De(this,this._value))}this._state=null,this._value=null,++i.ref,function o(l,f){try{f(function(d){if(l._state===null){if(d===l)throw new TypeError("A promise cannot be resolved with itself.");var g=l._lib&&Wt();d&&typeof d.then=="function"?o(l,function(D,R){d instanceof P?d._then(D,R):d.then(D,R)}):(l._state=!0,l._value=d,yt(l)),g&&Pt()}},De.bind(null,l))}catch(d){De(l,d)}}(this,t)}var Ue={get:function(){var t=Se,i=or;function o(l,f){var d=this,g=!t.global&&(t!==Se||i!==or),D=g&&!_n(),R=new P(function(C,U){Ot(d,new ke(Ni(l,t,g,D),Ni(f,t,g,D),C,U,t))});return this._consoleTask&&(R._consoleTask=this._consoleTask),R}return o.prototype=mt,o},set:function(t){ie(this,"then",t&&t.prototype===mt?Ue:{get:function(){return t},set:Ue.set})}};function ke(t,i,o,l,f){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof i=="function"?i:null,this.resolve=o,this.reject=l,this.psd=f}function De(t,i){var o,l;Ht.push(i),t._state===null&&(o=t._lib&&Wt(),i=ht(i),t._state=!1,t._value=i,l=t,tn.some(function(f){return f._value===l._value})||tn.push(l),yt(t),o&&Pt())}function yt(t){var i=t._listeners;t._listeners=[];for(var o=0,l=i.length;o<l;++o)Ot(t,i[o]);var f=t._PSD;--f.ref||f.finalize(),ot===0&&(++ot,He(function(){--ot==0&&un()},[]))}function Ot(t,i){if(t._state!==null){var o=t._state?i.onFulfilled:i.onRejected;if(o===null)return(t._state?i.resolve:i.reject)(t._value);++i.psd.ref,++ot,He(Jt,[o,t,i])}else t._listeners.push(i)}function Jt(t,i,o){try{var l,f=i._value;!i._state&&Ht.length&&(Ht=[]),l=pt&&i._consoleTask?i._consoleTask.run(function(){return t(f)}):t(f),i._state||Ht.indexOf(f)!==-1||function(d){for(var g=tn.length;g;)if(tn[--g]._value===d._value)return tn.splice(g,1)}(i),o.resolve(l)}catch(d){o.reject(d)}finally{--ot==0&&un(),--o.psd.ref||o.psd.finalize()}}function an(){Sn(it,function(){Wt()&&Pt()})}function Wt(){var t=dt;return _t=dt=!1,t}function Pt(){var t,i,o;do for(;0<ft.length;)for(t=ft,ft=[],o=t.length,i=0;i<o;++i){var l=t[i];l[0].apply(null,l[1])}while(0<ft.length);_t=dt=!0}function un(){var t=tn;tn=[],t.forEach(function(l){l._PSD.onunhandled.call(null,l._value,l)});for(var i=de.slice(0),o=i.length;o;)i[--o]()}function Gt(t){return new P(mt,!1,t)}function ut(t,i){var o=Se;return function(){var l=Wt(),f=Se;try{return yn(o,!0),t.apply(this,arguments)}catch(d){i&&i(d)}finally{yn(f,!1),l&&Pt()}}}K(P.prototype,{then:Ue,_then:function(t,i){Ot(this,new ke(null,null,t,i,Se))},catch:function(t){if(arguments.length===1)return this.then(null,t);var i=t,o=arguments[1];return typeof i=="function"?this.then(null,function(l){return(l instanceof i?o:Gt)(l)}):this.then(null,function(l){return(l&&l.name===i?o:Gt)(l)})},finally:function(t){return this.then(function(i){return P.resolve(t()).then(function(){return i})},function(i){return P.resolve(t()).then(function(){return Gt(i)})})},timeout:function(t,i){var o=this;return t<1/0?new P(function(l,f){var d=setTimeout(function(){return f(new H.Timeout(i))},t);o.then(l,f).finally(clearTimeout.bind(null,d))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&ie(P.prototype,Symbol.toStringTag,"Dexie.Promise"),it.env=Mi(),K(P,{all:function(){var t=k.apply(null,arguments).map(sr);return new P(function(i,o){t.length===0&&i([]);var l=t.length;t.forEach(function(f,d){return P.resolve(f).then(function(g){t[d]=g,--l||i(t)},o)})})},resolve:function(t){return t instanceof P?t:t&&typeof t.then=="function"?new P(function(i,o){t.then(i,o)}):new P(mt,!0,t)},reject:Gt,race:function(){var t=k.apply(null,arguments).map(sr);return new P(function(i,o){t.map(function(l){return P.resolve(l).then(i,o)})})},PSD:{get:function(){return Se},set:function(t){return Se=t}},totalEchoes:{get:function(){return or}},newPSD:vn,usePSD:Sn,scheduler:{get:function(){return He},set:function(t){He=t}},rejectionMapper:{get:function(){return ht},set:function(t){ht=t}},follow:function(t,i){return new P(function(o,l){return vn(function(f,d){var g=Se;g.unhandleds=[],g.onunhandled=d,g.finalize=ne(function(){var D,R=this;D=function(){R.unhandleds.length===0?f():d(R.unhandleds[0])},de.push(function C(){D(),de.splice(de.indexOf(C),1)}),++ot,He(function(){--ot==0&&un()},[])},g.finalize),t()},i,o,l)})}}),Ft&&(Ft.allSettled&&ie(P,"allSettled",function(){var t=k.apply(null,arguments).map(sr);return new P(function(i){t.length===0&&i([]);var o=t.length,l=new Array(o);t.forEach(function(f,d){return P.resolve(f).then(function(g){return l[d]={status:"fulfilled",value:g}},function(g){return l[d]={status:"rejected",reason:g}}).then(function(){return--o||i(l)})})})}),Ft.any&&typeof AggregateError<"u"&&ie(P,"any",function(){var t=k.apply(null,arguments).map(sr);return new P(function(i,o){t.length===0&&o(new AggregateError([]));var l=t.length,f=new Array(l);t.forEach(function(d,g){return P.resolve(d).then(function(D){return i(D)},function(D){f[g]=D,--l||o(new AggregateError(f))})})})}));var Ze={awaits:0,echoes:0,id:0},ir=0,Tt=[],ar=0,or=0,$o=0;function vn(t,i,o,l){var f=Se,d=Object.create(f);return d.parent=f,d.ref=0,d.global=!1,d.id=++$o,it.env,d.env=Dt?{Promise:P,PromiseProp:{value:P,configurable:!0,writable:!0},all:P.all,race:P.race,allSettled:P.allSettled,any:P.any,resolve:P.resolve,reject:P.reject}:{},i&&_(d,i),++f.ref,d.finalize=function(){--this.parent.ref||this.parent.finalize()},l=Sn(d,t,o,l),d.ref===0&&d.finalize(),l}function Nn(){return Ze.id||(Ze.id=++ir),++Ze.awaits,Ze.echoes+=en,Ze.id}function _n(){return!!Ze.awaits&&(--Ze.awaits==0&&(Ze.id=0),Ze.echoes=Ze.awaits*en,!0)}function sr(t){return Ze.echoes&&t&&t.constructor===Ft?(Nn(),t.then(function(i){return _n(),i},function(i){return _n(),Et(i)})):t}function Xo(){var t=Tt[Tt.length-1];Tt.pop(),yn(t,!1)}function yn(t,i){var o,l=Se;(i?!Ze.echoes||ar++&&t===Se:!ar||--ar&&t===Se)||queueMicrotask(i?(function(f){++or,Ze.echoes&&--Ze.echoes!=0||(Ze.echoes=Ze.awaits=Ze.id=0),Tt.push(Se),yn(f,!0)}).bind(null,t):Xo),t!==Se&&(Se=t,l===it&&(it.env=Mi()),Dt&&(o=it.env.Promise,i=t.env,(l.global||t.global)&&(Object.defineProperty(u,"Promise",i.PromiseProp),o.all=i.all,o.race=i.race,o.resolve=i.resolve,o.reject=i.reject,i.allSettled&&(o.allSettled=i.allSettled),i.any&&(o.any=i.any))))}function Mi(){var t=u.Promise;return Dt?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(u,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject}:{}}function Sn(t,i,o,l,f){var d=Se;try{return yn(t,!0),i(o,l,f)}finally{yn(d,!1)}}function Ni(t,i,o,l){return typeof t!="function"?t:function(){var f=Se;o&&Nn(),yn(i,!0);try{return t.apply(this,arguments)}finally{yn(f,!1),l&&queueMicrotask(_n)}}}function zr(t){Promise===Ft&&Ze.echoes===0?ar===0?t():enqueueNativeMicroTask(t):setTimeout(t,0)}(""+nn).indexOf("[native code]")===-1&&(Nn=_n=Be);var Et=P.reject,Tn="ï¿¿",pn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Bi="String expected.",Bn=[],lr="__dbnames",xr="readonly",Hr="readwrite";function Cn(t,i){return t?i?function(){return t.apply(this,arguments)&&i.apply(this,arguments)}:t:i}var Ki={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ur(t){return typeof t!="string"||/\./.test(t)?function(i){return i}:function(i){return i[t]===void 0&&t in i&&delete(i=ye(i))[t],i}}function Fi(){throw H.Type()}function ct(t,i){try{var o=ji(t),l=ji(i);if(o!==l)return o==="Array"?1:l==="Array"?-1:o==="binary"?1:l==="binary"?-1:o==="string"?1:l==="string"?-1:o==="Date"?1:l!=="Date"?NaN:-1;switch(o){case"number":case"Date":case"string":return i<t?1:t<i?-1:0;case"binary":return function(f,d){for(var g=f.length,D=d.length,R=g<D?g:D,C=0;C<R;++C)if(f[C]!==d[C])return f[C]<d[C]?-1:1;return g===D?0:g<D?-1:1}(Ui(t),Ui(i));case"Array":return function(f,d){for(var g=f.length,D=d.length,R=g<D?g:D,C=0;C<R;++C){var U=ct(f[C],d[C]);if(U!==0)return U}return g===D?0:g<D?-1:1}(t,i)}}catch{}return NaN}function ji(t){var i=typeof t;return i!="object"?i:ArrayBuffer.isView(t)?"binary":(t=Te(t),t==="ArrayBuffer"?"binary":t)}function Ui(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}var qi=(gt.prototype._trans=function(t,i,o){var l=this._tx||Se.trans,f=this.name,d=pt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(t==="readonly"?"read":"write"," ").concat(this.name));function g(C,U,S){if(!S.schema[f])throw new H.NotFound("Table "+f+" not part of transaction");return i(S.idbtrans,S)}var D=Wt();try{var R=l&&l.db._novip===this.db._novip?l===Se.trans?l._promise(t,g,o):vn(function(){return l._promise(t,g,o)},{trans:l,transless:Se.transless||Se}):function C(U,S,q,I){if(U.idbdb&&(U._state.openComplete||Se.letThrough||U._vip)){var j=U._createTransaction(S,q,U._dbSchema);try{j.create(),U._state.PR1398_maxLoop=3}catch(V){return V.name===oe.InvalidState&&U.isOpen()&&0<--U._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),U.close({disableAutoOpen:!1}),U.open().then(function(){return C(U,S,q,I)})):Et(V)}return j._promise(S,function(V,F){return vn(function(){return Se.trans=j,I(V,F,j)})}).then(function(V){if(S==="readwrite")try{j.idbtrans.commit()}catch{}return S==="readonly"?V:j._completion.then(function(){return V})})}if(U._state.openComplete)return Et(new H.DatabaseClosed(U._state.dbOpenError));if(!U._state.isBeingOpened){if(!U._state.autoOpen)return Et(new H.DatabaseClosed);U.open().catch(Be)}return U._state.dbReadyPromise.then(function(){return C(U,S,q,I)})}(this.db,t,[this.name],g);return d&&(R._consoleTask=d,R=R.catch(function(C){return console.trace(C),Et(C)})),R}finally{D&&Pt()}},gt.prototype.get=function(t,i){var o=this;return t&&t.constructor===Object?this.where(t).first(i):t==null?Et(new H.Type("Invalid argument to Table.get()")):this._trans("readonly",function(l){return o.core.get({trans:l,key:t}).then(function(f){return o.hook.reading.fire(f)})}).then(i)},gt.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(v(t))return new this.db.WhereClause(this,"[".concat(t.join("+"),"]"));var i=c(t);if(i.length===1)return this.where(i[0]).equals(t[i[0]]);var o=this.schema.indexes.concat(this.schema.primKey).filter(function(R){if(R.compound&&i.every(function(U){return 0<=R.keyPath.indexOf(U)})){for(var C=0;C<i.length;++C)if(i.indexOf(R.keyPath[C])===-1)return!1;return!0}return!1}).sort(function(R,C){return R.keyPath.length-C.keyPath.length})[0];if(o&&this.db._maxKey!==Tn){var g=o.keyPath.slice(0,i.length);return this.where(g).equals(g.map(function(C){return t[C]}))}!o&&pt&&console.warn("The query ".concat(JSON.stringify(t)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(i.join("+"),"]"));var l=this.schema.idxByName,f=this.db._deps.indexedDB;function d(R,C){return f.cmp(R,C)===0}var D=i.reduce(function(q,C){var U=q[0],S=q[1],q=l[C],I=t[C];return[U||q,U||!q?Cn(S,q&&q.multi?function(j){return j=ge(j,C),v(j)&&j.some(function(V){return d(I,V)})}:function(j){return d(I,ge(j,C))}):S]},[null,null]),g=D[0],D=D[1];return g?this.where(g.name).equals(t[g.keyPath]).filter(D):o?this.filter(D):this.where(i).equals("")},gt.prototype.filter=function(t){return this.toCollection().and(t)},gt.prototype.count=function(t){return this.toCollection().count(t)},gt.prototype.offset=function(t){return this.toCollection().offset(t)},gt.prototype.limit=function(t){return this.toCollection().limit(t)},gt.prototype.each=function(t){return this.toCollection().each(t)},gt.prototype.toArray=function(t){return this.toCollection().toArray(t)},gt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},gt.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,v(t)?"[".concat(t.join("+"),"]"):t))},gt.prototype.reverse=function(){return this.toCollection().reverse()},gt.prototype.mapToClass=function(t){var i,o=this.db,l=this.name;function f(){return i!==null&&i.apply(this,arguments)||this}(this.schema.mappedClass=t).prototype instanceof Fi&&(function(R,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");function U(){this.constructor=R}n(R,C),R.prototype=C===null?Object.create(C):(U.prototype=C.prototype,new U)}(f,i=t),Object.defineProperty(f.prototype,"db",{get:function(){return o},enumerable:!1,configurable:!0}),f.prototype.table=function(){return l},t=f);for(var d=new Set,g=t.prototype;g;g=h(g))Object.getOwnPropertyNames(g).forEach(function(R){return d.add(R)});function D(R){if(!R)return R;var C,U=Object.create(t.prototype);for(C in R)if(!d.has(C))try{U[C]=R[C]}catch{}return U}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=D,this.hook("reading",D),t},gt.prototype.defineClass=function(){return this.mapToClass(function(t){_(this,t)})},gt.prototype.add=function(t,i){var o=this,l=this.schema.primKey,f=l.auto,d=l.keyPath,g=t;return d&&f&&(g=ur(d)(t)),this._trans("readwrite",function(D){return o.core.mutate({trans:D,type:"add",keys:i!=null?[i]:null,values:[g]})}).then(function(D){return D.numFailures?P.reject(D.failures[0]):D.lastResult}).then(function(D){if(d)try{X(t,d,D)}catch{}return D})},gt.prototype.update=function(t,i){return typeof t!="object"||v(t)?this.where(":id").equals(t).modify(i):(t=ge(t,this.schema.primKey.keyPath),t===void 0?Et(new H.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(t).modify(i))},gt.prototype.put=function(t,i){var o=this,l=this.schema.primKey,f=l.auto,d=l.keyPath,g=t;return d&&f&&(g=ur(d)(t)),this._trans("readwrite",function(D){return o.core.mutate({trans:D,type:"put",values:[g],keys:i!=null?[i]:null})}).then(function(D){return D.numFailures?P.reject(D.failures[0]):D.lastResult}).then(function(D){if(d)try{X(t,d,D)}catch{}return D})},gt.prototype.delete=function(t){var i=this;return this._trans("readwrite",function(o){return i.core.mutate({trans:o,type:"delete",keys:[t]})}).then(function(o){return o.numFailures?P.reject(o.failures[0]):void 0})},gt.prototype.clear=function(){var t=this;return this._trans("readwrite",function(i){return t.core.mutate({trans:i,type:"deleteRange",range:Ki})}).then(function(i){return i.numFailures?P.reject(i.failures[0]):void 0})},gt.prototype.bulkGet=function(t){var i=this;return this._trans("readonly",function(o){return i.core.getMany({keys:t,trans:o}).then(function(l){return l.map(function(f){return i.hook.reading.fire(f)})})})},gt.prototype.bulkAdd=function(t,i,o){var l=this,f=Array.isArray(i)?i:void 0,d=(o=o||(f?void 0:i))?o.allKeys:void 0;return this._trans("readwrite",function(g){var C=l.schema.primKey,D=C.auto,C=C.keyPath;if(C&&f)throw new H.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(f&&f.length!==t.length)throw new H.InvalidArgument("Arguments objects and keys must have the same length");var R=t.length,C=C&&D?t.map(ur(C)):t;return l.core.mutate({trans:g,type:"add",keys:f,values:C,wantResults:d}).then(function(j){var S=j.numFailures,q=j.results,I=j.lastResult,j=j.failures;if(S===0)return d?q:I;throw new ae("".concat(l.name,".bulkAdd(): ").concat(S," of ").concat(R," operations failed"),j)})})},gt.prototype.bulkPut=function(t,i,o){var l=this,f=Array.isArray(i)?i:void 0,d=(o=o||(f?void 0:i))?o.allKeys:void 0;return this._trans("readwrite",function(g){var C=l.schema.primKey,D=C.auto,C=C.keyPath;if(C&&f)throw new H.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(f&&f.length!==t.length)throw new H.InvalidArgument("Arguments objects and keys must have the same length");var R=t.length,C=C&&D?t.map(ur(C)):t;return l.core.mutate({trans:g,type:"put",keys:f,values:C,wantResults:d}).then(function(j){var S=j.numFailures,q=j.results,I=j.lastResult,j=j.failures;if(S===0)return d?q:I;throw new ae("".concat(l.name,".bulkPut(): ").concat(S," of ").concat(R," operations failed"),j)})})},gt.prototype.bulkUpdate=function(t){var i=this,o=this.core,l=t.map(function(g){return g.key}),f=t.map(function(g){return g.changes}),d=[];return this._trans("readwrite",function(g){return o.getMany({trans:g,keys:l,cache:"clone"}).then(function(D){var R=[],C=[];t.forEach(function(S,q){var I=S.key,j=S.changes,V=D[q];if(V){for(var F=0,Y=Object.keys(j);F<Y.length;F++){var $=Y[F],ee=j[$];if($===i.schema.primKey.keyPath){if(ct(ee,I)!==0)throw new H.Constraint("Cannot update primary key in bulkUpdate()")}else X(V,$,ee)}d.push(q),R.push(I),C.push(V)}});var U=R.length;return o.mutate({trans:g,type:"put",keys:R,values:C,updates:{keys:l,changeSpecs:f}}).then(function(S){var q=S.numFailures,I=S.failures;if(q===0)return U;for(var j=0,V=Object.keys(I);j<V.length;j++){var F,Y=V[j],$=d[Number(Y)];$!=null&&(F=I[Y],delete I[Y],I[$]=F)}throw new ae("".concat(i.name,".bulkUpdate(): ").concat(q," of ").concat(U," operations failed"),I)})})})},gt.prototype.bulkDelete=function(t){var i=this,o=t.length;return this._trans("readwrite",function(l){return i.core.mutate({trans:l,type:"delete",keys:t})}).then(function(g){var f=g.numFailures,d=g.lastResult,g=g.failures;if(f===0)return d;throw new ae("".concat(i.name,".bulkDelete(): ").concat(f," of ").concat(o," operations failed"),g)})},gt);function gt(){}function zn(t){function i(g,D){if(D){for(var R=arguments.length,C=new Array(R-1);--R;)C[R-1]=arguments[R];return o[g].subscribe.apply(null,C),t}if(typeof g=="string")return o[g]}var o={};i.addEventType=d;for(var l=1,f=arguments.length;l<f;++l)d(arguments[l]);return i;function d(g,D,R){if(typeof g!="object"){var C;D=D||nt;var U={subscribers:[],fire:R=R||Be,subscribe:function(S){U.subscribers.indexOf(S)===-1&&(U.subscribers.push(S),U.fire=D(U.fire,S))},unsubscribe:function(S){U.subscribers=U.subscribers.filter(function(q){return q!==S}),U.fire=U.subscribers.reduce(D,R)}};return o[g]=i[g]=U}c(C=g).forEach(function(S){var q=C[S];if(v(q))d(S,C[S][0],C[S][1]);else{if(q!=="asap")throw new H.InvalidArgument("Invalid event config");var I=d(S,$e,function(){for(var j=arguments.length,V=new Array(j);j--;)V[j]=arguments[j];I.subscribers.forEach(function(F){ce(function(){F.apply(null,V)})})})}})}}function xn(t,i){return W(i).from({prototype:t}),i}function Kn(t,i){return!(t.filter||t.algorithm||t.or)&&(i?t.justLimit:!t.replayFilter)}function Wr(t,i){t.filter=Cn(t.filter,i)}function Gr(t,i,o){var l=t.replayFilter;t.replayFilter=l?function(){return Cn(l(),i())}:i,t.justLimit=o&&!l}function cr(t,i){if(t.isPrimKey)return i.primaryKey;var o=i.getIndexByKeyPath(t.index);if(!o)throw new H.Schema("KeyPath "+t.index+" on object store "+i.name+" is not indexed");return o}function Vi(t,i,o){var l=cr(t,i.schema);return i.openCursor({trans:o,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:l,range:t.range}})}function fr(t,i,o,l){var f=t.replayFilter?Cn(t.filter,t.replayFilter()):t.filter;if(t.or){var d={},g=function(D,R,C){var U,S;f&&!f(R,C,function(q){return R.stop(q)},function(q){return R.fail(q)})||((S=""+(U=R.primaryKey))=="[object ArrayBuffer]"&&(S=""+new Uint8Array(U)),E(d,S)||(d[S]=!0,i(D,R,C)))};return Promise.all([t.or._iterate(g,o),zi(Vi(t,l,o),t.algorithm,g,!t.keysOnly&&t.valueMapper)])}return zi(Vi(t,l,o),Cn(t.algorithm,f),i,!t.keysOnly&&t.valueMapper)}function zi(t,i,o,l){var f=ut(l?function(d,g,D){return o(l(d),g,D)}:o);return t.then(function(d){if(d)return d.start(function(){var g=function(){return d.continue()};i&&!i(d,function(D){return g=D},function(D){d.stop(D),g=Be},function(D){d.fail(D),g=Be})||f(d.value,d,function(D){return g=D}),g()})})}var mn=Symbol(),Hn=(xi.prototype.execute=function(t){if(this.add!==void 0){var i=this.add;if(v(i))return s(s([],v(t)?t:[],!0),i).sort();if(typeof i=="number")return(Number(t)||0)+i;if(typeof i=="bigint")try{return BigInt(t)+i}catch{return BigInt(0)+i}throw new TypeError("Invalid term ".concat(i))}if(this.remove!==void 0){var o=this.remove;if(v(o))return v(t)?t.filter(function(l){return!o.includes(l)}).sort():[];if(typeof o=="number")return Number(t)-o;if(typeof o=="bigint")try{return BigInt(t)-o}catch{return BigInt(0)-o}throw new TypeError("Invalid subtrahend ".concat(o))}return i=(i=this.replacePrefix)===null||i===void 0?void 0:i[0],i&&typeof t=="string"&&t.startsWith(i)?this.replacePrefix[1]+t.substring(i.length):t},xi);function xi(t){Object.assign(this,t)}var es=(st.prototype._read=function(t,i){var o=this._ctx;return o.error?o.table._trans(null,Et.bind(null,o.error)):o.table._trans("readonly",t).then(i)},st.prototype._write=function(t){var i=this._ctx;return i.error?i.table._trans(null,Et.bind(null,i.error)):i.table._trans("readwrite",t,"locked")},st.prototype._addAlgorithm=function(t){var i=this._ctx;i.algorithm=Cn(i.algorithm,t)},st.prototype._iterate=function(t,i){return fr(this._ctx,t,i,this._ctx.table.core)},st.prototype.clone=function(t){var i=Object.create(this.constructor.prototype),o=Object.create(this._ctx);return t&&_(o,t),i._ctx=o,i},st.prototype.raw=function(){return this._ctx.valueMapper=null,this},st.prototype.each=function(t){var i=this._ctx;return this._read(function(o){return fr(i,t,o,i.table.core)})},st.prototype.count=function(t){var i=this;return this._read(function(o){var l=i._ctx,f=l.table.core;if(Kn(l,!0))return f.count({trans:o,query:{index:cr(l,f.schema),range:l.range}}).then(function(g){return Math.min(g,l.limit)});var d=0;return fr(l,function(){return++d,!1},o,f).then(function(){return d})}).then(t)},st.prototype.sortBy=function(t,i){var o=t.split(".").reverse(),l=o[0],f=o.length-1;function d(R,C){return C?d(R[o[C]],C-1):R[l]}var g=this._ctx.dir==="next"?1:-1;function D(R,C){return R=d(R,f),C=d(C,f),R<C?-g:C<R?g:0}return this.toArray(function(R){return R.sort(D)}).then(i)},st.prototype.toArray=function(t){var i=this;return this._read(function(o){var l=i._ctx;if(l.dir==="next"&&Kn(l,!0)&&0<l.limit){var f=l.valueMapper,d=cr(l,l.table.core.schema);return l.table.core.query({trans:o,limit:l.limit,values:!0,query:{index:d,range:l.range}}).then(function(D){return D=D.result,f?D.map(f):D})}var g=[];return fr(l,function(D){return g.push(D)},o,l.table.core).then(function(){return g})},t)},st.prototype.offset=function(t){var i=this._ctx;return t<=0||(i.offset+=t,Kn(i)?Gr(i,function(){var o=t;return function(l,f){return o===0||(o===1?--o:f(function(){l.advance(o),o=0}),!1)}}):Gr(i,function(){var o=t;return function(){return--o<0}})),this},st.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),Gr(this._ctx,function(){var i=t;return function(o,l,f){return--i<=0&&l(f),0<=i}},!0),this},st.prototype.until=function(t,i){return Wr(this._ctx,function(o,l,f){return!t(o.value)||(l(f),i)}),this},st.prototype.first=function(t){return this.limit(1).toArray(function(i){return i[0]}).then(t)},st.prototype.last=function(t){return this.reverse().first(t)},st.prototype.filter=function(t){var i;return Wr(this._ctx,function(o){return t(o.value)}),(i=this._ctx).isMatch=Cn(i.isMatch,t),this},st.prototype.and=function(t){return this.filter(t)},st.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},st.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},st.prototype.desc=function(){return this.reverse()},st.prototype.eachKey=function(t){var i=this._ctx;return i.keysOnly=!i.isMatch,this.each(function(o,l){t(l.key,l)})},st.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},st.prototype.eachPrimaryKey=function(t){var i=this._ctx;return i.keysOnly=!i.isMatch,this.each(function(o,l){t(l.primaryKey,l)})},st.prototype.keys=function(t){var i=this._ctx;i.keysOnly=!i.isMatch;var o=[];return this.each(function(l,f){o.push(f.key)}).then(function(){return o}).then(t)},st.prototype.primaryKeys=function(t){var i=this._ctx;if(i.dir==="next"&&Kn(i,!0)&&0<i.limit)return this._read(function(l){var f=cr(i,i.table.core.schema);return i.table.core.query({trans:l,values:!1,limit:i.limit,query:{index:f,range:i.range}})}).then(function(l){return l.result}).then(t);i.keysOnly=!i.isMatch;var o=[];return this.each(function(l,f){o.push(f.primaryKey)}).then(function(){return o}).then(t)},st.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},st.prototype.firstKey=function(t){return this.limit(1).keys(function(i){return i[0]}).then(t)},st.prototype.lastKey=function(t){return this.reverse().firstKey(t)},st.prototype.distinct=function(){var t=this._ctx,t=t.index&&t.table.schema.idxByName[t.index];if(!t||!t.multi)return this;var i={};return Wr(this._ctx,function(f){var l=f.primaryKey.toString(),f=E(i,l);return i[l]=!0,!f}),this},st.prototype.modify=function(t){var i=this,o=this._ctx;return this._write(function(l){var f,d,g;g=typeof t=="function"?t:(f=c(t),d=f.length,function(F){for(var Y=!1,$=0;$<d;++$){var ee=f[$],re=t[ee],me=ge(F,ee);re instanceof Hn?(X(F,ee,re.execute(me)),Y=!0):me!==re&&(X(F,ee,re),Y=!0)}return Y});function D(F,ee){var $=ee.failures,ee=ee.numFailures;j+=F-ee;for(var re=0,me=c($);re<me.length;re++){var Me=me[re];I.push($[Me])}}var R=o.table.core,C=R.schema.primaryKey,U=C.outbound,S=C.extractKey,q=i.db._options.modifyChunkSize||200,I=[],j=0,V=[];return i.clone().primaryKeys().then(function(F){function Y(ee){var re=Math.min(q,F.length-ee);return R.getMany({trans:l,keys:F.slice(ee,ee+re),cache:"immutable"}).then(function(me){for(var Me=[],we=[],Ae=U?[]:null,Ne=[],Pe=0;Pe<re;++Pe){var Ge=me[Pe],Ye={value:ye(Ge),primKey:F[ee+Pe]};g.call(Ye,Ye.value,Ye)!==!1&&(Ye.value==null?Ne.push(F[ee+Pe]):U||ct(S(Ge),S(Ye.value))===0?(we.push(Ye.value),U&&Ae.push(F[ee+Pe])):(Ne.push(F[ee+Pe]),Me.push(Ye.value)))}return Promise.resolve(0<Me.length&&R.mutate({trans:l,type:"add",values:Me}).then(function(Xe){for(var Je in Xe.failures)Ne.splice(parseInt(Je),1);D(Me.length,Xe)})).then(function(){return(0<we.length||$&&typeof t=="object")&&R.mutate({trans:l,type:"put",keys:Ae,values:we,criteria:$,changeSpec:typeof t!="function"&&t,isAdditionalChunk:0<ee}).then(function(Xe){return D(we.length,Xe)})}).then(function(){return(0<Ne.length||$&&t===Yr)&&R.mutate({trans:l,type:"delete",keys:Ne,criteria:$,isAdditionalChunk:0<ee}).then(function(Xe){return D(Ne.length,Xe)})}).then(function(){return F.length>ee+re&&Y(ee+q)})})}var $=Kn(o)&&o.limit===1/0&&(typeof t!="function"||t===Yr)&&{index:o.index,range:o.range};return Y(0).then(function(){if(0<I.length)throw new Ce("Error modifying one or more objects",I,j,V);return F.length})})})},st.prototype.delete=function(){var t=this._ctx,i=t.range;return Kn(t)&&(t.isPrimKey||i.type===3)?this._write(function(o){var l=t.table.core.schema.primaryKey,f=i;return t.table.core.count({trans:o,query:{index:l,range:f}}).then(function(d){return t.table.core.mutate({trans:o,type:"deleteRange",range:f}).then(function(g){var D=g.failures;if(g.lastResult,g.results,g=g.numFailures,g)throw new Ce("Could not delete some values",Object.keys(D).map(function(R){return D[R]}),d-g);return d-g})})}):this.modify(Yr)},st);function st(){}var Yr=function(t,i){return i.value=null};function ts(t,i){return t<i?-1:t===i?0:1}function ns(t,i){return i<t?-1:t===i?0:1}function Qt(t,i,o){return t=t instanceof Wi?new t.Collection(t):t,t._ctx.error=new(o||TypeError)(i),t}function Fn(t){return new t.Collection(t,function(){return Hi("")}).limit(0)}function dr(t,i,o,l){var f,d,g,D,R,C,U,S=o.length;if(!o.every(function(j){return typeof j=="string"}))return Qt(t,Bi);function q(j){f=j==="next"?function(F){return F.toUpperCase()}:function(F){return F.toLowerCase()},d=j==="next"?function(F){return F.toLowerCase()}:function(F){return F.toUpperCase()},g=j==="next"?ts:ns;var V=o.map(function(F){return{lower:d(F),upper:f(F)}}).sort(function(F,Y){return g(F.lower,Y.lower)});D=V.map(function(F){return F.upper}),R=V.map(function(F){return F.lower}),U=(C=j)==="next"?"":l}q("next"),t=new t.Collection(t,function(){return bn(D[0],R[S-1]+l)}),t._ondirectionchange=function(j){q(j)};var I=0;return t._addAlgorithm(function(j,V,F){var Y=j.key;if(typeof Y!="string")return!1;var $=d(Y);if(i($,R,I))return!0;for(var ee=null,re=I;re<S;++re){var me=function(Me,we,Ae,Ne,Pe,Ge){for(var Ye=Math.min(Me.length,Ne.length),Xe=-1,Je=0;Je<Ye;++Je){var on=we[Je];if(on!==Ne[Je])return Pe(Me[Je],Ae[Je])<0?Me.substr(0,Je)+Ae[Je]+Ae.substr(Je+1):Pe(Me[Je],Ne[Je])<0?Me.substr(0,Je)+Ne[Je]+Ae.substr(Je+1):0<=Xe?Me.substr(0,Xe)+we[Xe]+Ae.substr(Xe+1):null;Pe(Me[Je],on)<0&&(Xe=Je)}return Ye<Ne.length&&Ge==="next"?Me+Ae.substr(Me.length):Ye<Me.length&&Ge==="prev"?Me.substr(0,Ae.length):Xe<0?null:Me.substr(0,Xe)+Ne[Xe]+Ae.substr(Xe+1)}(Y,$,D[re],R[re],g,C);me===null&&ee===null?I=re+1:(ee===null||0<g(ee,me))&&(ee=me)}return V(ee!==null?function(){j.continue(ee+U)}:F),!1}),t}function bn(t,i,o,l){return{type:2,lower:t,upper:i,lowerOpen:o,upperOpen:l}}function Hi(t){return{type:1,lower:t,upper:t}}var Wi=(Object.defineProperty(At.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),At.prototype.between=function(t,i,o,l){o=o!==!1,l=l===!0;try{return 0<this._cmp(t,i)||this._cmp(t,i)===0&&(o||l)&&(!o||!l)?Fn(this):new this.Collection(this,function(){return bn(t,i,!o,!l)})}catch{return Qt(this,pn)}},At.prototype.equals=function(t){return t==null?Qt(this,pn):new this.Collection(this,function(){return Hi(t)})},At.prototype.above=function(t){return t==null?Qt(this,pn):new this.Collection(this,function(){return bn(t,void 0,!0)})},At.prototype.aboveOrEqual=function(t){return t==null?Qt(this,pn):new this.Collection(this,function(){return bn(t,void 0,!1)})},At.prototype.below=function(t){return t==null?Qt(this,pn):new this.Collection(this,function(){return bn(void 0,t,!1,!0)})},At.prototype.belowOrEqual=function(t){return t==null?Qt(this,pn):new this.Collection(this,function(){return bn(void 0,t)})},At.prototype.startsWith=function(t){return typeof t!="string"?Qt(this,Bi):this.between(t,t+Tn,!0,!0)},At.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):dr(this,function(i,o){return i.indexOf(o[0])===0},[t],Tn)},At.prototype.equalsIgnoreCase=function(t){return dr(this,function(i,o){return i===o[0]},[t],"")},At.prototype.anyOfIgnoreCase=function(){var t=k.apply(x,arguments);return t.length===0?Fn(this):dr(this,function(i,o){return o.indexOf(i)!==-1},t,"")},At.prototype.startsWithAnyOfIgnoreCase=function(){var t=k.apply(x,arguments);return t.length===0?Fn(this):dr(this,function(i,o){return o.some(function(l){return i.indexOf(l)===0})},t,Tn)},At.prototype.anyOf=function(){var t=this,i=k.apply(x,arguments),o=this._cmp;try{i.sort(o)}catch{return Qt(this,pn)}if(i.length===0)return Fn(this);var l=new this.Collection(this,function(){return bn(i[0],i[i.length-1])});l._ondirectionchange=function(d){o=d==="next"?t._ascending:t._descending,i.sort(o)};var f=0;return l._addAlgorithm(function(d,g,D){for(var R=d.key;0<o(R,i[f]);)if(++f===i.length)return g(D),!1;return o(R,i[f])===0||(g(function(){d.continue(i[f])}),!1)}),l},At.prototype.notEqual=function(t){return this.inAnyRange([[-1/0,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},At.prototype.noneOf=function(){var t=k.apply(x,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return Qt(this,pn)}var i=t.reduce(function(o,l){return o?o.concat([[o[o.length-1][1],l]]):[[-1/0,l]]},null);return i.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(i,{includeLowers:!1,includeUppers:!1})},At.prototype.inAnyRange=function(Y,i){var o=this,l=this._cmp,f=this._ascending,d=this._descending,g=this._min,D=this._max;if(Y.length===0)return Fn(this);if(!Y.every(function($){return $[0]!==void 0&&$[1]!==void 0&&f($[0],$[1])<=0}))return Qt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",H.InvalidArgument);var R=!i||i.includeLowers!==!1,C=i&&i.includeUppers===!0,U,S=f;function q($,ee){return S($[0],ee[0])}try{(U=Y.reduce(function($,ee){for(var re=0,me=$.length;re<me;++re){var Me=$[re];if(l(ee[0],Me[1])<0&&0<l(ee[1],Me[0])){Me[0]=g(Me[0],ee[0]),Me[1]=D(Me[1],ee[1]);break}}return re===me&&$.push(ee),$},[])).sort(q)}catch{return Qt(this,pn)}var I=0,j=C?function($){return 0<f($,U[I][1])}:function($){return 0<=f($,U[I][1])},V=R?function($){return 0<d($,U[I][0])}:function($){return 0<=d($,U[I][0])},F=j,Y=new this.Collection(this,function(){return bn(U[0][0],U[U.length-1][1],!R,!C)});return Y._ondirectionchange=function($){S=$==="next"?(F=j,f):(F=V,d),U.sort(q)},Y._addAlgorithm(function($,ee,re){for(var me,Me=$.key;F(Me);)if(++I===U.length)return ee(re),!1;return!j(me=Me)&&!V(me)||(o._cmp(Me,U[I][1])===0||o._cmp(Me,U[I][0])===0||ee(function(){S===f?$.continue(U[I][0]):$.continue(U[I][1])}),!1)}),Y},At.prototype.startsWithAnyOf=function(){var t=k.apply(x,arguments);return t.every(function(i){return typeof i=="string"})?t.length===0?Fn(this):this.inAnyRange(t.map(function(i){return[i,i+Tn]})):Qt(this,"startsWithAnyOf() only works with strings")},At);function At(){}function cn(t){return ut(function(i){return Wn(i),t(i.target.error),!1})}function Wn(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var Gn="storagemutated",Zr="x-storagemutated-1",wn=zn(null,Gn),rs=(fn.prototype._lock=function(){return O(!Se.global),++this._reculock,this._reculock!==1||Se.global||(Se.lockOwnerFor=this),this},fn.prototype._unlock=function(){if(O(!Se.global),--this._reculock==0)for(Se.global||(Se.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var t=this._blockedFuncs.shift();try{Sn(t[1],t[0])}catch{}}return this},fn.prototype._locked=function(){return this._reculock&&Se.lockOwnerFor!==this},fn.prototype.create=function(t){var i=this;if(!this.mode)return this;var o=this.db.idbdb,l=this.db._state.dbOpenError;if(O(!this.idbtrans),!t&&!o)switch(l&&l.name){case"DatabaseClosedError":throw new H.DatabaseClosed(l);case"MissingAPIError":throw new H.MissingAPI(l.message,l);default:throw new H.OpenFailed(l)}if(!this.active)throw new H.TransactionInactive;return O(this._completion._state===null),(t=this.idbtrans=t||(this.db.core||o).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=ut(function(f){Wn(f),i._reject(t.error)}),t.onabort=ut(function(f){Wn(f),i.active&&i._reject(new H.Abort(t.error)),i.active=!1,i.on("abort").fire(f)}),t.oncomplete=ut(function(){i.active=!1,i._resolve(),"mutatedParts"in t&&wn.storagemutated.fire(t.mutatedParts)}),this},fn.prototype._promise=function(t,i,o){var l=this;if(t==="readwrite"&&this.mode!=="readwrite")return Et(new H.ReadOnly("Transaction is readonly"));if(!this.active)return Et(new H.TransactionInactive);if(this._locked())return new P(function(d,g){l._blockedFuncs.push([function(){l._promise(t,i,o).then(d,g)},Se])});if(o)return vn(function(){var d=new P(function(g,D){l._lock();var R=i(g,D,l);R&&R.then&&R.then(g,D)});return d.finally(function(){return l._unlock()}),d._lib=!0,d});var f=new P(function(d,g){var D=i(d,g,l);D&&D.then&&D.then(d,g)});return f._lib=!0,f},fn.prototype._root=function(){return this.parent?this.parent._root():this},fn.prototype.waitFor=function(t){var i,o=this._root(),l=P.resolve(t);o._waitingFor?o._waitingFor=o._waitingFor.then(function(){return l}):(o._waitingFor=l,o._waitingQueue=[],i=o.idbtrans.objectStore(o.storeNames[0]),function d(){for(++o._spinCount;o._waitingQueue.length;)o._waitingQueue.shift()();o._waitingFor&&(i.get(-1/0).onsuccess=d)}());var f=o._waitingFor;return new P(function(d,g){l.then(function(D){return o._waitingQueue.push(ut(d.bind(null,D)))},function(D){return o._waitingQueue.push(ut(g.bind(null,D)))}).finally(function(){o._waitingFor===f&&(o._waitingFor=null)})})},fn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new H.Abort))},fn.prototype.table=function(t){var i=this._memoizedTables||(this._memoizedTables={});if(E(i,t))return i[t];var o=this.schema[t];if(!o)throw new H.NotFound("Table "+t+" not part of transaction");return o=new this.db.Table(t,o,this),o.core=this.db.core.table(t),i[t]=o},fn);function fn(){}function Jr(t,i,o,l,f,d,g){return{name:t,keyPath:i,unique:o,multi:l,auto:f,compound:d,src:(o&&!g?"&":"")+(l?"*":"")+(f?"++":"")+Gi(i)}}function Gi(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function Qr(t,i,o){return{name:t,primKey:i,indexes:o,mappedClass:null,idxByName:(l=function(f){return[f.name,f]},o.reduce(function(f,d,g){return g=l(d,g),g&&(f[g[0]]=g[1]),f},{}))};var l}var Yn=function(t){try{return t.only([[]]),Yn=function(){return[[]]},[[]]}catch{return Yn=function(){return Tn},Tn}};function $r(t){return t==null?function(){}:typeof t=="string"?(i=t).split(".").length===1?function(o){return o[i]}:function(o){return ge(o,i)}:function(o){return ge(o,t)};var i}function Yi(t){return[].slice.call(t)}var is=0;function Zn(t){return t==null?":id":typeof t=="string"?t:"[".concat(t.join("+"),"]")}function as(t,i,R){function l(F){if(F.type===3)return null;if(F.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var I=F.lower,j=F.upper,V=F.lowerOpen,F=F.upperOpen;return I===void 0?j===void 0?null:i.upperBound(j,!!F):j===void 0?i.lowerBound(I,!!V):i.bound(I,j,!!V,!!F)}function f(q){var I,j=q.name;return{name:j,schema:q,mutate:function(V){var F=V.trans,Y=V.type,$=V.keys,ee=V.values,re=V.range;return new Promise(function(me,Me){me=ut(me);var we=F.objectStore(j),Ae=we.keyPath==null,Ne=Y==="put"||Y==="add";if(!Ne&&Y!=="delete"&&Y!=="deleteRange")throw new Error("Invalid operation type: "+Y);var Pe,Ge=($||ee||{length:1}).length;if($&&ee&&$.length!==ee.length)throw new Error("Given keys array must have same length as given values array.");if(Ge===0)return me({numFailures:0,failures:{},results:[],lastResult:void 0});function Ye(zt){++on,Wn(zt)}var Xe=[],Je=[],on=0;if(Y==="deleteRange"){if(re.type===4)return me({numFailures:on,failures:Je,results:[],lastResult:void 0});re.type===3?Xe.push(Pe=we.clear()):Xe.push(Pe=we.delete(l(re)))}else{var Ae=Ne?Ae?[ee,$]:[ee,null]:[$,null],Qe=Ae[0],Ut=Ae[1];if(Ne)for(var qt=0;qt<Ge;++qt)Xe.push(Pe=Ut&&Ut[qt]!==void 0?we[Y](Qe[qt],Ut[qt]):we[Y](Qe[qt])),Pe.onerror=Ye;else for(qt=0;qt<Ge;++qt)Xe.push(Pe=we[Y](Qe[qt])),Pe.onerror=Ye}function Sr(zt){zt=zt.target.result,Xe.forEach(function(An,vi){return An.error!=null&&(Je[vi]=An.error)}),me({numFailures:on,failures:Je,results:Y==="delete"?$:Xe.map(function(An){return An.result}),lastResult:zt})}Pe.onerror=function(zt){Ye(zt),Sr(zt)},Pe.onsuccess=Sr})},getMany:function(V){var F=V.trans,Y=V.keys;return new Promise(function($,ee){$=ut($);for(var re,me=F.objectStore(j),Me=Y.length,we=new Array(Me),Ae=0,Ne=0,Pe=function(Xe){Xe=Xe.target,we[Xe._pos]=Xe.result,++Ne===Ae&&$(we)},Ge=cn(ee),Ye=0;Ye<Me;++Ye)Y[Ye]!=null&&((re=me.get(Y[Ye]))._pos=Ye,re.onsuccess=Pe,re.onerror=Ge,++Ae);Ae===0&&$(we)})},get:function(V){var F=V.trans,Y=V.key;return new Promise(function($,ee){$=ut($);var re=F.objectStore(j).get(Y);re.onsuccess=function(me){return $(me.target.result)},re.onerror=cn(ee)})},query:(I=C,function(V){return new Promise(function(F,Y){F=ut(F);var $,ee,re,Ae=V.trans,me=V.values,Me=V.limit,Pe=V.query,we=Me===1/0?void 0:Me,Ne=Pe.index,Pe=Pe.range,Ae=Ae.objectStore(j),Ne=Ne.isPrimaryKey?Ae:Ae.index(Ne.name),Pe=l(Pe);if(Me===0)return F({result:[]});I?((we=me?Ne.getAll(Pe,we):Ne.getAllKeys(Pe,we)).onsuccess=function(Ge){return F({result:Ge.target.result})},we.onerror=cn(Y)):($=0,ee=!me&&"openKeyCursor"in Ne?Ne.openKeyCursor(Pe):Ne.openCursor(Pe),re=[],ee.onsuccess=function(Ge){var Ye=ee.result;return Ye?(re.push(me?Ye.value:Ye.primaryKey),++$===Me?F({result:re}):void Ye.continue()):F({result:re})},ee.onerror=cn(Y))})}),openCursor:function(V){var F=V.trans,Y=V.values,$=V.query,ee=V.reverse,re=V.unique;return new Promise(function(me,Me){me=ut(me);var Ne=$.index,we=$.range,Ae=F.objectStore(j),Ae=Ne.isPrimaryKey?Ae:Ae.index(Ne.name),Ne=ee?re?"prevunique":"prev":re?"nextunique":"next",Pe=!Y&&"openKeyCursor"in Ae?Ae.openKeyCursor(l(we),Ne):Ae.openCursor(l(we),Ne);Pe.onerror=cn(Me),Pe.onsuccess=ut(function(Ge){var Ye,Xe,Je,on,Qe=Pe.result;Qe?(Qe.___id=++is,Qe.done=!1,Ye=Qe.continue.bind(Qe),Xe=(Xe=Qe.continuePrimaryKey)&&Xe.bind(Qe),Je=Qe.advance.bind(Qe),on=function(){throw new Error("Cursor not stopped")},Qe.trans=F,Qe.stop=Qe.continue=Qe.continuePrimaryKey=Qe.advance=function(){throw new Error("Cursor not started")},Qe.fail=ut(Me),Qe.next=function(){var Ut=this,qt=1;return this.start(function(){return qt--?Ut.continue():Ut.stop()}).then(function(){return Ut})},Qe.start=function(Ut){function qt(){if(Pe.result)try{Ut()}catch(zt){Qe.fail(zt)}else Qe.done=!0,Qe.start=function(){throw new Error("Cursor behind last entry")},Qe.stop()}var Sr=new Promise(function(zt,An){zt=ut(zt),Pe.onerror=cn(An),Qe.fail=An,Qe.stop=function(vi){Qe.stop=Qe.continue=Qe.continuePrimaryKey=Qe.advance=on,zt(vi)}});return Pe.onsuccess=ut(function(zt){Pe.onsuccess=qt,qt()}),Qe.continue=Ye,Qe.continuePrimaryKey=Xe,Qe.advance=Je,qt(),Sr},me(Qe)):me(null)},Me)})},count:function(V){var F=V.query,Y=V.trans,$=F.index,ee=F.range;return new Promise(function(re,me){var Me=Y.objectStore(j),we=$.isPrimaryKey?Me:Me.index($.name),Me=l(ee),we=Me?we.count(Me):we.count();we.onsuccess=ut(function(Ae){return re(Ae.target.result)}),we.onerror=cn(me)})}}}var d,g,D,U=(g=R,D=Yi((d=t).objectStoreNames),{schema:{name:d.name,tables:D.map(function(q){return g.objectStore(q)}).map(function(q){var I=q.keyPath,F=q.autoIncrement,j=v(I),V={},F={name:q.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:I==null,compound:j,keyPath:I,autoIncrement:F,unique:!0,extractKey:$r(I)},indexes:Yi(q.indexNames).map(function(Y){return q.index(Y)}).map(function(re){var $=re.name,ee=re.unique,me=re.multiEntry,re=re.keyPath,me={name:$,compound:v(re),keyPath:re,unique:ee,multiEntry:me,extractKey:$r(re)};return V[Zn(re)]=me}),getIndexByKeyPath:function(Y){return V[Zn(Y)]}};return V[":id"]=F.primaryKey,I!=null&&(V[Zn(I)]=F.primaryKey),F})},hasGetAll:0<D.length&&"getAll"in g.objectStore(D[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),R=U.schema,C=U.hasGetAll,U=R.tables.map(f),S={};return U.forEach(function(q){return S[q.name]=q}),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(q){if(!S[q])throw new Error("Table '".concat(q,"' not found"));return S[q]},MIN_KEY:-1/0,MAX_KEY:Yn(i),schema:R}}function os(t,i,o,l){var f=o.IDBKeyRange;return o.indexedDB,{dbcore:(l=as(i,f,l),t.dbcore.reduce(function(d,g){return g=g.create,r(r({},d),g(d))},l))}}function hr(t,l){var o=l.db,l=os(t._middlewares,o,t._deps,l);t.core=l.dbcore,t.tables.forEach(function(f){var d=f.name;t.core.schema.tables.some(function(g){return g.name===d})&&(f.core=t.core.table(d),t[d]instanceof t.Table&&(t[d].core=f.core))})}function pr(t,i,o,l){o.forEach(function(f){var d=l[f];i.forEach(function(g){var D=function R(C,U){return Z(C,U)||(C=h(C))&&R(C,U)}(g,f);(!D||"value"in D&&D.value===void 0)&&(g===t.Transaction.prototype||g instanceof t.Transaction?ie(g,f,{get:function(){return this.table(f)},set:function(R){G(this,f,{value:R,writable:!0,configurable:!0,enumerable:!0})}}):g[f]=new t.Table(f,d))})})}function Xr(t,i){i.forEach(function(o){for(var l in o)o[l]instanceof t.Table&&delete o[l]})}function ss(t,i){return t._cfg.version-i._cfg.version}function ls(t,i,o,l){var f=t._dbSchema;o.objectStoreNames.contains("$meta")&&!f.$meta&&(f.$meta=Qr("$meta",Ji("")[0],[]),t._storeNames.push("$meta"));var d=t._createTransaction("readwrite",t._storeNames,f);d.create(o),d._completion.catch(l);var g=d._reject.bind(d),D=Se.transless||Se;vn(function(){return Se.trans=d,Se.transless=D,i!==0?(hr(t,o),C=i,((R=d).storeNames.includes("$meta")?R.table("$meta").get("version").then(function(U){return U??C}):P.resolve(C)).then(function(U){return q=U,I=d,j=o,V=[],U=(S=t)._versions,F=S._dbSchema=gr(0,S.idbdb,j),(U=U.filter(function(Y){return Y._cfg.version>=q})).length!==0?(U.forEach(function(Y){V.push(function(){var $=F,ee=Y._cfg.dbschema;vr(S,$,j),vr(S,ee,j),F=S._dbSchema=ee;var re=ei($,ee);re.add.forEach(function(Ne){ti(j,Ne[0],Ne[1].primKey,Ne[1].indexes)}),re.change.forEach(function(Ne){if(Ne.recreate)throw new H.Upgrade("Not yet support for changing primary key");var Pe=j.objectStore(Ne.name);Ne.add.forEach(function(Ge){return mr(Pe,Ge)}),Ne.change.forEach(function(Ge){Pe.deleteIndex(Ge.name),mr(Pe,Ge)}),Ne.del.forEach(function(Ge){return Pe.deleteIndex(Ge)})});var me=Y._cfg.contentUpgrade;if(me&&Y._cfg.version>q){hr(S,j),I._memoizedTables={};var Me=he(ee);re.del.forEach(function(Ne){Me[Ne]=$[Ne]}),Xr(S,[S.Transaction.prototype]),pr(S,[S.Transaction.prototype],c(Me),Me),I.schema=Me;var we,Ae=B(me);return Ae&&Nn(),re=P.follow(function(){var Ne;(we=me(I))&&Ae&&(Ne=_n.bind(null,null),we.then(Ne,Ne))}),we&&typeof we.then=="function"?P.resolve(we):re.then(function(){return we})}}),V.push(function($){var ee,re,me=Y._cfg.dbschema;ee=me,re=$,[].slice.call(re.db.objectStoreNames).forEach(function(Me){return ee[Me]==null&&re.db.deleteObjectStore(Me)}),Xr(S,[S.Transaction.prototype]),pr(S,[S.Transaction.prototype],S._storeNames,S._dbSchema),I.schema=S._dbSchema}),V.push(function($){S.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(S.idbdb.version/10)===Y._cfg.version?(S.idbdb.deleteObjectStore("$meta"),delete S._dbSchema.$meta,S._storeNames=S._storeNames.filter(function(ee){return ee!=="$meta"})):$.objectStore("$meta").put(Y._cfg.version,"version"))})}),function Y(){return V.length?P.resolve(V.shift()(I.idbtrans)).then(Y):P.resolve()}().then(function(){Zi(F,j)})):P.resolve();var S,q,I,j,V,F}).catch(g)):(c(f).forEach(function(U){ti(o,U,f[U].primKey,f[U].indexes)}),hr(t,o),void P.follow(function(){return t.on.populate.fire(d)}).catch(g));var R,C})}function us(t,i){Zi(t._dbSchema,i),i.db.version%10!=0||i.objectStoreNames.contains("$meta")||i.db.createObjectStore("$meta").add(Math.ceil(i.db.version/10-1),"version");var o=gr(0,t.idbdb,i);vr(t,t._dbSchema,i);for(var l=0,f=ei(o,t._dbSchema).change;l<f.length;l++){var d=function(g){if(g.change.length||g.recreate)return console.warn("Unable to patch indexes of table ".concat(g.name," because it has changes on the type of index or primary key.")),{value:void 0};var D=i.objectStore(g.name);g.add.forEach(function(R){pt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(g.name,".").concat(R.src)),mr(D,R)})}(f[l]);if(typeof d=="object")return d.value}}function ei(t,i){var o,l={del:[],add:[],change:[]};for(o in t)i[o]||l.del.push(o);for(o in i){var f=t[o],d=i[o];if(f){var g={name:o,def:d,recreate:!1,del:[],add:[],change:[]};if(""+(f.primKey.keyPath||"")!=""+(d.primKey.keyPath||"")||f.primKey.auto!==d.primKey.auto)g.recreate=!0,l.change.push(g);else{var D=f.idxByName,R=d.idxByName,C=void 0;for(C in D)R[C]||g.del.push(C);for(C in R){var U=D[C],S=R[C];U?U.src!==S.src&&g.change.push(S):g.add.push(S)}(0<g.del.length||0<g.add.length||0<g.change.length)&&l.change.push(g)}}else l.add.push([o,d])}return l}function ti(t,i,o,l){var f=t.db.createObjectStore(i,o.keyPath?{keyPath:o.keyPath,autoIncrement:o.auto}:{autoIncrement:o.auto});return l.forEach(function(d){return mr(f,d)}),f}function Zi(t,i){c(t).forEach(function(o){i.db.objectStoreNames.contains(o)||(pt&&console.debug("Dexie: Creating missing table",o),ti(i,o,t[o].primKey,t[o].indexes))})}function mr(t,i){t.createIndex(i.name,i.keyPath,{unique:i.unique,multiEntry:i.multi})}function gr(t,i,o){var l={};return T(i.objectStoreNames,0).forEach(function(f){for(var d=o.objectStore(f),g=Jr(Gi(C=d.keyPath),C||"",!0,!1,!!d.autoIncrement,C&&typeof C!="string",!0),D=[],R=0;R<d.indexNames.length;++R){var U=d.index(d.indexNames[R]),C=U.keyPath,U=Jr(U.name,C,!!U.unique,!!U.multiEntry,!1,C&&typeof C!="string",!1);D.push(U)}l[f]=Qr(f,g,D)}),l}function vr(t,i,o){for(var l=o.db.objectStoreNames,f=0;f<l.length;++f){var d=l[f],g=o.objectStore(d);t._hasGetAll="getAll"in g;for(var D=0;D<g.indexNames.length;++D){var R=g.indexNames[D],C=g.index(R).keyPath,U=typeof C=="string"?C:"["+T(C).join("+")+"]";!i[d]||(C=i[d].idxByName[U])&&(C.name=R,delete i[d].idxByName[U],i[d].idxByName[R]=C)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&u.WorkerGlobalScope&&u instanceof u.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}function Ji(t){return t.split(",").map(function(i,o){var l=(i=i.trim()).replace(/([&*]|\+\+)/g,""),f=/^\[/.test(l)?l.match(/^\[(.*)\]$/)[1].split("+"):l;return Jr(l,f||null,/\&/.test(i),/\*/.test(i),/\+\+/.test(i),v(f),o===0)})}var cs=(_r.prototype._parseStoresSpec=function(t,i){c(t).forEach(function(o){if(t[o]!==null){var l=Ji(t[o]),f=l.shift();if(f.unique=!0,f.multi)throw new H.Schema("Primary key cannot be multi-valued");l.forEach(function(d){if(d.auto)throw new H.Schema("Only primary key can be marked as autoIncrement (++)");if(!d.keyPath)throw new H.Schema("Index must have a name and cannot be an empty string")}),i[o]=Qr(o,f,l)}})},_r.prototype.stores=function(o){var i=this.db;this._cfg.storesSource=this._cfg.storesSource?_(this._cfg.storesSource,o):o;var o=i._versions,l={},f={};return o.forEach(function(d){_(l,d._cfg.storesSource),f=d._cfg.dbschema={},d._parseStoresSpec(l,f)}),i._dbSchema=f,Xr(i,[i._allTables,i,i.Transaction.prototype]),pr(i,[i._allTables,i,i.Transaction.prototype,this._cfg.tables],c(f),f),i._storeNames=c(f),this},_r.prototype.upgrade=function(t){return this._cfg.contentUpgrade=kt(this._cfg.contentUpgrade||Be,t),this},_r);function _r(){}function ni(t,i){var o=t._dbNamesDB;return o||(o=t._dbNamesDB=new gn(lr,{addons:[],indexedDB:t,IDBKeyRange:i})).version(1).stores({dbnames:"name"}),o.table("dbnames")}function ri(t){return t&&typeof t.databases=="function"}function ii(t){return vn(function(){return Se.letThrough=!0,t()})}function ai(t){return!("from"in t)}var jt=function(t,i){if(!this){var o=new jt;return t&&"d"in t&&_(o,t),o}_(this,arguments.length?{d:1,from:t,to:1<arguments.length?i:t}:{d:0})};function Jn(t,i,o){var l=ct(i,o);if(!isNaN(l)){if(0<l)throw RangeError();if(ai(t))return _(t,{from:i,to:o,d:1});var f=t.l,l=t.r;if(ct(o,t.from)<0)return f?Jn(f,i,o):t.l={from:i,to:o,d:1,l:null,r:null},Qi(t);if(0<ct(i,t.to))return l?Jn(l,i,o):t.r={from:i,to:o,d:1,l:null,r:null},Qi(t);ct(i,t.from)<0&&(t.from=i,t.l=null,t.d=l?l.d+1:1),0<ct(o,t.to)&&(t.to=o,t.r=null,t.d=t.l?t.l.d+1:1),o=!t.r,f&&!t.l&&Qn(t,f),l&&o&&Qn(t,l)}}function Qn(t,i){ai(i)||function o(l,R){var d=R.from,g=R.to,D=R.l,R=R.r;Jn(l,d,g),D&&o(l,D),R&&o(l,R)}(t,i)}function yr(t,i){var o=oi(i),l=o.next();if(l.done)return!1;for(var f=l.value,d=oi(t),g=d.next(f.from),D=g.value;!l.done&&!g.done;){if(ct(D.from,f.to)<=0&&0<=ct(D.to,f.from))return!0;ct(f.from,D.from)<0?f=(l=o.next(D.from)).value:D=(g=d.next(f.from)).value}return!1}function oi(t){var i=ai(t)?null:{s:0,n:t};return{next:function(o){for(var l=0<arguments.length;i;)switch(i.s){case 0:if(i.s=1,l)for(;i.n.l&&ct(o,i.n.from)<0;)i={up:i,n:i.n.l,s:1};else for(;i.n.l;)i={up:i,n:i.n.l,s:1};case 1:if(i.s=2,!l||ct(o,i.n.to)<=0)return{value:i.n,done:!1};case 2:if(i.n.r){i.s=3,i={up:i,n:i.n.r,s:0};continue}case 3:i=i.up}return{done:!0}}}}function Qi(t){var i,o,l=(((i=t.r)===null||i===void 0?void 0:i.d)||0)-(((o=t.l)===null||o===void 0?void 0:o.d)||0),f=1<l?"r":l<-1?"l":"";f&&(i=f=="r"?"l":"r",o=r({},t),l=t[f],t.from=l.from,t.to=l.to,t[f]=l[f],o[f]=l[i],(t[i]=o).d=$i(o)),t.d=$i(t)}function $i(o){var i=o.r,o=o.l;return(i?o?Math.max(i.d,o.d):i.d:o?o.d:0)+1}function br(t,i){return c(i).forEach(function(o){t[o]?Qn(t[o],i[o]):t[o]=function l(f){var d,g,D={};for(d in f)E(f,d)&&(g=f[d],D[d]=!g||typeof g!="object"||Fe.has(g.constructor)?g:l(g));return D}(i[o])}),t}function si(t,i){return t.all||i.all||Object.keys(t).some(function(o){return i[o]&&yr(i[o],t[o])})}K(jt.prototype,((nn={add:function(t){return Qn(this,t),this},addKey:function(t){return Jn(this,t,t),this},addKeys:function(t){var i=this;return t.forEach(function(o){return Jn(i,o,o)}),this}})[ve]=function(){return oi(this)},nn));var On={},li={},ui=!1;function wr(t){br(li,t),ui||(ui=!0,setTimeout(function(){ui=!1,ci(li,!(li={}))},0))}function ci(t,i){i===void 0&&(i=!1);var o=new Set;if(t.all)for(var l=0,f=Object.values(On);l<f.length;l++)Xi(g=f[l],t,o,i);else for(var d in t){var g,D=/^idb\:\/\/(.*)\/(.*)\//.exec(d);D&&(d=D[1],D=D[2],(g=On["idb://".concat(d,"/").concat(D)])&&Xi(g,t,o,i))}o.forEach(function(R){return R()})}function Xi(t,i,o,l){for(var f=[],d=0,g=Object.entries(t.queries.query);d<g.length;d++){for(var D=g[d],R=D[0],C=[],U=0,S=D[1];U<S.length;U++){var q=S[U];si(i,q.obsSet)?q.subscribers.forEach(function(F){return o.add(F)}):l&&C.push(q)}l&&f.push([R,C])}if(l)for(var I=0,j=f;I<j.length;I++){var V=j[I],R=V[0],C=V[1];t.queries.query[R]=C}}function fs(t){var i=t._state,o=t._deps.indexedDB;if(i.isBeingOpened||t.idbdb)return i.dbReadyPromise.then(function(){return i.dbOpenError?Et(i.dbOpenError):t});i.isBeingOpened=!0,i.dbOpenError=null,i.openComplete=!1;var l=i.openCanceller,f=Math.round(10*t.verno),d=!1;function g(){if(i.openCanceller!==l)throw new H.DatabaseClosed("db.open() was cancelled")}function D(){return new P(function(q,I){if(g(),!o)throw new H.MissingAPI;var j=t.name,V=i.autoSchema||!f?o.open(j):o.open(j,f);if(!V)throw new H.MissingAPI;V.onerror=cn(I),V.onblocked=ut(t._fireOnBlocked),V.onupgradeneeded=ut(function(F){var Y;U=V.transaction,i.autoSchema&&!t._options.allowEmptyDB?(V.onerror=Wn,U.abort(),V.result.close(),(Y=o.deleteDatabase(j)).onsuccess=Y.onerror=ut(function(){I(new H.NoSuchDatabase("Database ".concat(j," doesnt exist")))})):(U.onerror=cn(I),F=F.oldVersion>Math.pow(2,62)?0:F.oldVersion,S=F<1,t.idbdb=V.result,d&&us(t,U),ls(t,F/10,U,I))},I),V.onsuccess=ut(function(){U=null;var F,Y,$,ee,re,me=t.idbdb=V.result,Me=T(me.objectStoreNames);if(0<Me.length)try{var we=me.transaction((ee=Me).length===1?ee[0]:ee,"readonly");if(i.autoSchema)Y=me,$=we,(F=t).verno=Y.version/10,$=F._dbSchema=gr(0,Y,$),F._storeNames=T(Y.objectStoreNames,0),pr(F,[F._allTables],c($),$);else if(vr(t,t._dbSchema,we),((re=ei(gr(0,(re=t).idbdb,we),re._dbSchema)).add.length||re.change.some(function(Ae){return Ae.add.length||Ae.change.length}))&&!d)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),me.close(),f=me.version+1,d=!0,q(D());hr(t,we)}catch{}Bn.push(t),me.onversionchange=ut(function(Ae){i.vcFired=!0,t.on("versionchange").fire(Ae)}),me.onclose=ut(function(Ae){t.on("close").fire(Ae)}),S&&(re=t._deps,we=j,me=re.indexedDB,re=re.IDBKeyRange,ri(me)||we===lr||ni(me,re).put({name:we}).catch(Be)),q()},I)}).catch(function(q){switch(q==null?void 0:q.name){case"UnknownError":if(0<i.PR1398_maxLoop)return i.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),D();break;case"VersionError":if(0<f)return f=0,D()}return P.reject(q)})}var R,C=i.dbReadyResolve,U=null,S=!1;return P.race([l,(typeof navigator>"u"?P.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(q){function I(){return indexedDB.databases().finally(q)}R=setInterval(I,100),I()}).finally(function(){return clearInterval(R)}):Promise.resolve()).then(D)]).then(function(){return g(),i.onReadyBeingFired=[],P.resolve(ii(function(){return t.on.ready.fire(t.vip)})).then(function q(){if(0<i.onReadyBeingFired.length){var I=i.onReadyBeingFired.reduce(kt,Be);return i.onReadyBeingFired=[],P.resolve(ii(function(){return I(t.vip)})).then(q)}})}).finally(function(){i.openCanceller===l&&(i.onReadyBeingFired=null,i.isBeingOpened=!1)}).catch(function(q){i.dbOpenError=q;try{U&&U.abort()}catch{}return l===i.openCanceller&&t._close(),Et(q)}).finally(function(){i.openComplete=!0,C()}).then(function(){var q;return S&&(q={},t.tables.forEach(function(I){I.schema.indexes.forEach(function(j){j.name&&(q["idb://".concat(t.name,"/").concat(I.name,"/").concat(j.name)]=new jt(-1/0,[[[]]]))}),q["idb://".concat(t.name,"/").concat(I.name,"/")]=q["idb://".concat(t.name,"/").concat(I.name,"/:dels")]=new jt(-1/0,[[[]]])}),wn(Gn).fire(q),ci(q,!0)),t})}function fi(t){function i(d){return t.next(d)}var o=f(i),l=f(function(d){return t.throw(d)});function f(d){return function(R){var D=d(R),R=D.value;return D.done?R:R&&typeof R.then=="function"?R.then(o,l):v(R)?Promise.all(R).then(o,l):o(R)}}return f(i)()}function kr(t,i,o){for(var l=v(t)?t.slice():[t],f=0;f<o;++f)l.push(i);return l}var ds={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return r(r({},t),{table:function(i){var o=t.table(i),l=o.schema,f={},d=[];function g(S,q,I){var j=Zn(S),V=f[j]=f[j]||[],F=S==null?0:typeof S=="string"?1:S.length,Y=0<q,Y=r(r({},I),{name:Y?"".concat(j,"(virtual-from:").concat(I.name,")"):I.name,lowLevelIndex:I,isVirtual:Y,keyTail:q,keyLength:F,extractKey:$r(S),unique:!Y&&I.unique});return V.push(Y),Y.isPrimaryKey||d.push(Y),1<F&&g(F===2?S[0]:S.slice(0,F-1),q+1,I),V.sort(function($,ee){return $.keyTail-ee.keyTail}),Y}i=g(l.primaryKey.keyPath,0,l.primaryKey),f[":id"]=[i];for(var D=0,R=l.indexes;D<R.length;D++){var C=R[D];g(C.keyPath,0,C)}function U(S){var q,I=S.query.index;return I.isVirtual?r(r({},S),{query:{index:I.lowLevelIndex,range:(q=S.query.range,I=I.keyTail,{type:q.type===1?2:q.type,lower:kr(q.lower,q.lowerOpen?t.MAX_KEY:t.MIN_KEY,I),lowerOpen:!0,upper:kr(q.upper,q.upperOpen?t.MIN_KEY:t.MAX_KEY,I),upperOpen:!0})}}):S}return r(r({},o),{schema:r(r({},l),{primaryKey:i,indexes:d,getIndexByKeyPath:function(S){return(S=f[Zn(S)])&&S[0]}}),count:function(S){return o.count(U(S))},query:function(S){return o.query(U(S))},openCursor:function(S){var q=S.query.index,I=q.keyTail,j=q.isVirtual,V=q.keyLength;return j?o.openCursor(U(S)).then(function(Y){return Y&&F(Y)}):o.openCursor(S);function F(Y){return Object.create(Y,{continue:{value:function($){$!=null?Y.continue(kr($,S.reverse?t.MAX_KEY:t.MIN_KEY,I)):S.unique?Y.continue(Y.key.slice(0,V).concat(S.reverse?t.MIN_KEY:t.MAX_KEY,I)):Y.continue()}},continuePrimaryKey:{value:function($,ee){Y.continuePrimaryKey(kr($,t.MAX_KEY,I),ee)}},primaryKey:{get:function(){return Y.primaryKey}},key:{get:function(){var $=Y.key;return V===1?$[0]:$.slice(0,V)}},value:{get:function(){return Y.value}}})}}})}})}};function di(t,i,o,l){return o=o||{},l=l||"",c(t).forEach(function(f){var d,g,D;E(i,f)?(d=t[f],g=i[f],typeof d=="object"&&typeof g=="object"&&d&&g?(D=Te(d))!==Te(g)?o[l+f]=i[f]:D==="Object"?di(d,g,o,l+f+"."):d!==g&&(o[l+f]=i[f]):d!==g&&(o[l+f]=i[f])):o[l+f]=void 0}),c(i).forEach(function(f){E(t,f)||(o[l+f]=i[f])}),o}function hi(t,i){return i.type==="delete"?i.keys:i.keys||i.values.map(t.extractKey)}var hs={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return r(r({},t),{table:function(i){var o=t.table(i),l=o.schema.primaryKey;return r(r({},o),{mutate:function(f){var d=Se.trans,g=d.table(i).hook,D=g.deleting,R=g.creating,C=g.updating;switch(f.type){case"add":if(R.fire===Be)break;return d._promise("readwrite",function(){return U(f)},!0);case"put":if(R.fire===Be&&C.fire===Be)break;return d._promise("readwrite",function(){return U(f)},!0);case"delete":if(D.fire===Be)break;return d._promise("readwrite",function(){return U(f)},!0);case"deleteRange":if(D.fire===Be)break;return d._promise("readwrite",function(){return function S(q,I,j){return o.query({trans:q,values:!1,query:{index:l,range:I},limit:j}).then(function(V){var F=V.result;return U({type:"delete",keys:F,trans:q}).then(function(Y){return 0<Y.numFailures?Promise.reject(Y.failures[0]):F.length<j?{failures:[],numFailures:0,lastResult:void 0}:S(q,r(r({},I),{lower:F[F.length-1],lowerOpen:!0}),j)})})}(f.trans,f.range,1e4)},!0)}return o.mutate(f);function U(S){var q,I,j,V=Se.trans,F=S.keys||hi(l,S);if(!F)throw new Error("Keys missing");return(S=S.type==="add"||S.type==="put"?r(r({},S),{keys:F}):r({},S)).type!=="delete"&&(S.values=s([],S.values)),S.keys&&(S.keys=s([],S.keys)),q=o,j=F,((I=S).type==="add"?Promise.resolve([]):q.getMany({trans:I.trans,keys:j,cache:"immutable"})).then(function(Y){var $=F.map(function(ee,re){var me,Me,we,Ae=Y[re],Ne={onerror:null,onsuccess:null};return S.type==="delete"?D.fire.call(Ne,ee,Ae,V):S.type==="add"||Ae===void 0?(me=R.fire.call(Ne,ee,S.values[re],V),ee==null&&me!=null&&(S.keys[re]=ee=me,l.outbound||X(S.values[re],l.keyPath,ee))):(me=di(Ae,S.values[re]),(Me=C.fire.call(Ne,me,ee,Ae,V))&&(we=S.values[re],Object.keys(Me).forEach(function(Pe){E(we,Pe)?we[Pe]=Me[Pe]:X(we,Pe,Me[Pe])}))),Ne});return o.mutate(S).then(function(ee){for(var re=ee.failures,me=ee.results,Me=ee.numFailures,ee=ee.lastResult,we=0;we<F.length;++we){var Ae=(me||F)[we],Ne=$[we];Ae==null?Ne.onerror&&Ne.onerror(re[we]):Ne.onsuccess&&Ne.onsuccess(S.type==="put"&&Y[we]?S.values[we]:Ae)}return{failures:re,results:me,numFailures:Me,lastResult:ee}}).catch(function(ee){return $.forEach(function(re){return re.onerror&&re.onerror(ee)}),Promise.reject(ee)})})}}})}})}};function ea(t,i,o){try{if(!i||i.keys.length<t.length)return null;for(var l=[],f=0,d=0;f<i.keys.length&&d<t.length;++f)ct(i.keys[f],t[d])===0&&(l.push(o?ye(i.values[f]):i.values[f]),++d);return l.length===t.length?l:null}catch{return null}}var ps={stack:"dbcore",level:-1,create:function(t){return{table:function(i){var o=t.table(i);return r(r({},o),{getMany:function(l){if(!l.cache)return o.getMany(l);var f=ea(l.keys,l.trans._cache,l.cache==="clone");return f?P.resolve(f):o.getMany(l).then(function(d){return l.trans._cache={keys:l.keys,values:l.cache==="clone"?ye(d):d},d})},mutate:function(l){return l.type!=="add"&&(l.trans._cache=null),o.mutate(l)}})}}}};function ta(t,i){return t.trans.mode==="readonly"&&!!t.subscr&&!t.trans.explicit&&t.trans.db._options.cache!=="disabled"&&!i.schema.primaryKey.outbound}function na(t,i){switch(t){case"query":return i.values&&!i.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var ms={stack:"dbcore",level:0,name:"Observability",create:function(t){var i=t.schema.name,o=new jt(t.MIN_KEY,t.MAX_KEY);return r(r({},t),{transaction:function(l,f,d){if(Se.subscr&&f!=="readonly")throw new H.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Se.querier));return t.transaction(l,f,d)},table:function(l){var f=t.table(l),d=f.schema,g=d.primaryKey,S=d.indexes,D=g.extractKey,R=g.outbound,C=g.autoIncrement&&S.filter(function(I){return I.compound&&I.keyPath.includes(g.keyPath)}),U=r(r({},f),{mutate:function(I){function j(Pe){return Pe="idb://".concat(i,"/").concat(l,"/").concat(Pe),ee[Pe]||(ee[Pe]=new jt)}var V,F,Y,$=I.trans,ee=I.mutatedParts||(I.mutatedParts={}),re=j(""),me=j(":dels"),Me=I.type,Ne=I.type==="deleteRange"?[I.range]:I.type==="delete"?[I.keys]:I.values.length<50?[hi(g,I).filter(function(Pe){return Pe}),I.values]:[],we=Ne[0],Ae=Ne[1],Ne=I.trans._cache;return v(we)?(re.addKeys(we),(Ne=Me==="delete"||we.length===Ae.length?ea(we,Ne):null)||me.addKeys(we),(Ne||Ae)&&(V=j,F=Ne,Y=Ae,d.indexes.forEach(function(Pe){var Ge=V(Pe.name||"");function Ye(Je){return Je!=null?Pe.extractKey(Je):null}function Xe(Je){return Pe.multiEntry&&v(Je)?Je.forEach(function(on){return Ge.addKey(on)}):Ge.addKey(Je)}(F||Y).forEach(function(Je,Ut){var Qe=F&&Ye(F[Ut]),Ut=Y&&Ye(Y[Ut]);ct(Qe,Ut)!==0&&(Qe!=null&&Xe(Qe),Ut!=null&&Xe(Ut))})}))):we?(Ae={from:we.lower,to:we.upper},me.add(Ae),re.add(Ae)):(re.add(o),me.add(o),d.indexes.forEach(function(Pe){return j(Pe.name).add(o)})),f.mutate(I).then(function(Pe){return!we||I.type!=="add"&&I.type!=="put"||(re.addKeys(Pe.results),C&&C.forEach(function(Ge){var Ye=I.values.map(function(Je){return Ge.extractKey(Je)}),Xe=Ge.keyPath.findIndex(function(Je){return Je===g.keyPath});Pe.results.forEach(function(Je){return Ye[Xe]=Je}),j(Ge.name).addKeys(Ye)})),$.mutatedParts=br($.mutatedParts||{},ee),Pe})}}),S=function(j){var V=j.query,j=V.index,V=V.range;return[j,new jt((j=V.lower)!==null&&j!==void 0?j:t.MIN_KEY,(V=V.upper)!==null&&V!==void 0?V:t.MAX_KEY)]},q={get:function(I){return[g,new jt(I.key)]},getMany:function(I){return[g,new jt().addKeys(I.keys)]},count:S,query:S,openCursor:S};return c(q).forEach(function(I){U[I]=function(j){var V=Se.subscr,F=!!V,Y=ta(Se,f)&&na(I,j)?j.obsSet={}:V;if(F){var $=function(Ae){return Ae="idb://".concat(i,"/").concat(l,"/").concat(Ae),Y[Ae]||(Y[Ae]=new jt)},ee=$(""),re=$(":dels"),V=q[I](j),F=V[0],V=V[1];if((I==="query"&&F.isPrimaryKey&&!j.values?re:$(F.name||"")).add(V),!F.isPrimaryKey){if(I!=="count"){var me=I==="query"&&R&&j.values&&f.query(r(r({},j),{values:!1}));return f[I].apply(this,arguments).then(function(Ae){if(I==="query"){if(R&&j.values)return me.then(function(Ye){return Ye=Ye.result,ee.addKeys(Ye),Ae});var Ne=j.values?Ae.result.map(D):Ae.result;(j.values?ee:re).addKeys(Ne)}else if(I==="openCursor"){var Pe=Ae,Ge=j.values;return Pe&&Object.create(Pe,{key:{get:function(){return re.addKey(Pe.primaryKey),Pe.key}},primaryKey:{get:function(){var Ye=Pe.primaryKey;return re.addKey(Ye),Ye}},value:{get:function(){return Ge&&ee.addKey(Pe.primaryKey),Pe.value}}})}return Ae})}re.add(o)}}return f[I].apply(this,arguments)}}),U}})}};function ra(t,i,o){if(o.numFailures===0)return i;if(i.type==="deleteRange")return null;var l=i.keys?i.keys.length:"values"in i&&i.values?i.values.length:1;return o.numFailures===l?null:(i=r({},i),v(i.keys)&&(i.keys=i.keys.filter(function(f,d){return!(d in o.failures)})),"values"in i&&v(i.values)&&(i.values=i.values.filter(function(f,d){return!(d in o.failures)})),i)}function pi(t,i){return o=t,((l=i).lower===void 0||(l.lowerOpen?0<ct(o,l.lower):0<=ct(o,l.lower)))&&(t=t,(i=i).upper===void 0||(i.upperOpen?ct(t,i.upper)<0:ct(t,i.upper)<=0));var o,l}function ia(t,i,q,l,f,d){if(!q||q.length===0)return t;var g=i.query.index,D=g.multiEntry,R=i.query.range,C=l.schema.primaryKey.extractKey,U=g.extractKey,S=(g.lowLevelIndex||g).extractKey,q=q.reduce(function(I,j){var V=I,F=j.type==="add"||j.type==="put"?j.values.filter(function(re){return re=U(re),D&&v(re)?re.some(function(me){return pi(me,R)}):pi(re,R)}).map(function(re){return re=ye(re),d&&Object.freeze(re),re}):[];switch(j.type){case"add":V=I.concat(i.values?F:F.map(function(me){return C(me)}));break;case"put":var Y=new jt().addKeys(j.values.map(function(me){return C(me)})),V=I.filter(function(me){return me=i.values?C(me):me,!yr(new jt(me),Y)}).concat(i.values?F:F.map(function(me){return C(me)}));break;case"delete":var $=new jt().addKeys(j.keys);V=I.filter(function(me){return me=i.values?C(me):me,!yr(new jt(me),$)});break;case"deleteRange":var ee=j.range;V=I.filter(function(me){return!pi(C(me),ee)})}return V},t);return q===t?t:(q.sort(function(I,j){return ct(S(I),S(j))||ct(C(I),C(j))}),i.limit&&i.limit<1/0&&(q.length>i.limit?q.length=i.limit:t.length===i.limit&&q.length<i.limit&&(f.dirty=!0)),d?Object.freeze(q):q)}function aa(t,i){return ct(t.lower,i.lower)===0&&ct(t.upper,i.upper)===0&&!!t.lowerOpen==!!i.lowerOpen&&!!t.upperOpen==!!i.upperOpen}function gs(t,i){return function(o,l,f,d){if(o===void 0)return l!==void 0?-1:0;if(l===void 0)return 1;if((l=ct(o,l))===0){if(f&&d)return 0;if(f)return 1;if(d)return-1}return l}(t.lower,i.lower,t.lowerOpen,i.lowerOpen)<=0&&0<=function(o,l,f,d){if(o===void 0)return l!==void 0?1:0;if(l===void 0)return-1;if((l=ct(o,l))===0){if(f&&d)return 0;if(f)return-1;if(d)return 1}return l}(t.upper,i.upper,t.upperOpen,i.upperOpen)}function vs(t,i,o,l){t.subscribers.add(o),l.addEventListener("abort",function(){var f,d;t.subscribers.delete(o),t.subscribers.size===0&&(f=t,d=i,setTimeout(function(){f.subscribers.size===0&&je(d,f)},3e3))})}var _s={stack:"dbcore",level:0,name:"Cache",create:function(t){var i=t.schema.name;return r(r({},t),{transaction:function(o,l,f){var d,g,D=t.transaction(o,l,f);return l==="readwrite"&&(g=(d=new AbortController).signal,f=function(R){return function(){if(d.abort(),l==="readwrite"){for(var C=new Set,U=0,S=o;U<S.length;U++){var q=S[U],I=On["idb://".concat(i,"/").concat(q)];if(I){var j=t.table(q),V=I.optimisticOps.filter(function(Ge){return Ge.trans===D});if(D._explicit&&R&&D.mutatedParts)for(var F=0,Y=Object.values(I.queries.query);F<Y.length;F++)for(var $=0,ee=(Me=Y[F]).slice();$<ee.length;$++)si((we=ee[$]).obsSet,D.mutatedParts)&&(je(Me,we),we.subscribers.forEach(function(Ge){return C.add(Ge)}));else if(0<V.length){I.optimisticOps=I.optimisticOps.filter(function(Ge){return Ge.trans!==D});for(var re=0,me=Object.values(I.queries.query);re<me.length;re++)for(var Me,we,Ae,Ne=0,Pe=(Me=me[re]).slice();Ne<Pe.length;Ne++)(we=Pe[Ne]).res!=null&&D.mutatedParts&&(R&&!we.dirty?(Ae=Object.isFrozen(we.res),Ae=ia(we.res,we.req,V,j,we,Ae),we.dirty?(je(Me,we),we.subscribers.forEach(function(Ge){return C.add(Ge)})):Ae!==we.res&&(we.res=Ae,we.promise=P.resolve({result:Ae}))):(we.dirty&&je(Me,we),we.subscribers.forEach(function(Ge){return C.add(Ge)})))}}}C.forEach(function(Ge){return Ge()})}}},D.addEventListener("abort",f(!1),{signal:g}),D.addEventListener("error",f(!1),{signal:g}),D.addEventListener("complete",f(!0),{signal:g})),D},table:function(o){var l=t.table(o),f=l.schema.primaryKey;return r(r({},l),{mutate:function(d){var g=Se.trans;if(f.outbound||g.db._options.cache==="disabled"||g.explicit)return l.mutate(d);var D=On["idb://".concat(i,"/").concat(o)];return D?(g=l.mutate(d),d.type!=="add"&&d.type!=="put"||!(50<=d.values.length||hi(f,d).some(function(R){return R==null}))?(D.optimisticOps.push(d),d.mutatedParts&&wr(d.mutatedParts),g.then(function(R){0<R.numFailures&&(je(D.optimisticOps,d),(R=ra(0,d,R))&&D.optimisticOps.push(R),d.mutatedParts&&wr(d.mutatedParts))}),g.catch(function(){je(D.optimisticOps,d),d.mutatedParts&&wr(d.mutatedParts)})):g.then(function(R){var C=ra(0,r(r({},d),{values:d.values.map(function(I,S){var q,I=(q=f.keyPath)!==null&&q!==void 0&&q.includes(".")?ye(I):r({},I);return X(I,f.keyPath,R.results[S]),I})}),R);D.optimisticOps.push(C),queueMicrotask(function(){return d.mutatedParts&&wr(d.mutatedParts)})}),g):l.mutate(d)},query:function(d){if(!ta(Se,l)||!na("query",d))return l.query(d);var g=((C=Se.trans)===null||C===void 0?void 0:C.db._options.cache)==="immutable",S=Se,D=S.requery,R=S.signal,C=function(j,V,F,Y){var $=On["idb://".concat(j,"/").concat(V)];if(!$)return[];if(!(V=$.queries[F]))return[null,!1,$,null];var ee=V[(Y.query?Y.query.index.name:null)||""];if(!ee)return[null,!1,$,null];switch(F){case"query":var re=ee.find(function(me){return me.req.limit===Y.limit&&me.req.values===Y.values&&aa(me.req.query.range,Y.query.range)});return re?[re,!0,$,ee]:[ee.find(function(me){return("limit"in me.req?me.req.limit:1/0)>=Y.limit&&(!Y.values||me.req.values)&&gs(me.req.query.range,Y.query.range)}),!1,$,ee];case"count":return re=ee.find(function(me){return aa(me.req.query.range,Y.query.range)}),[re,!!re,$,ee]}}(i,o,"query",d),U=C[0],S=C[1],q=C[2],I=C[3];return U&&S?U.obsSet=d.obsSet:(S=l.query(d).then(function(j){var V=j.result;if(U&&(U.res=V),g){for(var F=0,Y=V.length;F<Y;++F)Object.freeze(V[F]);Object.freeze(V)}else j.result=ye(V);return j}).catch(function(j){return I&&U&&je(I,U),Promise.reject(j)}),U={obsSet:d.obsSet,promise:S,subscribers:new Set,type:"query",req:d,dirty:!1},I?I.push(U):(I=[U],(q=q||(On["idb://".concat(i,"/").concat(o)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[d.query.index.name||""]=I)),vs(U,I,D,R),U.promise.then(function(j){return{result:ia(j.result,d,q==null?void 0:q.optimisticOps,l,U,g)}})}})}})}};function Dr(t,i){return new Proxy(t,{get:function(o,l,f){return l==="db"?i:Reflect.get(o,l,f)}})}var gn=(St.prototype.version=function(t){if(isNaN(t)||t<.1)throw new H.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new H.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var i=this._versions,o=i.filter(function(l){return l._cfg.version===t})[0];return o||(o=new this.Version(t),i.push(o),i.sort(ss),o.stores({}),this._state.autoSchema=!1,o)},St.prototype._whenReady=function(t){var i=this;return this.idbdb&&(this._state.openComplete||Se.letThrough||this._vip)?t():new P(function(o,l){if(i._state.openComplete)return l(new H.DatabaseClosed(i._state.dbOpenError));if(!i._state.isBeingOpened){if(!i._state.autoOpen)return void l(new H.DatabaseClosed);i.open().catch(Be)}i._state.dbReadyPromise.then(o,l)}).then(t)},St.prototype.use=function(t){var i=t.stack,o=t.create,l=t.level,f=t.name;return f&&this.unuse({stack:i,name:f}),t=this._middlewares[i]||(this._middlewares[i]=[]),t.push({stack:i,create:o,level:l??10,name:f}),t.sort(function(d,g){return d.level-g.level}),this},St.prototype.unuse=function(t){var i=t.stack,o=t.name,l=t.create;return i&&this._middlewares[i]&&(this._middlewares[i]=this._middlewares[i].filter(function(f){return l?f.create!==l:!!o&&f.name!==o})),this},St.prototype.open=function(){var t=this;return Sn(it,function(){return fs(t)})},St.prototype._close=function(){var t=this._state,i=Bn.indexOf(this);if(0<=i&&Bn.splice(i,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}t.isBeingOpened||(t.dbReadyPromise=new P(function(o){t.dbReadyResolve=o}),t.openCanceller=new P(function(o,l){t.cancelOpen=l}))},St.prototype.close=function(o){var i=(o===void 0?{disableAutoOpen:!0}:o).disableAutoOpen,o=this._state;i?(o.isBeingOpened&&o.cancelOpen(new H.DatabaseClosed),this._close(),o.autoOpen=!1,o.dbOpenError=new H.DatabaseClosed):(this._close(),o.autoOpen=this._options.autoOpen||o.isBeingOpened,o.openComplete=!1,o.dbOpenError=null)},St.prototype.delete=function(t){var i=this;t===void 0&&(t={disableAutoOpen:!0});var o=0<arguments.length&&typeof arguments[0]!="object",l=this._state;return new P(function(f,d){function g(){i.close(t);var D=i._deps.indexedDB.deleteDatabase(i.name);D.onsuccess=ut(function(){var R,C,U;R=i._deps,C=i.name,U=R.indexedDB,R=R.IDBKeyRange,ri(U)||C===lr||ni(U,R).delete(C).catch(Be),f()}),D.onerror=cn(d),D.onblocked=i._fireOnBlocked}if(o)throw new H.InvalidArgument("Invalid closeOptions argument to db.delete()");l.isBeingOpened?l.dbReadyPromise.then(g):g()})},St.prototype.backendDB=function(){return this.idbdb},St.prototype.isOpen=function(){return this.idbdb!==null},St.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},St.prototype.hasFailed=function(){return this._state.dbOpenError!==null},St.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(St.prototype,"tables",{get:function(){var t=this;return c(this._allTables).map(function(i){return t._allTables[i]})},enumerable:!1,configurable:!0}),St.prototype.transaction=function(){var t=(function(i,o,l){var f=arguments.length;if(f<2)throw new H.InvalidArgument("Too few arguments");for(var d=new Array(f-1);--f;)d[f-1]=arguments[f];return l=d.pop(),[i,be(d),l]}).apply(this,arguments);return this._transaction.apply(this,t)},St.prototype._transaction=function(t,i,o){var l=this,f=Se.trans;f&&f.db===this&&t.indexOf("!")===-1||(f=null);var d,g,D=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");try{if(g=i.map(function(C){if(C=C instanceof l.Table?C.name:C,typeof C!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return C}),t=="r"||t===xr)d=xr;else{if(t!="rw"&&t!=Hr)throw new H.InvalidArgument("Invalid transaction mode: "+t);d=Hr}if(f){if(f.mode===xr&&d===Hr){if(!D)throw new H.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");f=null}f&&g.forEach(function(C){if(f&&f.storeNames.indexOf(C)===-1){if(!D)throw new H.SubTransaction("Table "+C+" not included in parent transaction.");f=null}}),D&&f&&!f.active&&(f=null)}}catch(C){return f?f._promise(null,function(U,S){S(C)}):Et(C)}var R=(function C(U,S,q,I,j){return P.resolve().then(function(){var V=Se.transless||Se,F=U._createTransaction(S,q,U._dbSchema,I);if(F.explicit=!0,V={trans:F,transless:V},I)F.idbtrans=I.idbtrans;else try{F.create(),F.idbtrans._explicit=!0,U._state.PR1398_maxLoop=3}catch(ee){return ee.name===oe.InvalidState&&U.isOpen()&&0<--U._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),U.close({disableAutoOpen:!1}),U.open().then(function(){return C(U,S,q,null,j)})):Et(ee)}var Y,$=B(j);return $&&Nn(),V=P.follow(function(){var ee;(Y=j.call(F,F))&&($?(ee=_n.bind(null,null),Y.then(ee,ee)):typeof Y.next=="function"&&typeof Y.throw=="function"&&(Y=fi(Y)))},V),(Y&&typeof Y.then=="function"?P.resolve(Y).then(function(ee){return F.active?ee:Et(new H.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):V.then(function(){return Y})).then(function(ee){return I&&F._resolve(),F._completion.then(function(){return ee})}).catch(function(ee){return F._reject(ee),Et(ee)})})}).bind(null,this,d,g,f,o);return f?f._promise(d,R,"lock"):Se.trans?Sn(Se.transless,function(){return l._whenReady(R)}):this._whenReady(R)},St.prototype.table=function(t){if(!E(this._allTables,t))throw new H.InvalidTable("Table ".concat(t," does not exist"));return this._allTables[t]},St);function St(t,i){var o=this;this._middlewares={},this.verno=0;var l=St.dependencies;this._options=i=r({addons:St.addons,autoOpen:!0,indexedDB:l.indexedDB,IDBKeyRange:l.IDBKeyRange,cache:"cloned"},i),this._deps={indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},l=i.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var f,d,g,D,R,C={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Be,dbReadyPromise:null,cancelOpen:Be,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:i.autoOpen};C.dbReadyPromise=new P(function(S){C.dbReadyResolve=S}),C.openCanceller=new P(function(S,q){C.cancelOpen=q}),this._state=C,this.name=t,this.on=zn(this,"populate","blocked","versionchange","close",{ready:[kt,Be]}),this.on.ready.subscribe=J(this.on.ready.subscribe,function(S){return function(q,I){St.vip(function(){var j,V=o._state;V.openComplete?(V.dbOpenError||P.resolve().then(q),I&&S(q)):V.onReadyBeingFired?(V.onReadyBeingFired.push(q),I&&S(q)):(S(q),j=o,I||S(function F(){j.on.ready.unsubscribe(q),j.on.ready.unsubscribe(F)}))})}}),this.Collection=(f=this,xn(es.prototype,function(Y,F){this.db=f;var I=Ki,j=null;if(F)try{I=F()}catch($){j=$}var V=Y._ctx,F=V.table,Y=F.hook.reading.fire;this._ctx={table:F,index:V.index,isPrimKey:!V.index||F.schema.primKey.keyPath&&V.index===F.schema.primKey.name,range:I,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:j,or:V.or,valueMapper:Y!==$e?Y:null}})),this.Table=(d=this,xn(qi.prototype,function(S,q,I){this.db=d,this._tx=I,this.name=S,this.schema=q,this.hook=d._allTables[S]?d._allTables[S].hook:zn(null,{creating:[We,Be],reading:[lt,$e],updating:[_e,Be],deleting:[qe,Be]})})),this.Transaction=(g=this,xn(rs.prototype,function(S,q,I,j,V){var F=this;this.db=g,this.mode=S,this.storeNames=q,this.schema=I,this.chromeTransactionDurability=j,this.idbtrans=null,this.on=zn(this,"complete","error","abort"),this.parent=V||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new P(function(Y,$){F._resolve=Y,F._reject=$}),this._completion.then(function(){F.active=!1,F.on.complete.fire()},function(Y){var $=F.active;return F.active=!1,F.on.error.fire(Y),F.parent?F.parent._reject(Y):$&&F.idbtrans&&F.idbtrans.abort(),Et(Y)})})),this.Version=(D=this,xn(cs.prototype,function(S){this.db=D,this._cfg={version:S,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(R=this,xn(Wi.prototype,function(S,q,I){if(this.db=R,this._ctx={table:S,index:q===":id"?null:q,or:I},this._cmp=this._ascending=ct,this._descending=function(j,V){return ct(V,j)},this._max=function(j,V){return 0<ct(j,V)?j:V},this._min=function(j,V){return ct(j,V)<0?j:V},this._IDBKeyRange=R._deps.IDBKeyRange,!this._IDBKeyRange)throw new H.MissingAPI})),this.on("versionchange",function(S){0<S.newVersion?console.warn("Another connection wants to upgrade database '".concat(o.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(o.name,"'. Closing db now to resume the delete request.")),o.close({disableAutoOpen:!1})}),this.on("blocked",function(S){!S.newVersion||S.newVersion<S.oldVersion?console.warn("Dexie.delete('".concat(o.name,"') was blocked")):console.warn("Upgrade '".concat(o.name,"' blocked by other connection holding version ").concat(S.oldVersion/10))}),this._maxKey=Yn(i.IDBKeyRange),this._createTransaction=function(S,q,I,j){return new o.Transaction(S,q,I,o._options.chromeTransactionDurability,j)},this._fireOnBlocked=function(S){o.on("blocked").fire(S),Bn.filter(function(q){return q.name===o.name&&q!==o&&!q._state.vcFired}).map(function(q){return q.on("versionchange").fire(S)})},this.use(ps),this.use(_s),this.use(ms),this.use(ds),this.use(hs);var U=new Proxy(this,{get:function(S,q,I){if(q==="_vip")return!0;if(q==="table")return function(V){return Dr(o.table(V),U)};var j=Reflect.get(S,q,I);return j instanceof qi?Dr(j,U):q==="tables"?j.map(function(V){return Dr(V,U)}):q==="_createTransaction"?function(){return Dr(j.apply(this,arguments),U)}:j}});this.vip=U,l.forEach(function(S){return S(o)})}var Er,nn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",ys=(mi.prototype.subscribe=function(t,i,o){return this._subscribe(t&&typeof t!="function"?t:{next:t,error:i,complete:o})},mi.prototype[nn]=function(){return this},mi);function mi(t){this._subscribe=t}try{Er={indexedDB:u.indexedDB||u.mozIndexedDB||u.webkitIndexedDB||u.msIndexedDB,IDBKeyRange:u.IDBKeyRange||u.webkitIDBKeyRange}}catch{Er={indexedDB:null,IDBKeyRange:null}}function oa(t){var i,o=!1,l=new ys(function(f){var d=B(t),g,D=!1,R={},C={},U={get closed(){return D},unsubscribe:function(){D||(D=!0,g&&g.abort(),S&&wn.storagemutated.unsubscribe(I))}};f.start&&f.start(U);var S=!1,q=function(){return zr(j)},I=function(V){br(R,V),si(C,R)&&q()},j=function(){var V,F,Y;!D&&Er.indexedDB&&(R={},V={},g&&g.abort(),g=new AbortController,Y=function($){var ee=Wt();try{d&&Nn();var re=vn(t,$);return re=d?re.finally(_n):re}finally{ee&&Pt()}}(F={subscr:V,signal:g.signal,requery:q,querier:t,trans:null}),Promise.resolve(Y).then(function($){o=!0,i=$,D||F.signal.aborted||(R={},function(ee){for(var re in ee)if(E(ee,re))return;return 1}(C=V)||S||(wn(Gn,I),S=!0),zr(function(){return!D&&f.next&&f.next($)}))},function($){o=!1,["DatabaseClosedError","AbortError"].includes($==null?void 0:$.name)||D||zr(function(){D||f.error&&f.error($)})}))};return setTimeout(q,0),U});return l.hasValue=function(){return o},l.getValue=function(){return i},l}var Pn=gn;function gi(t){var i=kn;try{kn=!0,wn.storagemutated.fire(t),ci(t,!0)}finally{kn=i}}K(Pn,r(r({},Le),{delete:function(t){return new Pn(t,{addons:[]}).delete()},exists:function(t){return new Pn(t,{addons:[]}).open().then(function(i){return i.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(t){try{return i=Pn.dependencies,o=i.indexedDB,i=i.IDBKeyRange,(ri(o)?Promise.resolve(o.databases()).then(function(l){return l.map(function(f){return f.name}).filter(function(f){return f!==lr})}):ni(o,i).toCollection().primaryKeys()).then(t)}catch{return Et(new H.MissingAPI)}var i,o},defineClass:function(){return function(t){_(this,t)}},ignoreTransaction:function(t){return Se.trans?Sn(Se.transless,t):t()},vip:ii,async:function(t){return function(){try{var i=fi(t.apply(this,arguments));return i&&typeof i.then=="function"?i:P.resolve(i)}catch(o){return Et(o)}}},spawn:function(t,i,o){try{var l=fi(t.apply(o,i||[]));return l&&typeof l.then=="function"?l:P.resolve(l)}catch(f){return Et(f)}},currentTransaction:{get:function(){return Se.trans||null}},waitFor:function(t,i){return i=P.resolve(typeof t=="function"?Pn.ignoreTransaction(t):t).timeout(i||6e4),Se.trans?Se.trans.waitFor(i):i},Promise:P,debug:{get:function(){return pt},set:function(t){Kt(t)}},derive:W,extend:_,props:K,override:J,Events:zn,on:wn,liveQuery:oa,extendObservabilitySet:br,getByKeyPath:ge,setByKeyPath:X,delByKeyPath:function(t,i){typeof i=="string"?X(t,i,void 0):"length"in i&&[].map.call(i,function(o){X(t,o,void 0)})},shallowClone:he,deepClone:ye,getObjectDiff:di,cmp:ct,asap:ce,minKey:-1/0,addons:[],connections:Bn,errnames:oe,dependencies:Er,cache:On,semVer:"4.0.7",version:"4.0.7".split(".").map(function(t){return parseInt(t)}).reduce(function(t,i,o){return t+i/Math.pow(10,2*o)})})),Pn.maxKey=Yn(Pn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(wn(Gn,function(t){kn||(t=new CustomEvent(Zr,{detail:t}),kn=!0,dispatchEvent(t),kn=!1)}),addEventListener(Zr,function(t){t=t.detail,kn||gi(t)}));var jn,kn=!1,sa=function(){};return typeof BroadcastChannel<"u"&&((sa=function(){(jn=new BroadcastChannel(Zr)).onmessage=function(t){return t.data&&gi(t.data)}})(),typeof jn.unref=="function"&&jn.unref(),wn(Gn,function(t){kn||jn.postMessage(t)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(t){if(!gn.disableBfCache&&t.persisted){pt&&console.debug("Dexie: handling persisted pagehide"),jn!=null&&jn.close();for(var i=0,o=Bn;i<o.length;i++)o[i].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(t){!gn.disableBfCache&&t.persisted&&(pt&&console.debug("Dexie: handling persisted pageshow"),sa(),gi({all:new jt(-1/0,[[]])}))})),P.rejectionMapper=function(t,i){return!t||t instanceof w||t instanceof TypeError||t instanceof SyntaxError||!t.name||!N[t.name]?t:(i=new N[t.name](i||t.message,t),"stack"in t&&ie(i,"stack",{get:function(){return this.inner.stack}}),i)},Kt(pt),r(gn,Object.freeze({__proto__:null,Dexie:gn,liveQuery:oa,Entity:Fi,cmp:ct,PropModSymbol:mn,PropModification:Hn,replacePrefix:function(t,i){return new Hn({replacePrefix:[t,i]})},add:function(t){return new Hn({add:t})},remove:function(t){return new Hn({remove:t})},default:gn,RangeSet:jt,mergeRanges:Qn,rangesOverlap:yr}),{default:gn}),gn})})(xo);var Hs=xo.exports;const Oi=zo(Hs),Ma=Symbol.for("Dexie"),Ur=globalThis[Ma]||(globalThis[Ma]=Oi);if(Oi.semVer!==Ur.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Oi.semVer} and ${Ur.semVer}`);const{liveQuery:qr,mergeRanges:vc,rangesOverlap:_c,RangeSet:yc,cmp:bc,Entity:wc,PropModSymbol:kc,PropModification:Dc,replacePrefix:Ec,add:Sc,remove:Tc}=Ur;var rr=(a=>(a.Accomodation="Accomodation",a.Food="Food",a.Transport="Transport",a.Other="Other",a))(rr||{});const Rt=new Ur("ExpensesDatabase");Rt.version(2).stores({trips:"++id, name, defaultCurrency, startDate, endDate",receipts:"++id, description, total, receiptDate, receiptType, currency, tripId, imageData"});const wt={GBP:{symbol:"Â£",name:"British Pound Sterling",symbol_native:"Â£",decimal_digits:2,rounding:0,code:"GBP",name_plural:"British pounds sterling"},USD:{symbol:"$",name:"US Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"USD",name_plural:"US dollars"},CAD:{symbol:"CA$",name:"Canadian Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"CAD",name_plural:"Canadian dollars"},EUR:{symbol:"â¬",name:"Euro",symbol_native:"â¬",decimal_digits:2,rounding:0,code:"EUR",name_plural:"euros"},AED:{symbol:"AED",name:"United Arab Emirates Dirham",symbol_native:"Ø¯.Ø¥.â",decimal_digits:2,rounding:0,code:"AED",name_plural:"UAE dirhams"},AFN:{symbol:"Af",name:"Afghan Afghani",symbol_native:"Ø",decimal_digits:0,rounding:0,code:"AFN",name_plural:"Afghan Afghanis"},ALL:{symbol:"ALL",name:"Albanian Lek",symbol_native:"Lek",decimal_digits:0,rounding:0,code:"ALL",name_plural:"Albanian lekÃ«"},AMD:{symbol:"AMD",name:"Armenian Dram",symbol_native:"Õ¤Ö.",decimal_digits:0,rounding:0,code:"AMD",name_plural:"Armenian drams"},ARS:{symbol:"AR$",name:"Argentine Peso",symbol_native:"$",decimal_digits:2,rounding:0,code:"ARS",name_plural:"Argentine pesos"},AUD:{symbol:"AU$",name:"Australian Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"AUD",name_plural:"Australian dollars"},AZN:{symbol:"man.",name:"Azerbaijani Manat",symbol_native:"Ð¼Ð°Ð½.",decimal_digits:2,rounding:0,code:"AZN",name_plural:"Azerbaijani manats"},BAM:{symbol:"KM",name:"Bosnia-Herzegovina Convertible Mark",symbol_native:"KM",decimal_digits:2,rounding:0,code:"BAM",name_plural:"Bosnia-Herzegovina convertible marks"},BDT:{symbol:"Tk",name:"Bangladeshi Taka",symbol_native:"à§³",decimal_digits:2,rounding:0,code:"BDT",name_plural:"Bangladeshi takas"},BGN:{symbol:"BGN",name:"Bulgarian Lev",symbol_native:"Ð»Ð².",decimal_digits:2,rounding:0,code:"BGN",name_plural:"Bulgarian leva"},BHD:{symbol:"BD",name:"Bahraini Dinar",symbol_native:"Ø¯.Ø¨.â",decimal_digits:3,rounding:0,code:"BHD",name_plural:"Bahraini dinars"},BIF:{symbol:"FBu",name:"Burundian Franc",symbol_native:"FBu",decimal_digits:0,rounding:0,code:"BIF",name_plural:"Burundian francs"},BND:{symbol:"BN$",name:"Brunei Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"BND",name_plural:"Brunei dollars"},BOB:{symbol:"Bs",name:"Bolivian Boliviano",symbol_native:"Bs",decimal_digits:2,rounding:0,code:"BOB",name_plural:"Bolivian bolivianos"},BRL:{symbol:"R$",name:"Brazilian Real",symbol_native:"R$",decimal_digits:2,rounding:0,code:"BRL",name_plural:"Brazilian reals"},BWP:{symbol:"BWP",name:"Botswanan Pula",symbol_native:"P",decimal_digits:2,rounding:0,code:"BWP",name_plural:"Botswanan pulas"},BYN:{symbol:"Br",name:"Belarusian Ruble",symbol_native:"ÑÑÐ±.",decimal_digits:2,rounding:0,code:"BYN",name_plural:"Belarusian rubles"},BZD:{symbol:"BZ$",name:"Belize Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"BZD",name_plural:"Belize dollars"},CDF:{symbol:"CDF",name:"Congolese Franc",symbol_native:"FrCD",decimal_digits:2,rounding:0,code:"CDF",name_plural:"Congolese francs"},CHF:{symbol:"CHF",name:"Swiss Franc",symbol_native:"CHF",decimal_digits:2,rounding:.05,code:"CHF",name_plural:"Swiss francs"},CLP:{symbol:"CL$",name:"Chilean Peso",symbol_native:"$",decimal_digits:0,rounding:0,code:"CLP",name_plural:"Chilean pesos"},CNY:{symbol:"CNÂ¥",name:"Chinese Yuan",symbol_native:"CNÂ¥",decimal_digits:2,rounding:0,code:"CNY",name_plural:"Chinese yuan"},COP:{symbol:"CO$",name:"Colombian Peso",symbol_native:"$",decimal_digits:0,rounding:0,code:"COP",name_plural:"Colombian pesos"},CRC:{symbol:"â¡",name:"Costa Rican ColÃ³n",symbol_native:"â¡",decimal_digits:0,rounding:0,code:"CRC",name_plural:"Costa Rican colÃ³ns"},CVE:{symbol:"CV$",name:"Cape Verdean Escudo",symbol_native:"CV$",decimal_digits:2,rounding:0,code:"CVE",name_plural:"Cape Verdean escudos"},CZK:{symbol:"KÄ",name:"Czech Republic Koruna",symbol_native:"KÄ",decimal_digits:2,rounding:0,code:"CZK",name_plural:"Czech Republic korunas"},DJF:{symbol:"Fdj",name:"Djiboutian Franc",symbol_native:"Fdj",decimal_digits:0,rounding:0,code:"DJF",name_plural:"Djiboutian francs"},DKK:{symbol:"Dkr",name:"Danish Krone",symbol_native:"kr",decimal_digits:2,rounding:0,code:"DKK",name_plural:"Danish kroner"},DOP:{symbol:"RD$",name:"Dominican Peso",symbol_native:"RD$",decimal_digits:2,rounding:0,code:"DOP",name_plural:"Dominican pesos"},DZD:{symbol:"DA",name:"Algerian Dinar",symbol_native:"Ø¯.Ø¬.â",decimal_digits:2,rounding:0,code:"DZD",name_plural:"Algerian dinars"},EEK:{symbol:"Ekr",name:"Estonian Kroon",symbol_native:"kr",decimal_digits:2,rounding:0,code:"EEK",name_plural:"Estonian kroons"},EGP:{symbol:"EGP",name:"Egyptian Pound",symbol_native:"Ø¬.Ù.â",decimal_digits:2,rounding:0,code:"EGP",name_plural:"Egyptian pounds"},ERN:{symbol:"Nfk",name:"Eritrean Nakfa",symbol_native:"Nfk",decimal_digits:2,rounding:0,code:"ERN",name_plural:"Eritrean nakfas"},ETB:{symbol:"Br",name:"Ethiopian Birr",symbol_native:"Br",decimal_digits:2,rounding:0,code:"ETB",name_plural:"Ethiopian birrs"},GEL:{symbol:"GEL",name:"Georgian Lari",symbol_native:"GEL",decimal_digits:2,rounding:0,code:"GEL",name_plural:"Georgian laris"},GHS:{symbol:"GHâµ",name:"Ghanaian Cedi",symbol_native:"GHâµ",decimal_digits:2,rounding:0,code:"GHS",name_plural:"Ghanaian cedis"},GNF:{symbol:"FG",name:"Guinean Franc",symbol_native:"FG",decimal_digits:0,rounding:0,code:"GNF",name_plural:"Guinean francs"},GTQ:{symbol:"GTQ",name:"Guatemalan Quetzal",symbol_native:"Q",decimal_digits:2,rounding:0,code:"GTQ",name_plural:"Guatemalan quetzals"},HKD:{symbol:"HK$",name:"Hong Kong Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"HKD",name_plural:"Hong Kong dollars"},HNL:{symbol:"HNL",name:"Honduran Lempira",symbol_native:"L",decimal_digits:2,rounding:0,code:"HNL",name_plural:"Honduran lempiras"},HRK:{symbol:"kn",name:"Croatian Kuna",symbol_native:"kn",decimal_digits:2,rounding:0,code:"HRK",name_plural:"Croatian kunas"},HUF:{symbol:"Ft",name:"Hungarian Forint",symbol_native:"Ft",decimal_digits:0,rounding:0,code:"HUF",name_plural:"Hungarian forints"},IDR:{symbol:"Rp",name:"Indonesian Rupiah",symbol_native:"Rp",decimal_digits:0,rounding:0,code:"IDR",name_plural:"Indonesian rupiahs"},ILS:{symbol:"âª",name:"Israeli New Sheqel",symbol_native:"âª",decimal_digits:2,rounding:0,code:"ILS",name_plural:"Israeli new sheqels"},INR:{symbol:"Rs",name:"Indian Rupee",symbol_native:"à¦à¦à¦¾",decimal_digits:2,rounding:0,code:"INR",name_plural:"Indian rupees"},IQD:{symbol:"IQD",name:"Iraqi Dinar",symbol_native:"Ø¯.Ø¹.â",decimal_digits:0,rounding:0,code:"IQD",name_plural:"Iraqi dinars"},IRR:{symbol:"IRR",name:"Iranian Rial",symbol_native:"ï·¼",decimal_digits:0,rounding:0,code:"IRR",name_plural:"Iranian rials"},ISK:{symbol:"Ikr",name:"Icelandic KrÃ³na",symbol_native:"kr",decimal_digits:0,rounding:0,code:"ISK",name_plural:"Icelandic krÃ³nur"},JMD:{symbol:"J$",name:"Jamaican Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"JMD",name_plural:"Jamaican dollars"},JOD:{symbol:"JD",name:"Jordanian Dinar",symbol_native:"Ø¯.Ø£.â",decimal_digits:3,rounding:0,code:"JOD",name_plural:"Jordanian dinars"},JPY:{symbol:"Â¥",name:"Japanese Yen",symbol_native:"ï¿¥",decimal_digits:0,rounding:0,code:"JPY",name_plural:"Japanese yen"},KES:{symbol:"Ksh",name:"Kenyan Shilling",symbol_native:"Ksh",decimal_digits:2,rounding:0,code:"KES",name_plural:"Kenyan shillings"},KHR:{symbol:"KHR",name:"Cambodian Riel",symbol_native:"á",decimal_digits:2,rounding:0,code:"KHR",name_plural:"Cambodian riels"},KMF:{symbol:"CF",name:"Comorian Franc",symbol_native:"FC",decimal_digits:0,rounding:0,code:"KMF",name_plural:"Comorian francs"},KRW:{symbol:"â©",name:"South Korean Won",symbol_native:"â©",decimal_digits:0,rounding:0,code:"KRW",name_plural:"South Korean won"},KWD:{symbol:"KD",name:"Kuwaiti Dinar",symbol_native:"Ø¯.Ù.â",decimal_digits:3,rounding:0,code:"KWD",name_plural:"Kuwaiti dinars"},KZT:{symbol:"KZT",name:"Kazakhstani Tenge",symbol_native:"ÑÒ£Ð³.",decimal_digits:2,rounding:0,code:"KZT",name_plural:"Kazakhstani tenges"},LBP:{symbol:"L.L.",name:"Lebanese Pound",symbol_native:"Ù.Ù.â",decimal_digits:0,rounding:0,code:"LBP",name_plural:"Lebanese pounds"},LKR:{symbol:"SLRs",name:"Sri Lankan Rupee",symbol_native:"SL Re",decimal_digits:2,rounding:0,code:"LKR",name_plural:"Sri Lankan rupees"},LTL:{symbol:"Lt",name:"Lithuanian Litas",symbol_native:"Lt",decimal_digits:2,rounding:0,code:"LTL",name_plural:"Lithuanian litai"},LVL:{symbol:"Ls",name:"Latvian Lats",symbol_native:"Ls",decimal_digits:2,rounding:0,code:"LVL",name_plural:"Latvian lati"},LYD:{symbol:"LD",name:"Libyan Dinar",symbol_native:"Ø¯.Ù.â",decimal_digits:3,rounding:0,code:"LYD",name_plural:"Libyan dinars"},MAD:{symbol:"MAD",name:"Moroccan Dirham",symbol_native:"Ø¯.Ù.â",decimal_digits:2,rounding:0,code:"MAD",name_plural:"Moroccan dirhams"},MDL:{symbol:"MDL",name:"Moldovan Leu",symbol_native:"MDL",decimal_digits:2,rounding:0,code:"MDL",name_plural:"Moldovan lei"},MGA:{symbol:"MGA",name:"Malagasy Ariary",symbol_native:"MGA",decimal_digits:0,rounding:0,code:"MGA",name_plural:"Malagasy Ariaries"},MKD:{symbol:"MKD",name:"Macedonian Denar",symbol_native:"MKD",decimal_digits:2,rounding:0,code:"MKD",name_plural:"Macedonian denari"},MMK:{symbol:"MMK",name:"Myanma Kyat",symbol_native:"K",decimal_digits:0,rounding:0,code:"MMK",name_plural:"Myanma kyats"},MOP:{symbol:"MOP$",name:"Macanese Pataca",symbol_native:"MOP$",decimal_digits:2,rounding:0,code:"MOP",name_plural:"Macanese patacas"},MUR:{symbol:"MURs",name:"Mauritian Rupee",symbol_native:"MURs",decimal_digits:0,rounding:0,code:"MUR",name_plural:"Mauritian rupees"},MXN:{symbol:"MX$",name:"Mexican Peso",symbol_native:"$",decimal_digits:2,rounding:0,code:"MXN",name_plural:"Mexican pesos"},MYR:{symbol:"RM",name:"Malaysian Ringgit",symbol_native:"RM",decimal_digits:2,rounding:0,code:"MYR",name_plural:"Malaysian ringgits"},MZN:{symbol:"MTn",name:"Mozambican Metical",symbol_native:"MTn",decimal_digits:2,rounding:0,code:"MZN",name_plural:"Mozambican meticals"},NAD:{symbol:"N$",name:"Namibian Dollar",symbol_native:"N$",decimal_digits:2,rounding:0,code:"NAD",name_plural:"Namibian dollars"},NGN:{symbol:"â¦",name:"Nigerian Naira",symbol_native:"â¦",decimal_digits:2,rounding:0,code:"NGN",name_plural:"Nigerian nairas"},NIO:{symbol:"C$",name:"Nicaraguan CÃ³rdoba",symbol_native:"C$",decimal_digits:2,rounding:0,code:"NIO",name_plural:"Nicaraguan cÃ³rdobas"},NOK:{symbol:"Nkr",name:"Norwegian Krone",symbol_native:"kr",decimal_digits:2,rounding:0,code:"NOK",name_plural:"Norwegian kroner"},NPR:{symbol:"NPRs",name:"Nepalese Rupee",symbol_native:"à¤¨à¥à¤°à¥",decimal_digits:2,rounding:0,code:"NPR",name_plural:"Nepalese rupees"},NZD:{symbol:"NZ$",name:"New Zealand Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"NZD",name_plural:"New Zealand dollars"},OMR:{symbol:"OMR",name:"Omani Rial",symbol_native:"Ø±.Ø¹.â",decimal_digits:3,rounding:0,code:"OMR",name_plural:"Omani rials"},PAB:{symbol:"B/.",name:"Panamanian Balboa",symbol_native:"B/.",decimal_digits:2,rounding:0,code:"PAB",name_plural:"Panamanian balboas"},PEN:{symbol:"S/.",name:"Peruvian Nuevo Sol",symbol_native:"S/.",decimal_digits:2,rounding:0,code:"PEN",name_plural:"Peruvian nuevos soles"},PHP:{symbol:"â±",name:"Philippine Peso",symbol_native:"â±",decimal_digits:2,rounding:0,code:"PHP",name_plural:"Philippine pesos"},PKR:{symbol:"PKRs",name:"Pakistani Rupee",symbol_native:"â¨",decimal_digits:0,rounding:0,code:"PKR",name_plural:"Pakistani rupees"},PLN:{symbol:"zÅ",name:"Polish Zloty",symbol_native:"zÅ",decimal_digits:2,rounding:0,code:"PLN",name_plural:"Polish zlotys"},PYG:{symbol:"â²",name:"Paraguayan Guarani",symbol_native:"â²",decimal_digits:0,rounding:0,code:"PYG",name_plural:"Paraguayan guaranis"},QAR:{symbol:"QR",name:"Qatari Rial",symbol_native:"Ø±.Ù.â",decimal_digits:2,rounding:0,code:"QAR",name_plural:"Qatari rials"},RON:{symbol:"RON",name:"Romanian Leu",symbol_native:"RON",decimal_digits:2,rounding:0,code:"RON",name_plural:"Romanian lei"},RSD:{symbol:"din.",name:"Serbian Dinar",symbol_native:"Ð´Ð¸Ð½.",decimal_digits:0,rounding:0,code:"RSD",name_plural:"Serbian dinars"},RUB:{symbol:"RUB",name:"Russian Ruble",symbol_native:"â½.",decimal_digits:2,rounding:0,code:"RUB",name_plural:"Russian rubles"},RWF:{symbol:"RWF",name:"Rwandan Franc",symbol_native:"FR",decimal_digits:0,rounding:0,code:"RWF",name_plural:"Rwandan francs"},SAR:{symbol:"SR",name:"Saudi Riyal",symbol_native:"Ø±.Ø³.â",decimal_digits:2,rounding:0,code:"SAR",name_plural:"Saudi riyals"},SDG:{symbol:"SDG",name:"Sudanese Pound",symbol_native:"SDG",decimal_digits:2,rounding:0,code:"SDG",name_plural:"Sudanese pounds"},SEK:{symbol:"Skr",name:"Swedish Krona",symbol_native:"kr",decimal_digits:2,rounding:0,code:"SEK",name_plural:"Swedish kronor"},SGD:{symbol:"S$",name:"Singapore Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"SGD",name_plural:"Singapore dollars"},SOS:{symbol:"Ssh",name:"Somali Shilling",symbol_native:"Ssh",decimal_digits:0,rounding:0,code:"SOS",name_plural:"Somali shillings"},SYP:{symbol:"SYÂ£",name:"Syrian Pound",symbol_native:"Ù.Ø³.â",decimal_digits:0,rounding:0,code:"SYP",name_plural:"Syrian pounds"},THB:{symbol:"à¸¿",name:"Thai Baht",symbol_native:"à¸¿",decimal_digits:2,rounding:0,code:"THB",name_plural:"Thai baht"},TND:{symbol:"DT",name:"Tunisian Dinar",symbol_native:"Ø¯.Øª.â",decimal_digits:3,rounding:0,code:"TND",name_plural:"Tunisian dinars"},TOP:{symbol:"T$",name:"Tongan PaÊ»anga",symbol_native:"T$",decimal_digits:2,rounding:0,code:"TOP",name_plural:"Tongan paÊ»anga"},TRY:{symbol:"TL",name:"Turkish Lira",symbol_native:"TL",decimal_digits:2,rounding:0,code:"TRY",name_plural:"Turkish Lira"},TTD:{symbol:"TT$",name:"Trinidad and Tobago Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"TTD",name_plural:"Trinidad and Tobago dollars"},TWD:{symbol:"NT$",name:"New Taiwan Dollar",symbol_native:"NT$",decimal_digits:2,rounding:0,code:"TWD",name_plural:"New Taiwan dollars"},TZS:{symbol:"TSh",name:"Tanzanian Shilling",symbol_native:"TSh",decimal_digits:0,rounding:0,code:"TZS",name_plural:"Tanzanian shillings"},UAH:{symbol:"â´",name:"Ukrainian Hryvnia",symbol_native:"â´",decimal_digits:2,rounding:0,code:"UAH",name_plural:"Ukrainian hryvnias"},UGX:{symbol:"USh",name:"Ugandan Shilling",symbol_native:"USh",decimal_digits:0,rounding:0,code:"UGX",name_plural:"Ugandan shillings"},UYU:{symbol:"$U",name:"Uruguayan Peso",symbol_native:"$",decimal_digits:2,rounding:0,code:"UYU",name_plural:"Uruguayan pesos"},UZS:{symbol:"UZS",name:"Uzbekistan Som",symbol_native:"UZS",decimal_digits:0,rounding:0,code:"UZS",name_plural:"Uzbekistan som"},VEF:{symbol:"Bs.F.",name:"Venezuelan BolÃ­var",symbol_native:"Bs.F.",decimal_digits:2,rounding:0,code:"VEF",name_plural:"Venezuelan bolÃ­vars"},VND:{symbol:"â«",name:"Vietnamese Dong",symbol_native:"â«",decimal_digits:0,rounding:0,code:"VND",name_plural:"Vietnamese dong"},XAF:{symbol:"FCFA",name:"CFA Franc BEAC",symbol_native:"FCFA",decimal_digits:0,rounding:0,code:"XAF",name_plural:"CFA francs BEAC"},XOF:{symbol:"CFA",name:"CFA Franc BCEAO",symbol_native:"CFA",decimal_digits:0,rounding:0,code:"XOF",name_plural:"CFA francs BCEAO"},YER:{symbol:"YR",name:"Yemeni Rial",symbol_native:"Ø±.Ù.â",decimal_digits:0,rounding:0,code:"YER",name_plural:"Yemeni rials"},ZAR:{symbol:"R",name:"South African Rand",symbol_native:"R",decimal_digits:2,rounding:0,code:"ZAR",name_plural:"South African rand"},ZMK:{symbol:"ZK",name:"Zambian Kwacha",symbol_native:"ZK",decimal_digits:0,rounding:0,code:"ZMK",name_plural:"Zambian kwachas"},ZWL:{symbol:"ZWL$",name:"Zimbabwean Dollar",symbol_native:"ZWL$",decimal_digits:0,rounding:0,code:"ZWL",name_plural:"Zimbabwean Dollar"}};function Na(a,e,n){const r=a.slice();return r[9]=e[n],r}function Ba(a){let e,n=a[9]+"",r,s,u=wt[a[9]].symbol+"",c,v;return{c(){e=L("option"),r=Ie(n),s=Ie(" ("),c=Ie(u),v=Ie(`)
          `),this.h()},l(_){e=M(_,"OPTION",{});var h=te(e);r=Re(h,n),s=Re(h," ("),c=Re(h,u),v=Re(h,`)
          `),h.forEach(b),this.h()},h(){e.__value=a[9],rt(e,e.__value)},m(_,h){fe(_,e,h),m(e,r),m(e,s),m(e,c),m(e,v)},p:vt,d(_){_&&b(e)}}}function Ws(a){let e,n,r,s="Add New Trip",u,c,v,_="Trip Name",h,p,E,K,G,ie="Trip Currency",W,Z,A,T,J,O="Trip Start",ce,ge,X,he,pe,be,Fe="Trip End",Oe,ye,Ee,Te,ve,Ke="Add Trip",je,x,k,B=ze(Object.keys(wt)),Q=[];for(let oe=0;oe<B.length;oe+=1)Q[oe]=Ba(Na(a,B,oe));function w(oe){a[7](oe)}let z={format:"yyyy-MM-dd",closeOnSelection:!0,id:"tripStart"};a[2]!==void 0&&(z.value=a[2]),ge=new qn({props:z}),Yt.push(()=>En(ge,"value",w));function Ce(oe){a[8](oe)}let ae={format:"yyyy-MM-dd",closeOnSelection:!0,min:a[2],id:"tripEnd"};return a[3]!==void 0&&(ae.value=a[3]),ye=new qn({props:ae}),Yt.push(()=>En(ye,"value",Ce)),{c(){e=L("div"),n=L("form"),r=L("h1"),r.textContent=s,u=le(),c=L("div"),v=L("label"),v.textContent=_,h=le(),p=L("input"),E=le(),K=L("div"),G=L("label"),G.textContent=ie,W=le(),Z=L("select");for(let oe=0;oe<Q.length;oe+=1)Q[oe].c();A=le(),T=L("div"),J=L("label"),J.textContent=O,ce=le(),Lt(ge.$$.fragment),he=le(),pe=L("div"),be=L("label"),be.textContent=Fe,Oe=le(),Lt(ye.$$.fragment),Te=le(),ve=L("button"),ve.textContent=Ke,this.h()},l(oe){e=M(oe,"DIV",{class:!0});var se=te(e);n=M(se,"FORM",{});var H=te(n);r=M(H,"H1",{"data-svelte-h":!0}),Ve(r)!=="svelte-1x3twms"&&(r.textContent=s),u=ue(H),c=M(H,"DIV",{class:!0});var N=te(c);v=M(N,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ve(v)!=="svelte-1y8z10u"&&(v.textContent=_),h=ue(N),p=M(N,"INPUT",{id:!0,class:!0,type:!0}),N.forEach(b),E=ue(H),K=M(H,"DIV",{class:!0});var Le=te(K);G=M(Le,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ve(G)!=="svelte-1fzihue"&&(G.textContent=ie),W=ue(Le),Z=M(Le,"SELECT",{id:!0,class:!0});var Be=te(Z);for(let ne=0;ne<Q.length;ne+=1)Q[ne].l(Be);Be.forEach(b),Le.forEach(b),A=ue(H),T=M(H,"DIV",{class:!0});var $e=te(T);J=M($e,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ve(J)!=="svelte-4n7gli"&&(J.textContent=O),ce=ue($e),Mt(ge.$$.fragment,$e),$e.forEach(b),he=ue(H),pe=M(H,"DIV",{class:!0});var lt=te(pe);be=M(lt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ve(be)!=="svelte-1dn7717"&&(be.textContent=Fe),Oe=ue(lt),Mt(ye.$$.fragment,lt),lt.forEach(b),Te=ue(H),ve=M(H,"BUTTON",{class:!0,"data-svelte-h":!0}),Ve(ve)!=="svelte-25jctl"&&(ve.textContent=Ke),H.forEach(b),se.forEach(b),this.h()},h(){y(v,"for","tripName"),y(v,"class","form-label"),y(p,"id","tripName"),y(p,"class","form-control"),y(p,"type","text"),y(c,"class","mb-3"),y(G,"for","tripCurrency"),y(G,"class","form-label"),y(Z,"id","tripCurrency"),y(Z,"class","form-control"),a[1]===void 0&&Rn(()=>a[6].call(Z)),y(K,"class","mb-3"),y(J,"for","tripStart"),y(J,"class","form-label"),y(T,"class","mb-3"),y(be,"for","tripStart"),y(be,"class","form-label"),y(pe,"class","mb-3"),y(ve,"class","btn btn-success"),y(e,"class","w-100")},m(oe,se){fe(oe,e,se),m(e,n),m(n,r),m(n,u),m(n,c),m(c,v),m(c,h),m(c,p),rt(p,a[0]),m(n,E),m(n,K),m(K,G),m(K,W),m(K,Z);for(let H=0;H<Q.length;H+=1)Q[H]&&Q[H].m(Z,null);Vt(Z,a[1],!0),m(n,A),m(n,T),m(T,J),m(T,ce),Nt(ge,T,null),m(n,he),m(n,pe),m(pe,be),m(pe,Oe),Nt(ye,pe,null),m(n,Te),m(n,ve),je=!0,x||(k=[xe(p,"input",a[5]),xe(Z,"change",a[6]),xe(ve,"click",a[4])],x=!0)},p(oe,[se]){if(se&1&&p.value!==oe[0]&&rt(p,oe[0]),se&0){B=ze(Object.keys(wt));let Le;for(Le=0;Le<B.length;Le+=1){const Be=Na(oe,B,Le);Q[Le]?Q[Le].p(Be,se):(Q[Le]=Ba(Be),Q[Le].c(),Q[Le].m(Z,null))}for(;Le<Q.length;Le+=1)Q[Le].d(1);Q.length=B.length}se&2&&Vt(Z,oe[1]);const H={};!X&&se&4&&(X=!0,H.value=oe[2],Dn(()=>X=!1)),ge.$set(H);const N={};se&4&&(N.min=oe[2]),!Ee&&se&8&&(Ee=!0,N.value=oe[3],Dn(()=>Ee=!1)),ye.$set(N)},i(oe){je||(tt(ge.$$.fragment,oe),tt(ye.$$.fragment,oe),je=!0)},o(oe){at(ge.$$.fragment,oe),at(ye.$$.fragment,oe),je=!1},d(oe){oe&&b(e),Ct(Q,oe),Bt(ge),Bt(ye),x=!1,hn(k)}}}function Gs(a,e,n){let r="My Trip",s="GBP",u=new Date,c=new Date;async function v(){try{const K=await Rt.trips.add({name:r,defaultCurrency:s,startDate:u,endDate:c});window.location.href="#/trip/"+K}catch{window.location.href="#/"}}function _(){r=this.value,n(0,r)}function h(){s=Un(this),n(1,s)}function p(K){u=K,n(2,u)}function E(K){c=K,n(3,c)}return[r,s,u,c,v,_,h,p,E]}class Ys extends $t{constructor(e){super(),Xt(this,e,Gs,Ws,Zt,{})}}/*!
  * PhotoSwipe Lightbox 5.4.4 - https://photoswipe.com
  * (c) 2024 Dmytro Semenov
  */function Xn(a,e,n){const r=document.createElement(e);return a&&(r.className=a),n&&n.appendChild(r),r}function Zs(a,e,n){let r=`translate3d(${a}px,0px,0)`;return n!==void 0&&(r+=` scale3d(${n},${n},1)`),r}function Pi(a,e,n){a.style.width=typeof e=="number"?`${e}px`:e,a.style.height=typeof n=="number"?`${n}px`:n}const rn={IDLE:"idle",LOADING:"loading",LOADED:"loaded",ERROR:"error"};function Js(a){return"button"in a&&a.button===1||a.ctrlKey||a.metaKey||a.altKey||a.shiftKey}function er(a,e,n=document){let r=[];if(a instanceof Element)r=[a];else if(a instanceof NodeList||Array.isArray(a))r=Array.from(a);else{const s=typeof a=="string"?a:e;s&&(r=Array.from(n.querySelectorAll(s)))}return r}function Qs(a){return typeof a=="function"&&a.prototype&&a.prototype.goTo}function Ka(){return!!(navigator.vendor&&navigator.vendor.match(/apple/i))}class $s{constructor(e,n){this.type=e,this.defaultPrevented=!1,n&&Object.assign(this,n)}preventDefault(){this.defaultPrevented=!0}}class Xs{constructor(){this._listeners={},this._filters={},this.pswp=void 0,this.options=void 0}addFilter(e,n,r=100){var s,u,c;this._filters[e]||(this._filters[e]=[]),(s=this._filters[e])===null||s===void 0||s.push({fn:n,priority:r}),(u=this._filters[e])===null||u===void 0||u.sort((v,_)=>v.priority-_.priority),(c=this.pswp)===null||c===void 0||c.addFilter(e,n,r)}removeFilter(e,n){this._filters[e]&&(this._filters[e]=this._filters[e].filter(r=>r.fn!==n)),this.pswp&&this.pswp.removeFilter(e,n)}applyFilters(e,...n){var r;return(r=this._filters[e])===null||r===void 0||r.forEach(s=>{n[0]=s.fn.apply(this,n)}),n[0]}on(e,n){var r,s;this._listeners[e]||(this._listeners[e]=[]),(r=this._listeners[e])===null||r===void 0||r.push(n),(s=this.pswp)===null||s===void 0||s.on(e,n)}off(e,n){var r;this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter(s=>n!==s)),(r=this.pswp)===null||r===void 0||r.off(e,n)}dispatch(e,n){var r;if(this.pswp)return this.pswp.dispatch(e,n);const s=new $s(e,n);return(r=this._listeners[e])===null||r===void 0||r.forEach(u=>{u.call(this,s)}),s}}class el{constructor(e,n){if(this.element=Xn("pswp__img pswp__img--placeholder",e?"img":"div",n),e){const r=this.element;r.decoding="async",r.alt="",r.src=e,r.setAttribute("role","presentation")}this.element.setAttribute("aria-hidden","true")}setDisplayedSize(e,n){this.element&&(this.element.tagName==="IMG"?(Pi(this.element,250,"auto"),this.element.style.transformOrigin="0 0",this.element.style.transform=Zs(0,0,e/250)):Pi(this.element,e,n))}destroy(){var e;(e=this.element)!==null&&e!==void 0&&e.parentNode&&this.element.remove(),this.element=null}}class tl{constructor(e,n,r){this.instance=n,this.data=e,this.index=r,this.element=void 0,this.placeholder=void 0,this.slide=void 0,this.displayedImageWidth=0,this.displayedImageHeight=0,this.width=Number(this.data.w)||Number(this.data.width)||0,this.height=Number(this.data.h)||Number(this.data.height)||0,this.isAttached=!1,this.hasSlide=!1,this.isDecoding=!1,this.state=rn.IDLE,this.data.type?this.type=this.data.type:this.data.src?this.type="image":this.type="html",this.instance.dispatch("contentInit",{content:this})}removePlaceholder(){this.placeholder&&!this.keepPlaceholder()&&setTimeout(()=>{this.placeholder&&(this.placeholder.destroy(),this.placeholder=void 0)},1e3)}load(e,n){if(this.slide&&this.usePlaceholder())if(this.placeholder){const r=this.placeholder.element;r&&!r.parentElement&&this.slide.container.prepend(r)}else{const r=this.instance.applyFilters("placeholderSrc",this.data.msrc&&this.slide.isFirstSlide?this.data.msrc:!1,this);this.placeholder=new el(r,this.slide.container)}this.element&&!n||this.instance.dispatch("contentLoad",{content:this,isLazy:e}).defaultPrevented||(this.isImageContent()?(this.element=Xn("pswp__img","img"),this.displayedImageWidth&&this.loadImage(e)):(this.element=Xn("pswp__content","div"),this.element.innerHTML=this.data.html||""),n&&this.slide&&this.slide.updateContentSize(!0))}loadImage(e){var n,r;if(!this.isImageContent()||!this.element||this.instance.dispatch("contentLoadImage",{content:this,isLazy:e}).defaultPrevented)return;const s=this.element;this.updateSrcsetSizes(),this.data.srcset&&(s.srcset=this.data.srcset),s.src=(n=this.data.src)!==null&&n!==void 0?n:"",s.alt=(r=this.data.alt)!==null&&r!==void 0?r:"",this.state=rn.LOADING,s.complete?this.onLoaded():(s.onload=()=>{this.onLoaded()},s.onerror=()=>{this.onError()})}setSlide(e){this.slide=e,this.hasSlide=!0,this.instance=e.pswp}onLoaded(){this.state=rn.LOADED,this.slide&&this.element&&(this.instance.dispatch("loadComplete",{slide:this.slide,content:this}),this.slide.isActive&&this.slide.heavyAppended&&!this.element.parentNode&&(this.append(),this.slide.updateContentSize(!0)),(this.state===rn.LOADED||this.state===rn.ERROR)&&this.removePlaceholder())}onError(){this.state=rn.ERROR,this.slide&&(this.displayError(),this.instance.dispatch("loadComplete",{slide:this.slide,isError:!0,content:this}),this.instance.dispatch("loadError",{slide:this.slide,content:this}))}isLoading(){return this.instance.applyFilters("isContentLoading",this.state===rn.LOADING,this)}isError(){return this.state===rn.ERROR}isImageContent(){return this.type==="image"}setDisplayedSize(e,n){if(this.element&&(this.placeholder&&this.placeholder.setDisplayedSize(e,n),!this.instance.dispatch("contentResize",{content:this,width:e,height:n}).defaultPrevented&&(Pi(this.element,e,n),this.isImageContent()&&!this.isError()))){const r=!this.displayedImageWidth&&e;this.displayedImageWidth=e,this.displayedImageHeight=n,r?this.loadImage(!1):this.updateSrcsetSizes(),this.slide&&this.instance.dispatch("imageSizeChange",{slide:this.slide,width:e,height:n,content:this})}}isZoomable(){return this.instance.applyFilters("isContentZoomable",this.isImageContent()&&this.state!==rn.ERROR,this)}updateSrcsetSizes(){if(!this.isImageContent()||!this.element||!this.data.srcset)return;const e=this.element,n=this.instance.applyFilters("srcsetSizesWidth",this.displayedImageWidth,this);(!e.dataset.largestUsedSize||n>parseInt(e.dataset.largestUsedSize,10))&&(e.sizes=n+"px",e.dataset.largestUsedSize=String(n))}usePlaceholder(){return this.instance.applyFilters("useContentPlaceholder",this.isImageContent(),this)}lazyLoad(){this.instance.dispatch("contentLazyLoad",{content:this}).defaultPrevented||this.load(!0)}keepPlaceholder(){return this.instance.applyFilters("isKeepingPlaceholder",this.isLoading(),this)}destroy(){this.hasSlide=!1,this.slide=void 0,!this.instance.dispatch("contentDestroy",{content:this}).defaultPrevented&&(this.remove(),this.placeholder&&(this.placeholder.destroy(),this.placeholder=void 0),this.isImageContent()&&this.element&&(this.element.onload=null,this.element.onerror=null,this.element=void 0))}displayError(){if(this.slide){var e,n;let r=Xn("pswp__error-msg","div");r.innerText=(e=(n=this.instance.options)===null||n===void 0?void 0:n.errorMsg)!==null&&e!==void 0?e:"",r=this.instance.applyFilters("contentErrorElement",r,this),this.element=Xn("pswp__content pswp__error-msg-container","div"),this.element.appendChild(r),this.slide.container.innerText="",this.slide.container.appendChild(this.element),this.slide.updateContentSize(!0),this.removePlaceholder()}}append(){if(this.isAttached||!this.element)return;if(this.isAttached=!0,this.state===rn.ERROR){this.displayError();return}if(this.instance.dispatch("contentAppend",{content:this}).defaultPrevented)return;const e="decode"in this.element;this.isImageContent()?e&&this.slide&&(!this.slide.isActive||Ka())?(this.isDecoding=!0,this.element.decode().catch(()=>{}).finally(()=>{this.isDecoding=!1,this.appendImage()})):this.appendImage():this.slide&&!this.element.parentNode&&this.slide.container.appendChild(this.element)}activate(){this.instance.dispatch("contentActivate",{content:this}).defaultPrevented||!this.slide||(this.isImageContent()&&this.isDecoding&&!Ka()?this.appendImage():this.isError()&&this.load(!1,!0),this.slide.holderElement&&this.slide.holderElement.setAttribute("aria-hidden","false"))}deactivate(){this.instance.dispatch("contentDeactivate",{content:this}),this.slide&&this.slide.holderElement&&this.slide.holderElement.setAttribute("aria-hidden","true")}remove(){this.isAttached=!1,!this.instance.dispatch("contentRemove",{content:this}).defaultPrevented&&(this.element&&this.element.parentNode&&this.element.remove(),this.placeholder&&this.placeholder.element&&this.placeholder.element.remove())}appendImage(){this.isAttached&&(this.instance.dispatch("contentAppendImage",{content:this}).defaultPrevented||(this.slide&&this.element&&!this.element.parentNode&&this.slide.container.appendChild(this.element),(this.state===rn.LOADED||this.state===rn.ERROR)&&this.removePlaceholder()))}}function nl(a,e){if(a.getViewportSizeFn){const n=a.getViewportSizeFn(a,e);if(n)return n}return{x:document.documentElement.clientWidth,y:window.innerHeight}}function Pr(a,e,n,r,s){let u=0;if(e.paddingFn)u=e.paddingFn(n,r,s)[a];else if(e.padding)u=e.padding[a];else{const c="padding"+a[0].toUpperCase()+a.slice(1);e[c]&&(u=e[c])}return Number(u)||0}function rl(a,e,n,r){return{x:e.x-Pr("left",a,e,n,r)-Pr("right",a,e,n,r),y:e.y-Pr("top",a,e,n,r)-Pr("bottom",a,e,n,r)}}const Fa=4e3;class il{constructor(e,n,r,s){this.pswp=s,this.options=e,this.itemData=n,this.index=r,this.panAreaSize=null,this.elementSize=null,this.fit=1,this.fill=1,this.vFill=1,this.initial=1,this.secondary=1,this.max=1,this.min=1}update(e,n,r){const s={x:e,y:n};this.elementSize=s,this.panAreaSize=r;const u=r.x/s.x,c=r.y/s.y;this.fit=Math.min(1,u<c?u:c),this.fill=Math.min(1,u>c?u:c),this.vFill=Math.min(1,c),this.initial=this._getInitial(),this.secondary=this._getSecondary(),this.max=Math.max(this.initial,this.secondary,this._getMax()),this.min=Math.min(this.fit,this.initial,this.secondary),this.pswp&&this.pswp.dispatch("zoomLevelsUpdate",{zoomLevels:this,slideData:this.itemData})}_parseZoomLevelOption(e){const n=e+"ZoomLevel",r=this.options[n];if(r)return typeof r=="function"?r(this):r==="fill"?this.fill:r==="fit"?this.fit:Number(r)}_getSecondary(){let e=this._parseZoomLevelOption("secondary");return e||(e=Math.min(1,this.fit*3),this.elementSize&&e*this.elementSize.x>Fa&&(e=Fa/this.elementSize.x),e)}_getInitial(){return this._parseZoomLevelOption("initial")||this.fit}_getMax(){return this._parseZoomLevelOption("max")||Math.max(1,this.fit*4)}}function Ho(a,e,n){const r=e.createContentFromData(a,n);let s;const{options:u}=e;if(u){s=new il(u,a,-1);let c;e.pswp?c=e.pswp.viewportSize:c=nl(u,e);const v=rl(u,c,a,n);s.update(r.width,r.height,v)}return r.lazyLoad(),s&&r.setDisplayedSize(Math.ceil(r.width*s.initial),Math.ceil(r.height*s.initial)),r}function al(a,e){const n=e.getItemData(a);if(!e.dispatch("lazyLoadSlide",{index:a,itemData:n}).defaultPrevented)return Ho(n,e,a)}class ol extends Xs{getNumItems(){var e;let n=0;const r=(e=this.options)===null||e===void 0?void 0:e.dataSource;r&&"length"in r?n=r.length:r&&"gallery"in r&&(r.items||(r.items=this._getGalleryDOMElements(r.gallery)),r.items&&(n=r.items.length));const s=this.dispatch("numItems",{dataSource:r,numItems:n});return this.applyFilters("numItems",s.numItems,r)}createContentFromData(e,n){return new tl(e,this,n)}getItemData(e){var n;const r=(n=this.options)===null||n===void 0?void 0:n.dataSource;let s={};Array.isArray(r)?s=r[e]:r&&"gallery"in r&&(r.items||(r.items=this._getGalleryDOMElements(r.gallery)),s=r.items[e]);let u=s;u instanceof Element&&(u=this._domElementToItemData(u));const c=this.dispatch("itemData",{itemData:u||{},index:e});return this.applyFilters("itemData",c.itemData,e)}_getGalleryDOMElements(e){var n,r;return(n=this.options)!==null&&n!==void 0&&n.children||(r=this.options)!==null&&r!==void 0&&r.childSelector?er(this.options.children,this.options.childSelector,e)||[]:[e]}_domElementToItemData(e){const n={element:e},r=e.tagName==="A"?e:e.querySelector("a");if(r){n.src=r.dataset.pswpSrc||r.href,r.dataset.pswpSrcset&&(n.srcset=r.dataset.pswpSrcset),n.width=r.dataset.pswpWidth?parseInt(r.dataset.pswpWidth,10):0,n.height=r.dataset.pswpHeight?parseInt(r.dataset.pswpHeight,10):0,n.w=n.width,n.h=n.height,r.dataset.pswpType&&(n.type=r.dataset.pswpType);const u=e.querySelector("img");if(u){var s;n.msrc=u.currentSrc||u.src,n.alt=(s=u.getAttribute("alt"))!==null&&s!==void 0?s:""}(r.dataset.pswpCropped||r.dataset.cropped)&&(n.thumbCropped=!0)}return this.applyFilters("domItemData",n,e,r)}lazyLoadData(e,n){return Ho(e,this,n)}}class sl extends ol{constructor(e){super(),this.options=e||{},this._uid=0,this.shouldOpen=!1,this._preloadedContent=void 0,this.onThumbnailsClick=this.onThumbnailsClick.bind(this)}init(){er(this.options.gallery,this.options.gallerySelector).forEach(e=>{e.addEventListener("click",this.onThumbnailsClick,!1)})}onThumbnailsClick(e){if(Js(e)||window.pswp)return;let n={x:e.clientX,y:e.clientY};!n.x&&!n.y&&(n=null);let r=this.getClickedIndex(e);r=this.applyFilters("clickedIndex",r,e,this);const s={gallery:e.currentTarget};r>=0&&(e.preventDefault(),this.loadAndOpen(r,s,n))}getClickedIndex(e){if(this.options.getClickedIndexFn)return this.options.getClickedIndexFn.call(this,e);const n=e.target,s=er(this.options.children,this.options.childSelector,e.currentTarget).findIndex(u=>u===n||u.contains(n));return s!==-1?s:this.options.children||this.options.childSelector?-1:0}loadAndOpen(e,n,r){if(window.pswp||!this.options)return!1;if(!n&&this.options.gallery&&this.options.children){const s=er(this.options.gallery);s[0]&&(n={gallery:s[0]})}return this.options.index=e,this.options.initialPointerPos=r,this.shouldOpen=!0,this.preload(e,n),!0}preload(e,n){const{options:r}=this;n&&(r.dataSource=n);const s=[],u=typeof r.pswpModule;if(Qs(r.pswpModule))s.push(Promise.resolve(r.pswpModule));else{if(u==="string")throw new Error("pswpModule as string is no longer supported");if(u==="function")s.push(r.pswpModule());else throw new Error("pswpModule is not valid")}typeof r.openPromise=="function"&&s.push(r.openPromise()),r.preloadFirstSlide!==!1&&e>=0&&(this._preloadedContent=al(e,this));const c=++this._uid;Promise.all(s).then(v=>{if(this.shouldOpen){const _=v[0];this._openPhotoswipe(_,c)}})}_openPhotoswipe(e,n){if(n!==this._uid&&this.shouldOpen||(this.shouldOpen=!1,window.pswp))return;const r=typeof e=="object"?new e.default(this.options):new e(this.options);this.pswp=r,window.pswp=r,Object.keys(this._listeners).forEach(s=>{var u;(u=this._listeners[s])===null||u===void 0||u.forEach(c=>{r.on(s,c)})}),Object.keys(this._filters).forEach(s=>{var u;(u=this._filters[s])===null||u===void 0||u.forEach(c=>{r.addFilter(s,c.fn,c.priority)})}),this._preloadedContent&&(r.contentLoader.addToCache(this._preloadedContent),this._preloadedContent=void 0),r.on("destroy",()=>{this.pswp=void 0,delete window.pswp}),r.init()}destroy(){var e;(e=this.pswp)===null||e===void 0||e.destroy(),this.shouldOpen=!1,this._listeners={},er(this.options.gallery,this.options.gallerySelector).forEach(n=>{n.removeEventListener("click",this.onThumbnailsClick,!1)})}}function ja(a,e,n){const r=a.slice();return r[9]=e[n],r}function Ua(a,e,n){const r=a.slice();return r[12]=e[n],r}function ki(a){const e=a.slice(),n=Array.from(new Set(e[2].map(r=>r.currency)));return e[8]=n,e}function qa(a){let e,n=a[0].name+"",r,s,u,c=a[0].startDate.toDateString()+"",v,_,h=a[0].endDate.toDateString()+"",p,E,K,G,ie="Default currency: ",W,Z=a[0].defaultCurrency+"",A,T,J=wt[a[0].defaultCurrency].symbol+"",O,ce,ge,X,he,pe,be,Fe,Oe,ye,Ee,Te,ve="Delete Trip",Ke,je,x="Receipts:",k,B,Q,w,z,Ce,ae,oe,se=a[2]&&Va(ki(a));return{c(){e=L("h1"),r=Ie(n),s=le(),u=L("h4"),v=Ie(c),_=Ie(" - "),p=Ie(h),E=le(),K=L("p"),G=L("em"),G.textContent=ie,W=L("strong"),A=Ie(Z),T=Ie(" ("),O=Ie(J),ce=Ie(")"),ge=le(),X=L("a"),he=Ie("Export/Print Trip"),be=le(),Fe=L("a"),Oe=Ie("Update Trip"),Ee=le(),Te=L("button"),Te.textContent=ve,Ke=le(),je=L("h5"),je.textContent=x,k=le(),B=L("a"),Q=Ie("+ Add Receipt"),z=le(),se&&se.c(),Ce=It(),this.h()},l(H){e=M(H,"H1",{});var N=te(e);r=Re(N,n),N.forEach(b),s=ue(H),u=M(H,"H4",{});var Le=te(u);v=Re(Le,c),_=Re(Le," - "),p=Re(Le,h),Le.forEach(b),E=ue(H),K=M(H,"P",{});var Be=te(K);G=M(Be,"EM",{"data-svelte-h":!0}),Ve(G)!=="svelte-sg39u8"&&(G.textContent=ie),W=M(Be,"STRONG",{});var $e=te(W);A=Re($e,Z),T=Re($e," ("),O=Re($e,J),ce=Re($e,")"),$e.forEach(b),Be.forEach(b),ge=ue(H),X=M(H,"A",{href:!0,target:!0,class:!0});var lt=te(X);he=Re(lt,"Export/Print Trip"),lt.forEach(b),be=ue(H),Fe=M(H,"A",{href:!0,class:!0});var ne=te(Fe);Oe=Re(ne,"Update Trip"),ne.forEach(b),Ee=ue(H),Te=M(H,"BUTTON",{class:!0,"data-svelte-h":!0}),Ve(Te)!=="svelte-1ve0pp4"&&(Te.textContent=ve),Ke=ue(H),je=M(H,"H5",{"data-svelte-h":!0}),Ve(je)!=="svelte-6gjzg1"&&(je.textContent=x),k=ue(H),B=M(H,"A",{class:!0,href:!0});var We=te(B);Q=Re(We,"+ Add Receipt"),We.forEach(b),z=ue(H),se&&se.l(H),Ce=It(),this.h()},h(){y(X,"href",pe="#/print/"+a[0].id),y(X,"target","_blank"),y(X,"class","btn btn-outline-success"),y(Fe,"href",ye="#/update/"+a[0].id),y(Fe,"class","btn btn-outline-warning"),y(Te,"class","btn btn-outline-danger"),y(B,"class","btn btn-outline-primary"),y(B,"href",w="#/addreceipt/"+a[0].id)},m(H,N){fe(H,e,N),m(e,r),fe(H,s,N),fe(H,u,N),m(u,v),m(u,_),m(u,p),fe(H,E,N),fe(H,K,N),m(K,G),m(K,W),m(W,A),m(W,T),m(W,O),m(W,ce),fe(H,ge,N),fe(H,X,N),m(X,he),fe(H,be,N),fe(H,Fe,N),m(Fe,Oe),fe(H,Ee,N),fe(H,Te,N),fe(H,Ke,N),fe(H,je,N),fe(H,k,N),fe(H,B,N),m(B,Q),fe(H,z,N),se&&se.m(H,N),fe(H,Ce,N),ae||(oe=xe(Te,"click",function(){qo(a[3](a[0]))&&a[3](a[0]).apply(this,arguments)}),ae=!0)},p(H,N){a=H,N&1&&n!==(n=a[0].name+"")&&et(r,n),N&1&&c!==(c=a[0].startDate.toDateString()+"")&&et(v,c),N&1&&h!==(h=a[0].endDate.toDateString()+"")&&et(p,h),N&1&&Z!==(Z=a[0].defaultCurrency+"")&&et(A,Z),N&1&&J!==(J=wt[a[0].defaultCurrency].symbol+"")&&et(O,J),N&1&&pe!==(pe="#/print/"+a[0].id)&&y(X,"href",pe),N&1&&ye!==(ye="#/update/"+a[0].id)&&y(Fe,"href",ye),N&1&&w!==(w="#/addreceipt/"+a[0].id)&&y(B,"href",w),a[2]?se?se.p(ki(a),N):(se=Va(ki(a)),se.c(),se.m(Ce.parentNode,Ce)):se&&(se.d(1),se=null)},d(H){H&&(b(e),b(s),b(u),b(E),b(K),b(ge),b(X),b(be),b(Fe),b(Ee),b(Te),b(Ke),b(je),b(k),b(B),b(z),b(Ce)),se&&se.d(H),ae=!1,oe()}}}function Va(a){let e,n,r,s="<tr><th>Receipt Description</th> <th>Receipt Date</th> <th>Receipt Type</th> <th>Receipt Total</th> <th></th> <th></th></tr>",u,c,v=[],_=new Map,h,p,E,K,G,ie,W,Z,A="<strong>Total</strong>",T,J,O,ce,ge,X,he,pe,be=ze(a[2]);const Fe=Ee=>Ee[12].id;for(let Ee=0;Ee<be.length;Ee+=1){let Te=Ua(a,be,Ee),ve=Fe(Te);_.set(ve,v[Ee]=za(ve,Te))}let Oe=ze(a[8]),ye=[];for(let Ee=0;Ee<Oe.length;Ee+=1)ye[Ee]=xa(ja(a,Oe,Ee));return{c(){e=L("div"),n=L("table"),r=L("thead"),r.innerHTML=s,u=le(),c=L("tbody");for(let Ee=0;Ee<v.length;Ee+=1)v[Ee].c();h=le(),p=L("tfoot"),E=L("tr"),K=L("td"),G=le(),ie=L("td"),W=le(),Z=L("td"),Z.innerHTML=A,T=le(),J=L("td");for(let Ee=0;Ee<ye.length;Ee+=1)ye[Ee].c();O=le(),ce=L("td"),ge=le(),X=L("td"),this.h()},l(Ee){e=M(Ee,"DIV",{class:!0});var Te=te(e);n=M(Te,"TABLE",{class:!0});var ve=te(n);r=M(ve,"THEAD",{"data-svelte-h":!0}),Ve(r)!=="svelte-6lrs71"&&(r.innerHTML=s),u=ue(ve),c=M(ve,"TBODY",{});var Ke=te(c);for(let B=0;B<v.length;B+=1)v[B].l(Ke);Ke.forEach(b),h=ue(ve),p=M(ve,"TFOOT",{class:!0});var je=te(p);E=M(je,"TR",{});var x=te(E);K=M(x,"TD",{}),te(K).forEach(b),G=ue(x),ie=M(x,"TD",{}),te(ie).forEach(b),W=ue(x),Z=M(x,"TD",{class:!0,"data-svelte-h":!0}),Ve(Z)!=="svelte-14afisz"&&(Z.innerHTML=A),T=ue(x),J=M(x,"TD",{});var k=te(J);for(let B=0;B<ye.length;B+=1)ye[B].l(k);k.forEach(b),O=ue(x),ce=M(x,"TD",{}),te(ce).forEach(b),ge=ue(x),X=M(x,"TD",{}),te(X).forEach(b),x.forEach(b),je.forEach(b),ve.forEach(b),Te.forEach(b),this.h()},h(){y(Z,"class","text-end"),y(p,"class","table-group-divider"),y(n,"class","table table-striped table-hover"),y(e,"class","table-responsive")},m(Ee,Te){fe(Ee,e,Te),m(e,n),m(n,r),m(n,u),m(n,c);for(let ve=0;ve<v.length;ve+=1)v[ve]&&v[ve].m(c,null);m(n,h),m(n,p),m(p,E),m(E,K),m(E,G),m(E,ie),m(E,W),m(E,Z),m(E,T),m(E,J);for(let ve=0;ve<ye.length;ve+=1)ye[ve]&&ye[ve].m(J,null);m(E,O),m(E,ce),m(E,ge),m(E,X),he||(pe=ws(a[5].call(null,c)),he=!0)},p(Ee,Te){if(Te&20&&(be=ze(Ee[2]),v=Kr(v,Te,Fe,1,Ee,be,_,c,Br,za,null,Ua)),Te&4){Oe=ze(Ee[8]);let ve;for(ve=0;ve<Oe.length;ve+=1){const Ke=ja(Ee,Oe,ve);ye[ve]?ye[ve].p(Ke,Te):(ye[ve]=xa(Ke),ye[ve].c(),ye[ve].m(J,null))}for(;ve<ye.length;ve+=1)ye[ve].d(1);ye.length=Oe.length}},d(Ee){Ee&&b(e);for(let Te=0;Te<v.length;Te+=1)v[Te].d();Ct(ye,Ee),he=!1,pe()}}}function za(a,e){let n,r,s=e[12].description+"",u,c,v,_=e[12].receiptDate.toDateString()+"",h,p,E,K=e[12].receiptType+"",G,ie,W,Z=wt[e[12].currency].symbol+"",A,T,J=e[12].total.toFixed(2)+"",O,ce,ge,X,he,pe,be,Fe,Oe,ye,Ee,Te,ve,Ke,je,x="Delete",k,B,Q;return{key:a,first:null,c(){n=L("tr"),r=L("td"),u=Ie(s),c=le(),v=L("td"),h=Ie(_),p=le(),E=L("td"),G=Ie(K),ie=le(),W=L("td"),A=Ie(Z),T=le(),O=Ie(J),ce=le(),ge=L("td"),X=L("a"),he=Ie("View image"),Oe=le(),ye=L("td"),Ee=L("a"),Te=Ie("Edit"),Ke=le(),je=L("button"),je.textContent=x,k=le(),this.h()},l(w){n=M(w,"TR",{});var z=te(n);r=M(z,"TD",{});var Ce=te(r);u=Re(Ce,s),Ce.forEach(b),c=ue(z),v=M(z,"TD",{});var ae=te(v);h=Re(ae,_),ae.forEach(b),p=ue(z),E=M(z,"TD",{});var oe=te(E);G=Re(oe,K),oe.forEach(b),ie=ue(z),W=M(z,"TD",{});var se=te(W);A=Re(se,Z),T=ue(se),O=Re(se,J),se.forEach(b),ce=ue(z),ge=M(z,"TD",{});var H=te(ge);X=M(H,"A",{class:!0,href:!0,"data-pswp-width":!0,"data-pswp-height":!0,target:!0,rel:!0});var N=te(X);he=Re(N,"View image"),N.forEach(b),H.forEach(b),Oe=ue(z),ye=M(z,"TD",{});var Le=te(ye);Ee=M(Le,"A",{class:!0,href:!0});var Be=te(Ee);Te=Re(Be,"Edit"),Be.forEach(b),Ke=ue(Le),je=M(Le,"BUTTON",{class:!0,"data-svelte-h":!0}),Ve(je)!=="svelte-19vju7w"&&(je.textContent=x),Le.forEach(b),k=ue(z),z.forEach(b),this.h()},h(){y(X,"class","btn btn-outline-primary btn-sm rImages"),y(X,"href",pe=URL.createObjectURL(e[12].imageData)),y(X,"data-pswp-width",be=e[12].imageWidth),y(X,"data-pswp-height",Fe=e[12].imageHeight),y(X,"target","_blank"),y(X,"rel","noreferrer"),y(Ee,"class","btn btn-outline-warning btn-sm"),y(Ee,"href",ve="#/editreceipt/"+e[12].id),y(je,"class","btn btn-outline-danger btn-sm"),this.first=n},m(w,z){fe(w,n,z),m(n,r),m(r,u),m(n,c),m(n,v),m(v,h),m(n,p),m(n,E),m(E,G),m(n,ie),m(n,W),m(W,A),m(W,T),m(W,O),m(n,ce),m(n,ge),m(ge,X),m(X,he),m(n,Oe),m(n,ye),m(ye,Ee),m(Ee,Te),m(ye,Ke),m(ye,je),m(n,k),B||(Q=xe(je,"click",function(){qo(e[4](e[12]))&&e[4](e[12]).apply(this,arguments)}),B=!0)},p(w,z){e=w,z&4&&s!==(s=e[12].description+"")&&et(u,s),z&4&&_!==(_=e[12].receiptDate.toDateString()+"")&&et(h,_),z&4&&K!==(K=e[12].receiptType+"")&&et(G,K),z&4&&Z!==(Z=wt[e[12].currency].symbol+"")&&et(A,Z),z&4&&J!==(J=e[12].total.toFixed(2)+"")&&et(O,J),z&4&&pe!==(pe=URL.createObjectURL(e[12].imageData))&&y(X,"href",pe),z&4&&be!==(be=e[12].imageWidth)&&y(X,"data-pswp-width",be),z&4&&Fe!==(Fe=e[12].imageHeight)&&y(X,"data-pswp-height",Fe),z&4&&ve!==(ve="#/editreceipt/"+e[12].id)&&y(Ee,"href",ve)},d(w){w&&b(n),B=!1,Q()}}}function xa(a){let e=wt[a[9]].symbol+"",n,r,s=a[2].filter(_).reduce(Ha,0).toFixed(2)+"",u,c,v;function _(...h){return a[7](a[9],...h)}return{c(){n=Ie(e),r=le(),u=Ie(s),c=le(),v=L("br")},l(h){n=Re(h,e),r=ue(h),u=Re(h,s),c=ue(h),v=M(h,"BR",{})},m(h,p){fe(h,n,p),fe(h,r,p),fe(h,u,p),fe(h,c,p),fe(h,v,p)},p(h,p){a=h,p&4&&e!==(e=wt[a[9]].symbol+"")&&et(n,e),p&4&&s!==(s=a[2].filter(_).reduce(Ha,0).toFixed(2)+"")&&et(u,s)},d(h){h&&(b(n),b(r),b(u),b(c),b(v))}}}function ll(a){let e,n=a[0]&&qa(a);return{c(){e=L("div"),n&&n.c(),this.h()},l(r){e=M(r,"DIV",{class:!0});var s=te(e);n&&n.l(s),s.forEach(b),this.h()},h(){y(e,"class","w-100")},m(r,s){fe(r,e,s),n&&n.m(e,null)},p(r,[s]){r[0]?n?n.p(r,s):(n=qa(r),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},i:vt,o:vt,d(r){r&&b(e),n&&n.d()}}}const Ha=(a,e)=>a+e.total;function ul(a,e,n){let r,s=vt,u=()=>(s(),s=Mr(_,G=>n(2,r=G)),_);a.$$.on_destroy.push(()=>s());let{tripId:c}=e,v,_;c>-1&&Rt.trips.get(c).then(G=>{n(0,v=G),u(n(1,_=qr(async()=>await Rt.receipts.where({tripId:c}).reverse().sortBy("receiptDate"))))});async function h(G){if(confirm(`Are you sure you want to delete trip "${G.name}"? It will also delete all receipts for this trip`)){let W=await Rt.trips.where("id").equals(G.id).delete();console.log(`Deleted ${W} trip(s)`),W=await Rt.receipts.where("tripId").equals(G.id).delete(),console.log(`Deleted ${W} receipts(s)`),window.location.href="#/"}}async function p(G){if(confirm(`Are you sure you want to delete receipt for "${G.description}"?`)){let W=await Rt.receipts.where("id").equals(G.id).delete();console.log(`Deleted ${W} receipts(s)`)}}function E(G){new sl({gallery:".rImages",pswpModule:()=>Es(()=>import("../chunks/photoswipe.esm.GXRgw7eJ.js"),[],import.meta.url)}).init()}const K=(G,ie)=>ie.currency==G;return a.$$set=G=>{"tripId"in G&&n(6,c=G.tripId)},[v,_,r,h,p,E,c,K]}class cl extends $t{constructor(e){super(),Xt(this,e,ul,ll,Zt,{tripId:6})}}function Wa(a,e,n){const r=a.slice();return r[8]=e[n],r}function Ga(a,e,n){const r=a.slice();return r[12]=e[n],r}function Di(a){const e=a.slice(),n=Array.from(new Set(e[2].filter(function(...s){return a[5](e[8],...s)}).map(r=>r.currency)));return e[11]=n,e}function Ya(a){let e=[],n=new Map,r,s=ze(a[1]);const u=c=>c[8].id;for(let c=0;c<s.length;c+=1){let v=Wa(a,s,c),_=u(v);n.set(_,e[c]=Qa(_,v))}return{c(){for(let c=0;c<e.length;c+=1)e[c].c();r=It()},l(c){for(let v=0;v<e.length;v+=1)e[v].l(c);r=It()},m(c,v){for(let _=0;_<e.length;_+=1)e[_]&&e[_].m(c,v);fe(c,r,v)},p(c,v){v&7&&(s=ze(c[1]),e=Kr(e,v,u,1,c,s,n,r.parentNode,Br,Qa,r,Wa))},d(c){c&&b(r);for(let v=0;v<e.length;v+=1)e[v].d(c)}}}function Za(a){let e,n=ze(a[11]),r=[];for(let s=0;s<n.length;s+=1)r[s]=Ja(Ga(a,n,s));return{c(){e=L("small");for(let s=0;s<r.length;s+=1)r[s].c()},l(s){e=M(s,"SMALL",{});var u=te(e);for(let c=0;c<r.length;c+=1)r[c].l(u);u.forEach(b)},m(s,u){fe(s,e,u);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(e,null)},p(s,u){if(u&6){n=ze(s[11]);let c;for(c=0;c<n.length;c+=1){const v=Ga(s,n,c);r[c]?r[c].p(v,u):(r[c]=Ja(v),r[c].c(),r[c].m(e,null))}for(;c<r.length;c+=1)r[c].d(1);r.length=n.length}},d(s){s&&b(e),Ct(r,s)}}}function Ja(a){let e=wt[a[12]].symbol+"",n,r,s=a[2].filter(_).filter(h).reduce($a,0).toFixed(2)+"",u,c,v;function _(...p){return a[6](a[8],...p)}function h(...p){return a[7](a[12],...p)}return{c(){n=Ie(e),r=le(),u=Ie(s),c=le(),v=L("br")},l(p){n=Re(p,e),r=ue(p),u=Re(p,s),c=ue(p),v=M(p,"BR",{})},m(p,E){fe(p,n,E),fe(p,r,E),fe(p,u,E),fe(p,c,E),fe(p,v,E)},p(p,E){a=p,E&6&&e!==(e=wt[a[12]].symbol+"")&&et(n,e),E&6&&s!==(s=a[2].filter(_).filter(h).reduce($a,0).toFixed(2)+"")&&et(u,s)},d(p){p&&(b(n),b(r),b(u),b(c),b(v))}}}function Qa(a,e){let n,r,s,u=e[8].name+"",c,v,_,h,p=e[8].startDate.toDateString()+"",E,K,G=e[8].endDate.toDateString()+"",ie,W,Z,A,T=e[2]&&Za(Di(e));return{key:a,first:null,c(){n=L("a"),r=L("div"),s=L("strong"),c=Ie(u),v=le(),T&&T.c(),_=le(),h=L("div"),E=Ie(p),K=Ie(" - "),ie=Ie(G),W=le(),this.h()},l(J){n=M(J,"A",{href:!0,class:!0,"aria-current":!0,"data-trip-id":!0});var O=te(n);r=M(O,"DIV",{class:!0});var ce=te(r);s=M(ce,"STRONG",{class:!0});var ge=te(s);c=Re(ge,u),ge.forEach(b),v=ue(ce),T&&T.l(ce),ce.forEach(b),_=ue(O),h=M(O,"DIV",{class:!0});var X=te(h);E=Re(X,p),K=Re(X," - "),ie=Re(X,G),X.forEach(b),W=ue(O),O.forEach(b),this.h()},h(){y(s,"class","mb-1"),y(r,"class","d-flex w-100 align-items-center justify-content-between"),y(h,"class","col-10 mb-1 small"),y(n,"href",Z="#/trip/"+e[8].id),y(n,"class","list-group-item list-group-item-action py-3 lh-sm me-1"),y(n,"aria-current","false"),y(n,"data-trip-id",A=e[8].id),bt(n,"active",e[0]==e[8].id),this.first=n},m(J,O){fe(J,n,O),m(n,r),m(r,s),m(s,c),m(r,v),T&&T.m(r,null),m(n,_),m(n,h),m(h,E),m(h,K),m(h,ie),m(n,W)},p(J,O){e=J,O&2&&u!==(u=e[8].name+"")&&et(c,u),e[2]?T?T.p(Di(e),O):(T=Za(Di(e)),T.c(),T.m(r,null)):T&&(T.d(1),T=null),O&2&&p!==(p=e[8].startDate.toDateString()+"")&&et(E,p),O&2&&G!==(G=e[8].endDate.toDateString()+"")&&et(ie,G),O&2&&Z!==(Z="#/trip/"+e[8].id)&&y(n,"href",Z),O&2&&A!==(A=e[8].id)&&y(n,"data-trip-id",A),O&3&&bt(n,"active",e[0]==e[8].id)},d(J){J&&b(n),T&&T.d()}}}function fl(a){let e,n=a[1]&&Ya(a);return{c(){n&&n.c(),e=It()},l(r){n&&n.l(r),e=It()},m(r,s){n&&n.m(r,s),fe(r,e,s)},p(r,[s]){r[1]?n?n.p(r,s):(n=Ya(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:vt,o:vt,d(r){r&&b(e),n&&n.d(r)}}}const $a=(a,e)=>a+e.total;function dl(a,e,n){let r,s,{tripId:u}=e,c=qr(()=>Rt.trips.toCollection().reverse().sortBy("endDate"));tr(a,c,E=>n(1,r=E));let v=qr(()=>Rt.receipts.toArray());tr(a,v,E=>n(2,s=E));const _=(E,K)=>K.tripId==E.id,h=(E,K)=>K.tripId==E.id,p=(E,K)=>K.currency==E;return a.$$set=E=>{"tripId"in E&&n(0,u=E.tripId)},[u,r,s,c,v,_,h,p]}class hl extends $t{constructor(e){super(),Xt(this,e,dl,fl,Zt,{tripId:0})}}function Xa(a,e,n){const r=a.slice();return r[7]=e[n],r}function eo(a){let e,n,r="Update Trip",s,u,c,v="Trip Name",_,h,p,E,K,G="Trip Currency",ie,W,Z,A,T,J="Trip Start",O,ce,ge,X,he,pe,be="Trip End",Fe,Oe,ye,Ee,Te,ve="Update Trip",Ke,je,x,k=ze(Object.keys(wt)),B=[];for(let ae=0;ae<k.length;ae+=1)B[ae]=to(Xa(a,k,ae));function Q(ae){a[5](ae)}let w={format:"yyyy-MM-dd",closeOnSelection:!0,id:"tripStart"};a[0].startDate!==void 0&&(w.value=a[0].startDate),ce=new qn({props:w}),Yt.push(()=>En(ce,"value",Q));function z(ae){a[6](ae)}let Ce={format:"yyyy-MM-dd",closeOnSelection:!0,min:a[0].startDate,id:"tripEnd"};return a[0].endDate!==void 0&&(Ce.value=a[0].endDate),Oe=new qn({props:Ce}),Yt.push(()=>En(Oe,"value",z)),{c(){e=L("form"),n=L("h1"),n.textContent=r,s=le(),u=L("div"),c=L("label"),c.textContent=v,_=le(),h=L("input"),p=le(),E=L("div"),K=L("label"),K.textContent=G,ie=le(),W=L("select");for(let ae=0;ae<B.length;ae+=1)B[ae].c();Z=le(),A=L("div"),T=L("label"),T.textContent=J,O=le(),Lt(ce.$$.fragment),X=le(),he=L("div"),pe=L("label"),pe.textContent=be,Fe=le(),Lt(Oe.$$.fragment),Ee=le(),Te=L("button"),Te.textContent=ve,this.h()},l(ae){e=M(ae,"FORM",{});var oe=te(e);n=M(oe,"H1",{"data-svelte-h":!0}),Ve(n)!=="svelte-9352dq"&&(n.textContent=r),s=ue(oe),u=M(oe,"DIV",{class:!0});var se=te(u);c=M(se,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ve(c)!=="svelte-1y8z10u"&&(c.textContent=v),_=ue(se),h=M(se,"INPUT",{id:!0,class:!0,type:!0}),se.forEach(b),p=ue(oe),E=M(oe,"DIV",{class:!0});var H=te(E);K=M(H,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ve(K)!=="svelte-1fzihue"&&(K.textContent=G),ie=ue(H),W=M(H,"SELECT",{id:!0,class:!0});var N=te(W);for(let $e=0;$e<B.length;$e+=1)B[$e].l(N);N.forEach(b),H.forEach(b),Z=ue(oe),A=M(oe,"DIV",{class:!0});var Le=te(A);T=M(Le,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ve(T)!=="svelte-4n7gli"&&(T.textContent=J),O=ue(Le),Mt(ce.$$.fragment,Le),Le.forEach(b),X=ue(oe),he=M(oe,"DIV",{class:!0});var Be=te(he);pe=M(Be,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ve(pe)!=="svelte-1dn7717"&&(pe.textContent=be),Fe=ue(Be),Mt(Oe.$$.fragment,Be),Be.forEach(b),Ee=ue(oe),Te=M(oe,"BUTTON",{class:!0,"data-svelte-h":!0}),Ve(Te)!=="svelte-1py8q2w"&&(Te.textContent=ve),oe.forEach(b),this.h()},h(){y(c,"for","tripName"),y(c,"class","form-label"),y(h,"id","tripName"),y(h,"class","form-control"),y(h,"type","text"),y(u,"class","mb-3"),y(K,"for","tripCurrency"),y(K,"class","form-label"),y(W,"id","tripCurrency"),y(W,"class","form-control"),a[0].defaultCurrency===void 0&&Rn(()=>a[4].call(W)),y(E,"class","mb-3"),y(T,"for","tripStart"),y(T,"class","form-label"),y(A,"class","mb-3"),y(pe,"for","tripStart"),y(pe,"class","form-label"),y(he,"class","mb-3"),y(Te,"class","btn btn-warning")},m(ae,oe){fe(ae,e,oe),m(e,n),m(e,s),m(e,u),m(u,c),m(u,_),m(u,h),rt(h,a[0].name),m(e,p),m(e,E),m(E,K),m(E,ie),m(E,W);for(let se=0;se<B.length;se+=1)B[se]&&B[se].m(W,null);Vt(W,a[0].defaultCurrency,!0),m(e,Z),m(e,A),m(A,T),m(A,O),Nt(ce,A,null),m(e,X),m(e,he),m(he,pe),m(he,Fe),Nt(Oe,he,null),m(e,Ee),m(e,Te),Ke=!0,je||(x=[xe(h,"input",a[3]),xe(W,"change",a[4]),xe(Te,"click",a[1])],je=!0)},p(ae,oe){if(oe&1&&h.value!==ae[0].name&&rt(h,ae[0].name),oe&0){k=ze(Object.keys(wt));let N;for(N=0;N<k.length;N+=1){const Le=Xa(ae,k,N);B[N]?B[N].p(Le,oe):(B[N]=to(Le),B[N].c(),B[N].m(W,null))}for(;N<B.length;N+=1)B[N].d(1);B.length=k.length}oe&1&&Vt(W,ae[0].defaultCurrency);const se={};!ge&&oe&1&&(ge=!0,se.value=ae[0].startDate,Dn(()=>ge=!1)),ce.$set(se);const H={};oe&1&&(H.min=ae[0].startDate),!ye&&oe&1&&(ye=!0,H.value=ae[0].endDate,Dn(()=>ye=!1)),Oe.$set(H)},i(ae){Ke||(tt(ce.$$.fragment,ae),tt(Oe.$$.fragment,ae),Ke=!0)},o(ae){at(ce.$$.fragment,ae),at(Oe.$$.fragment,ae),Ke=!1},d(ae){ae&&b(e),Ct(B,ae),Bt(ce),Bt(Oe),je=!1,hn(x)}}}function to(a){let e,n=a[7]+"",r,s,u=wt[a[7]].symbol+"",c,v;return{c(){e=L("option"),r=Ie(n),s=Ie(" ("),c=Ie(u),v=Ie(`)
          `),this.h()},l(_){e=M(_,"OPTION",{});var h=te(e);r=Re(h,n),s=Re(h," ("),c=Re(h,u),v=Re(h,`)
          `),h.forEach(b),this.h()},h(){e.__value=a[7],rt(e,e.__value)},m(_,h){fe(_,e,h),m(e,r),m(e,s),m(e,c),m(e,v)},p:vt,d(_){_&&b(e)}}}function pl(a){let e,n,r=a[0]&&eo(a);return{c(){e=L("div"),r&&r.c(),this.h()},l(s){e=M(s,"DIV",{class:!0});var u=te(e);r&&r.l(u),u.forEach(b),this.h()},h(){y(e,"class","w-100")},m(s,u){fe(s,e,u),r&&r.m(e,null),n=!0},p(s,[u]){s[0]?r?(r.p(s,u),u&1&&tt(r,1)):(r=eo(s),r.c(),tt(r,1),r.m(e,null)):r&&(Ln(),at(r,1,1,()=>{r=null}),Mn())},i(s){n||(tt(r),n=!0)},o(s){at(r),n=!1},d(s){s&&b(e),r&&r.d()}}}function ml(a,e,n){let{tripId:r}=e,s;r>-1&&Rt.trips.get(r).then(p=>{n(0,s=p)});async function u(){try{const p=await Rt.trips.update(s.id,{name:s.name,defaultCurrency:s.defaultCurrency,startDate:s.startDate,endDate:s.endDate});window.location.href="#/trip/"+s.id}catch{window.location.href="#/"}}function c(){s.name=this.value,n(0,s)}function v(){s.defaultCurrency=Un(this),n(0,s)}function _(p){a.$$.not_equal(s.startDate,p)&&(s.startDate=p,n(0,s))}function h(p){a.$$.not_equal(s.endDate,p)&&(s.endDate=p,n(0,s))}return a.$$set=p=>{"tripId"in p&&n(2,r=p.tripId)},[s,u,r,c,v,_,h]}class gl extends $t{constructor(e){super(),Xt(this,e,ml,pl,Zt,{tripId:2})}}/*!
 * currency.js - v2.0.4
 * http://scurker.github.io/currency.js
 *
 * Copyright (c) 2021 Jason Wilson
 * Released under MIT license
 */var vl={symbol:"$",separator:",",decimal:".",errorOnInvalid:!1,precision:2,pattern:"!#",negativePattern:"-!#",format:wl,fromCents:!1},Wo=function(e){return Math.round(e)},Ii=function(e){return Math.pow(10,e)},_l=function(e,n){return Wo(e/n)*n},yl=/(\d)(?=(\d{3})+\b)/g,bl=/(\d)(?=(\d\d)+\d\b)/g;function ln(a,e){var n=this;if(!(n instanceof ln))return new ln(a,e);var r=Object.assign({},vl,e),s=Ii(r.precision),u=Rr(a,r);n.intValue=u,n.value=u/s,r.increment=r.increment||1/s,r.useVedic?r.groups=bl:r.groups=yl,this.s=r,this.p=s}function Rr(a,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=0,s=e.decimal,u=e.errorOnInvalid,c=e.precision,v=e.fromCents,_=Ii(c),h=typeof a=="number",p=a instanceof ln;if(p&&v)return a.intValue;if(h||p)r=p?a.value:a;else if(typeof a=="string"){var E=new RegExp("[^-\\d"+s+"]","g"),K=new RegExp("\\"+s,"g");r=a.replace(/\((.*)\)/,"-$1").replace(E,"").replace(K,"."),r=r||0}else{if(u)throw Error("Invalid Input");r=0}return v||(r*=_,r=r.toFixed(4)),n?Wo(r):r}function wl(a,e){var n=e.pattern,r=e.negativePattern,s=e.symbol,u=e.separator,c=e.decimal,v=e.groups,_=(""+a).replace(/^-/,"").split("."),h=_[0],p=_[1];return(a.value>=0?n:r).replace("!",s).replace("#",h.replace(v,"$1"+u)+(p?c+p:""))}ln.prototype={add:function(e){var n=this.intValue,r=this.s,s=this.p;return ln((n+=Rr(e,r))/(r.fromCents?1:s),r)},subtract:function(e){var n=this.intValue,r=this.s,s=this.p;return ln((n-=Rr(e,r))/(r.fromCents?1:s),r)},multiply:function(e){var n=this.intValue,r=this.s;return ln((n*=e)/(r.fromCents?1:Ii(r.precision)),r)},divide:function(e){var n=this.intValue,r=this.s;return ln(n/=Rr(e,r,!1),r)},distribute:function(e){for(var n=this.intValue,r=this.p,s=this.s,u=[],c=Math[n>=0?"floor":"ceil"](n/e),v=Math.abs(n-c*e),_=s.fromCents?1:r;e!==0;e--){var h=ln(c/_,s);v-- >0&&(h=h[n>=0?"add":"subtract"](1/_)),u.push(h)}return u},dollars:function(){return~~this.value},cents:function(){var e=this.intValue,n=this.p;return~~(e%n)},format:function(e){var n=this.s;return typeof e=="function"?e(this,n):n.format(this,Object.assign({},n,e))},toString:function(){var e=this.intValue,n=this.p,r=this.s;return _l(e/n,r.increment).toFixed(r.precision)},toJSON:function(){return this.value}};var kl={exports:{}};(function(a){var e=function(n){var r=Object.prototype,s=r.hasOwnProperty,u=Object.defineProperty||function(x,k,B){x[k]=B.value},c,v=typeof Symbol=="function"?Symbol:{},_=v.iterator||"@@iterator",h=v.asyncIterator||"@@asyncIterator",p=v.toStringTag||"@@toStringTag";function E(x,k,B){return Object.defineProperty(x,k,{value:B,enumerable:!0,configurable:!0,writable:!0}),x[k]}try{E({},"")}catch{E=function(k,B,Q){return k[B]=Q}}function K(x,k,B,Q){var w=k&&k.prototype instanceof J?k:J,z=Object.create(w.prototype),Ce=new ve(Q||[]);return u(z,"_invoke",{value:Oe(x,B,Ce)}),z}n.wrap=K;function G(x,k,B){try{return{type:"normal",arg:x.call(k,B)}}catch(Q){return{type:"throw",arg:Q}}}var ie="suspendedStart",W="suspendedYield",Z="executing",A="completed",T={};function J(){}function O(){}function ce(){}var ge={};E(ge,_,function(){return this});var X=Object.getPrototypeOf,he=X&&X(X(Ke([])));he&&he!==r&&s.call(he,_)&&(ge=he);var pe=ce.prototype=J.prototype=Object.create(ge);O.prototype=ce,u(pe,"constructor",{value:ce,configurable:!0}),u(ce,"constructor",{value:O,configurable:!0}),O.displayName=E(ce,p,"GeneratorFunction");function be(x){["next","throw","return"].forEach(function(k){E(x,k,function(B){return this._invoke(k,B)})})}n.isGeneratorFunction=function(x){var k=typeof x=="function"&&x.constructor;return k?k===O||(k.displayName||k.name)==="GeneratorFunction":!1},n.mark=function(x){return Object.setPrototypeOf?Object.setPrototypeOf(x,ce):(x.__proto__=ce,E(x,p,"GeneratorFunction")),x.prototype=Object.create(pe),x},n.awrap=function(x){return{__await:x}};function Fe(x,k){function B(z,Ce,ae,oe){var se=G(x[z],x,Ce);if(se.type==="throw")oe(se.arg);else{var H=se.arg,N=H.value;return N&&typeof N=="object"&&s.call(N,"__await")?k.resolve(N.__await).then(function(Le){B("next",Le,ae,oe)},function(Le){B("throw",Le,ae,oe)}):k.resolve(N).then(function(Le){H.value=Le,ae(H)},function(Le){return B("throw",Le,ae,oe)})}}var Q;function w(z,Ce){function ae(){return new k(function(oe,se){B(z,Ce,oe,se)})}return Q=Q?Q.then(ae,ae):ae()}u(this,"_invoke",{value:w})}be(Fe.prototype),E(Fe.prototype,h,function(){return this}),n.AsyncIterator=Fe,n.async=function(x,k,B,Q,w){w===void 0&&(w=Promise);var z=new Fe(K(x,k,B,Q),w);return n.isGeneratorFunction(k)?z:z.next().then(function(Ce){return Ce.done?Ce.value:z.next()})};function Oe(x,k,B){var Q=ie;return function(z,Ce){if(Q===Z)throw new Error("Generator is already running");if(Q===A){if(z==="throw")throw Ce;return je()}for(B.method=z,B.arg=Ce;;){var ae=B.delegate;if(ae){var oe=ye(ae,B);if(oe){if(oe===T)continue;return oe}}if(B.method==="next")B.sent=B._sent=B.arg;else if(B.method==="throw"){if(Q===ie)throw Q=A,B.arg;B.dispatchException(B.arg)}else B.method==="return"&&B.abrupt("return",B.arg);Q=Z;var se=G(x,k,B);if(se.type==="normal"){if(Q=B.done?A:W,se.arg===T)continue;return{value:se.arg,done:B.done}}else se.type==="throw"&&(Q=A,B.method="throw",B.arg=se.arg)}}}function ye(x,k){var B=k.method,Q=x.iterator[B];if(Q===c)return k.delegate=null,B==="throw"&&x.iterator.return&&(k.method="return",k.arg=c,ye(x,k),k.method==="throw")||B!=="return"&&(k.method="throw",k.arg=new TypeError("The iterator does not provide a '"+B+"' method")),T;var w=G(Q,x.iterator,k.arg);if(w.type==="throw")return k.method="throw",k.arg=w.arg,k.delegate=null,T;var z=w.arg;if(!z)return k.method="throw",k.arg=new TypeError("iterator result is not an object"),k.delegate=null,T;if(z.done)k[x.resultName]=z.value,k.next=x.nextLoc,k.method!=="return"&&(k.method="next",k.arg=c);else return z;return k.delegate=null,T}be(pe),E(pe,p,"Generator"),E(pe,_,function(){return this}),E(pe,"toString",function(){return"[object Generator]"});function Ee(x){var k={tryLoc:x[0]};1 in x&&(k.catchLoc=x[1]),2 in x&&(k.finallyLoc=x[2],k.afterLoc=x[3]),this.tryEntries.push(k)}function Te(x){var k=x.completion||{};k.type="normal",delete k.arg,x.completion=k}function ve(x){this.tryEntries=[{tryLoc:"root"}],x.forEach(Ee,this),this.reset(!0)}n.keys=function(x){var k=Object(x),B=[];for(var Q in k)B.push(Q);return B.reverse(),function w(){for(;B.length;){var z=B.pop();if(z in k)return w.value=z,w.done=!1,w}return w.done=!0,w}};function Ke(x){if(x){var k=x[_];if(k)return k.call(x);if(typeof x.next=="function")return x;if(!isNaN(x.length)){var B=-1,Q=function w(){for(;++B<x.length;)if(s.call(x,B))return w.value=x[B],w.done=!1,w;return w.value=c,w.done=!0,w};return Q.next=Q}}return{next:je}}n.values=Ke;function je(){return{value:c,done:!0}}return ve.prototype={constructor:ve,reset:function(x){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(Te),!x)for(var k in this)k.charAt(0)==="t"&&s.call(this,k)&&!isNaN(+k.slice(1))&&(this[k]=c)},stop:function(){this.done=!0;var x=this.tryEntries[0],k=x.completion;if(k.type==="throw")throw k.arg;return this.rval},dispatchException:function(x){if(this.done)throw x;var k=this;function B(oe,se){return z.type="throw",z.arg=x,k.next=oe,se&&(k.method="next",k.arg=c),!!se}for(var Q=this.tryEntries.length-1;Q>=0;--Q){var w=this.tryEntries[Q],z=w.completion;if(w.tryLoc==="root")return B("end");if(w.tryLoc<=this.prev){var Ce=s.call(w,"catchLoc"),ae=s.call(w,"finallyLoc");if(Ce&&ae){if(this.prev<w.catchLoc)return B(w.catchLoc,!0);if(this.prev<w.finallyLoc)return B(w.finallyLoc)}else if(Ce){if(this.prev<w.catchLoc)return B(w.catchLoc,!0)}else if(ae){if(this.prev<w.finallyLoc)return B(w.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(x,k){for(var B=this.tryEntries.length-1;B>=0;--B){var Q=this.tryEntries[B];if(Q.tryLoc<=this.prev&&s.call(Q,"finallyLoc")&&this.prev<Q.finallyLoc){var w=Q;break}}w&&(x==="break"||x==="continue")&&w.tryLoc<=k&&k<=w.finallyLoc&&(w=null);var z=w?w.completion:{};return z.type=x,z.arg=k,w?(this.method="next",this.next=w.finallyLoc,T):this.complete(z)},complete:function(x,k){if(x.type==="throw")throw x.arg;return x.type==="break"||x.type==="continue"?this.next=x.arg:x.type==="return"?(this.rval=this.arg=x.arg,this.method="return",this.next="end"):x.type==="normal"&&k&&(this.next=k),T},finish:function(x){for(var k=this.tryEntries.length-1;k>=0;--k){var B=this.tryEntries[k];if(B.finallyLoc===x)return this.complete(B.completion,B.afterLoc),Te(B),T}},catch:function(x){for(var k=this.tryEntries.length-1;k>=0;--k){var B=this.tryEntries[k];if(B.tryLoc===x){var Q=B.completion;if(Q.type==="throw"){var w=Q.arg;Te(B)}return w}}throw new Error("illegal catch attempt")},delegateYield:function(x,k,B){return this.delegate={iterator:Ke(x),resultName:k,nextLoc:B},this.method==="next"&&(this.arg=c),T}},n}(a.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(kl);var Ri=(a,e)=>`${a}-${e}-${Math.random().toString(16).slice(3,8)}`;const Dl=Ri;let no=0;var Go=({id:a,action:e,payload:n={}})=>{let r=a;return typeof r>"u"&&(r=Dl("Job",no),no+=1),{id:r,action:e,payload:n}},Vn={};let Li=!1;Vn.logging=Li;Vn.setLogging=a=>{Li=a};Vn.log=(...a)=>Li?console.log.apply(void 0,a):null;const El=Go,{log:Ar}=Vn,Sl=Ri;let ro=0;var Tl=()=>{const a=Sl("Scheduler",ro),e={},n={};let r=[];ro+=1;const s=()=>r.length,u=()=>Object.keys(e).length,c=()=>{if(r.length!==0){const E=Object.keys(e);for(let K=0;K<E.length;K+=1)if(typeof n[E[K]]>"u"){r[0](e[E[K]]);break}}},v=(E,K)=>new Promise((G,ie)=>{const W=El({action:E,payload:K});r.push(async Z=>{r.shift(),n[Z.id]=W;try{G(await Z[E].apply(void 0,[...K,W.id]))}catch(A){ie(A)}finally{delete n[Z.id],c()}}),Ar(`[${a}]: Add ${W.id} to JobQueue`),Ar(`[${a}]: JobQueue length=${r.length}`),c()});return{addWorker:E=>(e[E.id]=E,Ar(`[${a}]: Add ${E.id}`),Ar(`[${a}]: Number of workers=${u()}`),c(),E.id),addJob:async(E,...K)=>{if(u()===0)throw Error(`[${a}]: You need to have at least one worker before adding jobs`);return v(E,K)},terminate:async()=>{Object.keys(e).forEach(async E=>{await e[E].terminate()}),r=[]},getQueueLen:s,getNumWorkers:u}};function Cl(a){throw new Error('Could not dynamically require "'+a+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}function Ol(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var Pl=Ol;const Al=Pl;var Il=a=>{const e={};return typeof WorkerGlobalScope<"u"?e.type="webworker":Al()?e.type="electron":typeof document=="object"?e.type="browser":typeof process=="object"&&typeof Cl=="function"&&(e.type="node"),typeof a>"u"?e:e[a]};const Rl=Il("type")==="browser",Ll=Rl?a=>new URL(a,window.location.href).href:a=>a;var Ml=a=>{const e={...a};return["corePath","workerPath","langPath"].forEach(n=>{a[n]&&(e[n]=Ll(e[n]))}),e},Nl=a=>{const e=[],n=[],r=[],s=[],u=[];return a.blocks&&a.blocks.forEach(c=>{c.paragraphs.forEach(v=>{v.lines.forEach(_=>{_.words.forEach(h=>{h.symbols.forEach(p=>{u.push({...p,page:a,block:c,paragraph:v,line:_,word:h})}),s.push({...h,page:a,block:c,paragraph:v,line:_})}),r.push({..._,page:a,block:c,paragraph:v})}),n.push({...v,page:a,block:c})}),e.push({...c,page:a})}),{...a,blocks:e,paragraphs:n,lines:r,words:s,symbols:u}},Yo={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3};const Bl="tesseract.js",Kl="5.1.0",Fl="Pure Javascript Multilingual OCR",jl="src/index.js",Ul="src/index.d.ts",ql="dist/tesseract.min.js",Vl="dist/tesseract.min.js",zl={start:"node scripts/server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js && rollup -c scripts/rollup.esm.mjs","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json",prepublishOnly:"npm run build",wait:"rimraf dist && wait-on http://localhost:3000/dist/tesseract.min.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:* test:node:all","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser-tpl":"mocha-headless-chrome -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:detect":"npm run test:browser-tpl -- -f ./tests/detect.test.html","test:browser:recognize":"npm run test:browser-tpl -- -f ./tests/recognize.test.html","test:browser:scheduler":"npm run test:browser-tpl -- -f ./tests/scheduler.test.html","test:browser:FS":"npm run test:browser-tpl -- -f ./tests/FS.test.html",lint:"eslint src","lint:fix":"eslint --fix src",postinstall:"opencollective-postinstall || true"},xl={"./src/worker/node/index.js":"./src/worker/browser/index.js"},Hl="",Wl=["jeromewu"],Gl="Apache-2.0",Yl={"@babel/core":"^7.21.4","@babel/eslint-parser":"^7.21.3","@babel/preset-env":"^7.21.4","@rollup/plugin-commonjs":"^24.1.0",acorn:"^8.8.2","babel-loader":"^9.1.2",buffer:"^6.0.3",cors:"^2.8.5",eslint:"^7.32.0","eslint-config-airbnb-base":"^14.2.1","eslint-plugin-import":"^2.27.5","expect.js":"^0.3.1",express:"^4.18.2",mocha:"^10.2.0","mocha-headless-chrome":"^4.0.0","npm-run-all":"^4.1.5",nyc:"^15.1.0",rimraf:"^5.0.0",rollup:"^3.20.7","wait-on":"^7.0.1",webpack:"^5.79.0","webpack-bundle-analyzer":"^4.8.0","webpack-cli":"^5.0.1","webpack-dev-middleware":"^6.0.2","rollup-plugin-sourcemaps":"^0.6.3"},Zl={"bmp-js":"^0.1.0","idb-keyval":"^6.2.0","is-electron":"^2.2.2","is-url":"^1.2.4","node-fetch":"^2.6.9","opencollective-postinstall":"^2.0.3","regenerator-runtime":"^0.13.3","tesseract.js-core":"^5.1.0","wasm-feature-detect":"^1.2.11",zlibjs:"^0.3.1"},Jl={"@rollup/pluginutils":"^5.0.2"},Ql={type:"git",url:"https://github.com/naptha/tesseract.js.git"},$l={url:"https://github.com/naptha/tesseract.js/issues"},Xl="https://github.com/naptha/tesseract.js",eu={type:"opencollective",url:"https://opencollective.com/tesseractjs"},tu={name:Bl,version:Kl,description:Fl,main:jl,types:Ul,unpkg:ql,jsdelivr:Vl,scripts:zl,browser:xl,author:Hl,contributors:Wl,license:Gl,devDependencies:Yl,dependencies:Zl,overrides:Jl,repository:Ql,bugs:$l,homepage:Xl,collective:eu};var nu={workerBlobURL:!0,logger:()=>{}};const ru=tu.version,iu=nu;var au={...iu,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${ru}/dist/worker.min.js`},ou=({workerPath:a,workerBlobURL:e})=>{let n;if(Blob&&URL&&e){const r=new Blob([`importScripts("${a}");`],{type:"application/javascript"});n=new Worker(URL.createObjectURL(r))}else n=new Worker(a);return n},su=a=>{a.terminate()},lu=(a,e)=>{a.onmessage=({data:n})=>{e(n)}},uu=async(a,e)=>{a.postMessage(e)};const Ei=a=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{e(r.result)},r.onerror=({target:{error:{code:s}}})=>{n(Error(`File could not be read! Code=${s}`))},r.readAsArrayBuffer(a)}),Ai=async a=>{let e=a;if(typeof a>"u")return"undefined";if(typeof a=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(a)?e=atob(a.split(",")[1]).split("").map(n=>n.charCodeAt(0)):e=await(await fetch(a)).arrayBuffer();else if(typeof HTMLElement<"u"&&a instanceof HTMLElement)a.tagName==="IMG"&&(e=await Ai(a.src)),a.tagName==="VIDEO"&&(e=await Ai(a.poster)),a.tagName==="CANVAS"&&await new Promise(n=>{a.toBlob(async r=>{e=await Ei(r),n()})});else if(typeof OffscreenCanvas<"u"&&a instanceof OffscreenCanvas){const n=await a.convertToBlob();e=await Ei(n)}else(a instanceof File||a instanceof Blob)&&(e=await Ei(a));return new Uint8Array(e)};var cu=Ai;const fu=au,du=ou,hu=su,pu=lu,mu=uu,gu=cu;var vu={defaultOptions:fu,spawnWorker:du,terminateWorker:hu,onMessage:pu,send:mu,loadImage:gu};const _u=Ml,yu=Nl,sn=Go,{log:io}=Vn,bu=Ri,In=Yo,{defaultOptions:wu,spawnWorker:ku,terminateWorker:Du,onMessage:Eu,loadImage:ao,send:Su}=vu;let oo=0;var Zo=async(a="eng",e=In.LSTM_ONLY,n={},r={})=>{const s=bu("Worker",oo),{logger:u,errorHandler:c,...v}=_u({...wu,...n}),_={},h={},p=typeof a=="string"?a.split("+"):a;let E=e,K=r;const G=[In.DEFAULT,In.LSTM_ONLY].includes(e)&&!v.legacyCore;let ie,W;const Z=new Promise((w,z)=>{W=w,ie=z}),A=w=>{ie(w.message)};let T=ku(v);T.onerror=A,oo+=1;const J=(w,z)=>{_[w]=z},O=(w,z)=>{h[w]=z},ce=({id:w,action:z,payload:Ce})=>new Promise((ae,oe)=>{io(`[${s}]: Start ${w}, action=${z}`);const se=`${z}-${w}`;J(se,ae),O(se,oe),Su(T,{workerId:s,jobId:w,action:z,payload:Ce})}),ge=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),X=w=>ce(sn({id:w,action:"load",payload:{options:{lstmOnly:G,corePath:v.corePath,logging:v.logging}}})),he=(w,z,Ce)=>ce(sn({id:Ce,action:"FS",payload:{method:"writeFile",args:[w,z]}})),pe=(w,z)=>ce(sn({id:z,action:"FS",payload:{method:"readFile",args:[w,{encoding:"utf8"}]}})),be=(w,z)=>ce(sn({id:z,action:"FS",payload:{method:"unlink",args:[w]}})),Fe=(w,z,Ce)=>ce(sn({id:Ce,action:"FS",payload:{method:w,args:z}})),Oe=()=>console.warn("`loadLanguage` is depreciated and should be removed from code (workers now come with language pre-loaded)"),ye=(w,z)=>ce(sn({id:z,action:"loadLanguage",payload:{langs:w,options:{langPath:v.langPath,dataPath:v.dataPath,cachePath:v.cachePath,cacheMethod:v.cacheMethod,gzip:v.gzip,lstmOnly:[In.LSTM_ONLY,In.TESSERACT_LSTM_COMBINED].includes(E)&&!v.legacyLang}}})),Ee=()=>console.warn("`initialize` is depreciated and should be removed from code (workers now come pre-initialized)"),Te=(w,z,Ce,ae)=>ce(sn({id:ae,action:"initialize",payload:{langs:w,oem:z,config:Ce}})),ve=(w="eng",z,Ce,ae)=>{if(G&&[In.TESSERACT_ONLY,In.TESSERACT_LSTM_COMBINED].includes(z))throw Error("Legacy model requested but code missing.");const oe=z||E;E=oe;const se=Ce||K;K=se;const N=(typeof w=="string"?w.split("+"):w).filter(Le=>!p.includes(Le));return p.push(...N),N.length>0?ye(N,ae).then(()=>Te(w,oe,se,ae)):Te(w,oe,se,ae)},Ke=(w={},z)=>ce(sn({id:z,action:"setParameters",payload:{params:w}})),je=async(w,z={},Ce={blocks:!0,text:!0,hocr:!0,tsv:!0},ae)=>ce(sn({id:ae,action:"recognize",payload:{image:await ao(w),options:z,output:Ce}})),x=(w="Tesseract OCR Result",z=!1,Ce)=>(console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),ce(sn({id:Ce,action:"getPDF",payload:{title:w,textonly:z}}))),k=async(w,z)=>{if(G)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return ce(sn({id:z,action:"detect",payload:{image:await ao(w)}}))},B=async()=>(T!==null&&(Du(T),T=null),Promise.resolve());Eu(T,({workerId:w,jobId:z,status:Ce,action:ae,data:oe})=>{const se=`${ae}-${z}`;if(Ce==="resolve"){io(`[${w}]: Complete ${z}`);let H=oe;ae==="recognize"?H=yu(oe):ae==="getPDF"&&(H=Array.from({...oe,length:Object.keys(oe).length})),_[se]({jobId:z,data:H})}else if(Ce==="reject")if(h[se](oe),ae==="load"&&ie(oe),c)c(oe);else throw Error(oe);else Ce==="progress"&&u({...oe,userJobId:z})});const Q={id:s,worker:T,setResolve:J,setReject:O,load:ge,writeText:he,readText:pe,removeFile:be,FS:Fe,loadLanguage:Oe,initialize:Ee,reinitialize:ve,setParameters:Ke,recognize:je,getPDF:x,detect:k,terminate:B};return X().then(()=>ye(a)).then(()=>Te(a,e,r)).then(()=>W(Q)).catch(()=>{}),Z};const Jo=Zo,Tu=async(a,e,n)=>{const r=await Jo(e,1,n);return r.recognize(a).finally(async()=>{await r.terminate()})},Cu=async(a,e)=>{const n=await Jo("osd",0,e);return n.detect(a).finally(async()=>{await n.terminate()})};var Ou={recognize:Tu,detect:Cu},Pu={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"},Au={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"};const Iu=Tl,Ru=Zo,Lu=Ou,Mu=Pu,Nu=Yo,Bu=Au,{setLogging:Ku}=Vn;var Fu={languages:Mu,OEM:Nu,PSM:Bu,createScheduler:Iu,createWorker:Ru,setLogging:Ku,...Lu};const Qo=zo(Fu);function so(a,e,n){const r=a.slice();return r[21]=e[n],r}function lo(a,e,n){const r=a.slice();return r[24]=e[n],r}function uo(a,e,n){const r=a.slice();return r[27]=e[n],r}function co(a,e,n){const r=a.slice();return r[30]=e[n],r}function fo(a){let e,n,r=a[0].name+"",s,u,c,v,_,h,p,E,K,G='<img id="imgChosen" class="img-fluid" alt="Your chosen receipt"/>',ie,W,Z,A,T="Receipt description",J,O,ce,ge,X,he,pe,be="Receipt Date",Fe,Oe,ye,Ee,Te,ve,Ke="Receipt value:",je,x,k,B,Q,w,z,Ce="Receipt Type",ae,oe,se,H="--Please choose type--",N,Le,Be,$e="Receipt Currency",lt,ne,We,qe,_e="Add Receipt",nt,kt,pt="<h4>Scanning image...</h4> <progress>Scanning image...</progress>",Kt,mt,en;function xt(de,P){return de[8]?Uu:ju}let Ft=xt(a),Dt=Ft(a),He=ze(a[1]),dt=[];for(let de=0;de<He.length;de+=1)dt[de]=ho(co(a,He,de));function _t(de){a[14](de)}let tn={format:"yyyy-MM-dd",closeOnSelection:!0,id:"rDate"};a[3]!==void 0&&(tn.value=a[3]),Oe=new qn({props:tn}),Yt.push(()=>En(Oe,"value",_t));let Ht=ze(a[2]),ht=[];for(let de=0;de<Ht.length;de+=1)ht[de]=po(uo(a,Ht,de));let it=ze(Object.keys(rr)),Se=[];for(let de=0;de<it.length;de+=1)Se[de]=mo(lo(a,it,de));let ft=ze(Object.keys(wt)),ot=[];for(let de=0;de<ft.length;de+=1)ot[de]=go(so(a,ft,de));return{c(){e=L("h1"),n=Ie('Add Receipt to "'),s=Ie(r),u=Ie('"'),c=le(),Dt.c(),v=le(),_=L("div"),h=L("input"),p=le(),E=L("div"),K=L("div"),K.innerHTML=G,ie=le(),W=L("div"),Z=L("div"),A=L("label"),A.textContent=T,J=le(),O=L("input"),ce=le(),ge=L("datalist");for(let de=0;de<dt.length;de+=1)dt[de].c();X=le(),he=L("div"),pe=L("label"),pe.textContent=be,Fe=le(),Lt(Oe.$$.fragment),Ee=le(),Te=L("div"),ve=L("label"),ve.textContent=Ke,je=le(),x=L("input"),k=le(),B=L("datalist");for(let de=0;de<ht.length;de+=1)ht[de].c();Q=le(),w=L("div"),z=L("label"),z.textContent=Ce,ae=le(),oe=L("select"),se=L("option"),se.textContent=H;for(let de=0;de<Se.length;de+=1)Se[de].c();N=le(),Le=L("div"),Be=L("label"),Be.textContent=$e,lt=le(),ne=L("select");for(let de=0;de<ot.length;de+=1)ot[de].c();We=le(),qe=L("button"),qe.textContent=_e,nt=le(),kt=L("div"),kt.innerHTML=pt,this.h()},l(de){e=M(de,"H1",{});var P=te(e);n=Re(P,'Add Receipt to "'),s=Re(P,r),u=Re(P,'"'),P.forEach(b),c=ue(de),Dt.l(de),v=ue(de),_=M(de,"DIV",{class:!0});var Ue=te(_);h=M(Ue,"INPUT",{id:!0,type:!0,accept:!0}),Ue.forEach(b),p=ue(de),E=M(de,"DIV",{id:!0});var ke=te(E);K=M(ke,"DIV",{class:!0,"data-svelte-h":!0}),Ve(K)!=="svelte-lr06dx"&&(K.innerHTML=G),ie=ue(ke),W=M(ke,"DIV",{class:!0});var De=te(W);Z=M(De,"DIV",{class:!0});var yt=te(Z);A=M(yt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ve(A)!=="svelte-1glg0dd"&&(A.textContent=T),J=ue(yt),O=M(yt,"INPUT",{class:!0,list:!0,id:!0,name:!0,placeholder:!0}),ce=ue(yt),ge=M(yt,"DATALIST",{id:!0});var Ot=te(ge);for(let Ze=0;Ze<dt.length;Ze+=1)dt[Ze].l(Ot);Ot.forEach(b),yt.forEach(b),X=ue(De),he=M(De,"DIV",{class:!0});var Jt=te(he);pe=M(Jt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ve(pe)!=="svelte-cn0bms"&&(pe.textContent=be),Fe=ue(Jt),Mt(Oe.$$.fragment,Jt),Jt.forEach(b),Ee=ue(De),Te=M(De,"DIV",{class:!0});var an=te(Te);ve=M(an,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ve(ve)!=="svelte-1y6fy9c"&&(ve.textContent=Ke),je=ue(an),x=M(an,"INPUT",{class:!0,list:!0,id:!0,name:!0,type:!0,step:!0,placeholder:!0}),k=ue(an),B=M(an,"DATALIST",{id:!0});var Wt=te(B);for(let Ze=0;Ze<ht.length;Ze+=1)ht[Ze].l(Wt);Wt.forEach(b),an.forEach(b),Q=ue(De),w=M(De,"DIV",{class:!0});var Pt=te(w);z=M(Pt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ve(z)!=="svelte-1vxf1l8"&&(z.textContent=Ce),ae=ue(Pt),oe=M(Pt,"SELECT",{id:!0,class:!0});var un=te(oe);se=M(un,"OPTION",{"data-svelte-h":!0}),Ve(se)!=="svelte-ua8958"&&(se.textContent=H);for(let Ze=0;Ze<Se.length;Ze+=1)Se[Ze].l(un);un.forEach(b),Pt.forEach(b),N=ue(De),Le=M(De,"DIV",{class:!0});var Gt=te(Le);Be=M(Gt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ve(Be)!=="svelte-15s44q2"&&(Be.textContent=$e),lt=ue(Gt),ne=M(Gt,"SELECT",{id:!0,class:!0});var ut=te(ne);for(let Ze=0;Ze<ot.length;Ze+=1)ot[Ze].l(ut);ut.forEach(b),Gt.forEach(b),We=ue(De),qe=M(De,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Ve(qe)!=="svelte-1059pct"&&(qe.textContent=_e),De.forEach(b),ke.forEach(b),nt=ue(de),kt=M(de,"DIV",{class:!0,"data-svelte-h":!0}),Ve(kt)!=="svelte-z0xj81"&&(kt.innerHTML=pt),this.h()},h(){y(h,"id","imageInput"),y(h,"type","file"),y(h,"accept","image/*;capture=camera"),y(_,"class","mb-3"),y(K,"class","img-scan d-flex col-md-6 col-sm-12"),y(A,"for","rDesc"),y(A,"class","form-label"),y(O,"class","form-control"),y(O,"list","descOptions"),y(O,"id","rDesc"),y(O,"name","rDesc"),y(O,"placeholder","Double-click for suggestions"),y(ge,"id","descOptions"),y(Z,"class","mb-3"),y(pe,"for","rDate"),y(pe,"class","form-label"),y(he,"class","mb-3"),y(ve,"for","rVal"),y(ve,"class","form-label"),y(x,"class","form-control"),y(x,"list","valOptions"),y(x,"id","rVal"),y(x,"name","rVal"),y(x,"type","number"),y(x,"step","0.01"),y(x,"placeholder","Double-click for suggestions"),y(B,"id","valOptions"),y(Te,"class","mb-3"),y(z,"for","rType"),y(z,"class","form-label"),se.selected=!0,se.__value="--Please choose type--",rt(se,se.__value),y(oe,"id","rType"),y(oe,"class","form-control"),a[7]===void 0&&Rn(()=>a[16].call(oe)),y(w,"class","mb-3"),y(Be,"for","rCurrency"),y(Be,"class","form-label"),y(ne,"id","rCurrency"),y(ne,"class","form-control"),a[4]===void 0&&Rn(()=>a[17].call(ne)),y(Le,"class","mb-3"),y(qe,"type","button"),y(qe,"class","btn btn-primary"),y(W,"class","d-flex flex-column col-md-6 col-sm-12"),y(E,"id","receiptEntry"),bt(E,"show",a[9]),y(kt,"class","flex-column hide"),bt(kt,"show",!a[9]&&a[8])},m(de,P){fe(de,e,P),m(e,n),m(e,s),m(e,u),fe(de,c,P),Dt.m(de,P),fe(de,v,P),fe(de,_,P),m(_,h),fe(de,p,P),fe(de,E,P),m(E,K),m(E,ie),m(E,W),m(W,Z),m(Z,A),m(Z,J),m(Z,O),rt(O,a[5]),m(Z,ce),m(Z,ge);for(let Ue=0;Ue<dt.length;Ue+=1)dt[Ue]&&dt[Ue].m(ge,null);m(W,X),m(W,he),m(he,pe),m(he,Fe),Nt(Oe,he,null),m(W,Ee),m(W,Te),m(Te,ve),m(Te,je),m(Te,x),rt(x,a[6]),m(Te,k),m(Te,B);for(let Ue=0;Ue<ht.length;Ue+=1)ht[Ue]&&ht[Ue].m(B,null);m(W,Q),m(W,w),m(w,z),m(w,ae),m(w,oe),m(oe,se);for(let Ue=0;Ue<Se.length;Ue+=1)Se[Ue]&&Se[Ue].m(oe,null);Vt(oe,a[7],!0),m(W,N),m(W,Le),m(Le,Be),m(Le,lt),m(Le,ne);for(let Ue=0;Ue<ot.length;Ue+=1)ot[Ue]&&ot[Ue].m(ne,null);Vt(ne,a[4],!0),m(W,We),m(W,qe),fe(de,nt,P),fe(de,kt,P),Kt=!0,mt||(en=[xe(h,"change",a[11]),xe(O,"input",a[13]),xe(x,"input",a[15]),xe(oe,"change",a[16]),xe(ne,"change",a[17]),xe(qe,"click",a[10])],mt=!0)},p(de,P){if((!Kt||P[0]&1)&&r!==(r=de[0].name+"")&&et(s,r),Ft!==(Ft=xt(de))&&(Dt.d(1),Dt=Ft(de),Dt&&(Dt.c(),Dt.m(v.parentNode,v))),P[0]&32&&O.value!==de[5]&&rt(O,de[5]),P[0]&2){He=ze(de[1]);let ke;for(ke=0;ke<He.length;ke+=1){const De=co(de,He,ke);dt[ke]?dt[ke].p(De,P):(dt[ke]=ho(De),dt[ke].c(),dt[ke].m(ge,null))}for(;ke<dt.length;ke+=1)dt[ke].d(1);dt.length=He.length}const Ue={};if(!ye&&P[0]&8&&(ye=!0,Ue.value=de[3],Dn(()=>ye=!1)),Oe.$set(Ue),P[0]&64&&Vr(x.value)!==de[6]&&rt(x,de[6]),P[0]&4){Ht=ze(de[2]);let ke;for(ke=0;ke<Ht.length;ke+=1){const De=uo(de,Ht,ke);ht[ke]?ht[ke].p(De,P):(ht[ke]=po(De),ht[ke].c(),ht[ke].m(B,null))}for(;ke<ht.length;ke+=1)ht[ke].d(1);ht.length=Ht.length}if(P&0){it=ze(Object.keys(rr));let ke;for(ke=0;ke<it.length;ke+=1){const De=lo(de,it,ke);Se[ke]?Se[ke].p(De,P):(Se[ke]=mo(De),Se[ke].c(),Se[ke].m(oe,null))}for(;ke<Se.length;ke+=1)Se[ke].d(1);Se.length=it.length}if(P[0]&128&&Vt(oe,de[7]),P&0){ft=ze(Object.keys(wt));let ke;for(ke=0;ke<ft.length;ke+=1){const De=so(de,ft,ke);ot[ke]?ot[ke].p(De,P):(ot[ke]=go(De),ot[ke].c(),ot[ke].m(ne,null))}for(;ke<ot.length;ke+=1)ot[ke].d(1);ot.length=ft.length}P[0]&16&&Vt(ne,de[4]),(!Kt||P[0]&512)&&bt(E,"show",de[9]),(!Kt||P[0]&768)&&bt(kt,"show",!de[9]&&de[8])},i(de){Kt||(tt(Oe.$$.fragment,de),Kt=!0)},o(de){at(Oe.$$.fragment,de),Kt=!1},d(de){de&&(b(e),b(c),b(v),b(_),b(p),b(E),b(nt),b(kt)),Dt.d(de),Ct(dt,de),Bt(Oe),Ct(ht,de),Ct(Se,de),Ct(ot,de),mt=!1,hn(en)}}}function ju(a){let e,n="Choose image to begin";return{c(){e=L("p"),e.textContent=n},l(r){e=M(r,"P",{"data-svelte-h":!0}),Ve(e)!=="svelte-1rdbglw"&&(e.textContent=n)},m(r,s){fe(r,e,s)},d(r){r&&b(e)}}}function Uu(a){let e,n="Click 'Browse' to start again";return{c(){e=L("p"),e.textContent=n},l(r){e=M(r,"P",{"data-svelte-h":!0}),Ve(e)!=="svelte-1raiglx"&&(e.textContent=n)},m(r,s){fe(r,e,s)},d(r){r&&b(e)}}}function ho(a){let e,n;return{c(){e=L("option"),this.h()},l(r){e=M(r,"OPTION",{}),te(e).forEach(b),this.h()},h(){e.__value=n=a[30],rt(e,e.__value)},m(r,s){fe(r,e,s)},p(r,s){s[0]&2&&n!==(n=r[30])&&(e.__value=n,rt(e,e.__value))},d(r){r&&b(e)}}}function po(a){let e,n=a[27]+"",r,s;return{c(){e=L("option"),r=Ie(n),this.h()},l(u){e=M(u,"OPTION",{});var c=te(e);r=Re(c,n),c.forEach(b),this.h()},h(){e.__value=s=a[27],rt(e,e.__value)},m(u,c){fe(u,e,c),m(e,r)},p(u,c){c[0]&4&&n!==(n=u[27]+"")&&et(r,n),c[0]&4&&s!==(s=u[27])&&(e.__value=s,rt(e,e.__value))},d(u){u&&b(e)}}}function mo(a){let e,n=a[24]+"",r;return{c(){e=L("option"),r=Ie(n),this.h()},l(s){e=M(s,"OPTION",{});var u=te(e);r=Re(u,n),u.forEach(b),this.h()},h(){e.__value=a[24],rt(e,e.__value)},m(s,u){fe(s,e,u),m(e,r)},p:vt,d(s){s&&b(e)}}}function go(a){let e,n=a[21]+"",r,s,u=wt[a[21]].symbol+"",c,v;return{c(){e=L("option"),r=Ie(n),s=Ie(" ("),c=Ie(u),v=Ie(`)
                `),this.h()},l(_){e=M(_,"OPTION",{});var h=te(e);r=Re(h,n),s=Re(h," ("),c=Re(h,u),v=Re(h,`)
                `),h.forEach(b),this.h()},h(){e.__value=a[21],rt(e,e.__value)},m(_,h){fe(_,e,h),m(e,r),m(e,s),m(e,c),m(e,v)},p:vt,d(_){_&&b(e)}}}function qu(a){let e,n,r=a[0]&&fo(a);return{c(){e=L("div"),r&&r.c(),this.h()},l(s){e=M(s,"DIV",{class:!0});var u=te(e);r&&r.l(u),u.forEach(b),this.h()},h(){y(e,"class","w-100")},m(s,u){fe(s,e,u),r&&r.m(e,null),n=!0},p(s,u){s[0]?r?(r.p(s,u),u[0]&1&&tt(r,1)):(r=fo(s),r.c(),tt(r,1),r.m(e,null)):r&&(Ln(),at(r,1,1,()=>{r=null}),Mn())},i(s){n||(tt(r),n=!0)},o(s){at(r),n=!1},d(s){s&&b(e),r&&r.d()}}}function Vu(a,e,n){let{tripId:r}=e,s,u=[],c=[],v=new Date,_,h,p,E,K,G,ie,W=!1;r>-1&&Rt.trips.get(r).then(he=>{n(0,s=he),n(4,_=s.defaultCurrency)});async function Z(){let he=document.getElementById("imgChosen");ie=he.naturalWidth,G=he.naturalHeight,await Rt.receipts.add({description:h,currency:_,receiptDate:v,receiptType:E,total:p,tripId:r,imageData:K,imageHeight:G,imageWidth:ie}),window.location.href="#/trip/"+r}async function A(he){var pe=await Qo.recognize(he,"eng");return pe.data.lines}async function T(he){n(1,u=[]),n(2,c=[]),n(9,W=!1);var pe=he.target.files[0];n(8,K=pe);var be=URL.createObjectURL(pe);const Fe=document.getElementById("imgChosen");Fe.src=be;var Oe=await A(be);for(let ye of Oe){if(ye.confidence<40)continue;u.push(ye.text);let Ee=ln(ye.text);Ee.value>0&&c.push(Ee.format({symbol:"",separator:""}))}n(1,u),n(2,c=c.reverse()),n(9,W=!0)}function J(){h=this.value,n(5,h)}function O(he){v=he,n(3,v)}function ce(){p=Vr(this.value),n(6,p)}function ge(){E=Un(this),n(7,E)}function X(){_=Un(this),n(4,_)}return a.$$set=he=>{"tripId"in he&&n(12,r=he.tripId)},[s,u,c,v,_,h,p,E,K,W,Z,T,r,J,O,ce,ge,X]}class zu extends $t{constructor(e){super(),Xt(this,e,Vu,qu,Zt,{tripId:12},null,[-1,-1])}}function vo(a,e,n){const r=a.slice();return r[21]=e[n],r}function _o(a,e,n){const r=a.slice();return r[24]=e[n],r}function yo(a,e,n){const r=a.slice();return r[27]=e[n],r}function bo(a,e,n){const r=a.slice();return r[30]=e[n],r}function wo(a){let e,n,r=a[0].description+"",s,u,c,v,_,h,p,E,K,G,ie,W,Z,A,T,J="Receipt description",O,ce,ge,X,he,pe,be,Fe="Receipt Date",Oe,ye,Ee,Te,ve,Ke,je="Receipt value:",x,k,B,Q,w,z,Ce,ae="Receipt Type",oe,se,H,N="--Please choose type--",Le,Be,$e,lt="Receipt Currency",ne,We,qe,_e,nt="Update Receipt",kt,pt,Kt="<h4>Scanning image...</h4> <progress>Scanning image...</progress>",mt,en,xt;function Ft(P,Ue){return P[8]?Hu:xu}let Dt=Ft(a),He=Dt(a),dt=ze(a[1]),_t=[];for(let P=0;P<dt.length;P+=1)_t[P]=ko(bo(a,dt,P));function tn(P){a[14](P)}let Ht={format:"yyyy-MM-dd",closeOnSelection:!0,id:"rDate"};a[3]!==void 0&&(Ht.value=a[3]),ye=new qn({props:Ht}),Yt.push(()=>En(ye,"value",tn));let ht=ze(a[2]),it=[];for(let P=0;P<ht.length;P+=1)it[P]=Do(yo(a,ht,P));let Se=ze(Object.keys(rr)),ft=[];for(let P=0;P<Se.length;P+=1)ft[P]=Eo(_o(a,Se,P));let ot=ze(Object.keys(wt)),de=[];for(let P=0;P<ot.length;P+=1)de[P]=So(vo(a,ot,P));return{c(){e=L("h1"),n=Ie('Update Receipt for "'),s=Ie(r),u=Ie('"'),c=le(),He.c(),v=le(),_=L("div"),h=L("input"),p=le(),E=L("div"),K=L("div"),G=L("img"),W=le(),Z=L("div"),A=L("div"),T=L("label"),T.textContent=J,O=le(),ce=L("input"),ge=le(),X=L("datalist");for(let P=0;P<_t.length;P+=1)_t[P].c();he=le(),pe=L("div"),be=L("label"),be.textContent=Fe,Oe=le(),Lt(ye.$$.fragment),Te=le(),ve=L("div"),Ke=L("label"),Ke.textContent=je,x=le(),k=L("input"),B=le(),Q=L("datalist");for(let P=0;P<it.length;P+=1)it[P].c();w=le(),z=L("div"),Ce=L("label"),Ce.textContent=ae,oe=le(),se=L("select"),H=L("option"),H.textContent=N;for(let P=0;P<ft.length;P+=1)ft[P].c();Le=le(),Be=L("div"),$e=L("label"),$e.textContent=lt,ne=le(),We=L("select");for(let P=0;P<de.length;P+=1)de[P].c();qe=le(),_e=L("button"),_e.textContent=nt,kt=le(),pt=L("div"),pt.innerHTML=Kt,this.h()},l(P){e=M(P,"H1",{});var Ue=te(e);n=Re(Ue,'Update Receipt for "'),s=Re(Ue,r),u=Re(Ue,'"'),Ue.forEach(b),c=ue(P),He.l(P),v=ue(P),_=M(P,"DIV",{class:!0});var ke=te(_);h=M(ke,"INPUT",{id:!0,type:!0,accept:!0}),ke.forEach(b),p=ue(P),E=M(P,"DIV",{id:!0});var De=te(E);K=M(De,"DIV",{class:!0});var yt=te(K);G=M(yt,"IMG",{id:!0,class:!0,src:!0,alt:!0}),yt.forEach(b),W=ue(De),Z=M(De,"DIV",{class:!0});var Ot=te(Z);A=M(Ot,"DIV",{class:!0});var Jt=te(A);T=M(Jt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ve(T)!=="svelte-1glg0dd"&&(T.textContent=J),O=ue(Jt),ce=M(Jt,"INPUT",{class:!0,list:!0,id:!0,name:!0,placeholder:!0}),ge=ue(Jt),X=M(Jt,"DATALIST",{id:!0});var an=te(X);for(let Tt=0;Tt<_t.length;Tt+=1)_t[Tt].l(an);an.forEach(b),Jt.forEach(b),he=ue(Ot),pe=M(Ot,"DIV",{class:!0});var Wt=te(pe);be=M(Wt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ve(be)!=="svelte-cn0bms"&&(be.textContent=Fe),Oe=ue(Wt),Mt(ye.$$.fragment,Wt),Wt.forEach(b),Te=ue(Ot),ve=M(Ot,"DIV",{class:!0});var Pt=te(ve);Ke=M(Pt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ve(Ke)!=="svelte-1y6fy9c"&&(Ke.textContent=je),x=ue(Pt),k=M(Pt,"INPUT",{class:!0,list:!0,id:!0,name:!0,type:!0,step:!0,placeholder:!0}),B=ue(Pt),Q=M(Pt,"DATALIST",{id:!0});var un=te(Q);for(let Tt=0;Tt<it.length;Tt+=1)it[Tt].l(un);un.forEach(b),Pt.forEach(b),w=ue(Ot),z=M(Ot,"DIV",{class:!0});var Gt=te(z);Ce=M(Gt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ve(Ce)!=="svelte-1vxf1l8"&&(Ce.textContent=ae),oe=ue(Gt),se=M(Gt,"SELECT",{id:!0,class:!0});var ut=te(se);H=M(ut,"OPTION",{"data-svelte-h":!0}),Ve(H)!=="svelte-10m9j2x"&&(H.textContent=N);for(let Tt=0;Tt<ft.length;Tt+=1)ft[Tt].l(ut);ut.forEach(b),Gt.forEach(b),Le=ue(Ot),Be=M(Ot,"DIV",{class:!0});var Ze=te(Be);$e=M(Ze,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ve($e)!=="svelte-15s44q2"&&($e.textContent=lt),ne=ue(Ze),We=M(Ze,"SELECT",{id:!0,class:!0});var ir=te(We);for(let Tt=0;Tt<de.length;Tt+=1)de[Tt].l(ir);ir.forEach(b),Ze.forEach(b),qe=ue(Ot),_e=M(Ot,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Ve(_e)!=="svelte-jbq1gp"&&(_e.textContent=nt),Ot.forEach(b),De.forEach(b),kt=ue(P),pt=M(P,"DIV",{class:!0,"data-svelte-h":!0}),Ve(pt)!=="svelte-z0xj81"&&(pt.innerHTML=Kt),this.h()},h(){y(h,"id","imageInput"),y(h,"type","file"),y(h,"accept","image/*;capture=camera"),y(_,"class","mb-3"),y(G,"id","imgChosen"),y(G,"class","img-fluid"),Nr(G.src,ie=URL.createObjectURL(a[8]))||y(G,"src",ie),y(G,"alt","Your chosen receipt"),y(K,"class","img-scan d-flex col-md-6 col-sm-12"),y(T,"for","rDesc"),y(T,"class","form-label"),y(ce,"class","form-control"),y(ce,"list","descOptions"),y(ce,"id","rDesc"),y(ce,"name","rDesc"),y(ce,"placeholder","Double-click for suggestions"),y(X,"id","descOptions"),y(A,"class","mb-3"),y(be,"for","rDate"),y(be,"class","form-label"),y(pe,"class","mb-3"),y(Ke,"for","rVal"),y(Ke,"class","form-label"),y(k,"class","form-control"),y(k,"list","valOptions"),y(k,"id","rVal"),y(k,"name","rVal"),y(k,"type","number"),y(k,"step","0.01"),y(k,"placeholder","Double-click for suggestions"),y(Q,"id","valOptions"),y(ve,"class","mb-3"),y(Ce,"for","rType"),y(Ce,"class","form-label"),H.__value="--Please choose type--",rt(H,H.__value),y(se,"id","rType"),y(se,"class","form-control"),a[7]===void 0&&Rn(()=>a[16].call(se)),y(z,"class","mb-3"),y($e,"for","rCurrency"),y($e,"class","form-label"),y(We,"id","rCurrency"),y(We,"class","form-control"),a[4]===void 0&&Rn(()=>a[17].call(We)),y(Be,"class","mb-3"),y(_e,"type","button"),y(_e,"class","btn btn-primary"),y(Z,"class","d-flex flex-column col-md-6 col-sm-12"),y(E,"id","receiptEntry"),bt(E,"show",a[9]),y(pt,"class","flex-column hide"),bt(pt,"show",!a[9]&&a[8])},m(P,Ue){fe(P,e,Ue),m(e,n),m(e,s),m(e,u),fe(P,c,Ue),He.m(P,Ue),fe(P,v,Ue),fe(P,_,Ue),m(_,h),fe(P,p,Ue),fe(P,E,Ue),m(E,K),m(K,G),m(E,W),m(E,Z),m(Z,A),m(A,T),m(A,O),m(A,ce),rt(ce,a[5]),m(A,ge),m(A,X);for(let ke=0;ke<_t.length;ke+=1)_t[ke]&&_t[ke].m(X,null);m(Z,he),m(Z,pe),m(pe,be),m(pe,Oe),Nt(ye,pe,null),m(Z,Te),m(Z,ve),m(ve,Ke),m(ve,x),m(ve,k),rt(k,a[6]),m(ve,B),m(ve,Q);for(let ke=0;ke<it.length;ke+=1)it[ke]&&it[ke].m(Q,null);m(Z,w),m(Z,z),m(z,Ce),m(z,oe),m(z,se),m(se,H);for(let ke=0;ke<ft.length;ke+=1)ft[ke]&&ft[ke].m(se,null);Vt(se,a[7],!0),m(Z,Le),m(Z,Be),m(Be,$e),m(Be,ne),m(Be,We);for(let ke=0;ke<de.length;ke+=1)de[ke]&&de[ke].m(We,null);Vt(We,a[4],!0),m(Z,qe),m(Z,_e),fe(P,kt,Ue),fe(P,pt,Ue),mt=!0,en||(xt=[xe(h,"change",a[11]),xe(ce,"input",a[13]),xe(k,"input",a[15]),xe(se,"change",a[16]),xe(We,"change",a[17]),xe(_e,"click",a[10])],en=!0)},p(P,Ue){if((!mt||Ue[0]&1)&&r!==(r=P[0].description+"")&&et(s,r),Dt!==(Dt=Ft(P))&&(He.d(1),He=Dt(P),He&&(He.c(),He.m(v.parentNode,v))),(!mt||Ue[0]&256&&!Nr(G.src,ie=URL.createObjectURL(P[8])))&&y(G,"src",ie),Ue[0]&32&&ce.value!==P[5]&&rt(ce,P[5]),Ue[0]&2){dt=ze(P[1]);let De;for(De=0;De<dt.length;De+=1){const yt=bo(P,dt,De);_t[De]?_t[De].p(yt,Ue):(_t[De]=ko(yt),_t[De].c(),_t[De].m(X,null))}for(;De<_t.length;De+=1)_t[De].d(1);_t.length=dt.length}const ke={};if(!Ee&&Ue[0]&8&&(Ee=!0,ke.value=P[3],Dn(()=>Ee=!1)),ye.$set(ke),Ue[0]&64&&Vr(k.value)!==P[6]&&rt(k,P[6]),Ue[0]&4){ht=ze(P[2]);let De;for(De=0;De<ht.length;De+=1){const yt=yo(P,ht,De);it[De]?it[De].p(yt,Ue):(it[De]=Do(yt),it[De].c(),it[De].m(Q,null))}for(;De<it.length;De+=1)it[De].d(1);it.length=ht.length}if(Ue&0){Se=ze(Object.keys(rr));let De;for(De=0;De<Se.length;De+=1){const yt=_o(P,Se,De);ft[De]?ft[De].p(yt,Ue):(ft[De]=Eo(yt),ft[De].c(),ft[De].m(se,null))}for(;De<ft.length;De+=1)ft[De].d(1);ft.length=Se.length}if(Ue[0]&128&&Vt(se,P[7]),Ue&0){ot=ze(Object.keys(wt));let De;for(De=0;De<ot.length;De+=1){const yt=vo(P,ot,De);de[De]?de[De].p(yt,Ue):(de[De]=So(yt),de[De].c(),de[De].m(We,null))}for(;De<de.length;De+=1)de[De].d(1);de.length=ot.length}Ue[0]&16&&Vt(We,P[4]),(!mt||Ue[0]&512)&&bt(E,"show",P[9]),(!mt||Ue[0]&768)&&bt(pt,"show",!P[9]&&P[8])},i(P){mt||(tt(ye.$$.fragment,P),mt=!0)},o(P){at(ye.$$.fragment,P),mt=!1},d(P){P&&(b(e),b(c),b(v),b(_),b(p),b(E),b(kt),b(pt)),He.d(P),Ct(_t,P),Bt(ye),Ct(it,P),Ct(ft,P),Ct(de,P),en=!1,hn(xt)}}}function xu(a){let e,n="Choose image to begin";return{c(){e=L("p"),e.textContent=n},l(r){e=M(r,"P",{"data-svelte-h":!0}),Ve(e)!=="svelte-1rdbglw"&&(e.textContent=n)},m(r,s){fe(r,e,s)},d(r){r&&b(e)}}}function Hu(a){let e,n="Click 'Browse' to start again";return{c(){e=L("p"),e.textContent=n},l(r){e=M(r,"P",{"data-svelte-h":!0}),Ve(e)!=="svelte-1raiglx"&&(e.textContent=n)},m(r,s){fe(r,e,s)},d(r){r&&b(e)}}}function ko(a){let e,n;return{c(){e=L("option"),this.h()},l(r){e=M(r,"OPTION",{}),te(e).forEach(b),this.h()},h(){e.__value=n=a[30],rt(e,e.__value)},m(r,s){fe(r,e,s)},p(r,s){s[0]&2&&n!==(n=r[30])&&(e.__value=n,rt(e,e.__value))},d(r){r&&b(e)}}}function Do(a){let e,n=a[27]+"",r,s;return{c(){e=L("option"),r=Ie(n),this.h()},l(u){e=M(u,"OPTION",{});var c=te(e);r=Re(c,n),c.forEach(b),this.h()},h(){e.__value=s=a[27],rt(e,e.__value)},m(u,c){fe(u,e,c),m(e,r)},p(u,c){c[0]&4&&n!==(n=u[27]+"")&&et(r,n),c[0]&4&&s!==(s=u[27])&&(e.__value=s,rt(e,e.__value))},d(u){u&&b(e)}}}function Eo(a){let e,n=a[24]+"",r;return{c(){e=L("option"),r=Ie(n),this.h()},l(s){e=M(s,"OPTION",{});var u=te(e);r=Re(u,n),u.forEach(b),this.h()},h(){e.__value=a[24],rt(e,e.__value)},m(s,u){fe(s,e,u),m(e,r)},p:vt,d(s){s&&b(e)}}}function So(a){let e,n=a[21]+"",r,s,u=wt[a[21]].symbol+"",c,v;return{c(){e=L("option"),r=Ie(n),s=Ie(" ("),c=Ie(u),v=Ie(`)
                `),this.h()},l(_){e=M(_,"OPTION",{});var h=te(e);r=Re(h,n),s=Re(h," ("),c=Re(h,u),v=Re(h,`)
                `),h.forEach(b),this.h()},h(){e.__value=a[21],rt(e,e.__value)},m(_,h){fe(_,e,h),m(e,r),m(e,s),m(e,c),m(e,v)},p:vt,d(_){_&&b(e)}}}function Wu(a){let e,n,r=a[0]&&wo(a);return{c(){e=L("div"),r&&r.c(),this.h()},l(s){e=M(s,"DIV",{class:!0});var u=te(e);r&&r.l(u),u.forEach(b),this.h()},h(){y(e,"class","w-100")},m(s,u){fe(s,e,u),r&&r.m(e,null),n=!0},p(s,u){s[0]?r?(r.p(s,u),u[0]&1&&tt(r,1)):(r=wo(s),r.c(),tt(r,1),r.m(e,null)):r&&(Ln(),at(r,1,1,()=>{r=null}),Mn())},i(s){n||(tt(r),n=!0)},o(s){at(r),n=!1},d(s){s&&b(e),r&&r.d()}}}function Gu(a,e,n){let{receiptId:r}=e,s,u=[],c=[],v=new Date,_,h,p,E,K,G,ie,W=!1;r>-1&&Rt.receipts.get(r).then(he=>{n(0,s=he),n(3,v=s.receiptDate),n(4,_=s.currency),n(5,h=s.description),n(6,p=s.total),n(7,E=s.receiptType),n(8,K=s.imageData),n(9,W=!0)});async function Z(){let he=document.getElementById("imgChosen");ie=he.naturalWidth,G=he.naturalHeight,await Rt.receipts.update(s.id,{description:h,currency:_,receiptDate:v,receiptType:E,total:p,tripId:s.tripId,imageData:K,imageHeight:G,imageWidth:ie}),window.location.href="#/trip/"+s.tripId}async function A(he){var pe=await Qo.recognize(he,"eng");return pe.data.lines}async function T(he){n(1,u=[]),n(2,c=[]),n(9,W=!1);var pe=he.target.files[0];n(8,K=pe);var be=URL.createObjectURL(pe),Fe=await A(be);for(let Oe of Fe){if(Oe.confidence<40)continue;u.push(Oe.text);let ye=ln(Oe.text);ye.value>0&&c.push(ye.format({symbol:"",separator:""}))}n(1,u),n(2,c=c.reverse()),n(9,W=!0)}function J(){h=this.value,n(5,h)}function O(he){v=he,n(3,v)}function ce(){p=Vr(this.value),n(6,p)}function ge(){E=Un(this),n(7,E)}function X(){_=Un(this),n(4,_)}return a.$$set=he=>{"receiptId"in he&&n(12,r=he.receiptId)},[s,u,c,v,_,h,p,E,K,W,Z,T,r,J,O,ce,ge,X]}class Yu extends $t{constructor(e){super(),Xt(this,e,Gu,Wu,Zt,{receiptId:12},null,[-1,-1])}}function Zu(a){let e,n="<h1>Welcome!</h1> <p>Create a trip using the button at the top</p> <p>Or add receipts by selecting a trip!</p>";return{c(){e=L("div"),e.innerHTML=n},l(r){e=M(r,"DIV",{"data-svelte-h":!0}),Ve(e)!=="svelte-12l9klx"&&(e.innerHTML=n)},m(r,s){fe(r,e,s)},p:vt,i:vt,o:vt,d(r){r&&b(e)}}}class Ju extends $t{constructor(e){super(),Xt(this,e,null,Zu,Zt,{})}}function To(a,e,n){const r=a.slice();return r[6]=e[n],r}function Co(a,e,n){const r=a.slice();return r[9]=e[n],r}function Oo(a,e,n){const r=a.slice();return r[6]=e[n],r}function Si(a){const e=a.slice(),n=Array.from(new Set(e[2].map(r=>r.currency)));return e[5]=n,e}function Po(a){let e,n=a[0].name+"",r,s,u,c=a[0].startDate.toDateString()+"",v,_,h=a[0].endDate.toDateString()+"",p,E,K,G="Receipt Summary",ie,W,Z=a[2]&&Ao(Si(a));return{c(){e=L("h1"),r=Ie(n),s=le(),u=L("h4"),v=Ie(c),_=Ie(" - "),p=Ie(h),E=le(),K=L("h5"),K.textContent=G,ie=le(),Z&&Z.c(),W=It()},l(A){e=M(A,"H1",{});var T=te(e);r=Re(T,n),T.forEach(b),s=ue(A),u=M(A,"H4",{});var J=te(u);v=Re(J,c),_=Re(J," - "),p=Re(J,h),J.forEach(b),E=ue(A),K=M(A,"H5",{"data-svelte-h":!0}),Ve(K)!=="svelte-1hbjnf6"&&(K.textContent=G),ie=ue(A),Z&&Z.l(A),W=It()},m(A,T){fe(A,e,T),m(e,r),fe(A,s,T),fe(A,u,T),m(u,v),m(u,_),m(u,p),fe(A,E,T),fe(A,K,T),fe(A,ie,T),Z&&Z.m(A,T),fe(A,W,T)},p(A,T){T&1&&n!==(n=A[0].name+"")&&et(r,n),T&1&&c!==(c=A[0].startDate.toDateString()+"")&&et(v,c),T&1&&h!==(h=A[0].endDate.toDateString()+"")&&et(p,h),A[2]?Z?Z.p(Si(A),T):(Z=Ao(Si(A)),Z.c(),Z.m(W.parentNode,W)):Z&&(Z.d(1),Z=null)},d(A){A&&(b(e),b(s),b(u),b(E),b(K),b(ie),b(W)),Z&&Z.d(A)}}}function Ao(a){let e,n,r="<tr><th>Receipt Description</th> <th>Receipt Date</th> <th>Receipt Type</th> <th>Receipt Total</th></tr>",s,u,c=[],v=new Map,_,h,p,E,K,G,ie,W,Z="<strong>Total</strong>",A,T,J,O,ce,ge,X="Receipt Images",he,pe=[],be=new Map,Fe,Oe,ye=`// Wait for images to render before printing
        var imgs = document.images,
        len = imgs.length,
        counter = 0;

        [].forEach.call( imgs, function( img ) {
            if(img.complete)
              incrementCounter();
            else
              img.addEventListener( 'load', incrementCounter, false );
        } );

        function incrementCounter() {
            counter++;
            if ( counter === len ) {
              window.print();
            }
        }`,Ee=ze(a[2]);const Te=k=>k[6].id;for(let k=0;k<Ee.length;k+=1){let B=Oo(a,Ee,k),Q=Te(B);v.set(Q,c[k]=Io(Q,B))}let ve=ze(a[5]),Ke=[];for(let k=0;k<ve.length;k+=1)Ke[k]=Ro(Co(a,ve,k));let je=ze(a[2]);const x=k=>k[6].id;for(let k=0;k<je.length;k+=1){let B=To(a,je,k),Q=x(B);be.set(Q,pe[k]=Lo(Q,B))}return{c(){e=L("table"),n=L("thead"),n.innerHTML=r,s=le(),u=L("tbody");for(let k=0;k<c.length;k+=1)c[k].c();_=le(),h=L("tfoot"),p=L("tr"),E=L("td"),K=le(),G=L("td"),ie=le(),W=L("td"),W.innerHTML=Z,A=le(),T=L("td");for(let k=0;k<Ke.length;k+=1)Ke[k].c();J=le(),O=L("td"),ce=le(),ge=L("h5"),ge.textContent=X,he=le();for(let k=0;k<pe.length;k+=1)pe[k].c();Fe=le(),Oe=L("script"),Oe.textContent=ye,this.h()},l(k){e=M(k,"TABLE",{class:!0});var B=te(e);n=M(B,"THEAD",{"data-svelte-h":!0}),Ve(n)!=="svelte-1yqevk1"&&(n.innerHTML=r),s=ue(B),u=M(B,"TBODY",{});var Q=te(u);for(let ae=0;ae<c.length;ae+=1)c[ae].l(Q);Q.forEach(b),_=ue(B),h=M(B,"TFOOT",{class:!0});var w=te(h);p=M(w,"TR",{});var z=te(p);E=M(z,"TD",{}),te(E).forEach(b),K=ue(z),G=M(z,"TD",{}),te(G).forEach(b),ie=ue(z),W=M(z,"TD",{class:!0,"data-svelte-h":!0}),Ve(W)!=="svelte-14afisz"&&(W.innerHTML=Z),A=ue(z),T=M(z,"TD",{});var Ce=te(T);for(let ae=0;ae<Ke.length;ae+=1)Ke[ae].l(Ce);Ce.forEach(b),J=ue(z),O=M(z,"TD",{}),te(O).forEach(b),z.forEach(b),w.forEach(b),B.forEach(b),ce=ue(k),ge=M(k,"H5",{"data-svelte-h":!0}),Ve(ge)!=="svelte-1vv3lsi"&&(ge.textContent=X),he=ue(k);for(let ae=0;ae<pe.length;ae+=1)pe[ae].l(k);Fe=ue(k),Oe=M(k,"SCRIPT",{"data-svelte-h":!0}),Ve(Oe)!=="svelte-tktxvg"&&(Oe.textContent=ye),this.h()},h(){y(W,"class","text-end"),y(h,"class","table-group-divider"),y(e,"class","table table-striped table-hover")},m(k,B){fe(k,e,B),m(e,n),m(e,s),m(e,u);for(let Q=0;Q<c.length;Q+=1)c[Q]&&c[Q].m(u,null);m(e,_),m(e,h),m(h,p),m(p,E),m(p,K),m(p,G),m(p,ie),m(p,W),m(p,A),m(p,T);for(let Q=0;Q<Ke.length;Q+=1)Ke[Q]&&Ke[Q].m(T,null);m(p,J),m(p,O),fe(k,ce,B),fe(k,ge,B),fe(k,he,B);for(let Q=0;Q<pe.length;Q+=1)pe[Q]&&pe[Q].m(k,B);fe(k,Fe,B),fe(k,Oe,B)},p(k,B){if(B&4&&(Ee=ze(k[2]),c=Kr(c,B,Te,1,k,Ee,v,u,Br,Io,null,Oo)),B&4){ve=ze(k[5]);let Q;for(Q=0;Q<ve.length;Q+=1){const w=Co(k,ve,Q);Ke[Q]?Ke[Q].p(w,B):(Ke[Q]=Ro(w),Ke[Q].c(),Ke[Q].m(T,null))}for(;Q<Ke.length;Q+=1)Ke[Q].d(1);Ke.length=ve.length}B&4&&(je=ze(k[2]),pe=Kr(pe,B,x,1,k,je,be,Fe.parentNode,Br,Lo,Fe,To))},d(k){k&&(b(e),b(ce),b(ge),b(he),b(Fe),b(Oe));for(let B=0;B<c.length;B+=1)c[B].d();Ct(Ke,k);for(let B=0;B<pe.length;B+=1)pe[B].d(k)}}}function Io(a,e){let n,r,s=e[6].description+"",u,c,v,_=e[6].receiptDate.toDateString()+"",h,p,E,K=e[6].receiptType+"",G,ie,W,Z=wt[e[6].currency].symbol+"",A,T,J=e[6].total.toFixed(2)+"",O,ce;return{key:a,first:null,c(){n=L("tr"),r=L("td"),u=Ie(s),c=le(),v=L("td"),h=Ie(_),p=le(),E=L("td"),G=Ie(K),ie=le(),W=L("td"),A=Ie(Z),T=le(),O=Ie(J),ce=le(),this.h()},l(ge){n=M(ge,"TR",{});var X=te(n);r=M(X,"TD",{});var he=te(r);u=Re(he,s),he.forEach(b),c=ue(X),v=M(X,"TD",{});var pe=te(v);h=Re(pe,_),pe.forEach(b),p=ue(X),E=M(X,"TD",{});var be=te(E);G=Re(be,K),be.forEach(b),ie=ue(X),W=M(X,"TD",{});var Fe=te(W);A=Re(Fe,Z),T=ue(Fe),O=Re(Fe,J),Fe.forEach(b),ce=ue(X),X.forEach(b),this.h()},h(){this.first=n},m(ge,X){fe(ge,n,X),m(n,r),m(r,u),m(n,c),m(n,v),m(v,h),m(n,p),m(n,E),m(E,G),m(n,ie),m(n,W),m(W,A),m(W,T),m(W,O),m(n,ce)},p(ge,X){e=ge,X&4&&s!==(s=e[6].description+"")&&et(u,s),X&4&&_!==(_=e[6].receiptDate.toDateString()+"")&&et(h,_),X&4&&K!==(K=e[6].receiptType+"")&&et(G,K),X&4&&Z!==(Z=wt[e[6].currency].symbol+"")&&et(A,Z),X&4&&J!==(J=e[6].total.toFixed(2)+"")&&et(O,J)},d(ge){ge&&b(n)}}}function Ro(a){let e=wt[a[9]].symbol+"",n,r,s=a[2].filter(_).reduce(Mo,0).toFixed(2)+"",u,c,v;function _(...h){return a[4](a[9],...h)}return{c(){n=Ie(e),r=le(),u=Ie(s),c=le(),v=L("br")},l(h){n=Re(h,e),r=ue(h),u=Re(h,s),c=ue(h),v=M(h,"BR",{})},m(h,p){fe(h,n,p),fe(h,r,p),fe(h,u,p),fe(h,c,p),fe(h,v,p)},p(h,p){a=h,p&4&&e!==(e=wt[a[9]].symbol+"")&&et(n,e),p&4&&s!==(s=a[2].filter(_).reduce(Mo,0).toFixed(2)+"")&&et(u,s)},d(h){h&&(b(n),b(r),b(u),b(c),b(v))}}}function Lo(a,e){let n,r,s;return{key:a,first:null,c(){n=L("img"),this.h()},l(u){n=M(u,"IMG",{class:!0,alt:!0,src:!0}),this.h()},h(){y(n,"class","img-fluid"),y(n,"alt",r="receipt with description '"+e[6].description+"'"),Nr(n.src,s=URL.createObjectURL(e[6].imageData))||y(n,"src",s),this.first=n},m(u,c){fe(u,n,c)},p(u,c){e=u,c&4&&r!==(r="receipt with description '"+e[6].description+"'")&&y(n,"alt",r),c&4&&!Nr(n.src,s=URL.createObjectURL(e[6].imageData))&&y(n,"src",s)},d(u){u&&b(n)}}}function Qu(a){let e,n=a[0]&&Po(a);return{c(){e=L("div"),n&&n.c()},l(r){e=M(r,"DIV",{});var s=te(e);n&&n.l(s),s.forEach(b)},m(r,s){fe(r,e,s),n&&n.m(e,null)},p(r,[s]){r[0]?n?n.p(r,s):(n=Po(r),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},i:vt,o:vt,d(r){r&&b(e),n&&n.d()}}}const Mo=(a,e)=>a+e.total;function $u(a,e,n){let r,s=vt,u=()=>(s(),s=Mr(_,p=>n(2,r=p)),_);a.$$.on_destroy.push(()=>s());let{tripId:c=-1}=e,v,_;c>-1&&Rt.trips.get(c).then(p=>{n(0,v=p),u(n(1,_=qr(()=>Rt.receipts.where({tripId:c}).reverse().sortBy("receiptDate"))))});const h=(p,E)=>E.currency==p;return a.$$set=p=>{"tripId"in p&&n(3,c=p.tripId)},[v,_,r,c,h]}class Xu extends $t{constructor(e){super(),Xt(this,e,$u,Qu,Zt,{tripId:3})}}function ec(a){let e,n,r='<span class="fs-5 fw-bold text-light">Trippin&#39;</span> <a class="btn btn-outline-light" href="#/add">+ Add Trip</a>',s,u,c,v='<span class="fs-5 fw-bold text-light">Trippin&#39;</span> <a class="btn btn-outline-light" href="#/add">+ Add Trip</a>',_,h,p,E,K,G,ie,W;p=new hl({props:{tripId:a[2]}});const Z=[sc,oc,ac,ic,rc,nc],A=[];function T(J,O){return J[3]==="add"?0:J[3]==="trip"&&J[2]>-1?1:J[3]==="update"&&J[2]>-1?2:J[3]==="addreceipt"&&J[2]>-1?3:J[3]==="editreceipt"&&J[2]>-1?4:5}return G=T(a),ie=A[G]=Z[G](a),{c(){e=L("main"),n=L("div"),n.innerHTML=r,s=le(),u=L("div"),c=L("div"),c.innerHTML=v,_=le(),h=L("div"),Lt(p.$$.fragment),E=le(),K=L("div"),ie.c(),this.h()},l(J){e=M(J,"MAIN",{class:!0});var O=te(e);n=M(O,"DIV",{class:!0,"data-svelte-h":!0}),Ve(n)!=="svelte-1qzkoji"&&(n.innerHTML=r),s=ue(O),u=M(O,"DIV",{class:!0});var ce=te(u);c=M(ce,"DIV",{class:!0,"data-svelte-h":!0}),Ve(c)!=="svelte-5pi3yv"&&(c.innerHTML=v),_=ue(ce),h=M(ce,"DIV",{class:!0});var ge=te(h);Mt(p.$$.fragment,ge),ge.forEach(b),ce.forEach(b),E=ue(O),K=M(O,"DIV",{class:!0});var X=te(K);ie.l(X),X.forEach(b),O.forEach(b),this.h()},h(){y(n,"class","listTitle listTitleSmall d-flex align-items-center justify-content-between flex-shrink-0 p-3 link-body-emphasis text-decoration-none border-bottom"),y(c,"class","listTitle listTitleLarge d-flex align-items-center justify-content-between flex-shrink-0 p-3 link-body-emphasis text-decoration-none border-bottom"),y(h,"class","list-group list-group-flush border-bottom scrollarea"),y(u,"class","tripList d-flex flex-column align-items-stretch flex-shrink-0 bg-body-tertiary"),y(K,"class","d-flex p-3 w-100"),y(e,"class","d-flex flex-nowrap")},m(J,O){fe(J,e,O),m(e,n),m(e,s),m(e,u),m(u,c),m(u,_),m(u,h),Nt(p,h,null),m(e,E),m(e,K),A[G].m(K,null),W=!0},p(J,O){const ce={};O&4&&(ce.tripId=J[2]),p.$set(ce);let ge=G;G=T(J),G===ge?A[G].p(J,O):(Ln(),at(A[ge],1,1,()=>{A[ge]=null}),Mn(),ie=A[G],ie?ie.p(J,O):(ie=A[G]=Z[G](J),ie.c()),tt(ie,1),ie.m(K,null))},i(J){W||(tt(p.$$.fragment,J),tt(ie),W=!0)},o(J){at(p.$$.fragment,J),at(ie),W=!1},d(J){J&&b(e),Bt(p),A[G].d()}}}function tc(a){let e,n;return e=new Xu({props:{tripId:a[2]}}),{c(){Lt(e.$$.fragment)},l(r){Mt(e.$$.fragment,r)},m(r,s){Nt(e,r,s),n=!0},p(r,s){const u={};s&4&&(u.tripId=r[2]),e.$set(u)},i(r){n||(tt(e.$$.fragment,r),n=!0)},o(r){at(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function nc(a){let e,n;return e=new Ju({}),{c(){Lt(e.$$.fragment)},l(r){Mt(e.$$.fragment,r)},m(r,s){Nt(e,r,s),n=!0},p:vt,i(r){n||(tt(e.$$.fragment,r),n=!0)},o(r){at(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function rc(a){let e,n;return e=new Yu({props:{receiptId:a[2]}}),{c(){Lt(e.$$.fragment)},l(r){Mt(e.$$.fragment,r)},m(r,s){Nt(e,r,s),n=!0},p(r,s){const u={};s&4&&(u.receiptId=r[2]),e.$set(u)},i(r){n||(tt(e.$$.fragment,r),n=!0)},o(r){at(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function ic(a){let e,n;return e=new zu({props:{tripId:a[2]}}),{c(){Lt(e.$$.fragment)},l(r){Mt(e.$$.fragment,r)},m(r,s){Nt(e,r,s),n=!0},p(r,s){const u={};s&4&&(u.tripId=r[2]),e.$set(u)},i(r){n||(tt(e.$$.fragment,r),n=!0)},o(r){at(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function ac(a){let e,n;return e=new gl({props:{tripId:a[2]}}),{c(){Lt(e.$$.fragment)},l(r){Mt(e.$$.fragment,r)},m(r,s){Nt(e,r,s),n=!0},p(r,s){const u={};s&4&&(u.tripId=r[2]),e.$set(u)},i(r){n||(tt(e.$$.fragment,r),n=!0)},o(r){at(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function oc(a){let e=a[2],n,r,s=No(a);return{c(){s.c(),n=It()},l(u){s.l(u),n=It()},m(u,c){s.m(u,c),fe(u,n,c),r=!0},p(u,c){c&4&&Zt(e,e=u[2])?(Ln(),at(s,1,1,vt),Mn(),s=No(u),s.c(),tt(s,1),s.m(n.parentNode,n)):s.p(u,c)},i(u){r||(tt(s),r=!0)},o(u){at(s),r=!1},d(u){u&&b(n),s.d(u)}}}function sc(a){let e,n;return e=new Ys({}),{c(){Lt(e.$$.fragment)},l(r){Mt(e.$$.fragment,r)},m(r,s){Nt(e,r,s),n=!0},p:vt,i(r){n||(tt(e.$$.fragment,r),n=!0)},o(r){at(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function No(a){let e,n;return e=new cl({props:{tripId:a[2]}}),{c(){Lt(e.$$.fragment)},l(r){Mt(e.$$.fragment,r)},m(r,s){Nt(e,r,s),n=!0},p(r,s){const u={};s&4&&(u.tripId=r[2]),e.$set(u)},i(r){n||(tt(e.$$.fragment,r),n=!0)},o(r){at(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function lc(a){let e,n,r,s;const u=[tc,ec],c=[];function v(_,h){return _[3]==="print"&&_[2]>-1?0:1}return e=v(a),n=c[e]=u[e](a),{c(){n.c(),r=It()},l(_){n.l(_),r=It()},m(_,h){c[e].m(_,h),fe(_,r,h),s=!0},p(_,[h]){let p=e;e=v(_),e===p?c[e].p(_,h):(Ln(),at(c[p],1,1,()=>{c[p]=null}),Mn(),n=c[e],n?n.p(_,h):(n=c[e]=u[e](_),n.c()),tt(n,1),n.m(r.parentNode,r))},i(_){s||(tt(n),s=!0)},o(_){at(n),s=!1},d(_){_&&b(r),c[e].d(_)}}}function uc(a,e,n){let r,s,u,c,v=vt,_=()=>(v(),v=Mr(r,W=>n(2,c=W)),r),h,p=vt,E=()=>(p(),p=Mr(s,W=>n(3,h=W)),s),K;tr(a,Ss,W=>n(4,K=W)),a.$$.on_destroy.push(()=>v()),a.$$.on_destroy.push(()=>p());const G=new RegExp("#/(?<route>[a-z]+)(?<tripId>/[0-9]+|$)");function ie(){u?(Or(s,h=u.groups.route||"",h),Or(r,c=parseInt(u.groups.tripId.replace("/","")||"-1"),c)):(Or(s,h="",h),Or(r,c=-1,c))}return ks(()=>{ie()}),a.$$.update=()=>{a.$$.dirty&16&&(u=G.exec(K.url.hash))},_(n(1,r=Ti(-1))),E(n(0,s=Ti(""))),[s,r,c,h,K]}class cc extends $t{constructor(e){super(),Xt(this,e,uc,lc,Zt,{})}}function fc(a){let e,n,r;return n=new cc({}),{c(){e=le(),Lt(n.$$.fragment),this.h()},l(s){Ds("svelte-1mxz4jk",document.head).forEach(b),e=ue(s),Mt(n.$$.fragment,s),this.h()},h(){document.title="Trippin'"},m(s,u){fe(s,e,u),Nt(n,s,u),r=!0},p:vt,i(s){r||(tt(n.$$.fragment,s),r=!0)},o(s){at(n.$$.fragment,s),r=!1},d(s){s&&b(e),Bt(n,s)}}}class Cc extends $t{constructor(e){super(),Xt(this,e,null,fc,Zt,{})}}export{Cc as component};
