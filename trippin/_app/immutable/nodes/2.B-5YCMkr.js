import{C as kn,s as nn,p as Ft,k as de,n as bt,i as b,e as C,t as Me,b as re,d as O,f as H,h as Re,j as ie,v as p,l as h,S as Ze,T as Br,x as tn,c as Ko,U as Yt,V as We,W as Zt,X as Jt,Y as In,u as Fo,g as jo,a as Uo,Z as Mt,_ as Vo,$ as at,m as Xe,a0 as bs,a1 as Tt,a2 as ca,o as cr,w as Oi,E as Un,a3 as Gn,D as qo,a4 as ws,a5 as ur,a6 as Hr,a7 as Kr,a8 as ks,a9 as ar,aa as Es}from"../chunks/scheduler.B6UoHciB.js";import{t as rt,S as on,i as sn,f as Ln,b as Ut,d as Vt,m as qt,a as st,e as zt,g as Vn,c as qn,h as fa}from"../chunks/index.CC47NhgM.js";import{w as Mr}from"../chunks/entry.BSPIIYNH.js";import{_ as Ds}from"../chunks/preload-helper.D6kgxu3v.js";import{p as Ss}from"../chunks/stores.OfesdDP3.js";function Ge(i){return(i==null?void 0:i.length)!==void 0?i:Array.from(i)}function Fr(i,e){i.d(1),e.delete(i.key)}function jr(i,e,n,r,s,u,c,g,y,m,v,k){let L=i.length,j=u.length,Q=L;const W={};for(;Q--;)W[i[Q].key]=Q;const z=[],S=new Map,D=new Map,G=[];for(Q=j;Q--;){const ae=k(s,u,Q),oe=n(ae);let ve=c.get(oe);ve?G.push(()=>ve.p(ae,e)):(ve=m(oe,ae),ve.c()),S.set(oe,z[Q]=ve),oe in W&&D.set(oe,Math.abs(Q-W[oe]))}const A=new Set,se=new Set;function pe(ae){rt(ae,1),ae.m(g,v),c.set(ae.key,ae),v=ae.first,j--}for(;L&&j;){const ae=z[j-1],oe=i[L-1],ve=ae.key,ke=oe.key;ae===oe?(v=ae.first,L--,j--):S.has(ke)?!c.has(ve)||A.has(ve)?pe(ae):se.has(ke)?L--:D.get(ve)>D.get(ke)?(se.add(ve),pe(ae)):(A.add(ke),L--):(y(oe,c),L--)}for(;L--;){const ae=i[L];S.has(ae.key)||y(ae,c)}for(;j;)pe(z[j-1]);return kn(G),z}function da(i){let e,n,r=("00"+i[0].getHours()).slice(-2)+"",s,u,c,g=("00"+i[0].getMinutes()).slice(-2)+"",y,m,v,k,L=i[1]!=="minute"&&ha(i);return{c(){e=C("div"),n=C("span"),s=Me(r),u=Me(`:
		`),c=C("span"),y=Me(g),m=re(),L&&L.c(),this.h()},l(j){e=O(j,"DIV",{class:!0,role:!0});var Q=H(e);n=O(Q,"SPAN",{role:!0,"aria-label":!0,tabindex:!0,contenteditable:!0,inputmode:!0,class:!0});var W=H(n);s=Re(W,r),W.forEach(b),u=Re(Q,`:
		`),c=O(Q,"SPAN",{role:!0,"aria-label":!0,tabindex:!0,contenteditable:!0,inputmode:!0,class:!0});var z=H(c);y=Re(z,g),z.forEach(b),m=ie(Q),L&&L.l(Q),Q.forEach(b),this.h()},h(){p(n,"role","spinbutton"),p(n,"aria-label","Hours"),p(n,"tabindex","0"),p(n,"contenteditable",""),p(n,"inputmode","numeric"),p(n,"class","svelte-mzlxg7"),p(c,"role","spinbutton"),p(c,"aria-label","Minutes"),p(c,"tabindex","0"),p(c,"contenteditable",""),p(c,"inputmode","numeric"),p(c,"class","svelte-mzlxg7"),p(e,"class","time-picker svelte-mzlxg7"),p(e,"role","none")},m(j,Q){de(j,e,Q),h(e,n),h(n,s),i[6](n),h(e,u),h(e,c),h(c,y),i[7](c),h(e,m),L&&L.m(e,null),v||(k=[Ze(n,"keydown",i[3]),Ze(n,"input",i[4]),Ze(n,"focus",Ur),Ze(c,"keydown",i[3]),Ze(c,"input",i[4]),Ze(c,"focus",Ur),Ze(e,"mousedown",i[10])],v=!0)},p(j,Q){Q&1&&r!==(r=("00"+j[0].getHours()).slice(-2)+"")&&Br(s,r),Q&1&&g!==(g=("00"+j[0].getMinutes()).slice(-2)+"")&&Br(y,g),j[1]!=="minute"?L?L.p(j,Q):(L=ha(j),L.c(),L.m(e,null)):L&&(L.d(1),L=null)},d(j){j&&b(e),i[6](null),i[7](null),L&&L.d(),v=!1,kn(k)}}}function ha(i){let e,n,r=("00"+i[0].getSeconds()).slice(-2)+"",s,u,c,g,y,m=i[1]!=="second"&&pa(i);return{c(){e=Me(":"),n=C("span"),s=Me(r),u=re(),m&&m.c(),c=Ft(),this.h()},l(v){e=Re(v,":"),n=O(v,"SPAN",{role:!0,"aria-label":!0,tabindex:!0,contenteditable:!0,inputmode:!0,class:!0});var k=H(n);s=Re(k,r),k.forEach(b),u=ie(v),m&&m.l(v),c=Ft(),this.h()},h(){p(n,"role","spinbutton"),p(n,"aria-label","Seconds"),p(n,"tabindex","0"),p(n,"contenteditable",""),p(n,"inputmode","numeric"),p(n,"class","svelte-mzlxg7")},m(v,k){de(v,e,k),de(v,n,k),h(n,s),i[8](n),de(v,u,k),m&&m.m(v,k),de(v,c,k),g||(y=[Ze(n,"keydown",i[3]),Ze(n,"input",i[4]),Ze(n,"focus",Ur)],g=!0)},p(v,k){k&1&&r!==(r=("00"+v[0].getSeconds()).slice(-2)+"")&&Br(s,r),v[1]!=="second"?m?m.p(v,k):(m=pa(v),m.c(),m.m(c.parentNode,c)):m&&(m.d(1),m=null)},d(v){v&&(b(e),b(n),b(u),b(c)),i[8](null),m&&m.d(v),g=!1,kn(y)}}}function pa(i){let e,n,r=("000"+i[0].getMilliseconds()).slice(-3)+"",s,u,c;return{c(){e=Me("."),n=C("span"),s=Me(r),this.h()},l(g){e=Re(g,"."),n=O(g,"SPAN",{role:!0,"aria-label":!0,tabindex:!0,contenteditable:!0,inputmode:!0,class:!0});var y=H(n);s=Re(y,r),y.forEach(b),this.h()},h(){p(n,"role","spinbutton"),p(n,"aria-label","Milliseconds"),p(n,"tabindex","0"),p(n,"contenteditable",""),p(n,"inputmode","numeric"),p(n,"class","svelte-mzlxg7")},m(g,y){de(g,e,y),de(g,n,y),h(n,s),i[9](n),u||(c=[Ze(n,"keydown",i[3]),Ze(n,"input",i[4]),Ze(n,"focus",Ur)],u=!0)},p(g,y){y&1&&r!==(r=("000"+g[0].getMilliseconds()).slice(-3)+"")&&Br(s,r)},d(g){g&&(b(e),b(n)),i[9](null),u=!1,kn(c)}}}function Ts(i){let e,n=i[1]&&da(i);return{c(){n&&n.c(),e=Ft()},l(r){n&&n.l(r),e=Ft()},m(r,s){n&&n.m(r,s),de(r,e,s)},p(r,[s]){r[1]?n?n.p(r,s):(n=da(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:bt,o:bt,d(r){r&&b(e),n&&n.d(r)}}}function Rr(i){const e=window.getSelection(),n=document.createRange();n.selectNodeContents(i),e==null||e.removeAllRanges(),e==null||e.addRange(n)}function Cs(i,e,n){return n&&i<0?e:n&&i>e?0:Math.max(0,Math.min(e,i))}function bi(i){const e=i.getAttribute("aria-label");if(e==="Hours")return{label:e,len:2,max:23};if(e==="Minutes")return{label:e,len:2,max:59};if(e==="Seconds")return{label:e,len:2,max:59};if(e==="Milliseconds")return{label:e,len:3,max:999};throw new Error("Invalid label "+e)}function wi(i,e){return parseInt(i.replace(/[^\d]/g,"").slice(-e))}function Ur(i){Rr(i.currentTarget)}function Os(i,e,n){let{browseDate:r}=e,{timePrecision:s}=e,{setTime:u}=e,c=[];function g(S){if(S.key==="ArrowUp"||S.key==="ArrowDown"){const D=y(S.currentTarget),G=S.key==="ArrowUp"?1:-1;v(S.currentTarget,D+G,!0),S.preventDefault(),Rr(S.currentTarget)}else if(S.key==="ArrowLeft"||S.key==="ArrowRight"||":;-,.".includes(S.key)){const D=c.indexOf(S.currentTarget),G=S.key==="ArrowLeft"?-1:1,A=c[D+G];S.preventDefault(),A&&(A.focus(),Rr(A))}}function y(S){const D=bi(S).label;return D==="Hours"?r.getHours():D==="Minutes"?r.getMinutes():D==="Seconds"?r.getSeconds():r.getMilliseconds()}function m(S){const D=("00"+S.getHours()).slice(-2),G=("00"+S.getMinutes()).slice(-2),A=("00"+S.getSeconds()).slice(-2),se=("000"+S.getMilliseconds()).slice(-3);c[0]&&c[0].innerText!==D&&n(2,c[0].innerText=D,c),c[1]&&c[1].innerText!==G&&n(2,c[1].innerText=G,c),c[2]&&c[2].innerText!==A&&n(2,c[2].innerText=A,c),c[3]&&c[3].innerText!==se&&n(2,c[3].innerText=se,c)}function v(S,D,G=!1){const A=bi(S);D=Cs(D,A.max,G),A.label==="Hours"?r.setHours(D):A.label==="Minutes"?r.setMinutes(D):A.label==="Seconds"?r.setSeconds(D):A.label==="Milliseconds"&&r.setMilliseconds(D),n(0,r=u(r)),m(r)}function k(S){const D=S,G=bi(D.currentTarget);let A;if(D.inputType==="insertText"){const se="000"+y(D.currentTarget);A=wi(se+D.currentTarget.innerText,G.len),A>G.max&&D.data&&(A=wi(D.data,G.len))}else A=wi("000"+D.currentTarget.innerText,G.len);v(D.currentTarget,A),Rr(D.currentTarget)}function L(S){tn[S?"unshift":"push"](()=>{c[0]=S,n(2,c)})}function j(S){tn[S?"unshift":"push"](()=>{c[1]=S,n(2,c)})}function Q(S){tn[S?"unshift":"push"](()=>{c[2]=S,n(2,c)})}function W(S){tn[S?"unshift":"push"](()=>{c[3]=S,n(2,c)})}const z=S=>{S.target instanceof HTMLElement&&S.target.tagName==="SPAN"&&(S.target.focus(),S.preventDefault())};return i.$$set=S=>{"browseDate"in S&&n(0,r=S.browseDate),"timePrecision"in S&&n(1,s=S.timePrecision),"setTime"in S&&n(5,u=S.setTime)},i.$$.update=()=>{i.$$.dirty&1&&m(r)},[r,s,c,g,k,u,L,j,Q,W,z]}class As extends on{constructor(e){super(),sn(this,e,Os,Ts,nn,{browseDate:0,timePrecision:1,setTime:5})}}function Ps(i){return i%4===0&&i%100!==0||i%400===0}function fr(i,e){return[31,Ps(i)?29:28,31,30,31,30,31,31,30,31,30,31][e]}function ma(i,e){let n="";if(i)for(const r of e)typeof r=="string"?n+=r:n+=r.toString(i);return n}function ki(i,e){const n=fr(i,e),r=[];for(let s=0;s<n;s++)r.push({year:i,month:e,number:s+1});return r}function Is(i,e){const n=i.getFullYear(),r=i.getMonth(),s=new Date(n,r,1).getDay();let u=[];const c=(s-e+7)%7;if(c>0){let v=r-1,k=n;v===-1&&(v=11,k=n-1),u=ki(k,v).slice(-c)}u=u.concat(ki(n,r));let g=r+1,y=n;g===12&&(g=0,y=n+1);const m=42-u.length;return u=u.concat(ki(y,g).slice(0,m)),u}function Ls(){return{weekdays:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekStartsOn:1}}function zo(i){const e=Ls();return typeof i.weekStartsOn=="number"&&(e.weekStartsOn=i.weekStartsOn),i.months&&(e.months=i.months),i.shortMonths&&(e.shortMonths=i.shortMonths),i.weekdays&&(e.weekdays=i.weekdays),e}function ga(i,e,n){const r=i.slice();return r[36]=e[n],r[38]=n,r}function va(i,e,n){const r=i.slice();return r[39]=e[n],r}function _a(i,e,n){const r=i.slice();return r[36]=e[n],r[43]=n,r}function ya(i,e,n){const r=i.slice();return r[44]=e[n],r}function ba(i,e,n){const r=i.slice();return r[44]=e[n],r}function wa(i,e,n){const r=i.slice();return r[49]=e[n],r[43]=n,r}function ka(i,e,n){const r=i.slice();return r[49]=e[n],r[43]=n,r}function Ea(i){let e,n=i[49]+"",r,s;return{c(){e=C("option"),r=Me(n),this.h()},l(u){e=O(u,"OPTION",{});var c=H(e);r=Re(c,n),c.forEach(b),this.h()},h(){e.disabled=s=new Date(i[9],i[43],fr(i[9],i[43]),23,59,59,999)<i[2]||new Date(i[9],i[43])>i[3],e.__value=i[43],at(e,e.__value)},m(u,c){de(u,e,c),h(e,r)},p(u,c){c[0]&32&&n!==(n=u[49]+"")&&Xe(r,n),c[0]&588&&s!==(s=new Date(u[9],u[43],fr(u[9],u[43]),23,59,59,999)<u[2]||new Date(u[9],u[43])>u[3])&&(e.disabled=s)},d(u){u&&b(e)}}}function Da(i){let e,n=i[49]+"",r,s;return{c(){e=C("option"),r=Me(n),this.h()},l(u){e=O(u,"OPTION",{});var c=H(e);r=Re(c,n),c.forEach(b),this.h()},h(){e.__value=i[43],at(e,e.__value),e.selected=s=i[43]===i[8]},m(u,c){de(u,e,c),h(e,r)},p(u,c){c[0]&32&&n!==(n=u[49]+"")&&Xe(r,n),c[0]&256&&s!==(s=u[43]===u[8])&&(e.selected=s)},d(u){u&&b(e)}}}function Sa(i){let e,n=i[44]+"",r,s;return{c(){e=C("option"),r=Me(n),this.h()},l(u){e=O(u,"OPTION",{});var c=H(e);r=Re(c,n),c.forEach(b),this.h()},h(){e.__value=s=i[44],at(e,e.__value)},m(u,c){de(u,e,c),h(e,r)},p(u,c){c[0]&64&&n!==(n=u[44]+"")&&Xe(r,n),c[0]&64&&s!==(s=u[44])&&(e.__value=s,at(e,e.__value))},d(u){u&&b(e)}}}function Ta(i){let e,n=i[44]+"",r,s,u;return{c(){e=C("option"),r=Me(n),this.h()},l(c){e=O(c,"OPTION",{});var g=H(e);r=Re(g,n),g.forEach(b),this.h()},h(){e.__value=s=i[44],at(e,e.__value),e.selected=u=i[44]===i[4].getFullYear()},m(c,g){de(c,e,g),h(e,r)},p(c,g){g[0]&64&&n!==(n=c[44]+"")&&Xe(r,n),g[0]&64&&s!==(s=c[44])&&(e.__value=s,at(e,e.__value)),g[0]&80&&u!==(u=c[44]===c[4].getFullYear())&&(e.selected=u)},d(c){c&&b(e)}}}function Ms(i){let e,n=i[5].weekdays[i[5].weekStartsOn+i[43]-7]+"",r;return{c(){e=C("div"),r=Me(n),this.h()},l(s){e=O(s,"DIV",{class:!0});var u=H(e);r=Re(u,n),u.forEach(b),this.h()},h(){p(e,"class","header-cell svelte-w239uu")},m(s,u){de(s,e,u),h(e,r)},p(s,u){u[0]&32&&n!==(n=s[5].weekdays[s[5].weekStartsOn+s[43]-7]+"")&&Xe(r,n)},d(s){s&&b(e)}}}function Rs(i){let e,n=i[5].weekdays[i[5].weekStartsOn+i[43]]+"",r;return{c(){e=C("div"),r=Me(n),this.h()},l(s){e=O(s,"DIV",{class:!0});var u=H(e);r=Re(u,n),u.forEach(b),this.h()},h(){p(e,"class","header-cell svelte-w239uu")},m(s,u){de(s,e,u),h(e,r)},p(s,u){u[0]&32&&n!==(n=s[5].weekdays[s[5].weekStartsOn+s[43]]+"")&&Xe(r,n)},d(s){s&&b(e)}}}function Ca(i){let e;function n(u,c){return u[43]+u[5].weekStartsOn<7?Rs:Ms}let r=n(i),s=r(i);return{c(){s.c(),e=Ft()},l(u){s.l(u),e=Ft()},m(u,c){s.m(u,c),de(u,e,c)},p(u,c){r===(r=n(u))&&s?s.p(u,c):(s.d(1),s=r(u),s&&(s.c(),s.m(e.parentNode,e)))},d(u){u&&b(e),s.d(u)}}}function Oa(i){let e,n,r=i[39].number+"",s,u,c;function g(){return i[27](i[39])}return{c(){e=C("div"),n=C("span"),s=Me(r),this.h()},l(y){e=O(y,"DIV",{class:!0});var m=H(e);n=O(m,"SPAN",{class:!0});var v=H(n);s=Re(v,r),v.forEach(b),m.forEach(b),this.h()},h(){p(n,"class","svelte-w239uu"),p(e,"class","cell svelte-w239uu"),Tt(e,"disabled",!Ai(i[39],i[2],i[3])),Tt(e,"selected",i[0]&&i[39].year===i[0].getFullYear()&&i[39].month===i[0].getMonth()&&i[39].number===i[0].getDate()),Tt(e,"today",i[39].year===i[11].getFullYear()&&i[39].month===i[11].getMonth()&&i[39].number===i[11].getDate()),Tt(e,"other-month",i[39].month!==i[8])},m(y,m){de(y,e,m),h(e,n),h(n,s),u||(c=Ze(e,"click",g),u=!0)},p(y,m){i=y,m[0]&128&&r!==(r=i[39].number+"")&&Xe(s,r),m[0]&140&&Tt(e,"disabled",!Ai(i[39],i[2],i[3])),m[0]&129&&Tt(e,"selected",i[0]&&i[39].year===i[0].getFullYear()&&i[39].month===i[0].getMonth()&&i[39].number===i[0].getDate()),m[0]&2176&&Tt(e,"today",i[39].year===i[11].getFullYear()&&i[39].month===i[11].getMonth()&&i[39].number===i[11].getDate()),m[0]&384&&Tt(e,"other-month",i[39].month!==i[8])},d(y){y&&b(e),u=!1,c()}}}function Aa(i){let e,n=Ge(i[7].slice(i[38]*7,i[38]*7+7)),r=[];for(let s=0;s<n.length;s+=1)r[s]=Oa(va(i,n,s));return{c(){e=C("div");for(let s=0;s<r.length;s+=1)r[s].c();this.h()},l(s){e=O(s,"DIV",{class:!0});var u=H(e);for(let c=0;c<r.length;c+=1)r[c].l(u);u.forEach(b),this.h()},h(){p(e,"class","week svelte-w239uu")},m(s,u){de(s,e,u);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(e,null)},p(s,u){if(u[0]&18829){n=Ge(s[7].slice(s[38]*7,s[38]*7+7));let c;for(c=0;c<n.length;c+=1){const g=va(s,n,c);r[c]?r[c].p(g,u):(r[c]=Oa(g),r[c].c(),r[c].m(e,null))}for(;c<r.length;c+=1)r[c].d(1);r.length=n.length}},d(s){s&&b(e),Mt(r,s)}}}function Ns(i){let e,n,r,s,u='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="svelte-w239uu"><path d="M5 3l3.057-3 11.943 12-11.943 12-3.057-3 9-9z" transform="rotate(180, 12, 12)"></path></svg>',c,g,y,m,v,k,L,j,Q,W,z,S,D,G,A,se,pe,ae,oe='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="svelte-w239uu"><path d="M5 3l3.057-3 11.943 12-11.943 12-3.057-3 9-9z"></path></svg>',ve,ke,Fe,_e,Ee,Te,qe,Le,ne,Ce,P=Ge(i[5].months),K=[];for(let F=0;F<P.length;F+=1)K[F]=Ea(ka(i,P,F));let $=Ge(i[5].months),fe=[];for(let F=0;F<$.length;F+=1)fe[F]=Da(wa(i,$,F));let w=Ge(i[6]),X=[];for(let F=0;F<w.length;F+=1)X[F]=Sa(ba(i,w,F));let Pe=Ge(i[6]),he=[];for(let F=0;F<Pe.length;F+=1)he[F]=Ta(ya(i,Pe,F));let je=Ge(Array(7)),ge=[];for(let F=0;F<je.length;F+=1)ge[F]=Ca(_a(i,je,F));let be=Ge(Array(6)),Y=[];for(let F=0;F<be.length;F+=1)Y[F]=Aa(ga(i,be,F));function le(F){i[28](F)}let we={timePrecision:i[1],setTime:i[10]};i[4]!==void 0&&(we.browseDate=i[4]),Ee=new As({props:we}),tn.push(()=>Ln(Ee,"browseDate",le));const ze=i[21].default,Ye=Ko(ze,i,i[20],null);return{c(){e=C("div"),n=C("div"),r=C("div"),s=C("button"),s.innerHTML=u,c=re(),g=C("div"),y=C("select");for(let F=0;F<K.length;F+=1)K[F].c();m=re(),v=C("select");for(let F=0;F<fe.length;F+=1)fe[F].c();k=re(),L=Yt("svg"),j=Yt("path"),Q=re(),W=C("div"),z=C("select");for(let F=0;F<X.length;F+=1)X[F].c();S=re(),D=C("select");for(let F=0;F<he.length;F+=1)he[F].c();G=re(),A=Yt("svg"),se=Yt("path"),pe=re(),ae=C("button"),ae.innerHTML=oe,ve=re(),ke=C("div");for(let F=0;F<ge.length;F+=1)ge[F].c();Fe=re();for(let F=0;F<Y.length;F+=1)Y[F].c();_e=re(),Ut(Ee.$$.fragment),qe=re(),Ye&&Ye.c(),this.h()},l(F){e=O(F,"DIV",{class:!0,tabindex:!0});var Se=H(e);n=O(Se,"DIV",{class:!0,tabindex:!0});var ye=H(n);r=O(ye,"DIV",{class:!0});var ue=H(r);s=O(ue,"BUTTON",{type:!0,class:!0,tabindex:!0,"data-svelte-h":!0}),We(s)!=="svelte-t4cock"&&(s.innerHTML=u),c=ie(ue),g=O(ue,"DIV",{class:!0});var xe=H(g);y=O(xe,"SELECT",{class:!0});var ut=H(y);for(let Je=0;Je<K.length;Je+=1)K[Je].l(ut);ut.forEach(b),m=ie(xe),v=O(xe,"SELECT",{class:!0,tabindex:!0});var Dt=H(v);for(let Je=0;Je<fe.length;Je+=1)fe[Je].l(Dt);Dt.forEach(b),k=ie(xe),L=Zt(xe,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,class:!0});var St=H(L);j=Zt(St,"path",{d:!0,transform:!0}),H(j).forEach(b),St.forEach(b),xe.forEach(b),Q=ie(ue),W=O(ue,"DIV",{class:!0});var dt=H(W);z=O(dt,"SELECT",{class:!0});var kt=H(z);for(let Je=0;Je<X.length;Je+=1)X[Je].l(kt);kt.forEach(b),S=ie(dt),D=O(dt,"SELECT",{class:!0,tabindex:!0});var Pt=H(D);for(let Je=0;Je<he.length;Je+=1)he[Je].l(Pt);Pt.forEach(b),G=ie(dt),A=Zt(dt,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,class:!0});var ht=H(A);se=Zt(ht,"path",{d:!0,transform:!0}),H(se).forEach(b),ht.forEach(b),dt.forEach(b),pe=ie(ue),ae=O(ue,"BUTTON",{type:!0,class:!0,tabindex:!0,"data-svelte-h":!0}),We(ae)!=="svelte-1a006lp"&&(ae.innerHTML=oe),ue.forEach(b),ve=ie(ye),ke=O(ye,"DIV",{class:!0});var Ct=H(ke);for(let Je=0;Je<ge.length;Je+=1)ge[Je].l(Ct);Ct.forEach(b),Fe=ie(ye);for(let Je=0;Je<Y.length;Je+=1)Y[Je].l(ye);_e=ie(ye),Vt(Ee.$$.fragment,ye),qe=ie(ye),Ye&&Ye.l(ye),ye.forEach(b),Se.forEach(b),this.h()},h(){p(s,"type","button"),p(s,"class","page-button svelte-w239uu"),p(s,"tabindex","-1"),p(y,"class","svelte-w239uu"),p(v,"class","dummy-select svelte-w239uu"),p(v,"tabindex","-1"),p(j,"d","M6 0l12 12-12 12z"),p(j,"transform","rotate(90, 12, 12)"),p(L,"xmlns","http://www.w3.org/2000/svg"),p(L,"width","24"),p(L,"height","24"),p(L,"viewBox","0 0 24 24"),p(L,"class","svelte-w239uu"),p(g,"class","dropdown month svelte-w239uu"),p(z,"class","svelte-w239uu"),p(D,"class","dummy-select svelte-w239uu"),p(D,"tabindex","-1"),p(se,"d","M6 0l12 12-12 12z"),p(se,"transform","rotate(90, 12, 12)"),p(A,"xmlns","http://www.w3.org/2000/svg"),p(A,"width","24"),p(A,"height","24"),p(A,"viewBox","0 0 24 24"),p(A,"class","svelte-w239uu"),p(W,"class","dropdown year svelte-w239uu"),p(ae,"type","button"),p(ae,"class","page-button svelte-w239uu"),p(ae,"tabindex","-1"),p(r,"class","top svelte-w239uu"),p(ke,"class","header svelte-w239uu"),p(n,"class","tab-container svelte-w239uu"),p(n,"tabindex","-1"),p(e,"class","date-time-picker svelte-w239uu"),p(e,"tabindex","0")},m(F,Se){de(F,e,Se),h(e,n),h(n,r),h(r,s),h(r,c),h(r,g),h(g,y);for(let ye=0;ye<K.length;ye+=1)K[ye]&&K[ye].m(y,null);Jt(y,i[8]),h(g,m),h(g,v);for(let ye=0;ye<fe.length;ye+=1)fe[ye]&&fe[ye].m(v,null);h(g,k),h(g,L),h(L,j),h(r,Q),h(r,W),h(W,z);for(let ye=0;ye<X.length;ye+=1)X[ye]&&X[ye].m(z,null);Jt(z,i[9]),h(W,S),h(W,D);for(let ye=0;ye<he.length;ye+=1)he[ye]&&he[ye].m(D,null);h(W,G),h(W,A),h(A,se),h(r,pe),h(r,ae),h(n,ve),h(n,ke);for(let ye=0;ye<ge.length;ye+=1)ge[ye]&&ge[ye].m(ke,null);h(n,Fe);for(let ye=0;ye<Y.length;ye+=1)Y[ye]&&Y[ye].m(n,null);h(n,_e),qt(Ee,n,null),h(n,qe),Ye&&Ye.m(n,null),Le=!0,ne||(Ce=[Ze(s,"click",i[23]),Ze(y,"keydown",i[16]),Ze(y,"input",i[24]),Ze(z,"input",i[25]),Ze(z,"keydown",i[15]),Ze(ae,"click",i[26]),Ze(e,"focusout",i[22]),Ze(e,"keydown",i[17])],ne=!0)},p(F,Se){if(Se[0]&556){P=Ge(F[5].months);let ue;for(ue=0;ue<P.length;ue+=1){const xe=ka(F,P,ue);K[ue]?K[ue].p(xe,Se):(K[ue]=Ea(xe),K[ue].c(),K[ue].m(y,null))}for(;ue<K.length;ue+=1)K[ue].d(1);K.length=P.length}if((!Le||Se[0]&256)&&Jt(y,F[8]),Se[0]&288){$=Ge(F[5].months);let ue;for(ue=0;ue<$.length;ue+=1){const xe=wa(F,$,ue);fe[ue]?fe[ue].p(xe,Se):(fe[ue]=Da(xe),fe[ue].c(),fe[ue].m(v,null))}for(;ue<fe.length;ue+=1)fe[ue].d(1);fe.length=$.length}if(Se[0]&64){w=Ge(F[6]);let ue;for(ue=0;ue<w.length;ue+=1){const xe=ba(F,w,ue);X[ue]?X[ue].p(xe,Se):(X[ue]=Sa(xe),X[ue].c(),X[ue].m(z,null))}for(;ue<X.length;ue+=1)X[ue].d(1);X.length=w.length}if((!Le||Se[0]&576)&&Jt(z,F[9]),Se[0]&80){Pe=Ge(F[6]);let ue;for(ue=0;ue<Pe.length;ue+=1){const xe=ya(F,Pe,ue);he[ue]?he[ue].p(xe,Se):(he[ue]=Ta(xe),he[ue].c(),he[ue].m(D,null))}for(;ue<he.length;ue+=1)he[ue].d(1);he.length=Pe.length}if(Se[0]&32){je=Ge(Array(7));let ue;for(ue=0;ue<je.length;ue+=1){const xe=_a(F,je,ue);ge[ue]?ge[ue].p(xe,Se):(ge[ue]=Ca(xe),ge[ue].c(),ge[ue].m(ke,null))}for(;ue<ge.length;ue+=1)ge[ue].d(1);ge.length=je.length}if(Se[0]&18829){be=Ge(Array(6));let ue;for(ue=0;ue<be.length;ue+=1){const xe=ga(F,be,ue);Y[ue]?Y[ue].p(xe,Se):(Y[ue]=Aa(xe),Y[ue].c(),Y[ue].m(n,_e))}for(;ue<Y.length;ue+=1)Y[ue].d(1);Y.length=be.length}const ye={};Se[0]&2&&(ye.timePrecision=F[1]),!Te&&Se[0]&16&&(Te=!0,ye.browseDate=F[4],In(()=>Te=!1)),Ee.$set(ye),Ye&&Ye.p&&(!Le||Se[0]&1048576)&&Fo(Ye,ze,F,F[20],Le?Uo(ze,F[20],Se,null):jo(F[20]),null)},i(F){Le||(rt(Ee.$$.fragment,F),rt(Ye,F),Le=!0)},o(F){st(Ee.$$.fragment,F),st(Ye,F),Le=!1},d(F){F&&b(e),Mt(K,F),Mt(fe,F),Mt(X,F),Mt(he,F),Mt(ge,F),Mt(Y,F),zt(Ee),Ye&&Ye.d(F),ne=!1,kn(Ce)}}}function wn(i){return new Date(i.getTime())}function Vr(i,e,n){return i>n?wn(n):i<e?wn(e):wn(i)}function Ei(i,e,n){const r=Vr(i,e,n);return r.getTime()!==i.getTime()&&(i=new Date(r.getFullYear(),r.getMonth(),r.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()),i=Vr(i,e,n)),i}function Pa(i,e){let n=[];for(let r=i.getFullYear();r<=e.getFullYear();r++)n.push(r);return n}function Ai(i,e,n){const r=new Date(i.year,i.month,i.number),s=new Date(e.getFullYear(),e.getMonth(),e.getDate()),u=new Date(n.getFullYear(),n.getMonth(),n.getDate());return r>=s&&r<=u}function Bs(i,e,n){let r,s,u,c,{$$slots:g={},$$scope:y}=e;const m=Vo();let{value:v=null}=e;function k(w){w.getTime()!==(v==null?void 0:v.getTime())&&(n(4,A=Vr(w,D,G)),n(0,v=wn(A)))}function L(w){w.getTime()!==(v==null?void 0:v.getTime())&&(n(4,A=Ei(w,D,G)),n(0,v=wn(A)))}function j(w){n(4,A=Ei(w,D,G)),!oe&&v&&k(A)}function Q(w){return n(4,A=Vr(w,D,G)),v&&k(A),A}const W=new Date,z=new Date;let{timePrecision:S=null}=e,{min:D=new Date(z.getFullYear()-20,0,1)}=e,{max:G=new Date(z.getFullYear(),11,31,23,59,59,999)}=e,A=wn(v||Ei(z,D,G));function se(w){A.getTime()!==(w==null?void 0:w.getTime())&&n(4,A=w?wn(w):A)}let pe=Pa(D,G),{locale:ae={}}=e,{browseWithoutSelecting:oe=!1}=e;function ve(w){A.setFullYear(w),j(A)}function ke(w){let X=A.getFullYear();w===12?(w=0,X++):w===-1&&(w=11,X--);const Pe=fr(X,w),he=Math.min(A.getDate(),Pe);j(new Date(X,w,he,A.getHours(),A.getMinutes(),A.getSeconds(),A.getMilliseconds()))}function Fe(w){Ai(w,D,G)&&(A.setFullYear(0),A.setMonth(0),A.setDate(1),A.setFullYear(w.year),A.setMonth(w.month),A.setDate(w.number),L(A),m("select",wn(A)))}function _e(w){if(w.shiftKey&&w.key==="ArrowUp")ve(A.getFullYear()-1);else if(w.shiftKey&&w.key==="ArrowDown")ve(A.getFullYear()+1);else if(w.shiftKey&&w.key==="ArrowLeft")ke(A.getMonth()-1);else if(w.shiftKey&&w.key==="ArrowRight")ke(A.getMonth()+1);else return!1;return w.preventDefault(),!0}function Ee(w){if(w.shiftKey||w.altKey){_e(w);return}else if(w.key==="ArrowUp")ve(A.getFullYear()-1);else if(w.key==="ArrowDown")ve(A.getFullYear()+1);else if(w.key==="ArrowLeft")ke(A.getMonth()-1);else if(w.key==="ArrowRight")ke(A.getMonth()+1);else{_e(w);return}w.preventDefault()}function Te(w){if(w.shiftKey||w.altKey){_e(w);return}else if(w.key==="ArrowUp"||w.key==="ArrowLeft")ke(A.getMonth()-1);else if(w.key==="ArrowDown"||w.key==="ArrowRight")ke(A.getMonth()+1);else{_e(w);return}w.preventDefault()}function qe(w){var Pe,he;let X=w.shiftKey||w.altKey;if(!(((Pe=w.target)==null?void 0:Pe.tagName)==="SELECT"||((he=w.target)==null?void 0:he.tagName)==="SPAN")){if(X){_e(w);return}else if(w.key==="ArrowUp")A.setDate(A.getDate()-7),L(A);else if(w.key==="ArrowDown")A.setDate(A.getDate()+7),L(A);else if(w.key==="ArrowLeft")A.setDate(A.getDate()-1),L(A);else if(w.key==="ArrowRight")A.setDate(A.getDate()+1),L(A);else if(w.key==="Enter")k(A),m("select",wn(A));else return;w.preventDefault()}}function Le(w){bs.call(this,i,w)}const ne=()=>ke(A.getMonth()-1),Ce=w=>ke(parseInt(w.currentTarget.value)),P=w=>ve(parseInt(w.currentTarget.value)),K=()=>ke(A.getMonth()+1),$=w=>Fe(w);function fe(w){A=w,n(4,A)}return i.$$set=w=>{"value"in w&&n(0,v=w.value),"timePrecision"in w&&n(1,S=w.timePrecision),"min"in w&&n(2,D=w.min),"max"in w&&n(3,G=w.max),"locale"in w&&n(18,ae=w.locale),"browseWithoutSelecting"in w&&n(19,oe=w.browseWithoutSelecting),"$$scope"in w&&n(20,y=w.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&13&&(v&&v>G?k(G):v&&v<D&&k(D)),i.$$.dirty[0]&1&&se(v),i.$$.dirty[0]&12&&n(6,pe=Pa(D,G)),i.$$.dirty[0]&262144&&n(5,r=zo(ae)),i.$$.dirty[0]&16&&n(9,s=A.getFullYear()),i.$$.dirty[0]&16&&n(8,u=A.getMonth()),i.$$.dirty[0]&48&&n(7,c=Is(A,r.weekStartsOn))},[v,S,D,G,A,r,pe,c,u,s,Q,W,ve,ke,Fe,Ee,Te,qe,ae,oe,y,g,Le,ne,Ce,P,K,$,fe]}class Ks extends on{constructor(e){super(),sn(this,e,Bs,Ns,nn,{value:0,timePrecision:1,min:2,max:3,locale:18,browseWithoutSelecting:19},null,[-1,-1])}}function Fs(i){return i<.5?4*i*i*i:.5*Math.pow(2*i-2,3)+1}function js(i){const e=i-1;return e*e*e+1}function Us(i,{delay:e=0,duration:n=400,easing:r=js,x:s=0,y:u=0,opacity:c=0}={}){const g=getComputedStyle(i),y=+g.opacity,m=g.transform==="none"?"":g.transform,v=y*(1-c),[k,L]=ca(s),[j,Q]=ca(u);return{delay:e,duration:n,easing:r,css:(W,z)=>`
			transform: ${m} translate(${(1-W)*k}${L}, ${(1-W)*j}${Q});
			opacity: ${y-v*z}`}}function Ia(i,e,n){let r="",s=!0;n=n||new Date(2020,0,1,0,0,0,0);let u=n.getFullYear(),c=n.getMonth(),g=n.getDate(),y=n.getHours(),m=n.getMinutes(),v=n.getSeconds();const k=n.getMilliseconds();function L(S){for(let D=0;D<S.length;D++)if(i.startsWith(S[D]))i=i.slice(1);else{s=!1,i.length===0&&(r=S.slice(D));return}}function j(S,D,G){const A=i.match(S);if(A!=null&&A[0]){i=i.slice(A[0].length);const se=parseInt(A[0]);return se>G||se<D?(s=!1,null):se}else return s=!1,null}function Q(S){const D=S.findIndex(G=>G.toLowerCase()===i.slice(0,G.length).toLowerCase());return D>=0?(i=i.slice(S[D].length),D):(s=!1,null)}function W(S){if(typeof S=="string")L(S);else if(S.id==="yy"){const D=j(/^[0-9]{2}/,0,99);D!==null&&(u=2e3+D)}else if(S.id==="yyyy"){const D=j(/^[0-9]{4}/,0,9999);D!==null&&(u=D)}else if(S.id==="MM"){const D=j(/^[0-9]{2}/,1,12);D!==null&&(c=D-1)}else if(S.id==="MMM"){const D=Q(S.allowedValues||[]);D!==null&&(c=D)}else if(S.id==="dd"){const D=j(/^[0-9]{2}/,1,31);D!==null&&(g=D)}else if(S.id==="HH"){const D=j(/^[0-9]{2}/,0,23);D!==null&&(y=D)}else if(S.id==="mm"){const D=j(/^[0-9]{2}/,0,59);D!==null&&(m=D)}else if(S.id==="ss"){const D=j(/^[0-9]{2}/,0,59);D!==null&&(v=D)}}for(const S of e)if(W(S),!s)break;const z=fr(u,c);return g>z&&(s=!1),{date:s?new Date(u,c,g,y,m,v,k):null,missingPunctuation:r}}function or(i){return("0"+i.toString()).slice(-2)}function Vs(i,e){if(i.startsWith("yyyy"))return{id:"yyyy",toString:n=>n.getFullYear().toString()};if(i.startsWith("yy"))return{id:"yy",toString:n=>n.getFullYear().toString().slice(-2)};if(i.startsWith("MMM"))return{id:"MMM",allowedValues:e.shortMonths,toString:n=>e.shortMonths[n.getMonth()]};if(i.startsWith("MM"))return{id:"MM",toString:n=>or(n.getMonth()+1)};if(i.startsWith("dd"))return{id:"dd",toString:n=>or(n.getDate())};if(i.startsWith("HH"))return{id:"HH",toString:n=>or(n.getHours())};if(i.startsWith("mm"))return{id:"mm",toString:n=>or(n.getMinutes())};if(i.startsWith("ss"))return{id:"ss",toString:n=>or(n.getSeconds())}}function La(i,e={}){const n=zo(e),r=[];for(;i.length>0;){const s=Vs(i,n);s?(r.push(s),i=i.slice(s.id.length)):typeof r[r.length-1]=="string"?(r[r.length-1]+=i[0],i=i.slice(1)):(r.push(i[0]),i=i.slice(1))}return r}function Ma(i){let e,n,r,s,u=`${i[18]}px`,c;function g(m){i[34](m)}let y={min:i[3],max:i[4],locale:i[10],browseWithoutSelecting:i[11],timePrecision:i[12],$$slots:{default:[qs]},$$scope:{ctx:i}};return i[14]!==void 0&&(y.value=i[14]),n=new Ks({props:y}),tn.push(()=>Ln(n,"value",g)),n.$on("focusout",i[21]),n.$on("select",i[23]),{c(){e=C("div"),Ut(n.$$.fragment),this.h()},l(m){e=O(m,"DIV",{class:!0});var v=H(e);Vt(n.$$.fragment,v),v.forEach(b),this.h()},h(){p(e,"class","picker svelte-1vabmef"),Tt(e,"visible",i[2]),Tt(e,"above",i[17]),Oi(e,"--picker-left-position",u)},m(m,v){de(m,e,v),qt(n,e,null),i[35](e),c=!0},p(m,v){const k={};v[0]&8&&(k.min=m[3]),v[0]&16&&(k.max=m[4]),v[0]&1024&&(k.locale=m[10]),v[0]&2048&&(k.browseWithoutSelecting=m[11]),v[0]&4096&&(k.timePrecision=m[12]),v[1]&32&&(k.$$scope={dirty:v,ctx:m}),!r&&v[0]&16384&&(r=!0,k.value=m[14],In(()=>r=!1)),n.$set(k),(!c||v[0]&4)&&Tt(e,"visible",m[2]),(!c||v[0]&131072)&&Tt(e,"above",m[17]),v[0]&262144&&u!==(u=`${m[18]}px`)&&Oi(e,"--picker-left-position",u)},i(m){c||(rt(n.$$.fragment,m),m&&Un(()=>{c&&(s||(s=fa(e,i[24],{},!0)),s.run(1))}),c=!0)},o(m){st(n.$$.fragment,m),m&&(s||(s=fa(e,i[24],{},!1)),s.run(0)),c=!1},d(m){m&&b(e),zt(n),i[35](null),m&&s&&s.end()}}}function qs(i){let e;const n=i[29].default,r=Ko(n,i,i[36],null);return{c(){r&&r.c()},l(s){r&&r.l(s)},m(s,u){r&&r.m(s,u),e=!0},p(s,u){r&&r.p&&(!e||u[1]&32)&&Fo(r,n,s,s[36],e?Uo(n,s[36],u,null):jo(s[36]),null)},i(s){e||(rt(r,s),e=!0)},o(s){st(r,s),e=!1},d(s){r&&r.d(s)}}}function zs(i){let e,n,r,s,u,c,g,y=i[2]&&!i[7]&&Ma(i);return{c(){e=C("div"),n=C("input"),r=re(),y&&y.c(),this.h()},l(m){e=O(m,"DIV",{class:!0});var v=H(e);n=O(v,"INPUT",{type:!0,autocomplete:!0,id:!0,placeholder:!0,class:!0}),r=ie(v),y&&y.l(v),v.forEach(b),this.h()},h(){p(n,"type","text"),p(n,"autocomplete","off"),n.value=i[0],p(n,"id",i[5]),p(n,"placeholder",i[6]),n.disabled=i[7],n.required=i[8],p(n,"class","svelte-1vabmef"),Tt(n,"invalid",!i[1]),p(e,"class",s="date-time-field "+i[9]+" svelte-1vabmef")},m(m,v){de(m,e,v),h(e,n),i[30](n),h(e,r),y&&y.m(e,null),u=!0,c||(g=[Ze(n,"focus",i[31]),Ze(n,"mousedown",i[32]),Ze(n,"input",i[33]),Ze(e,"focusout",i[21]),Ze(e,"keydown",i[22])],c=!0)},p(m,v){(!u||v[0]&1&&n.value!==m[0])&&(n.value=m[0]),(!u||v[0]&32)&&p(n,"id",m[5]),(!u||v[0]&64)&&p(n,"placeholder",m[6]),(!u||v[0]&128)&&(n.disabled=m[7]),(!u||v[0]&256)&&(n.required=m[8]),(!u||v[0]&2)&&Tt(n,"invalid",!m[1]),m[2]&&!m[7]?y?(y.p(m,v),v[0]&132&&rt(y,1)):(y=Ma(m),y.c(),rt(y,1),y.m(e,null)):y&&(Vn(),st(y,1,1,()=>{y=null}),qn()),(!u||v[0]&512&&s!==(s="date-time-field "+m[9]+" svelte-1vabmef"))&&p(e,"class",s)},i(m){u||(rt(y),u=!0)},o(m){st(y),u=!1},d(m){m&&b(e),i[30](null),y&&y.d(),c=!1,kn(g)}}}function Hs(i,e,n){let r,s,{$$slots:u={},$$scope:c}=e;const g=Vo(),y=new Date,m=Mr(null);cr(i,m,Y=>n(37,s=Y));const v={subscribe:m.subscribe,set:Y=>{Y==null?(m.set(null),n(25,k=Y)):Y.getTime()!==(s==null?void 0:s.getTime())&&(m.set(Y),n(25,k=Y))}};cr(i,v,Y=>n(14,r=Y));let{value:k=null}=e,{min:L=new Date(y.getFullYear()-20,0,1)}=e,{max:j=new Date(y.getFullYear(),11,31,23,59,59,999)}=e,{id:Q=null}=e,{placeholder:W="2020-12-31 23:00:00"}=e,{valid:z=!0}=e,{disabled:S=!1}=e,{required:D=!1}=e,{class:G=""}=e,{locale:A={}}=e,{format:se="yyyy-MM-dd HH:mm:ss"}=e,pe=La(se,A);function ae(Y,le){n(0,oe=ma(Y,le))}let{text:oe=ma(r,pe)}=e;function ve(Y,le){if(Y.length){const we=Ia(Y,le,r);we.date!==null?(n(1,z=!0),v.set(we.date)):n(1,z=!1)}else n(1,z=!0),k&&(n(25,k=null),v.set(null))}let{visible:ke=!1}=e,{closeOnSelection:Fe=!1}=e,{browseWithoutSelecting:_e=!1}=e,{timePrecision:Ee=null}=e;function Te(Y){(Y==null?void 0:Y.currentTarget)instanceof HTMLElement&&Y.relatedTarget&&Y.relatedTarget instanceof Node&&Y.currentTarget.contains(Y.relatedTarget)||n(2,ke=!1)}function qe(Y){Y.key==="Escape"&&ke?(n(2,ke=!1),Y.preventDefault(),Y.stopPropagation()):Y.key==="Enter"&&(n(2,ke=!ke),Y.preventDefault())}function Le(Y){g("select",Y.detail),Fe&&n(2,ke=!1)}let{dynamicPositioning:ne=!1}=e,Ce,P,K=!1,$=null;function fe(){if(n(17,K=!1),n(18,$=null),ke&&P&&ne){const Y=Ce.getBoundingClientRect(),le=P.offsetWidth-Y.width,we=Y.bottom+P.offsetHeight+5,ze=Y.left+P.offsetWidth+5;if(we>window.innerHeight&&n(17,K=!0),ze>window.innerWidth&&(n(18,$=-le),Y.left<le+5)){const F=window.innerWidth/2-P.offsetWidth/2;n(18,$=F-Y.left)}}}function w(Y){return fe(),Us(Y,{duration:200,easing:Fs,y:K?5:-5})}function X(Y){tn[Y?"unshift":"push"](()=>{Ce=Y,n(15,Ce)})}const Pe=()=>n(2,ke=!0),he=()=>n(2,ke=!0),je=Y=>{if(Y instanceof InputEvent&&Y.inputType==="insertText"&&typeof Y.data=="string"&&Y.currentTarget.value===oe+Y.data){let le=Ia(oe,pe,r);if(le.missingPunctuation!==""&&!le.missingPunctuation.startsWith(Y.data)){n(0,oe=oe+le.missingPunctuation+Y.data);return}}n(0,oe=Y.currentTarget.value)};function ge(Y){r=Y,v.set(r)}function be(Y){tn[Y?"unshift":"push"](()=>{P=Y,n(16,P)})}return i.$$set=Y=>{"value"in Y&&n(25,k=Y.value),"min"in Y&&n(3,L=Y.min),"max"in Y&&n(4,j=Y.max),"id"in Y&&n(5,Q=Y.id),"placeholder"in Y&&n(6,W=Y.placeholder),"valid"in Y&&n(1,z=Y.valid),"disabled"in Y&&n(7,S=Y.disabled),"required"in Y&&n(8,D=Y.required),"class"in Y&&n(9,G=Y.class),"locale"in Y&&n(10,A=Y.locale),"format"in Y&&n(26,se=Y.format),"text"in Y&&n(0,oe=Y.text),"visible"in Y&&n(2,ke=Y.visible),"closeOnSelection"in Y&&n(27,Fe=Y.closeOnSelection),"browseWithoutSelecting"in Y&&n(11,_e=Y.browseWithoutSelecting),"timePrecision"in Y&&n(12,Ee=Y.timePrecision),"dynamicPositioning"in Y&&n(28,ne=Y.dynamicPositioning),"$$scope"in Y&&n(36,c=Y.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&33554432&&v.set(k),i.$$.dirty[0]&67109888&&n(13,pe=La(se,A)),i.$$.dirty[0]&24576&&ae(r,pe),i.$$.dirty[0]&8193&&ve(oe,pe)},[oe,z,ke,L,j,Q,W,S,D,G,A,_e,Ee,pe,r,Ce,P,K,$,m,v,Te,qe,Le,w,k,se,Fe,ne,u,X,Pe,he,je,ge,be,c]}class Yn extends on{constructor(e){super(),sn(this,e,Hs,zs,nn,{value:25,min:3,max:4,id:5,placeholder:6,valid:1,disabled:7,required:8,class:9,locale:10,format:26,text:0,visible:2,closeOnSelection:27,browseWithoutSelecting:11,timePrecision:12,dynamicPositioning:28},null,[-1,-1])}}var Ra=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ho(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var xo={exports:{}};(function(i,e){(function(n,r){i.exports=r()})(Ra,function(){var n=function(t,a){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(o[f]=l[f])})(t,a)},r=function(){return(r=Object.assign||function(t){for(var a,o=1,l=arguments.length;o<l;o++)for(var f in a=arguments[o])Object.prototype.hasOwnProperty.call(a,f)&&(t[f]=a[f]);return t}).apply(this,arguments)};function s(t,a,o){for(var l,f=0,d=a.length;f<d;f++)!l&&f in a||((l=l||Array.prototype.slice.call(a,0,f))[f]=a[f]);return t.concat(l||Array.prototype.slice.call(a))}var u=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Ra,c=Object.keys,g=Array.isArray;function y(t,a){return typeof a!="object"||c(a).forEach(function(o){t[o]=a[o]}),t}typeof Promise>"u"||u.Promise||(u.Promise=Promise);var m=Object.getPrototypeOf,v={}.hasOwnProperty;function k(t,a){return v.call(t,a)}function L(t,a){typeof a=="function"&&(a=a(m(t))),(typeof Reflect>"u"?c:Reflect.ownKeys)(a).forEach(function(o){Q(t,o,a[o])})}var j=Object.defineProperty;function Q(t,a,o,l){j(t,a,y(o&&k(o,"get")&&typeof o.get=="function"?{get:o.get,set:o.set,configurable:!0}:{value:o,configurable:!0,writable:!0},l))}function W(t){return{from:function(a){return t.prototype=Object.create(a.prototype),Q(t.prototype,"constructor",t),{extend:L.bind(null,t.prototype)}}}}var z=Object.getOwnPropertyDescriptor,S=[].slice;function D(t,a,o){return S.call(t,a,o)}function G(t,a){return a(t)}function A(t){if(!t)throw new Error("Assertion Failed")}function se(t){u.setImmediate?setImmediate(t):setTimeout(t,0)}function pe(t,a){if(typeof a=="string"&&k(t,a))return t[a];if(!a)return t;if(typeof a!="string"){for(var o=[],l=0,f=a.length;l<f;++l){var d=pe(t,a[l]);o.push(d)}return o}var _=a.indexOf(".");if(_!==-1){var E=t[a.substr(0,_)];return E==null?void 0:pe(E,a.substr(_+1))}}function ae(t,a,o){if(t&&a!==void 0&&!("isFrozen"in Object&&Object.isFrozen(t)))if(typeof a!="string"&&"length"in a){A(typeof o!="string"&&"length"in o);for(var l=0,f=a.length;l<f;++l)ae(t,a[l],o[l])}else{var d,_,E=a.indexOf(".");E!==-1?(d=a.substr(0,E),(_=a.substr(E+1))===""?o===void 0?g(t)&&!isNaN(parseInt(d))?t.splice(d,1):delete t[d]:t[d]=o:ae(E=!(E=t[d])||!k(t,d)?t[d]={}:E,_,o)):o===void 0?g(t)&&!isNaN(parseInt(a))?t.splice(a,1):delete t[a]:t[a]=o}}function oe(t){var a,o={};for(a in t)k(t,a)&&(o[a]=t[a]);return o}var ve=[].concat;function ke(t){return ve.apply([],t)}var Sn="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ke([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(a){return a+t+"Array"})}))).filter(function(t){return u[t]}),Fe=new Set(Sn.map(function(t){return u[t]})),_e=null;function Ee(t){return _e=new WeakMap,t=function a(o){if(!o||typeof o!="object")return o;var l=_e.get(o);if(l)return l;if(g(o)){l=[],_e.set(o,l);for(var f=0,d=o.length;f<d;++f)l.push(a(o[f]))}else if(Fe.has(o.constructor))l=o;else{var _,E=m(o);for(_ in l=E===Object.prototype?{}:Object.create(E),_e.set(o,l),o)k(o,_)&&(l[_]=a(o[_]))}return l}(t),_e=null,t}var Te={}.toString;function qe(t){return Te.call(t).slice(8,-1)}var Le=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ne=typeof Le=="symbol"?function(t){var a;return t!=null&&(a=t[Le])&&a.apply(t)}:function(){return null};function Ce(t,a){return a=t.indexOf(a),0<=a&&t.splice(a,1),0<=a}var P={};function K(t){var a,o,l,f;if(arguments.length===1){if(g(t))return t.slice();if(this===P&&typeof t=="string")return[t];if(f=ne(t)){for(o=[];!(l=f.next()).done;)o.push(l.value);return o}if(t==null)return[t];if(typeof(a=t.length)!="number")return[t];for(o=new Array(a);a--;)o[a]=t[a];return o}for(a=arguments.length,o=new Array(a);a--;)o[a]=arguments[a];return o}var $=typeof Symbol<"u"?function(t){return t[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Pt=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],ln=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Pt),fe={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function w(t,a){this.name=t,this.message=a}function X(t,a){return t+". Errors: "+Object.keys(a).map(function(o){return a[o].toString()}).filter(function(o,l,f){return f.indexOf(o)===l}).join(`
`)}function Pe(t,a,o,l){this.failures=a,this.failedKeys=l,this.successCount=o,this.message=X(t,a)}function he(t,a){this.name="BulkError",this.failures=Object.keys(a).map(function(o){return a[o]}),this.failuresByPos=a,this.message=X(t,this.failures)}W(w).from(Error).extend({toString:function(){return this.name+": "+this.message}}),W(Pe).from(w),W(he).from(w);var je=ln.reduce(function(t,a){return t[a]=a+"Error",t},{}),ge=w,be=ln.reduce(function(t,a){var o=a+"Error";function l(f,d){this.name=o,f?typeof f=="string"?(this.message="".concat(f).concat(d?`
 `+d:""),this.inner=d||null):typeof f=="object"&&(this.message="".concat(f.name," ").concat(f.message),this.inner=f):(this.message=fe[a]||o,this.inner=null)}return W(l).from(ge),t[a]=l,t},{});be.Syntax=SyntaxError,be.Type=TypeError,be.Range=RangeError;var Y=Pt.reduce(function(t,a){return t[a+"Error"]=be[a],t},{}),le=ln.reduce(function(t,a){return["Syntax","Type","Range"].indexOf(a)===-1&&(t[a+"Error"]=be[a]),t},{});function we(){}function ze(t){return t}function Ye(t,a){return t==null||t===ze?a:function(o){return a(t(o))}}function F(t,a){return function(){t.apply(this,arguments),a.apply(this,arguments)}}function Se(t,a){return t===we?a:function(){var o=t.apply(this,arguments);o!==void 0&&(arguments[0]=o);var l=this.onsuccess,f=this.onerror;this.onsuccess=null,this.onerror=null;var d=a.apply(this,arguments);return l&&(this.onsuccess=this.onsuccess?F(l,this.onsuccess):l),f&&(this.onerror=this.onerror?F(f,this.onerror):f),d!==void 0?d:o}}function ye(t,a){return t===we?a:function(){t.apply(this,arguments);var o=this.onsuccess,l=this.onerror;this.onsuccess=this.onerror=null,a.apply(this,arguments),o&&(this.onsuccess=this.onsuccess?F(o,this.onsuccess):o),l&&(this.onerror=this.onerror?F(l,this.onerror):l)}}function ue(t,a){return t===we?a:function(o){var l=t.apply(this,arguments);y(o,l);var f=this.onsuccess,d=this.onerror;return this.onsuccess=null,this.onerror=null,o=a.apply(this,arguments),f&&(this.onsuccess=this.onsuccess?F(f,this.onsuccess):f),d&&(this.onerror=this.onerror?F(d,this.onerror):d),l===void 0?o===void 0?void 0:o:y(l,o)}}function xe(t,a){return t===we?a:function(){return a.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function ut(t,a){return t===we?a:function(){var o=t.apply(this,arguments);if(o&&typeof o.then=="function"){for(var l=this,f=arguments.length,d=new Array(f);f--;)d[f]=arguments[f];return o.then(function(){return a.apply(l,d)})}return a.apply(this,arguments)}}le.ModifyError=Pe,le.DexieError=w,le.BulkError=he;var Dt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function St(t){Dt=t}var dt={},kt=100,Sn=typeof Promise>"u"?[]:function(){var t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,m(t),t];var a=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[a,m(a),t]}(),Pt=Sn[0],ln=Sn[1],Sn=Sn[2],ln=ln&&ln.then,ht=Pt&&Pt.constructor,Ct=!!Sn,Je=function(t,a){_n.push([t,a]),vn&&(queueMicrotask(Ie),vn=!1)},gn=!0,vn=!0,Qt=[],Rt=[],It=ze,ot={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:we,pgp:!1,env:{},finalize:we},Be=ot,_n=[],jt=0,ft=[];function De(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var a=this._PSD=Be;if(typeof t!="function"){if(t!==dt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&mt(this,this._value))}this._state=null,this._value=null,++a.ref,function o(l,f){try{f(function(d){if(l._state===null){if(d===l)throw new TypeError("A promise cannot be resolved with itself.");var _=l._lib&&Ae();d&&typeof d.then=="function"?o(l,function(E,R){d instanceof De?d._then(E,R):d.then(E,R)}):(l._state=!0,l._value=d,ce(l)),_&&gt()}},mt.bind(null,l))}catch(d){mt(l,d)}}(this,t)}var pt={get:function(){var t=Be,a=fn;function o(l,f){var d=this,_=!t.global&&(t!==Be||a!==fn),E=_&&!dn(),R=new De(function(I,U){ee(d,new vt(Ki(l,t,_,E),Ki(f,t,_,E),I,U,t))});return this._consoleTask&&(R._consoleTask=this._consoleTask),R}return o.prototype=dt,o},set:function(t){Q(this,"then",t&&t.prototype===dt?pt:{get:function(){return t},set:pt.set})}};function vt(t,a,o,l,f){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof a=="function"?a:null,this.resolve=o,this.reject=l,this.psd=f}function mt(t,a){var o,l;Rt.push(a),t._state===null&&(o=t._lib&&Ae(),a=It(a),t._state=!1,t._value=a,l=t,Qt.some(function(f){return f._value===l._value})||Qt.push(l),ce(t),o&&gt())}function ce(t){var a=t._listeners;t._listeners=[];for(var o=0,l=a.length;o<l;++o)ee(t,a[o]);var f=t._PSD;--f.ref||f.finalize(),jt===0&&(++jt,Je(function(){--jt==0&&Nt()},[]))}function ee(t,a){if(t._state!==null){var o=t._state?a.onFulfilled:a.onRejected;if(o===null)return(t._state?a.resolve:a.reject)(t._value);++a.psd.ref,++jt,Je(He,[o,t,a])}else t._listeners.push(a)}function He(t,a,o){try{var l,f=a._value;!a._state&&Rt.length&&(Rt=[]),l=Dt&&a._consoleTask?a._consoleTask.run(function(){return t(f)}):t(f),a._state||Rt.indexOf(f)!==-1||function(d){for(var _=Qt.length;_;)if(Qt[--_]._value===d._value)return Qt.splice(_,1)}(a),o.resolve(l)}catch(d){o.reject(d)}finally{--jt==0&&Nt(),--o.psd.ref||o.psd.finalize()}}function Ie(){Mn(ot,function(){Ae()&&gt()})}function Ae(){var t=gn;return vn=gn=!1,t}function gt(){var t,a,o;do for(;0<_n.length;)for(t=_n,_n=[],o=t.length,a=0;a<o;++a){var l=t[a];l[0].apply(null,l[1])}while(0<_n.length);vn=gn=!0}function Nt(){var t=Qt;Qt=[],t.forEach(function(l){l._PSD.onunhandled.call(null,l._value,l)});for(var a=ft.slice(0),o=a.length;o;)a[--o]()}function Ht(t){return new De(dt,!1,t)}function it(t,a){var o=Be;return function(){var l=Ae(),f=Be;try{return Cn(o,!0),t.apply(this,arguments)}catch(d){a&&a(d)}finally{Cn(f,!1),l&&gt()}}}L(De.prototype,{then:pt,_then:function(t,a){ee(this,new vt(null,null,t,a,Be))},catch:function(t){if(arguments.length===1)return this.then(null,t);var a=t,o=arguments[1];return typeof a=="function"?this.then(null,function(l){return(l instanceof a?o:Ht)(l)}):this.then(null,function(l){return(l&&l.name===a?o:Ht)(l)})},finally:function(t){return this.then(function(a){return De.resolve(t()).then(function(){return a})},function(a){return De.resolve(t()).then(function(){return Ht(a)})})},timeout:function(t,a){var o=this;return t<1/0?new De(function(l,f){var d=setTimeout(function(){return f(new be.Timeout(a))},t);o.then(l,f).finally(clearTimeout.bind(null,d))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&Q(De.prototype,Symbol.toStringTag,"Dexie.Promise"),ot.env=Bi(),L(De,{all:function(){var t=K.apply(null,arguments).map(Lt);return new De(function(a,o){t.length===0&&a([]);var l=t.length;t.forEach(function(f,d){return De.resolve(f).then(function(_){t[d]=_,--l||a(t)},o)})})},resolve:function(t){return t instanceof De?t:t&&typeof t.then=="function"?new De(function(a,o){t.then(a,o)}):new De(dt,!0,t)},reject:Ht,race:function(){var t=K.apply(null,arguments).map(Lt);return new De(function(a,o){t.map(function(l){return De.resolve(l).then(a,o)})})},PSD:{get:function(){return Be},set:function(t){return Be=t}},totalEchoes:{get:function(){return fn}},newPSD:en,usePSD:Mn,scheduler:{get:function(){return Je},set:function(t){Je=t}},rejectionMapper:{get:function(){return It},set:function(t){It=t}},follow:function(t,a){return new De(function(o,l){return en(function(f,d){var _=Be;_.unhandleds=[],_.onunhandled=d,_.finalize=F(function(){var E,R=this;E=function(){R.unhandleds.length===0?f():d(R.unhandleds[0])},ft.push(function I(){E(),ft.splice(ft.indexOf(I),1)}),++jt,Je(function(){--jt==0&&Nt()},[])},_.finalize),t()},a,o,l)})}}),ht&&(ht.allSettled&&Q(De,"allSettled",function(){var t=K.apply(null,arguments).map(Lt);return new De(function(a){t.length===0&&a([]);var o=t.length,l=new Array(o);t.forEach(function(f,d){return De.resolve(f).then(function(_){return l[d]={status:"fulfilled",value:_}},function(_){return l[d]={status:"rejected",reason:_}}).then(function(){return--o||a(l)})})})}),ht.any&&typeof AggregateError<"u"&&Q(De,"any",function(){var t=K.apply(null,arguments).map(Lt);return new De(function(a,o){t.length===0&&o(new AggregateError([]));var l=t.length,f=new Array(l);t.forEach(function(d,_){return De.resolve(d).then(function(E){return a(E)},function(E){f[_]=E,--l||o(new AggregateError(f))})})})}));var yt={awaits:0,echoes:0,id:0},rn=0,cn=[],Xt=0,fn=0,En=0;function en(t,a,o,l){var f=Be,d=Object.create(f);return d.parent=f,d.ref=0,d.global=!1,d.id=++En,ot.env,d.env=Ct?{Promise:De,PromiseProp:{value:De,configurable:!0,writable:!0},all:De.all,race:De.race,allSettled:De.allSettled,any:De.any,resolve:De.resolve,reject:De.reject}:{},a&&y(d,a),++f.ref,d.finalize=function(){--this.parent.ref||this.parent.finalize()},l=Mn(d,t,o,l),d.ref===0&&d.finalize(),l}function _t(){return yt.id||(yt.id=++rn),++yt.awaits,yt.echoes+=kt,yt.id}function dn(){return!!yt.awaits&&(--yt.awaits==0&&(yt.id=0),yt.echoes=yt.awaits*kt,!0)}function Lt(t){return yt.echoes&&t&&t.constructor===ht?(_t(),t.then(function(a){return dn(),a},function(a){return dn(),Ot(a)})):t}function Xo(){var t=cn[cn.length-1];cn.pop(),Cn(t,!1)}function Cn(t,a){var o,l=Be;(a?!yt.echoes||Xt++&&t===Be:!Xt||--Xt&&t===Be)||queueMicrotask(a?(function(f){++fn,yt.echoes&&--yt.echoes!=0||(yt.echoes=yt.awaits=yt.id=0),cn.push(Be),Cn(f,!0)}).bind(null,t):Xo),t!==Be&&(Be=t,l===ot&&(ot.env=Bi()),Ct&&(o=ot.env.Promise,a=t.env,(l.global||t.global)&&(Object.defineProperty(u,"Promise",a.PromiseProp),o.all=a.all,o.race=a.race,o.resolve=a.resolve,o.reject=a.reject,a.allSettled&&(o.allSettled=a.allSettled),a.any&&(o.any=a.any))))}function Bi(){var t=u.Promise;return Ct?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(u,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject}:{}}function Mn(t,a,o,l,f){var d=Be;try{return Cn(t,!0),a(o,l,f)}finally{Cn(d,!1)}}function Ki(t,a,o,l){return typeof t!="function"?t:function(){var f=Be;o&&_t(),Cn(a,!0);try{return t.apply(this,arguments)}finally{Cn(f,!1),l&&queueMicrotask(dn)}}}function xr(t){Promise===ht&&yt.echoes===0?Xt===0?t():enqueueNativeMicroTask(t):setTimeout(t,0)}(""+ln).indexOf("[native code]")===-1&&(_t=dn=we);var Ot=De.reject,Rn="ï¿¿",Dn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Fi="String expected.",zn=[],hr="__dbnames",Wr="readonly",Gr="readwrite";function Nn(t,a){return t?a?function(){return t.apply(this,arguments)&&a.apply(this,arguments)}:t:a}var ji={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function pr(t){return typeof t!="string"||/\./.test(t)?function(a){return a}:function(a){return a[t]===void 0&&t in a&&delete(a=Ee(a))[t],a}}function Ui(){throw be.Type()}function ct(t,a){try{var o=Vi(t),l=Vi(a);if(o!==l)return o==="Array"?1:l==="Array"?-1:o==="binary"?1:l==="binary"?-1:o==="string"?1:l==="string"?-1:o==="Date"?1:l!=="Date"?NaN:-1;switch(o){case"number":case"Date":case"string":return a<t?1:t<a?-1:0;case"binary":return function(f,d){for(var _=f.length,E=d.length,R=_<E?_:E,I=0;I<R;++I)if(f[I]!==d[I])return f[I]<d[I]?-1:1;return _===E?0:_<E?-1:1}(qi(t),qi(a));case"Array":return function(f,d){for(var _=f.length,E=d.length,R=_<E?_:E,I=0;I<R;++I){var U=ct(f[I],d[I]);if(U!==0)return U}return _===E?0:_<E?-1:1}(t,a)}}catch{}return NaN}function Vi(t){var a=typeof t;return a!="object"?a:ArrayBuffer.isView(t)?"binary":(t=qe(t),t==="ArrayBuffer"?"binary":t)}function qi(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}var zi=(Et.prototype._trans=function(t,a,o){var l=this._tx||Be.trans,f=this.name,d=Dt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(t==="readonly"?"read":"write"," ").concat(this.name));function _(I,U,T){if(!T.schema[f])throw new be.NotFound("Table "+f+" not part of transaction");return a(T.idbtrans,T)}var E=Ae();try{var R=l&&l.db._novip===this.db._novip?l===Be.trans?l._promise(t,_,o):en(function(){return l._promise(t,_,o)},{trans:l,transless:Be.transless||Be}):function I(U,T,V,M){if(U.idbdb&&(U._state.openComplete||Be.letThrough||U._vip)){var B=U._createTransaction(T,V,U._dbSchema);try{B.create(),U._state.PR1398_maxLoop=3}catch(q){return q.name===je.InvalidState&&U.isOpen()&&0<--U._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),U.close({disableAutoOpen:!1}),U.open().then(function(){return I(U,T,V,M)})):Ot(q)}return B._promise(T,function(q,N){return en(function(){return Be.trans=B,M(q,N,B)})}).then(function(q){if(T==="readwrite")try{B.idbtrans.commit()}catch{}return T==="readonly"?q:B._completion.then(function(){return q})})}if(U._state.openComplete)return Ot(new be.DatabaseClosed(U._state.dbOpenError));if(!U._state.isBeingOpened){if(!U._state.autoOpen)return Ot(new be.DatabaseClosed);U.open().catch(we)}return U._state.dbReadyPromise.then(function(){return I(U,T,V,M)})}(this.db,t,[this.name],_);return d&&(R._consoleTask=d,R=R.catch(function(I){return console.trace(I),Ot(I)})),R}finally{E&&gt()}},Et.prototype.get=function(t,a){var o=this;return t&&t.constructor===Object?this.where(t).first(a):t==null?Ot(new be.Type("Invalid argument to Table.get()")):this._trans("readonly",function(l){return o.core.get({trans:l,key:t}).then(function(f){return o.hook.reading.fire(f)})}).then(a)},Et.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(g(t))return new this.db.WhereClause(this,"[".concat(t.join("+"),"]"));var a=c(t);if(a.length===1)return this.where(a[0]).equals(t[a[0]]);var o=this.schema.indexes.concat(this.schema.primKey).filter(function(R){if(R.compound&&a.every(function(U){return 0<=R.keyPath.indexOf(U)})){for(var I=0;I<a.length;++I)if(a.indexOf(R.keyPath[I])===-1)return!1;return!0}return!1}).sort(function(R,I){return R.keyPath.length-I.keyPath.length})[0];if(o&&this.db._maxKey!==Rn){var _=o.keyPath.slice(0,a.length);return this.where(_).equals(_.map(function(I){return t[I]}))}!o&&Dt&&console.warn("The query ".concat(JSON.stringify(t)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(a.join("+"),"]"));var l=this.schema.idxByName,f=this.db._deps.indexedDB;function d(R,I){return f.cmp(R,I)===0}var E=a.reduce(function(V,I){var U=V[0],T=V[1],V=l[I],M=t[I];return[U||V,U||!V?Nn(T,V&&V.multi?function(B){return B=pe(B,I),g(B)&&B.some(function(q){return d(M,q)})}:function(B){return d(M,pe(B,I))}):T]},[null,null]),_=E[0],E=E[1];return _?this.where(_.name).equals(t[_.keyPath]).filter(E):o?this.filter(E):this.where(a).equals("")},Et.prototype.filter=function(t){return this.toCollection().and(t)},Et.prototype.count=function(t){return this.toCollection().count(t)},Et.prototype.offset=function(t){return this.toCollection().offset(t)},Et.prototype.limit=function(t){return this.toCollection().limit(t)},Et.prototype.each=function(t){return this.toCollection().each(t)},Et.prototype.toArray=function(t){return this.toCollection().toArray(t)},Et.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Et.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,g(t)?"[".concat(t.join("+"),"]"):t))},Et.prototype.reverse=function(){return this.toCollection().reverse()},Et.prototype.mapToClass=function(t){var a,o=this.db,l=this.name;function f(){return a!==null&&a.apply(this,arguments)||this}(this.schema.mappedClass=t).prototype instanceof Ui&&(function(R,I){if(typeof I!="function"&&I!==null)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");function U(){this.constructor=R}n(R,I),R.prototype=I===null?Object.create(I):(U.prototype=I.prototype,new U)}(f,a=t),Object.defineProperty(f.prototype,"db",{get:function(){return o},enumerable:!1,configurable:!0}),f.prototype.table=function(){return l},t=f);for(var d=new Set,_=t.prototype;_;_=m(_))Object.getOwnPropertyNames(_).forEach(function(R){return d.add(R)});function E(R){if(!R)return R;var I,U=Object.create(t.prototype);for(I in R)if(!d.has(I))try{U[I]=R[I]}catch{}return U}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=E,this.hook("reading",E),t},Et.prototype.defineClass=function(){return this.mapToClass(function(t){y(this,t)})},Et.prototype.add=function(t,a){var o=this,l=this.schema.primKey,f=l.auto,d=l.keyPath,_=t;return d&&f&&(_=pr(d)(t)),this._trans("readwrite",function(E){return o.core.mutate({trans:E,type:"add",keys:a!=null?[a]:null,values:[_]})}).then(function(E){return E.numFailures?De.reject(E.failures[0]):E.lastResult}).then(function(E){if(d)try{ae(t,d,E)}catch{}return E})},Et.prototype.update=function(t,a){return typeof t!="object"||g(t)?this.where(":id").equals(t).modify(a):(t=pe(t,this.schema.primKey.keyPath),t===void 0?Ot(new be.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(t).modify(a))},Et.prototype.put=function(t,a){var o=this,l=this.schema.primKey,f=l.auto,d=l.keyPath,_=t;return d&&f&&(_=pr(d)(t)),this._trans("readwrite",function(E){return o.core.mutate({trans:E,type:"put",values:[_],keys:a!=null?[a]:null})}).then(function(E){return E.numFailures?De.reject(E.failures[0]):E.lastResult}).then(function(E){if(d)try{ae(t,d,E)}catch{}return E})},Et.prototype.delete=function(t){var a=this;return this._trans("readwrite",function(o){return a.core.mutate({trans:o,type:"delete",keys:[t]})}).then(function(o){return o.numFailures?De.reject(o.failures[0]):void 0})},Et.prototype.clear=function(){var t=this;return this._trans("readwrite",function(a){return t.core.mutate({trans:a,type:"deleteRange",range:ji})}).then(function(a){return a.numFailures?De.reject(a.failures[0]):void 0})},Et.prototype.bulkGet=function(t){var a=this;return this._trans("readonly",function(o){return a.core.getMany({keys:t,trans:o}).then(function(l){return l.map(function(f){return a.hook.reading.fire(f)})})})},Et.prototype.bulkAdd=function(t,a,o){var l=this,f=Array.isArray(a)?a:void 0,d=(o=o||(f?void 0:a))?o.allKeys:void 0;return this._trans("readwrite",function(_){var I=l.schema.primKey,E=I.auto,I=I.keyPath;if(I&&f)throw new be.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(f&&f.length!==t.length)throw new be.InvalidArgument("Arguments objects and keys must have the same length");var R=t.length,I=I&&E?t.map(pr(I)):t;return l.core.mutate({trans:_,type:"add",keys:f,values:I,wantResults:d}).then(function(B){var T=B.numFailures,V=B.results,M=B.lastResult,B=B.failures;if(T===0)return d?V:M;throw new he("".concat(l.name,".bulkAdd(): ").concat(T," of ").concat(R," operations failed"),B)})})},Et.prototype.bulkPut=function(t,a,o){var l=this,f=Array.isArray(a)?a:void 0,d=(o=o||(f?void 0:a))?o.allKeys:void 0;return this._trans("readwrite",function(_){var I=l.schema.primKey,E=I.auto,I=I.keyPath;if(I&&f)throw new be.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(f&&f.length!==t.length)throw new be.InvalidArgument("Arguments objects and keys must have the same length");var R=t.length,I=I&&E?t.map(pr(I)):t;return l.core.mutate({trans:_,type:"put",keys:f,values:I,wantResults:d}).then(function(B){var T=B.numFailures,V=B.results,M=B.lastResult,B=B.failures;if(T===0)return d?V:M;throw new he("".concat(l.name,".bulkPut(): ").concat(T," of ").concat(R," operations failed"),B)})})},Et.prototype.bulkUpdate=function(t){var a=this,o=this.core,l=t.map(function(_){return _.key}),f=t.map(function(_){return _.changes}),d=[];return this._trans("readwrite",function(_){return o.getMany({trans:_,keys:l,cache:"clone"}).then(function(E){var R=[],I=[];t.forEach(function(T,V){var M=T.key,B=T.changes,q=E[V];if(q){for(var N=0,x=Object.keys(B);N<x.length;N++){var Z=x[N],J=B[Z];if(Z===a.schema.primKey.keyPath){if(ct(J,M)!==0)throw new be.Constraint("Cannot update primary key in bulkUpdate()")}else ae(q,Z,J)}d.push(V),R.push(M),I.push(q)}});var U=R.length;return o.mutate({trans:_,type:"put",keys:R,values:I,updates:{keys:l,changeSpecs:f}}).then(function(T){var V=T.numFailures,M=T.failures;if(V===0)return U;for(var B=0,q=Object.keys(M);B<q.length;B++){var N,x=q[B],Z=d[Number(x)];Z!=null&&(N=M[x],delete M[x],M[Z]=N)}throw new he("".concat(a.name,".bulkUpdate(): ").concat(V," of ").concat(U," operations failed"),M)})})})},Et.prototype.bulkDelete=function(t){var a=this,o=t.length;return this._trans("readwrite",function(l){return a.core.mutate({trans:l,type:"delete",keys:t})}).then(function(_){var f=_.numFailures,d=_.lastResult,_=_.failures;if(f===0)return d;throw new he("".concat(a.name,".bulkDelete(): ").concat(f," of ").concat(o," operations failed"),_)})},Et);function Et(){}function Jn(t){function a(_,E){if(E){for(var R=arguments.length,I=new Array(R-1);--R;)I[R-1]=arguments[R];return o[_].subscribe.apply(null,I),t}if(typeof _=="string")return o[_]}var o={};a.addEventType=d;for(var l=1,f=arguments.length;l<f;++l)d(arguments[l]);return a;function d(_,E,R){if(typeof _!="object"){var I;E=E||xe;var U={subscribers:[],fire:R=R||we,subscribe:function(T){U.subscribers.indexOf(T)===-1&&(U.subscribers.push(T),U.fire=E(U.fire,T))},unsubscribe:function(T){U.subscribers=U.subscribers.filter(function(V){return V!==T}),U.fire=U.subscribers.reduce(E,R)}};return o[_]=a[_]=U}c(I=_).forEach(function(T){var V=I[T];if(g(V))d(T,I[T][0],I[T][1]);else{if(V!=="asap")throw new be.InvalidArgument("Invalid event config");var M=d(T,ze,function(){for(var B=arguments.length,q=new Array(B);B--;)q[B]=arguments[B];M.subscribers.forEach(function(N){se(function(){N.apply(null,q)})})})}})}}function Qn(t,a){return W(a).from({prototype:t}),a}function Hn(t,a){return!(t.filter||t.algorithm||t.or)&&(a?t.justLimit:!t.replayFilter)}function Yr(t,a){t.filter=Nn(t.filter,a)}function Zr(t,a,o){var l=t.replayFilter;t.replayFilter=l?function(){return Nn(l(),a())}:a,t.justLimit=o&&!l}function mr(t,a){if(t.isPrimKey)return a.primaryKey;var o=a.getIndexByKeyPath(t.index);if(!o)throw new be.Schema("KeyPath "+t.index+" on object store "+a.name+" is not indexed");return o}function Hi(t,a,o){var l=mr(t,a.schema);return a.openCursor({trans:o,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:l,range:t.range}})}function gr(t,a,o,l){var f=t.replayFilter?Nn(t.filter,t.replayFilter()):t.filter;if(t.or){var d={},_=function(E,R,I){var U,T;f&&!f(R,I,function(V){return R.stop(V)},function(V){return R.fail(V)})||((T=""+(U=R.primaryKey))=="[object ArrayBuffer]"&&(T=""+new Uint8Array(U)),k(d,T)||(d[T]=!0,a(E,R,I)))};return Promise.all([t.or._iterate(_,o),xi(Hi(t,l,o),t.algorithm,_,!t.keysOnly&&t.valueMapper)])}return xi(Hi(t,l,o),Nn(t.algorithm,f),a,!t.keysOnly&&t.valueMapper)}function xi(t,a,o,l){var f=it(l?function(d,_,E){return o(l(d),_,E)}:o);return t.then(function(d){if(d)return d.start(function(){var _=function(){return d.continue()};a&&!a(d,function(E){return _=E},function(E){d.stop(E),_=we},function(E){d.fail(E),_=we})||f(d.value,d,function(E){return _=E}),_()})})}var Sn=Symbol(),$n=(Wi.prototype.execute=function(t){if(this.add!==void 0){var a=this.add;if(g(a))return s(s([],g(t)?t:[],!0),a).sort();if(typeof a=="number")return(Number(t)||0)+a;if(typeof a=="bigint")try{return BigInt(t)+a}catch{return BigInt(0)+a}throw new TypeError("Invalid term ".concat(a))}if(this.remove!==void 0){var o=this.remove;if(g(o))return g(t)?t.filter(function(l){return!o.includes(l)}).sort():[];if(typeof o=="number")return Number(t)-o;if(typeof o=="bigint")try{return BigInt(t)-o}catch{return BigInt(0)-o}throw new TypeError("Invalid subtrahend ".concat(o))}return a=(a=this.replacePrefix)===null||a===void 0?void 0:a[0],a&&typeof t=="string"&&t.startsWith(a)?this.replacePrefix[1]+t.substring(a.length):t},Wi);function Wi(t){Object.assign(this,t)}var es=(lt.prototype._read=function(t,a){var o=this._ctx;return o.error?o.table._trans(null,Ot.bind(null,o.error)):o.table._trans("readonly",t).then(a)},lt.prototype._write=function(t){var a=this._ctx;return a.error?a.table._trans(null,Ot.bind(null,a.error)):a.table._trans("readwrite",t,"locked")},lt.prototype._addAlgorithm=function(t){var a=this._ctx;a.algorithm=Nn(a.algorithm,t)},lt.prototype._iterate=function(t,a){return gr(this._ctx,t,a,this._ctx.table.core)},lt.prototype.clone=function(t){var a=Object.create(this.constructor.prototype),o=Object.create(this._ctx);return t&&y(o,t),a._ctx=o,a},lt.prototype.raw=function(){return this._ctx.valueMapper=null,this},lt.prototype.each=function(t){var a=this._ctx;return this._read(function(o){return gr(a,t,o,a.table.core)})},lt.prototype.count=function(t){var a=this;return this._read(function(o){var l=a._ctx,f=l.table.core;if(Hn(l,!0))return f.count({trans:o,query:{index:mr(l,f.schema),range:l.range}}).then(function(_){return Math.min(_,l.limit)});var d=0;return gr(l,function(){return++d,!1},o,f).then(function(){return d})}).then(t)},lt.prototype.sortBy=function(t,a){var o=t.split(".").reverse(),l=o[0],f=o.length-1;function d(R,I){return I?d(R[o[I]],I-1):R[l]}var _=this._ctx.dir==="next"?1:-1;function E(R,I){return R=d(R,f),I=d(I,f),R<I?-_:I<R?_:0}return this.toArray(function(R){return R.sort(E)}).then(a)},lt.prototype.toArray=function(t){var a=this;return this._read(function(o){var l=a._ctx;if(l.dir==="next"&&Hn(l,!0)&&0<l.limit){var f=l.valueMapper,d=mr(l,l.table.core.schema);return l.table.core.query({trans:o,limit:l.limit,values:!0,query:{index:d,range:l.range}}).then(function(E){return E=E.result,f?E.map(f):E})}var _=[];return gr(l,function(E){return _.push(E)},o,l.table.core).then(function(){return _})},t)},lt.prototype.offset=function(t){var a=this._ctx;return t<=0||(a.offset+=t,Hn(a)?Zr(a,function(){var o=t;return function(l,f){return o===0||(o===1?--o:f(function(){l.advance(o),o=0}),!1)}}):Zr(a,function(){var o=t;return function(){return--o<0}})),this},lt.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),Zr(this._ctx,function(){var a=t;return function(o,l,f){return--a<=0&&l(f),0<=a}},!0),this},lt.prototype.until=function(t,a){return Yr(this._ctx,function(o,l,f){return!t(o.value)||(l(f),a)}),this},lt.prototype.first=function(t){return this.limit(1).toArray(function(a){return a[0]}).then(t)},lt.prototype.last=function(t){return this.reverse().first(t)},lt.prototype.filter=function(t){var a;return Yr(this._ctx,function(o){return t(o.value)}),(a=this._ctx).isMatch=Nn(a.isMatch,t),this},lt.prototype.and=function(t){return this.filter(t)},lt.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},lt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},lt.prototype.desc=function(){return this.reverse()},lt.prototype.eachKey=function(t){var a=this._ctx;return a.keysOnly=!a.isMatch,this.each(function(o,l){t(l.key,l)})},lt.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},lt.prototype.eachPrimaryKey=function(t){var a=this._ctx;return a.keysOnly=!a.isMatch,this.each(function(o,l){t(l.primaryKey,l)})},lt.prototype.keys=function(t){var a=this._ctx;a.keysOnly=!a.isMatch;var o=[];return this.each(function(l,f){o.push(f.key)}).then(function(){return o}).then(t)},lt.prototype.primaryKeys=function(t){var a=this._ctx;if(a.dir==="next"&&Hn(a,!0)&&0<a.limit)return this._read(function(l){var f=mr(a,a.table.core.schema);return a.table.core.query({trans:l,values:!1,limit:a.limit,query:{index:f,range:a.range}})}).then(function(l){return l.result}).then(t);a.keysOnly=!a.isMatch;var o=[];return this.each(function(l,f){o.push(f.primaryKey)}).then(function(){return o}).then(t)},lt.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},lt.prototype.firstKey=function(t){return this.limit(1).keys(function(a){return a[0]}).then(t)},lt.prototype.lastKey=function(t){return this.reverse().firstKey(t)},lt.prototype.distinct=function(){var t=this._ctx,t=t.index&&t.table.schema.idxByName[t.index];if(!t||!t.multi)return this;var a={};return Yr(this._ctx,function(f){var l=f.primaryKey.toString(),f=k(a,l);return a[l]=!0,!f}),this},lt.prototype.modify=function(t){var a=this,o=this._ctx;return this._write(function(l){var f,d,_;_=typeof t=="function"?t:(f=c(t),d=f.length,function(N){for(var x=!1,Z=0;Z<d;++Z){var J=f[Z],te=t[J],me=pe(N,J);te instanceof $n?(ae(N,J,te.execute(me)),x=!0):me!==te&&(ae(N,J,te),x=!0)}return x});function E(N,J){var Z=J.failures,J=J.numFailures;B+=N-J;for(var te=0,me=c(Z);te<me.length;te++){var Ue=me[te];M.push(Z[Ue])}}var R=o.table.core,I=R.schema.primaryKey,U=I.outbound,T=I.extractKey,V=a.db._options.modifyChunkSize||200,M=[],B=0,q=[];return a.clone().primaryKeys().then(function(N){function x(J){var te=Math.min(V,N.length-J);return R.getMany({trans:l,keys:N.slice(J,J+te),cache:"immutable"}).then(function(me){for(var Ue=[],Oe=[],Ke=U?[]:null,Ve=[],Ne=0;Ne<te;++Ne){var Qe=me[Ne],$e={value:Ee(Qe),primKey:N[J+Ne]};_.call($e,$e.value,$e)!==!1&&($e.value==null?Ve.push(N[J+Ne]):U||ct(T(Qe),T($e.value))===0?(Oe.push($e.value),U&&Ke.push(N[J+Ne])):(Ve.push(N[J+Ne]),Ue.push($e.value)))}return Promise.resolve(0<Ue.length&&R.mutate({trans:l,type:"add",values:Ue}).then(function(nt){for(var et in nt.failures)Ve.splice(parseInt(et),1);E(Ue.length,nt)})).then(function(){return(0<Oe.length||Z&&typeof t=="object")&&R.mutate({trans:l,type:"put",keys:Ke,values:Oe,criteria:Z,changeSpec:typeof t!="function"&&t,isAdditionalChunk:0<J}).then(function(nt){return E(Oe.length,nt)})}).then(function(){return(0<Ve.length||Z&&t===Jr)&&R.mutate({trans:l,type:"delete",keys:Ve,criteria:Z,isAdditionalChunk:0<J}).then(function(nt){return E(Ve.length,nt)})}).then(function(){return N.length>J+te&&x(J+V)})})}var Z=Hn(o)&&o.limit===1/0&&(typeof t!="function"||t===Jr)&&{index:o.index,range:o.range};return x(0).then(function(){if(0<M.length)throw new Pe("Error modifying one or more objects",M,B,q);return N.length})})})},lt.prototype.delete=function(){var t=this._ctx,a=t.range;return Hn(t)&&(t.isPrimKey||a.type===3)?this._write(function(o){var l=t.table.core.schema.primaryKey,f=a;return t.table.core.count({trans:o,query:{index:l,range:f}}).then(function(d){return t.table.core.mutate({trans:o,type:"deleteRange",range:f}).then(function(_){var E=_.failures;if(_.lastResult,_.results,_=_.numFailures,_)throw new Pe("Could not delete some values",Object.keys(E).map(function(R){return E[R]}),d-_);return d-_})})}):this.modify(Jr)},lt);function lt(){}var Jr=function(t,a){return a.value=null};function ts(t,a){return t<a?-1:t===a?0:1}function ns(t,a){return a<t?-1:t===a?0:1}function an(t,a,o){return t=t instanceof Yi?new t.Collection(t):t,t._ctx.error=new(o||TypeError)(a),t}function xn(t){return new t.Collection(t,function(){return Gi("")}).limit(0)}function vr(t,a,o,l){var f,d,_,E,R,I,U,T=o.length;if(!o.every(function(B){return typeof B=="string"}))return an(t,Fi);function V(B){f=B==="next"?function(N){return N.toUpperCase()}:function(N){return N.toLowerCase()},d=B==="next"?function(N){return N.toLowerCase()}:function(N){return N.toUpperCase()},_=B==="next"?ts:ns;var q=o.map(function(N){return{lower:d(N),upper:f(N)}}).sort(function(N,x){return _(N.lower,x.lower)});E=q.map(function(N){return N.upper}),R=q.map(function(N){return N.lower}),U=(I=B)==="next"?"":l}V("next"),t=new t.Collection(t,function(){return On(E[0],R[T-1]+l)}),t._ondirectionchange=function(B){V(B)};var M=0;return t._addAlgorithm(function(B,q,N){var x=B.key;if(typeof x!="string")return!1;var Z=d(x);if(a(Z,R,M))return!0;for(var J=null,te=M;te<T;++te){var me=function(Ue,Oe,Ke,Ve,Ne,Qe){for(var $e=Math.min(Ue.length,Ve.length),nt=-1,et=0;et<$e;++et){var hn=Oe[et];if(hn!==Ve[et])return Ne(Ue[et],Ke[et])<0?Ue.substr(0,et)+Ke[et]+Ke.substr(et+1):Ne(Ue[et],Ve[et])<0?Ue.substr(0,et)+Ve[et]+Ke.substr(et+1):0<=nt?Ue.substr(0,nt)+Oe[nt]+Ke.substr(nt+1):null;Ne(Ue[et],hn)<0&&(nt=et)}return $e<Ve.length&&Qe==="next"?Ue+Ke.substr(Ue.length):$e<Ue.length&&Qe==="prev"?Ue.substr(0,Ke.length):nt<0?null:Ue.substr(0,nt)+Ve[nt]+Ke.substr(nt+1)}(x,Z,E[te],R[te],_,I);me===null&&J===null?M=te+1:(J===null||0<_(J,me))&&(J=me)}return q(J!==null?function(){B.continue(J+U)}:N),!1}),t}function On(t,a,o,l){return{type:2,lower:t,upper:a,lowerOpen:o,upperOpen:l}}function Gi(t){return{type:1,lower:t,upper:t}}var Yi=(Object.defineProperty(Bt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Bt.prototype.between=function(t,a,o,l){o=o!==!1,l=l===!0;try{return 0<this._cmp(t,a)||this._cmp(t,a)===0&&(o||l)&&(!o||!l)?xn(this):new this.Collection(this,function(){return On(t,a,!o,!l)})}catch{return an(this,Dn)}},Bt.prototype.equals=function(t){return t==null?an(this,Dn):new this.Collection(this,function(){return Gi(t)})},Bt.prototype.above=function(t){return t==null?an(this,Dn):new this.Collection(this,function(){return On(t,void 0,!0)})},Bt.prototype.aboveOrEqual=function(t){return t==null?an(this,Dn):new this.Collection(this,function(){return On(t,void 0,!1)})},Bt.prototype.below=function(t){return t==null?an(this,Dn):new this.Collection(this,function(){return On(void 0,t,!1,!0)})},Bt.prototype.belowOrEqual=function(t){return t==null?an(this,Dn):new this.Collection(this,function(){return On(void 0,t)})},Bt.prototype.startsWith=function(t){return typeof t!="string"?an(this,Fi):this.between(t,t+Rn,!0,!0)},Bt.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):vr(this,function(a,o){return a.indexOf(o[0])===0},[t],Rn)},Bt.prototype.equalsIgnoreCase=function(t){return vr(this,function(a,o){return a===o[0]},[t],"")},Bt.prototype.anyOfIgnoreCase=function(){var t=K.apply(P,arguments);return t.length===0?xn(this):vr(this,function(a,o){return o.indexOf(a)!==-1},t,"")},Bt.prototype.startsWithAnyOfIgnoreCase=function(){var t=K.apply(P,arguments);return t.length===0?xn(this):vr(this,function(a,o){return o.some(function(l){return a.indexOf(l)===0})},t,Rn)},Bt.prototype.anyOf=function(){var t=this,a=K.apply(P,arguments),o=this._cmp;try{a.sort(o)}catch{return an(this,Dn)}if(a.length===0)return xn(this);var l=new this.Collection(this,function(){return On(a[0],a[a.length-1])});l._ondirectionchange=function(d){o=d==="next"?t._ascending:t._descending,a.sort(o)};var f=0;return l._addAlgorithm(function(d,_,E){for(var R=d.key;0<o(R,a[f]);)if(++f===a.length)return _(E),!1;return o(R,a[f])===0||(_(function(){d.continue(a[f])}),!1)}),l},Bt.prototype.notEqual=function(t){return this.inAnyRange([[-1/0,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Bt.prototype.noneOf=function(){var t=K.apply(P,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return an(this,Dn)}var a=t.reduce(function(o,l){return o?o.concat([[o[o.length-1][1],l]]):[[-1/0,l]]},null);return a.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(a,{includeLowers:!1,includeUppers:!1})},Bt.prototype.inAnyRange=function(x,a){var o=this,l=this._cmp,f=this._ascending,d=this._descending,_=this._min,E=this._max;if(x.length===0)return xn(this);if(!x.every(function(Z){return Z[0]!==void 0&&Z[1]!==void 0&&f(Z[0],Z[1])<=0}))return an(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",be.InvalidArgument);var R=!a||a.includeLowers!==!1,I=a&&a.includeUppers===!0,U,T=f;function V(Z,J){return T(Z[0],J[0])}try{(U=x.reduce(function(Z,J){for(var te=0,me=Z.length;te<me;++te){var Ue=Z[te];if(l(J[0],Ue[1])<0&&0<l(J[1],Ue[0])){Ue[0]=_(Ue[0],J[0]),Ue[1]=E(Ue[1],J[1]);break}}return te===me&&Z.push(J),Z},[])).sort(V)}catch{return an(this,Dn)}var M=0,B=I?function(Z){return 0<f(Z,U[M][1])}:function(Z){return 0<=f(Z,U[M][1])},q=R?function(Z){return 0<d(Z,U[M][0])}:function(Z){return 0<=d(Z,U[M][0])},N=B,x=new this.Collection(this,function(){return On(U[0][0],U[U.length-1][1],!R,!I)});return x._ondirectionchange=function(Z){T=Z==="next"?(N=B,f):(N=q,d),U.sort(V)},x._addAlgorithm(function(Z,J,te){for(var me,Ue=Z.key;N(Ue);)if(++M===U.length)return J(te),!1;return!B(me=Ue)&&!q(me)||(o._cmp(Ue,U[M][1])===0||o._cmp(Ue,U[M][0])===0||J(function(){T===f?Z.continue(U[M][0]):Z.continue(U[M][1])}),!1)}),x},Bt.prototype.startsWithAnyOf=function(){var t=K.apply(P,arguments);return t.every(function(a){return typeof a=="string"})?t.length===0?xn(this):this.inAnyRange(t.map(function(a){return[a,a+Rn]})):an(this,"startsWithAnyOf() only works with strings")},Bt);function Bt(){}function yn(t){return it(function(a){return Xn(a),t(a.target.error),!1})}function Xn(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var er="storagemutated",Qr="x-storagemutated-1",An=Jn(null,er),rs=(bn.prototype._lock=function(){return A(!Be.global),++this._reculock,this._reculock!==1||Be.global||(Be.lockOwnerFor=this),this},bn.prototype._unlock=function(){if(A(!Be.global),--this._reculock==0)for(Be.global||(Be.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var t=this._blockedFuncs.shift();try{Mn(t[1],t[0])}catch{}}return this},bn.prototype._locked=function(){return this._reculock&&Be.lockOwnerFor!==this},bn.prototype.create=function(t){var a=this;if(!this.mode)return this;var o=this.db.idbdb,l=this.db._state.dbOpenError;if(A(!this.idbtrans),!t&&!o)switch(l&&l.name){case"DatabaseClosedError":throw new be.DatabaseClosed(l);case"MissingAPIError":throw new be.MissingAPI(l.message,l);default:throw new be.OpenFailed(l)}if(!this.active)throw new be.TransactionInactive;return A(this._completion._state===null),(t=this.idbtrans=t||(this.db.core||o).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=it(function(f){Xn(f),a._reject(t.error)}),t.onabort=it(function(f){Xn(f),a.active&&a._reject(new be.Abort(t.error)),a.active=!1,a.on("abort").fire(f)}),t.oncomplete=it(function(){a.active=!1,a._resolve(),"mutatedParts"in t&&An.storagemutated.fire(t.mutatedParts)}),this},bn.prototype._promise=function(t,a,o){var l=this;if(t==="readwrite"&&this.mode!=="readwrite")return Ot(new be.ReadOnly("Transaction is readonly"));if(!this.active)return Ot(new be.TransactionInactive);if(this._locked())return new De(function(d,_){l._blockedFuncs.push([function(){l._promise(t,a,o).then(d,_)},Be])});if(o)return en(function(){var d=new De(function(_,E){l._lock();var R=a(_,E,l);R&&R.then&&R.then(_,E)});return d.finally(function(){return l._unlock()}),d._lib=!0,d});var f=new De(function(d,_){var E=a(d,_,l);E&&E.then&&E.then(d,_)});return f._lib=!0,f},bn.prototype._root=function(){return this.parent?this.parent._root():this},bn.prototype.waitFor=function(t){var a,o=this._root(),l=De.resolve(t);o._waitingFor?o._waitingFor=o._waitingFor.then(function(){return l}):(o._waitingFor=l,o._waitingQueue=[],a=o.idbtrans.objectStore(o.storeNames[0]),function d(){for(++o._spinCount;o._waitingQueue.length;)o._waitingQueue.shift()();o._waitingFor&&(a.get(-1/0).onsuccess=d)}());var f=o._waitingFor;return new De(function(d,_){l.then(function(E){return o._waitingQueue.push(it(d.bind(null,E)))},function(E){return o._waitingQueue.push(it(_.bind(null,E)))}).finally(function(){o._waitingFor===f&&(o._waitingFor=null)})})},bn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new be.Abort))},bn.prototype.table=function(t){var a=this._memoizedTables||(this._memoizedTables={});if(k(a,t))return a[t];var o=this.schema[t];if(!o)throw new be.NotFound("Table "+t+" not part of transaction");return o=new this.db.Table(t,o,this),o.core=this.db.core.table(t),a[t]=o},bn);function bn(){}function $r(t,a,o,l,f,d,_){return{name:t,keyPath:a,unique:o,multi:l,auto:f,compound:d,src:(o&&!_?"&":"")+(l?"*":"")+(f?"++":"")+Zi(a)}}function Zi(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function Xr(t,a,o){return{name:t,primKey:a,indexes:o,mappedClass:null,idxByName:(l=function(f){return[f.name,f]},o.reduce(function(f,d,_){return _=l(d,_),_&&(f[_[0]]=_[1]),f},{}))};var l}var tr=function(t){try{return t.only([[]]),tr=function(){return[[]]},[[]]}catch{return tr=function(){return Rn},Rn}};function ei(t){return t==null?function(){}:typeof t=="string"?(a=t).split(".").length===1?function(o){return o[a]}:function(o){return pe(o,a)}:function(o){return pe(o,t)};var a}function Ji(t){return[].slice.call(t)}var is=0;function nr(t){return t==null?":id":typeof t=="string"?t:"[".concat(t.join("+"),"]")}function as(t,a,R){function l(N){if(N.type===3)return null;if(N.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var M=N.lower,B=N.upper,q=N.lowerOpen,N=N.upperOpen;return M===void 0?B===void 0?null:a.upperBound(B,!!N):B===void 0?a.lowerBound(M,!!q):a.bound(M,B,!!q,!!N)}function f(V){var M,B=V.name;return{name:B,schema:V,mutate:function(q){var N=q.trans,x=q.type,Z=q.keys,J=q.values,te=q.range;return new Promise(function(me,Ue){me=it(me);var Oe=N.objectStore(B),Ke=Oe.keyPath==null,Ve=x==="put"||x==="add";if(!Ve&&x!=="delete"&&x!=="deleteRange")throw new Error("Invalid operation type: "+x);var Ne,Qe=(Z||J||{length:1}).length;if(Z&&J&&Z.length!==J.length)throw new Error("Given keys array must have same length as given values array.");if(Qe===0)return me({numFailures:0,failures:{},results:[],lastResult:void 0});function $e($t){++hn,Xn($t)}var nt=[],et=[],hn=0;if(x==="deleteRange"){if(te.type===4)return me({numFailures:hn,failures:et,results:[],lastResult:void 0});te.type===3?nt.push(Ne=Oe.clear()):nt.push(Ne=Oe.delete(l(te)))}else{var Ke=Ve?Ke?[J,Z]:[J,null]:[Z,null],tt=Ke[0],Wt=Ke[1];if(Ve)for(var Gt=0;Gt<Qe;++Gt)nt.push(Ne=Wt&&Wt[Gt]!==void 0?Oe[x](tt[Gt],Wt[Gt]):Oe[x](tt[Gt])),Ne.onerror=$e;else for(Gt=0;Gt<Qe;++Gt)nt.push(Ne=Oe[x](tt[Gt])),Ne.onerror=$e}function Pr($t){$t=$t.target.result,nt.forEach(function(Fn,yi){return Fn.error!=null&&(et[yi]=Fn.error)}),me({numFailures:hn,failures:et,results:x==="delete"?Z:nt.map(function(Fn){return Fn.result}),lastResult:$t})}Ne.onerror=function($t){$e($t),Pr($t)},Ne.onsuccess=Pr})},getMany:function(q){var N=q.trans,x=q.keys;return new Promise(function(Z,J){Z=it(Z);for(var te,me=N.objectStore(B),Ue=x.length,Oe=new Array(Ue),Ke=0,Ve=0,Ne=function(nt){nt=nt.target,Oe[nt._pos]=nt.result,++Ve===Ke&&Z(Oe)},Qe=yn(J),$e=0;$e<Ue;++$e)x[$e]!=null&&((te=me.get(x[$e]))._pos=$e,te.onsuccess=Ne,te.onerror=Qe,++Ke);Ke===0&&Z(Oe)})},get:function(q){var N=q.trans,x=q.key;return new Promise(function(Z,J){Z=it(Z);var te=N.objectStore(B).get(x);te.onsuccess=function(me){return Z(me.target.result)},te.onerror=yn(J)})},query:(M=I,function(q){return new Promise(function(N,x){N=it(N);var Z,J,te,Ke=q.trans,me=q.values,Ue=q.limit,Ne=q.query,Oe=Ue===1/0?void 0:Ue,Ve=Ne.index,Ne=Ne.range,Ke=Ke.objectStore(B),Ve=Ve.isPrimaryKey?Ke:Ke.index(Ve.name),Ne=l(Ne);if(Ue===0)return N({result:[]});M?((Oe=me?Ve.getAll(Ne,Oe):Ve.getAllKeys(Ne,Oe)).onsuccess=function(Qe){return N({result:Qe.target.result})},Oe.onerror=yn(x)):(Z=0,J=!me&&"openKeyCursor"in Ve?Ve.openKeyCursor(Ne):Ve.openCursor(Ne),te=[],J.onsuccess=function(Qe){var $e=J.result;return $e?(te.push(me?$e.value:$e.primaryKey),++Z===Ue?N({result:te}):void $e.continue()):N({result:te})},J.onerror=yn(x))})}),openCursor:function(q){var N=q.trans,x=q.values,Z=q.query,J=q.reverse,te=q.unique;return new Promise(function(me,Ue){me=it(me);var Ve=Z.index,Oe=Z.range,Ke=N.objectStore(B),Ke=Ve.isPrimaryKey?Ke:Ke.index(Ve.name),Ve=J?te?"prevunique":"prev":te?"nextunique":"next",Ne=!x&&"openKeyCursor"in Ke?Ke.openKeyCursor(l(Oe),Ve):Ke.openCursor(l(Oe),Ve);Ne.onerror=yn(Ue),Ne.onsuccess=it(function(Qe){var $e,nt,et,hn,tt=Ne.result;tt?(tt.___id=++is,tt.done=!1,$e=tt.continue.bind(tt),nt=(nt=tt.continuePrimaryKey)&&nt.bind(tt),et=tt.advance.bind(tt),hn=function(){throw new Error("Cursor not stopped")},tt.trans=N,tt.stop=tt.continue=tt.continuePrimaryKey=tt.advance=function(){throw new Error("Cursor not started")},tt.fail=it(Ue),tt.next=function(){var Wt=this,Gt=1;return this.start(function(){return Gt--?Wt.continue():Wt.stop()}).then(function(){return Wt})},tt.start=function(Wt){function Gt(){if(Ne.result)try{Wt()}catch($t){tt.fail($t)}else tt.done=!0,tt.start=function(){throw new Error("Cursor behind last entry")},tt.stop()}var Pr=new Promise(function($t,Fn){$t=it($t),Ne.onerror=yn(Fn),tt.fail=Fn,tt.stop=function(yi){tt.stop=tt.continue=tt.continuePrimaryKey=tt.advance=hn,$t(yi)}});return Ne.onsuccess=it(function($t){Ne.onsuccess=Gt,Gt()}),tt.continue=$e,tt.continuePrimaryKey=nt,tt.advance=et,Gt(),Pr},me(tt)):me(null)},Ue)})},count:function(q){var N=q.query,x=q.trans,Z=N.index,J=N.range;return new Promise(function(te,me){var Ue=x.objectStore(B),Oe=Z.isPrimaryKey?Ue:Ue.index(Z.name),Ue=l(J),Oe=Ue?Oe.count(Ue):Oe.count();Oe.onsuccess=it(function(Ke){return te(Ke.target.result)}),Oe.onerror=yn(me)})}}}var d,_,E,U=(_=R,E=Ji((d=t).objectStoreNames),{schema:{name:d.name,tables:E.map(function(V){return _.objectStore(V)}).map(function(V){var M=V.keyPath,N=V.autoIncrement,B=g(M),q={},N={name:V.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:M==null,compound:B,keyPath:M,autoIncrement:N,unique:!0,extractKey:ei(M)},indexes:Ji(V.indexNames).map(function(x){return V.index(x)}).map(function(te){var Z=te.name,J=te.unique,me=te.multiEntry,te=te.keyPath,me={name:Z,compound:g(te),keyPath:te,unique:J,multiEntry:me,extractKey:ei(te)};return q[nr(te)]=me}),getIndexByKeyPath:function(x){return q[nr(x)]}};return q[":id"]=N.primaryKey,M!=null&&(q[nr(M)]=N.primaryKey),N})},hasGetAll:0<E.length&&"getAll"in _.objectStore(E[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),R=U.schema,I=U.hasGetAll,U=R.tables.map(f),T={};return U.forEach(function(V){return T[V.name]=V}),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(V){if(!T[V])throw new Error("Table '".concat(V,"' not found"));return T[V]},MIN_KEY:-1/0,MAX_KEY:tr(a),schema:R}}function os(t,a,o,l){var f=o.IDBKeyRange;return o.indexedDB,{dbcore:(l=as(a,f,l),t.dbcore.reduce(function(d,_){return _=_.create,r(r({},d),_(d))},l))}}function _r(t,l){var o=l.db,l=os(t._middlewares,o,t._deps,l);t.core=l.dbcore,t.tables.forEach(function(f){var d=f.name;t.core.schema.tables.some(function(_){return _.name===d})&&(f.core=t.core.table(d),t[d]instanceof t.Table&&(t[d].core=f.core))})}function yr(t,a,o,l){o.forEach(function(f){var d=l[f];a.forEach(function(_){var E=function R(I,U){return z(I,U)||(I=m(I))&&R(I,U)}(_,f);(!E||"value"in E&&E.value===void 0)&&(_===t.Transaction.prototype||_ instanceof t.Transaction?Q(_,f,{get:function(){return this.table(f)},set:function(R){j(this,f,{value:R,writable:!0,configurable:!0,enumerable:!0})}}):_[f]=new t.Table(f,d))})})}function ti(t,a){a.forEach(function(o){for(var l in o)o[l]instanceof t.Table&&delete o[l]})}function ss(t,a){return t._cfg.version-a._cfg.version}function ls(t,a,o,l){var f=t._dbSchema;o.objectStoreNames.contains("$meta")&&!f.$meta&&(f.$meta=Xr("$meta",$i("")[0],[]),t._storeNames.push("$meta"));var d=t._createTransaction("readwrite",t._storeNames,f);d.create(o),d._completion.catch(l);var _=d._reject.bind(d),E=Be.transless||Be;en(function(){return Be.trans=d,Be.transless=E,a!==0?(_r(t,o),I=a,((R=d).storeNames.includes("$meta")?R.table("$meta").get("version").then(function(U){return U??I}):De.resolve(I)).then(function(U){return V=U,M=d,B=o,q=[],U=(T=t)._versions,N=T._dbSchema=wr(0,T.idbdb,B),(U=U.filter(function(x){return x._cfg.version>=V})).length!==0?(U.forEach(function(x){q.push(function(){var Z=N,J=x._cfg.dbschema;kr(T,Z,B),kr(T,J,B),N=T._dbSchema=J;var te=ni(Z,J);te.add.forEach(function(Ve){ri(B,Ve[0],Ve[1].primKey,Ve[1].indexes)}),te.change.forEach(function(Ve){if(Ve.recreate)throw new be.Upgrade("Not yet support for changing primary key");var Ne=B.objectStore(Ve.name);Ve.add.forEach(function(Qe){return br(Ne,Qe)}),Ve.change.forEach(function(Qe){Ne.deleteIndex(Qe.name),br(Ne,Qe)}),Ve.del.forEach(function(Qe){return Ne.deleteIndex(Qe)})});var me=x._cfg.contentUpgrade;if(me&&x._cfg.version>V){_r(T,B),M._memoizedTables={};var Ue=oe(J);te.del.forEach(function(Ve){Ue[Ve]=Z[Ve]}),ti(T,[T.Transaction.prototype]),yr(T,[T.Transaction.prototype],c(Ue),Ue),M.schema=Ue;var Oe,Ke=$(me);return Ke&&_t(),te=De.follow(function(){var Ve;(Oe=me(M))&&Ke&&(Ve=dn.bind(null,null),Oe.then(Ve,Ve))}),Oe&&typeof Oe.then=="function"?De.resolve(Oe):te.then(function(){return Oe})}}),q.push(function(Z){var J,te,me=x._cfg.dbschema;J=me,te=Z,[].slice.call(te.db.objectStoreNames).forEach(function(Ue){return J[Ue]==null&&te.db.deleteObjectStore(Ue)}),ti(T,[T.Transaction.prototype]),yr(T,[T.Transaction.prototype],T._storeNames,T._dbSchema),M.schema=T._dbSchema}),q.push(function(Z){T.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(T.idbdb.version/10)===x._cfg.version?(T.idbdb.deleteObjectStore("$meta"),delete T._dbSchema.$meta,T._storeNames=T._storeNames.filter(function(J){return J!=="$meta"})):Z.objectStore("$meta").put(x._cfg.version,"version"))})}),function x(){return q.length?De.resolve(q.shift()(M.idbtrans)).then(x):De.resolve()}().then(function(){Qi(N,B)})):De.resolve();var T,V,M,B,q,N}).catch(_)):(c(f).forEach(function(U){ri(o,U,f[U].primKey,f[U].indexes)}),_r(t,o),void De.follow(function(){return t.on.populate.fire(d)}).catch(_));var R,I})}function us(t,a){Qi(t._dbSchema,a),a.db.version%10!=0||a.objectStoreNames.contains("$meta")||a.db.createObjectStore("$meta").add(Math.ceil(a.db.version/10-1),"version");var o=wr(0,t.idbdb,a);kr(t,t._dbSchema,a);for(var l=0,f=ni(o,t._dbSchema).change;l<f.length;l++){var d=function(_){if(_.change.length||_.recreate)return console.warn("Unable to patch indexes of table ".concat(_.name," because it has changes on the type of index or primary key.")),{value:void 0};var E=a.objectStore(_.name);_.add.forEach(function(R){Dt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(_.name,".").concat(R.src)),br(E,R)})}(f[l]);if(typeof d=="object")return d.value}}function ni(t,a){var o,l={del:[],add:[],change:[]};for(o in t)a[o]||l.del.push(o);for(o in a){var f=t[o],d=a[o];if(f){var _={name:o,def:d,recreate:!1,del:[],add:[],change:[]};if(""+(f.primKey.keyPath||"")!=""+(d.primKey.keyPath||"")||f.primKey.auto!==d.primKey.auto)_.recreate=!0,l.change.push(_);else{var E=f.idxByName,R=d.idxByName,I=void 0;for(I in E)R[I]||_.del.push(I);for(I in R){var U=E[I],T=R[I];U?U.src!==T.src&&_.change.push(T):_.add.push(T)}(0<_.del.length||0<_.add.length||0<_.change.length)&&l.change.push(_)}}else l.add.push([o,d])}return l}function ri(t,a,o,l){var f=t.db.createObjectStore(a,o.keyPath?{keyPath:o.keyPath,autoIncrement:o.auto}:{autoIncrement:o.auto});return l.forEach(function(d){return br(f,d)}),f}function Qi(t,a){c(t).forEach(function(o){a.db.objectStoreNames.contains(o)||(Dt&&console.debug("Dexie: Creating missing table",o),ri(a,o,t[o].primKey,t[o].indexes))})}function br(t,a){t.createIndex(a.name,a.keyPath,{unique:a.unique,multiEntry:a.multi})}function wr(t,a,o){var l={};return D(a.objectStoreNames,0).forEach(function(f){for(var d=o.objectStore(f),_=$r(Zi(I=d.keyPath),I||"",!0,!1,!!d.autoIncrement,I&&typeof I!="string",!0),E=[],R=0;R<d.indexNames.length;++R){var U=d.index(d.indexNames[R]),I=U.keyPath,U=$r(U.name,I,!!U.unique,!!U.multiEntry,!1,I&&typeof I!="string",!1);E.push(U)}l[f]=Xr(f,_,E)}),l}function kr(t,a,o){for(var l=o.db.objectStoreNames,f=0;f<l.length;++f){var d=l[f],_=o.objectStore(d);t._hasGetAll="getAll"in _;for(var E=0;E<_.indexNames.length;++E){var R=_.indexNames[E],I=_.index(R).keyPath,U=typeof I=="string"?I:"["+D(I).join("+")+"]";!a[d]||(I=a[d].idxByName[U])&&(I.name=R,delete a[d].idxByName[U],a[d].idxByName[R]=I)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&u.WorkerGlobalScope&&u instanceof u.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}function $i(t){return t.split(",").map(function(a,o){var l=(a=a.trim()).replace(/([&*]|\+\+)/g,""),f=/^\[/.test(l)?l.match(/^\[(.*)\]$/)[1].split("+"):l;return $r(l,f||null,/\&/.test(a),/\*/.test(a),/\+\+/.test(a),g(f),o===0)})}var cs=(Er.prototype._parseStoresSpec=function(t,a){c(t).forEach(function(o){if(t[o]!==null){var l=$i(t[o]),f=l.shift();if(f.unique=!0,f.multi)throw new be.Schema("Primary key cannot be multi-valued");l.forEach(function(d){if(d.auto)throw new be.Schema("Only primary key can be marked as autoIncrement (++)");if(!d.keyPath)throw new be.Schema("Index must have a name and cannot be an empty string")}),a[o]=Xr(o,f,l)}})},Er.prototype.stores=function(o){var a=this.db;this._cfg.storesSource=this._cfg.storesSource?y(this._cfg.storesSource,o):o;var o=a._versions,l={},f={};return o.forEach(function(d){y(l,d._cfg.storesSource),f=d._cfg.dbschema={},d._parseStoresSpec(l,f)}),a._dbSchema=f,ti(a,[a._allTables,a,a.Transaction.prototype]),yr(a,[a._allTables,a,a.Transaction.prototype,this._cfg.tables],c(f),f),a._storeNames=c(f),this},Er.prototype.upgrade=function(t){return this._cfg.contentUpgrade=ut(this._cfg.contentUpgrade||we,t),this},Er);function Er(){}function ii(t,a){var o=t._dbNamesDB;return o||(o=t._dbNamesDB=new Tn(hr,{addons:[],indexedDB:t,IDBKeyRange:a})).version(1).stores({dbnames:"name"}),o.table("dbnames")}function ai(t){return t&&typeof t.databases=="function"}function oi(t){return en(function(){return Be.letThrough=!0,t()})}function si(t){return!("from"in t)}var xt=function(t,a){if(!this){var o=new xt;return t&&"d"in t&&y(o,t),o}y(this,arguments.length?{d:1,from:t,to:1<arguments.length?a:t}:{d:0})};function rr(t,a,o){var l=ct(a,o);if(!isNaN(l)){if(0<l)throw RangeError();if(si(t))return y(t,{from:a,to:o,d:1});var f=t.l,l=t.r;if(ct(o,t.from)<0)return f?rr(f,a,o):t.l={from:a,to:o,d:1,l:null,r:null},Xi(t);if(0<ct(a,t.to))return l?rr(l,a,o):t.r={from:a,to:o,d:1,l:null,r:null},Xi(t);ct(a,t.from)<0&&(t.from=a,t.l=null,t.d=l?l.d+1:1),0<ct(o,t.to)&&(t.to=o,t.r=null,t.d=t.l?t.l.d+1:1),o=!t.r,f&&!t.l&&ir(t,f),l&&o&&ir(t,l)}}function ir(t,a){si(a)||function o(l,R){var d=R.from,_=R.to,E=R.l,R=R.r;rr(l,d,_),E&&o(l,E),R&&o(l,R)}(t,a)}function Dr(t,a){var o=li(a),l=o.next();if(l.done)return!1;for(var f=l.value,d=li(t),_=d.next(f.from),E=_.value;!l.done&&!_.done;){if(ct(E.from,f.to)<=0&&0<=ct(E.to,f.from))return!0;ct(f.from,E.from)<0?f=(l=o.next(E.from)).value:E=(_=d.next(f.from)).value}return!1}function li(t){var a=si(t)?null:{s:0,n:t};return{next:function(o){for(var l=0<arguments.length;a;)switch(a.s){case 0:if(a.s=1,l)for(;a.n.l&&ct(o,a.n.from)<0;)a={up:a,n:a.n.l,s:1};else for(;a.n.l;)a={up:a,n:a.n.l,s:1};case 1:if(a.s=2,!l||ct(o,a.n.to)<=0)return{value:a.n,done:!1};case 2:if(a.n.r){a.s=3,a={up:a,n:a.n.r,s:0};continue}case 3:a=a.up}return{done:!0}}}}function Xi(t){var a,o,l=(((a=t.r)===null||a===void 0?void 0:a.d)||0)-(((o=t.l)===null||o===void 0?void 0:o.d)||0),f=1<l?"r":l<-1?"l":"";f&&(a=f=="r"?"l":"r",o=r({},t),l=t[f],t.from=l.from,t.to=l.to,t[f]=l[f],o[f]=l[a],(t[a]=o).d=ea(o)),t.d=ea(t)}function ea(o){var a=o.r,o=o.l;return(a?o?Math.max(a.d,o.d):a.d:o?o.d:0)+1}function Sr(t,a){return c(a).forEach(function(o){t[o]?ir(t[o],a[o]):t[o]=function l(f){var d,_,E={};for(d in f)k(f,d)&&(_=f[d],E[d]=!_||typeof _!="object"||Fe.has(_.constructor)?_:l(_));return E}(a[o])}),t}function ui(t,a){return t.all||a.all||Object.keys(t).some(function(o){return a[o]&&Dr(a[o],t[o])})}L(xt.prototype,((ln={add:function(t){return ir(this,t),this},addKey:function(t){return rr(this,t,t),this},addKeys:function(t){var a=this;return t.forEach(function(o){return rr(a,o,o)}),this}})[Le]=function(){return li(this)},ln));var Bn={},ci={},fi=!1;function Tr(t){Sr(ci,t),fi||(fi=!0,setTimeout(function(){fi=!1,di(ci,!(ci={}))},0))}function di(t,a){a===void 0&&(a=!1);var o=new Set;if(t.all)for(var l=0,f=Object.values(Bn);l<f.length;l++)ta(_=f[l],t,o,a);else for(var d in t){var _,E=/^idb\:\/\/(.*)\/(.*)\//.exec(d);E&&(d=E[1],E=E[2],(_=Bn["idb://".concat(d,"/").concat(E)])&&ta(_,t,o,a))}o.forEach(function(R){return R()})}function ta(t,a,o,l){for(var f=[],d=0,_=Object.entries(t.queries.query);d<_.length;d++){for(var E=_[d],R=E[0],I=[],U=0,T=E[1];U<T.length;U++){var V=T[U];ui(a,V.obsSet)?V.subscribers.forEach(function(N){return o.add(N)}):l&&I.push(V)}l&&f.push([R,I])}if(l)for(var M=0,B=f;M<B.length;M++){var q=B[M],R=q[0],I=q[1];t.queries.query[R]=I}}function fs(t){var a=t._state,o=t._deps.indexedDB;if(a.isBeingOpened||t.idbdb)return a.dbReadyPromise.then(function(){return a.dbOpenError?Ot(a.dbOpenError):t});a.isBeingOpened=!0,a.dbOpenError=null,a.openComplete=!1;var l=a.openCanceller,f=Math.round(10*t.verno),d=!1;function _(){if(a.openCanceller!==l)throw new be.DatabaseClosed("db.open() was cancelled")}function E(){return new De(function(V,M){if(_(),!o)throw new be.MissingAPI;var B=t.name,q=a.autoSchema||!f?o.open(B):o.open(B,f);if(!q)throw new be.MissingAPI;q.onerror=yn(M),q.onblocked=it(t._fireOnBlocked),q.onupgradeneeded=it(function(N){var x;U=q.transaction,a.autoSchema&&!t._options.allowEmptyDB?(q.onerror=Xn,U.abort(),q.result.close(),(x=o.deleteDatabase(B)).onsuccess=x.onerror=it(function(){M(new be.NoSuchDatabase("Database ".concat(B," doesnt exist")))})):(U.onerror=yn(M),N=N.oldVersion>Math.pow(2,62)?0:N.oldVersion,T=N<1,t.idbdb=q.result,d&&us(t,U),ls(t,N/10,U,M))},M),q.onsuccess=it(function(){U=null;var N,x,Z,J,te,me=t.idbdb=q.result,Ue=D(me.objectStoreNames);if(0<Ue.length)try{var Oe=me.transaction((J=Ue).length===1?J[0]:J,"readonly");if(a.autoSchema)x=me,Z=Oe,(N=t).verno=x.version/10,Z=N._dbSchema=wr(0,x,Z),N._storeNames=D(x.objectStoreNames,0),yr(N,[N._allTables],c(Z),Z);else if(kr(t,t._dbSchema,Oe),((te=ni(wr(0,(te=t).idbdb,Oe),te._dbSchema)).add.length||te.change.some(function(Ke){return Ke.add.length||Ke.change.length}))&&!d)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),me.close(),f=me.version+1,d=!0,V(E());_r(t,Oe)}catch{}zn.push(t),me.onversionchange=it(function(Ke){a.vcFired=!0,t.on("versionchange").fire(Ke)}),me.onclose=it(function(Ke){t.on("close").fire(Ke)}),T&&(te=t._deps,Oe=B,me=te.indexedDB,te=te.IDBKeyRange,ai(me)||Oe===hr||ii(me,te).put({name:Oe}).catch(we)),V()},M)}).catch(function(V){switch(V==null?void 0:V.name){case"UnknownError":if(0<a.PR1398_maxLoop)return a.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),E();break;case"VersionError":if(0<f)return f=0,E()}return De.reject(V)})}var R,I=a.dbReadyResolve,U=null,T=!1;return De.race([l,(typeof navigator>"u"?De.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(V){function M(){return indexedDB.databases().finally(V)}R=setInterval(M,100),M()}).finally(function(){return clearInterval(R)}):Promise.resolve()).then(E)]).then(function(){return _(),a.onReadyBeingFired=[],De.resolve(oi(function(){return t.on.ready.fire(t.vip)})).then(function V(){if(0<a.onReadyBeingFired.length){var M=a.onReadyBeingFired.reduce(ut,we);return a.onReadyBeingFired=[],De.resolve(oi(function(){return M(t.vip)})).then(V)}})}).finally(function(){a.openCanceller===l&&(a.onReadyBeingFired=null,a.isBeingOpened=!1)}).catch(function(V){a.dbOpenError=V;try{U&&U.abort()}catch{}return l===a.openCanceller&&t._close(),Ot(V)}).finally(function(){a.openComplete=!0,I()}).then(function(){var V;return T&&(V={},t.tables.forEach(function(M){M.schema.indexes.forEach(function(B){B.name&&(V["idb://".concat(t.name,"/").concat(M.name,"/").concat(B.name)]=new xt(-1/0,[[[]]]))}),V["idb://".concat(t.name,"/").concat(M.name,"/")]=V["idb://".concat(t.name,"/").concat(M.name,"/:dels")]=new xt(-1/0,[[[]]])}),An(er).fire(V),di(V,!0)),t})}function hi(t){function a(d){return t.next(d)}var o=f(a),l=f(function(d){return t.throw(d)});function f(d){return function(R){var E=d(R),R=E.value;return E.done?R:R&&typeof R.then=="function"?R.then(o,l):g(R)?Promise.all(R).then(o,l):o(R)}}return f(a)()}function Cr(t,a,o){for(var l=g(t)?t.slice():[t],f=0;f<o;++f)l.push(a);return l}var ds={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return r(r({},t),{table:function(a){var o=t.table(a),l=o.schema,f={},d=[];function _(T,V,M){var B=nr(T),q=f[B]=f[B]||[],N=T==null?0:typeof T=="string"?1:T.length,x=0<V,x=r(r({},M),{name:x?"".concat(B,"(virtual-from:").concat(M.name,")"):M.name,lowLevelIndex:M,isVirtual:x,keyTail:V,keyLength:N,extractKey:ei(T),unique:!x&&M.unique});return q.push(x),x.isPrimaryKey||d.push(x),1<N&&_(N===2?T[0]:T.slice(0,N-1),V+1,M),q.sort(function(Z,J){return Z.keyTail-J.keyTail}),x}a=_(l.primaryKey.keyPath,0,l.primaryKey),f[":id"]=[a];for(var E=0,R=l.indexes;E<R.length;E++){var I=R[E];_(I.keyPath,0,I)}function U(T){var V,M=T.query.index;return M.isVirtual?r(r({},T),{query:{index:M.lowLevelIndex,range:(V=T.query.range,M=M.keyTail,{type:V.type===1?2:V.type,lower:Cr(V.lower,V.lowerOpen?t.MAX_KEY:t.MIN_KEY,M),lowerOpen:!0,upper:Cr(V.upper,V.upperOpen?t.MIN_KEY:t.MAX_KEY,M),upperOpen:!0})}}):T}return r(r({},o),{schema:r(r({},l),{primaryKey:a,indexes:d,getIndexByKeyPath:function(T){return(T=f[nr(T)])&&T[0]}}),count:function(T){return o.count(U(T))},query:function(T){return o.query(U(T))},openCursor:function(T){var V=T.query.index,M=V.keyTail,B=V.isVirtual,q=V.keyLength;return B?o.openCursor(U(T)).then(function(x){return x&&N(x)}):o.openCursor(T);function N(x){return Object.create(x,{continue:{value:function(Z){Z!=null?x.continue(Cr(Z,T.reverse?t.MAX_KEY:t.MIN_KEY,M)):T.unique?x.continue(x.key.slice(0,q).concat(T.reverse?t.MIN_KEY:t.MAX_KEY,M)):x.continue()}},continuePrimaryKey:{value:function(Z,J){x.continuePrimaryKey(Cr(Z,t.MAX_KEY,M),J)}},primaryKey:{get:function(){return x.primaryKey}},key:{get:function(){var Z=x.key;return q===1?Z[0]:Z.slice(0,q)}},value:{get:function(){return x.value}}})}}})}})}};function pi(t,a,o,l){return o=o||{},l=l||"",c(t).forEach(function(f){var d,_,E;k(a,f)?(d=t[f],_=a[f],typeof d=="object"&&typeof _=="object"&&d&&_?(E=qe(d))!==qe(_)?o[l+f]=a[f]:E==="Object"?pi(d,_,o,l+f+"."):d!==_&&(o[l+f]=a[f]):d!==_&&(o[l+f]=a[f])):o[l+f]=void 0}),c(a).forEach(function(f){k(t,f)||(o[l+f]=a[f])}),o}function mi(t,a){return a.type==="delete"?a.keys:a.keys||a.values.map(t.extractKey)}var hs={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return r(r({},t),{table:function(a){var o=t.table(a),l=o.schema.primaryKey;return r(r({},o),{mutate:function(f){var d=Be.trans,_=d.table(a).hook,E=_.deleting,R=_.creating,I=_.updating;switch(f.type){case"add":if(R.fire===we)break;return d._promise("readwrite",function(){return U(f)},!0);case"put":if(R.fire===we&&I.fire===we)break;return d._promise("readwrite",function(){return U(f)},!0);case"delete":if(E.fire===we)break;return d._promise("readwrite",function(){return U(f)},!0);case"deleteRange":if(E.fire===we)break;return d._promise("readwrite",function(){return function T(V,M,B){return o.query({trans:V,values:!1,query:{index:l,range:M},limit:B}).then(function(q){var N=q.result;return U({type:"delete",keys:N,trans:V}).then(function(x){return 0<x.numFailures?Promise.reject(x.failures[0]):N.length<B?{failures:[],numFailures:0,lastResult:void 0}:T(V,r(r({},M),{lower:N[N.length-1],lowerOpen:!0}),B)})})}(f.trans,f.range,1e4)},!0)}return o.mutate(f);function U(T){var V,M,B,q=Be.trans,N=T.keys||mi(l,T);if(!N)throw new Error("Keys missing");return(T=T.type==="add"||T.type==="put"?r(r({},T),{keys:N}):r({},T)).type!=="delete"&&(T.values=s([],T.values)),T.keys&&(T.keys=s([],T.keys)),V=o,B=N,((M=T).type==="add"?Promise.resolve([]):V.getMany({trans:M.trans,keys:B,cache:"immutable"})).then(function(x){var Z=N.map(function(J,te){var me,Ue,Oe,Ke=x[te],Ve={onerror:null,onsuccess:null};return T.type==="delete"?E.fire.call(Ve,J,Ke,q):T.type==="add"||Ke===void 0?(me=R.fire.call(Ve,J,T.values[te],q),J==null&&me!=null&&(T.keys[te]=J=me,l.outbound||ae(T.values[te],l.keyPath,J))):(me=pi(Ke,T.values[te]),(Ue=I.fire.call(Ve,me,J,Ke,q))&&(Oe=T.values[te],Object.keys(Ue).forEach(function(Ne){k(Oe,Ne)?Oe[Ne]=Ue[Ne]:ae(Oe,Ne,Ue[Ne])}))),Ve});return o.mutate(T).then(function(J){for(var te=J.failures,me=J.results,Ue=J.numFailures,J=J.lastResult,Oe=0;Oe<N.length;++Oe){var Ke=(me||N)[Oe],Ve=Z[Oe];Ke==null?Ve.onerror&&Ve.onerror(te[Oe]):Ve.onsuccess&&Ve.onsuccess(T.type==="put"&&x[Oe]?T.values[Oe]:Ke)}return{failures:te,results:me,numFailures:Ue,lastResult:J}}).catch(function(J){return Z.forEach(function(te){return te.onerror&&te.onerror(J)}),Promise.reject(J)})})}}})}})}};function na(t,a,o){try{if(!a||a.keys.length<t.length)return null;for(var l=[],f=0,d=0;f<a.keys.length&&d<t.length;++f)ct(a.keys[f],t[d])===0&&(l.push(o?Ee(a.values[f]):a.values[f]),++d);return l.length===t.length?l:null}catch{return null}}var ps={stack:"dbcore",level:-1,create:function(t){return{table:function(a){var o=t.table(a);return r(r({},o),{getMany:function(l){if(!l.cache)return o.getMany(l);var f=na(l.keys,l.trans._cache,l.cache==="clone");return f?De.resolve(f):o.getMany(l).then(function(d){return l.trans._cache={keys:l.keys,values:l.cache==="clone"?Ee(d):d},d})},mutate:function(l){return l.type!=="add"&&(l.trans._cache=null),o.mutate(l)}})}}}};function ra(t,a){return t.trans.mode==="readonly"&&!!t.subscr&&!t.trans.explicit&&t.trans.db._options.cache!=="disabled"&&!a.schema.primaryKey.outbound}function ia(t,a){switch(t){case"query":return a.values&&!a.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var ms={stack:"dbcore",level:0,name:"Observability",create:function(t){var a=t.schema.name,o=new xt(t.MIN_KEY,t.MAX_KEY);return r(r({},t),{transaction:function(l,f,d){if(Be.subscr&&f!=="readonly")throw new be.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Be.querier));return t.transaction(l,f,d)},table:function(l){var f=t.table(l),d=f.schema,_=d.primaryKey,T=d.indexes,E=_.extractKey,R=_.outbound,I=_.autoIncrement&&T.filter(function(M){return M.compound&&M.keyPath.includes(_.keyPath)}),U=r(r({},f),{mutate:function(M){function B(Ne){return Ne="idb://".concat(a,"/").concat(l,"/").concat(Ne),J[Ne]||(J[Ne]=new xt)}var q,N,x,Z=M.trans,J=M.mutatedParts||(M.mutatedParts={}),te=B(""),me=B(":dels"),Ue=M.type,Ve=M.type==="deleteRange"?[M.range]:M.type==="delete"?[M.keys]:M.values.length<50?[mi(_,M).filter(function(Ne){return Ne}),M.values]:[],Oe=Ve[0],Ke=Ve[1],Ve=M.trans._cache;return g(Oe)?(te.addKeys(Oe),(Ve=Ue==="delete"||Oe.length===Ke.length?na(Oe,Ve):null)||me.addKeys(Oe),(Ve||Ke)&&(q=B,N=Ve,x=Ke,d.indexes.forEach(function(Ne){var Qe=q(Ne.name||"");function $e(et){return et!=null?Ne.extractKey(et):null}function nt(et){return Ne.multiEntry&&g(et)?et.forEach(function(hn){return Qe.addKey(hn)}):Qe.addKey(et)}(N||x).forEach(function(et,Wt){var tt=N&&$e(N[Wt]),Wt=x&&$e(x[Wt]);ct(tt,Wt)!==0&&(tt!=null&&nt(tt),Wt!=null&&nt(Wt))})}))):Oe?(Ke={from:Oe.lower,to:Oe.upper},me.add(Ke),te.add(Ke)):(te.add(o),me.add(o),d.indexes.forEach(function(Ne){return B(Ne.name).add(o)})),f.mutate(M).then(function(Ne){return!Oe||M.type!=="add"&&M.type!=="put"||(te.addKeys(Ne.results),I&&I.forEach(function(Qe){var $e=M.values.map(function(et){return Qe.extractKey(et)}),nt=Qe.keyPath.findIndex(function(et){return et===_.keyPath});Ne.results.forEach(function(et){return $e[nt]=et}),B(Qe.name).addKeys($e)})),Z.mutatedParts=Sr(Z.mutatedParts||{},J),Ne})}}),T=function(B){var q=B.query,B=q.index,q=q.range;return[B,new xt((B=q.lower)!==null&&B!==void 0?B:t.MIN_KEY,(q=q.upper)!==null&&q!==void 0?q:t.MAX_KEY)]},V={get:function(M){return[_,new xt(M.key)]},getMany:function(M){return[_,new xt().addKeys(M.keys)]},count:T,query:T,openCursor:T};return c(V).forEach(function(M){U[M]=function(B){var q=Be.subscr,N=!!q,x=ra(Be,f)&&ia(M,B)?B.obsSet={}:q;if(N){var Z=function(Ke){return Ke="idb://".concat(a,"/").concat(l,"/").concat(Ke),x[Ke]||(x[Ke]=new xt)},J=Z(""),te=Z(":dels"),q=V[M](B),N=q[0],q=q[1];if((M==="query"&&N.isPrimaryKey&&!B.values?te:Z(N.name||"")).add(q),!N.isPrimaryKey){if(M!=="count"){var me=M==="query"&&R&&B.values&&f.query(r(r({},B),{values:!1}));return f[M].apply(this,arguments).then(function(Ke){if(M==="query"){if(R&&B.values)return me.then(function($e){return $e=$e.result,J.addKeys($e),Ke});var Ve=B.values?Ke.result.map(E):Ke.result;(B.values?J:te).addKeys(Ve)}else if(M==="openCursor"){var Ne=Ke,Qe=B.values;return Ne&&Object.create(Ne,{key:{get:function(){return te.addKey(Ne.primaryKey),Ne.key}},primaryKey:{get:function(){var $e=Ne.primaryKey;return te.addKey($e),$e}},value:{get:function(){return Qe&&J.addKey(Ne.primaryKey),Ne.value}}})}return Ke})}te.add(o)}}return f[M].apply(this,arguments)}}),U}})}};function aa(t,a,o){if(o.numFailures===0)return a;if(a.type==="deleteRange")return null;var l=a.keys?a.keys.length:"values"in a&&a.values?a.values.length:1;return o.numFailures===l?null:(a=r({},a),g(a.keys)&&(a.keys=a.keys.filter(function(f,d){return!(d in o.failures)})),"values"in a&&g(a.values)&&(a.values=a.values.filter(function(f,d){return!(d in o.failures)})),a)}function gi(t,a){return o=t,((l=a).lower===void 0||(l.lowerOpen?0<ct(o,l.lower):0<=ct(o,l.lower)))&&(t=t,(a=a).upper===void 0||(a.upperOpen?ct(t,a.upper)<0:ct(t,a.upper)<=0));var o,l}function oa(t,a,V,l,f,d){if(!V||V.length===0)return t;var _=a.query.index,E=_.multiEntry,R=a.query.range,I=l.schema.primaryKey.extractKey,U=_.extractKey,T=(_.lowLevelIndex||_).extractKey,V=V.reduce(function(M,B){var q=M,N=B.type==="add"||B.type==="put"?B.values.filter(function(te){return te=U(te),E&&g(te)?te.some(function(me){return gi(me,R)}):gi(te,R)}).map(function(te){return te=Ee(te),d&&Object.freeze(te),te}):[];switch(B.type){case"add":q=M.concat(a.values?N:N.map(function(me){return I(me)}));break;case"put":var x=new xt().addKeys(B.values.map(function(me){return I(me)})),q=M.filter(function(me){return me=a.values?I(me):me,!Dr(new xt(me),x)}).concat(a.values?N:N.map(function(me){return I(me)}));break;case"delete":var Z=new xt().addKeys(B.keys);q=M.filter(function(me){return me=a.values?I(me):me,!Dr(new xt(me),Z)});break;case"deleteRange":var J=B.range;q=M.filter(function(me){return!gi(I(me),J)})}return q},t);return V===t?t:(V.sort(function(M,B){return ct(T(M),T(B))||ct(I(M),I(B))}),a.limit&&a.limit<1/0&&(V.length>a.limit?V.length=a.limit:t.length===a.limit&&V.length<a.limit&&(f.dirty=!0)),d?Object.freeze(V):V)}function sa(t,a){return ct(t.lower,a.lower)===0&&ct(t.upper,a.upper)===0&&!!t.lowerOpen==!!a.lowerOpen&&!!t.upperOpen==!!a.upperOpen}function gs(t,a){return function(o,l,f,d){if(o===void 0)return l!==void 0?-1:0;if(l===void 0)return 1;if((l=ct(o,l))===0){if(f&&d)return 0;if(f)return 1;if(d)return-1}return l}(t.lower,a.lower,t.lowerOpen,a.lowerOpen)<=0&&0<=function(o,l,f,d){if(o===void 0)return l!==void 0?1:0;if(l===void 0)return-1;if((l=ct(o,l))===0){if(f&&d)return 0;if(f)return-1;if(d)return 1}return l}(t.upper,a.upper,t.upperOpen,a.upperOpen)}function vs(t,a,o,l){t.subscribers.add(o),l.addEventListener("abort",function(){var f,d;t.subscribers.delete(o),t.subscribers.size===0&&(f=t,d=a,setTimeout(function(){f.subscribers.size===0&&Ce(d,f)},3e3))})}var _s={stack:"dbcore",level:0,name:"Cache",create:function(t){var a=t.schema.name;return r(r({},t),{transaction:function(o,l,f){var d,_,E=t.transaction(o,l,f);return l==="readwrite"&&(_=(d=new AbortController).signal,f=function(R){return function(){if(d.abort(),l==="readwrite"){for(var I=new Set,U=0,T=o;U<T.length;U++){var V=T[U],M=Bn["idb://".concat(a,"/").concat(V)];if(M){var B=t.table(V),q=M.optimisticOps.filter(function(Qe){return Qe.trans===E});if(E._explicit&&R&&E.mutatedParts)for(var N=0,x=Object.values(M.queries.query);N<x.length;N++)for(var Z=0,J=(Ue=x[N]).slice();Z<J.length;Z++)ui((Oe=J[Z]).obsSet,E.mutatedParts)&&(Ce(Ue,Oe),Oe.subscribers.forEach(function(Qe){return I.add(Qe)}));else if(0<q.length){M.optimisticOps=M.optimisticOps.filter(function(Qe){return Qe.trans!==E});for(var te=0,me=Object.values(M.queries.query);te<me.length;te++)for(var Ue,Oe,Ke,Ve=0,Ne=(Ue=me[te]).slice();Ve<Ne.length;Ve++)(Oe=Ne[Ve]).res!=null&&E.mutatedParts&&(R&&!Oe.dirty?(Ke=Object.isFrozen(Oe.res),Ke=oa(Oe.res,Oe.req,q,B,Oe,Ke),Oe.dirty?(Ce(Ue,Oe),Oe.subscribers.forEach(function(Qe){return I.add(Qe)})):Ke!==Oe.res&&(Oe.res=Ke,Oe.promise=De.resolve({result:Ke}))):(Oe.dirty&&Ce(Ue,Oe),Oe.subscribers.forEach(function(Qe){return I.add(Qe)})))}}}I.forEach(function(Qe){return Qe()})}}},E.addEventListener("abort",f(!1),{signal:_}),E.addEventListener("error",f(!1),{signal:_}),E.addEventListener("complete",f(!0),{signal:_})),E},table:function(o){var l=t.table(o),f=l.schema.primaryKey;return r(r({},l),{mutate:function(d){var _=Be.trans;if(f.outbound||_.db._options.cache==="disabled"||_.explicit)return l.mutate(d);var E=Bn["idb://".concat(a,"/").concat(o)];return E?(_=l.mutate(d),d.type!=="add"&&d.type!=="put"||!(50<=d.values.length||mi(f,d).some(function(R){return R==null}))?(E.optimisticOps.push(d),d.mutatedParts&&Tr(d.mutatedParts),_.then(function(R){0<R.numFailures&&(Ce(E.optimisticOps,d),(R=aa(0,d,R))&&E.optimisticOps.push(R),d.mutatedParts&&Tr(d.mutatedParts))}),_.catch(function(){Ce(E.optimisticOps,d),d.mutatedParts&&Tr(d.mutatedParts)})):_.then(function(R){var I=aa(0,r(r({},d),{values:d.values.map(function(M,T){var V,M=(V=f.keyPath)!==null&&V!==void 0&&V.includes(".")?Ee(M):r({},M);return ae(M,f.keyPath,R.results[T]),M})}),R);E.optimisticOps.push(I),queueMicrotask(function(){return d.mutatedParts&&Tr(d.mutatedParts)})}),_):l.mutate(d)},query:function(d){if(!ra(Be,l)||!ia("query",d))return l.query(d);var _=((I=Be.trans)===null||I===void 0?void 0:I.db._options.cache)==="immutable",T=Be,E=T.requery,R=T.signal,I=function(B,q,N,x){var Z=Bn["idb://".concat(B,"/").concat(q)];if(!Z)return[];if(!(q=Z.queries[N]))return[null,!1,Z,null];var J=q[(x.query?x.query.index.name:null)||""];if(!J)return[null,!1,Z,null];switch(N){case"query":var te=J.find(function(me){return me.req.limit===x.limit&&me.req.values===x.values&&sa(me.req.query.range,x.query.range)});return te?[te,!0,Z,J]:[J.find(function(me){return("limit"in me.req?me.req.limit:1/0)>=x.limit&&(!x.values||me.req.values)&&gs(me.req.query.range,x.query.range)}),!1,Z,J];case"count":return te=J.find(function(me){return sa(me.req.query.range,x.query.range)}),[te,!!te,Z,J]}}(a,o,"query",d),U=I[0],T=I[1],V=I[2],M=I[3];return U&&T?U.obsSet=d.obsSet:(T=l.query(d).then(function(B){var q=B.result;if(U&&(U.res=q),_){for(var N=0,x=q.length;N<x;++N)Object.freeze(q[N]);Object.freeze(q)}else B.result=Ee(q);return B}).catch(function(B){return M&&U&&Ce(M,U),Promise.reject(B)}),U={obsSet:d.obsSet,promise:T,subscribers:new Set,type:"query",req:d,dirty:!1},M?M.push(U):(M=[U],(V=V||(Bn["idb://".concat(a,"/").concat(o)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[d.query.index.name||""]=M)),vs(U,M,E,R),U.promise.then(function(B){return{result:oa(B.result,d,V==null?void 0:V.optimisticOps,l,U,_)}})}})}})}};function Or(t,a){return new Proxy(t,{get:function(o,l,f){return l==="db"?a:Reflect.get(o,l,f)}})}var Tn=(At.prototype.version=function(t){if(isNaN(t)||t<.1)throw new be.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new be.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var a=this._versions,o=a.filter(function(l){return l._cfg.version===t})[0];return o||(o=new this.Version(t),a.push(o),a.sort(ss),o.stores({}),this._state.autoSchema=!1,o)},At.prototype._whenReady=function(t){var a=this;return this.idbdb&&(this._state.openComplete||Be.letThrough||this._vip)?t():new De(function(o,l){if(a._state.openComplete)return l(new be.DatabaseClosed(a._state.dbOpenError));if(!a._state.isBeingOpened){if(!a._state.autoOpen)return void l(new be.DatabaseClosed);a.open().catch(we)}a._state.dbReadyPromise.then(o,l)}).then(t)},At.prototype.use=function(t){var a=t.stack,o=t.create,l=t.level,f=t.name;return f&&this.unuse({stack:a,name:f}),t=this._middlewares[a]||(this._middlewares[a]=[]),t.push({stack:a,create:o,level:l??10,name:f}),t.sort(function(d,_){return d.level-_.level}),this},At.prototype.unuse=function(t){var a=t.stack,o=t.name,l=t.create;return a&&this._middlewares[a]&&(this._middlewares[a]=this._middlewares[a].filter(function(f){return l?f.create!==l:!!o&&f.name!==o})),this},At.prototype.open=function(){var t=this;return Mn(ot,function(){return fs(t)})},At.prototype._close=function(){var t=this._state,a=zn.indexOf(this);if(0<=a&&zn.splice(a,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}t.isBeingOpened||(t.dbReadyPromise=new De(function(o){t.dbReadyResolve=o}),t.openCanceller=new De(function(o,l){t.cancelOpen=l}))},At.prototype.close=function(o){var a=(o===void 0?{disableAutoOpen:!0}:o).disableAutoOpen,o=this._state;a?(o.isBeingOpened&&o.cancelOpen(new be.DatabaseClosed),this._close(),o.autoOpen=!1,o.dbOpenError=new be.DatabaseClosed):(this._close(),o.autoOpen=this._options.autoOpen||o.isBeingOpened,o.openComplete=!1,o.dbOpenError=null)},At.prototype.delete=function(t){var a=this;t===void 0&&(t={disableAutoOpen:!0});var o=0<arguments.length&&typeof arguments[0]!="object",l=this._state;return new De(function(f,d){function _(){a.close(t);var E=a._deps.indexedDB.deleteDatabase(a.name);E.onsuccess=it(function(){var R,I,U;R=a._deps,I=a.name,U=R.indexedDB,R=R.IDBKeyRange,ai(U)||I===hr||ii(U,R).delete(I).catch(we),f()}),E.onerror=yn(d),E.onblocked=a._fireOnBlocked}if(o)throw new be.InvalidArgument("Invalid closeOptions argument to db.delete()");l.isBeingOpened?l.dbReadyPromise.then(_):_()})},At.prototype.backendDB=function(){return this.idbdb},At.prototype.isOpen=function(){return this.idbdb!==null},At.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},At.prototype.hasFailed=function(){return this._state.dbOpenError!==null},At.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(At.prototype,"tables",{get:function(){var t=this;return c(this._allTables).map(function(a){return t._allTables[a]})},enumerable:!1,configurable:!0}),At.prototype.transaction=function(){var t=(function(a,o,l){var f=arguments.length;if(f<2)throw new be.InvalidArgument("Too few arguments");for(var d=new Array(f-1);--f;)d[f-1]=arguments[f];return l=d.pop(),[a,ke(d),l]}).apply(this,arguments);return this._transaction.apply(this,t)},At.prototype._transaction=function(t,a,o){var l=this,f=Be.trans;f&&f.db===this&&t.indexOf("!")===-1||(f=null);var d,_,E=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");try{if(_=a.map(function(I){if(I=I instanceof l.Table?I.name:I,typeof I!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return I}),t=="r"||t===Wr)d=Wr;else{if(t!="rw"&&t!=Gr)throw new be.InvalidArgument("Invalid transaction mode: "+t);d=Gr}if(f){if(f.mode===Wr&&d===Gr){if(!E)throw new be.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");f=null}f&&_.forEach(function(I){if(f&&f.storeNames.indexOf(I)===-1){if(!E)throw new be.SubTransaction("Table "+I+" not included in parent transaction.");f=null}}),E&&f&&!f.active&&(f=null)}}catch(I){return f?f._promise(null,function(U,T){T(I)}):Ot(I)}var R=(function I(U,T,V,M,B){return De.resolve().then(function(){var q=Be.transless||Be,N=U._createTransaction(T,V,U._dbSchema,M);if(N.explicit=!0,q={trans:N,transless:q},M)N.idbtrans=M.idbtrans;else try{N.create(),N.idbtrans._explicit=!0,U._state.PR1398_maxLoop=3}catch(J){return J.name===je.InvalidState&&U.isOpen()&&0<--U._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),U.close({disableAutoOpen:!1}),U.open().then(function(){return I(U,T,V,null,B)})):Ot(J)}var x,Z=$(B);return Z&&_t(),q=De.follow(function(){var J;(x=B.call(N,N))&&(Z?(J=dn.bind(null,null),x.then(J,J)):typeof x.next=="function"&&typeof x.throw=="function"&&(x=hi(x)))},q),(x&&typeof x.then=="function"?De.resolve(x).then(function(J){return N.active?J:Ot(new be.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):q.then(function(){return x})).then(function(J){return M&&N._resolve(),N._completion.then(function(){return J})}).catch(function(J){return N._reject(J),Ot(J)})})}).bind(null,this,d,_,f,o);return f?f._promise(d,R,"lock"):Be.trans?Mn(Be.transless,function(){return l._whenReady(R)}):this._whenReady(R)},At.prototype.table=function(t){if(!k(this._allTables,t))throw new be.InvalidTable("Table ".concat(t," does not exist"));return this._allTables[t]},At);function At(t,a){var o=this;this._middlewares={},this.verno=0;var l=At.dependencies;this._options=a=r({addons:At.addons,autoOpen:!0,indexedDB:l.indexedDB,IDBKeyRange:l.IDBKeyRange,cache:"cloned"},a),this._deps={indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange},l=a.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var f,d,_,E,R,I={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:we,dbReadyPromise:null,cancelOpen:we,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:a.autoOpen};I.dbReadyPromise=new De(function(T){I.dbReadyResolve=T}),I.openCanceller=new De(function(T,V){I.cancelOpen=V}),this._state=I,this.name=t,this.on=Jn(this,"populate","blocked","versionchange","close",{ready:[ut,we]}),this.on.ready.subscribe=G(this.on.ready.subscribe,function(T){return function(V,M){At.vip(function(){var B,q=o._state;q.openComplete?(q.dbOpenError||De.resolve().then(V),M&&T(V)):q.onReadyBeingFired?(q.onReadyBeingFired.push(V),M&&T(V)):(T(V),B=o,M||T(function N(){B.on.ready.unsubscribe(V),B.on.ready.unsubscribe(N)}))})}}),this.Collection=(f=this,Qn(es.prototype,function(x,N){this.db=f;var M=ji,B=null;if(N)try{M=N()}catch(Z){B=Z}var q=x._ctx,N=q.table,x=N.hook.reading.fire;this._ctx={table:N,index:q.index,isPrimKey:!q.index||N.schema.primKey.keyPath&&q.index===N.schema.primKey.name,range:M,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:B,or:q.or,valueMapper:x!==ze?x:null}})),this.Table=(d=this,Qn(zi.prototype,function(T,V,M){this.db=d,this._tx=M,this.name=T,this.schema=V,this.hook=d._allTables[T]?d._allTables[T].hook:Jn(null,{creating:[Se,we],reading:[Ye,ze],updating:[ue,we],deleting:[ye,we]})})),this.Transaction=(_=this,Qn(rs.prototype,function(T,V,M,B,q){var N=this;this.db=_,this.mode=T,this.storeNames=V,this.schema=M,this.chromeTransactionDurability=B,this.idbtrans=null,this.on=Jn(this,"complete","error","abort"),this.parent=q||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new De(function(x,Z){N._resolve=x,N._reject=Z}),this._completion.then(function(){N.active=!1,N.on.complete.fire()},function(x){var Z=N.active;return N.active=!1,N.on.error.fire(x),N.parent?N.parent._reject(x):Z&&N.idbtrans&&N.idbtrans.abort(),Ot(x)})})),this.Version=(E=this,Qn(cs.prototype,function(T){this.db=E,this._cfg={version:T,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(R=this,Qn(Yi.prototype,function(T,V,M){if(this.db=R,this._ctx={table:T,index:V===":id"?null:V,or:M},this._cmp=this._ascending=ct,this._descending=function(B,q){return ct(q,B)},this._max=function(B,q){return 0<ct(B,q)?B:q},this._min=function(B,q){return ct(B,q)<0?B:q},this._IDBKeyRange=R._deps.IDBKeyRange,!this._IDBKeyRange)throw new be.MissingAPI})),this.on("versionchange",function(T){0<T.newVersion?console.warn("Another connection wants to upgrade database '".concat(o.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(o.name,"'. Closing db now to resume the delete request.")),o.close({disableAutoOpen:!1})}),this.on("blocked",function(T){!T.newVersion||T.newVersion<T.oldVersion?console.warn("Dexie.delete('".concat(o.name,"') was blocked")):console.warn("Upgrade '".concat(o.name,"' blocked by other connection holding version ").concat(T.oldVersion/10))}),this._maxKey=tr(a.IDBKeyRange),this._createTransaction=function(T,V,M,B){return new o.Transaction(T,V,M,o._options.chromeTransactionDurability,B)},this._fireOnBlocked=function(T){o.on("blocked").fire(T),zn.filter(function(V){return V.name===o.name&&V!==o&&!V._state.vcFired}).map(function(V){return V.on("versionchange").fire(T)})},this.use(ps),this.use(_s),this.use(ms),this.use(ds),this.use(hs);var U=new Proxy(this,{get:function(T,V,M){if(V==="_vip")return!0;if(V==="table")return function(q){return Or(o.table(q),U)};var B=Reflect.get(T,V,M);return B instanceof zi?Or(B,U):V==="tables"?B.map(function(q){return Or(q,U)}):V==="_createTransaction"?function(){return Or(B.apply(this,arguments),U)}:B}});this.vip=U,l.forEach(function(T){return T(o)})}var Ar,ln=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",ys=(vi.prototype.subscribe=function(t,a,o){return this._subscribe(t&&typeof t!="function"?t:{next:t,error:a,complete:o})},vi.prototype[ln]=function(){return this},vi);function vi(t){this._subscribe=t}try{Ar={indexedDB:u.indexedDB||u.mozIndexedDB||u.webkitIndexedDB||u.msIndexedDB,IDBKeyRange:u.IDBKeyRange||u.webkitIDBKeyRange}}catch{Ar={indexedDB:null,IDBKeyRange:null}}function la(t){var a,o=!1,l=new ys(function(f){var d=$(t),_,E=!1,R={},I={},U={get closed(){return E},unsubscribe:function(){E||(E=!0,_&&_.abort(),T&&An.storagemutated.unsubscribe(M))}};f.start&&f.start(U);var T=!1,V=function(){return xr(B)},M=function(q){Sr(R,q),ui(I,R)&&V()},B=function(){var q,N,x;!E&&Ar.indexedDB&&(R={},q={},_&&_.abort(),_=new AbortController,x=function(Z){var J=Ae();try{d&&_t();var te=en(t,Z);return te=d?te.finally(dn):te}finally{J&&gt()}}(N={subscr:q,signal:_.signal,requery:V,querier:t,trans:null}),Promise.resolve(x).then(function(Z){o=!0,a=Z,E||N.signal.aborted||(R={},function(J){for(var te in J)if(k(J,te))return;return 1}(I=q)||T||(An(er,M),T=!0),xr(function(){return!E&&f.next&&f.next(Z)}))},function(Z){o=!1,["DatabaseClosedError","AbortError"].includes(Z==null?void 0:Z.name)||E||xr(function(){E||f.error&&f.error(Z)})}))};return setTimeout(V,0),U});return l.hasValue=function(){return o},l.getValue=function(){return a},l}var Kn=Tn;function _i(t){var a=Pn;try{Pn=!0,An.storagemutated.fire(t),di(t,!0)}finally{Pn=a}}L(Kn,r(r({},le),{delete:function(t){return new Kn(t,{addons:[]}).delete()},exists:function(t){return new Kn(t,{addons:[]}).open().then(function(a){return a.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(t){try{return a=Kn.dependencies,o=a.indexedDB,a=a.IDBKeyRange,(ai(o)?Promise.resolve(o.databases()).then(function(l){return l.map(function(f){return f.name}).filter(function(f){return f!==hr})}):ii(o,a).toCollection().primaryKeys()).then(t)}catch{return Ot(new be.MissingAPI)}var a,o},defineClass:function(){return function(t){y(this,t)}},ignoreTransaction:function(t){return Be.trans?Mn(Be.transless,t):t()},vip:oi,async:function(t){return function(){try{var a=hi(t.apply(this,arguments));return a&&typeof a.then=="function"?a:De.resolve(a)}catch(o){return Ot(o)}}},spawn:function(t,a,o){try{var l=hi(t.apply(o,a||[]));return l&&typeof l.then=="function"?l:De.resolve(l)}catch(f){return Ot(f)}},currentTransaction:{get:function(){return Be.trans||null}},waitFor:function(t,a){return a=De.resolve(typeof t=="function"?Kn.ignoreTransaction(t):t).timeout(a||6e4),Be.trans?Be.trans.waitFor(a):a},Promise:De,debug:{get:function(){return Dt},set:function(t){St(t)}},derive:W,extend:y,props:L,override:G,Events:Jn,on:An,liveQuery:la,extendObservabilitySet:Sr,getByKeyPath:pe,setByKeyPath:ae,delByKeyPath:function(t,a){typeof a=="string"?ae(t,a,void 0):"length"in a&&[].map.call(a,function(o){ae(t,o,void 0)})},shallowClone:oe,deepClone:Ee,getObjectDiff:pi,cmp:ct,asap:se,minKey:-1/0,addons:[],connections:zn,errnames:je,dependencies:Ar,cache:Bn,semVer:"4.0.7",version:"4.0.7".split(".").map(function(t){return parseInt(t)}).reduce(function(t,a,o){return t+a/Math.pow(10,2*o)})})),Kn.maxKey=tr(Kn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(An(er,function(t){Pn||(t=new CustomEvent(Qr,{detail:t}),Pn=!0,dispatchEvent(t),Pn=!1)}),addEventListener(Qr,function(t){t=t.detail,Pn||_i(t)}));var Wn,Pn=!1,ua=function(){};return typeof BroadcastChannel<"u"&&((ua=function(){(Wn=new BroadcastChannel(Qr)).onmessage=function(t){return t.data&&_i(t.data)}})(),typeof Wn.unref=="function"&&Wn.unref(),An(er,function(t){Pn||Wn.postMessage(t)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(t){if(!Tn.disableBfCache&&t.persisted){Dt&&console.debug("Dexie: handling persisted pagehide"),Wn!=null&&Wn.close();for(var a=0,o=zn;a<o.length;a++)o[a].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(t){!Tn.disableBfCache&&t.persisted&&(Dt&&console.debug("Dexie: handling persisted pageshow"),ua(),_i({all:new xt(-1/0,[[]])}))})),De.rejectionMapper=function(t,a){return!t||t instanceof w||t instanceof TypeError||t instanceof SyntaxError||!t.name||!Y[t.name]?t:(a=new Y[t.name](a||t.message,t),"stack"in t&&Q(a,"stack",{get:function(){return this.inner.stack}}),a)},St(Dt),r(Tn,Object.freeze({__proto__:null,Dexie:Tn,liveQuery:la,Entity:Ui,cmp:ct,PropModSymbol:Sn,PropModification:$n,replacePrefix:function(t,a){return new $n({replacePrefix:[t,a]})},add:function(t){return new $n({add:t})},remove:function(t){return new $n({remove:t})},default:Tn,RangeSet:xt,mergeRanges:ir,rangesOverlap:Dr}),{default:Tn}),Tn})})(xo);var xs=xo.exports;const Pi=Ho(xs),Na=Symbol.for("Dexie"),qr=globalThis[Na]||(globalThis[Na]=Pi);if(Pi.semVer!==qr.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Pi.semVer} and ${qr.semVer}`);const{liveQuery:zr,mergeRanges:vc,rangesOverlap:_c,RangeSet:yc,cmp:bc,Entity:wc,PropModSymbol:kc,PropModification:Ec,replacePrefix:Dc,add:Sc,remove:Tc}=qr;var dr=(i=>(i.Accomodation="Accomodation",i.Food="Food",i.Transport="Transport",i.Other="Other",i))(dr||{});const Kt=new qr("ExpensesDatabase");Kt.version(2).stores({trips:"++id, name, defaultCurrency, startDate, endDate",receipts:"++id, description, total, receiptDate, receiptType, currency, tripId, imageData"});Kt.version(3).stores({trips:"++id, name, defaultCurrency, startDate, startDateString, endDate, endDateString",receipts:"++id, description, total, receiptDate, receiptDateString, receiptType, currency, tripId, imageData"}).upgrade(i=>i.table("trips").toCollection().modify(e=>{e.startDateString=e.startDate.toDateString(),e.endDateString=e.endDate.toDateString()}).then(function(){i.table("receipts").toCollection().modify(e=>{e.receiptDateString=e.receiptDate.toDateString()})}));const wt={GBP:{symbol:"Â£",name:"British Pound Sterling",symbol_native:"Â£",decimal_digits:2,rounding:0,code:"GBP",name_plural:"British pounds sterling"},USD:{symbol:"$",name:"US Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"USD",name_plural:"US dollars"},CAD:{symbol:"CA$",name:"Canadian Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"CAD",name_plural:"Canadian dollars"},EUR:{symbol:"â¬",name:"Euro",symbol_native:"â¬",decimal_digits:2,rounding:0,code:"EUR",name_plural:"euros"},AED:{symbol:"AED",name:"United Arab Emirates Dirham",symbol_native:"Ø¯.Ø¥.â",decimal_digits:2,rounding:0,code:"AED",name_plural:"UAE dirhams"},AFN:{symbol:"Af",name:"Afghan Afghani",symbol_native:"Ø",decimal_digits:0,rounding:0,code:"AFN",name_plural:"Afghan Afghanis"},ALL:{symbol:"ALL",name:"Albanian Lek",symbol_native:"Lek",decimal_digits:0,rounding:0,code:"ALL",name_plural:"Albanian lekÃ«"},AMD:{symbol:"AMD",name:"Armenian Dram",symbol_native:"Õ¤Ö.",decimal_digits:0,rounding:0,code:"AMD",name_plural:"Armenian drams"},ARS:{symbol:"AR$",name:"Argentine Peso",symbol_native:"$",decimal_digits:2,rounding:0,code:"ARS",name_plural:"Argentine pesos"},AUD:{symbol:"AU$",name:"Australian Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"AUD",name_plural:"Australian dollars"},AZN:{symbol:"man.",name:"Azerbaijani Manat",symbol_native:"Ð¼Ð°Ð½.",decimal_digits:2,rounding:0,code:"AZN",name_plural:"Azerbaijani manats"},BAM:{symbol:"KM",name:"Bosnia-Herzegovina Convertible Mark",symbol_native:"KM",decimal_digits:2,rounding:0,code:"BAM",name_plural:"Bosnia-Herzegovina convertible marks"},BDT:{symbol:"Tk",name:"Bangladeshi Taka",symbol_native:"à§³",decimal_digits:2,rounding:0,code:"BDT",name_plural:"Bangladeshi takas"},BGN:{symbol:"BGN",name:"Bulgarian Lev",symbol_native:"Ð»Ð².",decimal_digits:2,rounding:0,code:"BGN",name_plural:"Bulgarian leva"},BHD:{symbol:"BD",name:"Bahraini Dinar",symbol_native:"Ø¯.Ø¨.â",decimal_digits:3,rounding:0,code:"BHD",name_plural:"Bahraini dinars"},BIF:{symbol:"FBu",name:"Burundian Franc",symbol_native:"FBu",decimal_digits:0,rounding:0,code:"BIF",name_plural:"Burundian francs"},BND:{symbol:"BN$",name:"Brunei Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"BND",name_plural:"Brunei dollars"},BOB:{symbol:"Bs",name:"Bolivian Boliviano",symbol_native:"Bs",decimal_digits:2,rounding:0,code:"BOB",name_plural:"Bolivian bolivianos"},BRL:{symbol:"R$",name:"Brazilian Real",symbol_native:"R$",decimal_digits:2,rounding:0,code:"BRL",name_plural:"Brazilian reals"},BWP:{symbol:"BWP",name:"Botswanan Pula",symbol_native:"P",decimal_digits:2,rounding:0,code:"BWP",name_plural:"Botswanan pulas"},BYN:{symbol:"Br",name:"Belarusian Ruble",symbol_native:"ÑÑÐ±.",decimal_digits:2,rounding:0,code:"BYN",name_plural:"Belarusian rubles"},BZD:{symbol:"BZ$",name:"Belize Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"BZD",name_plural:"Belize dollars"},CDF:{symbol:"CDF",name:"Congolese Franc",symbol_native:"FrCD",decimal_digits:2,rounding:0,code:"CDF",name_plural:"Congolese francs"},CHF:{symbol:"CHF",name:"Swiss Franc",symbol_native:"CHF",decimal_digits:2,rounding:.05,code:"CHF",name_plural:"Swiss francs"},CLP:{symbol:"CL$",name:"Chilean Peso",symbol_native:"$",decimal_digits:0,rounding:0,code:"CLP",name_plural:"Chilean pesos"},CNY:{symbol:"CNÂ¥",name:"Chinese Yuan",symbol_native:"CNÂ¥",decimal_digits:2,rounding:0,code:"CNY",name_plural:"Chinese yuan"},COP:{symbol:"CO$",name:"Colombian Peso",symbol_native:"$",decimal_digits:0,rounding:0,code:"COP",name_plural:"Colombian pesos"},CRC:{symbol:"â¡",name:"Costa Rican ColÃ³n",symbol_native:"â¡",decimal_digits:0,rounding:0,code:"CRC",name_plural:"Costa Rican colÃ³ns"},CVE:{symbol:"CV$",name:"Cape Verdean Escudo",symbol_native:"CV$",decimal_digits:2,rounding:0,code:"CVE",name_plural:"Cape Verdean escudos"},CZK:{symbol:"KÄ",name:"Czech Republic Koruna",symbol_native:"KÄ",decimal_digits:2,rounding:0,code:"CZK",name_plural:"Czech Republic korunas"},DJF:{symbol:"Fdj",name:"Djiboutian Franc",symbol_native:"Fdj",decimal_digits:0,rounding:0,code:"DJF",name_plural:"Djiboutian francs"},DKK:{symbol:"Dkr",name:"Danish Krone",symbol_native:"kr",decimal_digits:2,rounding:0,code:"DKK",name_plural:"Danish kroner"},DOP:{symbol:"RD$",name:"Dominican Peso",symbol_native:"RD$",decimal_digits:2,rounding:0,code:"DOP",name_plural:"Dominican pesos"},DZD:{symbol:"DA",name:"Algerian Dinar",symbol_native:"Ø¯.Ø¬.â",decimal_digits:2,rounding:0,code:"DZD",name_plural:"Algerian dinars"},EEK:{symbol:"Ekr",name:"Estonian Kroon",symbol_native:"kr",decimal_digits:2,rounding:0,code:"EEK",name_plural:"Estonian kroons"},EGP:{symbol:"EGP",name:"Egyptian Pound",symbol_native:"Ø¬.Ù.â",decimal_digits:2,rounding:0,code:"EGP",name_plural:"Egyptian pounds"},ERN:{symbol:"Nfk",name:"Eritrean Nakfa",symbol_native:"Nfk",decimal_digits:2,rounding:0,code:"ERN",name_plural:"Eritrean nakfas"},ETB:{symbol:"Br",name:"Ethiopian Birr",symbol_native:"Br",decimal_digits:2,rounding:0,code:"ETB",name_plural:"Ethiopian birrs"},GEL:{symbol:"GEL",name:"Georgian Lari",symbol_native:"GEL",decimal_digits:2,rounding:0,code:"GEL",name_plural:"Georgian laris"},GHS:{symbol:"GHâµ",name:"Ghanaian Cedi",symbol_native:"GHâµ",decimal_digits:2,rounding:0,code:"GHS",name_plural:"Ghanaian cedis"},GNF:{symbol:"FG",name:"Guinean Franc",symbol_native:"FG",decimal_digits:0,rounding:0,code:"GNF",name_plural:"Guinean francs"},GTQ:{symbol:"GTQ",name:"Guatemalan Quetzal",symbol_native:"Q",decimal_digits:2,rounding:0,code:"GTQ",name_plural:"Guatemalan quetzals"},HKD:{symbol:"HK$",name:"Hong Kong Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"HKD",name_plural:"Hong Kong dollars"},HNL:{symbol:"HNL",name:"Honduran Lempira",symbol_native:"L",decimal_digits:2,rounding:0,code:"HNL",name_plural:"Honduran lempiras"},HRK:{symbol:"kn",name:"Croatian Kuna",symbol_native:"kn",decimal_digits:2,rounding:0,code:"HRK",name_plural:"Croatian kunas"},HUF:{symbol:"Ft",name:"Hungarian Forint",symbol_native:"Ft",decimal_digits:0,rounding:0,code:"HUF",name_plural:"Hungarian forints"},IDR:{symbol:"Rp",name:"Indonesian Rupiah",symbol_native:"Rp",decimal_digits:0,rounding:0,code:"IDR",name_plural:"Indonesian rupiahs"},ILS:{symbol:"âª",name:"Israeli New Sheqel",symbol_native:"âª",decimal_digits:2,rounding:0,code:"ILS",name_plural:"Israeli new sheqels"},INR:{symbol:"Rs",name:"Indian Rupee",symbol_native:"à¦à¦à¦¾",decimal_digits:2,rounding:0,code:"INR",name_plural:"Indian rupees"},IQD:{symbol:"IQD",name:"Iraqi Dinar",symbol_native:"Ø¯.Ø¹.â",decimal_digits:0,rounding:0,code:"IQD",name_plural:"Iraqi dinars"},IRR:{symbol:"IRR",name:"Iranian Rial",symbol_native:"ï·¼",decimal_digits:0,rounding:0,code:"IRR",name_plural:"Iranian rials"},ISK:{symbol:"Ikr",name:"Icelandic KrÃ³na",symbol_native:"kr",decimal_digits:0,rounding:0,code:"ISK",name_plural:"Icelandic krÃ³nur"},JMD:{symbol:"J$",name:"Jamaican Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"JMD",name_plural:"Jamaican dollars"},JOD:{symbol:"JD",name:"Jordanian Dinar",symbol_native:"Ø¯.Ø£.â",decimal_digits:3,rounding:0,code:"JOD",name_plural:"Jordanian dinars"},JPY:{symbol:"Â¥",name:"Japanese Yen",symbol_native:"ï¿¥",decimal_digits:0,rounding:0,code:"JPY",name_plural:"Japanese yen"},KES:{symbol:"Ksh",name:"Kenyan Shilling",symbol_native:"Ksh",decimal_digits:2,rounding:0,code:"KES",name_plural:"Kenyan shillings"},KHR:{symbol:"KHR",name:"Cambodian Riel",symbol_native:"á",decimal_digits:2,rounding:0,code:"KHR",name_plural:"Cambodian riels"},KMF:{symbol:"CF",name:"Comorian Franc",symbol_native:"FC",decimal_digits:0,rounding:0,code:"KMF",name_plural:"Comorian francs"},KRW:{symbol:"â©",name:"South Korean Won",symbol_native:"â©",decimal_digits:0,rounding:0,code:"KRW",name_plural:"South Korean won"},KWD:{symbol:"KD",name:"Kuwaiti Dinar",symbol_native:"Ø¯.Ù.â",decimal_digits:3,rounding:0,code:"KWD",name_plural:"Kuwaiti dinars"},KZT:{symbol:"KZT",name:"Kazakhstani Tenge",symbol_native:"ÑÒ£Ð³.",decimal_digits:2,rounding:0,code:"KZT",name_plural:"Kazakhstani tenges"},LBP:{symbol:"L.L.",name:"Lebanese Pound",symbol_native:"Ù.Ù.â",decimal_digits:0,rounding:0,code:"LBP",name_plural:"Lebanese pounds"},LKR:{symbol:"SLRs",name:"Sri Lankan Rupee",symbol_native:"SL Re",decimal_digits:2,rounding:0,code:"LKR",name_plural:"Sri Lankan rupees"},LTL:{symbol:"Lt",name:"Lithuanian Litas",symbol_native:"Lt",decimal_digits:2,rounding:0,code:"LTL",name_plural:"Lithuanian litai"},LVL:{symbol:"Ls",name:"Latvian Lats",symbol_native:"Ls",decimal_digits:2,rounding:0,code:"LVL",name_plural:"Latvian lati"},LYD:{symbol:"LD",name:"Libyan Dinar",symbol_native:"Ø¯.Ù.â",decimal_digits:3,rounding:0,code:"LYD",name_plural:"Libyan dinars"},MAD:{symbol:"MAD",name:"Moroccan Dirham",symbol_native:"Ø¯.Ù.â",decimal_digits:2,rounding:0,code:"MAD",name_plural:"Moroccan dirhams"},MDL:{symbol:"MDL",name:"Moldovan Leu",symbol_native:"MDL",decimal_digits:2,rounding:0,code:"MDL",name_plural:"Moldovan lei"},MGA:{symbol:"MGA",name:"Malagasy Ariary",symbol_native:"MGA",decimal_digits:0,rounding:0,code:"MGA",name_plural:"Malagasy Ariaries"},MKD:{symbol:"MKD",name:"Macedonian Denar",symbol_native:"MKD",decimal_digits:2,rounding:0,code:"MKD",name_plural:"Macedonian denari"},MMK:{symbol:"MMK",name:"Myanma Kyat",symbol_native:"K",decimal_digits:0,rounding:0,code:"MMK",name_plural:"Myanma kyats"},MOP:{symbol:"MOP$",name:"Macanese Pataca",symbol_native:"MOP$",decimal_digits:2,rounding:0,code:"MOP",name_plural:"Macanese patacas"},MUR:{symbol:"MURs",name:"Mauritian Rupee",symbol_native:"MURs",decimal_digits:0,rounding:0,code:"MUR",name_plural:"Mauritian rupees"},MXN:{symbol:"MX$",name:"Mexican Peso",symbol_native:"$",decimal_digits:2,rounding:0,code:"MXN",name_plural:"Mexican pesos"},MYR:{symbol:"RM",name:"Malaysian Ringgit",symbol_native:"RM",decimal_digits:2,rounding:0,code:"MYR",name_plural:"Malaysian ringgits"},MZN:{symbol:"MTn",name:"Mozambican Metical",symbol_native:"MTn",decimal_digits:2,rounding:0,code:"MZN",name_plural:"Mozambican meticals"},NAD:{symbol:"N$",name:"Namibian Dollar",symbol_native:"N$",decimal_digits:2,rounding:0,code:"NAD",name_plural:"Namibian dollars"},NGN:{symbol:"â¦",name:"Nigerian Naira",symbol_native:"â¦",decimal_digits:2,rounding:0,code:"NGN",name_plural:"Nigerian nairas"},NIO:{symbol:"C$",name:"Nicaraguan CÃ³rdoba",symbol_native:"C$",decimal_digits:2,rounding:0,code:"NIO",name_plural:"Nicaraguan cÃ³rdobas"},NOK:{symbol:"Nkr",name:"Norwegian Krone",symbol_native:"kr",decimal_digits:2,rounding:0,code:"NOK",name_plural:"Norwegian kroner"},NPR:{symbol:"NPRs",name:"Nepalese Rupee",symbol_native:"à¤¨à¥à¤°à¥",decimal_digits:2,rounding:0,code:"NPR",name_plural:"Nepalese rupees"},NZD:{symbol:"NZ$",name:"New Zealand Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"NZD",name_plural:"New Zealand dollars"},OMR:{symbol:"OMR",name:"Omani Rial",symbol_native:"Ø±.Ø¹.â",decimal_digits:3,rounding:0,code:"OMR",name_plural:"Omani rials"},PAB:{symbol:"B/.",name:"Panamanian Balboa",symbol_native:"B/.",decimal_digits:2,rounding:0,code:"PAB",name_plural:"Panamanian balboas"},PEN:{symbol:"S/.",name:"Peruvian Nuevo Sol",symbol_native:"S/.",decimal_digits:2,rounding:0,code:"PEN",name_plural:"Peruvian nuevos soles"},PHP:{symbol:"â±",name:"Philippine Peso",symbol_native:"â±",decimal_digits:2,rounding:0,code:"PHP",name_plural:"Philippine pesos"},PKR:{symbol:"PKRs",name:"Pakistani Rupee",symbol_native:"â¨",decimal_digits:0,rounding:0,code:"PKR",name_plural:"Pakistani rupees"},PLN:{symbol:"zÅ",name:"Polish Zloty",symbol_native:"zÅ",decimal_digits:2,rounding:0,code:"PLN",name_plural:"Polish zlotys"},PYG:{symbol:"â²",name:"Paraguayan Guarani",symbol_native:"â²",decimal_digits:0,rounding:0,code:"PYG",name_plural:"Paraguayan guaranis"},QAR:{symbol:"QR",name:"Qatari Rial",symbol_native:"Ø±.Ù.â",decimal_digits:2,rounding:0,code:"QAR",name_plural:"Qatari rials"},RON:{symbol:"RON",name:"Romanian Leu",symbol_native:"RON",decimal_digits:2,rounding:0,code:"RON",name_plural:"Romanian lei"},RSD:{symbol:"din.",name:"Serbian Dinar",symbol_native:"Ð´Ð¸Ð½.",decimal_digits:0,rounding:0,code:"RSD",name_plural:"Serbian dinars"},RUB:{symbol:"RUB",name:"Russian Ruble",symbol_native:"â½.",decimal_digits:2,rounding:0,code:"RUB",name_plural:"Russian rubles"},RWF:{symbol:"RWF",name:"Rwandan Franc",symbol_native:"FR",decimal_digits:0,rounding:0,code:"RWF",name_plural:"Rwandan francs"},SAR:{symbol:"SR",name:"Saudi Riyal",symbol_native:"Ø±.Ø³.â",decimal_digits:2,rounding:0,code:"SAR",name_plural:"Saudi riyals"},SDG:{symbol:"SDG",name:"Sudanese Pound",symbol_native:"SDG",decimal_digits:2,rounding:0,code:"SDG",name_plural:"Sudanese pounds"},SEK:{symbol:"Skr",name:"Swedish Krona",symbol_native:"kr",decimal_digits:2,rounding:0,code:"SEK",name_plural:"Swedish kronor"},SGD:{symbol:"S$",name:"Singapore Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"SGD",name_plural:"Singapore dollars"},SOS:{symbol:"Ssh",name:"Somali Shilling",symbol_native:"Ssh",decimal_digits:0,rounding:0,code:"SOS",name_plural:"Somali shillings"},SYP:{symbol:"SYÂ£",name:"Syrian Pound",symbol_native:"Ù.Ø³.â",decimal_digits:0,rounding:0,code:"SYP",name_plural:"Syrian pounds"},THB:{symbol:"à¸¿",name:"Thai Baht",symbol_native:"à¸¿",decimal_digits:2,rounding:0,code:"THB",name_plural:"Thai baht"},TND:{symbol:"DT",name:"Tunisian Dinar",symbol_native:"Ø¯.Øª.â",decimal_digits:3,rounding:0,code:"TND",name_plural:"Tunisian dinars"},TOP:{symbol:"T$",name:"Tongan PaÊ»anga",symbol_native:"T$",decimal_digits:2,rounding:0,code:"TOP",name_plural:"Tongan paÊ»anga"},TRY:{symbol:"TL",name:"Turkish Lira",symbol_native:"TL",decimal_digits:2,rounding:0,code:"TRY",name_plural:"Turkish Lira"},TTD:{symbol:"TT$",name:"Trinidad and Tobago Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"TTD",name_plural:"Trinidad and Tobago dollars"},TWD:{symbol:"NT$",name:"New Taiwan Dollar",symbol_native:"NT$",decimal_digits:2,rounding:0,code:"TWD",name_plural:"New Taiwan dollars"},TZS:{symbol:"TSh",name:"Tanzanian Shilling",symbol_native:"TSh",decimal_digits:0,rounding:0,code:"TZS",name_plural:"Tanzanian shillings"},UAH:{symbol:"â´",name:"Ukrainian Hryvnia",symbol_native:"â´",decimal_digits:2,rounding:0,code:"UAH",name_plural:"Ukrainian hryvnias"},UGX:{symbol:"USh",name:"Ugandan Shilling",symbol_native:"USh",decimal_digits:0,rounding:0,code:"UGX",name_plural:"Ugandan shillings"},UYU:{symbol:"$U",name:"Uruguayan Peso",symbol_native:"$",decimal_digits:2,rounding:0,code:"UYU",name_plural:"Uruguayan pesos"},UZS:{symbol:"UZS",name:"Uzbekistan Som",symbol_native:"UZS",decimal_digits:0,rounding:0,code:"UZS",name_plural:"Uzbekistan som"},VEF:{symbol:"Bs.F.",name:"Venezuelan BolÃ­var",symbol_native:"Bs.F.",decimal_digits:2,rounding:0,code:"VEF",name_plural:"Venezuelan bolÃ­vars"},VND:{symbol:"â«",name:"Vietnamese Dong",symbol_native:"â«",decimal_digits:0,rounding:0,code:"VND",name_plural:"Vietnamese dong"},XAF:{symbol:"FCFA",name:"CFA Franc BEAC",symbol_native:"FCFA",decimal_digits:0,rounding:0,code:"XAF",name_plural:"CFA francs BEAC"},XOF:{symbol:"CFA",name:"CFA Franc BCEAO",symbol_native:"CFA",decimal_digits:0,rounding:0,code:"XOF",name_plural:"CFA francs BCEAO"},YER:{symbol:"YR",name:"Yemeni Rial",symbol_native:"Ø±.Ù.â",decimal_digits:0,rounding:0,code:"YER",name_plural:"Yemeni rials"},ZAR:{symbol:"R",name:"South African Rand",symbol_native:"R",decimal_digits:2,rounding:0,code:"ZAR",name_plural:"South African rand"},ZMK:{symbol:"ZK",name:"Zambian Kwacha",symbol_native:"ZK",decimal_digits:0,rounding:0,code:"ZMK",name_plural:"Zambian kwachas"},ZWL:{symbol:"ZWL$",name:"Zimbabwean Dollar",symbol_native:"ZWL$",decimal_digits:0,rounding:0,code:"ZWL",name_plural:"Zimbabwean Dollar"}};function Ba(i,e,n){const r=i.slice();return r[9]=e[n],r}function Ka(i){let e,n=i[9]+"",r,s,u=wt[i[9]].symbol+"",c,g;return{c(){e=C("option"),r=Me(n),s=Me(" ("),c=Me(u),g=Me(`)
          `),this.h()},l(y){e=O(y,"OPTION",{});var m=H(e);r=Re(m,n),s=Re(m," ("),c=Re(m,u),g=Re(m,`)
          `),m.forEach(b),this.h()},h(){e.__value=i[9],at(e,e.__value)},m(y,m){de(y,e,m),h(e,r),h(e,s),h(e,c),h(e,g)},p:bt,d(y){y&&b(e)}}}function Ws(i){let e,n,r,s="Add New Trip",u,c,g,y="Trip Name",m,v,k,L,j,Q="Trip Currency",W,z,S,D,G,A="Trip Start",se,pe,ae,oe,ve,ke,Fe="Trip End",_e,Ee,Te,qe,Le,ne,Ce="Add Trip",P,K,$="Cancel",fe,w,X,Pe=Ge(Object.keys(wt)),he=[];for(let le=0;le<Pe.length;le+=1)he[le]=Ka(Ba(i,Pe,le));function je(le){i[7](le)}let ge={format:"yyyy-MM-dd",closeOnSelection:!0,id:"tripStart"};i[2]!==void 0&&(ge.value=i[2]),pe=new Yn({props:ge}),tn.push(()=>Ln(pe,"value",je));function be(le){i[8](le)}let Y={format:"yyyy-MM-dd",closeOnSelection:!0,min:i[2],id:"tripEnd"};return i[3]!==void 0&&(Y.value=i[3]),Ee=new Yn({props:Y}),tn.push(()=>Ln(Ee,"value",be)),{c(){e=C("div"),n=C("form"),r=C("h1"),r.textContent=s,u=re(),c=C("div"),g=C("label"),g.textContent=y,m=re(),v=C("input"),k=re(),L=C("div"),j=C("label"),j.textContent=Q,W=re(),z=C("select");for(let le=0;le<he.length;le+=1)he[le].c();S=re(),D=C("div"),G=C("label"),G.textContent=A,se=re(),Ut(pe.$$.fragment),oe=re(),ve=C("div"),ke=C("label"),ke.textContent=Fe,_e=re(),Ut(Ee.$$.fragment),qe=re(),Le=C("div"),ne=C("button"),ne.textContent=Ce,P=re(),K=C("a"),K.textContent=$,this.h()},l(le){e=O(le,"DIV",{class:!0});var we=H(e);n=O(we,"FORM",{});var ze=H(n);r=O(ze,"H1",{"data-svelte-h":!0}),We(r)!=="svelte-1x3twms"&&(r.textContent=s),u=ie(ze),c=O(ze,"DIV",{class:!0});var Ye=H(c);g=O(Ye,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),We(g)!=="svelte-1y8z10u"&&(g.textContent=y),m=ie(Ye),v=O(Ye,"INPUT",{id:!0,class:!0,type:!0}),Ye.forEach(b),k=ie(ze),L=O(ze,"DIV",{class:!0});var F=H(L);j=O(F,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),We(j)!=="svelte-1fzihue"&&(j.textContent=Q),W=ie(F),z=O(F,"SELECT",{id:!0,class:!0});var Se=H(z);for(let ut=0;ut<he.length;ut+=1)he[ut].l(Se);Se.forEach(b),F.forEach(b),S=ie(ze),D=O(ze,"DIV",{class:!0});var ye=H(D);G=O(ye,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),We(G)!=="svelte-4n7gli"&&(G.textContent=A),se=ie(ye),Vt(pe.$$.fragment,ye),ye.forEach(b),oe=ie(ze),ve=O(ze,"DIV",{class:!0});var ue=H(ve);ke=O(ue,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),We(ke)!=="svelte-1dn7717"&&(ke.textContent=Fe),_e=ie(ue),Vt(Ee.$$.fragment,ue),ue.forEach(b),qe=ie(ze),Le=O(ze,"DIV",{class:!0});var xe=H(Le);ne=O(xe,"BUTTON",{class:!0,"data-svelte-h":!0}),We(ne)!=="svelte-ik7jo4"&&(ne.textContent=Ce),P=ie(xe),K=O(xe,"A",{href:!0,class:!0,"data-svelte-h":!0}),We(K)!=="svelte-wj5j6d"&&(K.textContent=$),xe.forEach(b),ze.forEach(b),we.forEach(b),this.h()},h(){p(g,"for","tripName"),p(g,"class","form-label"),p(v,"id","tripName"),p(v,"class","form-control"),p(v,"type","text"),p(c,"class","mb-3"),p(j,"for","tripCurrency"),p(j,"class","form-label"),p(z,"id","tripCurrency"),p(z,"class","form-control"),i[1]===void 0&&Un(()=>i[6].call(z)),p(L,"class","mb-3"),p(G,"for","tripStart"),p(G,"class","form-label"),p(D,"class","mb-3"),p(ke,"for","tripStart"),p(ke,"class","form-label"),p(ve,"class","mb-3"),p(ne,"class","btn btn-primary"),p(K,"href","#/"),p(K,"class","btn btn-outline-primary"),p(Le,"class","gap-3 d-grid d-md-block"),p(e,"class","w-100")},m(le,we){de(le,e,we),h(e,n),h(n,r),h(n,u),h(n,c),h(c,g),h(c,m),h(c,v),at(v,i[0]),h(n,k),h(n,L),h(L,j),h(L,W),h(L,z);for(let ze=0;ze<he.length;ze+=1)he[ze]&&he[ze].m(z,null);Jt(z,i[1],!0),h(n,S),h(n,D),h(D,G),h(D,se),qt(pe,D,null),h(n,oe),h(n,ve),h(ve,ke),h(ve,_e),qt(Ee,ve,null),h(n,qe),h(n,Le),h(Le,ne),h(Le,P),h(Le,K),fe=!0,w||(X=[Ze(v,"input",i[5]),Ze(z,"change",i[6]),Ze(ne,"click",i[4])],w=!0)},p(le,[we]){if(we&1&&v.value!==le[0]&&at(v,le[0]),we&0){Pe=Ge(Object.keys(wt));let F;for(F=0;F<Pe.length;F+=1){const Se=Ba(le,Pe,F);he[F]?he[F].p(Se,we):(he[F]=Ka(Se),he[F].c(),he[F].m(z,null))}for(;F<he.length;F+=1)he[F].d(1);he.length=Pe.length}we&2&&Jt(z,le[1]);const ze={};!ae&&we&4&&(ae=!0,ze.value=le[2],In(()=>ae=!1)),pe.$set(ze);const Ye={};we&4&&(Ye.min=le[2]),!Te&&we&8&&(Te=!0,Ye.value=le[3],In(()=>Te=!1)),Ee.$set(Ye)},i(le){fe||(rt(pe.$$.fragment,le),rt(Ee.$$.fragment,le),fe=!0)},o(le){st(pe.$$.fragment,le),st(Ee.$$.fragment,le),fe=!1},d(le){le&&b(e),Mt(he,le),zt(pe),zt(Ee),w=!1,kn(X)}}}function Gs(i,e,n){let r="My Trip",s="GBP",u=new Date,c=new Date;async function g(){try{const L=await Kt.trips.add({name:r,defaultCurrency:s,startDate:u,startDateString:u.toDateString(),endDate:c,endDateString:c.toDateString()});window.location.href="#/trip/"+L}catch{window.location.href="#/"}}function y(){r=this.value,n(0,r)}function m(){s=Gn(this),n(1,s)}function v(L){u=L,n(2,u)}function k(L){c=L,n(3,c)}return[r,s,u,c,g,y,m,v,k]}class Ys extends on{constructor(e){super(),sn(this,e,Gs,Ws,nn,{})}}/*!
  * PhotoSwipe Lightbox 5.4.4 - https://photoswipe.com
  * (c) 2024 Dmytro Semenov
  */function sr(i,e,n){const r=document.createElement(e);return i&&(r.className=i),n&&n.appendChild(r),r}function Zs(i,e,n){let r=`translate3d(${i}px,0px,0)`;return n!==void 0&&(r+=` scale3d(${n},${n},1)`),r}function Ii(i,e,n){i.style.width=typeof e=="number"?`${e}px`:e,i.style.height=typeof n=="number"?`${n}px`:n}const un={IDLE:"idle",LOADING:"loading",LOADED:"loaded",ERROR:"error"};function Js(i){return"button"in i&&i.button===1||i.ctrlKey||i.metaKey||i.altKey||i.shiftKey}function lr(i,e,n=document){let r=[];if(i instanceof Element)r=[i];else if(i instanceof NodeList||Array.isArray(i))r=Array.from(i);else{const s=typeof i=="string"?i:e;s&&(r=Array.from(n.querySelectorAll(s)))}return r}function Qs(i){return typeof i=="function"&&i.prototype&&i.prototype.goTo}function Fa(){return!!(navigator.vendor&&navigator.vendor.match(/apple/i))}class $s{constructor(e,n){this.type=e,this.defaultPrevented=!1,n&&Object.assign(this,n)}preventDefault(){this.defaultPrevented=!0}}class Xs{constructor(){this._listeners={},this._filters={},this.pswp=void 0,this.options=void 0}addFilter(e,n,r=100){var s,u,c;this._filters[e]||(this._filters[e]=[]),(s=this._filters[e])===null||s===void 0||s.push({fn:n,priority:r}),(u=this._filters[e])===null||u===void 0||u.sort((g,y)=>g.priority-y.priority),(c=this.pswp)===null||c===void 0||c.addFilter(e,n,r)}removeFilter(e,n){this._filters[e]&&(this._filters[e]=this._filters[e].filter(r=>r.fn!==n)),this.pswp&&this.pswp.removeFilter(e,n)}applyFilters(e,...n){var r;return(r=this._filters[e])===null||r===void 0||r.forEach(s=>{n[0]=s.fn.apply(this,n)}),n[0]}on(e,n){var r,s;this._listeners[e]||(this._listeners[e]=[]),(r=this._listeners[e])===null||r===void 0||r.push(n),(s=this.pswp)===null||s===void 0||s.on(e,n)}off(e,n){var r;this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter(s=>n!==s)),(r=this.pswp)===null||r===void 0||r.off(e,n)}dispatch(e,n){var r;if(this.pswp)return this.pswp.dispatch(e,n);const s=new $s(e,n);return(r=this._listeners[e])===null||r===void 0||r.forEach(u=>{u.call(this,s)}),s}}class el{constructor(e,n){if(this.element=sr("pswp__img pswp__img--placeholder",e?"img":"div",n),e){const r=this.element;r.decoding="async",r.alt="",r.src=e,r.setAttribute("role","presentation")}this.element.setAttribute("aria-hidden","true")}setDisplayedSize(e,n){this.element&&(this.element.tagName==="IMG"?(Ii(this.element,250,"auto"),this.element.style.transformOrigin="0 0",this.element.style.transform=Zs(0,0,e/250)):Ii(this.element,e,n))}destroy(){var e;(e=this.element)!==null&&e!==void 0&&e.parentNode&&this.element.remove(),this.element=null}}class tl{constructor(e,n,r){this.instance=n,this.data=e,this.index=r,this.element=void 0,this.placeholder=void 0,this.slide=void 0,this.displayedImageWidth=0,this.displayedImageHeight=0,this.width=Number(this.data.w)||Number(this.data.width)||0,this.height=Number(this.data.h)||Number(this.data.height)||0,this.isAttached=!1,this.hasSlide=!1,this.isDecoding=!1,this.state=un.IDLE,this.data.type?this.type=this.data.type:this.data.src?this.type="image":this.type="html",this.instance.dispatch("contentInit",{content:this})}removePlaceholder(){this.placeholder&&!this.keepPlaceholder()&&setTimeout(()=>{this.placeholder&&(this.placeholder.destroy(),this.placeholder=void 0)},1e3)}load(e,n){if(this.slide&&this.usePlaceholder())if(this.placeholder){const r=this.placeholder.element;r&&!r.parentElement&&this.slide.container.prepend(r)}else{const r=this.instance.applyFilters("placeholderSrc",this.data.msrc&&this.slide.isFirstSlide?this.data.msrc:!1,this);this.placeholder=new el(r,this.slide.container)}this.element&&!n||this.instance.dispatch("contentLoad",{content:this,isLazy:e}).defaultPrevented||(this.isImageContent()?(this.element=sr("pswp__img","img"),this.displayedImageWidth&&this.loadImage(e)):(this.element=sr("pswp__content","div"),this.element.innerHTML=this.data.html||""),n&&this.slide&&this.slide.updateContentSize(!0))}loadImage(e){var n,r;if(!this.isImageContent()||!this.element||this.instance.dispatch("contentLoadImage",{content:this,isLazy:e}).defaultPrevented)return;const s=this.element;this.updateSrcsetSizes(),this.data.srcset&&(s.srcset=this.data.srcset),s.src=(n=this.data.src)!==null&&n!==void 0?n:"",s.alt=(r=this.data.alt)!==null&&r!==void 0?r:"",this.state=un.LOADING,s.complete?this.onLoaded():(s.onload=()=>{this.onLoaded()},s.onerror=()=>{this.onError()})}setSlide(e){this.slide=e,this.hasSlide=!0,this.instance=e.pswp}onLoaded(){this.state=un.LOADED,this.slide&&this.element&&(this.instance.dispatch("loadComplete",{slide:this.slide,content:this}),this.slide.isActive&&this.slide.heavyAppended&&!this.element.parentNode&&(this.append(),this.slide.updateContentSize(!0)),(this.state===un.LOADED||this.state===un.ERROR)&&this.removePlaceholder())}onError(){this.state=un.ERROR,this.slide&&(this.displayError(),this.instance.dispatch("loadComplete",{slide:this.slide,isError:!0,content:this}),this.instance.dispatch("loadError",{slide:this.slide,content:this}))}isLoading(){return this.instance.applyFilters("isContentLoading",this.state===un.LOADING,this)}isError(){return this.state===un.ERROR}isImageContent(){return this.type==="image"}setDisplayedSize(e,n){if(this.element&&(this.placeholder&&this.placeholder.setDisplayedSize(e,n),!this.instance.dispatch("contentResize",{content:this,width:e,height:n}).defaultPrevented&&(Ii(this.element,e,n),this.isImageContent()&&!this.isError()))){const r=!this.displayedImageWidth&&e;this.displayedImageWidth=e,this.displayedImageHeight=n,r?this.loadImage(!1):this.updateSrcsetSizes(),this.slide&&this.instance.dispatch("imageSizeChange",{slide:this.slide,width:e,height:n,content:this})}}isZoomable(){return this.instance.applyFilters("isContentZoomable",this.isImageContent()&&this.state!==un.ERROR,this)}updateSrcsetSizes(){if(!this.isImageContent()||!this.element||!this.data.srcset)return;const e=this.element,n=this.instance.applyFilters("srcsetSizesWidth",this.displayedImageWidth,this);(!e.dataset.largestUsedSize||n>parseInt(e.dataset.largestUsedSize,10))&&(e.sizes=n+"px",e.dataset.largestUsedSize=String(n))}usePlaceholder(){return this.instance.applyFilters("useContentPlaceholder",this.isImageContent(),this)}lazyLoad(){this.instance.dispatch("contentLazyLoad",{content:this}).defaultPrevented||this.load(!0)}keepPlaceholder(){return this.instance.applyFilters("isKeepingPlaceholder",this.isLoading(),this)}destroy(){this.hasSlide=!1,this.slide=void 0,!this.instance.dispatch("contentDestroy",{content:this}).defaultPrevented&&(this.remove(),this.placeholder&&(this.placeholder.destroy(),this.placeholder=void 0),this.isImageContent()&&this.element&&(this.element.onload=null,this.element.onerror=null,this.element=void 0))}displayError(){if(this.slide){var e,n;let r=sr("pswp__error-msg","div");r.innerText=(e=(n=this.instance.options)===null||n===void 0?void 0:n.errorMsg)!==null&&e!==void 0?e:"",r=this.instance.applyFilters("contentErrorElement",r,this),this.element=sr("pswp__content pswp__error-msg-container","div"),this.element.appendChild(r),this.slide.container.innerText="",this.slide.container.appendChild(this.element),this.slide.updateContentSize(!0),this.removePlaceholder()}}append(){if(this.isAttached||!this.element)return;if(this.isAttached=!0,this.state===un.ERROR){this.displayError();return}if(this.instance.dispatch("contentAppend",{content:this}).defaultPrevented)return;const e="decode"in this.element;this.isImageContent()?e&&this.slide&&(!this.slide.isActive||Fa())?(this.isDecoding=!0,this.element.decode().catch(()=>{}).finally(()=>{this.isDecoding=!1,this.appendImage()})):this.appendImage():this.slide&&!this.element.parentNode&&this.slide.container.appendChild(this.element)}activate(){this.instance.dispatch("contentActivate",{content:this}).defaultPrevented||!this.slide||(this.isImageContent()&&this.isDecoding&&!Fa()?this.appendImage():this.isError()&&this.load(!1,!0),this.slide.holderElement&&this.slide.holderElement.setAttribute("aria-hidden","false"))}deactivate(){this.instance.dispatch("contentDeactivate",{content:this}),this.slide&&this.slide.holderElement&&this.slide.holderElement.setAttribute("aria-hidden","true")}remove(){this.isAttached=!1,!this.instance.dispatch("contentRemove",{content:this}).defaultPrevented&&(this.element&&this.element.parentNode&&this.element.remove(),this.placeholder&&this.placeholder.element&&this.placeholder.element.remove())}appendImage(){this.isAttached&&(this.instance.dispatch("contentAppendImage",{content:this}).defaultPrevented||(this.slide&&this.element&&!this.element.parentNode&&this.slide.container.appendChild(this.element),(this.state===un.LOADED||this.state===un.ERROR)&&this.removePlaceholder()))}}function nl(i,e){if(i.getViewportSizeFn){const n=i.getViewportSizeFn(i,e);if(n)return n}return{x:document.documentElement.clientWidth,y:window.innerHeight}}function Ir(i,e,n,r,s){let u=0;if(e.paddingFn)u=e.paddingFn(n,r,s)[i];else if(e.padding)u=e.padding[i];else{const c="padding"+i[0].toUpperCase()+i.slice(1);e[c]&&(u=e[c])}return Number(u)||0}function rl(i,e,n,r){return{x:e.x-Ir("left",i,e,n,r)-Ir("right",i,e,n,r),y:e.y-Ir("top",i,e,n,r)-Ir("bottom",i,e,n,r)}}const ja=4e3;class il{constructor(e,n,r,s){this.pswp=s,this.options=e,this.itemData=n,this.index=r,this.panAreaSize=null,this.elementSize=null,this.fit=1,this.fill=1,this.vFill=1,this.initial=1,this.secondary=1,this.max=1,this.min=1}update(e,n,r){const s={x:e,y:n};this.elementSize=s,this.panAreaSize=r;const u=r.x/s.x,c=r.y/s.y;this.fit=Math.min(1,u<c?u:c),this.fill=Math.min(1,u>c?u:c),this.vFill=Math.min(1,c),this.initial=this._getInitial(),this.secondary=this._getSecondary(),this.max=Math.max(this.initial,this.secondary,this._getMax()),this.min=Math.min(this.fit,this.initial,this.secondary),this.pswp&&this.pswp.dispatch("zoomLevelsUpdate",{zoomLevels:this,slideData:this.itemData})}_parseZoomLevelOption(e){const n=e+"ZoomLevel",r=this.options[n];if(r)return typeof r=="function"?r(this):r==="fill"?this.fill:r==="fit"?this.fit:Number(r)}_getSecondary(){let e=this._parseZoomLevelOption("secondary");return e||(e=Math.min(1,this.fit*3),this.elementSize&&e*this.elementSize.x>ja&&(e=ja/this.elementSize.x),e)}_getInitial(){return this._parseZoomLevelOption("initial")||this.fit}_getMax(){return this._parseZoomLevelOption("max")||Math.max(1,this.fit*4)}}function Wo(i,e,n){const r=e.createContentFromData(i,n);let s;const{options:u}=e;if(u){s=new il(u,i,-1);let c;e.pswp?c=e.pswp.viewportSize:c=nl(u,e);const g=rl(u,c,i,n);s.update(r.width,r.height,g)}return r.lazyLoad(),s&&r.setDisplayedSize(Math.ceil(r.width*s.initial),Math.ceil(r.height*s.initial)),r}function al(i,e){const n=e.getItemData(i);if(!e.dispatch("lazyLoadSlide",{index:i,itemData:n}).defaultPrevented)return Wo(n,e,i)}class ol extends Xs{getNumItems(){var e;let n=0;const r=(e=this.options)===null||e===void 0?void 0:e.dataSource;r&&"length"in r?n=r.length:r&&"gallery"in r&&(r.items||(r.items=this._getGalleryDOMElements(r.gallery)),r.items&&(n=r.items.length));const s=this.dispatch("numItems",{dataSource:r,numItems:n});return this.applyFilters("numItems",s.numItems,r)}createContentFromData(e,n){return new tl(e,this,n)}getItemData(e){var n;const r=(n=this.options)===null||n===void 0?void 0:n.dataSource;let s={};Array.isArray(r)?s=r[e]:r&&"gallery"in r&&(r.items||(r.items=this._getGalleryDOMElements(r.gallery)),s=r.items[e]);let u=s;u instanceof Element&&(u=this._domElementToItemData(u));const c=this.dispatch("itemData",{itemData:u||{},index:e});return this.applyFilters("itemData",c.itemData,e)}_getGalleryDOMElements(e){var n,r;return(n=this.options)!==null&&n!==void 0&&n.children||(r=this.options)!==null&&r!==void 0&&r.childSelector?lr(this.options.children,this.options.childSelector,e)||[]:[e]}_domElementToItemData(e){const n={element:e},r=e.tagName==="A"?e:e.querySelector("a");if(r){n.src=r.dataset.pswpSrc||r.href,r.dataset.pswpSrcset&&(n.srcset=r.dataset.pswpSrcset),n.width=r.dataset.pswpWidth?parseInt(r.dataset.pswpWidth,10):0,n.height=r.dataset.pswpHeight?parseInt(r.dataset.pswpHeight,10):0,n.w=n.width,n.h=n.height,r.dataset.pswpType&&(n.type=r.dataset.pswpType);const u=e.querySelector("img");if(u){var s;n.msrc=u.currentSrc||u.src,n.alt=(s=u.getAttribute("alt"))!==null&&s!==void 0?s:""}(r.dataset.pswpCropped||r.dataset.cropped)&&(n.thumbCropped=!0)}return this.applyFilters("domItemData",n,e,r)}lazyLoadData(e,n){return Wo(e,this,n)}}class sl extends ol{constructor(e){super(),this.options=e||{},this._uid=0,this.shouldOpen=!1,this._preloadedContent=void 0,this.onThumbnailsClick=this.onThumbnailsClick.bind(this)}init(){lr(this.options.gallery,this.options.gallerySelector).forEach(e=>{e.addEventListener("click",this.onThumbnailsClick,!1)})}onThumbnailsClick(e){if(Js(e)||window.pswp)return;let n={x:e.clientX,y:e.clientY};!n.x&&!n.y&&(n=null);let r=this.getClickedIndex(e);r=this.applyFilters("clickedIndex",r,e,this);const s={gallery:e.currentTarget};r>=0&&(e.preventDefault(),this.loadAndOpen(r,s,n))}getClickedIndex(e){if(this.options.getClickedIndexFn)return this.options.getClickedIndexFn.call(this,e);const n=e.target,s=lr(this.options.children,this.options.childSelector,e.currentTarget).findIndex(u=>u===n||u.contains(n));return s!==-1?s:this.options.children||this.options.childSelector?-1:0}loadAndOpen(e,n,r){if(window.pswp||!this.options)return!1;if(!n&&this.options.gallery&&this.options.children){const s=lr(this.options.gallery);s[0]&&(n={gallery:s[0]})}return this.options.index=e,this.options.initialPointerPos=r,this.shouldOpen=!0,this.preload(e,n),!0}preload(e,n){const{options:r}=this;n&&(r.dataSource=n);const s=[],u=typeof r.pswpModule;if(Qs(r.pswpModule))s.push(Promise.resolve(r.pswpModule));else{if(u==="string")throw new Error("pswpModule as string is no longer supported");if(u==="function")s.push(r.pswpModule());else throw new Error("pswpModule is not valid")}typeof r.openPromise=="function"&&s.push(r.openPromise()),r.preloadFirstSlide!==!1&&e>=0&&(this._preloadedContent=al(e,this));const c=++this._uid;Promise.all(s).then(g=>{if(this.shouldOpen){const y=g[0];this._openPhotoswipe(y,c)}})}_openPhotoswipe(e,n){if(n!==this._uid&&this.shouldOpen||(this.shouldOpen=!1,window.pswp))return;const r=typeof e=="object"?new e.default(this.options):new e(this.options);this.pswp=r,window.pswp=r,Object.keys(this._listeners).forEach(s=>{var u;(u=this._listeners[s])===null||u===void 0||u.forEach(c=>{r.on(s,c)})}),Object.keys(this._filters).forEach(s=>{var u;(u=this._filters[s])===null||u===void 0||u.forEach(c=>{r.addFilter(s,c.fn,c.priority)})}),this._preloadedContent&&(r.contentLoader.addToCache(this._preloadedContent),this._preloadedContent=void 0),r.on("destroy",()=>{this.pswp=void 0,delete window.pswp}),r.init()}destroy(){var e;(e=this.pswp)===null||e===void 0||e.destroy(),this.shouldOpen=!1,this._listeners={},lr(this.options.gallery,this.options.gallerySelector).forEach(n=>{n.removeEventListener("click",this.onThumbnailsClick,!1)})}}function Ua(i,e,n){const r=i.slice();return r[9]=e[n],r}function Va(i,e,n){const r=i.slice();return r[12]=e[n],r}function Di(i){const e=i.slice(),n=Array.from(new Set(e[2].map(r=>r.currency)));return e[8]=n,e}function qa(i){let e,n,r=i[0].name+"",s,u,c,g,y,m,v,k,L,j,Q='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash3" viewBox="0 0 16 16"><path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5M11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47M8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5"></path></svg>',W,z,S=i[0].startDate.toDateString()+"",D,G,A=i[0].endDate.toDateString()+"",se,pe,ae,oe,ve="Default currency: ",ke,Fe=i[0].defaultCurrency+"",_e,Ee,Te=wt[i[0].defaultCurrency].symbol+"",qe,Le,ne,Ce,P,K,$,fe,w,X,Pe,he,je,ge,be,Y="Receipts:",le,we,ze,Ye,F=i[2]&&za(Di(i));return{c(){e=C("h1"),n=C("span"),s=Me(r),u=re(),c=C("span"),g=C("a"),y=Yt("svg"),m=Yt("path"),v=Yt("path"),L=re(),j=C("button"),j.innerHTML=Q,W=re(),z=C("h4"),D=Me(S),G=Me(" - "),se=Me(A),pe=re(),ae=C("p"),oe=C("em"),oe.textContent=ve,ke=C("strong"),_e=Me(Fe),Ee=Me(" ("),qe=Me(Te),Le=Me(")"),ne=re(),Ce=C("a"),P=Me("+ Add Receipt"),$=re(),fe=C("a"),w=Yt("svg"),X=Yt("path"),Pe=Yt("path"),he=Me(`
        Export/Print`),ge=re(),be=C("h5"),be.textContent=Y,le=re(),F&&F.c(),we=Ft(),this.h()},l(Se){e=O(Se,"H1",{class:!0});var ye=H(e);n=O(ye,"SPAN",{});var ue=H(n);s=Re(ue,r),ue.forEach(b),u=ie(ye),c=O(ye,"SPAN",{});var xe=H(c);g=O(xe,"A",{href:!0,class:!0,title:!0});var ut=H(g);y=Zt(ut,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,class:!0,viewBox:!0});var Dt=H(y);m=Zt(Dt,"path",{d:!0}),H(m).forEach(b),v=Zt(Dt,"path",{"fill-rule":!0,d:!0}),H(v).forEach(b),Dt.forEach(b),ut.forEach(b),L=ie(xe),j=O(xe,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),We(j)!=="svelte-3nbotr"&&(j.innerHTML=Q),xe.forEach(b),ye.forEach(b),W=ie(Se),z=O(Se,"H4",{});var St=H(z);D=Re(St,S),G=Re(St," - "),se=Re(St,A),St.forEach(b),pe=ie(Se),ae=O(Se,"P",{});var dt=H(ae);oe=O(dt,"EM",{"data-svelte-h":!0}),We(oe)!=="svelte-sg39u8"&&(oe.textContent=ve),ke=O(dt,"STRONG",{});var kt=H(ke);_e=Re(kt,Fe),Ee=Re(kt," ("),qe=Re(kt,Te),Le=Re(kt,")"),kt.forEach(b),dt.forEach(b),ne=ie(Se),Ce=O(Se,"A",{class:!0,href:!0});var Pt=H(Ce);P=Re(Pt,"+ Add Receipt"),Pt.forEach(b),$=ie(Se),fe=O(Se,"A",{href:!0,target:!0,class:!0});var ht=H(fe);w=Zt(ht,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,class:!0,viewBox:!0});var Ct=H(w);X=Zt(Ct,"path",{d:!0}),H(X).forEach(b),Pe=Zt(Ct,"path",{d:!0}),H(Pe).forEach(b),Ct.forEach(b),he=Re(ht,`
        Export/Print`),ht.forEach(b),ge=ie(Se),be=O(Se,"H5",{class:!0,"data-svelte-h":!0}),We(be)!=="svelte-7onek5"&&(be.textContent=Y),le=ie(Se),F&&F.l(Se),we=Ft(),this.h()},h(){p(m,"d","M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"),p(v,"fill-rule","evenodd"),p(v,"d","M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"),p(y,"xmlns","http://www.w3.org/2000/svg"),p(y,"width","16"),p(y,"height","16"),p(y,"fill","currentColor"),p(y,"class","bi bi-pencil-square"),p(y,"viewBox","0 0 16 16"),p(g,"href",k="#/update/"+i[0].id),p(g,"class","btn btn-outline-secondary"),p(g,"title","Update Trip"),p(j,"class","btn btn-outline-secondary hover-red"),p(j,"title","Delete Trip"),p(e,"class","d-flex justify-content-between"),p(Ce,"class","btn btn-primary"),p(Ce,"href",K="#/addreceipt/"+i[0].id),p(X,"d","M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"),p(Pe,"d","M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z"),p(w,"xmlns","http://www.w3.org/2000/svg"),p(w,"width","16"),p(w,"height","16"),p(w,"fill","currentColor"),p(w,"class","bi bi-download"),p(w,"viewBox","0 0 16 16"),p(fe,"href",je="#/print/"+i[0].id),p(fe,"target","_blank"),p(fe,"class","btn btn-outline-primary"),p(be,"class","mt-3")},m(Se,ye){de(Se,e,ye),h(e,n),h(n,s),h(e,u),h(e,c),h(c,g),h(g,y),h(y,m),h(y,v),h(c,L),h(c,j),de(Se,W,ye),de(Se,z,ye),h(z,D),h(z,G),h(z,se),de(Se,pe,ye),de(Se,ae,ye),h(ae,oe),h(ae,ke),h(ke,_e),h(ke,Ee),h(ke,qe),h(ke,Le),de(Se,ne,ye),de(Se,Ce,ye),h(Ce,P),de(Se,$,ye),de(Se,fe,ye),h(fe,w),h(w,X),h(w,Pe),h(fe,he),de(Se,ge,ye),de(Se,be,ye),de(Se,le,ye),F&&F.m(Se,ye),de(Se,we,ye),ze||(Ye=Ze(j,"click",function(){qo(i[3](i[0]))&&i[3](i[0]).apply(this,arguments)}),ze=!0)},p(Se,ye){i=Se,ye&1&&r!==(r=i[0].name+"")&&Xe(s,r),ye&1&&k!==(k="#/update/"+i[0].id)&&p(g,"href",k),ye&1&&S!==(S=i[0].startDate.toDateString()+"")&&Xe(D,S),ye&1&&A!==(A=i[0].endDate.toDateString()+"")&&Xe(se,A),ye&1&&Fe!==(Fe=i[0].defaultCurrency+"")&&Xe(_e,Fe),ye&1&&Te!==(Te=wt[i[0].defaultCurrency].symbol+"")&&Xe(qe,Te),ye&1&&K!==(K="#/addreceipt/"+i[0].id)&&p(Ce,"href",K),ye&1&&je!==(je="#/print/"+i[0].id)&&p(fe,"href",je),i[2]?F?F.p(Di(i),ye):(F=za(Di(i)),F.c(),F.m(we.parentNode,we)):F&&(F.d(1),F=null)},d(Se){Se&&(b(e),b(W),b(z),b(pe),b(ae),b(ne),b(Ce),b($),b(fe),b(ge),b(be),b(le),b(we)),F&&F.d(Se),ze=!1,Ye()}}}function za(i){let e,n,r,s="<tr><th>Description</th> <th>Date</th> <th>Type</th> <th>Total</th> <th></th></tr>",u,c,g=[],y=new Map,m,v,k,L,j,Q,W,z,S="<strong>Total</strong>",D,G,A,se,pe,ae,oe=Ge(i[2]);const ve=_e=>_e[12].id;for(let _e=0;_e<oe.length;_e+=1){let Ee=Va(i,oe,_e),Te=ve(Ee);y.set(Te,g[_e]=Ha(Te,Ee))}let ke=Ge(i[8]),Fe=[];for(let _e=0;_e<ke.length;_e+=1)Fe[_e]=xa(Ua(i,ke,_e));return{c(){e=C("div"),n=C("table"),r=C("thead"),r.innerHTML=s,u=re(),c=C("tbody");for(let _e=0;_e<g.length;_e+=1)g[_e].c();m=re(),v=C("tfoot"),k=C("tr"),L=C("td"),j=re(),Q=C("td"),W=re(),z=C("td"),z.innerHTML=S,D=re(),G=C("td");for(let _e=0;_e<Fe.length;_e+=1)Fe[_e].c();A=re(),se=C("td"),this.h()},l(_e){e=O(_e,"DIV",{class:!0});var Ee=H(e);n=O(Ee,"TABLE",{class:!0});var Te=H(n);r=O(Te,"THEAD",{"data-svelte-h":!0}),We(r)!=="svelte-1vpbmbw"&&(r.innerHTML=s),u=ie(Te),c=O(Te,"TBODY",{});var qe=H(c);for(let P=0;P<g.length;P+=1)g[P].l(qe);qe.forEach(b),m=ie(Te),v=O(Te,"TFOOT",{class:!0});var Le=H(v);k=O(Le,"TR",{});var ne=H(k);L=O(ne,"TD",{}),H(L).forEach(b),j=ie(ne),Q=O(ne,"TD",{}),H(Q).forEach(b),W=ie(ne),z=O(ne,"TD",{class:!0,"data-svelte-h":!0}),We(z)!=="svelte-14afisz"&&(z.innerHTML=S),D=ie(ne),G=O(ne,"TD",{});var Ce=H(G);for(let P=0;P<Fe.length;P+=1)Fe[P].l(Ce);Ce.forEach(b),A=ie(ne),se=O(ne,"TD",{}),H(se).forEach(b),ne.forEach(b),Le.forEach(b),Te.forEach(b),Ee.forEach(b),this.h()},h(){p(z,"class","text-end"),p(v,"class","table-group-divider"),p(n,"class","table table-striped table-hover"),p(e,"class","table-responsive")},m(_e,Ee){de(_e,e,Ee),h(e,n),h(n,r),h(n,u),h(n,c);for(let Te=0;Te<g.length;Te+=1)g[Te]&&g[Te].m(c,null);h(n,m),h(n,v),h(v,k),h(k,L),h(k,j),h(k,Q),h(k,W),h(k,z),h(k,D),h(k,G);for(let Te=0;Te<Fe.length;Te+=1)Fe[Te]&&Fe[Te].m(G,null);h(k,A),h(k,se),pe||(ae=ws(i[5].call(null,c)),pe=!0)},p(_e,Ee){if(Ee&20&&(oe=Ge(_e[2]),g=jr(g,Ee,ve,1,_e,oe,y,c,Fr,Ha,null,Va)),Ee&4){ke=Ge(_e[8]);let Te;for(Te=0;Te<ke.length;Te+=1){const qe=Ua(_e,ke,Te);Fe[Te]?Fe[Te].p(qe,Ee):(Fe[Te]=xa(qe),Fe[Te].c(),Fe[Te].m(G,null))}for(;Te<Fe.length;Te+=1)Fe[Te].d(1);Fe.length=ke.length}},d(_e){_e&&b(e);for(let Ee=0;Ee<g.length;Ee+=1)g[Ee].d();Mt(Fe,_e),pe=!1,ae()}}}function Ha(i,e){let n,r,s,u,c,g,y,m,v,k,L,j=e[12].description+"",Q,W,z,S=e[12].receiptDateString+"",D,G,A,se=e[12].receiptType+"",pe,ae,oe,ve=wt[e[12].currency].symbol+"",ke,Fe,_e=e[12].total.toFixed(2)+"",Ee,Te,qe,Le,ne,Ce,P,K,$,fe,w='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash3" viewBox="0 0 16 16"><path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5M11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47M8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5"></path></svg>',X,Pe,he;return{key:i,first:null,c(){n=C("tr"),r=C("td"),s=C("a"),u=Yt("svg"),c=Yt("path"),g=Yt("path"),k=re(),L=C("span"),Q=Me(j),W=re(),z=C("td"),D=Me(S),G=re(),A=C("td"),pe=Me(se),ae=re(),oe=C("td"),ke=Me(ve),Fe=re(),Ee=Me(_e),Te=re(),qe=C("td"),Le=C("a"),ne=Yt("svg"),Ce=Yt("path"),P=Yt("path"),$=re(),fe=C("button"),fe.innerHTML=w,X=re(),this.h()},l(je){n=O(je,"TR",{});var ge=H(n);r=O(ge,"TD",{class:!0});var be=H(r);s=O(be,"A",{class:!0,href:!0,"data-pswp-width":!0,"data-pswp-height":!0,target:!0,rel:!0,title:!0,style:!0});var Y=H(s);u=Zt(Y,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,class:!0,viewBox:!0});var le=H(u);c=Zt(le,"path",{d:!0}),H(c).forEach(b),g=Zt(le,"path",{d:!0}),H(g).forEach(b),le.forEach(b),Y.forEach(b),k=ie(be),L=O(be,"SPAN",{});var we=H(L);Q=Re(we,j),we.forEach(b),be.forEach(b),W=ie(ge),z=O(ge,"TD",{});var ze=H(z);D=Re(ze,S),ze.forEach(b),G=ie(ge),A=O(ge,"TD",{});var Ye=H(A);pe=Re(Ye,se),Ye.forEach(b),ae=ie(ge),oe=O(ge,"TD",{class:!0});var F=H(oe);ke=Re(F,ve),Fe=ie(F),Ee=Re(F,_e),F.forEach(b),Te=ie(ge),qe=O(ge,"TD",{});var Se=H(qe);Le=O(Se,"A",{class:!0,href:!0,title:!0});var ye=H(Le);ne=Zt(ye,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,class:!0,viewBox:!0});var ue=H(ne);Ce=Zt(ue,"path",{d:!0}),H(Ce).forEach(b),P=Zt(ue,"path",{"fill-rule":!0,d:!0}),H(P).forEach(b),ue.forEach(b),ye.forEach(b),$=ie(Se),fe=O(Se,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),We(fe)!=="svelte-rhumqt"&&(fe.innerHTML=w),Se.forEach(b),X=ie(ge),ge.forEach(b),this.h()},h(){p(c,"d","M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0"),p(g,"d","M2.002 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2zm12 1a1 1 0 0 1 1 1v6.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12V3a1 1 0 0 1 1-1z"),p(u,"xmlns","http://www.w3.org/2000/svg"),p(u,"width","16"),p(u,"height","16"),p(u,"fill","currentColor"),p(u,"class","bi bi-image"),p(u,"viewBox","0 0 16 16"),p(s,"class","btn btn-outline-primary btn-sm rImages"),p(s,"href",y=URL.createObjectURL(e[12].imageData)),p(s,"data-pswp-width",m=e[12].imageWidth),p(s,"data-pswp-height",v=e[12].imageHeight),p(s,"target","_blank"),p(s,"rel","noreferrer"),p(s,"title","View Image"),Oi(s,"border","none"),p(r,"class","receiptDesc"),p(oe,"class","text-nowrap"),p(Ce,"d","M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"),p(P,"fill-rule","evenodd"),p(P,"d","M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"),p(ne,"xmlns","http://www.w3.org/2000/svg"),p(ne,"width","16"),p(ne,"height","16"),p(ne,"fill","currentColor"),p(ne,"class","bi bi-pencil-square"),p(ne,"viewBox","0 0 16 16"),p(Le,"class","btn btn-outline-dark btn-sm"),p(Le,"href",K="#/editreceipt/"+e[12].id),p(Le,"title","Edit Receipt"),p(fe,"class","btn btn-outline-dark btn-sm hover-red"),p(fe,"title","Delete Receipt"),this.first=n},m(je,ge){de(je,n,ge),h(n,r),h(r,s),h(s,u),h(u,c),h(u,g),h(r,k),h(r,L),h(L,Q),h(n,W),h(n,z),h(z,D),h(n,G),h(n,A),h(A,pe),h(n,ae),h(n,oe),h(oe,ke),h(oe,Fe),h(oe,Ee),h(n,Te),h(n,qe),h(qe,Le),h(Le,ne),h(ne,Ce),h(ne,P),h(qe,$),h(qe,fe),h(n,X),Pe||(he=Ze(fe,"click",function(){qo(e[4](e[12]))&&e[4](e[12]).apply(this,arguments)}),Pe=!0)},p(je,ge){e=je,ge&4&&y!==(y=URL.createObjectURL(e[12].imageData))&&p(s,"href",y),ge&4&&m!==(m=e[12].imageWidth)&&p(s,"data-pswp-width",m),ge&4&&v!==(v=e[12].imageHeight)&&p(s,"data-pswp-height",v),ge&4&&j!==(j=e[12].description+"")&&Xe(Q,j),ge&4&&S!==(S=e[12].receiptDateString+"")&&Xe(D,S),ge&4&&se!==(se=e[12].receiptType+"")&&Xe(pe,se),ge&4&&ve!==(ve=wt[e[12].currency].symbol+"")&&Xe(ke,ve),ge&4&&_e!==(_e=e[12].total.toFixed(2)+"")&&Xe(Ee,_e),ge&4&&K!==(K="#/editreceipt/"+e[12].id)&&p(Le,"href",K)},d(je){je&&b(n),Pe=!1,he()}}}function xa(i){let e=wt[i[9]].symbol+"",n,r,s=i[2].filter(y).reduce(Wa,0).toFixed(2)+"",u,c,g;function y(...m){return i[7](i[9],...m)}return{c(){n=Me(e),r=re(),u=Me(s),c=re(),g=C("br")},l(m){n=Re(m,e),r=ie(m),u=Re(m,s),c=ie(m),g=O(m,"BR",{})},m(m,v){de(m,n,v),de(m,r,v),de(m,u,v),de(m,c,v),de(m,g,v)},p(m,v){i=m,v&4&&e!==(e=wt[i[9]].symbol+"")&&Xe(n,e),v&4&&s!==(s=i[2].filter(y).reduce(Wa,0).toFixed(2)+"")&&Xe(u,s)},d(m){m&&(b(n),b(r),b(u),b(c),b(g))}}}function ll(i){let e,n=i[0]&&qa(i);return{c(){e=C("div"),n&&n.c(),this.h()},l(r){e=O(r,"DIV",{class:!0});var s=H(e);n&&n.l(s),s.forEach(b),this.h()},h(){p(e,"class","w-100")},m(r,s){de(r,e,s),n&&n.m(e,null)},p(r,[s]){r[0]?n?n.p(r,s):(n=qa(r),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},i:bt,o:bt,d(r){r&&b(e),n&&n.d()}}}const Wa=(i,e)=>i+e.total;function ul(i,e,n){let r,s=bt,u=()=>(s(),s=ur(y,j=>n(2,r=j)),y);i.$$.on_destroy.push(()=>s());let{tripId:c}=e,g,y;c>-1&&Kt.trips.get(c).then(j=>{n(0,g=j),u(n(1,y=zr(async()=>await Kt.receipts.where({tripId:c}).reverse().sortBy("receiptDate"))))});async function m(j){if(confirm(`Are you sure you want to delete trip "${j.name}"? It will also delete all receipts for this trip`)){let W=await Kt.trips.where("id").equals(j.id).delete();console.log(`Deleted ${W} trip(s)`),W=await Kt.receipts.where("tripId").equals(j.id).delete(),console.log(`Deleted ${W} receipts(s)`),window.location.href="#/"}}async function v(j){if(confirm(`Are you sure you want to delete receipt for "${j.description}"?`)){let W=await Kt.receipts.where("id").equals(j.id).delete();console.log(`Deleted ${W} receipts(s)`)}}function k(j){new sl({gallery:".rImages",pswpModule:()=>Ds(()=>import("../chunks/photoswipe.esm.GXRgw7eJ.js"),[],import.meta.url)}).init()}const L=(j,Q)=>Q.currency==j;return i.$$set=j=>{"tripId"in j&&n(6,c=j.tripId)},[g,y,r,m,v,k,c,L]}class cl extends on{constructor(e){super(),sn(this,e,ul,ll,nn,{tripId:6})}}function Ga(i,e,n){const r=i.slice();return r[8]=e[n],r}function Ya(i,e,n){const r=i.slice();return r[12]=e[n],r}function Si(i){const e=i.slice(),n=Array.from(new Set(e[2].filter(function(...s){return i[5](e[8],...s)}).map(r=>r.currency)));return e[11]=n,e}function Za(i){let e=[],n=new Map,r,s=Ge(i[1]);const u=c=>c[8].id;for(let c=0;c<s.length;c+=1){let g=Ga(i,s,c),y=u(g);n.set(y,e[c]=$a(y,g))}return{c(){for(let c=0;c<e.length;c+=1)e[c].c();r=Ft()},l(c){for(let g=0;g<e.length;g+=1)e[g].l(c);r=Ft()},m(c,g){for(let y=0;y<e.length;y+=1)e[y]&&e[y].m(c,g);de(c,r,g)},p(c,g){g&7&&(s=Ge(c[1]),e=jr(e,g,u,1,c,s,n,r.parentNode,Fr,$a,r,Ga))},d(c){c&&b(r);for(let g=0;g<e.length;g+=1)e[g].d(c)}}}function Ja(i){let e,n=Ge(i[11]),r=[];for(let s=0;s<n.length;s+=1)r[s]=Qa(Ya(i,n,s));return{c(){e=C("small");for(let s=0;s<r.length;s+=1)r[s].c()},l(s){e=O(s,"SMALL",{});var u=H(e);for(let c=0;c<r.length;c+=1)r[c].l(u);u.forEach(b)},m(s,u){de(s,e,u);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(e,null)},p(s,u){if(u&6){n=Ge(s[11]);let c;for(c=0;c<n.length;c+=1){const g=Ya(s,n,c);r[c]?r[c].p(g,u):(r[c]=Qa(g),r[c].c(),r[c].m(e,null))}for(;c<r.length;c+=1)r[c].d(1);r.length=n.length}},d(s){s&&b(e),Mt(r,s)}}}function Qa(i){let e=wt[i[12]].symbol+"",n,r,s=i[2].filter(y).filter(m).reduce(Xa,0).toFixed(2)+"",u,c,g;function y(...v){return i[6](i[8],...v)}function m(...v){return i[7](i[12],...v)}return{c(){n=Me(e),r=re(),u=Me(s),c=re(),g=C("br")},l(v){n=Re(v,e),r=ie(v),u=Re(v,s),c=ie(v),g=O(v,"BR",{})},m(v,k){de(v,n,k),de(v,r,k),de(v,u,k),de(v,c,k),de(v,g,k)},p(v,k){i=v,k&6&&e!==(e=wt[i[12]].symbol+"")&&Xe(n,e),k&6&&s!==(s=i[2].filter(y).filter(m).reduce(Xa,0).toFixed(2)+"")&&Xe(u,s)},d(v){v&&(b(n),b(r),b(u),b(c),b(g))}}}function $a(i,e){let n,r,s,u=e[8].name+"",c,g,y,m,v=e[8].startDateString+"",k,L,j=e[8].endDateString+"",Q,W,z,S,D=e[2]&&Ja(Si(e));return{key:i,first:null,c(){n=C("a"),r=C("div"),s=C("strong"),c=Me(u),g=re(),D&&D.c(),y=re(),m=C("div"),k=Me(v),L=Me(" - "),Q=Me(j),W=re(),this.h()},l(G){n=O(G,"A",{href:!0,class:!0,"aria-current":!0,"data-trip-id":!0});var A=H(n);r=O(A,"DIV",{class:!0});var se=H(r);s=O(se,"STRONG",{class:!0});var pe=H(s);c=Re(pe,u),pe.forEach(b),g=ie(se),D&&D.l(se),se.forEach(b),y=ie(A),m=O(A,"DIV",{class:!0});var ae=H(m);k=Re(ae,v),L=Re(ae," - "),Q=Re(ae,j),ae.forEach(b),W=ie(A),A.forEach(b),this.h()},h(){p(s,"class","mb-1"),p(r,"class","d-flex w-100 align-items-center justify-content-between"),p(m,"class","col-10 mb-1 small"),p(n,"href",z="#/trip/"+e[8].id),p(n,"class","list-group-item list-group-item-action py-3 lh-sm me-1"),p(n,"aria-current","false"),p(n,"data-trip-id",S=e[8].id),Tt(n,"active",e[0]==e[8].id),this.first=n},m(G,A){de(G,n,A),h(n,r),h(r,s),h(s,c),h(r,g),D&&D.m(r,null),h(n,y),h(n,m),h(m,k),h(m,L),h(m,Q),h(n,W)},p(G,A){e=G,A&2&&u!==(u=e[8].name+"")&&Xe(c,u),e[2]?D?D.p(Si(e),A):(D=Ja(Si(e)),D.c(),D.m(r,null)):D&&(D.d(1),D=null),A&2&&v!==(v=e[8].startDateString+"")&&Xe(k,v),A&2&&j!==(j=e[8].endDateString+"")&&Xe(Q,j),A&2&&z!==(z="#/trip/"+e[8].id)&&p(n,"href",z),A&2&&S!==(S=e[8].id)&&p(n,"data-trip-id",S),A&3&&Tt(n,"active",e[0]==e[8].id)},d(G){G&&b(n),D&&D.d()}}}function fl(i){let e,n=i[1]&&Za(i);return{c(){n&&n.c(),e=Ft()},l(r){n&&n.l(r),e=Ft()},m(r,s){n&&n.m(r,s),de(r,e,s)},p(r,[s]){r[1]?n?n.p(r,s):(n=Za(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:bt,o:bt,d(r){r&&b(e),n&&n.d(r)}}}const Xa=(i,e)=>i+e.total;function dl(i,e,n){let r,s,{tripId:u}=e,c=zr(()=>Kt.trips.toCollection().reverse().sortBy("endDate"));cr(i,c,k=>n(1,r=k));let g=zr(()=>Kt.receipts.toArray());cr(i,g,k=>n(2,s=k));const y=(k,L)=>L.tripId==k.id,m=(k,L)=>L.tripId==k.id,v=(k,L)=>L.currency==k;return i.$$set=k=>{"tripId"in k&&n(0,u=k.tripId)},[u,r,s,c,g,y,m,v]}class hl extends on{constructor(e){super(),sn(this,e,dl,fl,nn,{tripId:0})}}function eo(i,e,n){const r=i.slice();return r[9]=e[n],r}function to(i){let e,n,r="Update Trip",s,u,c,g="Trip Name",y,m,v,k,L,j="Trip Currency",Q,W,z,S,D,G="Trip Start",A,se,pe,ae,oe,ve,ke="Trip End",Fe,_e,Ee,Te,qe,Le,ne="Update Trip",Ce,P,K,$,fe,w,X,Pe=Ge(Object.keys(wt)),he=[];for(let le=0;le<Pe.length;le+=1)he[le]=no(eo(i,Pe,le));function je(le){i[7](le)}let ge={format:"yyyy-MM-dd",closeOnSelection:!0,id:"tripStart"};i[1]!==void 0&&(ge.value=i[1]),se=new Yn({props:ge}),tn.push(()=>Ln(se,"value",je));function be(le){i[8](le)}let Y={format:"yyyy-MM-dd",closeOnSelection:!0,min:i[1],id:"tripEnd"};return i[2]!==void 0&&(Y.value=i[2]),_e=new Yn({props:Y}),tn.push(()=>Ln(_e,"value",be)),{c(){e=C("form"),n=C("h1"),n.textContent=r,s=re(),u=C("div"),c=C("label"),c.textContent=g,y=re(),m=C("input"),v=re(),k=C("div"),L=C("label"),L.textContent=j,Q=re(),W=C("select");for(let le=0;le<he.length;le+=1)he[le].c();z=re(),S=C("div"),D=C("label"),D.textContent=G,A=re(),Ut(se.$$.fragment),ae=re(),oe=C("div"),ve=C("label"),ve.textContent=ke,Fe=re(),Ut(_e.$$.fragment),Te=re(),qe=C("div"),Le=C("button"),Le.textContent=ne,Ce=re(),P=C("a"),K=Me("Cancel"),this.h()},l(le){e=O(le,"FORM",{});var we=H(e);n=O(we,"H1",{"data-svelte-h":!0}),We(n)!=="svelte-9352dq"&&(n.textContent=r),s=ie(we),u=O(we,"DIV",{class:!0});var ze=H(u);c=O(ze,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),We(c)!=="svelte-1y8z10u"&&(c.textContent=g),y=ie(ze),m=O(ze,"INPUT",{id:!0,class:!0,type:!0}),ze.forEach(b),v=ie(we),k=O(we,"DIV",{class:!0});var Ye=H(k);L=O(Ye,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),We(L)!=="svelte-1fzihue"&&(L.textContent=j),Q=ie(Ye),W=O(Ye,"SELECT",{id:!0,class:!0});var F=H(W);for(let ut=0;ut<he.length;ut+=1)he[ut].l(F);F.forEach(b),Ye.forEach(b),z=ie(we),S=O(we,"DIV",{class:!0});var Se=H(S);D=O(Se,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),We(D)!=="svelte-4n7gli"&&(D.textContent=G),A=ie(Se),Vt(se.$$.fragment,Se),Se.forEach(b),ae=ie(we),oe=O(we,"DIV",{class:!0});var ye=H(oe);ve=O(ye,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),We(ve)!=="svelte-1dn7717"&&(ve.textContent=ke),Fe=ie(ye),Vt(_e.$$.fragment,ye),ye.forEach(b),Te=ie(we),qe=O(we,"DIV",{class:!0});var ue=H(qe);Le=O(ue,"BUTTON",{class:!0,"data-svelte-h":!0}),We(Le)!=="svelte-bsugmm"&&(Le.textContent=ne),Ce=ie(ue),P=O(ue,"A",{href:!0,class:!0});var xe=H(P);K=Re(xe,"Cancel"),xe.forEach(b),ue.forEach(b),we.forEach(b),this.h()},h(){p(c,"for","tripName"),p(c,"class","form-label"),p(m,"id","tripName"),p(m,"class","form-control"),p(m,"type","text"),p(u,"class","mb-3"),p(L,"for","tripCurrency"),p(L,"class","form-label"),p(W,"id","tripCurrency"),p(W,"class","form-control"),i[0].defaultCurrency===void 0&&Un(()=>i[6].call(W)),p(k,"class","mb-3"),p(D,"for","tripStart"),p(D,"class","form-label"),p(S,"class","mb-3"),p(ve,"for","tripStart"),p(ve,"class","form-label"),p(oe,"class","mb-3"),p(Le,"class","btn btn-primary"),p(P,"href",$="#/trip/"+i[0].id),p(P,"class","btn btn-outline-primary"),p(qe,"class","gap-3 d-grid d-md-block")},m(le,we){de(le,e,we),h(e,n),h(e,s),h(e,u),h(u,c),h(u,y),h(u,m),at(m,i[0].name),h(e,v),h(e,k),h(k,L),h(k,Q),h(k,W);for(let ze=0;ze<he.length;ze+=1)he[ze]&&he[ze].m(W,null);Jt(W,i[0].defaultCurrency,!0),h(e,z),h(e,S),h(S,D),h(S,A),qt(se,S,null),h(e,ae),h(e,oe),h(oe,ve),h(oe,Fe),qt(_e,oe,null),h(e,Te),h(e,qe),h(qe,Le),h(qe,Ce),h(qe,P),h(P,K),fe=!0,w||(X=[Ze(m,"input",i[5]),Ze(W,"change",i[6]),Ze(Le,"click",i[3])],w=!0)},p(le,we){if(we&1&&m.value!==le[0].name&&at(m,le[0].name),we&0){Pe=Ge(Object.keys(wt));let F;for(F=0;F<Pe.length;F+=1){const Se=eo(le,Pe,F);he[F]?he[F].p(Se,we):(he[F]=no(Se),he[F].c(),he[F].m(W,null))}for(;F<he.length;F+=1)he[F].d(1);he.length=Pe.length}we&1&&Jt(W,le[0].defaultCurrency);const ze={};!pe&&we&2&&(pe=!0,ze.value=le[1],In(()=>pe=!1)),se.$set(ze);const Ye={};we&2&&(Ye.min=le[1]),!Ee&&we&4&&(Ee=!0,Ye.value=le[2],In(()=>Ee=!1)),_e.$set(Ye),(!fe||we&1&&$!==($="#/trip/"+le[0].id))&&p(P,"href",$)},i(le){fe||(rt(se.$$.fragment,le),rt(_e.$$.fragment,le),fe=!0)},o(le){st(se.$$.fragment,le),st(_e.$$.fragment,le),fe=!1},d(le){le&&b(e),Mt(he,le),zt(se),zt(_e),w=!1,kn(X)}}}function no(i){let e,n=i[9]+"",r,s,u=wt[i[9]].symbol+"",c,g;return{c(){e=C("option"),r=Me(n),s=Me(" ("),c=Me(u),g=Me(`)
          `),this.h()},l(y){e=O(y,"OPTION",{});var m=H(e);r=Re(m,n),s=Re(m," ("),c=Re(m,u),g=Re(m,`)
          `),m.forEach(b),this.h()},h(){e.__value=i[9],at(e,e.__value)},m(y,m){de(y,e,m),h(e,r),h(e,s),h(e,c),h(e,g)},p:bt,d(y){y&&b(e)}}}function pl(i){let e,n,r=i[0]&&to(i);return{c(){e=C("div"),r&&r.c(),this.h()},l(s){e=O(s,"DIV",{class:!0});var u=H(e);r&&r.l(u),u.forEach(b),this.h()},h(){p(e,"class","w-100")},m(s,u){de(s,e,u),r&&r.m(e,null),n=!0},p(s,[u]){s[0]?r?(r.p(s,u),u&1&&rt(r,1)):(r=to(s),r.c(),rt(r,1),r.m(e,null)):r&&(Vn(),st(r,1,1,()=>{r=null}),qn())},i(s){n||(rt(r),n=!0)},o(s){st(r),n=!1},d(s){s&&b(e),r&&r.d()}}}function ml(i,e,n){let{tripId:r}=e,s,u,c;r>-1&&Kt.trips.get(r).then(L=>{n(0,s=L),n(1,u=new Date(s.startDateString)),n(2,c=new Date(s.endDateString))});async function g(){try{const L=await Kt.trips.update(s.id,{name:s.name,defaultCurrency:s.defaultCurrency,startDate:u,endDate:c,startDateString:u.toDateString(),endDateString:c.toDateString()});window.location.href="#/trip/"+s.id}catch{window.location.href="#/"}}function y(){s.name=this.value,n(0,s)}function m(){s.defaultCurrency=Gn(this),n(0,s)}function v(L){u=L,n(1,u)}function k(L){c=L,n(2,c)}return i.$$set=L=>{"tripId"in L&&n(4,r=L.tripId)},[s,u,c,g,r,y,m,v,k]}class gl extends on{constructor(e){super(),sn(this,e,ml,pl,nn,{tripId:4})}}/*!
 * currency.js - v2.0.4
 * http://scurker.github.io/currency.js
 *
 * Copyright (c) 2021 Jason Wilson
 * Released under MIT license
 */var vl={symbol:"$",separator:",",decimal:".",errorOnInvalid:!1,precision:2,pattern:"!#",negativePattern:"-!#",format:wl,fromCents:!1},Go=function(e){return Math.round(e)},Mi=function(e){return Math.pow(10,e)},_l=function(e,n){return Go(e/n)*n},yl=/(\d)(?=(\d{3})+\b)/g,bl=/(\d)(?=(\d\d)+\d\b)/g;function mn(i,e){var n=this;if(!(n instanceof mn))return new mn(i,e);var r=Object.assign({},vl,e),s=Mi(r.precision),u=Nr(i,r);n.intValue=u,n.value=u/s,r.increment=r.increment||1/s,r.useVedic?r.groups=bl:r.groups=yl,this.s=r,this.p=s}function Nr(i,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=0,s=e.decimal,u=e.errorOnInvalid,c=e.precision,g=e.fromCents,y=Mi(c),m=typeof i=="number",v=i instanceof mn;if(v&&g)return i.intValue;if(m||v)r=v?i.value:i;else if(typeof i=="string"){var k=new RegExp("[^-\\d"+s+"]","g"),L=new RegExp("\\"+s,"g");r=i.replace(/\((.*)\)/,"-$1").replace(k,"").replace(L,"."),r=r||0}else{if(u)throw Error("Invalid Input");r=0}return g||(r*=y,r=r.toFixed(4)),n?Go(r):r}function wl(i,e){var n=e.pattern,r=e.negativePattern,s=e.symbol,u=e.separator,c=e.decimal,g=e.groups,y=(""+i).replace(/^-/,"").split("."),m=y[0],v=y[1];return(i.value>=0?n:r).replace("!",s).replace("#",m.replace(g,"$1"+u)+(v?c+v:""))}mn.prototype={add:function(e){var n=this.intValue,r=this.s,s=this.p;return mn((n+=Nr(e,r))/(r.fromCents?1:s),r)},subtract:function(e){var n=this.intValue,r=this.s,s=this.p;return mn((n-=Nr(e,r))/(r.fromCents?1:s),r)},multiply:function(e){var n=this.intValue,r=this.s;return mn((n*=e)/(r.fromCents?1:Mi(r.precision)),r)},divide:function(e){var n=this.intValue,r=this.s;return mn(n/=Nr(e,r,!1),r)},distribute:function(e){for(var n=this.intValue,r=this.p,s=this.s,u=[],c=Math[n>=0?"floor":"ceil"](n/e),g=Math.abs(n-c*e),y=s.fromCents?1:r;e!==0;e--){var m=mn(c/y,s);g-- >0&&(m=m[n>=0?"add":"subtract"](1/y)),u.push(m)}return u},dollars:function(){return~~this.value},cents:function(){var e=this.intValue,n=this.p;return~~(e%n)},format:function(e){var n=this.s;return typeof e=="function"?e(this,n):n.format(this,Object.assign({},n,e))},toString:function(){var e=this.intValue,n=this.p,r=this.s;return _l(e/n,r.increment).toFixed(r.precision)},toJSON:function(){return this.value}};var kl={exports:{}};(function(i){var e=function(n){var r=Object.prototype,s=r.hasOwnProperty,u=Object.defineProperty||function(P,K,$){P[K]=$.value},c,g=typeof Symbol=="function"?Symbol:{},y=g.iterator||"@@iterator",m=g.asyncIterator||"@@asyncIterator",v=g.toStringTag||"@@toStringTag";function k(P,K,$){return Object.defineProperty(P,K,{value:$,enumerable:!0,configurable:!0,writable:!0}),P[K]}try{k({},"")}catch{k=function(K,$,fe){return K[$]=fe}}function L(P,K,$,fe){var w=K&&K.prototype instanceof G?K:G,X=Object.create(w.prototype),Pe=new Le(fe||[]);return u(X,"_invoke",{value:_e(P,$,Pe)}),X}n.wrap=L;function j(P,K,$){try{return{type:"normal",arg:P.call(K,$)}}catch(fe){return{type:"throw",arg:fe}}}var Q="suspendedStart",W="suspendedYield",z="executing",S="completed",D={};function G(){}function A(){}function se(){}var pe={};k(pe,y,function(){return this});var ae=Object.getPrototypeOf,oe=ae&&ae(ae(ne([])));oe&&oe!==r&&s.call(oe,y)&&(pe=oe);var ve=se.prototype=G.prototype=Object.create(pe);A.prototype=se,u(ve,"constructor",{value:se,configurable:!0}),u(se,"constructor",{value:A,configurable:!0}),A.displayName=k(se,v,"GeneratorFunction");function ke(P){["next","throw","return"].forEach(function(K){k(P,K,function($){return this._invoke(K,$)})})}n.isGeneratorFunction=function(P){var K=typeof P=="function"&&P.constructor;return K?K===A||(K.displayName||K.name)==="GeneratorFunction":!1},n.mark=function(P){return Object.setPrototypeOf?Object.setPrototypeOf(P,se):(P.__proto__=se,k(P,v,"GeneratorFunction")),P.prototype=Object.create(ve),P},n.awrap=function(P){return{__await:P}};function Fe(P,K){function $(X,Pe,he,je){var ge=j(P[X],P,Pe);if(ge.type==="throw")je(ge.arg);else{var be=ge.arg,Y=be.value;return Y&&typeof Y=="object"&&s.call(Y,"__await")?K.resolve(Y.__await).then(function(le){$("next",le,he,je)},function(le){$("throw",le,he,je)}):K.resolve(Y).then(function(le){be.value=le,he(be)},function(le){return $("throw",le,he,je)})}}var fe;function w(X,Pe){function he(){return new K(function(je,ge){$(X,Pe,je,ge)})}return fe=fe?fe.then(he,he):he()}u(this,"_invoke",{value:w})}ke(Fe.prototype),k(Fe.prototype,m,function(){return this}),n.AsyncIterator=Fe,n.async=function(P,K,$,fe,w){w===void 0&&(w=Promise);var X=new Fe(L(P,K,$,fe),w);return n.isGeneratorFunction(K)?X:X.next().then(function(Pe){return Pe.done?Pe.value:X.next()})};function _e(P,K,$){var fe=Q;return function(X,Pe){if(fe===z)throw new Error("Generator is already running");if(fe===S){if(X==="throw")throw Pe;return Ce()}for($.method=X,$.arg=Pe;;){var he=$.delegate;if(he){var je=Ee(he,$);if(je){if(je===D)continue;return je}}if($.method==="next")$.sent=$._sent=$.arg;else if($.method==="throw"){if(fe===Q)throw fe=S,$.arg;$.dispatchException($.arg)}else $.method==="return"&&$.abrupt("return",$.arg);fe=z;var ge=j(P,K,$);if(ge.type==="normal"){if(fe=$.done?S:W,ge.arg===D)continue;return{value:ge.arg,done:$.done}}else ge.type==="throw"&&(fe=S,$.method="throw",$.arg=ge.arg)}}}function Ee(P,K){var $=K.method,fe=P.iterator[$];if(fe===c)return K.delegate=null,$==="throw"&&P.iterator.return&&(K.method="return",K.arg=c,Ee(P,K),K.method==="throw")||$!=="return"&&(K.method="throw",K.arg=new TypeError("The iterator does not provide a '"+$+"' method")),D;var w=j(fe,P.iterator,K.arg);if(w.type==="throw")return K.method="throw",K.arg=w.arg,K.delegate=null,D;var X=w.arg;if(!X)return K.method="throw",K.arg=new TypeError("iterator result is not an object"),K.delegate=null,D;if(X.done)K[P.resultName]=X.value,K.next=P.nextLoc,K.method!=="return"&&(K.method="next",K.arg=c);else return X;return K.delegate=null,D}ke(ve),k(ve,v,"Generator"),k(ve,y,function(){return this}),k(ve,"toString",function(){return"[object Generator]"});function Te(P){var K={tryLoc:P[0]};1 in P&&(K.catchLoc=P[1]),2 in P&&(K.finallyLoc=P[2],K.afterLoc=P[3]),this.tryEntries.push(K)}function qe(P){var K=P.completion||{};K.type="normal",delete K.arg,P.completion=K}function Le(P){this.tryEntries=[{tryLoc:"root"}],P.forEach(Te,this),this.reset(!0)}n.keys=function(P){var K=Object(P),$=[];for(var fe in K)$.push(fe);return $.reverse(),function w(){for(;$.length;){var X=$.pop();if(X in K)return w.value=X,w.done=!1,w}return w.done=!0,w}};function ne(P){if(P){var K=P[y];if(K)return K.call(P);if(typeof P.next=="function")return P;if(!isNaN(P.length)){var $=-1,fe=function w(){for(;++$<P.length;)if(s.call(P,$))return w.value=P[$],w.done=!1,w;return w.value=c,w.done=!0,w};return fe.next=fe}}return{next:Ce}}n.values=ne;function Ce(){return{value:c,done:!0}}return Le.prototype={constructor:Le,reset:function(P){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(qe),!P)for(var K in this)K.charAt(0)==="t"&&s.call(this,K)&&!isNaN(+K.slice(1))&&(this[K]=c)},stop:function(){this.done=!0;var P=this.tryEntries[0],K=P.completion;if(K.type==="throw")throw K.arg;return this.rval},dispatchException:function(P){if(this.done)throw P;var K=this;function $(je,ge){return X.type="throw",X.arg=P,K.next=je,ge&&(K.method="next",K.arg=c),!!ge}for(var fe=this.tryEntries.length-1;fe>=0;--fe){var w=this.tryEntries[fe],X=w.completion;if(w.tryLoc==="root")return $("end");if(w.tryLoc<=this.prev){var Pe=s.call(w,"catchLoc"),he=s.call(w,"finallyLoc");if(Pe&&he){if(this.prev<w.catchLoc)return $(w.catchLoc,!0);if(this.prev<w.finallyLoc)return $(w.finallyLoc)}else if(Pe){if(this.prev<w.catchLoc)return $(w.catchLoc,!0)}else if(he){if(this.prev<w.finallyLoc)return $(w.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(P,K){for(var $=this.tryEntries.length-1;$>=0;--$){var fe=this.tryEntries[$];if(fe.tryLoc<=this.prev&&s.call(fe,"finallyLoc")&&this.prev<fe.finallyLoc){var w=fe;break}}w&&(P==="break"||P==="continue")&&w.tryLoc<=K&&K<=w.finallyLoc&&(w=null);var X=w?w.completion:{};return X.type=P,X.arg=K,w?(this.method="next",this.next=w.finallyLoc,D):this.complete(X)},complete:function(P,K){if(P.type==="throw")throw P.arg;return P.type==="break"||P.type==="continue"?this.next=P.arg:P.type==="return"?(this.rval=this.arg=P.arg,this.method="return",this.next="end"):P.type==="normal"&&K&&(this.next=K),D},finish:function(P){for(var K=this.tryEntries.length-1;K>=0;--K){var $=this.tryEntries[K];if($.finallyLoc===P)return this.complete($.completion,$.afterLoc),qe($),D}},catch:function(P){for(var K=this.tryEntries.length-1;K>=0;--K){var $=this.tryEntries[K];if($.tryLoc===P){var fe=$.completion;if(fe.type==="throw"){var w=fe.arg;qe($)}return w}}throw new Error("illegal catch attempt")},delegateYield:function(P,K,$){return this.delegate={iterator:ne(P),resultName:K,nextLoc:$},this.method==="next"&&(this.arg=c),D}},n}(i.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(kl);var Ri=(i,e)=>`${i}-${e}-${Math.random().toString(16).slice(3,8)}`;const El=Ri;let ro=0;var Yo=({id:i,action:e,payload:n={}})=>{let r=i;return typeof r>"u"&&(r=El("Job",ro),ro+=1),{id:r,action:e,payload:n}},Zn={};let Ni=!1;Zn.logging=Ni;Zn.setLogging=i=>{Ni=i};Zn.log=(...i)=>Ni?console.log.apply(void 0,i):null;const Dl=Yo,{log:Lr}=Zn,Sl=Ri;let io=0;var Tl=()=>{const i=Sl("Scheduler",io),e={},n={};let r=[];io+=1;const s=()=>r.length,u=()=>Object.keys(e).length,c=()=>{if(r.length!==0){const k=Object.keys(e);for(let L=0;L<k.length;L+=1)if(typeof n[k[L]]>"u"){r[0](e[k[L]]);break}}},g=(k,L)=>new Promise((j,Q)=>{const W=Dl({action:k,payload:L});r.push(async z=>{r.shift(),n[z.id]=W;try{j(await z[k].apply(void 0,[...L,W.id]))}catch(S){Q(S)}finally{delete n[z.id],c()}}),Lr(`[${i}]: Add ${W.id} to JobQueue`),Lr(`[${i}]: JobQueue length=${r.length}`),c()});return{addWorker:k=>(e[k.id]=k,Lr(`[${i}]: Add ${k.id}`),Lr(`[${i}]: Number of workers=${u()}`),c(),k.id),addJob:async(k,...L)=>{if(u()===0)throw Error(`[${i}]: You need to have at least one worker before adding jobs`);return g(k,L)},terminate:async()=>{Object.keys(e).forEach(async k=>{await e[k].terminate()}),r=[]},getQueueLen:s,getNumWorkers:u}};function Cl(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}function Ol(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var Al=Ol;const Pl=Al;var Il=i=>{const e={};return typeof WorkerGlobalScope<"u"?e.type="webworker":Pl()?e.type="electron":typeof document=="object"?e.type="browser":typeof process=="object"&&typeof Cl=="function"&&(e.type="node"),typeof i>"u"?e:e[i]};const Ll=Il("type")==="browser",Ml=Ll?i=>new URL(i,window.location.href).href:i=>i;var Rl=i=>{const e={...i};return["corePath","workerPath","langPath"].forEach(n=>{i[n]&&(e[n]=Ml(e[n]))}),e},Nl=i=>{const e=[],n=[],r=[],s=[],u=[];return i.blocks&&i.blocks.forEach(c=>{c.paragraphs.forEach(g=>{g.lines.forEach(y=>{y.words.forEach(m=>{m.symbols.forEach(v=>{u.push({...v,page:i,block:c,paragraph:g,line:y,word:m})}),s.push({...m,page:i,block:c,paragraph:g,line:y})}),r.push({...y,page:i,block:c,paragraph:g})}),n.push({...g,page:i,block:c})}),e.push({...c,page:i})}),{...i,blocks:e,paragraphs:n,lines:r,words:s,symbols:u}},Zo={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3};const Bl="tesseract.js",Kl="5.1.0",Fl="Pure Javascript Multilingual OCR",jl="src/index.js",Ul="src/index.d.ts",Vl="dist/tesseract.min.js",ql="dist/tesseract.min.js",zl={start:"node scripts/server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js && rollup -c scripts/rollup.esm.mjs","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json",prepublishOnly:"npm run build",wait:"rimraf dist && wait-on http://localhost:3000/dist/tesseract.min.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:* test:node:all","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser-tpl":"mocha-headless-chrome -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:detect":"npm run test:browser-tpl -- -f ./tests/detect.test.html","test:browser:recognize":"npm run test:browser-tpl -- -f ./tests/recognize.test.html","test:browser:scheduler":"npm run test:browser-tpl -- -f ./tests/scheduler.test.html","test:browser:FS":"npm run test:browser-tpl -- -f ./tests/FS.test.html",lint:"eslint src","lint:fix":"eslint --fix src",postinstall:"opencollective-postinstall || true"},Hl={"./src/worker/node/index.js":"./src/worker/browser/index.js"},xl="",Wl=["jeromewu"],Gl="Apache-2.0",Yl={"@babel/core":"^7.21.4","@babel/eslint-parser":"^7.21.3","@babel/preset-env":"^7.21.4","@rollup/plugin-commonjs":"^24.1.0",acorn:"^8.8.2","babel-loader":"^9.1.2",buffer:"^6.0.3",cors:"^2.8.5",eslint:"^7.32.0","eslint-config-airbnb-base":"^14.2.1","eslint-plugin-import":"^2.27.5","expect.js":"^0.3.1",express:"^4.18.2",mocha:"^10.2.0","mocha-headless-chrome":"^4.0.0","npm-run-all":"^4.1.5",nyc:"^15.1.0",rimraf:"^5.0.0",rollup:"^3.20.7","wait-on":"^7.0.1",webpack:"^5.79.0","webpack-bundle-analyzer":"^4.8.0","webpack-cli":"^5.0.1","webpack-dev-middleware":"^6.0.2","rollup-plugin-sourcemaps":"^0.6.3"},Zl={"bmp-js":"^0.1.0","idb-keyval":"^6.2.0","is-electron":"^2.2.2","is-url":"^1.2.4","node-fetch":"^2.6.9","opencollective-postinstall":"^2.0.3","regenerator-runtime":"^0.13.3","tesseract.js-core":"^5.1.0","wasm-feature-detect":"^1.2.11",zlibjs:"^0.3.1"},Jl={"@rollup/pluginutils":"^5.0.2"},Ql={type:"git",url:"https://github.com/naptha/tesseract.js.git"},$l={url:"https://github.com/naptha/tesseract.js/issues"},Xl="https://github.com/naptha/tesseract.js",eu={type:"opencollective",url:"https://opencollective.com/tesseractjs"},tu={name:Bl,version:Kl,description:Fl,main:jl,types:Ul,unpkg:Vl,jsdelivr:ql,scripts:zl,browser:Hl,author:xl,contributors:Wl,license:Gl,devDependencies:Yl,dependencies:Zl,overrides:Jl,repository:Ql,bugs:$l,homepage:Xl,collective:eu};var nu={workerBlobURL:!0,logger:()=>{}};const ru=tu.version,iu=nu;var au={...iu,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${ru}/dist/worker.min.js`},ou=({workerPath:i,workerBlobURL:e})=>{let n;if(Blob&&URL&&e){const r=new Blob([`importScripts("${i}");`],{type:"application/javascript"});n=new Worker(URL.createObjectURL(r))}else n=new Worker(i);return n},su=i=>{i.terminate()},lu=(i,e)=>{i.onmessage=({data:n})=>{e(n)}},uu=async(i,e)=>{i.postMessage(e)};const Ti=i=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{e(r.result)},r.onerror=({target:{error:{code:s}}})=>{n(Error(`File could not be read! Code=${s}`))},r.readAsArrayBuffer(i)}),Li=async i=>{let e=i;if(typeof i>"u")return"undefined";if(typeof i=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(i)?e=atob(i.split(",")[1]).split("").map(n=>n.charCodeAt(0)):e=await(await fetch(i)).arrayBuffer();else if(typeof HTMLElement<"u"&&i instanceof HTMLElement)i.tagName==="IMG"&&(e=await Li(i.src)),i.tagName==="VIDEO"&&(e=await Li(i.poster)),i.tagName==="CANVAS"&&await new Promise(n=>{i.toBlob(async r=>{e=await Ti(r),n()})});else if(typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas){const n=await i.convertToBlob();e=await Ti(n)}else(i instanceof File||i instanceof Blob)&&(e=await Ti(i));return new Uint8Array(e)};var cu=Li;const fu=au,du=ou,hu=su,pu=lu,mu=uu,gu=cu;var vu={defaultOptions:fu,spawnWorker:du,terminateWorker:hu,onMessage:pu,send:mu,loadImage:gu};const _u=Rl,yu=Nl,pn=Yo,{log:ao}=Zn,bu=Ri,jn=Zo,{defaultOptions:wu,spawnWorker:ku,terminateWorker:Eu,onMessage:Du,loadImage:oo,send:Su}=vu;let so=0;var Jo=async(i="eng",e=jn.LSTM_ONLY,n={},r={})=>{const s=bu("Worker",so),{logger:u,errorHandler:c,...g}=_u({...wu,...n}),y={},m={},v=typeof i=="string"?i.split("+"):i;let k=e,L=r;const j=[jn.DEFAULT,jn.LSTM_ONLY].includes(e)&&!g.legacyCore;let Q,W;const z=new Promise((w,X)=>{W=w,Q=X}),S=w=>{Q(w.message)};let D=ku(g);D.onerror=S,so+=1;const G=(w,X)=>{y[w]=X},A=(w,X)=>{m[w]=X},se=({id:w,action:X,payload:Pe})=>new Promise((he,je)=>{ao(`[${s}]: Start ${w}, action=${X}`);const ge=`${X}-${w}`;G(ge,he),A(ge,je),Su(D,{workerId:s,jobId:w,action:X,payload:Pe})}),pe=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),ae=w=>se(pn({id:w,action:"load",payload:{options:{lstmOnly:j,corePath:g.corePath,logging:g.logging}}})),oe=(w,X,Pe)=>se(pn({id:Pe,action:"FS",payload:{method:"writeFile",args:[w,X]}})),ve=(w,X)=>se(pn({id:X,action:"FS",payload:{method:"readFile",args:[w,{encoding:"utf8"}]}})),ke=(w,X)=>se(pn({id:X,action:"FS",payload:{method:"unlink",args:[w]}})),Fe=(w,X,Pe)=>se(pn({id:Pe,action:"FS",payload:{method:w,args:X}})),_e=()=>console.warn("`loadLanguage` is depreciated and should be removed from code (workers now come with language pre-loaded)"),Ee=(w,X)=>se(pn({id:X,action:"loadLanguage",payload:{langs:w,options:{langPath:g.langPath,dataPath:g.dataPath,cachePath:g.cachePath,cacheMethod:g.cacheMethod,gzip:g.gzip,lstmOnly:[jn.LSTM_ONLY,jn.TESSERACT_LSTM_COMBINED].includes(k)&&!g.legacyLang}}})),Te=()=>console.warn("`initialize` is depreciated and should be removed from code (workers now come pre-initialized)"),qe=(w,X,Pe,he)=>se(pn({id:he,action:"initialize",payload:{langs:w,oem:X,config:Pe}})),Le=(w="eng",X,Pe,he)=>{if(j&&[jn.TESSERACT_ONLY,jn.TESSERACT_LSTM_COMBINED].includes(X))throw Error("Legacy model requested but code missing.");const je=X||k;k=je;const ge=Pe||L;L=ge;const Y=(typeof w=="string"?w.split("+"):w).filter(le=>!v.includes(le));return v.push(...Y),Y.length>0?Ee(Y,he).then(()=>qe(w,je,ge,he)):qe(w,je,ge,he)},ne=(w={},X)=>se(pn({id:X,action:"setParameters",payload:{params:w}})),Ce=async(w,X={},Pe={blocks:!0,text:!0,hocr:!0,tsv:!0},he)=>se(pn({id:he,action:"recognize",payload:{image:await oo(w),options:X,output:Pe}})),P=(w="Tesseract OCR Result",X=!1,Pe)=>(console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),se(pn({id:Pe,action:"getPDF",payload:{title:w,textonly:X}}))),K=async(w,X)=>{if(j)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return se(pn({id:X,action:"detect",payload:{image:await oo(w)}}))},$=async()=>(D!==null&&(Eu(D),D=null),Promise.resolve());Du(D,({workerId:w,jobId:X,status:Pe,action:he,data:je})=>{const ge=`${he}-${X}`;if(Pe==="resolve"){ao(`[${w}]: Complete ${X}`);let be=je;he==="recognize"?be=yu(je):he==="getPDF"&&(be=Array.from({...je,length:Object.keys(je).length})),y[ge]({jobId:X,data:be})}else if(Pe==="reject")if(m[ge](je),he==="load"&&Q(je),c)c(je);else throw Error(je);else Pe==="progress"&&u({...je,userJobId:X})});const fe={id:s,worker:D,setResolve:G,setReject:A,load:pe,writeText:oe,readText:ve,removeFile:ke,FS:Fe,loadLanguage:_e,initialize:Te,reinitialize:Le,setParameters:ne,recognize:Ce,getPDF:P,detect:K,terminate:$};return ae().then(()=>Ee(i)).then(()=>qe(i,e,r)).then(()=>W(fe)).catch(()=>{}),z};const Qo=Jo,Tu=async(i,e,n)=>{const r=await Qo(e,1,n);return r.recognize(i).finally(async()=>{await r.terminate()})},Cu=async(i,e)=>{const n=await Qo("osd",0,e);return n.detect(i).finally(async()=>{await n.terminate()})};var Ou={recognize:Tu,detect:Cu},Au={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"},Pu={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"};const Iu=Tl,Lu=Jo,Mu=Ou,Ru=Au,Nu=Zo,Bu=Pu,{setLogging:Ku}=Zn;var Fu={languages:Ru,OEM:Nu,PSM:Bu,createScheduler:Iu,createWorker:Lu,setLogging:Ku,...Mu};const $o=Ho(Fu);function lo(i,e,n){const r=i.slice();return r[21]=e[n],r}function uo(i,e,n){const r=i.slice();return r[24]=e[n],r}function co(i,e,n){const r=i.slice();return r[27]=e[n],r}function fo(i,e,n){const r=i.slice();return r[30]=e[n],r}function ho(i){let e,n,r=i[0].name+"",s,u,c,g,y,m,v,k,L,j='<img id="imgChosen" class="img-fluid" alt="Your chosen receipt"/>',Q,W,z,S,D="Receipt description",G,A,se,pe,ae,oe,ve,ke="Receipt Date",Fe,_e,Ee,Te,qe,Le,ne="Receipt value:",Ce,P,K,$,fe,w,X,Pe="Receipt Type",he,je,ge,be="--Please choose type--",Y,le,we,ze="Receipt Currency",Ye,F,Se,ye,ue="Add Receipt",xe,ut,Dt="<h4>Scanning image...</h4> <progress>Scanning image...</progress>",St,dt,kt,Pt,ht,Ct,Je,gn;function vn(ce,ee){return ce[8]?Uu:ju}let Qt=vn(i),Rt=Qt(i),It=Ge(i[1]),ot=[];for(let ce=0;ce<It.length;ce+=1)ot[ce]=po(fo(i,It,ce));function Be(ce){i[14](ce)}let _n={format:"yyyy-MM-dd",closeOnSelection:!0,id:"rDate"};i[3]!==void 0&&(_n.value=i[3]),_e=new Yn({props:_n}),tn.push(()=>Ln(_e,"value",Be));let jt=Ge(i[2]),ft=[];for(let ce=0;ce<jt.length;ce+=1)ft[ce]=mo(co(i,jt,ce));let De=Ge(Object.keys(dr)),pt=[];for(let ce=0;ce<De.length;ce+=1)pt[ce]=go(uo(i,De,ce));let vt=Ge(Object.keys(wt)),mt=[];for(let ce=0;ce<vt.length;ce+=1)mt[ce]=vo(lo(i,vt,ce));return{c(){e=C("h1"),n=Me('Add Receipt to "'),s=Me(r),u=Me('"'),c=re(),Rt.c(),g=re(),y=C("div"),m=C("input"),v=re(),k=C("div"),L=C("div"),L.innerHTML=j,Q=re(),W=C("div"),z=C("div"),S=C("label"),S.textContent=D,G=re(),A=C("input"),se=re(),pe=C("datalist");for(let ce=0;ce<ot.length;ce+=1)ot[ce].c();ae=re(),oe=C("div"),ve=C("label"),ve.textContent=ke,Fe=re(),Ut(_e.$$.fragment),Te=re(),qe=C("div"),Le=C("label"),Le.textContent=ne,Ce=re(),P=C("input"),K=re(),$=C("datalist");for(let ce=0;ce<ft.length;ce+=1)ft[ce].c();fe=re(),w=C("div"),X=C("label"),X.textContent=Pe,he=re(),je=C("select"),ge=C("option"),ge.textContent=be;for(let ce=0;ce<pt.length;ce+=1)pt[ce].c();Y=re(),le=C("div"),we=C("label"),we.textContent=ze,Ye=re(),F=C("select");for(let ce=0;ce<mt.length;ce+=1)mt[ce].c();Se=re(),ye=C("button"),ye.textContent=ue,xe=re(),ut=C("div"),ut.innerHTML=Dt,St=re(),dt=C("div"),kt=C("a"),Pt=Me("Cancel"),this.h()},l(ce){e=O(ce,"H1",{});var ee=H(e);n=Re(ee,'Add Receipt to "'),s=Re(ee,r),u=Re(ee,'"'),ee.forEach(b),c=ie(ce),Rt.l(ce),g=ie(ce),y=O(ce,"DIV",{class:!0});var He=H(y);m=O(He,"INPUT",{id:!0,type:!0,accept:!0}),He.forEach(b),v=ie(ce),k=O(ce,"DIV",{id:!0});var Ie=H(k);L=O(Ie,"DIV",{class:!0,"data-svelte-h":!0}),We(L)!=="svelte-lr06dx"&&(L.innerHTML=j),Q=ie(Ie),W=O(Ie,"DIV",{class:!0});var Ae=H(W);z=O(Ae,"DIV",{class:!0});var gt=H(z);S=O(gt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),We(S)!=="svelte-1glg0dd"&&(S.textContent=D),G=ie(gt),A=O(gt,"INPUT",{class:!0,list:!0,id:!0,name:!0,placeholder:!0}),se=ie(gt),pe=O(gt,"DATALIST",{id:!0});var Nt=H(pe);for(let _t=0;_t<ot.length;_t+=1)ot[_t].l(Nt);Nt.forEach(b),gt.forEach(b),ae=ie(Ae),oe=O(Ae,"DIV",{class:!0});var Ht=H(oe);ve=O(Ht,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),We(ve)!=="svelte-cn0bms"&&(ve.textContent=ke),Fe=ie(Ht),Vt(_e.$$.fragment,Ht),Ht.forEach(b),Te=ie(Ae),qe=O(Ae,"DIV",{class:!0});var it=H(qe);Le=O(it,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),We(Le)!=="svelte-1y6fy9c"&&(Le.textContent=ne),Ce=ie(it),P=O(it,"INPUT",{class:!0,list:!0,id:!0,name:!0,type:!0,step:!0,placeholder:!0}),K=ie(it),$=O(it,"DATALIST",{id:!0});var yt=H($);for(let _t=0;_t<ft.length;_t+=1)ft[_t].l(yt);yt.forEach(b),it.forEach(b),fe=ie(Ae),w=O(Ae,"DIV",{class:!0});var rn=H(w);X=O(rn,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),We(X)!=="svelte-1vxf1l8"&&(X.textContent=Pe),he=ie(rn),je=O(rn,"SELECT",{id:!0,class:!0});var cn=H(je);ge=O(cn,"OPTION",{"data-svelte-h":!0}),We(ge)!=="svelte-ua8958"&&(ge.textContent=be);for(let _t=0;_t<pt.length;_t+=1)pt[_t].l(cn);cn.forEach(b),rn.forEach(b),Y=ie(Ae),le=O(Ae,"DIV",{class:!0});var Xt=H(le);we=O(Xt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),We(we)!=="svelte-15s44q2"&&(we.textContent=ze),Ye=ie(Xt),F=O(Xt,"SELECT",{id:!0,class:!0});var fn=H(F);for(let _t=0;_t<mt.length;_t+=1)mt[_t].l(fn);fn.forEach(b),Xt.forEach(b),Se=ie(Ae),ye=O(Ae,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),We(ye)!=="svelte-1059pct"&&(ye.textContent=ue),Ae.forEach(b),Ie.forEach(b),xe=ie(ce),ut=O(ce,"DIV",{class:!0,"data-svelte-h":!0}),We(ut)!=="svelte-z0xj81"&&(ut.innerHTML=Dt),St=ie(ce),dt=O(ce,"DIV",{class:!0});var En=H(dt);kt=O(En,"A",{href:!0,class:!0});var en=H(kt);Pt=Re(en,"Cancel"),en.forEach(b),En.forEach(b),this.h()},h(){p(m,"id","imageInput"),p(m,"type","file"),p(m,"accept","image/*;capture=camera"),p(y,"class","mb-3"),p(L,"class","img-scan d-flex col-md-6 col-sm-12"),p(S,"for","rDesc"),p(S,"class","form-label"),p(A,"class","form-control"),p(A,"list","descOptions"),p(A,"id","rDesc"),p(A,"name","rDesc"),p(A,"placeholder","Double-click for suggestions"),p(pe,"id","descOptions"),p(z,"class","mb-3"),p(ve,"for","rDate"),p(ve,"class","form-label"),p(oe,"class","mb-3"),p(Le,"for","rVal"),p(Le,"class","form-label"),p(P,"class","form-control"),p(P,"list","valOptions"),p(P,"id","rVal"),p(P,"name","rVal"),p(P,"type","number"),p(P,"step","0.01"),p(P,"placeholder","Double-click for suggestions"),p($,"id","valOptions"),p(qe,"class","mb-3"),p(X,"for","rType"),p(X,"class","form-label"),ge.selected=!0,ge.__value="--Please choose type--",at(ge,ge.__value),p(je,"id","rType"),p(je,"class","form-control"),i[7]===void 0&&Un(()=>i[16].call(je)),p(w,"class","mb-3"),p(we,"for","rCurrency"),p(we,"class","form-label"),p(F,"id","rCurrency"),p(F,"class","form-control"),i[4]===void 0&&Un(()=>i[17].call(F)),p(le,"class","mb-3"),p(ye,"type","button"),p(ye,"class","btn btn-primary"),p(W,"class","d-flex flex-column col-md-6 col-sm-12"),p(k,"id","receiptEntry"),Tt(k,"show",i[9]),p(ut,"class","flex-column hide"),Tt(ut,"show",!i[9]&&i[8]),p(kt,"href",ht="#/trip/"+i[0].id),p(kt,"class","btn btn-outline-primary"),p(dt,"class","mt-3 d-grid d-md-block")},m(ce,ee){de(ce,e,ee),h(e,n),h(e,s),h(e,u),de(ce,c,ee),Rt.m(ce,ee),de(ce,g,ee),de(ce,y,ee),h(y,m),de(ce,v,ee),de(ce,k,ee),h(k,L),h(k,Q),h(k,W),h(W,z),h(z,S),h(z,G),h(z,A),at(A,i[5]),h(z,se),h(z,pe);for(let He=0;He<ot.length;He+=1)ot[He]&&ot[He].m(pe,null);h(W,ae),h(W,oe),h(oe,ve),h(oe,Fe),qt(_e,oe,null),h(W,Te),h(W,qe),h(qe,Le),h(qe,Ce),h(qe,P),at(P,i[6]),h(qe,K),h(qe,$);for(let He=0;He<ft.length;He+=1)ft[He]&&ft[He].m($,null);h(W,fe),h(W,w),h(w,X),h(w,he),h(w,je),h(je,ge);for(let He=0;He<pt.length;He+=1)pt[He]&&pt[He].m(je,null);Jt(je,i[7],!0),h(W,Y),h(W,le),h(le,we),h(le,Ye),h(le,F);for(let He=0;He<mt.length;He+=1)mt[He]&&mt[He].m(F,null);Jt(F,i[4],!0),h(W,Se),h(W,ye),de(ce,xe,ee),de(ce,ut,ee),de(ce,St,ee),de(ce,dt,ee),h(dt,kt),h(kt,Pt),Ct=!0,Je||(gn=[Ze(m,"change",i[11]),Ze(A,"input",i[13]),Ze(P,"input",i[15]),Ze(je,"change",i[16]),Ze(F,"change",i[17]),Ze(ye,"click",i[10])],Je=!0)},p(ce,ee){if((!Ct||ee[0]&1)&&r!==(r=ce[0].name+"")&&Xe(s,r),Qt!==(Qt=vn(ce))&&(Rt.d(1),Rt=Qt(ce),Rt&&(Rt.c(),Rt.m(g.parentNode,g))),ee[0]&32&&A.value!==ce[5]&&at(A,ce[5]),ee[0]&2){It=Ge(ce[1]);let Ie;for(Ie=0;Ie<It.length;Ie+=1){const Ae=fo(ce,It,Ie);ot[Ie]?ot[Ie].p(Ae,ee):(ot[Ie]=po(Ae),ot[Ie].c(),ot[Ie].m(pe,null))}for(;Ie<ot.length;Ie+=1)ot[Ie].d(1);ot.length=It.length}const He={};if(!Ee&&ee[0]&8&&(Ee=!0,He.value=ce[3],In(()=>Ee=!1)),_e.$set(He),ee[0]&64&&Hr(P.value)!==ce[6]&&at(P,ce[6]),ee[0]&4){jt=Ge(ce[2]);let Ie;for(Ie=0;Ie<jt.length;Ie+=1){const Ae=co(ce,jt,Ie);ft[Ie]?ft[Ie].p(Ae,ee):(ft[Ie]=mo(Ae),ft[Ie].c(),ft[Ie].m($,null))}for(;Ie<ft.length;Ie+=1)ft[Ie].d(1);ft.length=jt.length}if(ee&0){De=Ge(Object.keys(dr));let Ie;for(Ie=0;Ie<De.length;Ie+=1){const Ae=uo(ce,De,Ie);pt[Ie]?pt[Ie].p(Ae,ee):(pt[Ie]=go(Ae),pt[Ie].c(),pt[Ie].m(je,null))}for(;Ie<pt.length;Ie+=1)pt[Ie].d(1);pt.length=De.length}if(ee[0]&128&&Jt(je,ce[7]),ee&0){vt=Ge(Object.keys(wt));let Ie;for(Ie=0;Ie<vt.length;Ie+=1){const Ae=lo(ce,vt,Ie);mt[Ie]?mt[Ie].p(Ae,ee):(mt[Ie]=vo(Ae),mt[Ie].c(),mt[Ie].m(F,null))}for(;Ie<mt.length;Ie+=1)mt[Ie].d(1);mt.length=vt.length}ee[0]&16&&Jt(F,ce[4]),(!Ct||ee[0]&512)&&Tt(k,"show",ce[9]),(!Ct||ee[0]&768)&&Tt(ut,"show",!ce[9]&&ce[8]),(!Ct||ee[0]&1&&ht!==(ht="#/trip/"+ce[0].id))&&p(kt,"href",ht)},i(ce){Ct||(rt(_e.$$.fragment,ce),Ct=!0)},o(ce){st(_e.$$.fragment,ce),Ct=!1},d(ce){ce&&(b(e),b(c),b(g),b(y),b(v),b(k),b(xe),b(ut),b(St),b(dt)),Rt.d(ce),Mt(ot,ce),zt(_e),Mt(ft,ce),Mt(pt,ce),Mt(mt,ce),Je=!1,kn(gn)}}}function ju(i){let e,n="Choose image to begin";return{c(){e=C("p"),e.textContent=n},l(r){e=O(r,"P",{"data-svelte-h":!0}),We(e)!=="svelte-1rdbglw"&&(e.textContent=n)},m(r,s){de(r,e,s)},d(r){r&&b(e)}}}function Uu(i){let e,n="Click 'Browse' to start again";return{c(){e=C("p"),e.textContent=n},l(r){e=O(r,"P",{"data-svelte-h":!0}),We(e)!=="svelte-1raiglx"&&(e.textContent=n)},m(r,s){de(r,e,s)},d(r){r&&b(e)}}}function po(i){let e,n;return{c(){e=C("option"),this.h()},l(r){e=O(r,"OPTION",{}),H(e).forEach(b),this.h()},h(){e.__value=n=i[30],at(e,e.__value)},m(r,s){de(r,e,s)},p(r,s){s[0]&2&&n!==(n=r[30])&&(e.__value=n,at(e,e.__value))},d(r){r&&b(e)}}}function mo(i){let e,n=i[27]+"",r,s;return{c(){e=C("option"),r=Me(n),this.h()},l(u){e=O(u,"OPTION",{});var c=H(e);r=Re(c,n),c.forEach(b),this.h()},h(){e.__value=s=i[27],at(e,e.__value)},m(u,c){de(u,e,c),h(e,r)},p(u,c){c[0]&4&&n!==(n=u[27]+"")&&Xe(r,n),c[0]&4&&s!==(s=u[27])&&(e.__value=s,at(e,e.__value))},d(u){u&&b(e)}}}function go(i){let e,n=i[24]+"",r;return{c(){e=C("option"),r=Me(n),this.h()},l(s){e=O(s,"OPTION",{});var u=H(e);r=Re(u,n),u.forEach(b),this.h()},h(){e.__value=i[24],at(e,e.__value)},m(s,u){de(s,e,u),h(e,r)},p:bt,d(s){s&&b(e)}}}function vo(i){let e,n=i[21]+"",r,s,u=wt[i[21]].symbol+"",c,g;return{c(){e=C("option"),r=Me(n),s=Me(" ("),c=Me(u),g=Me(`)
                `),this.h()},l(y){e=O(y,"OPTION",{});var m=H(e);r=Re(m,n),s=Re(m," ("),c=Re(m,u),g=Re(m,`)
                `),m.forEach(b),this.h()},h(){e.__value=i[21],at(e,e.__value)},m(y,m){de(y,e,m),h(e,r),h(e,s),h(e,c),h(e,g)},p:bt,d(y){y&&b(e)}}}function Vu(i){let e,n,r=i[0]&&ho(i);return{c(){e=C("div"),r&&r.c(),this.h()},l(s){e=O(s,"DIV",{class:!0});var u=H(e);r&&r.l(u),u.forEach(b),this.h()},h(){p(e,"class","w-100")},m(s,u){de(s,e,u),r&&r.m(e,null),n=!0},p(s,u){s[0]?r?(r.p(s,u),u[0]&1&&rt(r,1)):(r=ho(s),r.c(),rt(r,1),r.m(e,null)):r&&(Vn(),st(r,1,1,()=>{r=null}),qn())},i(s){n||(rt(r),n=!0)},o(s){st(r),n=!1},d(s){s&&b(e),r&&r.d()}}}function qu(i,e,n){let{tripId:r}=e,s,u=[],c=[],g=new Date,y,m,v,k,L,j,Q,W=!1;r>-1&&Kt.trips.get(r).then(oe=>{n(0,s=oe),n(4,y=s.defaultCurrency)});async function z(){let oe=document.getElementById("imgChosen");Q=oe.naturalWidth,j=oe.naturalHeight,await Kt.receipts.add({description:m,currency:y,receiptDate:g,receiptDateString:g.toDateString(),receiptType:k,total:v,tripId:r,imageData:L,imageHeight:j,imageWidth:Q}),window.location.href="#/trip/"+r}async function S(oe){var ve=await $o.recognize(oe,"eng");return ve.data.lines}async function D(oe){n(1,u=[]),n(2,c=[]),n(9,W=!1);var ve=oe.target.files[0];n(8,L=ve);var ke=URL.createObjectURL(ve);const Fe=document.getElementById("imgChosen");Fe.src=ke;var _e=await S(ke);for(let Ee of _e){if(Ee.confidence<40)continue;u.push(Ee.text);let Te=mn(Ee.text);Te.value>0&&c.push(Te.format({symbol:"",separator:""}))}n(1,u),n(2,c=c.reverse()),n(9,W=!0)}function G(){m=this.value,n(5,m)}function A(oe){g=oe,n(3,g)}function se(){v=Hr(this.value),n(6,v)}function pe(){k=Gn(this),n(7,k)}function ae(){y=Gn(this),n(4,y)}return i.$$set=oe=>{"tripId"in oe&&n(12,r=oe.tripId)},[s,u,c,g,y,m,v,k,L,W,z,D,r,G,A,se,pe,ae]}class zu extends on{constructor(e){super(),sn(this,e,qu,Vu,nn,{tripId:12},null,[-1,-1])}}function _o(i,e,n){const r=i.slice();return r[21]=e[n],r}function yo(i,e,n){const r=i.slice();return r[24]=e[n],r}function bo(i,e,n){const r=i.slice();return r[27]=e[n],r}function wo(i,e,n){const r=i.slice();return r[30]=e[n],r}function ko(i){let e,n,r=i[0].description+"",s,u,c,g,y,m,v,k,L,j,Q,W,z,S,D,G="Receipt description",A,se,pe,ae,oe,ve,ke,Fe="Receipt Date",_e,Ee,Te,qe,Le,ne,Ce="Receipt value:",P,K,$,fe,w,X,Pe,he="Receipt Type",je,ge,be,Y="--Please choose type--",le,we,ze,Ye="Receipt Currency",F,Se,ye,ue,xe,ut="Update Receipt",Dt,St,dt,kt,Pt,ht,Ct="<h4>Scanning image...</h4> <progress>Scanning image...</progress>",Je,gn,vn;function Qt(ee,He){return ee[8]?xu:Hu}let Rt=Qt(i),It=Rt(i),ot=Ge(i[1]),Be=[];for(let ee=0;ee<ot.length;ee+=1)Be[ee]=Eo(wo(i,ot,ee));function _n(ee){i[14](ee)}let jt={format:"yyyy-MM-dd",closeOnSelection:!0,id:"rDate"};i[3]!==void 0&&(jt.value=i[3]),Ee=new Yn({props:jt}),tn.push(()=>Ln(Ee,"value",_n));let ft=Ge(i[2]),De=[];for(let ee=0;ee<ft.length;ee+=1)De[ee]=Do(bo(i,ft,ee));let pt=Ge(Object.keys(dr)),vt=[];for(let ee=0;ee<pt.length;ee+=1)vt[ee]=So(yo(i,pt,ee));let mt=Ge(Object.keys(wt)),ce=[];for(let ee=0;ee<mt.length;ee+=1)ce[ee]=To(_o(i,mt,ee));return{c(){e=C("h1"),n=Me('Update Receipt for "'),s=Me(r),u=Me('"'),c=re(),It.c(),g=re(),y=C("div"),m=C("input"),v=re(),k=C("div"),L=C("div"),j=C("img"),W=re(),z=C("div"),S=C("div"),D=C("label"),D.textContent=G,A=re(),se=C("input"),pe=re(),ae=C("datalist");for(let ee=0;ee<Be.length;ee+=1)Be[ee].c();oe=re(),ve=C("div"),ke=C("label"),ke.textContent=Fe,_e=re(),Ut(Ee.$$.fragment),qe=re(),Le=C("div"),ne=C("label"),ne.textContent=Ce,P=re(),K=C("input"),$=re(),fe=C("datalist");for(let ee=0;ee<De.length;ee+=1)De[ee].c();w=re(),X=C("div"),Pe=C("label"),Pe.textContent=he,je=re(),ge=C("select"),be=C("option"),be.textContent=Y;for(let ee=0;ee<vt.length;ee+=1)vt[ee].c();le=re(),we=C("div"),ze=C("label"),ze.textContent=Ye,F=re(),Se=C("select");for(let ee=0;ee<ce.length;ee+=1)ce[ee].c();ye=re(),ue=C("div"),xe=C("button"),xe.textContent=ut,Dt=re(),St=C("a"),dt=Me("Cancel"),Pt=re(),ht=C("div"),ht.innerHTML=Ct,this.h()},l(ee){e=O(ee,"H1",{});var He=H(e);n=Re(He,'Update Receipt for "'),s=Re(He,r),u=Re(He,'"'),He.forEach(b),c=ie(ee),It.l(ee),g=ie(ee),y=O(ee,"DIV",{class:!0});var Ie=H(y);m=O(Ie,"INPUT",{id:!0,type:!0,accept:!0}),Ie.forEach(b),v=ie(ee),k=O(ee,"DIV",{id:!0});var Ae=H(k);L=O(Ae,"DIV",{class:!0});var gt=H(L);j=O(gt,"IMG",{id:!0,class:!0,src:!0,alt:!0}),gt.forEach(b),W=ie(Ae),z=O(Ae,"DIV",{class:!0});var Nt=H(z);S=O(Nt,"DIV",{class:!0});var Ht=H(S);D=O(Ht,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),We(D)!=="svelte-1glg0dd"&&(D.textContent=G),A=ie(Ht),se=O(Ht,"INPUT",{class:!0,list:!0,id:!0,name:!0,placeholder:!0}),pe=ie(Ht),ae=O(Ht,"DATALIST",{id:!0});var it=H(ae);for(let Lt=0;Lt<Be.length;Lt+=1)Be[Lt].l(it);it.forEach(b),Ht.forEach(b),oe=ie(Nt),ve=O(Nt,"DIV",{class:!0});var yt=H(ve);ke=O(yt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),We(ke)!=="svelte-cn0bms"&&(ke.textContent=Fe),_e=ie(yt),Vt(Ee.$$.fragment,yt),yt.forEach(b),qe=ie(Nt),Le=O(Nt,"DIV",{class:!0});var rn=H(Le);ne=O(rn,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),We(ne)!=="svelte-1y6fy9c"&&(ne.textContent=Ce),P=ie(rn),K=O(rn,"INPUT",{class:!0,list:!0,id:!0,name:!0,type:!0,step:!0,placeholder:!0}),$=ie(rn),fe=O(rn,"DATALIST",{id:!0});var cn=H(fe);for(let Lt=0;Lt<De.length;Lt+=1)De[Lt].l(cn);cn.forEach(b),rn.forEach(b),w=ie(Nt),X=O(Nt,"DIV",{class:!0});var Xt=H(X);Pe=O(Xt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),We(Pe)!=="svelte-1vxf1l8"&&(Pe.textContent=he),je=ie(Xt),ge=O(Xt,"SELECT",{id:!0,class:!0});var fn=H(ge);be=O(fn,"OPTION",{"data-svelte-h":!0}),We(be)!=="svelte-10m9j2x"&&(be.textContent=Y);for(let Lt=0;Lt<vt.length;Lt+=1)vt[Lt].l(fn);fn.forEach(b),Xt.forEach(b),le=ie(Nt),we=O(Nt,"DIV",{class:!0});var En=H(we);ze=O(En,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),We(ze)!=="svelte-15s44q2"&&(ze.textContent=Ye),F=ie(En),Se=O(En,"SELECT",{id:!0,class:!0});var en=H(Se);for(let Lt=0;Lt<ce.length;Lt+=1)ce[Lt].l(en);en.forEach(b),En.forEach(b),ye=ie(Nt),ue=O(Nt,"DIV",{class:!0});var _t=H(ue);xe=O(_t,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),We(xe)!=="svelte-jbq1gp"&&(xe.textContent=ut),Dt=ie(_t),St=O(_t,"A",{href:!0,class:!0});var dn=H(St);dt=Re(dn,"Cancel"),dn.forEach(b),_t.forEach(b),Nt.forEach(b),Ae.forEach(b),Pt=ie(ee),ht=O(ee,"DIV",{class:!0,"data-svelte-h":!0}),We(ht)!=="svelte-z0xj81"&&(ht.innerHTML=Ct),this.h()},h(){p(m,"id","imageInput"),p(m,"type","file"),p(m,"accept","image/*;capture=camera"),p(y,"class","mb-3"),p(j,"id","imgChosen"),p(j,"class","img-fluid"),Kr(j.src,Q=URL.createObjectURL(i[8]))||p(j,"src",Q),p(j,"alt","Your chosen receipt"),p(L,"class","img-scan d-flex col-md-6 col-sm-12"),p(D,"for","rDesc"),p(D,"class","form-label"),p(se,"class","form-control"),p(se,"list","descOptions"),p(se,"id","rDesc"),p(se,"name","rDesc"),p(se,"placeholder","Double-click for suggestions"),p(ae,"id","descOptions"),p(S,"class","mb-3"),p(ke,"for","rDate"),p(ke,"class","form-label"),p(ve,"class","mb-3"),p(ne,"for","rVal"),p(ne,"class","form-label"),p(K,"class","form-control"),p(K,"list","valOptions"),p(K,"id","rVal"),p(K,"name","rVal"),p(K,"type","number"),p(K,"step","0.01"),p(K,"placeholder","Double-click for suggestions"),p(fe,"id","valOptions"),p(Le,"class","mb-3"),p(Pe,"for","rType"),p(Pe,"class","form-label"),be.__value="--Please choose type--",at(be,be.__value),p(ge,"id","rType"),p(ge,"class","form-control"),i[7]===void 0&&Un(()=>i[16].call(ge)),p(X,"class","mb-3"),p(ze,"for","rCurrency"),p(ze,"class","form-label"),p(Se,"id","rCurrency"),p(Se,"class","form-control"),i[4]===void 0&&Un(()=>i[17].call(Se)),p(we,"class","mb-3"),p(xe,"type","button"),p(xe,"class","btn btn-primary"),p(St,"href",kt="#/trip/"+i[0].tripId),p(St,"class","btn btn-outline-primary"),p(ue,"class","gap-3 d-grid d-md-block"),p(z,"class","d-flex flex-column col-md-6 col-sm-12"),p(k,"id","receiptEntry"),Tt(k,"show",i[9]),p(ht,"class","flex-column hide"),Tt(ht,"show",!i[9]&&i[8])},m(ee,He){de(ee,e,He),h(e,n),h(e,s),h(e,u),de(ee,c,He),It.m(ee,He),de(ee,g,He),de(ee,y,He),h(y,m),de(ee,v,He),de(ee,k,He),h(k,L),h(L,j),h(k,W),h(k,z),h(z,S),h(S,D),h(S,A),h(S,se),at(se,i[5]),h(S,pe),h(S,ae);for(let Ie=0;Ie<Be.length;Ie+=1)Be[Ie]&&Be[Ie].m(ae,null);h(z,oe),h(z,ve),h(ve,ke),h(ve,_e),qt(Ee,ve,null),h(z,qe),h(z,Le),h(Le,ne),h(Le,P),h(Le,K),at(K,i[6]),h(Le,$),h(Le,fe);for(let Ie=0;Ie<De.length;Ie+=1)De[Ie]&&De[Ie].m(fe,null);h(z,w),h(z,X),h(X,Pe),h(X,je),h(X,ge),h(ge,be);for(let Ie=0;Ie<vt.length;Ie+=1)vt[Ie]&&vt[Ie].m(ge,null);Jt(ge,i[7],!0),h(z,le),h(z,we),h(we,ze),h(we,F),h(we,Se);for(let Ie=0;Ie<ce.length;Ie+=1)ce[Ie]&&ce[Ie].m(Se,null);Jt(Se,i[4],!0),h(z,ye),h(z,ue),h(ue,xe),h(ue,Dt),h(ue,St),h(St,dt),de(ee,Pt,He),de(ee,ht,He),Je=!0,gn||(vn=[Ze(m,"change",i[11]),Ze(se,"input",i[13]),Ze(K,"input",i[15]),Ze(ge,"change",i[16]),Ze(Se,"change",i[17]),Ze(xe,"click",i[10])],gn=!0)},p(ee,He){if((!Je||He[0]&1)&&r!==(r=ee[0].description+"")&&Xe(s,r),Rt!==(Rt=Qt(ee))&&(It.d(1),It=Rt(ee),It&&(It.c(),It.m(g.parentNode,g))),(!Je||He[0]&256&&!Kr(j.src,Q=URL.createObjectURL(ee[8])))&&p(j,"src",Q),He[0]&32&&se.value!==ee[5]&&at(se,ee[5]),He[0]&2){ot=Ge(ee[1]);let Ae;for(Ae=0;Ae<ot.length;Ae+=1){const gt=wo(ee,ot,Ae);Be[Ae]?Be[Ae].p(gt,He):(Be[Ae]=Eo(gt),Be[Ae].c(),Be[Ae].m(ae,null))}for(;Ae<Be.length;Ae+=1)Be[Ae].d(1);Be.length=ot.length}const Ie={};if(!Te&&He[0]&8&&(Te=!0,Ie.value=ee[3],In(()=>Te=!1)),Ee.$set(Ie),He[0]&64&&Hr(K.value)!==ee[6]&&at(K,ee[6]),He[0]&4){ft=Ge(ee[2]);let Ae;for(Ae=0;Ae<ft.length;Ae+=1){const gt=bo(ee,ft,Ae);De[Ae]?De[Ae].p(gt,He):(De[Ae]=Do(gt),De[Ae].c(),De[Ae].m(fe,null))}for(;Ae<De.length;Ae+=1)De[Ae].d(1);De.length=ft.length}if(He&0){pt=Ge(Object.keys(dr));let Ae;for(Ae=0;Ae<pt.length;Ae+=1){const gt=yo(ee,pt,Ae);vt[Ae]?vt[Ae].p(gt,He):(vt[Ae]=So(gt),vt[Ae].c(),vt[Ae].m(ge,null))}for(;Ae<vt.length;Ae+=1)vt[Ae].d(1);vt.length=pt.length}if(He[0]&128&&Jt(ge,ee[7]),He&0){mt=Ge(Object.keys(wt));let Ae;for(Ae=0;Ae<mt.length;Ae+=1){const gt=_o(ee,mt,Ae);ce[Ae]?ce[Ae].p(gt,He):(ce[Ae]=To(gt),ce[Ae].c(),ce[Ae].m(Se,null))}for(;Ae<ce.length;Ae+=1)ce[Ae].d(1);ce.length=mt.length}He[0]&16&&Jt(Se,ee[4]),(!Je||He[0]&1&&kt!==(kt="#/trip/"+ee[0].tripId))&&p(St,"href",kt),(!Je||He[0]&512)&&Tt(k,"show",ee[9]),(!Je||He[0]&768)&&Tt(ht,"show",!ee[9]&&ee[8])},i(ee){Je||(rt(Ee.$$.fragment,ee),Je=!0)},o(ee){st(Ee.$$.fragment,ee),Je=!1},d(ee){ee&&(b(e),b(c),b(g),b(y),b(v),b(k),b(Pt),b(ht)),It.d(ee),Mt(Be,ee),zt(Ee),Mt(De,ee),Mt(vt,ee),Mt(ce,ee),gn=!1,kn(vn)}}}function Hu(i){let e,n="Choose image to begin";return{c(){e=C("p"),e.textContent=n},l(r){e=O(r,"P",{"data-svelte-h":!0}),We(e)!=="svelte-1rdbglw"&&(e.textContent=n)},m(r,s){de(r,e,s)},d(r){r&&b(e)}}}function xu(i){let e,n="'Choose file' to start again";return{c(){e=C("p"),e.textContent=n},l(r){e=O(r,"P",{"data-svelte-h":!0}),We(e)!=="svelte-ffknqs"&&(e.textContent=n)},m(r,s){de(r,e,s)},d(r){r&&b(e)}}}function Eo(i){let e,n;return{c(){e=C("option"),this.h()},l(r){e=O(r,"OPTION",{}),H(e).forEach(b),this.h()},h(){e.__value=n=i[30],at(e,e.__value)},m(r,s){de(r,e,s)},p(r,s){s[0]&2&&n!==(n=r[30])&&(e.__value=n,at(e,e.__value))},d(r){r&&b(e)}}}function Do(i){let e,n=i[27]+"",r,s;return{c(){e=C("option"),r=Me(n),this.h()},l(u){e=O(u,"OPTION",{});var c=H(e);r=Re(c,n),c.forEach(b),this.h()},h(){e.__value=s=i[27],at(e,e.__value)},m(u,c){de(u,e,c),h(e,r)},p(u,c){c[0]&4&&n!==(n=u[27]+"")&&Xe(r,n),c[0]&4&&s!==(s=u[27])&&(e.__value=s,at(e,e.__value))},d(u){u&&b(e)}}}function So(i){let e,n=i[24]+"",r;return{c(){e=C("option"),r=Me(n),this.h()},l(s){e=O(s,"OPTION",{});var u=H(e);r=Re(u,n),u.forEach(b),this.h()},h(){e.__value=i[24],at(e,e.__value)},m(s,u){de(s,e,u),h(e,r)},p:bt,d(s){s&&b(e)}}}function To(i){let e,n=i[21]+"",r,s,u=wt[i[21]].symbol+"",c,g;return{c(){e=C("option"),r=Me(n),s=Me(" ("),c=Me(u),g=Me(`)
                `),this.h()},l(y){e=O(y,"OPTION",{});var m=H(e);r=Re(m,n),s=Re(m," ("),c=Re(m,u),g=Re(m,`)
                `),m.forEach(b),this.h()},h(){e.__value=i[21],at(e,e.__value)},m(y,m){de(y,e,m),h(e,r),h(e,s),h(e,c),h(e,g)},p:bt,d(y){y&&b(e)}}}function Wu(i){let e,n,r=i[0]&&ko(i);return{c(){e=C("div"),r&&r.c(),this.h()},l(s){e=O(s,"DIV",{class:!0});var u=H(e);r&&r.l(u),u.forEach(b),this.h()},h(){p(e,"class","w-100")},m(s,u){de(s,e,u),r&&r.m(e,null),n=!0},p(s,u){s[0]?r?(r.p(s,u),u[0]&1&&rt(r,1)):(r=ko(s),r.c(),rt(r,1),r.m(e,null)):r&&(Vn(),st(r,1,1,()=>{r=null}),qn())},i(s){n||(rt(r),n=!0)},o(s){st(r),n=!1},d(s){s&&b(e),r&&r.d()}}}function Gu(i,e,n){let{receiptId:r}=e,s,u=[],c=[],g=new Date,y,m,v,k,L,j,Q,W=!1;r>-1&&Kt.receipts.get(r).then(oe=>{n(0,s=oe),n(3,g=new Date(s.receiptDateString)),n(4,y=s.currency),n(5,m=s.description),n(6,v=s.total),n(7,k=s.receiptType),n(8,L=s.imageData),n(9,W=!0)});async function z(){let oe=document.getElementById("imgChosen");Q=oe.naturalWidth,j=oe.naturalHeight,await Kt.receipts.update(s.id,{description:m,currency:y,receiptDate:g,receiptDateString:g.toDateString(),receiptType:k,total:v,tripId:s.tripId,imageData:L,imageHeight:j,imageWidth:Q}),window.location.href="#/trip/"+s.tripId}async function S(oe){var ve=await $o.recognize(oe,"eng");return ve.data.lines}async function D(oe){n(1,u=[]),n(2,c=[]),n(9,W=!1);var ve=oe.target.files[0];n(8,L=ve);var ke=URL.createObjectURL(ve),Fe=await S(ke);for(let _e of Fe){if(_e.confidence<40)continue;u.push(_e.text);let Ee=mn(_e.text);Ee.value>0&&c.push(Ee.format({symbol:"",separator:""}))}n(1,u),n(2,c=c.reverse()),n(9,W=!0)}function G(){m=this.value,n(5,m)}function A(oe){g=oe,n(3,g)}function se(){v=Hr(this.value),n(6,v)}function pe(){k=Gn(this),n(7,k)}function ae(){y=Gn(this),n(4,y)}return i.$$set=oe=>{"receiptId"in oe&&n(12,r=oe.receiptId)},[s,u,c,g,y,m,v,k,L,W,z,D,r,G,A,se,pe,ae]}class Yu extends on{constructor(e){super(),sn(this,e,Gu,Wu,nn,{receiptId:12},null,[-1,-1])}}function Zu(i){let e,n="<h1>Welcome!</h1> <p>Create a trip using the button at the top</p> <p>Or add receipts by selecting a trip</p>";return{c(){e=C("div"),e.innerHTML=n},l(r){e=O(r,"DIV",{"data-svelte-h":!0}),We(e)!=="svelte-klyxeq"&&(e.innerHTML=n)},m(r,s){de(r,e,s)},p:bt,i:bt,o:bt,d(r){r&&b(e)}}}class Ju extends on{constructor(e){super(),sn(this,e,null,Zu,nn,{})}}function Co(i,e,n){const r=i.slice();return r[6]=e[n],r}function Oo(i,e,n){const r=i.slice();return r[9]=e[n],r}function Ao(i,e,n){const r=i.slice();return r[6]=e[n],r}function Ci(i){const e=i.slice(),n=Array.from(new Set(e[2].map(r=>r.currency)));return e[5]=n,e}function Po(i){let e,n=i[0].name+"",r,s,u,c=i[0].startDateString+"",g,y,m=i[0].endDateString+"",v,k,L,j="Receipt Summary",Q,W,z=i[2]&&Io(Ci(i));return{c(){e=C("h1"),r=Me(n),s=re(),u=C("h4"),g=Me(c),y=Me(" - "),v=Me(m),k=re(),L=C("h5"),L.textContent=j,Q=re(),z&&z.c(),W=Ft()},l(S){e=O(S,"H1",{});var D=H(e);r=Re(D,n),D.forEach(b),s=ie(S),u=O(S,"H4",{});var G=H(u);g=Re(G,c),y=Re(G," - "),v=Re(G,m),G.forEach(b),k=ie(S),L=O(S,"H5",{"data-svelte-h":!0}),We(L)!=="svelte-1hbjnf6"&&(L.textContent=j),Q=ie(S),z&&z.l(S),W=Ft()},m(S,D){de(S,e,D),h(e,r),de(S,s,D),de(S,u,D),h(u,g),h(u,y),h(u,v),de(S,k,D),de(S,L,D),de(S,Q,D),z&&z.m(S,D),de(S,W,D)},p(S,D){D&1&&n!==(n=S[0].name+"")&&Xe(r,n),D&1&&c!==(c=S[0].startDateString+"")&&Xe(g,c),D&1&&m!==(m=S[0].endDateString+"")&&Xe(v,m),S[2]?z?z.p(Ci(S),D):(z=Io(Ci(S)),z.c(),z.m(W.parentNode,W)):z&&(z.d(1),z=null)},d(S){S&&(b(e),b(s),b(u),b(k),b(L),b(Q),b(W)),z&&z.d(S)}}}function Io(i){let e,n,r="<tr><th>Receipt Description</th> <th>Receipt Date</th> <th>Receipt Type</th> <th>Receipt Total</th></tr>",s,u,c=[],g=new Map,y,m,v,k,L,j,Q,W,z="<strong>Total</strong>",S,D,G,A,se,pe=[],ae=new Map,oe,ve,ke=`// Wait for images to render before printing
        var imgs = document.images,
        len = imgs.length,
        counter = 0;

        [].forEach.call( imgs, function( img ) {
            if(img.complete)
              incrementCounter();
            else
              img.addEventListener( 'load', incrementCounter, false );
        } );

        function incrementCounter() {
            counter++;
            if ( counter === len ) {
              window.print();
            }
        }`,Fe=Ge(i[2]);const _e=ne=>ne[6].id;for(let ne=0;ne<Fe.length;ne+=1){let Ce=Ao(i,Fe,ne),P=_e(Ce);g.set(P,c[ne]=Lo(P,Ce))}let Ee=Ge(i[5]),Te=[];for(let ne=0;ne<Ee.length;ne+=1)Te[ne]=Mo(Oo(i,Ee,ne));let qe=Ge(i[2]);const Le=ne=>ne[6].id;for(let ne=0;ne<qe.length;ne+=1){let Ce=Co(i,qe,ne),P=Le(Ce);ae.set(P,pe[ne]=Ro(P,Ce))}return{c(){e=C("table"),n=C("thead"),n.innerHTML=r,s=re(),u=C("tbody");for(let ne=0;ne<c.length;ne+=1)c[ne].c();y=re(),m=C("tfoot"),v=C("tr"),k=C("td"),L=re(),j=C("td"),Q=re(),W=C("td"),W.innerHTML=z,S=re(),D=C("td");for(let ne=0;ne<Te.length;ne+=1)Te[ne].c();G=re(),A=C("td"),se=re();for(let ne=0;ne<pe.length;ne+=1)pe[ne].c();oe=re(),ve=C("script"),ve.textContent=ke,this.h()},l(ne){e=O(ne,"TABLE",{class:!0});var Ce=H(e);n=O(Ce,"THEAD",{"data-svelte-h":!0}),We(n)!=="svelte-1yqevk1"&&(n.innerHTML=r),s=ie(Ce),u=O(Ce,"TBODY",{});var P=H(u);for(let w=0;w<c.length;w+=1)c[w].l(P);P.forEach(b),y=ie(Ce),m=O(Ce,"TFOOT",{class:!0});var K=H(m);v=O(K,"TR",{});var $=H(v);k=O($,"TD",{}),H(k).forEach(b),L=ie($),j=O($,"TD",{}),H(j).forEach(b),Q=ie($),W=O($,"TD",{class:!0,"data-svelte-h":!0}),We(W)!=="svelte-14afisz"&&(W.innerHTML=z),S=ie($),D=O($,"TD",{});var fe=H(D);for(let w=0;w<Te.length;w+=1)Te[w].l(fe);fe.forEach(b),G=ie($),A=O($,"TD",{}),H(A).forEach(b),$.forEach(b),K.forEach(b),Ce.forEach(b),se=ie(ne);for(let w=0;w<pe.length;w+=1)pe[w].l(ne);oe=ie(ne),ve=O(ne,"SCRIPT",{"data-svelte-h":!0}),We(ve)!=="svelte-tktxvg"&&(ve.textContent=ke),this.h()},h(){p(W,"class","text-end"),p(m,"class","table-group-divider"),p(e,"class","table table-striped table-hover")},m(ne,Ce){de(ne,e,Ce),h(e,n),h(e,s),h(e,u);for(let P=0;P<c.length;P+=1)c[P]&&c[P].m(u,null);h(e,y),h(e,m),h(m,v),h(v,k),h(v,L),h(v,j),h(v,Q),h(v,W),h(v,S),h(v,D);for(let P=0;P<Te.length;P+=1)Te[P]&&Te[P].m(D,null);h(v,G),h(v,A),de(ne,se,Ce);for(let P=0;P<pe.length;P+=1)pe[P]&&pe[P].m(ne,Ce);de(ne,oe,Ce),de(ne,ve,Ce)},p(ne,Ce){if(Ce&4&&(Fe=Ge(ne[2]),c=jr(c,Ce,_e,1,ne,Fe,g,u,Fr,Lo,null,Ao)),Ce&4){Ee=Ge(ne[5]);let P;for(P=0;P<Ee.length;P+=1){const K=Oo(ne,Ee,P);Te[P]?Te[P].p(K,Ce):(Te[P]=Mo(K),Te[P].c(),Te[P].m(D,null))}for(;P<Te.length;P+=1)Te[P].d(1);Te.length=Ee.length}Ce&4&&(qe=Ge(ne[2]),pe=jr(pe,Ce,Le,1,ne,qe,ae,oe.parentNode,Fr,Ro,oe,Co))},d(ne){ne&&(b(e),b(se),b(oe),b(ve));for(let Ce=0;Ce<c.length;Ce+=1)c[Ce].d();Mt(Te,ne);for(let Ce=0;Ce<pe.length;Ce+=1)pe[Ce].d(ne)}}}function Lo(i,e){let n,r,s=e[6].description+"",u,c,g,y=e[6].receiptDateString+"",m,v,k,L=e[6].receiptType+"",j,Q,W,z=wt[e[6].currency].symbol+"",S,D,G=e[6].total.toFixed(2)+"",A,se;return{key:i,first:null,c(){n=C("tr"),r=C("td"),u=Me(s),c=re(),g=C("td"),m=Me(y),v=re(),k=C("td"),j=Me(L),Q=re(),W=C("td"),S=Me(z),D=re(),A=Me(G),se=re(),this.h()},l(pe){n=O(pe,"TR",{});var ae=H(n);r=O(ae,"TD",{});var oe=H(r);u=Re(oe,s),oe.forEach(b),c=ie(ae),g=O(ae,"TD",{});var ve=H(g);m=Re(ve,y),ve.forEach(b),v=ie(ae),k=O(ae,"TD",{});var ke=H(k);j=Re(ke,L),ke.forEach(b),Q=ie(ae),W=O(ae,"TD",{});var Fe=H(W);S=Re(Fe,z),D=ie(Fe),A=Re(Fe,G),Fe.forEach(b),se=ie(ae),ae.forEach(b),this.h()},h(){this.first=n},m(pe,ae){de(pe,n,ae),h(n,r),h(r,u),h(n,c),h(n,g),h(g,m),h(n,v),h(n,k),h(k,j),h(n,Q),h(n,W),h(W,S),h(W,D),h(W,A),h(n,se)},p(pe,ae){e=pe,ae&4&&s!==(s=e[6].description+"")&&Xe(u,s),ae&4&&y!==(y=e[6].receiptDateString+"")&&Xe(m,y),ae&4&&L!==(L=e[6].receiptType+"")&&Xe(j,L),ae&4&&z!==(z=wt[e[6].currency].symbol+"")&&Xe(S,z),ae&4&&G!==(G=e[6].total.toFixed(2)+"")&&Xe(A,G)},d(pe){pe&&b(n)}}}function Mo(i){let e=wt[i[9]].symbol+"",n,r,s=i[2].filter(y).reduce(No,0).toFixed(2)+"",u,c,g;function y(...m){return i[4](i[9],...m)}return{c(){n=Me(e),r=re(),u=Me(s),c=re(),g=C("br")},l(m){n=Re(m,e),r=ie(m),u=Re(m,s),c=ie(m),g=O(m,"BR",{})},m(m,v){de(m,n,v),de(m,r,v),de(m,u,v),de(m,c,v),de(m,g,v)},p(m,v){i=m,v&4&&e!==(e=wt[i[9]].symbol+"")&&Xe(n,e),v&4&&s!==(s=i[2].filter(y).reduce(No,0).toFixed(2)+"")&&Xe(u,s)},d(m){m&&(b(n),b(r),b(u),b(c),b(g))}}}function Ro(i,e){let n,r=e[6].description+"",s,u,c,g=wt[e[6].currency].symbol+"",y,m,v=e[6].total.toFixed(2)+"",k,L,j,Q,W;return{key:i,first:null,c(){n=C("div"),s=Me(r),u=re(),c=C("strong"),y=Me(g),m=re(),k=Me(v),L=re(),j=C("img"),this.h()},l(z){n=O(z,"DIV",{class:!0});var S=H(n);s=Re(S,r),u=ie(S),c=O(S,"STRONG",{});var D=H(c);y=Re(D,g),m=ie(D),k=Re(D,v),D.forEach(b),S.forEach(b),L=ie(z),j=O(z,"IMG",{class:!0,alt:!0,src:!0}),this.h()},h(){p(n,"class","page-print mb-2"),p(j,"class","img-print"),p(j,"alt",Q="receipt with description '"+e[6].description+"'"),Kr(j.src,W=URL.createObjectURL(e[6].imageData))||p(j,"src",W),this.first=n},m(z,S){de(z,n,S),h(n,s),h(n,u),h(n,c),h(c,y),h(c,m),h(c,k),de(z,L,S),de(z,j,S)},p(z,S){e=z,S&4&&r!==(r=e[6].description+"")&&Xe(s,r),S&4&&g!==(g=wt[e[6].currency].symbol+"")&&Xe(y,g),S&4&&v!==(v=e[6].total.toFixed(2)+"")&&Xe(k,v),S&4&&Q!==(Q="receipt with description '"+e[6].description+"'")&&p(j,"alt",Q),S&4&&!Kr(j.src,W=URL.createObjectURL(e[6].imageData))&&p(j,"src",W)},d(z){z&&(b(n),b(L),b(j))}}}function Qu(i){let e,n=i[0]&&Po(i);return{c(){e=C("div"),n&&n.c()},l(r){e=O(r,"DIV",{});var s=H(e);n&&n.l(s),s.forEach(b)},m(r,s){de(r,e,s),n&&n.m(e,null)},p(r,[s]){r[0]?n?n.p(r,s):(n=Po(r),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},i:bt,o:bt,d(r){r&&b(e),n&&n.d()}}}const No=(i,e)=>i+e.total;function $u(i,e,n){let r,s=bt,u=()=>(s(),s=ur(y,v=>n(2,r=v)),y);i.$$.on_destroy.push(()=>s());let{tripId:c=-1}=e,g,y;c>-1&&Kt.trips.get(c).then(v=>{n(0,g=v),u(n(1,y=zr(()=>Kt.receipts.where({tripId:c}).reverse().sortBy("receiptDate"))))});const m=(v,k)=>k.currency==v;return i.$$set=v=>{"tripId"in v&&n(3,c=v.tripId)},[g,y,r,c,m]}class Xu extends on{constructor(e){super(),sn(this,e,$u,Qu,nn,{tripId:3})}}function ec(i){let e,n,r='<span class="fs-5 fw-bold text-light">Trippin&#39;</span> <a class="btn btn-outline-light" href="#/add">+ Add Trip</a>',s,u,c,g='<span class="fs-5 fw-bold text-light">Trippin&#39;</span> <a class="btn btn-outline-light" href="#/add">+ Add Trip</a>',y,m,v,k,L,j,Q,W;v=new hl({props:{tripId:i[3]}});const z=[sc,oc,ac,ic,rc,nc],S=[];function D(G,A){return G[4]==="add"?0:G[4]==="trip"&&G[3]>-1?1:G[4]==="update"&&G[3]>-1?2:G[4]==="addreceipt"&&G[3]>-1?3:G[4]==="editreceipt"&&G[3]>-1?4:5}return j=D(i),Q=S[j]=z[j](i),{c(){e=C("main"),n=C("div"),n.innerHTML=r,s=re(),u=C("div"),c=C("div"),c.innerHTML=g,y=re(),m=C("div"),Ut(v.$$.fragment),k=re(),L=C("div"),Q.c(),this.h()},l(G){e=O(G,"MAIN",{class:!0});var A=H(e);n=O(A,"DIV",{class:!0,"data-svelte-h":!0}),We(n)!=="svelte-1qzkoji"&&(n.innerHTML=r),s=ie(A),u=O(A,"DIV",{class:!0});var se=H(u);c=O(se,"DIV",{class:!0,"data-svelte-h":!0}),We(c)!=="svelte-5pi3yv"&&(c.innerHTML=g),y=ie(se),m=O(se,"DIV",{class:!0});var pe=H(m);Vt(v.$$.fragment,pe),pe.forEach(b),se.forEach(b),k=ie(A),L=O(A,"DIV",{class:!0});var ae=H(L);Q.l(ae),ae.forEach(b),A.forEach(b),this.h()},h(){p(n,"class","listTitle listTitleSmall d-flex align-items-center justify-content-between flex-shrink-0 p-3 link-body-emphasis text-decoration-none border-bottom"),p(c,"class","listTitle listTitleLarge d-flex align-items-center justify-content-between flex-shrink-0 p-3 link-body-emphasis text-decoration-none border-bottom"),p(m,"class","list-group list-group-flush border-bottom scrollarea"),p(u,"class","tripList d-flex flex-column align-items-stretch flex-shrink-0 bg-body-tertiary"),p(L,"class","d-flex p-3 w-100"),p(e,"class","d-flex flex-nowrap")},m(G,A){de(G,e,A),h(e,n),h(e,s),h(e,u),h(u,c),h(u,y),h(u,m),qt(v,m,null),h(e,k),h(e,L),S[j].m(L,null),W=!0},p(G,A){const se={};A&8&&(se.tripId=G[3]),v.$set(se);let pe=j;j=D(G),j===pe?S[j].p(G,A):(Vn(),st(S[pe],1,1,()=>{S[pe]=null}),qn(),Q=S[j],Q?Q.p(G,A):(Q=S[j]=z[j](G),Q.c()),rt(Q,1),Q.m(L,null))},i(G){W||(rt(v.$$.fragment,G),rt(Q),W=!0)},o(G){st(v.$$.fragment,G),st(Q),W=!1},d(G){G&&b(e),zt(v),S[j].d()}}}function tc(i){let e,n;return e=new Xu({props:{tripId:i[3]}}),{c(){Ut(e.$$.fragment)},l(r){Vt(e.$$.fragment,r)},m(r,s){qt(e,r,s),n=!0},p(r,s){const u={};s&8&&(u.tripId=r[3]),e.$set(u)},i(r){n||(rt(e.$$.fragment,r),n=!0)},o(r){st(e.$$.fragment,r),n=!1},d(r){zt(e,r)}}}function nc(i){let e,n;return e=new Ju({}),{c(){Ut(e.$$.fragment)},l(r){Vt(e.$$.fragment,r)},m(r,s){qt(e,r,s),n=!0},p:bt,i(r){n||(rt(e.$$.fragment,r),n=!0)},o(r){st(e.$$.fragment,r),n=!1},d(r){zt(e,r)}}}function rc(i){let e,n;return e=new Yu({props:{receiptId:i[5]}}),{c(){Ut(e.$$.fragment)},l(r){Vt(e.$$.fragment,r)},m(r,s){qt(e,r,s),n=!0},p(r,s){const u={};s&32&&(u.receiptId=r[5]),e.$set(u)},i(r){n||(rt(e.$$.fragment,r),n=!0)},o(r){st(e.$$.fragment,r),n=!1},d(r){zt(e,r)}}}function ic(i){let e,n;return e=new zu({props:{tripId:i[3]}}),{c(){Ut(e.$$.fragment)},l(r){Vt(e.$$.fragment,r)},m(r,s){qt(e,r,s),n=!0},p(r,s){const u={};s&8&&(u.tripId=r[3]),e.$set(u)},i(r){n||(rt(e.$$.fragment,r),n=!0)},o(r){st(e.$$.fragment,r),n=!1},d(r){zt(e,r)}}}function ac(i){let e,n;return e=new gl({props:{tripId:i[3]}}),{c(){Ut(e.$$.fragment)},l(r){Vt(e.$$.fragment,r)},m(r,s){qt(e,r,s),n=!0},p(r,s){const u={};s&8&&(u.tripId=r[3]),e.$set(u)},i(r){n||(rt(e.$$.fragment,r),n=!0)},o(r){st(e.$$.fragment,r),n=!1},d(r){zt(e,r)}}}function oc(i){let e=i[3],n,r,s=Bo(i);return{c(){s.c(),n=Ft()},l(u){s.l(u),n=Ft()},m(u,c){s.m(u,c),de(u,n,c),r=!0},p(u,c){c&8&&nn(e,e=u[3])?(Vn(),st(s,1,1,bt),qn(),s=Bo(u),s.c(),rt(s,1),s.m(n.parentNode,n)):s.p(u,c)},i(u){r||(rt(s),r=!0)},o(u){st(s),r=!1},d(u){u&&b(n),s.d(u)}}}function sc(i){let e,n;return e=new Ys({}),{c(){Ut(e.$$.fragment)},l(r){Vt(e.$$.fragment,r)},m(r,s){qt(e,r,s),n=!0},p:bt,i(r){n||(rt(e.$$.fragment,r),n=!0)},o(r){st(e.$$.fragment,r),n=!1},d(r){zt(e,r)}}}function Bo(i){let e,n;return e=new cl({props:{tripId:i[3]}}),{c(){Ut(e.$$.fragment)},l(r){Vt(e.$$.fragment,r)},m(r,s){qt(e,r,s),n=!0},p(r,s){const u={};s&8&&(u.tripId=r[3]),e.$set(u)},i(r){n||(rt(e.$$.fragment,r),n=!0)},o(r){st(e.$$.fragment,r),n=!1},d(r){zt(e,r)}}}function lc(i){let e,n,r,s;const u=[tc,ec],c=[];function g(y,m){return y[4]==="print"&&y[3]>-1?0:1}return e=g(i),n=c[e]=u[e](i),{c(){n.c(),r=Ft()},l(y){n.l(y),r=Ft()},m(y,m){c[e].m(y,m),de(y,r,m),s=!0},p(y,[m]){let v=e;e=g(y),e===v?c[e].p(y,m):(Vn(),st(c[v],1,1,()=>{c[v]=null}),qn(),n=c[e],n?n.p(y,m):(n=c[e]=u[e](y),n.c()),rt(n,1),n.m(r.parentNode,r))},i(y){s||(rt(n),s=!0)},o(y){st(n),s=!1},d(y){y&&b(r),c[e].d(y)}}}function uc(i,e,n){let r,s,u,c,g,y=bt,m=()=>(y(),y=ur(r,G=>n(3,g=G)),r),v,k=bt,L=()=>(k(),k=ur(u,G=>n(4,v=G)),u),j,Q=bt,W=()=>(Q(),Q=ur(s,G=>n(5,j=G)),s),z;cr(i,Ss,G=>n(6,z=G)),i.$$.on_destroy.push(()=>y()),i.$$.on_destroy.push(()=>k()),i.$$.on_destroy.push(()=>Q());const S=new RegExp("#/(?<route>[a-z]+)(?<tripId>/[0-9]+|$)");function D(){c?(ar(u,v=c.groups.route||"",v),v=="editreceipt"?ar(s,j=parseInt(c.groups.tripId.replace("/","")||"-1"),j):ar(r,g=parseInt(c.groups.tripId.replace("/","")||"-1"),g)):(ar(u,v="",v),ar(r,g=-1,g))}return ks(()=>{D()}),i.$$.update=()=>{i.$$.dirty&64&&(c=S.exec(z.url.hash))},m(n(2,r=Mr(-1))),W(n(1,s=Mr(-1))),L(n(0,u=Mr(""))),[u,s,r,g,v,j,z]}class cc extends on{constructor(e){super(),sn(this,e,uc,lc,nn,{})}}function fc(i){let e,n,r;return n=new cc({}),{c(){e=re(),Ut(n.$$.fragment),this.h()},l(s){Es("svelte-1mxz4jk",document.head).forEach(b),e=ie(s),Vt(n.$$.fragment,s),this.h()},h(){document.title="Trippin'"},m(s,u){de(s,e,u),qt(n,s,u),r=!0},p:bt,i(s){r||(rt(n.$$.fragment,s),r=!0)},o(s){st(n.$$.fragment,s),r=!1},d(s){s&&b(e),zt(n,s)}}}class Cc extends on{constructor(e){super(),sn(this,e,null,fc,nn,{})}}export{Cc as component};
