import{C as kn,s as nn,p as Ft,k as fe,n as kt,i as b,e as O,t as Le,b as re,d as A,f as x,h as Me,j as ie,v as p,l as h,S as Ze,T as Br,x as tn,c as Ko,U as Yt,V as We,W as Zt,X as Jt,Y as In,u as Fo,g as jo,a as Uo,Z as Mt,_ as Vo,$ as ot,m as Xe,a0 as bs,a1 as Tt,a2 as ca,o as cr,w as Oi,E as Un,a3 as Gn,D as qo,a4 as ws,a5 as ur,a6 as Hr,a7 as Kr,a8 as ks,a9 as ar,aa as Es}from"../chunks/scheduler.B6UoHciB.js";import{t as rt,S as on,i as sn,f as Ln,b as Ut,d as Vt,m as qt,a as lt,e as zt,g as Vn,c as qn,h as fa}from"../chunks/index.CC47NhgM.js";import{w as Mr}from"../chunks/entry.DsxftgY2.js";import{_ as Ds}from"../chunks/preload-helper.D6kgxu3v.js";import{p as Ss}from"../chunks/stores.CPlmB_89.js";function Ge(i){return(i==null?void 0:i.length)!==void 0?i:Array.from(i)}function Fr(i,e){i.d(1),e.delete(i.key)}function jr(i,e,n,r,s,c,u,g,_,m,v,k){let L=i.length,U=c.length,X=L;const W={};for(;X--;)W[i[X].key]=X;const z=[],S=new Map,D=new Map,Y=[];for(X=U;X--;){const ne=k(s,c,X),se=n(ne);let we=u.get(se);we?Y.push(()=>we.p(ne,e)):(we=m(se,ne),we.c()),S.set(se,z[X]=we),se in W&&D.set(se,Math.abs(X-W[se]))}const P=new Set,ae=new Set;function he(ne){rt(ne,1),ne.m(g,v),u.set(ne.key,ne),v=ne.first,U--}for(;L&&U;){const ne=z[U-1],se=i[L-1],we=ne.key,ve=se.key;ne===se?(v=ne.first,L--,U--):S.has(ve)?!u.has(we)||P.has(we)?he(ne):ae.has(ve)?L--:D.get(we)>D.get(ve)?(ae.add(we),he(ne)):(P.add(ve),L--):(_(se,u),L--)}for(;L--;){const ne=i[L];S.has(ne.key)||_(ne,u)}for(;U;)he(z[U-1]);return kn(Y),z}function da(i){let e,n,r=("00"+i[0].getHours()).slice(-2)+"",s,c,u,g=("00"+i[0].getMinutes()).slice(-2)+"",_,m,v,k,L=i[1]!=="minute"&&ha(i);return{c(){e=O("div"),n=O("span"),s=Le(r),c=Le(`:
		`),u=O("span"),_=Le(g),m=re(),L&&L.c(),this.h()},l(U){e=A(U,"DIV",{class:!0,role:!0});var X=x(e);n=A(X,"SPAN",{role:!0,"aria-label":!0,tabindex:!0,contenteditable:!0,inputmode:!0,class:!0});var W=x(n);s=Me(W,r),W.forEach(b),c=Me(X,`:
		`),u=A(X,"SPAN",{role:!0,"aria-label":!0,tabindex:!0,contenteditable:!0,inputmode:!0,class:!0});var z=x(u);_=Me(z,g),z.forEach(b),m=ie(X),L&&L.l(X),X.forEach(b),this.h()},h(){p(n,"role","spinbutton"),p(n,"aria-label","Hours"),p(n,"tabindex","0"),p(n,"contenteditable",""),p(n,"inputmode","numeric"),p(n,"class","svelte-mzlxg7"),p(u,"role","spinbutton"),p(u,"aria-label","Minutes"),p(u,"tabindex","0"),p(u,"contenteditable",""),p(u,"inputmode","numeric"),p(u,"class","svelte-mzlxg7"),p(e,"class","time-picker svelte-mzlxg7"),p(e,"role","none")},m(U,X){fe(U,e,X),h(e,n),h(n,s),i[6](n),h(e,c),h(e,u),h(u,_),i[7](u),h(e,m),L&&L.m(e,null),v||(k=[Ze(n,"keydown",i[3]),Ze(n,"input",i[4]),Ze(n,"focus",Ur),Ze(u,"keydown",i[3]),Ze(u,"input",i[4]),Ze(u,"focus",Ur),Ze(e,"mousedown",i[10])],v=!0)},p(U,X){X&1&&r!==(r=("00"+U[0].getHours()).slice(-2)+"")&&Br(s,r),X&1&&g!==(g=("00"+U[0].getMinutes()).slice(-2)+"")&&Br(_,g),U[1]!=="minute"?L?L.p(U,X):(L=ha(U),L.c(),L.m(e,null)):L&&(L.d(1),L=null)},d(U){U&&b(e),i[6](null),i[7](null),L&&L.d(),v=!1,kn(k)}}}function ha(i){let e,n,r=("00"+i[0].getSeconds()).slice(-2)+"",s,c,u,g,_,m=i[1]!=="second"&&pa(i);return{c(){e=Le(":"),n=O("span"),s=Le(r),c=re(),m&&m.c(),u=Ft(),this.h()},l(v){e=Me(v,":"),n=A(v,"SPAN",{role:!0,"aria-label":!0,tabindex:!0,contenteditable:!0,inputmode:!0,class:!0});var k=x(n);s=Me(k,r),k.forEach(b),c=ie(v),m&&m.l(v),u=Ft(),this.h()},h(){p(n,"role","spinbutton"),p(n,"aria-label","Seconds"),p(n,"tabindex","0"),p(n,"contenteditable",""),p(n,"inputmode","numeric"),p(n,"class","svelte-mzlxg7")},m(v,k){fe(v,e,k),fe(v,n,k),h(n,s),i[8](n),fe(v,c,k),m&&m.m(v,k),fe(v,u,k),g||(_=[Ze(n,"keydown",i[3]),Ze(n,"input",i[4]),Ze(n,"focus",Ur)],g=!0)},p(v,k){k&1&&r!==(r=("00"+v[0].getSeconds()).slice(-2)+"")&&Br(s,r),v[1]!=="second"?m?m.p(v,k):(m=pa(v),m.c(),m.m(u.parentNode,u)):m&&(m.d(1),m=null)},d(v){v&&(b(e),b(n),b(c),b(u)),i[8](null),m&&m.d(v),g=!1,kn(_)}}}function pa(i){let e,n,r=("000"+i[0].getMilliseconds()).slice(-3)+"",s,c,u;return{c(){e=Le("."),n=O("span"),s=Le(r),this.h()},l(g){e=Me(g,"."),n=A(g,"SPAN",{role:!0,"aria-label":!0,tabindex:!0,contenteditable:!0,inputmode:!0,class:!0});var _=x(n);s=Me(_,r),_.forEach(b),this.h()},h(){p(n,"role","spinbutton"),p(n,"aria-label","Milliseconds"),p(n,"tabindex","0"),p(n,"contenteditable",""),p(n,"inputmode","numeric"),p(n,"class","svelte-mzlxg7")},m(g,_){fe(g,e,_),fe(g,n,_),h(n,s),i[9](n),c||(u=[Ze(n,"keydown",i[3]),Ze(n,"input",i[4]),Ze(n,"focus",Ur)],c=!0)},p(g,_){_&1&&r!==(r=("000"+g[0].getMilliseconds()).slice(-3)+"")&&Br(s,r)},d(g){g&&(b(e),b(n)),i[9](null),c=!1,kn(u)}}}function Ts(i){let e,n=i[1]&&da(i);return{c(){n&&n.c(),e=Ft()},l(r){n&&n.l(r),e=Ft()},m(r,s){n&&n.m(r,s),fe(r,e,s)},p(r,[s]){r[1]?n?n.p(r,s):(n=da(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:kt,o:kt,d(r){r&&b(e),n&&n.d(r)}}}function Rr(i){const e=window.getSelection(),n=document.createRange();n.selectNodeContents(i),e==null||e.removeAllRanges(),e==null||e.addRange(n)}function Cs(i,e,n){return n&&i<0?e:n&&i>e?0:Math.max(0,Math.min(e,i))}function bi(i){const e=i.getAttribute("aria-label");if(e==="Hours")return{label:e,len:2,max:23};if(e==="Minutes")return{label:e,len:2,max:59};if(e==="Seconds")return{label:e,len:2,max:59};if(e==="Milliseconds")return{label:e,len:3,max:999};throw new Error("Invalid label "+e)}function wi(i,e){return parseInt(i.replace(/[^\d]/g,"").slice(-e))}function Ur(i){Rr(i.currentTarget)}function Os(i,e,n){let{browseDate:r}=e,{timePrecision:s}=e,{setTime:c}=e,u=[];function g(S){if(S.key==="ArrowUp"||S.key==="ArrowDown"){const D=_(S.currentTarget),Y=S.key==="ArrowUp"?1:-1;v(S.currentTarget,D+Y,!0),S.preventDefault(),Rr(S.currentTarget)}else if(S.key==="ArrowLeft"||S.key==="ArrowRight"||":;-,.".includes(S.key)){const D=u.indexOf(S.currentTarget),Y=S.key==="ArrowLeft"?-1:1,P=u[D+Y];S.preventDefault(),P&&(P.focus(),Rr(P))}}function _(S){const D=bi(S).label;return D==="Hours"?r.getHours():D==="Minutes"?r.getMinutes():D==="Seconds"?r.getSeconds():r.getMilliseconds()}function m(S){const D=("00"+S.getHours()).slice(-2),Y=("00"+S.getMinutes()).slice(-2),P=("00"+S.getSeconds()).slice(-2),ae=("000"+S.getMilliseconds()).slice(-3);u[0]&&u[0].innerText!==D&&n(2,u[0].innerText=D,u),u[1]&&u[1].innerText!==Y&&n(2,u[1].innerText=Y,u),u[2]&&u[2].innerText!==P&&n(2,u[2].innerText=P,u),u[3]&&u[3].innerText!==ae&&n(2,u[3].innerText=ae,u)}function v(S,D,Y=!1){const P=bi(S);D=Cs(D,P.max,Y),P.label==="Hours"?r.setHours(D):P.label==="Minutes"?r.setMinutes(D):P.label==="Seconds"?r.setSeconds(D):P.label==="Milliseconds"&&r.setMilliseconds(D),n(0,r=c(r)),m(r)}function k(S){const D=S,Y=bi(D.currentTarget);let P;if(D.inputType==="insertText"){const ae="000"+_(D.currentTarget);P=wi(ae+D.currentTarget.innerText,Y.len),P>Y.max&&D.data&&(P=wi(D.data,Y.len))}else P=wi("000"+D.currentTarget.innerText,Y.len);v(D.currentTarget,P),Rr(D.currentTarget)}function L(S){tn[S?"unshift":"push"](()=>{u[0]=S,n(2,u)})}function U(S){tn[S?"unshift":"push"](()=>{u[1]=S,n(2,u)})}function X(S){tn[S?"unshift":"push"](()=>{u[2]=S,n(2,u)})}function W(S){tn[S?"unshift":"push"](()=>{u[3]=S,n(2,u)})}const z=S=>{S.target instanceof HTMLElement&&S.target.tagName==="SPAN"&&(S.target.focus(),S.preventDefault())};return i.$$set=S=>{"browseDate"in S&&n(0,r=S.browseDate),"timePrecision"in S&&n(1,s=S.timePrecision),"setTime"in S&&n(5,c=S.setTime)},i.$$.update=()=>{i.$$.dirty&1&&m(r)},[r,s,u,g,k,c,L,U,X,W,z]}class As extends on{constructor(e){super(),sn(this,e,Os,Ts,nn,{browseDate:0,timePrecision:1,setTime:5})}}function Ps(i){return i%4===0&&i%100!==0||i%400===0}function fr(i,e){return[31,Ps(i)?29:28,31,30,31,30,31,31,30,31,30,31][e]}function ma(i,e){let n="";if(i)for(const r of e)typeof r=="string"?n+=r:n+=r.toString(i);return n}function ki(i,e){const n=fr(i,e),r=[];for(let s=0;s<n;s++)r.push({year:i,month:e,number:s+1});return r}function Is(i,e){const n=i.getFullYear(),r=i.getMonth(),s=new Date(n,r,1).getDay();let c=[];const u=(s-e+7)%7;if(u>0){let v=r-1,k=n;v===-1&&(v=11,k=n-1),c=ki(k,v).slice(-u)}c=c.concat(ki(n,r));let g=r+1,_=n;g===12&&(g=0,_=n+1);const m=42-c.length;return c=c.concat(ki(_,g).slice(0,m)),c}function Ls(){return{weekdays:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekStartsOn:1}}function zo(i){const e=Ls();return typeof i.weekStartsOn=="number"&&(e.weekStartsOn=i.weekStartsOn),i.months&&(e.months=i.months),i.shortMonths&&(e.shortMonths=i.shortMonths),i.weekdays&&(e.weekdays=i.weekdays),e}function ga(i,e,n){const r=i.slice();return r[36]=e[n],r[38]=n,r}function va(i,e,n){const r=i.slice();return r[39]=e[n],r}function _a(i,e,n){const r=i.slice();return r[36]=e[n],r[43]=n,r}function ya(i,e,n){const r=i.slice();return r[44]=e[n],r}function ba(i,e,n){const r=i.slice();return r[44]=e[n],r}function wa(i,e,n){const r=i.slice();return r[49]=e[n],r[43]=n,r}function ka(i,e,n){const r=i.slice();return r[49]=e[n],r[43]=n,r}function Ea(i){let e,n=i[49]+"",r,s;return{c(){e=O("option"),r=Le(n),this.h()},l(c){e=A(c,"OPTION",{});var u=x(e);r=Me(u,n),u.forEach(b),this.h()},h(){e.disabled=s=new Date(i[9],i[43],fr(i[9],i[43]),23,59,59,999)<i[2]||new Date(i[9],i[43])>i[3],e.__value=i[43],ot(e,e.__value)},m(c,u){fe(c,e,u),h(e,r)},p(c,u){u[0]&32&&n!==(n=c[49]+"")&&Xe(r,n),u[0]&588&&s!==(s=new Date(c[9],c[43],fr(c[9],c[43]),23,59,59,999)<c[2]||new Date(c[9],c[43])>c[3])&&(e.disabled=s)},d(c){c&&b(e)}}}function Da(i){let e,n=i[49]+"",r,s;return{c(){e=O("option"),r=Le(n),this.h()},l(c){e=A(c,"OPTION",{});var u=x(e);r=Me(u,n),u.forEach(b),this.h()},h(){e.__value=i[43],ot(e,e.__value),e.selected=s=i[43]===i[8]},m(c,u){fe(c,e,u),h(e,r)},p(c,u){u[0]&32&&n!==(n=c[49]+"")&&Xe(r,n),u[0]&256&&s!==(s=c[43]===c[8])&&(e.selected=s)},d(c){c&&b(e)}}}function Sa(i){let e,n=i[44]+"",r,s;return{c(){e=O("option"),r=Le(n),this.h()},l(c){e=A(c,"OPTION",{});var u=x(e);r=Me(u,n),u.forEach(b),this.h()},h(){e.__value=s=i[44],ot(e,e.__value)},m(c,u){fe(c,e,u),h(e,r)},p(c,u){u[0]&64&&n!==(n=c[44]+"")&&Xe(r,n),u[0]&64&&s!==(s=c[44])&&(e.__value=s,ot(e,e.__value))},d(c){c&&b(e)}}}function Ta(i){let e,n=i[44]+"",r,s,c;return{c(){e=O("option"),r=Le(n),this.h()},l(u){e=A(u,"OPTION",{});var g=x(e);r=Me(g,n),g.forEach(b),this.h()},h(){e.__value=s=i[44],ot(e,e.__value),e.selected=c=i[44]===i[4].getFullYear()},m(u,g){fe(u,e,g),h(e,r)},p(u,g){g[0]&64&&n!==(n=u[44]+"")&&Xe(r,n),g[0]&64&&s!==(s=u[44])&&(e.__value=s,ot(e,e.__value)),g[0]&80&&c!==(c=u[44]===u[4].getFullYear())&&(e.selected=c)},d(u){u&&b(e)}}}function Ms(i){let e,n=i[5].weekdays[i[5].weekStartsOn+i[43]-7]+"",r;return{c(){e=O("div"),r=Le(n),this.h()},l(s){e=A(s,"DIV",{class:!0});var c=x(e);r=Me(c,n),c.forEach(b),this.h()},h(){p(e,"class","header-cell svelte-w239uu")},m(s,c){fe(s,e,c),h(e,r)},p(s,c){c[0]&32&&n!==(n=s[5].weekdays[s[5].weekStartsOn+s[43]-7]+"")&&Xe(r,n)},d(s){s&&b(e)}}}function Rs(i){let e,n=i[5].weekdays[i[5].weekStartsOn+i[43]]+"",r;return{c(){e=O("div"),r=Le(n),this.h()},l(s){e=A(s,"DIV",{class:!0});var c=x(e);r=Me(c,n),c.forEach(b),this.h()},h(){p(e,"class","header-cell svelte-w239uu")},m(s,c){fe(s,e,c),h(e,r)},p(s,c){c[0]&32&&n!==(n=s[5].weekdays[s[5].weekStartsOn+s[43]]+"")&&Xe(r,n)},d(s){s&&b(e)}}}function Ca(i){let e;function n(c,u){return c[43]+c[5].weekStartsOn<7?Rs:Ms}let r=n(i),s=r(i);return{c(){s.c(),e=Ft()},l(c){s.l(c),e=Ft()},m(c,u){s.m(c,u),fe(c,e,u)},p(c,u){r===(r=n(c))&&s?s.p(c,u):(s.d(1),s=r(c),s&&(s.c(),s.m(e.parentNode,e)))},d(c){c&&b(e),s.d(c)}}}function Oa(i){let e,n,r=i[39].number+"",s,c,u;function g(){return i[27](i[39])}return{c(){e=O("div"),n=O("span"),s=Le(r),this.h()},l(_){e=A(_,"DIV",{class:!0});var m=x(e);n=A(m,"SPAN",{class:!0});var v=x(n);s=Me(v,r),v.forEach(b),m.forEach(b),this.h()},h(){p(n,"class","svelte-w239uu"),p(e,"class","cell svelte-w239uu"),Tt(e,"disabled",!Ai(i[39],i[2],i[3])),Tt(e,"selected",i[0]&&i[39].year===i[0].getFullYear()&&i[39].month===i[0].getMonth()&&i[39].number===i[0].getDate()),Tt(e,"today",i[39].year===i[11].getFullYear()&&i[39].month===i[11].getMonth()&&i[39].number===i[11].getDate()),Tt(e,"other-month",i[39].month!==i[8])},m(_,m){fe(_,e,m),h(e,n),h(n,s),c||(u=Ze(e,"click",g),c=!0)},p(_,m){i=_,m[0]&128&&r!==(r=i[39].number+"")&&Xe(s,r),m[0]&140&&Tt(e,"disabled",!Ai(i[39],i[2],i[3])),m[0]&129&&Tt(e,"selected",i[0]&&i[39].year===i[0].getFullYear()&&i[39].month===i[0].getMonth()&&i[39].number===i[0].getDate()),m[0]&2176&&Tt(e,"today",i[39].year===i[11].getFullYear()&&i[39].month===i[11].getMonth()&&i[39].number===i[11].getDate()),m[0]&384&&Tt(e,"other-month",i[39].month!==i[8])},d(_){_&&b(e),c=!1,u()}}}function Aa(i){let e,n=Ge(i[7].slice(i[38]*7,i[38]*7+7)),r=[];for(let s=0;s<n.length;s+=1)r[s]=Oa(va(i,n,s));return{c(){e=O("div");for(let s=0;s<r.length;s+=1)r[s].c();this.h()},l(s){e=A(s,"DIV",{class:!0});var c=x(e);for(let u=0;u<r.length;u+=1)r[u].l(c);c.forEach(b),this.h()},h(){p(e,"class","week svelte-w239uu")},m(s,c){fe(s,e,c);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null)},p(s,c){if(c[0]&18829){n=Ge(s[7].slice(s[38]*7,s[38]*7+7));let u;for(u=0;u<n.length;u+=1){const g=va(s,n,u);r[u]?r[u].p(g,c):(r[u]=Oa(g),r[u].c(),r[u].m(e,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=n.length}},d(s){s&&b(e),Mt(r,s)}}}function Ns(i){let e,n,r,s,c='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="svelte-w239uu"><path d="M5 3l3.057-3 11.943 12-11.943 12-3.057-3 9-9z" transform="rotate(180, 12, 12)"></path></svg>',u,g,_,m,v,k,L,U,X,W,z,S,D,Y,P,ae,he,ne,se='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="svelte-w239uu"><path d="M5 3l3.057-3 11.943 12-11.943 12-3.057-3 9-9z"></path></svg>',we,ve,Ne,be,Ee,De,qe,Ue,oe,Se,C=Ge(i[5].months),K=[];for(let F=0;F<C.length;F+=1)K[F]=Ea(ka(i,C,F));let $=Ge(i[5].months),pe=[];for(let F=0;F<$.length;F+=1)pe[F]=Da(wa(i,$,F));let w=Ge(i[6]),J=[];for(let F=0;F<w.length;F+=1)J[F]=Sa(ba(i,w,F));let Ae=Ge(i[6]),de=[];for(let F=0;F<Ae.length;F+=1)de[F]=Ta(ya(i,Ae,F));let Ve=Ge(Array(7)),Pe=[];for(let F=0;F<Ve.length;F+=1)Pe[F]=Ca(_a(i,Ve,F));let ge=Ge(Array(6)),H=[];for(let F=0;F<ge.length;F+=1)H[F]=Aa(ga(i,ge,F));function le(F){i[28](F)}let _e={timePrecision:i[1],setTime:i[10]};i[4]!==void 0&&(_e.browseDate=i[4]),Ee=new As({props:_e}),tn.push(()=>Ln(Ee,"browseDate",le));const ze=i[21].default,Ye=Ko(ze,i,i[20],null);return{c(){e=O("div"),n=O("div"),r=O("div"),s=O("button"),s.innerHTML=c,u=re(),g=O("div"),_=O("select");for(let F=0;F<K.length;F+=1)K[F].c();m=re(),v=O("select");for(let F=0;F<pe.length;F+=1)pe[F].c();k=re(),L=Yt("svg"),U=Yt("path"),X=re(),W=O("div"),z=O("select");for(let F=0;F<J.length;F+=1)J[F].c();S=re(),D=O("select");for(let F=0;F<de.length;F+=1)de[F].c();Y=re(),P=Yt("svg"),ae=Yt("path"),he=re(),ne=O("button"),ne.innerHTML=se,we=re(),ve=O("div");for(let F=0;F<Pe.length;F+=1)Pe[F].c();Ne=re();for(let F=0;F<H.length;F+=1)H[F].c();be=re(),Ut(Ee.$$.fragment),qe=re(),Ye&&Ye.c(),this.h()},l(F){e=A(F,"DIV",{class:!0,tabindex:!0});var Te=x(e);n=A(Te,"DIV",{class:!0,tabindex:!0});var ye=x(n);r=A(ye,"DIV",{class:!0});var ue=x(r);s=A(ue,"BUTTON",{type:!0,class:!0,tabindex:!0,"data-svelte-h":!0}),We(s)!=="svelte-t4cock"&&(s.innerHTML=c),u=ie(ue),g=A(ue,"DIV",{class:!0});var xe=x(g);_=A(xe,"SELECT",{class:!0});var it=x(_);for(let Je=0;Je<K.length;Je+=1)K[Je].l(it);it.forEach(b),m=ie(xe),v=A(xe,"SELECT",{class:!0,tabindex:!0});var _t=x(v);for(let Je=0;Je<pe.length;Je+=1)pe[Je].l(_t);_t.forEach(b),k=ie(xe),L=Zt(xe,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,class:!0});var dt=x(L);U=Zt(dt,"path",{d:!0,transform:!0}),x(U).forEach(b),dt.forEach(b),xe.forEach(b),X=ie(ue),W=A(ue,"DIV",{class:!0});var ht=x(W);z=A(ht,"SELECT",{class:!0});var Dt=x(z);for(let Je=0;Je<J.length;Je+=1)J[Je].l(Dt);Dt.forEach(b),S=ie(ht),D=A(ht,"SELECT",{class:!0,tabindex:!0});var Pt=x(D);for(let Je=0;Je<de.length;Je+=1)de[Je].l(Pt);Pt.forEach(b),Y=ie(ht),P=Zt(ht,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,class:!0});var pt=x(P);ae=Zt(pt,"path",{d:!0,transform:!0}),x(ae).forEach(b),pt.forEach(b),ht.forEach(b),he=ie(ue),ne=A(ue,"BUTTON",{type:!0,class:!0,tabindex:!0,"data-svelte-h":!0}),We(ne)!=="svelte-1a006lp"&&(ne.innerHTML=se),ue.forEach(b),we=ie(ye),ve=A(ye,"DIV",{class:!0});var Ct=x(ve);for(let Je=0;Je<Pe.length;Je+=1)Pe[Je].l(Ct);Ct.forEach(b),Ne=ie(ye);for(let Je=0;Je<H.length;Je+=1)H[Je].l(ye);be=ie(ye),Vt(Ee.$$.fragment,ye),qe=ie(ye),Ye&&Ye.l(ye),ye.forEach(b),Te.forEach(b),this.h()},h(){p(s,"type","button"),p(s,"class","page-button svelte-w239uu"),p(s,"tabindex","-1"),p(_,"class","svelte-w239uu"),p(v,"class","dummy-select svelte-w239uu"),p(v,"tabindex","-1"),p(U,"d","M6 0l12 12-12 12z"),p(U,"transform","rotate(90, 12, 12)"),p(L,"xmlns","http://www.w3.org/2000/svg"),p(L,"width","24"),p(L,"height","24"),p(L,"viewBox","0 0 24 24"),p(L,"class","svelte-w239uu"),p(g,"class","dropdown month svelte-w239uu"),p(z,"class","svelte-w239uu"),p(D,"class","dummy-select svelte-w239uu"),p(D,"tabindex","-1"),p(ae,"d","M6 0l12 12-12 12z"),p(ae,"transform","rotate(90, 12, 12)"),p(P,"xmlns","http://www.w3.org/2000/svg"),p(P,"width","24"),p(P,"height","24"),p(P,"viewBox","0 0 24 24"),p(P,"class","svelte-w239uu"),p(W,"class","dropdown year svelte-w239uu"),p(ne,"type","button"),p(ne,"class","page-button svelte-w239uu"),p(ne,"tabindex","-1"),p(r,"class","top svelte-w239uu"),p(ve,"class","header svelte-w239uu"),p(n,"class","tab-container svelte-w239uu"),p(n,"tabindex","-1"),p(e,"class","date-time-picker svelte-w239uu"),p(e,"tabindex","0")},m(F,Te){fe(F,e,Te),h(e,n),h(n,r),h(r,s),h(r,u),h(r,g),h(g,_);for(let ye=0;ye<K.length;ye+=1)K[ye]&&K[ye].m(_,null);Jt(_,i[8]),h(g,m),h(g,v);for(let ye=0;ye<pe.length;ye+=1)pe[ye]&&pe[ye].m(v,null);h(g,k),h(g,L),h(L,U),h(r,X),h(r,W),h(W,z);for(let ye=0;ye<J.length;ye+=1)J[ye]&&J[ye].m(z,null);Jt(z,i[9]),h(W,S),h(W,D);for(let ye=0;ye<de.length;ye+=1)de[ye]&&de[ye].m(D,null);h(W,Y),h(W,P),h(P,ae),h(r,he),h(r,ne),h(n,we),h(n,ve);for(let ye=0;ye<Pe.length;ye+=1)Pe[ye]&&Pe[ye].m(ve,null);h(n,Ne);for(let ye=0;ye<H.length;ye+=1)H[ye]&&H[ye].m(n,null);h(n,be),qt(Ee,n,null),h(n,qe),Ye&&Ye.m(n,null),Ue=!0,oe||(Se=[Ze(s,"click",i[23]),Ze(_,"keydown",i[16]),Ze(_,"input",i[24]),Ze(z,"input",i[25]),Ze(z,"keydown",i[15]),Ze(ne,"click",i[26]),Ze(e,"focusout",i[22]),Ze(e,"keydown",i[17])],oe=!0)},p(F,Te){if(Te[0]&556){C=Ge(F[5].months);let ue;for(ue=0;ue<C.length;ue+=1){const xe=ka(F,C,ue);K[ue]?K[ue].p(xe,Te):(K[ue]=Ea(xe),K[ue].c(),K[ue].m(_,null))}for(;ue<K.length;ue+=1)K[ue].d(1);K.length=C.length}if((!Ue||Te[0]&256)&&Jt(_,F[8]),Te[0]&288){$=Ge(F[5].months);let ue;for(ue=0;ue<$.length;ue+=1){const xe=wa(F,$,ue);pe[ue]?pe[ue].p(xe,Te):(pe[ue]=Da(xe),pe[ue].c(),pe[ue].m(v,null))}for(;ue<pe.length;ue+=1)pe[ue].d(1);pe.length=$.length}if(Te[0]&64){w=Ge(F[6]);let ue;for(ue=0;ue<w.length;ue+=1){const xe=ba(F,w,ue);J[ue]?J[ue].p(xe,Te):(J[ue]=Sa(xe),J[ue].c(),J[ue].m(z,null))}for(;ue<J.length;ue+=1)J[ue].d(1);J.length=w.length}if((!Ue||Te[0]&576)&&Jt(z,F[9]),Te[0]&80){Ae=Ge(F[6]);let ue;for(ue=0;ue<Ae.length;ue+=1){const xe=ya(F,Ae,ue);de[ue]?de[ue].p(xe,Te):(de[ue]=Ta(xe),de[ue].c(),de[ue].m(D,null))}for(;ue<de.length;ue+=1)de[ue].d(1);de.length=Ae.length}if(Te[0]&32){Ve=Ge(Array(7));let ue;for(ue=0;ue<Ve.length;ue+=1){const xe=_a(F,Ve,ue);Pe[ue]?Pe[ue].p(xe,Te):(Pe[ue]=Ca(xe),Pe[ue].c(),Pe[ue].m(ve,null))}for(;ue<Pe.length;ue+=1)Pe[ue].d(1);Pe.length=Ve.length}if(Te[0]&18829){ge=Ge(Array(6));let ue;for(ue=0;ue<ge.length;ue+=1){const xe=ga(F,ge,ue);H[ue]?H[ue].p(xe,Te):(H[ue]=Aa(xe),H[ue].c(),H[ue].m(n,be))}for(;ue<H.length;ue+=1)H[ue].d(1);H.length=ge.length}const ye={};Te[0]&2&&(ye.timePrecision=F[1]),!De&&Te[0]&16&&(De=!0,ye.browseDate=F[4],In(()=>De=!1)),Ee.$set(ye),Ye&&Ye.p&&(!Ue||Te[0]&1048576)&&Fo(Ye,ze,F,F[20],Ue?Uo(ze,F[20],Te,null):jo(F[20]),null)},i(F){Ue||(rt(Ee.$$.fragment,F),rt(Ye,F),Ue=!0)},o(F){lt(Ee.$$.fragment,F),lt(Ye,F),Ue=!1},d(F){F&&b(e),Mt(K,F),Mt(pe,F),Mt(J,F),Mt(de,F),Mt(Pe,F),Mt(H,F),zt(Ee),Ye&&Ye.d(F),oe=!1,kn(Se)}}}function wn(i){return new Date(i.getTime())}function Vr(i,e,n){return i>n?wn(n):i<e?wn(e):wn(i)}function Ei(i,e,n){const r=Vr(i,e,n);return r.getTime()!==i.getTime()&&(i=new Date(r.getFullYear(),r.getMonth(),r.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()),i=Vr(i,e,n)),i}function Pa(i,e){let n=[];for(let r=i.getFullYear();r<=e.getFullYear();r++)n.push(r);return n}function Ai(i,e,n){const r=new Date(i.year,i.month,i.number),s=new Date(e.getFullYear(),e.getMonth(),e.getDate()),c=new Date(n.getFullYear(),n.getMonth(),n.getDate());return r>=s&&r<=c}function Bs(i,e,n){let r,s,c,u,{$$slots:g={},$$scope:_}=e;const m=Vo();let{value:v=null}=e;function k(w){w.getTime()!==(v==null?void 0:v.getTime())&&(n(4,P=Vr(w,D,Y)),n(0,v=wn(P)))}function L(w){w.getTime()!==(v==null?void 0:v.getTime())&&(n(4,P=Ei(w,D,Y)),n(0,v=wn(P)))}function U(w){n(4,P=Ei(w,D,Y)),!se&&v&&k(P)}function X(w){return n(4,P=Vr(w,D,Y)),v&&k(P),P}const W=new Date,z=new Date;let{timePrecision:S=null}=e,{min:D=new Date(z.getFullYear()-20,0,1)}=e,{max:Y=new Date(z.getFullYear(),11,31,23,59,59,999)}=e,P=wn(v||Ei(z,D,Y));function ae(w){P.getTime()!==(w==null?void 0:w.getTime())&&n(4,P=w?wn(w):P)}let he=Pa(D,Y),{locale:ne={}}=e,{browseWithoutSelecting:se=!1}=e;function we(w){P.setFullYear(w),U(P)}function ve(w){let J=P.getFullYear();w===12?(w=0,J++):w===-1&&(w=11,J--);const Ae=fr(J,w),de=Math.min(P.getDate(),Ae);U(new Date(J,w,de,P.getHours(),P.getMinutes(),P.getSeconds(),P.getMilliseconds()))}function Ne(w){Ai(w,D,Y)&&(P.setFullYear(0),P.setMonth(0),P.setDate(1),P.setFullYear(w.year),P.setMonth(w.month),P.setDate(w.number),L(P),m("select",wn(P)))}function be(w){if(w.shiftKey&&w.key==="ArrowUp")we(P.getFullYear()-1);else if(w.shiftKey&&w.key==="ArrowDown")we(P.getFullYear()+1);else if(w.shiftKey&&w.key==="ArrowLeft")ve(P.getMonth()-1);else if(w.shiftKey&&w.key==="ArrowRight")ve(P.getMonth()+1);else return!1;return w.preventDefault(),!0}function Ee(w){if(w.shiftKey||w.altKey){be(w);return}else if(w.key==="ArrowUp")we(P.getFullYear()-1);else if(w.key==="ArrowDown")we(P.getFullYear()+1);else if(w.key==="ArrowLeft")ve(P.getMonth()-1);else if(w.key==="ArrowRight")ve(P.getMonth()+1);else{be(w);return}w.preventDefault()}function De(w){if(w.shiftKey||w.altKey){be(w);return}else if(w.key==="ArrowUp"||w.key==="ArrowLeft")ve(P.getMonth()-1);else if(w.key==="ArrowDown"||w.key==="ArrowRight")ve(P.getMonth()+1);else{be(w);return}w.preventDefault()}function qe(w){var Ae,de;let J=w.shiftKey||w.altKey;if(!(((Ae=w.target)==null?void 0:Ae.tagName)==="SELECT"||((de=w.target)==null?void 0:de.tagName)==="SPAN")){if(J){be(w);return}else if(w.key==="ArrowUp")P.setDate(P.getDate()-7),L(P);else if(w.key==="ArrowDown")P.setDate(P.getDate()+7),L(P);else if(w.key==="ArrowLeft")P.setDate(P.getDate()-1),L(P);else if(w.key==="ArrowRight")P.setDate(P.getDate()+1),L(P);else if(w.key==="Enter")k(P),m("select",wn(P));else return;w.preventDefault()}}function Ue(w){bs.call(this,i,w)}const oe=()=>ve(P.getMonth()-1),Se=w=>ve(parseInt(w.currentTarget.value)),C=w=>we(parseInt(w.currentTarget.value)),K=()=>ve(P.getMonth()+1),$=w=>Ne(w);function pe(w){P=w,n(4,P)}return i.$$set=w=>{"value"in w&&n(0,v=w.value),"timePrecision"in w&&n(1,S=w.timePrecision),"min"in w&&n(2,D=w.min),"max"in w&&n(3,Y=w.max),"locale"in w&&n(18,ne=w.locale),"browseWithoutSelecting"in w&&n(19,se=w.browseWithoutSelecting),"$$scope"in w&&n(20,_=w.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&13&&(v&&v>Y?k(Y):v&&v<D&&k(D)),i.$$.dirty[0]&1&&ae(v),i.$$.dirty[0]&12&&n(6,he=Pa(D,Y)),i.$$.dirty[0]&262144&&n(5,r=zo(ne)),i.$$.dirty[0]&16&&n(9,s=P.getFullYear()),i.$$.dirty[0]&16&&n(8,c=P.getMonth()),i.$$.dirty[0]&48&&n(7,u=Is(P,r.weekStartsOn))},[v,S,D,Y,P,r,he,u,c,s,X,W,we,ve,Ne,Ee,De,qe,ne,se,_,g,Ue,oe,Se,C,K,$,pe]}class Ks extends on{constructor(e){super(),sn(this,e,Bs,Ns,nn,{value:0,timePrecision:1,min:2,max:3,locale:18,browseWithoutSelecting:19},null,[-1,-1])}}function Fs(i){return i<.5?4*i*i*i:.5*Math.pow(2*i-2,3)+1}function js(i){const e=i-1;return e*e*e+1}function Us(i,{delay:e=0,duration:n=400,easing:r=js,x:s=0,y:c=0,opacity:u=0}={}){const g=getComputedStyle(i),_=+g.opacity,m=g.transform==="none"?"":g.transform,v=_*(1-u),[k,L]=ca(s),[U,X]=ca(c);return{delay:e,duration:n,easing:r,css:(W,z)=>`
			transform: ${m} translate(${(1-W)*k}${L}, ${(1-W)*U}${X});
			opacity: ${_-v*z}`}}function Ia(i,e,n){let r="",s=!0;n=n||new Date(2020,0,1,0,0,0,0);let c=n.getFullYear(),u=n.getMonth(),g=n.getDate(),_=n.getHours(),m=n.getMinutes(),v=n.getSeconds();const k=n.getMilliseconds();function L(S){for(let D=0;D<S.length;D++)if(i.startsWith(S[D]))i=i.slice(1);else{s=!1,i.length===0&&(r=S.slice(D));return}}function U(S,D,Y){const P=i.match(S);if(P!=null&&P[0]){i=i.slice(P[0].length);const ae=parseInt(P[0]);return ae>Y||ae<D?(s=!1,null):ae}else return s=!1,null}function X(S){const D=S.findIndex(Y=>Y.toLowerCase()===i.slice(0,Y.length).toLowerCase());return D>=0?(i=i.slice(S[D].length),D):(s=!1,null)}function W(S){if(typeof S=="string")L(S);else if(S.id==="yy"){const D=U(/^[0-9]{2}/,0,99);D!==null&&(c=2e3+D)}else if(S.id==="yyyy"){const D=U(/^[0-9]{4}/,0,9999);D!==null&&(c=D)}else if(S.id==="MM"){const D=U(/^[0-9]{2}/,1,12);D!==null&&(u=D-1)}else if(S.id==="MMM"){const D=X(S.allowedValues||[]);D!==null&&(u=D)}else if(S.id==="dd"){const D=U(/^[0-9]{2}/,1,31);D!==null&&(g=D)}else if(S.id==="HH"){const D=U(/^[0-9]{2}/,0,23);D!==null&&(_=D)}else if(S.id==="mm"){const D=U(/^[0-9]{2}/,0,59);D!==null&&(m=D)}else if(S.id==="ss"){const D=U(/^[0-9]{2}/,0,59);D!==null&&(v=D)}}for(const S of e)if(W(S),!s)break;const z=fr(c,u);return g>z&&(s=!1),{date:s?new Date(c,u,g,_,m,v,k):null,missingPunctuation:r}}function or(i){return("0"+i.toString()).slice(-2)}function Vs(i,e){if(i.startsWith("yyyy"))return{id:"yyyy",toString:n=>n.getFullYear().toString()};if(i.startsWith("yy"))return{id:"yy",toString:n=>n.getFullYear().toString().slice(-2)};if(i.startsWith("MMM"))return{id:"MMM",allowedValues:e.shortMonths,toString:n=>e.shortMonths[n.getMonth()]};if(i.startsWith("MM"))return{id:"MM",toString:n=>or(n.getMonth()+1)};if(i.startsWith("dd"))return{id:"dd",toString:n=>or(n.getDate())};if(i.startsWith("HH"))return{id:"HH",toString:n=>or(n.getHours())};if(i.startsWith("mm"))return{id:"mm",toString:n=>or(n.getMinutes())};if(i.startsWith("ss"))return{id:"ss",toString:n=>or(n.getSeconds())}}function La(i,e={}){const n=zo(e),r=[];for(;i.length>0;){const s=Vs(i,n);s?(r.push(s),i=i.slice(s.id.length)):typeof r[r.length-1]=="string"?(r[r.length-1]+=i[0],i=i.slice(1)):(r.push(i[0]),i=i.slice(1))}return r}function Ma(i){let e,n,r,s,c=`${i[18]}px`,u;function g(m){i[34](m)}let _={min:i[3],max:i[4],locale:i[10],browseWithoutSelecting:i[11],timePrecision:i[12],$$slots:{default:[qs]},$$scope:{ctx:i}};return i[14]!==void 0&&(_.value=i[14]),n=new Ks({props:_}),tn.push(()=>Ln(n,"value",g)),n.$on("focusout",i[21]),n.$on("select",i[23]),{c(){e=O("div"),Ut(n.$$.fragment),this.h()},l(m){e=A(m,"DIV",{class:!0});var v=x(e);Vt(n.$$.fragment,v),v.forEach(b),this.h()},h(){p(e,"class","picker svelte-1vabmef"),Tt(e,"visible",i[2]),Tt(e,"above",i[17]),Oi(e,"--picker-left-position",c)},m(m,v){fe(m,e,v),qt(n,e,null),i[35](e),u=!0},p(m,v){const k={};v[0]&8&&(k.min=m[3]),v[0]&16&&(k.max=m[4]),v[0]&1024&&(k.locale=m[10]),v[0]&2048&&(k.browseWithoutSelecting=m[11]),v[0]&4096&&(k.timePrecision=m[12]),v[1]&32&&(k.$$scope={dirty:v,ctx:m}),!r&&v[0]&16384&&(r=!0,k.value=m[14],In(()=>r=!1)),n.$set(k),(!u||v[0]&4)&&Tt(e,"visible",m[2]),(!u||v[0]&131072)&&Tt(e,"above",m[17]),v[0]&262144&&c!==(c=`${m[18]}px`)&&Oi(e,"--picker-left-position",c)},i(m){u||(rt(n.$$.fragment,m),m&&Un(()=>{u&&(s||(s=fa(e,i[24],{},!0)),s.run(1))}),u=!0)},o(m){lt(n.$$.fragment,m),m&&(s||(s=fa(e,i[24],{},!1)),s.run(0)),u=!1},d(m){m&&b(e),zt(n),i[35](null),m&&s&&s.end()}}}function qs(i){let e;const n=i[29].default,r=Ko(n,i,i[36],null);return{c(){r&&r.c()},l(s){r&&r.l(s)},m(s,c){r&&r.m(s,c),e=!0},p(s,c){r&&r.p&&(!e||c[1]&32)&&Fo(r,n,s,s[36],e?Uo(n,s[36],c,null):jo(s[36]),null)},i(s){e||(rt(r,s),e=!0)},o(s){lt(r,s),e=!1},d(s){r&&r.d(s)}}}function zs(i){let e,n,r,s,c,u,g,_=i[2]&&!i[7]&&Ma(i);return{c(){e=O("div"),n=O("input"),r=re(),_&&_.c(),this.h()},l(m){e=A(m,"DIV",{class:!0});var v=x(e);n=A(v,"INPUT",{type:!0,autocomplete:!0,id:!0,placeholder:!0,class:!0}),r=ie(v),_&&_.l(v),v.forEach(b),this.h()},h(){p(n,"type","text"),p(n,"autocomplete","off"),n.value=i[0],p(n,"id",i[5]),p(n,"placeholder",i[6]),n.disabled=i[7],n.required=i[8],p(n,"class","svelte-1vabmef"),Tt(n,"invalid",!i[1]),p(e,"class",s="date-time-field "+i[9]+" svelte-1vabmef")},m(m,v){fe(m,e,v),h(e,n),i[30](n),h(e,r),_&&_.m(e,null),c=!0,u||(g=[Ze(n,"focus",i[31]),Ze(n,"mousedown",i[32]),Ze(n,"input",i[33]),Ze(e,"focusout",i[21]),Ze(e,"keydown",i[22])],u=!0)},p(m,v){(!c||v[0]&1&&n.value!==m[0])&&(n.value=m[0]),(!c||v[0]&32)&&p(n,"id",m[5]),(!c||v[0]&64)&&p(n,"placeholder",m[6]),(!c||v[0]&128)&&(n.disabled=m[7]),(!c||v[0]&256)&&(n.required=m[8]),(!c||v[0]&2)&&Tt(n,"invalid",!m[1]),m[2]&&!m[7]?_?(_.p(m,v),v[0]&132&&rt(_,1)):(_=Ma(m),_.c(),rt(_,1),_.m(e,null)):_&&(Vn(),lt(_,1,1,()=>{_=null}),qn()),(!c||v[0]&512&&s!==(s="date-time-field "+m[9]+" svelte-1vabmef"))&&p(e,"class",s)},i(m){c||(rt(_),c=!0)},o(m){lt(_),c=!1},d(m){m&&b(e),i[30](null),_&&_.d(),u=!1,kn(g)}}}function Hs(i,e,n){let r,s,{$$slots:c={},$$scope:u}=e;const g=Vo(),_=new Date,m=Mr(null);cr(i,m,H=>n(37,s=H));const v={subscribe:m.subscribe,set:H=>{H==null?(m.set(null),n(25,k=H)):H.getTime()!==(s==null?void 0:s.getTime())&&(m.set(H),n(25,k=H))}};cr(i,v,H=>n(14,r=H));let{value:k=null}=e,{min:L=new Date(_.getFullYear()-20,0,1)}=e,{max:U=new Date(_.getFullYear(),11,31,23,59,59,999)}=e,{id:X=null}=e,{placeholder:W="2020-12-31 23:00:00"}=e,{valid:z=!0}=e,{disabled:S=!1}=e,{required:D=!1}=e,{class:Y=""}=e,{locale:P={}}=e,{format:ae="yyyy-MM-dd HH:mm:ss"}=e,he=La(ae,P);function ne(H,le){n(0,se=ma(H,le))}let{text:se=ma(r,he)}=e;function we(H,le){if(H.length){const _e=Ia(H,le,r);_e.date!==null?(n(1,z=!0),v.set(_e.date)):n(1,z=!1)}else n(1,z=!0),k&&(n(25,k=null),v.set(null))}let{visible:ve=!1}=e,{closeOnSelection:Ne=!1}=e,{browseWithoutSelecting:be=!1}=e,{timePrecision:Ee=null}=e;function De(H){(H==null?void 0:H.currentTarget)instanceof HTMLElement&&H.relatedTarget&&H.relatedTarget instanceof Node&&H.currentTarget.contains(H.relatedTarget)||n(2,ve=!1)}function qe(H){H.key==="Escape"&&ve?(n(2,ve=!1),H.preventDefault(),H.stopPropagation()):H.key==="Enter"&&(n(2,ve=!ve),H.preventDefault())}function Ue(H){g("select",H.detail),Ne&&n(2,ve=!1)}let{dynamicPositioning:oe=!1}=e,Se,C,K=!1,$=null;function pe(){if(n(17,K=!1),n(18,$=null),ve&&C&&oe){const H=Se.getBoundingClientRect(),le=C.offsetWidth-H.width,_e=H.bottom+C.offsetHeight+5,ze=H.left+C.offsetWidth+5;if(_e>window.innerHeight&&n(17,K=!0),ze>window.innerWidth&&(n(18,$=-le),H.left<le+5)){const F=window.innerWidth/2-C.offsetWidth/2;n(18,$=F-H.left)}}}function w(H){return pe(),Us(H,{duration:200,easing:Fs,y:K?5:-5})}function J(H){tn[H?"unshift":"push"](()=>{Se=H,n(15,Se)})}const Ae=()=>n(2,ve=!0),de=()=>n(2,ve=!0),Ve=H=>{if(H instanceof InputEvent&&H.inputType==="insertText"&&typeof H.data=="string"&&H.currentTarget.value===se+H.data){let le=Ia(se,he,r);if(le.missingPunctuation!==""&&!le.missingPunctuation.startsWith(H.data)){n(0,se=se+le.missingPunctuation+H.data);return}}n(0,se=H.currentTarget.value)};function Pe(H){r=H,v.set(r)}function ge(H){tn[H?"unshift":"push"](()=>{C=H,n(16,C)})}return i.$$set=H=>{"value"in H&&n(25,k=H.value),"min"in H&&n(3,L=H.min),"max"in H&&n(4,U=H.max),"id"in H&&n(5,X=H.id),"placeholder"in H&&n(6,W=H.placeholder),"valid"in H&&n(1,z=H.valid),"disabled"in H&&n(7,S=H.disabled),"required"in H&&n(8,D=H.required),"class"in H&&n(9,Y=H.class),"locale"in H&&n(10,P=H.locale),"format"in H&&n(26,ae=H.format),"text"in H&&n(0,se=H.text),"visible"in H&&n(2,ve=H.visible),"closeOnSelection"in H&&n(27,Ne=H.closeOnSelection),"browseWithoutSelecting"in H&&n(11,be=H.browseWithoutSelecting),"timePrecision"in H&&n(12,Ee=H.timePrecision),"dynamicPositioning"in H&&n(28,oe=H.dynamicPositioning),"$$scope"in H&&n(36,u=H.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&33554432&&v.set(k),i.$$.dirty[0]&67109888&&n(13,he=La(ae,P)),i.$$.dirty[0]&24576&&ne(r,he),i.$$.dirty[0]&8193&&we(se,he)},[se,z,ve,L,U,X,W,S,D,Y,P,be,Ee,he,r,Se,C,K,$,m,v,De,qe,Ue,w,k,ae,Ne,oe,c,J,Ae,de,Ve,Pe,ge,u]}class Yn extends on{constructor(e){super(),sn(this,e,Hs,zs,nn,{value:25,min:3,max:4,id:5,placeholder:6,valid:1,disabled:7,required:8,class:9,locale:10,format:26,text:0,visible:2,closeOnSelection:27,browseWithoutSelecting:11,timePrecision:12,dynamicPositioning:28},null,[-1,-1])}}var Ra=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ho(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var xo={exports:{}};(function(i,e){(function(n,r){i.exports=r()})(Ra,function(){var n=function(t,a){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(o[f]=l[f])})(t,a)},r=function(){return(r=Object.assign||function(t){for(var a,o=1,l=arguments.length;o<l;o++)for(var f in a=arguments[o])Object.prototype.hasOwnProperty.call(a,f)&&(t[f]=a[f]);return t}).apply(this,arguments)};function s(t,a,o){for(var l,f=0,d=a.length;f<d;f++)!l&&f in a||((l=l||Array.prototype.slice.call(a,0,f))[f]=a[f]);return t.concat(l||Array.prototype.slice.call(a))}var c=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Ra,u=Object.keys,g=Array.isArray;function _(t,a){return typeof a!="object"||u(a).forEach(function(o){t[o]=a[o]}),t}typeof Promise>"u"||c.Promise||(c.Promise=Promise);var m=Object.getPrototypeOf,v={}.hasOwnProperty;function k(t,a){return v.call(t,a)}function L(t,a){typeof a=="function"&&(a=a(m(t))),(typeof Reflect>"u"?u:Reflect.ownKeys)(a).forEach(function(o){X(t,o,a[o])})}var U=Object.defineProperty;function X(t,a,o,l){U(t,a,_(o&&k(o,"get")&&typeof o.get=="function"?{get:o.get,set:o.set,configurable:!0}:{value:o,configurable:!0,writable:!0},l))}function W(t){return{from:function(a){return t.prototype=Object.create(a.prototype),X(t.prototype,"constructor",t),{extend:L.bind(null,t.prototype)}}}}var z=Object.getOwnPropertyDescriptor,S=[].slice;function D(t,a,o){return S.call(t,a,o)}function Y(t,a){return a(t)}function P(t){if(!t)throw new Error("Assertion Failed")}function ae(t){c.setImmediate?setImmediate(t):setTimeout(t,0)}function he(t,a){if(typeof a=="string"&&k(t,a))return t[a];if(!a)return t;if(typeof a!="string"){for(var o=[],l=0,f=a.length;l<f;++l){var d=he(t,a[l]);o.push(d)}return o}var y=a.indexOf(".");if(y!==-1){var E=t[a.substr(0,y)];return E==null?void 0:he(E,a.substr(y+1))}}function ne(t,a,o){if(t&&a!==void 0&&!("isFrozen"in Object&&Object.isFrozen(t)))if(typeof a!="string"&&"length"in a){P(typeof o!="string"&&"length"in o);for(var l=0,f=a.length;l<f;++l)ne(t,a[l],o[l])}else{var d,y,E=a.indexOf(".");E!==-1?(d=a.substr(0,E),(y=a.substr(E+1))===""?o===void 0?g(t)&&!isNaN(parseInt(d))?t.splice(d,1):delete t[d]:t[d]=o:ne(E=!(E=t[d])||!k(t,d)?t[d]={}:E,y,o)):o===void 0?g(t)&&!isNaN(parseInt(a))?t.splice(a,1):delete t[a]:t[a]=o}}function se(t){var a,o={};for(a in t)k(t,a)&&(o[a]=t[a]);return o}var we=[].concat;function ve(t){return we.apply([],t)}var Sn="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ve([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(a){return a+t+"Array"})}))).filter(function(t){return c[t]}),Ne=new Set(Sn.map(function(t){return c[t]})),be=null;function Ee(t){return be=new WeakMap,t=function a(o){if(!o||typeof o!="object")return o;var l=be.get(o);if(l)return l;if(g(o)){l=[],be.set(o,l);for(var f=0,d=o.length;f<d;++f)l.push(a(o[f]))}else if(Ne.has(o.constructor))l=o;else{var y,E=m(o);for(y in l=E===Object.prototype?{}:Object.create(E),be.set(o,l),o)k(o,y)&&(l[y]=a(o[y]))}return l}(t),be=null,t}var De={}.toString;function qe(t){return De.call(t).slice(8,-1)}var Ue=typeof Symbol<"u"?Symbol.iterator:"@@iterator",oe=typeof Ue=="symbol"?function(t){var a;return t!=null&&(a=t[Ue])&&a.apply(t)}:function(){return null};function Se(t,a){return a=t.indexOf(a),0<=a&&t.splice(a,1),0<=a}var C={};function K(t){var a,o,l,f;if(arguments.length===1){if(g(t))return t.slice();if(this===C&&typeof t=="string")return[t];if(f=oe(t)){for(o=[];!(l=f.next()).done;)o.push(l.value);return o}if(t==null)return[t];if(typeof(a=t.length)!="number")return[t];for(o=new Array(a);a--;)o[a]=t[a];return o}for(a=arguments.length,o=new Array(a);a--;)o[a]=arguments[a];return o}var $=typeof Symbol<"u"?function(t){return t[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Pt=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],ln=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Pt),pe={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function w(t,a){this.name=t,this.message=a}function J(t,a){return t+". Errors: "+Object.keys(a).map(function(o){return a[o].toString()}).filter(function(o,l,f){return f.indexOf(o)===l}).join(`
`)}function Ae(t,a,o,l){this.failures=a,this.failedKeys=l,this.successCount=o,this.message=J(t,a)}function de(t,a){this.name="BulkError",this.failures=Object.keys(a).map(function(o){return a[o]}),this.failuresByPos=a,this.message=J(t,this.failures)}W(w).from(Error).extend({toString:function(){return this.name+": "+this.message}}),W(Ae).from(w),W(de).from(w);var Ve=ln.reduce(function(t,a){return t[a]=a+"Error",t},{}),Pe=w,ge=ln.reduce(function(t,a){var o=a+"Error";function l(f,d){this.name=o,f?typeof f=="string"?(this.message="".concat(f).concat(d?`
 `+d:""),this.inner=d||null):typeof f=="object"&&(this.message="".concat(f.name," ").concat(f.message),this.inner=f):(this.message=pe[a]||o,this.inner=null)}return W(l).from(Pe),t[a]=l,t},{});ge.Syntax=SyntaxError,ge.Type=TypeError,ge.Range=RangeError;var H=Pt.reduce(function(t,a){return t[a+"Error"]=ge[a],t},{}),le=ln.reduce(function(t,a){return["Syntax","Type","Range"].indexOf(a)===-1&&(t[a+"Error"]=ge[a]),t},{});function _e(){}function ze(t){return t}function Ye(t,a){return t==null||t===ze?a:function(o){return a(t(o))}}function F(t,a){return function(){t.apply(this,arguments),a.apply(this,arguments)}}function Te(t,a){return t===_e?a:function(){var o=t.apply(this,arguments);o!==void 0&&(arguments[0]=o);var l=this.onsuccess,f=this.onerror;this.onsuccess=null,this.onerror=null;var d=a.apply(this,arguments);return l&&(this.onsuccess=this.onsuccess?F(l,this.onsuccess):l),f&&(this.onerror=this.onerror?F(f,this.onerror):f),d!==void 0?d:o}}function ye(t,a){return t===_e?a:function(){t.apply(this,arguments);var o=this.onsuccess,l=this.onerror;this.onsuccess=this.onerror=null,a.apply(this,arguments),o&&(this.onsuccess=this.onsuccess?F(o,this.onsuccess):o),l&&(this.onerror=this.onerror?F(l,this.onerror):l)}}function ue(t,a){return t===_e?a:function(o){var l=t.apply(this,arguments);_(o,l);var f=this.onsuccess,d=this.onerror;return this.onsuccess=null,this.onerror=null,o=a.apply(this,arguments),f&&(this.onsuccess=this.onsuccess?F(f,this.onsuccess):f),d&&(this.onerror=this.onerror?F(d,this.onerror):d),l===void 0?o===void 0?void 0:o:_(l,o)}}function xe(t,a){return t===_e?a:function(){return a.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function it(t,a){return t===_e?a:function(){var o=t.apply(this,arguments);if(o&&typeof o.then=="function"){for(var l=this,f=arguments.length,d=new Array(f);f--;)d[f]=arguments[f];return o.then(function(){return a.apply(l,d)})}return a.apply(this,arguments)}}le.ModifyError=Ae,le.DexieError=w,le.BulkError=de;var _t=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function dt(t){_t=t}var ht={},Dt=100,Sn=typeof Promise>"u"?[]:function(){var t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,m(t),t];var a=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[a,m(a),t]}(),Pt=Sn[0],ln=Sn[1],Sn=Sn[2],ln=ln&&ln.then,pt=Pt&&Pt.constructor,Ct=!!Sn,Je=function(t,a){_n.push([t,a]),vn&&(queueMicrotask(Ie),vn=!1)},gn=!0,vn=!0,Qt=[],Rt=[],It=ze,st={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:_e,pgp:!1,env:{},finalize:_e},Be=st,_n=[],jt=0,ft=[];function ke(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var a=this._PSD=Be;if(typeof t!="function"){if(t!==ht)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&gt(this,this._value))}this._state=null,this._value=null,++a.ref,function o(l,f){try{f(function(d){if(l._state===null){if(d===l)throw new TypeError("A promise cannot be resolved with itself.");var y=l._lib&&Oe();d&&typeof d.then=="function"?o(l,function(E,R){d instanceof ke?d._then(E,R):d.then(E,R)}):(l._state=!0,l._value=d,ce(l)),y&&vt()}},gt.bind(null,l))}catch(d){gt(l,d)}}(this,t)}var mt={get:function(){var t=Be,a=fn;function o(l,f){var d=this,y=!t.global&&(t!==Be||a!==fn),E=y&&!dn(),R=new ke(function(I,j){ee(d,new yt(Ki(l,t,y,E),Ki(f,t,y,E),I,j,t))});return this._consoleTask&&(R._consoleTask=this._consoleTask),R}return o.prototype=ht,o},set:function(t){X(this,"then",t&&t.prototype===ht?mt:{get:function(){return t},set:mt.set})}};function yt(t,a,o,l,f){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof a=="function"?a:null,this.resolve=o,this.reject=l,this.psd=f}function gt(t,a){var o,l;Rt.push(a),t._state===null&&(o=t._lib&&Oe(),a=It(a),t._state=!1,t._value=a,l=t,Qt.some(function(f){return f._value===l._value})||Qt.push(l),ce(t),o&&vt())}function ce(t){var a=t._listeners;t._listeners=[];for(var o=0,l=a.length;o<l;++o)ee(t,a[o]);var f=t._PSD;--f.ref||f.finalize(),jt===0&&(++jt,Je(function(){--jt==0&&Nt()},[]))}function ee(t,a){if(t._state!==null){var o=t._state?a.onFulfilled:a.onRejected;if(o===null)return(t._state?a.resolve:a.reject)(t._value);++a.psd.ref,++jt,Je(He,[o,t,a])}else t._listeners.push(a)}function He(t,a,o){try{var l,f=a._value;!a._state&&Rt.length&&(Rt=[]),l=_t&&a._consoleTask?a._consoleTask.run(function(){return t(f)}):t(f),a._state||Rt.indexOf(f)!==-1||function(d){for(var y=Qt.length;y;)if(Qt[--y]._value===d._value)return Qt.splice(y,1)}(a),o.resolve(l)}catch(d){o.reject(d)}finally{--jt==0&&Nt(),--o.psd.ref||o.psd.finalize()}}function Ie(){Mn(st,function(){Oe()&&vt()})}function Oe(){var t=gn;return vn=gn=!1,t}function vt(){var t,a,o;do for(;0<_n.length;)for(t=_n,_n=[],o=t.length,a=0;a<o;++a){var l=t[a];l[0].apply(null,l[1])}while(0<_n.length);vn=gn=!0}function Nt(){var t=Qt;Qt=[],t.forEach(function(l){l._PSD.onunhandled.call(null,l._value,l)});for(var a=ft.slice(0),o=a.length;o;)a[--o]()}function Ht(t){return new ke(ht,!1,t)}function at(t,a){var o=Be;return function(){var l=Oe(),f=Be;try{return Cn(o,!0),t.apply(this,arguments)}catch(d){a&&a(d)}finally{Cn(f,!1),l&&vt()}}}L(ke.prototype,{then:mt,_then:function(t,a){ee(this,new yt(null,null,t,a,Be))},catch:function(t){if(arguments.length===1)return this.then(null,t);var a=t,o=arguments[1];return typeof a=="function"?this.then(null,function(l){return(l instanceof a?o:Ht)(l)}):this.then(null,function(l){return(l&&l.name===a?o:Ht)(l)})},finally:function(t){return this.then(function(a){return ke.resolve(t()).then(function(){return a})},function(a){return ke.resolve(t()).then(function(){return Ht(a)})})},timeout:function(t,a){var o=this;return t<1/0?new ke(function(l,f){var d=setTimeout(function(){return f(new ge.Timeout(a))},t);o.then(l,f).finally(clearTimeout.bind(null,d))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&X(ke.prototype,Symbol.toStringTag,"Dexie.Promise"),st.env=Bi(),L(ke,{all:function(){var t=K.apply(null,arguments).map(Lt);return new ke(function(a,o){t.length===0&&a([]);var l=t.length;t.forEach(function(f,d){return ke.resolve(f).then(function(y){t[d]=y,--l||a(t)},o)})})},resolve:function(t){return t instanceof ke?t:t&&typeof t.then=="function"?new ke(function(a,o){t.then(a,o)}):new ke(ht,!0,t)},reject:Ht,race:function(){var t=K.apply(null,arguments).map(Lt);return new ke(function(a,o){t.map(function(l){return ke.resolve(l).then(a,o)})})},PSD:{get:function(){return Be},set:function(t){return Be=t}},totalEchoes:{get:function(){return fn}},newPSD:en,usePSD:Mn,scheduler:{get:function(){return Je},set:function(t){Je=t}},rejectionMapper:{get:function(){return It},set:function(t){It=t}},follow:function(t,a){return new ke(function(o,l){return en(function(f,d){var y=Be;y.unhandleds=[],y.onunhandled=d,y.finalize=F(function(){var E,R=this;E=function(){R.unhandleds.length===0?f():d(R.unhandleds[0])},ft.push(function I(){E(),ft.splice(ft.indexOf(I),1)}),++jt,Je(function(){--jt==0&&Nt()},[])},y.finalize),t()},a,o,l)})}}),pt&&(pt.allSettled&&X(ke,"allSettled",function(){var t=K.apply(null,arguments).map(Lt);return new ke(function(a){t.length===0&&a([]);var o=t.length,l=new Array(o);t.forEach(function(f,d){return ke.resolve(f).then(function(y){return l[d]={status:"fulfilled",value:y}},function(y){return l[d]={status:"rejected",reason:y}}).then(function(){return--o||a(l)})})})}),pt.any&&typeof AggregateError<"u"&&X(ke,"any",function(){var t=K.apply(null,arguments).map(Lt);return new ke(function(a,o){t.length===0&&o(new AggregateError([]));var l=t.length,f=new Array(l);t.forEach(function(d,y){return ke.resolve(d).then(function(E){return a(E)},function(E){f[y]=E,--l||o(new AggregateError(f))})})})}));var wt={awaits:0,echoes:0,id:0},rn=0,cn=[],Xt=0,fn=0,En=0;function en(t,a,o,l){var f=Be,d=Object.create(f);return d.parent=f,d.ref=0,d.global=!1,d.id=++En,st.env,d.env=Ct?{Promise:ke,PromiseProp:{value:ke,configurable:!0,writable:!0},all:ke.all,race:ke.race,allSettled:ke.allSettled,any:ke.any,resolve:ke.resolve,reject:ke.reject}:{},a&&_(d,a),++f.ref,d.finalize=function(){--this.parent.ref||this.parent.finalize()},l=Mn(d,t,o,l),d.ref===0&&d.finalize(),l}function bt(){return wt.id||(wt.id=++rn),++wt.awaits,wt.echoes+=Dt,wt.id}function dn(){return!!wt.awaits&&(--wt.awaits==0&&(wt.id=0),wt.echoes=wt.awaits*Dt,!0)}function Lt(t){return wt.echoes&&t&&t.constructor===pt?(bt(),t.then(function(a){return dn(),a},function(a){return dn(),Ot(a)})):t}function Xo(){var t=cn[cn.length-1];cn.pop(),Cn(t,!1)}function Cn(t,a){var o,l=Be;(a?!wt.echoes||Xt++&&t===Be:!Xt||--Xt&&t===Be)||queueMicrotask(a?(function(f){++fn,wt.echoes&&--wt.echoes!=0||(wt.echoes=wt.awaits=wt.id=0),cn.push(Be),Cn(f,!0)}).bind(null,t):Xo),t!==Be&&(Be=t,l===st&&(st.env=Bi()),Ct&&(o=st.env.Promise,a=t.env,(l.global||t.global)&&(Object.defineProperty(c,"Promise",a.PromiseProp),o.all=a.all,o.race=a.race,o.resolve=a.resolve,o.reject=a.reject,a.allSettled&&(o.allSettled=a.allSettled),a.any&&(o.any=a.any))))}function Bi(){var t=c.Promise;return Ct?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(c,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject}:{}}function Mn(t,a,o,l,f){var d=Be;try{return Cn(t,!0),a(o,l,f)}finally{Cn(d,!1)}}function Ki(t,a,o,l){return typeof t!="function"?t:function(){var f=Be;o&&bt(),Cn(a,!0);try{return t.apply(this,arguments)}finally{Cn(f,!1),l&&queueMicrotask(dn)}}}function xr(t){Promise===pt&&wt.echoes===0?Xt===0?t():enqueueNativeMicroTask(t):setTimeout(t,0)}(""+ln).indexOf("[native code]")===-1&&(bt=dn=_e);var Ot=ke.reject,Rn="ï¿¿",Dn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Fi="String expected.",zn=[],hr="__dbnames",Wr="readonly",Gr="readwrite";function Nn(t,a){return t?a?function(){return t.apply(this,arguments)&&a.apply(this,arguments)}:t:a}var ji={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function pr(t){return typeof t!="string"||/\./.test(t)?function(a){return a}:function(a){return a[t]===void 0&&t in a&&delete(a=Ee(a))[t],a}}function Ui(){throw ge.Type()}function ct(t,a){try{var o=Vi(t),l=Vi(a);if(o!==l)return o==="Array"?1:l==="Array"?-1:o==="binary"?1:l==="binary"?-1:o==="string"?1:l==="string"?-1:o==="Date"?1:l!=="Date"?NaN:-1;switch(o){case"number":case"Date":case"string":return a<t?1:t<a?-1:0;case"binary":return function(f,d){for(var y=f.length,E=d.length,R=y<E?y:E,I=0;I<R;++I)if(f[I]!==d[I])return f[I]<d[I]?-1:1;return y===E?0:y<E?-1:1}(qi(t),qi(a));case"Array":return function(f,d){for(var y=f.length,E=d.length,R=y<E?y:E,I=0;I<R;++I){var j=ct(f[I],d[I]);if(j!==0)return j}return y===E?0:y<E?-1:1}(t,a)}}catch{}return NaN}function Vi(t){var a=typeof t;return a!="object"?a:ArrayBuffer.isView(t)?"binary":(t=qe(t),t==="ArrayBuffer"?"binary":t)}function qi(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}var zi=(St.prototype._trans=function(t,a,o){var l=this._tx||Be.trans,f=this.name,d=_t&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(t==="readonly"?"read":"write"," ").concat(this.name));function y(I,j,T){if(!T.schema[f])throw new ge.NotFound("Table "+f+" not part of transaction");return a(T.idbtrans,T)}var E=Oe();try{var R=l&&l.db._novip===this.db._novip?l===Be.trans?l._promise(t,y,o):en(function(){return l._promise(t,y,o)},{trans:l,transless:Be.transless||Be}):function I(j,T,V,M){if(j.idbdb&&(j._state.openComplete||Be.letThrough||j._vip)){var B=j._createTransaction(T,V,j._dbSchema);try{B.create(),j._state.PR1398_maxLoop=3}catch(q){return q.name===Ve.InvalidState&&j.isOpen()&&0<--j._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),j.close({disableAutoOpen:!1}),j.open().then(function(){return I(j,T,V,M)})):Ot(q)}return B._promise(T,function(q,N){return en(function(){return Be.trans=B,M(q,N,B)})}).then(function(q){if(T==="readwrite")try{B.idbtrans.commit()}catch{}return T==="readonly"?q:B._completion.then(function(){return q})})}if(j._state.openComplete)return Ot(new ge.DatabaseClosed(j._state.dbOpenError));if(!j._state.isBeingOpened){if(!j._state.autoOpen)return Ot(new ge.DatabaseClosed);j.open().catch(_e)}return j._state.dbReadyPromise.then(function(){return I(j,T,V,M)})}(this.db,t,[this.name],y);return d&&(R._consoleTask=d,R=R.catch(function(I){return console.trace(I),Ot(I)})),R}finally{E&&vt()}},St.prototype.get=function(t,a){var o=this;return t&&t.constructor===Object?this.where(t).first(a):t==null?Ot(new ge.Type("Invalid argument to Table.get()")):this._trans("readonly",function(l){return o.core.get({trans:l,key:t}).then(function(f){return o.hook.reading.fire(f)})}).then(a)},St.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(g(t))return new this.db.WhereClause(this,"[".concat(t.join("+"),"]"));var a=u(t);if(a.length===1)return this.where(a[0]).equals(t[a[0]]);var o=this.schema.indexes.concat(this.schema.primKey).filter(function(R){if(R.compound&&a.every(function(j){return 0<=R.keyPath.indexOf(j)})){for(var I=0;I<a.length;++I)if(a.indexOf(R.keyPath[I])===-1)return!1;return!0}return!1}).sort(function(R,I){return R.keyPath.length-I.keyPath.length})[0];if(o&&this.db._maxKey!==Rn){var y=o.keyPath.slice(0,a.length);return this.where(y).equals(y.map(function(I){return t[I]}))}!o&&_t&&console.warn("The query ".concat(JSON.stringify(t)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(a.join("+"),"]"));var l=this.schema.idxByName,f=this.db._deps.indexedDB;function d(R,I){return f.cmp(R,I)===0}var E=a.reduce(function(V,I){var j=V[0],T=V[1],V=l[I],M=t[I];return[j||V,j||!V?Nn(T,V&&V.multi?function(B){return B=he(B,I),g(B)&&B.some(function(q){return d(M,q)})}:function(B){return d(M,he(B,I))}):T]},[null,null]),y=E[0],E=E[1];return y?this.where(y.name).equals(t[y.keyPath]).filter(E):o?this.filter(E):this.where(a).equals("")},St.prototype.filter=function(t){return this.toCollection().and(t)},St.prototype.count=function(t){return this.toCollection().count(t)},St.prototype.offset=function(t){return this.toCollection().offset(t)},St.prototype.limit=function(t){return this.toCollection().limit(t)},St.prototype.each=function(t){return this.toCollection().each(t)},St.prototype.toArray=function(t){return this.toCollection().toArray(t)},St.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},St.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,g(t)?"[".concat(t.join("+"),"]"):t))},St.prototype.reverse=function(){return this.toCollection().reverse()},St.prototype.mapToClass=function(t){var a,o=this.db,l=this.name;function f(){return a!==null&&a.apply(this,arguments)||this}(this.schema.mappedClass=t).prototype instanceof Ui&&(function(R,I){if(typeof I!="function"&&I!==null)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");function j(){this.constructor=R}n(R,I),R.prototype=I===null?Object.create(I):(j.prototype=I.prototype,new j)}(f,a=t),Object.defineProperty(f.prototype,"db",{get:function(){return o},enumerable:!1,configurable:!0}),f.prototype.table=function(){return l},t=f);for(var d=new Set,y=t.prototype;y;y=m(y))Object.getOwnPropertyNames(y).forEach(function(R){return d.add(R)});function E(R){if(!R)return R;var I,j=Object.create(t.prototype);for(I in R)if(!d.has(I))try{j[I]=R[I]}catch{}return j}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=E,this.hook("reading",E),t},St.prototype.defineClass=function(){return this.mapToClass(function(t){_(this,t)})},St.prototype.add=function(t,a){var o=this,l=this.schema.primKey,f=l.auto,d=l.keyPath,y=t;return d&&f&&(y=pr(d)(t)),this._trans("readwrite",function(E){return o.core.mutate({trans:E,type:"add",keys:a!=null?[a]:null,values:[y]})}).then(function(E){return E.numFailures?ke.reject(E.failures[0]):E.lastResult}).then(function(E){if(d)try{ne(t,d,E)}catch{}return E})},St.prototype.update=function(t,a){return typeof t!="object"||g(t)?this.where(":id").equals(t).modify(a):(t=he(t,this.schema.primKey.keyPath),t===void 0?Ot(new ge.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(t).modify(a))},St.prototype.put=function(t,a){var o=this,l=this.schema.primKey,f=l.auto,d=l.keyPath,y=t;return d&&f&&(y=pr(d)(t)),this._trans("readwrite",function(E){return o.core.mutate({trans:E,type:"put",values:[y],keys:a!=null?[a]:null})}).then(function(E){return E.numFailures?ke.reject(E.failures[0]):E.lastResult}).then(function(E){if(d)try{ne(t,d,E)}catch{}return E})},St.prototype.delete=function(t){var a=this;return this._trans("readwrite",function(o){return a.core.mutate({trans:o,type:"delete",keys:[t]})}).then(function(o){return o.numFailures?ke.reject(o.failures[0]):void 0})},St.prototype.clear=function(){var t=this;return this._trans("readwrite",function(a){return t.core.mutate({trans:a,type:"deleteRange",range:ji})}).then(function(a){return a.numFailures?ke.reject(a.failures[0]):void 0})},St.prototype.bulkGet=function(t){var a=this;return this._trans("readonly",function(o){return a.core.getMany({keys:t,trans:o}).then(function(l){return l.map(function(f){return a.hook.reading.fire(f)})})})},St.prototype.bulkAdd=function(t,a,o){var l=this,f=Array.isArray(a)?a:void 0,d=(o=o||(f?void 0:a))?o.allKeys:void 0;return this._trans("readwrite",function(y){var I=l.schema.primKey,E=I.auto,I=I.keyPath;if(I&&f)throw new ge.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(f&&f.length!==t.length)throw new ge.InvalidArgument("Arguments objects and keys must have the same length");var R=t.length,I=I&&E?t.map(pr(I)):t;return l.core.mutate({trans:y,type:"add",keys:f,values:I,wantResults:d}).then(function(B){var T=B.numFailures,V=B.results,M=B.lastResult,B=B.failures;if(T===0)return d?V:M;throw new de("".concat(l.name,".bulkAdd(): ").concat(T," of ").concat(R," operations failed"),B)})})},St.prototype.bulkPut=function(t,a,o){var l=this,f=Array.isArray(a)?a:void 0,d=(o=o||(f?void 0:a))?o.allKeys:void 0;return this._trans("readwrite",function(y){var I=l.schema.primKey,E=I.auto,I=I.keyPath;if(I&&f)throw new ge.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(f&&f.length!==t.length)throw new ge.InvalidArgument("Arguments objects and keys must have the same length");var R=t.length,I=I&&E?t.map(pr(I)):t;return l.core.mutate({trans:y,type:"put",keys:f,values:I,wantResults:d}).then(function(B){var T=B.numFailures,V=B.results,M=B.lastResult,B=B.failures;if(T===0)return d?V:M;throw new de("".concat(l.name,".bulkPut(): ").concat(T," of ").concat(R," operations failed"),B)})})},St.prototype.bulkUpdate=function(t){var a=this,o=this.core,l=t.map(function(y){return y.key}),f=t.map(function(y){return y.changes}),d=[];return this._trans("readwrite",function(y){return o.getMany({trans:y,keys:l,cache:"clone"}).then(function(E){var R=[],I=[];t.forEach(function(T,V){var M=T.key,B=T.changes,q=E[V];if(q){for(var N=0,G=Object.keys(B);N<G.length;N++){var Z=G[N],Q=B[Z];if(Z===a.schema.primKey.keyPath){if(ct(Q,M)!==0)throw new ge.Constraint("Cannot update primary key in bulkUpdate()")}else ne(q,Z,Q)}d.push(V),R.push(M),I.push(q)}});var j=R.length;return o.mutate({trans:y,type:"put",keys:R,values:I,updates:{keys:l,changeSpecs:f}}).then(function(T){var V=T.numFailures,M=T.failures;if(V===0)return j;for(var B=0,q=Object.keys(M);B<q.length;B++){var N,G=q[B],Z=d[Number(G)];Z!=null&&(N=M[G],delete M[G],M[Z]=N)}throw new de("".concat(a.name,".bulkUpdate(): ").concat(V," of ").concat(j," operations failed"),M)})})})},St.prototype.bulkDelete=function(t){var a=this,o=t.length;return this._trans("readwrite",function(l){return a.core.mutate({trans:l,type:"delete",keys:t})}).then(function(y){var f=y.numFailures,d=y.lastResult,y=y.failures;if(f===0)return d;throw new de("".concat(a.name,".bulkDelete(): ").concat(f," of ").concat(o," operations failed"),y)})},St);function St(){}function Jn(t){function a(y,E){if(E){for(var R=arguments.length,I=new Array(R-1);--R;)I[R-1]=arguments[R];return o[y].subscribe.apply(null,I),t}if(typeof y=="string")return o[y]}var o={};a.addEventType=d;for(var l=1,f=arguments.length;l<f;++l)d(arguments[l]);return a;function d(y,E,R){if(typeof y!="object"){var I;E=E||xe;var j={subscribers:[],fire:R=R||_e,subscribe:function(T){j.subscribers.indexOf(T)===-1&&(j.subscribers.push(T),j.fire=E(j.fire,T))},unsubscribe:function(T){j.subscribers=j.subscribers.filter(function(V){return V!==T}),j.fire=j.subscribers.reduce(E,R)}};return o[y]=a[y]=j}u(I=y).forEach(function(T){var V=I[T];if(g(V))d(T,I[T][0],I[T][1]);else{if(V!=="asap")throw new ge.InvalidArgument("Invalid event config");var M=d(T,ze,function(){for(var B=arguments.length,q=new Array(B);B--;)q[B]=arguments[B];M.subscribers.forEach(function(N){ae(function(){N.apply(null,q)})})})}})}}function Qn(t,a){return W(a).from({prototype:t}),a}function Hn(t,a){return!(t.filter||t.algorithm||t.or)&&(a?t.justLimit:!t.replayFilter)}function Yr(t,a){t.filter=Nn(t.filter,a)}function Zr(t,a,o){var l=t.replayFilter;t.replayFilter=l?function(){return Nn(l(),a())}:a,t.justLimit=o&&!l}function mr(t,a){if(t.isPrimKey)return a.primaryKey;var o=a.getIndexByKeyPath(t.index);if(!o)throw new ge.Schema("KeyPath "+t.index+" on object store "+a.name+" is not indexed");return o}function Hi(t,a,o){var l=mr(t,a.schema);return a.openCursor({trans:o,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:l,range:t.range}})}function gr(t,a,o,l){var f=t.replayFilter?Nn(t.filter,t.replayFilter()):t.filter;if(t.or){var d={},y=function(E,R,I){var j,T;f&&!f(R,I,function(V){return R.stop(V)},function(V){return R.fail(V)})||((T=""+(j=R.primaryKey))=="[object ArrayBuffer]"&&(T=""+new Uint8Array(j)),k(d,T)||(d[T]=!0,a(E,R,I)))};return Promise.all([t.or._iterate(y,o),xi(Hi(t,l,o),t.algorithm,y,!t.keysOnly&&t.valueMapper)])}return xi(Hi(t,l,o),Nn(t.algorithm,f),a,!t.keysOnly&&t.valueMapper)}function xi(t,a,o,l){var f=at(l?function(d,y,E){return o(l(d),y,E)}:o);return t.then(function(d){if(d)return d.start(function(){var y=function(){return d.continue()};a&&!a(d,function(E){return y=E},function(E){d.stop(E),y=_e},function(E){d.fail(E),y=_e})||f(d.value,d,function(E){return y=E}),y()})})}var Sn=Symbol(),$n=(Wi.prototype.execute=function(t){if(this.add!==void 0){var a=this.add;if(g(a))return s(s([],g(t)?t:[],!0),a).sort();if(typeof a=="number")return(Number(t)||0)+a;if(typeof a=="bigint")try{return BigInt(t)+a}catch{return BigInt(0)+a}throw new TypeError("Invalid term ".concat(a))}if(this.remove!==void 0){var o=this.remove;if(g(o))return g(t)?t.filter(function(l){return!o.includes(l)}).sort():[];if(typeof o=="number")return Number(t)-o;if(typeof o=="bigint")try{return BigInt(t)-o}catch{return BigInt(0)-o}throw new TypeError("Invalid subtrahend ".concat(o))}return a=(a=this.replacePrefix)===null||a===void 0?void 0:a[0],a&&typeof t=="string"&&t.startsWith(a)?this.replacePrefix[1]+t.substring(a.length):t},Wi);function Wi(t){Object.assign(this,t)}var es=(ut.prototype._read=function(t,a){var o=this._ctx;return o.error?o.table._trans(null,Ot.bind(null,o.error)):o.table._trans("readonly",t).then(a)},ut.prototype._write=function(t){var a=this._ctx;return a.error?a.table._trans(null,Ot.bind(null,a.error)):a.table._trans("readwrite",t,"locked")},ut.prototype._addAlgorithm=function(t){var a=this._ctx;a.algorithm=Nn(a.algorithm,t)},ut.prototype._iterate=function(t,a){return gr(this._ctx,t,a,this._ctx.table.core)},ut.prototype.clone=function(t){var a=Object.create(this.constructor.prototype),o=Object.create(this._ctx);return t&&_(o,t),a._ctx=o,a},ut.prototype.raw=function(){return this._ctx.valueMapper=null,this},ut.prototype.each=function(t){var a=this._ctx;return this._read(function(o){return gr(a,t,o,a.table.core)})},ut.prototype.count=function(t){var a=this;return this._read(function(o){var l=a._ctx,f=l.table.core;if(Hn(l,!0))return f.count({trans:o,query:{index:mr(l,f.schema),range:l.range}}).then(function(y){return Math.min(y,l.limit)});var d=0;return gr(l,function(){return++d,!1},o,f).then(function(){return d})}).then(t)},ut.prototype.sortBy=function(t,a){var o=t.split(".").reverse(),l=o[0],f=o.length-1;function d(R,I){return I?d(R[o[I]],I-1):R[l]}var y=this._ctx.dir==="next"?1:-1;function E(R,I){return R=d(R,f),I=d(I,f),R<I?-y:I<R?y:0}return this.toArray(function(R){return R.sort(E)}).then(a)},ut.prototype.toArray=function(t){var a=this;return this._read(function(o){var l=a._ctx;if(l.dir==="next"&&Hn(l,!0)&&0<l.limit){var f=l.valueMapper,d=mr(l,l.table.core.schema);return l.table.core.query({trans:o,limit:l.limit,values:!0,query:{index:d,range:l.range}}).then(function(E){return E=E.result,f?E.map(f):E})}var y=[];return gr(l,function(E){return y.push(E)},o,l.table.core).then(function(){return y})},t)},ut.prototype.offset=function(t){var a=this._ctx;return t<=0||(a.offset+=t,Hn(a)?Zr(a,function(){var o=t;return function(l,f){return o===0||(o===1?--o:f(function(){l.advance(o),o=0}),!1)}}):Zr(a,function(){var o=t;return function(){return--o<0}})),this},ut.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),Zr(this._ctx,function(){var a=t;return function(o,l,f){return--a<=0&&l(f),0<=a}},!0),this},ut.prototype.until=function(t,a){return Yr(this._ctx,function(o,l,f){return!t(o.value)||(l(f),a)}),this},ut.prototype.first=function(t){return this.limit(1).toArray(function(a){return a[0]}).then(t)},ut.prototype.last=function(t){return this.reverse().first(t)},ut.prototype.filter=function(t){var a;return Yr(this._ctx,function(o){return t(o.value)}),(a=this._ctx).isMatch=Nn(a.isMatch,t),this},ut.prototype.and=function(t){return this.filter(t)},ut.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},ut.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},ut.prototype.desc=function(){return this.reverse()},ut.prototype.eachKey=function(t){var a=this._ctx;return a.keysOnly=!a.isMatch,this.each(function(o,l){t(l.key,l)})},ut.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},ut.prototype.eachPrimaryKey=function(t){var a=this._ctx;return a.keysOnly=!a.isMatch,this.each(function(o,l){t(l.primaryKey,l)})},ut.prototype.keys=function(t){var a=this._ctx;a.keysOnly=!a.isMatch;var o=[];return this.each(function(l,f){o.push(f.key)}).then(function(){return o}).then(t)},ut.prototype.primaryKeys=function(t){var a=this._ctx;if(a.dir==="next"&&Hn(a,!0)&&0<a.limit)return this._read(function(l){var f=mr(a,a.table.core.schema);return a.table.core.query({trans:l,values:!1,limit:a.limit,query:{index:f,range:a.range}})}).then(function(l){return l.result}).then(t);a.keysOnly=!a.isMatch;var o=[];return this.each(function(l,f){o.push(f.primaryKey)}).then(function(){return o}).then(t)},ut.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},ut.prototype.firstKey=function(t){return this.limit(1).keys(function(a){return a[0]}).then(t)},ut.prototype.lastKey=function(t){return this.reverse().firstKey(t)},ut.prototype.distinct=function(){var t=this._ctx,t=t.index&&t.table.schema.idxByName[t.index];if(!t||!t.multi)return this;var a={};return Yr(this._ctx,function(f){var l=f.primaryKey.toString(),f=k(a,l);return a[l]=!0,!f}),this},ut.prototype.modify=function(t){var a=this,o=this._ctx;return this._write(function(l){var f,d,y;y=typeof t=="function"?t:(f=u(t),d=f.length,function(N){for(var G=!1,Z=0;Z<d;++Z){var Q=f[Z],te=t[Q],me=he(N,Q);te instanceof $n?(ne(N,Q,te.execute(me)),G=!0):me!==te&&(ne(N,Q,te),G=!0)}return G});function E(N,Q){var Z=Q.failures,Q=Q.numFailures;B+=N-Q;for(var te=0,me=u(Z);te<me.length;te++){var Fe=me[te];M.push(Z[Fe])}}var R=o.table.core,I=R.schema.primaryKey,j=I.outbound,T=I.extractKey,V=a.db._options.modifyChunkSize||200,M=[],B=0,q=[];return a.clone().primaryKeys().then(function(N){function G(Q){var te=Math.min(V,N.length-Q);return R.getMany({trans:l,keys:N.slice(Q,Q+te),cache:"immutable"}).then(function(me){for(var Fe=[],Ce=[],Ke=j?[]:null,je=[],Re=0;Re<te;++Re){var Qe=me[Re],$e={value:Ee(Qe),primKey:N[Q+Re]};y.call($e,$e.value,$e)!==!1&&($e.value==null?je.push(N[Q+Re]):j||ct(T(Qe),T($e.value))===0?(Ce.push($e.value),j&&Ke.push(N[Q+Re])):(je.push(N[Q+Re]),Fe.push($e.value)))}return Promise.resolve(0<Fe.length&&R.mutate({trans:l,type:"add",values:Fe}).then(function(nt){for(var et in nt.failures)je.splice(parseInt(et),1);E(Fe.length,nt)})).then(function(){return(0<Ce.length||Z&&typeof t=="object")&&R.mutate({trans:l,type:"put",keys:Ke,values:Ce,criteria:Z,changeSpec:typeof t!="function"&&t,isAdditionalChunk:0<Q}).then(function(nt){return E(Ce.length,nt)})}).then(function(){return(0<je.length||Z&&t===Jr)&&R.mutate({trans:l,type:"delete",keys:je,criteria:Z,isAdditionalChunk:0<Q}).then(function(nt){return E(je.length,nt)})}).then(function(){return N.length>Q+te&&G(Q+V)})})}var Z=Hn(o)&&o.limit===1/0&&(typeof t!="function"||t===Jr)&&{index:o.index,range:o.range};return G(0).then(function(){if(0<M.length)throw new Ae("Error modifying one or more objects",M,B,q);return N.length})})})},ut.prototype.delete=function(){var t=this._ctx,a=t.range;return Hn(t)&&(t.isPrimKey||a.type===3)?this._write(function(o){var l=t.table.core.schema.primaryKey,f=a;return t.table.core.count({trans:o,query:{index:l,range:f}}).then(function(d){return t.table.core.mutate({trans:o,type:"deleteRange",range:f}).then(function(y){var E=y.failures;if(y.lastResult,y.results,y=y.numFailures,y)throw new Ae("Could not delete some values",Object.keys(E).map(function(R){return E[R]}),d-y);return d-y})})}):this.modify(Jr)},ut);function ut(){}var Jr=function(t,a){return a.value=null};function ts(t,a){return t<a?-1:t===a?0:1}function ns(t,a){return a<t?-1:t===a?0:1}function an(t,a,o){return t=t instanceof Yi?new t.Collection(t):t,t._ctx.error=new(o||TypeError)(a),t}function xn(t){return new t.Collection(t,function(){return Gi("")}).limit(0)}function vr(t,a,o,l){var f,d,y,E,R,I,j,T=o.length;if(!o.every(function(B){return typeof B=="string"}))return an(t,Fi);function V(B){f=B==="next"?function(N){return N.toUpperCase()}:function(N){return N.toLowerCase()},d=B==="next"?function(N){return N.toLowerCase()}:function(N){return N.toUpperCase()},y=B==="next"?ts:ns;var q=o.map(function(N){return{lower:d(N),upper:f(N)}}).sort(function(N,G){return y(N.lower,G.lower)});E=q.map(function(N){return N.upper}),R=q.map(function(N){return N.lower}),j=(I=B)==="next"?"":l}V("next"),t=new t.Collection(t,function(){return On(E[0],R[T-1]+l)}),t._ondirectionchange=function(B){V(B)};var M=0;return t._addAlgorithm(function(B,q,N){var G=B.key;if(typeof G!="string")return!1;var Z=d(G);if(a(Z,R,M))return!0;for(var Q=null,te=M;te<T;++te){var me=function(Fe,Ce,Ke,je,Re,Qe){for(var $e=Math.min(Fe.length,je.length),nt=-1,et=0;et<$e;++et){var hn=Ce[et];if(hn!==je[et])return Re(Fe[et],Ke[et])<0?Fe.substr(0,et)+Ke[et]+Ke.substr(et+1):Re(Fe[et],je[et])<0?Fe.substr(0,et)+je[et]+Ke.substr(et+1):0<=nt?Fe.substr(0,nt)+Ce[nt]+Ke.substr(nt+1):null;Re(Fe[et],hn)<0&&(nt=et)}return $e<je.length&&Qe==="next"?Fe+Ke.substr(Fe.length):$e<Fe.length&&Qe==="prev"?Fe.substr(0,Ke.length):nt<0?null:Fe.substr(0,nt)+je[nt]+Ke.substr(nt+1)}(G,Z,E[te],R[te],y,I);me===null&&Q===null?M=te+1:(Q===null||0<y(Q,me))&&(Q=me)}return q(Q!==null?function(){B.continue(Q+j)}:N),!1}),t}function On(t,a,o,l){return{type:2,lower:t,upper:a,lowerOpen:o,upperOpen:l}}function Gi(t){return{type:1,lower:t,upper:t}}var Yi=(Object.defineProperty(Bt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Bt.prototype.between=function(t,a,o,l){o=o!==!1,l=l===!0;try{return 0<this._cmp(t,a)||this._cmp(t,a)===0&&(o||l)&&(!o||!l)?xn(this):new this.Collection(this,function(){return On(t,a,!o,!l)})}catch{return an(this,Dn)}},Bt.prototype.equals=function(t){return t==null?an(this,Dn):new this.Collection(this,function(){return Gi(t)})},Bt.prototype.above=function(t){return t==null?an(this,Dn):new this.Collection(this,function(){return On(t,void 0,!0)})},Bt.prototype.aboveOrEqual=function(t){return t==null?an(this,Dn):new this.Collection(this,function(){return On(t,void 0,!1)})},Bt.prototype.below=function(t){return t==null?an(this,Dn):new this.Collection(this,function(){return On(void 0,t,!1,!0)})},Bt.prototype.belowOrEqual=function(t){return t==null?an(this,Dn):new this.Collection(this,function(){return On(void 0,t)})},Bt.prototype.startsWith=function(t){return typeof t!="string"?an(this,Fi):this.between(t,t+Rn,!0,!0)},Bt.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):vr(this,function(a,o){return a.indexOf(o[0])===0},[t],Rn)},Bt.prototype.equalsIgnoreCase=function(t){return vr(this,function(a,o){return a===o[0]},[t],"")},Bt.prototype.anyOfIgnoreCase=function(){var t=K.apply(C,arguments);return t.length===0?xn(this):vr(this,function(a,o){return o.indexOf(a)!==-1},t,"")},Bt.prototype.startsWithAnyOfIgnoreCase=function(){var t=K.apply(C,arguments);return t.length===0?xn(this):vr(this,function(a,o){return o.some(function(l){return a.indexOf(l)===0})},t,Rn)},Bt.prototype.anyOf=function(){var t=this,a=K.apply(C,arguments),o=this._cmp;try{a.sort(o)}catch{return an(this,Dn)}if(a.length===0)return xn(this);var l=new this.Collection(this,function(){return On(a[0],a[a.length-1])});l._ondirectionchange=function(d){o=d==="next"?t._ascending:t._descending,a.sort(o)};var f=0;return l._addAlgorithm(function(d,y,E){for(var R=d.key;0<o(R,a[f]);)if(++f===a.length)return y(E),!1;return o(R,a[f])===0||(y(function(){d.continue(a[f])}),!1)}),l},Bt.prototype.notEqual=function(t){return this.inAnyRange([[-1/0,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Bt.prototype.noneOf=function(){var t=K.apply(C,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return an(this,Dn)}var a=t.reduce(function(o,l){return o?o.concat([[o[o.length-1][1],l]]):[[-1/0,l]]},null);return a.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(a,{includeLowers:!1,includeUppers:!1})},Bt.prototype.inAnyRange=function(G,a){var o=this,l=this._cmp,f=this._ascending,d=this._descending,y=this._min,E=this._max;if(G.length===0)return xn(this);if(!G.every(function(Z){return Z[0]!==void 0&&Z[1]!==void 0&&f(Z[0],Z[1])<=0}))return an(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ge.InvalidArgument);var R=!a||a.includeLowers!==!1,I=a&&a.includeUppers===!0,j,T=f;function V(Z,Q){return T(Z[0],Q[0])}try{(j=G.reduce(function(Z,Q){for(var te=0,me=Z.length;te<me;++te){var Fe=Z[te];if(l(Q[0],Fe[1])<0&&0<l(Q[1],Fe[0])){Fe[0]=y(Fe[0],Q[0]),Fe[1]=E(Fe[1],Q[1]);break}}return te===me&&Z.push(Q),Z},[])).sort(V)}catch{return an(this,Dn)}var M=0,B=I?function(Z){return 0<f(Z,j[M][1])}:function(Z){return 0<=f(Z,j[M][1])},q=R?function(Z){return 0<d(Z,j[M][0])}:function(Z){return 0<=d(Z,j[M][0])},N=B,G=new this.Collection(this,function(){return On(j[0][0],j[j.length-1][1],!R,!I)});return G._ondirectionchange=function(Z){T=Z==="next"?(N=B,f):(N=q,d),j.sort(V)},G._addAlgorithm(function(Z,Q,te){for(var me,Fe=Z.key;N(Fe);)if(++M===j.length)return Q(te),!1;return!B(me=Fe)&&!q(me)||(o._cmp(Fe,j[M][1])===0||o._cmp(Fe,j[M][0])===0||Q(function(){T===f?Z.continue(j[M][0]):Z.continue(j[M][1])}),!1)}),G},Bt.prototype.startsWithAnyOf=function(){var t=K.apply(C,arguments);return t.every(function(a){return typeof a=="string"})?t.length===0?xn(this):this.inAnyRange(t.map(function(a){return[a,a+Rn]})):an(this,"startsWithAnyOf() only works with strings")},Bt);function Bt(){}function yn(t){return at(function(a){return Xn(a),t(a.target.error),!1})}function Xn(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var er="storagemutated",Qr="x-storagemutated-1",An=Jn(null,er),rs=(bn.prototype._lock=function(){return P(!Be.global),++this._reculock,this._reculock!==1||Be.global||(Be.lockOwnerFor=this),this},bn.prototype._unlock=function(){if(P(!Be.global),--this._reculock==0)for(Be.global||(Be.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var t=this._blockedFuncs.shift();try{Mn(t[1],t[0])}catch{}}return this},bn.prototype._locked=function(){return this._reculock&&Be.lockOwnerFor!==this},bn.prototype.create=function(t){var a=this;if(!this.mode)return this;var o=this.db.idbdb,l=this.db._state.dbOpenError;if(P(!this.idbtrans),!t&&!o)switch(l&&l.name){case"DatabaseClosedError":throw new ge.DatabaseClosed(l);case"MissingAPIError":throw new ge.MissingAPI(l.message,l);default:throw new ge.OpenFailed(l)}if(!this.active)throw new ge.TransactionInactive;return P(this._completion._state===null),(t=this.idbtrans=t||(this.db.core||o).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=at(function(f){Xn(f),a._reject(t.error)}),t.onabort=at(function(f){Xn(f),a.active&&a._reject(new ge.Abort(t.error)),a.active=!1,a.on("abort").fire(f)}),t.oncomplete=at(function(){a.active=!1,a._resolve(),"mutatedParts"in t&&An.storagemutated.fire(t.mutatedParts)}),this},bn.prototype._promise=function(t,a,o){var l=this;if(t==="readwrite"&&this.mode!=="readwrite")return Ot(new ge.ReadOnly("Transaction is readonly"));if(!this.active)return Ot(new ge.TransactionInactive);if(this._locked())return new ke(function(d,y){l._blockedFuncs.push([function(){l._promise(t,a,o).then(d,y)},Be])});if(o)return en(function(){var d=new ke(function(y,E){l._lock();var R=a(y,E,l);R&&R.then&&R.then(y,E)});return d.finally(function(){return l._unlock()}),d._lib=!0,d});var f=new ke(function(d,y){var E=a(d,y,l);E&&E.then&&E.then(d,y)});return f._lib=!0,f},bn.prototype._root=function(){return this.parent?this.parent._root():this},bn.prototype.waitFor=function(t){var a,o=this._root(),l=ke.resolve(t);o._waitingFor?o._waitingFor=o._waitingFor.then(function(){return l}):(o._waitingFor=l,o._waitingQueue=[],a=o.idbtrans.objectStore(o.storeNames[0]),function d(){for(++o._spinCount;o._waitingQueue.length;)o._waitingQueue.shift()();o._waitingFor&&(a.get(-1/0).onsuccess=d)}());var f=o._waitingFor;return new ke(function(d,y){l.then(function(E){return o._waitingQueue.push(at(d.bind(null,E)))},function(E){return o._waitingQueue.push(at(y.bind(null,E)))}).finally(function(){o._waitingFor===f&&(o._waitingFor=null)})})},bn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ge.Abort))},bn.prototype.table=function(t){var a=this._memoizedTables||(this._memoizedTables={});if(k(a,t))return a[t];var o=this.schema[t];if(!o)throw new ge.NotFound("Table "+t+" not part of transaction");return o=new this.db.Table(t,o,this),o.core=this.db.core.table(t),a[t]=o},bn);function bn(){}function $r(t,a,o,l,f,d,y){return{name:t,keyPath:a,unique:o,multi:l,auto:f,compound:d,src:(o&&!y?"&":"")+(l?"*":"")+(f?"++":"")+Zi(a)}}function Zi(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function Xr(t,a,o){return{name:t,primKey:a,indexes:o,mappedClass:null,idxByName:(l=function(f){return[f.name,f]},o.reduce(function(f,d,y){return y=l(d,y),y&&(f[y[0]]=y[1]),f},{}))};var l}var tr=function(t){try{return t.only([[]]),tr=function(){return[[]]},[[]]}catch{return tr=function(){return Rn},Rn}};function ei(t){return t==null?function(){}:typeof t=="string"?(a=t).split(".").length===1?function(o){return o[a]}:function(o){return he(o,a)}:function(o){return he(o,t)};var a}function Ji(t){return[].slice.call(t)}var is=0;function nr(t){return t==null?":id":typeof t=="string"?t:"[".concat(t.join("+"),"]")}function as(t,a,R){function l(N){if(N.type===3)return null;if(N.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var M=N.lower,B=N.upper,q=N.lowerOpen,N=N.upperOpen;return M===void 0?B===void 0?null:a.upperBound(B,!!N):B===void 0?a.lowerBound(M,!!q):a.bound(M,B,!!q,!!N)}function f(V){var M,B=V.name;return{name:B,schema:V,mutate:function(q){var N=q.trans,G=q.type,Z=q.keys,Q=q.values,te=q.range;return new Promise(function(me,Fe){me=at(me);var Ce=N.objectStore(B),Ke=Ce.keyPath==null,je=G==="put"||G==="add";if(!je&&G!=="delete"&&G!=="deleteRange")throw new Error("Invalid operation type: "+G);var Re,Qe=(Z||Q||{length:1}).length;if(Z&&Q&&Z.length!==Q.length)throw new Error("Given keys array must have same length as given values array.");if(Qe===0)return me({numFailures:0,failures:{},results:[],lastResult:void 0});function $e($t){++hn,Xn($t)}var nt=[],et=[],hn=0;if(G==="deleteRange"){if(te.type===4)return me({numFailures:hn,failures:et,results:[],lastResult:void 0});te.type===3?nt.push(Re=Ce.clear()):nt.push(Re=Ce.delete(l(te)))}else{var Ke=je?Ke?[Q,Z]:[Q,null]:[Z,null],tt=Ke[0],Wt=Ke[1];if(je)for(var Gt=0;Gt<Qe;++Gt)nt.push(Re=Wt&&Wt[Gt]!==void 0?Ce[G](tt[Gt],Wt[Gt]):Ce[G](tt[Gt])),Re.onerror=$e;else for(Gt=0;Gt<Qe;++Gt)nt.push(Re=Ce[G](tt[Gt])),Re.onerror=$e}function Pr($t){$t=$t.target.result,nt.forEach(function(Fn,yi){return Fn.error!=null&&(et[yi]=Fn.error)}),me({numFailures:hn,failures:et,results:G==="delete"?Z:nt.map(function(Fn){return Fn.result}),lastResult:$t})}Re.onerror=function($t){$e($t),Pr($t)},Re.onsuccess=Pr})},getMany:function(q){var N=q.trans,G=q.keys;return new Promise(function(Z,Q){Z=at(Z);for(var te,me=N.objectStore(B),Fe=G.length,Ce=new Array(Fe),Ke=0,je=0,Re=function(nt){nt=nt.target,Ce[nt._pos]=nt.result,++je===Ke&&Z(Ce)},Qe=yn(Q),$e=0;$e<Fe;++$e)G[$e]!=null&&((te=me.get(G[$e]))._pos=$e,te.onsuccess=Re,te.onerror=Qe,++Ke);Ke===0&&Z(Ce)})},get:function(q){var N=q.trans,G=q.key;return new Promise(function(Z,Q){Z=at(Z);var te=N.objectStore(B).get(G);te.onsuccess=function(me){return Z(me.target.result)},te.onerror=yn(Q)})},query:(M=I,function(q){return new Promise(function(N,G){N=at(N);var Z,Q,te,Ke=q.trans,me=q.values,Fe=q.limit,Re=q.query,Ce=Fe===1/0?void 0:Fe,je=Re.index,Re=Re.range,Ke=Ke.objectStore(B),je=je.isPrimaryKey?Ke:Ke.index(je.name),Re=l(Re);if(Fe===0)return N({result:[]});M?((Ce=me?je.getAll(Re,Ce):je.getAllKeys(Re,Ce)).onsuccess=function(Qe){return N({result:Qe.target.result})},Ce.onerror=yn(G)):(Z=0,Q=!me&&"openKeyCursor"in je?je.openKeyCursor(Re):je.openCursor(Re),te=[],Q.onsuccess=function(Qe){var $e=Q.result;return $e?(te.push(me?$e.value:$e.primaryKey),++Z===Fe?N({result:te}):void $e.continue()):N({result:te})},Q.onerror=yn(G))})}),openCursor:function(q){var N=q.trans,G=q.values,Z=q.query,Q=q.reverse,te=q.unique;return new Promise(function(me,Fe){me=at(me);var je=Z.index,Ce=Z.range,Ke=N.objectStore(B),Ke=je.isPrimaryKey?Ke:Ke.index(je.name),je=Q?te?"prevunique":"prev":te?"nextunique":"next",Re=!G&&"openKeyCursor"in Ke?Ke.openKeyCursor(l(Ce),je):Ke.openCursor(l(Ce),je);Re.onerror=yn(Fe),Re.onsuccess=at(function(Qe){var $e,nt,et,hn,tt=Re.result;tt?(tt.___id=++is,tt.done=!1,$e=tt.continue.bind(tt),nt=(nt=tt.continuePrimaryKey)&&nt.bind(tt),et=tt.advance.bind(tt),hn=function(){throw new Error("Cursor not stopped")},tt.trans=N,tt.stop=tt.continue=tt.continuePrimaryKey=tt.advance=function(){throw new Error("Cursor not started")},tt.fail=at(Fe),tt.next=function(){var Wt=this,Gt=1;return this.start(function(){return Gt--?Wt.continue():Wt.stop()}).then(function(){return Wt})},tt.start=function(Wt){function Gt(){if(Re.result)try{Wt()}catch($t){tt.fail($t)}else tt.done=!0,tt.start=function(){throw new Error("Cursor behind last entry")},tt.stop()}var Pr=new Promise(function($t,Fn){$t=at($t),Re.onerror=yn(Fn),tt.fail=Fn,tt.stop=function(yi){tt.stop=tt.continue=tt.continuePrimaryKey=tt.advance=hn,$t(yi)}});return Re.onsuccess=at(function($t){Re.onsuccess=Gt,Gt()}),tt.continue=$e,tt.continuePrimaryKey=nt,tt.advance=et,Gt(),Pr},me(tt)):me(null)},Fe)})},count:function(q){var N=q.query,G=q.trans,Z=N.index,Q=N.range;return new Promise(function(te,me){var Fe=G.objectStore(B),Ce=Z.isPrimaryKey?Fe:Fe.index(Z.name),Fe=l(Q),Ce=Fe?Ce.count(Fe):Ce.count();Ce.onsuccess=at(function(Ke){return te(Ke.target.result)}),Ce.onerror=yn(me)})}}}var d,y,E,j=(y=R,E=Ji((d=t).objectStoreNames),{schema:{name:d.name,tables:E.map(function(V){return y.objectStore(V)}).map(function(V){var M=V.keyPath,N=V.autoIncrement,B=g(M),q={},N={name:V.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:M==null,compound:B,keyPath:M,autoIncrement:N,unique:!0,extractKey:ei(M)},indexes:Ji(V.indexNames).map(function(G){return V.index(G)}).map(function(te){var Z=te.name,Q=te.unique,me=te.multiEntry,te=te.keyPath,me={name:Z,compound:g(te),keyPath:te,unique:Q,multiEntry:me,extractKey:ei(te)};return q[nr(te)]=me}),getIndexByKeyPath:function(G){return q[nr(G)]}};return q[":id"]=N.primaryKey,M!=null&&(q[nr(M)]=N.primaryKey),N})},hasGetAll:0<E.length&&"getAll"in y.objectStore(E[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),R=j.schema,I=j.hasGetAll,j=R.tables.map(f),T={};return j.forEach(function(V){return T[V.name]=V}),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(V){if(!T[V])throw new Error("Table '".concat(V,"' not found"));return T[V]},MIN_KEY:-1/0,MAX_KEY:tr(a),schema:R}}function os(t,a,o,l){var f=o.IDBKeyRange;return o.indexedDB,{dbcore:(l=as(a,f,l),t.dbcore.reduce(function(d,y){return y=y.create,r(r({},d),y(d))},l))}}function _r(t,l){var o=l.db,l=os(t._middlewares,o,t._deps,l);t.core=l.dbcore,t.tables.forEach(function(f){var d=f.name;t.core.schema.tables.some(function(y){return y.name===d})&&(f.core=t.core.table(d),t[d]instanceof t.Table&&(t[d].core=f.core))})}function yr(t,a,o,l){o.forEach(function(f){var d=l[f];a.forEach(function(y){var E=function R(I,j){return z(I,j)||(I=m(I))&&R(I,j)}(y,f);(!E||"value"in E&&E.value===void 0)&&(y===t.Transaction.prototype||y instanceof t.Transaction?X(y,f,{get:function(){return this.table(f)},set:function(R){U(this,f,{value:R,writable:!0,configurable:!0,enumerable:!0})}}):y[f]=new t.Table(f,d))})})}function ti(t,a){a.forEach(function(o){for(var l in o)o[l]instanceof t.Table&&delete o[l]})}function ss(t,a){return t._cfg.version-a._cfg.version}function ls(t,a,o,l){var f=t._dbSchema;o.objectStoreNames.contains("$meta")&&!f.$meta&&(f.$meta=Xr("$meta",$i("")[0],[]),t._storeNames.push("$meta"));var d=t._createTransaction("readwrite",t._storeNames,f);d.create(o),d._completion.catch(l);var y=d._reject.bind(d),E=Be.transless||Be;en(function(){return Be.trans=d,Be.transless=E,a!==0?(_r(t,o),I=a,((R=d).storeNames.includes("$meta")?R.table("$meta").get("version").then(function(j){return j??I}):ke.resolve(I)).then(function(j){return V=j,M=d,B=o,q=[],j=(T=t)._versions,N=T._dbSchema=wr(0,T.idbdb,B),(j=j.filter(function(G){return G._cfg.version>=V})).length!==0?(j.forEach(function(G){q.push(function(){var Z=N,Q=G._cfg.dbschema;kr(T,Z,B),kr(T,Q,B),N=T._dbSchema=Q;var te=ni(Z,Q);te.add.forEach(function(je){ri(B,je[0],je[1].primKey,je[1].indexes)}),te.change.forEach(function(je){if(je.recreate)throw new ge.Upgrade("Not yet support for changing primary key");var Re=B.objectStore(je.name);je.add.forEach(function(Qe){return br(Re,Qe)}),je.change.forEach(function(Qe){Re.deleteIndex(Qe.name),br(Re,Qe)}),je.del.forEach(function(Qe){return Re.deleteIndex(Qe)})});var me=G._cfg.contentUpgrade;if(me&&G._cfg.version>V){_r(T,B),M._memoizedTables={};var Fe=se(Q);te.del.forEach(function(je){Fe[je]=Z[je]}),ti(T,[T.Transaction.prototype]),yr(T,[T.Transaction.prototype],u(Fe),Fe),M.schema=Fe;var Ce,Ke=$(me);return Ke&&bt(),te=ke.follow(function(){var je;(Ce=me(M))&&Ke&&(je=dn.bind(null,null),Ce.then(je,je))}),Ce&&typeof Ce.then=="function"?ke.resolve(Ce):te.then(function(){return Ce})}}),q.push(function(Z){var Q,te,me=G._cfg.dbschema;Q=me,te=Z,[].slice.call(te.db.objectStoreNames).forEach(function(Fe){return Q[Fe]==null&&te.db.deleteObjectStore(Fe)}),ti(T,[T.Transaction.prototype]),yr(T,[T.Transaction.prototype],T._storeNames,T._dbSchema),M.schema=T._dbSchema}),q.push(function(Z){T.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(T.idbdb.version/10)===G._cfg.version?(T.idbdb.deleteObjectStore("$meta"),delete T._dbSchema.$meta,T._storeNames=T._storeNames.filter(function(Q){return Q!=="$meta"})):Z.objectStore("$meta").put(G._cfg.version,"version"))})}),function G(){return q.length?ke.resolve(q.shift()(M.idbtrans)).then(G):ke.resolve()}().then(function(){Qi(N,B)})):ke.resolve();var T,V,M,B,q,N}).catch(y)):(u(f).forEach(function(j){ri(o,j,f[j].primKey,f[j].indexes)}),_r(t,o),void ke.follow(function(){return t.on.populate.fire(d)}).catch(y));var R,I})}function us(t,a){Qi(t._dbSchema,a),a.db.version%10!=0||a.objectStoreNames.contains("$meta")||a.db.createObjectStore("$meta").add(Math.ceil(a.db.version/10-1),"version");var o=wr(0,t.idbdb,a);kr(t,t._dbSchema,a);for(var l=0,f=ni(o,t._dbSchema).change;l<f.length;l++){var d=function(y){if(y.change.length||y.recreate)return console.warn("Unable to patch indexes of table ".concat(y.name," because it has changes on the type of index or primary key.")),{value:void 0};var E=a.objectStore(y.name);y.add.forEach(function(R){_t&&console.debug("Dexie upgrade patch: Creating missing index ".concat(y.name,".").concat(R.src)),br(E,R)})}(f[l]);if(typeof d=="object")return d.value}}function ni(t,a){var o,l={del:[],add:[],change:[]};for(o in t)a[o]||l.del.push(o);for(o in a){var f=t[o],d=a[o];if(f){var y={name:o,def:d,recreate:!1,del:[],add:[],change:[]};if(""+(f.primKey.keyPath||"")!=""+(d.primKey.keyPath||"")||f.primKey.auto!==d.primKey.auto)y.recreate=!0,l.change.push(y);else{var E=f.idxByName,R=d.idxByName,I=void 0;for(I in E)R[I]||y.del.push(I);for(I in R){var j=E[I],T=R[I];j?j.src!==T.src&&y.change.push(T):y.add.push(T)}(0<y.del.length||0<y.add.length||0<y.change.length)&&l.change.push(y)}}else l.add.push([o,d])}return l}function ri(t,a,o,l){var f=t.db.createObjectStore(a,o.keyPath?{keyPath:o.keyPath,autoIncrement:o.auto}:{autoIncrement:o.auto});return l.forEach(function(d){return br(f,d)}),f}function Qi(t,a){u(t).forEach(function(o){a.db.objectStoreNames.contains(o)||(_t&&console.debug("Dexie: Creating missing table",o),ri(a,o,t[o].primKey,t[o].indexes))})}function br(t,a){t.createIndex(a.name,a.keyPath,{unique:a.unique,multiEntry:a.multi})}function wr(t,a,o){var l={};return D(a.objectStoreNames,0).forEach(function(f){for(var d=o.objectStore(f),y=$r(Zi(I=d.keyPath),I||"",!0,!1,!!d.autoIncrement,I&&typeof I!="string",!0),E=[],R=0;R<d.indexNames.length;++R){var j=d.index(d.indexNames[R]),I=j.keyPath,j=$r(j.name,I,!!j.unique,!!j.multiEntry,!1,I&&typeof I!="string",!1);E.push(j)}l[f]=Xr(f,y,E)}),l}function kr(t,a,o){for(var l=o.db.objectStoreNames,f=0;f<l.length;++f){var d=l[f],y=o.objectStore(d);t._hasGetAll="getAll"in y;for(var E=0;E<y.indexNames.length;++E){var R=y.indexNames[E],I=y.index(R).keyPath,j=typeof I=="string"?I:"["+D(I).join("+")+"]";!a[d]||(I=a[d].idxByName[j])&&(I.name=R,delete a[d].idxByName[j],a[d].idxByName[R]=I)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&c.WorkerGlobalScope&&c instanceof c.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}function $i(t){return t.split(",").map(function(a,o){var l=(a=a.trim()).replace(/([&*]|\+\+)/g,""),f=/^\[/.test(l)?l.match(/^\[(.*)\]$/)[1].split("+"):l;return $r(l,f||null,/\&/.test(a),/\*/.test(a),/\+\+/.test(a),g(f),o===0)})}var cs=(Er.prototype._parseStoresSpec=function(t,a){u(t).forEach(function(o){if(t[o]!==null){var l=$i(t[o]),f=l.shift();if(f.unique=!0,f.multi)throw new ge.Schema("Primary key cannot be multi-valued");l.forEach(function(d){if(d.auto)throw new ge.Schema("Only primary key can be marked as autoIncrement (++)");if(!d.keyPath)throw new ge.Schema("Index must have a name and cannot be an empty string")}),a[o]=Xr(o,f,l)}})},Er.prototype.stores=function(o){var a=this.db;this._cfg.storesSource=this._cfg.storesSource?_(this._cfg.storesSource,o):o;var o=a._versions,l={},f={};return o.forEach(function(d){_(l,d._cfg.storesSource),f=d._cfg.dbschema={},d._parseStoresSpec(l,f)}),a._dbSchema=f,ti(a,[a._allTables,a,a.Transaction.prototype]),yr(a,[a._allTables,a,a.Transaction.prototype,this._cfg.tables],u(f),f),a._storeNames=u(f),this},Er.prototype.upgrade=function(t){return this._cfg.contentUpgrade=it(this._cfg.contentUpgrade||_e,t),this},Er);function Er(){}function ii(t,a){var o=t._dbNamesDB;return o||(o=t._dbNamesDB=new Tn(hr,{addons:[],indexedDB:t,IDBKeyRange:a})).version(1).stores({dbnames:"name"}),o.table("dbnames")}function ai(t){return t&&typeof t.databases=="function"}function oi(t){return en(function(){return Be.letThrough=!0,t()})}function si(t){return!("from"in t)}var xt=function(t,a){if(!this){var o=new xt;return t&&"d"in t&&_(o,t),o}_(this,arguments.length?{d:1,from:t,to:1<arguments.length?a:t}:{d:0})};function rr(t,a,o){var l=ct(a,o);if(!isNaN(l)){if(0<l)throw RangeError();if(si(t))return _(t,{from:a,to:o,d:1});var f=t.l,l=t.r;if(ct(o,t.from)<0)return f?rr(f,a,o):t.l={from:a,to:o,d:1,l:null,r:null},Xi(t);if(0<ct(a,t.to))return l?rr(l,a,o):t.r={from:a,to:o,d:1,l:null,r:null},Xi(t);ct(a,t.from)<0&&(t.from=a,t.l=null,t.d=l?l.d+1:1),0<ct(o,t.to)&&(t.to=o,t.r=null,t.d=t.l?t.l.d+1:1),o=!t.r,f&&!t.l&&ir(t,f),l&&o&&ir(t,l)}}function ir(t,a){si(a)||function o(l,R){var d=R.from,y=R.to,E=R.l,R=R.r;rr(l,d,y),E&&o(l,E),R&&o(l,R)}(t,a)}function Dr(t,a){var o=li(a),l=o.next();if(l.done)return!1;for(var f=l.value,d=li(t),y=d.next(f.from),E=y.value;!l.done&&!y.done;){if(ct(E.from,f.to)<=0&&0<=ct(E.to,f.from))return!0;ct(f.from,E.from)<0?f=(l=o.next(E.from)).value:E=(y=d.next(f.from)).value}return!1}function li(t){var a=si(t)?null:{s:0,n:t};return{next:function(o){for(var l=0<arguments.length;a;)switch(a.s){case 0:if(a.s=1,l)for(;a.n.l&&ct(o,a.n.from)<0;)a={up:a,n:a.n.l,s:1};else for(;a.n.l;)a={up:a,n:a.n.l,s:1};case 1:if(a.s=2,!l||ct(o,a.n.to)<=0)return{value:a.n,done:!1};case 2:if(a.n.r){a.s=3,a={up:a,n:a.n.r,s:0};continue}case 3:a=a.up}return{done:!0}}}}function Xi(t){var a,o,l=(((a=t.r)===null||a===void 0?void 0:a.d)||0)-(((o=t.l)===null||o===void 0?void 0:o.d)||0),f=1<l?"r":l<-1?"l":"";f&&(a=f=="r"?"l":"r",o=r({},t),l=t[f],t.from=l.from,t.to=l.to,t[f]=l[f],o[f]=l[a],(t[a]=o).d=ea(o)),t.d=ea(t)}function ea(o){var a=o.r,o=o.l;return(a?o?Math.max(a.d,o.d):a.d:o?o.d:0)+1}function Sr(t,a){return u(a).forEach(function(o){t[o]?ir(t[o],a[o]):t[o]=function l(f){var d,y,E={};for(d in f)k(f,d)&&(y=f[d],E[d]=!y||typeof y!="object"||Ne.has(y.constructor)?y:l(y));return E}(a[o])}),t}function ui(t,a){return t.all||a.all||Object.keys(t).some(function(o){return a[o]&&Dr(a[o],t[o])})}L(xt.prototype,((ln={add:function(t){return ir(this,t),this},addKey:function(t){return rr(this,t,t),this},addKeys:function(t){var a=this;return t.forEach(function(o){return rr(a,o,o)}),this}})[Ue]=function(){return li(this)},ln));var Bn={},ci={},fi=!1;function Tr(t){Sr(ci,t),fi||(fi=!0,setTimeout(function(){fi=!1,di(ci,!(ci={}))},0))}function di(t,a){a===void 0&&(a=!1);var o=new Set;if(t.all)for(var l=0,f=Object.values(Bn);l<f.length;l++)ta(y=f[l],t,o,a);else for(var d in t){var y,E=/^idb\:\/\/(.*)\/(.*)\//.exec(d);E&&(d=E[1],E=E[2],(y=Bn["idb://".concat(d,"/").concat(E)])&&ta(y,t,o,a))}o.forEach(function(R){return R()})}function ta(t,a,o,l){for(var f=[],d=0,y=Object.entries(t.queries.query);d<y.length;d++){for(var E=y[d],R=E[0],I=[],j=0,T=E[1];j<T.length;j++){var V=T[j];ui(a,V.obsSet)?V.subscribers.forEach(function(N){return o.add(N)}):l&&I.push(V)}l&&f.push([R,I])}if(l)for(var M=0,B=f;M<B.length;M++){var q=B[M],R=q[0],I=q[1];t.queries.query[R]=I}}function fs(t){var a=t._state,o=t._deps.indexedDB;if(a.isBeingOpened||t.idbdb)return a.dbReadyPromise.then(function(){return a.dbOpenError?Ot(a.dbOpenError):t});a.isBeingOpened=!0,a.dbOpenError=null,a.openComplete=!1;var l=a.openCanceller,f=Math.round(10*t.verno),d=!1;function y(){if(a.openCanceller!==l)throw new ge.DatabaseClosed("db.open() was cancelled")}function E(){return new ke(function(V,M){if(y(),!o)throw new ge.MissingAPI;var B=t.name,q=a.autoSchema||!f?o.open(B):o.open(B,f);if(!q)throw new ge.MissingAPI;q.onerror=yn(M),q.onblocked=at(t._fireOnBlocked),q.onupgradeneeded=at(function(N){var G;j=q.transaction,a.autoSchema&&!t._options.allowEmptyDB?(q.onerror=Xn,j.abort(),q.result.close(),(G=o.deleteDatabase(B)).onsuccess=G.onerror=at(function(){M(new ge.NoSuchDatabase("Database ".concat(B," doesnt exist")))})):(j.onerror=yn(M),N=N.oldVersion>Math.pow(2,62)?0:N.oldVersion,T=N<1,t.idbdb=q.result,d&&us(t,j),ls(t,N/10,j,M))},M),q.onsuccess=at(function(){j=null;var N,G,Z,Q,te,me=t.idbdb=q.result,Fe=D(me.objectStoreNames);if(0<Fe.length)try{var Ce=me.transaction((Q=Fe).length===1?Q[0]:Q,"readonly");if(a.autoSchema)G=me,Z=Ce,(N=t).verno=G.version/10,Z=N._dbSchema=wr(0,G,Z),N._storeNames=D(G.objectStoreNames,0),yr(N,[N._allTables],u(Z),Z);else if(kr(t,t._dbSchema,Ce),((te=ni(wr(0,(te=t).idbdb,Ce),te._dbSchema)).add.length||te.change.some(function(Ke){return Ke.add.length||Ke.change.length}))&&!d)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),me.close(),f=me.version+1,d=!0,V(E());_r(t,Ce)}catch{}zn.push(t),me.onversionchange=at(function(Ke){a.vcFired=!0,t.on("versionchange").fire(Ke)}),me.onclose=at(function(Ke){t.on("close").fire(Ke)}),T&&(te=t._deps,Ce=B,me=te.indexedDB,te=te.IDBKeyRange,ai(me)||Ce===hr||ii(me,te).put({name:Ce}).catch(_e)),V()},M)}).catch(function(V){switch(V==null?void 0:V.name){case"UnknownError":if(0<a.PR1398_maxLoop)return a.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),E();break;case"VersionError":if(0<f)return f=0,E()}return ke.reject(V)})}var R,I=a.dbReadyResolve,j=null,T=!1;return ke.race([l,(typeof navigator>"u"?ke.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(V){function M(){return indexedDB.databases().finally(V)}R=setInterval(M,100),M()}).finally(function(){return clearInterval(R)}):Promise.resolve()).then(E)]).then(function(){return y(),a.onReadyBeingFired=[],ke.resolve(oi(function(){return t.on.ready.fire(t.vip)})).then(function V(){if(0<a.onReadyBeingFired.length){var M=a.onReadyBeingFired.reduce(it,_e);return a.onReadyBeingFired=[],ke.resolve(oi(function(){return M(t.vip)})).then(V)}})}).finally(function(){a.openCanceller===l&&(a.onReadyBeingFired=null,a.isBeingOpened=!1)}).catch(function(V){a.dbOpenError=V;try{j&&j.abort()}catch{}return l===a.openCanceller&&t._close(),Ot(V)}).finally(function(){a.openComplete=!0,I()}).then(function(){var V;return T&&(V={},t.tables.forEach(function(M){M.schema.indexes.forEach(function(B){B.name&&(V["idb://".concat(t.name,"/").concat(M.name,"/").concat(B.name)]=new xt(-1/0,[[[]]]))}),V["idb://".concat(t.name,"/").concat(M.name,"/")]=V["idb://".concat(t.name,"/").concat(M.name,"/:dels")]=new xt(-1/0,[[[]]])}),An(er).fire(V),di(V,!0)),t})}function hi(t){function a(d){return t.next(d)}var o=f(a),l=f(function(d){return t.throw(d)});function f(d){return function(R){var E=d(R),R=E.value;return E.done?R:R&&typeof R.then=="function"?R.then(o,l):g(R)?Promise.all(R).then(o,l):o(R)}}return f(a)()}function Cr(t,a,o){for(var l=g(t)?t.slice():[t],f=0;f<o;++f)l.push(a);return l}var ds={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return r(r({},t),{table:function(a){var o=t.table(a),l=o.schema,f={},d=[];function y(T,V,M){var B=nr(T),q=f[B]=f[B]||[],N=T==null?0:typeof T=="string"?1:T.length,G=0<V,G=r(r({},M),{name:G?"".concat(B,"(virtual-from:").concat(M.name,")"):M.name,lowLevelIndex:M,isVirtual:G,keyTail:V,keyLength:N,extractKey:ei(T),unique:!G&&M.unique});return q.push(G),G.isPrimaryKey||d.push(G),1<N&&y(N===2?T[0]:T.slice(0,N-1),V+1,M),q.sort(function(Z,Q){return Z.keyTail-Q.keyTail}),G}a=y(l.primaryKey.keyPath,0,l.primaryKey),f[":id"]=[a];for(var E=0,R=l.indexes;E<R.length;E++){var I=R[E];y(I.keyPath,0,I)}function j(T){var V,M=T.query.index;return M.isVirtual?r(r({},T),{query:{index:M.lowLevelIndex,range:(V=T.query.range,M=M.keyTail,{type:V.type===1?2:V.type,lower:Cr(V.lower,V.lowerOpen?t.MAX_KEY:t.MIN_KEY,M),lowerOpen:!0,upper:Cr(V.upper,V.upperOpen?t.MIN_KEY:t.MAX_KEY,M),upperOpen:!0})}}):T}return r(r({},o),{schema:r(r({},l),{primaryKey:a,indexes:d,getIndexByKeyPath:function(T){return(T=f[nr(T)])&&T[0]}}),count:function(T){return o.count(j(T))},query:function(T){return o.query(j(T))},openCursor:function(T){var V=T.query.index,M=V.keyTail,B=V.isVirtual,q=V.keyLength;return B?o.openCursor(j(T)).then(function(G){return G&&N(G)}):o.openCursor(T);function N(G){return Object.create(G,{continue:{value:function(Z){Z!=null?G.continue(Cr(Z,T.reverse?t.MAX_KEY:t.MIN_KEY,M)):T.unique?G.continue(G.key.slice(0,q).concat(T.reverse?t.MIN_KEY:t.MAX_KEY,M)):G.continue()}},continuePrimaryKey:{value:function(Z,Q){G.continuePrimaryKey(Cr(Z,t.MAX_KEY,M),Q)}},primaryKey:{get:function(){return G.primaryKey}},key:{get:function(){var Z=G.key;return q===1?Z[0]:Z.slice(0,q)}},value:{get:function(){return G.value}}})}}})}})}};function pi(t,a,o,l){return o=o||{},l=l||"",u(t).forEach(function(f){var d,y,E;k(a,f)?(d=t[f],y=a[f],typeof d=="object"&&typeof y=="object"&&d&&y?(E=qe(d))!==qe(y)?o[l+f]=a[f]:E==="Object"?pi(d,y,o,l+f+"."):d!==y&&(o[l+f]=a[f]):d!==y&&(o[l+f]=a[f])):o[l+f]=void 0}),u(a).forEach(function(f){k(t,f)||(o[l+f]=a[f])}),o}function mi(t,a){return a.type==="delete"?a.keys:a.keys||a.values.map(t.extractKey)}var hs={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return r(r({},t),{table:function(a){var o=t.table(a),l=o.schema.primaryKey;return r(r({},o),{mutate:function(f){var d=Be.trans,y=d.table(a).hook,E=y.deleting,R=y.creating,I=y.updating;switch(f.type){case"add":if(R.fire===_e)break;return d._promise("readwrite",function(){return j(f)},!0);case"put":if(R.fire===_e&&I.fire===_e)break;return d._promise("readwrite",function(){return j(f)},!0);case"delete":if(E.fire===_e)break;return d._promise("readwrite",function(){return j(f)},!0);case"deleteRange":if(E.fire===_e)break;return d._promise("readwrite",function(){return function T(V,M,B){return o.query({trans:V,values:!1,query:{index:l,range:M},limit:B}).then(function(q){var N=q.result;return j({type:"delete",keys:N,trans:V}).then(function(G){return 0<G.numFailures?Promise.reject(G.failures[0]):N.length<B?{failures:[],numFailures:0,lastResult:void 0}:T(V,r(r({},M),{lower:N[N.length-1],lowerOpen:!0}),B)})})}(f.trans,f.range,1e4)},!0)}return o.mutate(f);function j(T){var V,M,B,q=Be.trans,N=T.keys||mi(l,T);if(!N)throw new Error("Keys missing");return(T=T.type==="add"||T.type==="put"?r(r({},T),{keys:N}):r({},T)).type!=="delete"&&(T.values=s([],T.values)),T.keys&&(T.keys=s([],T.keys)),V=o,B=N,((M=T).type==="add"?Promise.resolve([]):V.getMany({trans:M.trans,keys:B,cache:"immutable"})).then(function(G){var Z=N.map(function(Q,te){var me,Fe,Ce,Ke=G[te],je={onerror:null,onsuccess:null};return T.type==="delete"?E.fire.call(je,Q,Ke,q):T.type==="add"||Ke===void 0?(me=R.fire.call(je,Q,T.values[te],q),Q==null&&me!=null&&(T.keys[te]=Q=me,l.outbound||ne(T.values[te],l.keyPath,Q))):(me=pi(Ke,T.values[te]),(Fe=I.fire.call(je,me,Q,Ke,q))&&(Ce=T.values[te],Object.keys(Fe).forEach(function(Re){k(Ce,Re)?Ce[Re]=Fe[Re]:ne(Ce,Re,Fe[Re])}))),je});return o.mutate(T).then(function(Q){for(var te=Q.failures,me=Q.results,Fe=Q.numFailures,Q=Q.lastResult,Ce=0;Ce<N.length;++Ce){var Ke=(me||N)[Ce],je=Z[Ce];Ke==null?je.onerror&&je.onerror(te[Ce]):je.onsuccess&&je.onsuccess(T.type==="put"&&G[Ce]?T.values[Ce]:Ke)}return{failures:te,results:me,numFailures:Fe,lastResult:Q}}).catch(function(Q){return Z.forEach(function(te){return te.onerror&&te.onerror(Q)}),Promise.reject(Q)})})}}})}})}};function na(t,a,o){try{if(!a||a.keys.length<t.length)return null;for(var l=[],f=0,d=0;f<a.keys.length&&d<t.length;++f)ct(a.keys[f],t[d])===0&&(l.push(o?Ee(a.values[f]):a.values[f]),++d);return l.length===t.length?l:null}catch{return null}}var ps={stack:"dbcore",level:-1,create:function(t){return{table:function(a){var o=t.table(a);return r(r({},o),{getMany:function(l){if(!l.cache)return o.getMany(l);var f=na(l.keys,l.trans._cache,l.cache==="clone");return f?ke.resolve(f):o.getMany(l).then(function(d){return l.trans._cache={keys:l.keys,values:l.cache==="clone"?Ee(d):d},d})},mutate:function(l){return l.type!=="add"&&(l.trans._cache=null),o.mutate(l)}})}}}};function ra(t,a){return t.trans.mode==="readonly"&&!!t.subscr&&!t.trans.explicit&&t.trans.db._options.cache!=="disabled"&&!a.schema.primaryKey.outbound}function ia(t,a){switch(t){case"query":return a.values&&!a.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var ms={stack:"dbcore",level:0,name:"Observability",create:function(t){var a=t.schema.name,o=new xt(t.MIN_KEY,t.MAX_KEY);return r(r({},t),{transaction:function(l,f,d){if(Be.subscr&&f!=="readonly")throw new ge.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Be.querier));return t.transaction(l,f,d)},table:function(l){var f=t.table(l),d=f.schema,y=d.primaryKey,T=d.indexes,E=y.extractKey,R=y.outbound,I=y.autoIncrement&&T.filter(function(M){return M.compound&&M.keyPath.includes(y.keyPath)}),j=r(r({},f),{mutate:function(M){function B(Re){return Re="idb://".concat(a,"/").concat(l,"/").concat(Re),Q[Re]||(Q[Re]=new xt)}var q,N,G,Z=M.trans,Q=M.mutatedParts||(M.mutatedParts={}),te=B(""),me=B(":dels"),Fe=M.type,je=M.type==="deleteRange"?[M.range]:M.type==="delete"?[M.keys]:M.values.length<50?[mi(y,M).filter(function(Re){return Re}),M.values]:[],Ce=je[0],Ke=je[1],je=M.trans._cache;return g(Ce)?(te.addKeys(Ce),(je=Fe==="delete"||Ce.length===Ke.length?na(Ce,je):null)||me.addKeys(Ce),(je||Ke)&&(q=B,N=je,G=Ke,d.indexes.forEach(function(Re){var Qe=q(Re.name||"");function $e(et){return et!=null?Re.extractKey(et):null}function nt(et){return Re.multiEntry&&g(et)?et.forEach(function(hn){return Qe.addKey(hn)}):Qe.addKey(et)}(N||G).forEach(function(et,Wt){var tt=N&&$e(N[Wt]),Wt=G&&$e(G[Wt]);ct(tt,Wt)!==0&&(tt!=null&&nt(tt),Wt!=null&&nt(Wt))})}))):Ce?(Ke={from:Ce.lower,to:Ce.upper},me.add(Ke),te.add(Ke)):(te.add(o),me.add(o),d.indexes.forEach(function(Re){return B(Re.name).add(o)})),f.mutate(M).then(function(Re){return!Ce||M.type!=="add"&&M.type!=="put"||(te.addKeys(Re.results),I&&I.forEach(function(Qe){var $e=M.values.map(function(et){return Qe.extractKey(et)}),nt=Qe.keyPath.findIndex(function(et){return et===y.keyPath});Re.results.forEach(function(et){return $e[nt]=et}),B(Qe.name).addKeys($e)})),Z.mutatedParts=Sr(Z.mutatedParts||{},Q),Re})}}),T=function(B){var q=B.query,B=q.index,q=q.range;return[B,new xt((B=q.lower)!==null&&B!==void 0?B:t.MIN_KEY,(q=q.upper)!==null&&q!==void 0?q:t.MAX_KEY)]},V={get:function(M){return[y,new xt(M.key)]},getMany:function(M){return[y,new xt().addKeys(M.keys)]},count:T,query:T,openCursor:T};return u(V).forEach(function(M){j[M]=function(B){var q=Be.subscr,N=!!q,G=ra(Be,f)&&ia(M,B)?B.obsSet={}:q;if(N){var Z=function(Ke){return Ke="idb://".concat(a,"/").concat(l,"/").concat(Ke),G[Ke]||(G[Ke]=new xt)},Q=Z(""),te=Z(":dels"),q=V[M](B),N=q[0],q=q[1];if((M==="query"&&N.isPrimaryKey&&!B.values?te:Z(N.name||"")).add(q),!N.isPrimaryKey){if(M!=="count"){var me=M==="query"&&R&&B.values&&f.query(r(r({},B),{values:!1}));return f[M].apply(this,arguments).then(function(Ke){if(M==="query"){if(R&&B.values)return me.then(function($e){return $e=$e.result,Q.addKeys($e),Ke});var je=B.values?Ke.result.map(E):Ke.result;(B.values?Q:te).addKeys(je)}else if(M==="openCursor"){var Re=Ke,Qe=B.values;return Re&&Object.create(Re,{key:{get:function(){return te.addKey(Re.primaryKey),Re.key}},primaryKey:{get:function(){var $e=Re.primaryKey;return te.addKey($e),$e}},value:{get:function(){return Qe&&Q.addKey(Re.primaryKey),Re.value}}})}return Ke})}te.add(o)}}return f[M].apply(this,arguments)}}),j}})}};function aa(t,a,o){if(o.numFailures===0)return a;if(a.type==="deleteRange")return null;var l=a.keys?a.keys.length:"values"in a&&a.values?a.values.length:1;return o.numFailures===l?null:(a=r({},a),g(a.keys)&&(a.keys=a.keys.filter(function(f,d){return!(d in o.failures)})),"values"in a&&g(a.values)&&(a.values=a.values.filter(function(f,d){return!(d in o.failures)})),a)}function gi(t,a){return o=t,((l=a).lower===void 0||(l.lowerOpen?0<ct(o,l.lower):0<=ct(o,l.lower)))&&(t=t,(a=a).upper===void 0||(a.upperOpen?ct(t,a.upper)<0:ct(t,a.upper)<=0));var o,l}function oa(t,a,V,l,f,d){if(!V||V.length===0)return t;var y=a.query.index,E=y.multiEntry,R=a.query.range,I=l.schema.primaryKey.extractKey,j=y.extractKey,T=(y.lowLevelIndex||y).extractKey,V=V.reduce(function(M,B){var q=M,N=B.type==="add"||B.type==="put"?B.values.filter(function(te){return te=j(te),E&&g(te)?te.some(function(me){return gi(me,R)}):gi(te,R)}).map(function(te){return te=Ee(te),d&&Object.freeze(te),te}):[];switch(B.type){case"add":q=M.concat(a.values?N:N.map(function(me){return I(me)}));break;case"put":var G=new xt().addKeys(B.values.map(function(me){return I(me)})),q=M.filter(function(me){return me=a.values?I(me):me,!Dr(new xt(me),G)}).concat(a.values?N:N.map(function(me){return I(me)}));break;case"delete":var Z=new xt().addKeys(B.keys);q=M.filter(function(me){return me=a.values?I(me):me,!Dr(new xt(me),Z)});break;case"deleteRange":var Q=B.range;q=M.filter(function(me){return!gi(I(me),Q)})}return q},t);return V===t?t:(V.sort(function(M,B){return ct(T(M),T(B))||ct(I(M),I(B))}),a.limit&&a.limit<1/0&&(V.length>a.limit?V.length=a.limit:t.length===a.limit&&V.length<a.limit&&(f.dirty=!0)),d?Object.freeze(V):V)}function sa(t,a){return ct(t.lower,a.lower)===0&&ct(t.upper,a.upper)===0&&!!t.lowerOpen==!!a.lowerOpen&&!!t.upperOpen==!!a.upperOpen}function gs(t,a){return function(o,l,f,d){if(o===void 0)return l!==void 0?-1:0;if(l===void 0)return 1;if((l=ct(o,l))===0){if(f&&d)return 0;if(f)return 1;if(d)return-1}return l}(t.lower,a.lower,t.lowerOpen,a.lowerOpen)<=0&&0<=function(o,l,f,d){if(o===void 0)return l!==void 0?1:0;if(l===void 0)return-1;if((l=ct(o,l))===0){if(f&&d)return 0;if(f)return-1;if(d)return 1}return l}(t.upper,a.upper,t.upperOpen,a.upperOpen)}function vs(t,a,o,l){t.subscribers.add(o),l.addEventListener("abort",function(){var f,d;t.subscribers.delete(o),t.subscribers.size===0&&(f=t,d=a,setTimeout(function(){f.subscribers.size===0&&Se(d,f)},3e3))})}var _s={stack:"dbcore",level:0,name:"Cache",create:function(t){var a=t.schema.name;return r(r({},t),{transaction:function(o,l,f){var d,y,E=t.transaction(o,l,f);return l==="readwrite"&&(y=(d=new AbortController).signal,f=function(R){return function(){if(d.abort(),l==="readwrite"){for(var I=new Set,j=0,T=o;j<T.length;j++){var V=T[j],M=Bn["idb://".concat(a,"/").concat(V)];if(M){var B=t.table(V),q=M.optimisticOps.filter(function(Qe){return Qe.trans===E});if(E._explicit&&R&&E.mutatedParts)for(var N=0,G=Object.values(M.queries.query);N<G.length;N++)for(var Z=0,Q=(Fe=G[N]).slice();Z<Q.length;Z++)ui((Ce=Q[Z]).obsSet,E.mutatedParts)&&(Se(Fe,Ce),Ce.subscribers.forEach(function(Qe){return I.add(Qe)}));else if(0<q.length){M.optimisticOps=M.optimisticOps.filter(function(Qe){return Qe.trans!==E});for(var te=0,me=Object.values(M.queries.query);te<me.length;te++)for(var Fe,Ce,Ke,je=0,Re=(Fe=me[te]).slice();je<Re.length;je++)(Ce=Re[je]).res!=null&&E.mutatedParts&&(R&&!Ce.dirty?(Ke=Object.isFrozen(Ce.res),Ke=oa(Ce.res,Ce.req,q,B,Ce,Ke),Ce.dirty?(Se(Fe,Ce),Ce.subscribers.forEach(function(Qe){return I.add(Qe)})):Ke!==Ce.res&&(Ce.res=Ke,Ce.promise=ke.resolve({result:Ke}))):(Ce.dirty&&Se(Fe,Ce),Ce.subscribers.forEach(function(Qe){return I.add(Qe)})))}}}I.forEach(function(Qe){return Qe()})}}},E.addEventListener("abort",f(!1),{signal:y}),E.addEventListener("error",f(!1),{signal:y}),E.addEventListener("complete",f(!0),{signal:y})),E},table:function(o){var l=t.table(o),f=l.schema.primaryKey;return r(r({},l),{mutate:function(d){var y=Be.trans;if(f.outbound||y.db._options.cache==="disabled"||y.explicit)return l.mutate(d);var E=Bn["idb://".concat(a,"/").concat(o)];return E?(y=l.mutate(d),d.type!=="add"&&d.type!=="put"||!(50<=d.values.length||mi(f,d).some(function(R){return R==null}))?(E.optimisticOps.push(d),d.mutatedParts&&Tr(d.mutatedParts),y.then(function(R){0<R.numFailures&&(Se(E.optimisticOps,d),(R=aa(0,d,R))&&E.optimisticOps.push(R),d.mutatedParts&&Tr(d.mutatedParts))}),y.catch(function(){Se(E.optimisticOps,d),d.mutatedParts&&Tr(d.mutatedParts)})):y.then(function(R){var I=aa(0,r(r({},d),{values:d.values.map(function(M,T){var V,M=(V=f.keyPath)!==null&&V!==void 0&&V.includes(".")?Ee(M):r({},M);return ne(M,f.keyPath,R.results[T]),M})}),R);E.optimisticOps.push(I),queueMicrotask(function(){return d.mutatedParts&&Tr(d.mutatedParts)})}),y):l.mutate(d)},query:function(d){if(!ra(Be,l)||!ia("query",d))return l.query(d);var y=((I=Be.trans)===null||I===void 0?void 0:I.db._options.cache)==="immutable",T=Be,E=T.requery,R=T.signal,I=function(B,q,N,G){var Z=Bn["idb://".concat(B,"/").concat(q)];if(!Z)return[];if(!(q=Z.queries[N]))return[null,!1,Z,null];var Q=q[(G.query?G.query.index.name:null)||""];if(!Q)return[null,!1,Z,null];switch(N){case"query":var te=Q.find(function(me){return me.req.limit===G.limit&&me.req.values===G.values&&sa(me.req.query.range,G.query.range)});return te?[te,!0,Z,Q]:[Q.find(function(me){return("limit"in me.req?me.req.limit:1/0)>=G.limit&&(!G.values||me.req.values)&&gs(me.req.query.range,G.query.range)}),!1,Z,Q];case"count":return te=Q.find(function(me){return sa(me.req.query.range,G.query.range)}),[te,!!te,Z,Q]}}(a,o,"query",d),j=I[0],T=I[1],V=I[2],M=I[3];return j&&T?j.obsSet=d.obsSet:(T=l.query(d).then(function(B){var q=B.result;if(j&&(j.res=q),y){for(var N=0,G=q.length;N<G;++N)Object.freeze(q[N]);Object.freeze(q)}else B.result=Ee(q);return B}).catch(function(B){return M&&j&&Se(M,j),Promise.reject(B)}),j={obsSet:d.obsSet,promise:T,subscribers:new Set,type:"query",req:d,dirty:!1},M?M.push(j):(M=[j],(V=V||(Bn["idb://".concat(a,"/").concat(o)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[d.query.index.name||""]=M)),vs(j,M,E,R),j.promise.then(function(B){return{result:oa(B.result,d,V==null?void 0:V.optimisticOps,l,j,y)}})}})}})}};function Or(t,a){return new Proxy(t,{get:function(o,l,f){return l==="db"?a:Reflect.get(o,l,f)}})}var Tn=(At.prototype.version=function(t){if(isNaN(t)||t<.1)throw new ge.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new ge.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var a=this._versions,o=a.filter(function(l){return l._cfg.version===t})[0];return o||(o=new this.Version(t),a.push(o),a.sort(ss),o.stores({}),this._state.autoSchema=!1,o)},At.prototype._whenReady=function(t){var a=this;return this.idbdb&&(this._state.openComplete||Be.letThrough||this._vip)?t():new ke(function(o,l){if(a._state.openComplete)return l(new ge.DatabaseClosed(a._state.dbOpenError));if(!a._state.isBeingOpened){if(!a._state.autoOpen)return void l(new ge.DatabaseClosed);a.open().catch(_e)}a._state.dbReadyPromise.then(o,l)}).then(t)},At.prototype.use=function(t){var a=t.stack,o=t.create,l=t.level,f=t.name;return f&&this.unuse({stack:a,name:f}),t=this._middlewares[a]||(this._middlewares[a]=[]),t.push({stack:a,create:o,level:l??10,name:f}),t.sort(function(d,y){return d.level-y.level}),this},At.prototype.unuse=function(t){var a=t.stack,o=t.name,l=t.create;return a&&this._middlewares[a]&&(this._middlewares[a]=this._middlewares[a].filter(function(f){return l?f.create!==l:!!o&&f.name!==o})),this},At.prototype.open=function(){var t=this;return Mn(st,function(){return fs(t)})},At.prototype._close=function(){var t=this._state,a=zn.indexOf(this);if(0<=a&&zn.splice(a,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}t.isBeingOpened||(t.dbReadyPromise=new ke(function(o){t.dbReadyResolve=o}),t.openCanceller=new ke(function(o,l){t.cancelOpen=l}))},At.prototype.close=function(o){var a=(o===void 0?{disableAutoOpen:!0}:o).disableAutoOpen,o=this._state;a?(o.isBeingOpened&&o.cancelOpen(new ge.DatabaseClosed),this._close(),o.autoOpen=!1,o.dbOpenError=new ge.DatabaseClosed):(this._close(),o.autoOpen=this._options.autoOpen||o.isBeingOpened,o.openComplete=!1,o.dbOpenError=null)},At.prototype.delete=function(t){var a=this;t===void 0&&(t={disableAutoOpen:!0});var o=0<arguments.length&&typeof arguments[0]!="object",l=this._state;return new ke(function(f,d){function y(){a.close(t);var E=a._deps.indexedDB.deleteDatabase(a.name);E.onsuccess=at(function(){var R,I,j;R=a._deps,I=a.name,j=R.indexedDB,R=R.IDBKeyRange,ai(j)||I===hr||ii(j,R).delete(I).catch(_e),f()}),E.onerror=yn(d),E.onblocked=a._fireOnBlocked}if(o)throw new ge.InvalidArgument("Invalid closeOptions argument to db.delete()");l.isBeingOpened?l.dbReadyPromise.then(y):y()})},At.prototype.backendDB=function(){return this.idbdb},At.prototype.isOpen=function(){return this.idbdb!==null},At.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},At.prototype.hasFailed=function(){return this._state.dbOpenError!==null},At.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(At.prototype,"tables",{get:function(){var t=this;return u(this._allTables).map(function(a){return t._allTables[a]})},enumerable:!1,configurable:!0}),At.prototype.transaction=function(){var t=(function(a,o,l){var f=arguments.length;if(f<2)throw new ge.InvalidArgument("Too few arguments");for(var d=new Array(f-1);--f;)d[f-1]=arguments[f];return l=d.pop(),[a,ve(d),l]}).apply(this,arguments);return this._transaction.apply(this,t)},At.prototype._transaction=function(t,a,o){var l=this,f=Be.trans;f&&f.db===this&&t.indexOf("!")===-1||(f=null);var d,y,E=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");try{if(y=a.map(function(I){if(I=I instanceof l.Table?I.name:I,typeof I!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return I}),t=="r"||t===Wr)d=Wr;else{if(t!="rw"&&t!=Gr)throw new ge.InvalidArgument("Invalid transaction mode: "+t);d=Gr}if(f){if(f.mode===Wr&&d===Gr){if(!E)throw new ge.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");f=null}f&&y.forEach(function(I){if(f&&f.storeNames.indexOf(I)===-1){if(!E)throw new ge.SubTransaction("Table "+I+" not included in parent transaction.");f=null}}),E&&f&&!f.active&&(f=null)}}catch(I){return f?f._promise(null,function(j,T){T(I)}):Ot(I)}var R=(function I(j,T,V,M,B){return ke.resolve().then(function(){var q=Be.transless||Be,N=j._createTransaction(T,V,j._dbSchema,M);if(N.explicit=!0,q={trans:N,transless:q},M)N.idbtrans=M.idbtrans;else try{N.create(),N.idbtrans._explicit=!0,j._state.PR1398_maxLoop=3}catch(Q){return Q.name===Ve.InvalidState&&j.isOpen()&&0<--j._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),j.close({disableAutoOpen:!1}),j.open().then(function(){return I(j,T,V,null,B)})):Ot(Q)}var G,Z=$(B);return Z&&bt(),q=ke.follow(function(){var Q;(G=B.call(N,N))&&(Z?(Q=dn.bind(null,null),G.then(Q,Q)):typeof G.next=="function"&&typeof G.throw=="function"&&(G=hi(G)))},q),(G&&typeof G.then=="function"?ke.resolve(G).then(function(Q){return N.active?Q:Ot(new ge.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):q.then(function(){return G})).then(function(Q){return M&&N._resolve(),N._completion.then(function(){return Q})}).catch(function(Q){return N._reject(Q),Ot(Q)})})}).bind(null,this,d,y,f,o);return f?f._promise(d,R,"lock"):Be.trans?Mn(Be.transless,function(){return l._whenReady(R)}):this._whenReady(R)},At.prototype.table=function(t){if(!k(this._allTables,t))throw new ge.InvalidTable("Table ".concat(t," does not exist"));return this._allTables[t]},At);function At(t,a){var o=this;this._middlewares={},this.verno=0;var l=At.dependencies;this._options=a=r({addons:At.addons,autoOpen:!0,indexedDB:l.indexedDB,IDBKeyRange:l.IDBKeyRange,cache:"cloned"},a),this._deps={indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange},l=a.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var f,d,y,E,R,I={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:_e,dbReadyPromise:null,cancelOpen:_e,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:a.autoOpen};I.dbReadyPromise=new ke(function(T){I.dbReadyResolve=T}),I.openCanceller=new ke(function(T,V){I.cancelOpen=V}),this._state=I,this.name=t,this.on=Jn(this,"populate","blocked","versionchange","close",{ready:[it,_e]}),this.on.ready.subscribe=Y(this.on.ready.subscribe,function(T){return function(V,M){At.vip(function(){var B,q=o._state;q.openComplete?(q.dbOpenError||ke.resolve().then(V),M&&T(V)):q.onReadyBeingFired?(q.onReadyBeingFired.push(V),M&&T(V)):(T(V),B=o,M||T(function N(){B.on.ready.unsubscribe(V),B.on.ready.unsubscribe(N)}))})}}),this.Collection=(f=this,Qn(es.prototype,function(G,N){this.db=f;var M=ji,B=null;if(N)try{M=N()}catch(Z){B=Z}var q=G._ctx,N=q.table,G=N.hook.reading.fire;this._ctx={table:N,index:q.index,isPrimKey:!q.index||N.schema.primKey.keyPath&&q.index===N.schema.primKey.name,range:M,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:B,or:q.or,valueMapper:G!==ze?G:null}})),this.Table=(d=this,Qn(zi.prototype,function(T,V,M){this.db=d,this._tx=M,this.name=T,this.schema=V,this.hook=d._allTables[T]?d._allTables[T].hook:Jn(null,{creating:[Te,_e],reading:[Ye,ze],updating:[ue,_e],deleting:[ye,_e]})})),this.Transaction=(y=this,Qn(rs.prototype,function(T,V,M,B,q){var N=this;this.db=y,this.mode=T,this.storeNames=V,this.schema=M,this.chromeTransactionDurability=B,this.idbtrans=null,this.on=Jn(this,"complete","error","abort"),this.parent=q||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ke(function(G,Z){N._resolve=G,N._reject=Z}),this._completion.then(function(){N.active=!1,N.on.complete.fire()},function(G){var Z=N.active;return N.active=!1,N.on.error.fire(G),N.parent?N.parent._reject(G):Z&&N.idbtrans&&N.idbtrans.abort(),Ot(G)})})),this.Version=(E=this,Qn(cs.prototype,function(T){this.db=E,this._cfg={version:T,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(R=this,Qn(Yi.prototype,function(T,V,M){if(this.db=R,this._ctx={table:T,index:V===":id"?null:V,or:M},this._cmp=this._ascending=ct,this._descending=function(B,q){return ct(q,B)},this._max=function(B,q){return 0<ct(B,q)?B:q},this._min=function(B,q){return ct(B,q)<0?B:q},this._IDBKeyRange=R._deps.IDBKeyRange,!this._IDBKeyRange)throw new ge.MissingAPI})),this.on("versionchange",function(T){0<T.newVersion?console.warn("Another connection wants to upgrade database '".concat(o.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(o.name,"'. Closing db now to resume the delete request.")),o.close({disableAutoOpen:!1})}),this.on("blocked",function(T){!T.newVersion||T.newVersion<T.oldVersion?console.warn("Dexie.delete('".concat(o.name,"') was blocked")):console.warn("Upgrade '".concat(o.name,"' blocked by other connection holding version ").concat(T.oldVersion/10))}),this._maxKey=tr(a.IDBKeyRange),this._createTransaction=function(T,V,M,B){return new o.Transaction(T,V,M,o._options.chromeTransactionDurability,B)},this._fireOnBlocked=function(T){o.on("blocked").fire(T),zn.filter(function(V){return V.name===o.name&&V!==o&&!V._state.vcFired}).map(function(V){return V.on("versionchange").fire(T)})},this.use(ps),this.use(_s),this.use(ms),this.use(ds),this.use(hs);var j=new Proxy(this,{get:function(T,V,M){if(V==="_vip")return!0;if(V==="table")return function(q){return Or(o.table(q),j)};var B=Reflect.get(T,V,M);return B instanceof zi?Or(B,j):V==="tables"?B.map(function(q){return Or(q,j)}):V==="_createTransaction"?function(){return Or(B.apply(this,arguments),j)}:B}});this.vip=j,l.forEach(function(T){return T(o)})}var Ar,ln=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",ys=(vi.prototype.subscribe=function(t,a,o){return this._subscribe(t&&typeof t!="function"?t:{next:t,error:a,complete:o})},vi.prototype[ln]=function(){return this},vi);function vi(t){this._subscribe=t}try{Ar={indexedDB:c.indexedDB||c.mozIndexedDB||c.webkitIndexedDB||c.msIndexedDB,IDBKeyRange:c.IDBKeyRange||c.webkitIDBKeyRange}}catch{Ar={indexedDB:null,IDBKeyRange:null}}function la(t){var a,o=!1,l=new ys(function(f){var d=$(t),y,E=!1,R={},I={},j={get closed(){return E},unsubscribe:function(){E||(E=!0,y&&y.abort(),T&&An.storagemutated.unsubscribe(M))}};f.start&&f.start(j);var T=!1,V=function(){return xr(B)},M=function(q){Sr(R,q),ui(I,R)&&V()},B=function(){var q,N,G;!E&&Ar.indexedDB&&(R={},q={},y&&y.abort(),y=new AbortController,G=function(Z){var Q=Oe();try{d&&bt();var te=en(t,Z);return te=d?te.finally(dn):te}finally{Q&&vt()}}(N={subscr:q,signal:y.signal,requery:V,querier:t,trans:null}),Promise.resolve(G).then(function(Z){o=!0,a=Z,E||N.signal.aborted||(R={},function(Q){for(var te in Q)if(k(Q,te))return;return 1}(I=q)||T||(An(er,M),T=!0),xr(function(){return!E&&f.next&&f.next(Z)}))},function(Z){o=!1,["DatabaseClosedError","AbortError"].includes(Z==null?void 0:Z.name)||E||xr(function(){E||f.error&&f.error(Z)})}))};return setTimeout(V,0),j});return l.hasValue=function(){return o},l.getValue=function(){return a},l}var Kn=Tn;function _i(t){var a=Pn;try{Pn=!0,An.storagemutated.fire(t),di(t,!0)}finally{Pn=a}}L(Kn,r(r({},le),{delete:function(t){return new Kn(t,{addons:[]}).delete()},exists:function(t){return new Kn(t,{addons:[]}).open().then(function(a){return a.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(t){try{return a=Kn.dependencies,o=a.indexedDB,a=a.IDBKeyRange,(ai(o)?Promise.resolve(o.databases()).then(function(l){return l.map(function(f){return f.name}).filter(function(f){return f!==hr})}):ii(o,a).toCollection().primaryKeys()).then(t)}catch{return Ot(new ge.MissingAPI)}var a,o},defineClass:function(){return function(t){_(this,t)}},ignoreTransaction:function(t){return Be.trans?Mn(Be.transless,t):t()},vip:oi,async:function(t){return function(){try{var a=hi(t.apply(this,arguments));return a&&typeof a.then=="function"?a:ke.resolve(a)}catch(o){return Ot(o)}}},spawn:function(t,a,o){try{var l=hi(t.apply(o,a||[]));return l&&typeof l.then=="function"?l:ke.resolve(l)}catch(f){return Ot(f)}},currentTransaction:{get:function(){return Be.trans||null}},waitFor:function(t,a){return a=ke.resolve(typeof t=="function"?Kn.ignoreTransaction(t):t).timeout(a||6e4),Be.trans?Be.trans.waitFor(a):a},Promise:ke,debug:{get:function(){return _t},set:function(t){dt(t)}},derive:W,extend:_,props:L,override:Y,Events:Jn,on:An,liveQuery:la,extendObservabilitySet:Sr,getByKeyPath:he,setByKeyPath:ne,delByKeyPath:function(t,a){typeof a=="string"?ne(t,a,void 0):"length"in a&&[].map.call(a,function(o){ne(t,o,void 0)})},shallowClone:se,deepClone:Ee,getObjectDiff:pi,cmp:ct,asap:ae,minKey:-1/0,addons:[],connections:zn,errnames:Ve,dependencies:Ar,cache:Bn,semVer:"4.0.7",version:"4.0.7".split(".").map(function(t){return parseInt(t)}).reduce(function(t,a,o){return t+a/Math.pow(10,2*o)})})),Kn.maxKey=tr(Kn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(An(er,function(t){Pn||(t=new CustomEvent(Qr,{detail:t}),Pn=!0,dispatchEvent(t),Pn=!1)}),addEventListener(Qr,function(t){t=t.detail,Pn||_i(t)}));var Wn,Pn=!1,ua=function(){};return typeof BroadcastChannel<"u"&&((ua=function(){(Wn=new BroadcastChannel(Qr)).onmessage=function(t){return t.data&&_i(t.data)}})(),typeof Wn.unref=="function"&&Wn.unref(),An(er,function(t){Pn||Wn.postMessage(t)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(t){if(!Tn.disableBfCache&&t.persisted){_t&&console.debug("Dexie: handling persisted pagehide"),Wn!=null&&Wn.close();for(var a=0,o=zn;a<o.length;a++)o[a].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(t){!Tn.disableBfCache&&t.persisted&&(_t&&console.debug("Dexie: handling persisted pageshow"),ua(),_i({all:new xt(-1/0,[[]])}))})),ke.rejectionMapper=function(t,a){return!t||t instanceof w||t instanceof TypeError||t instanceof SyntaxError||!t.name||!H[t.name]?t:(a=new H[t.name](a||t.message,t),"stack"in t&&X(a,"stack",{get:function(){return this.inner.stack}}),a)},dt(_t),r(Tn,Object.freeze({__proto__:null,Dexie:Tn,liveQuery:la,Entity:Ui,cmp:ct,PropModSymbol:Sn,PropModification:$n,replacePrefix:function(t,a){return new $n({replacePrefix:[t,a]})},add:function(t){return new $n({add:t})},remove:function(t){return new $n({remove:t})},default:Tn,RangeSet:xt,mergeRanges:ir,rangesOverlap:Dr}),{default:Tn}),Tn})})(xo);var xs=xo.exports;const Pi=Ho(xs),Na=Symbol.for("Dexie"),qr=globalThis[Na]||(globalThis[Na]=Pi);if(Pi.semVer!==qr.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Pi.semVer} and ${qr.semVer}`);const{liveQuery:zr,mergeRanges:vc,rangesOverlap:_c,RangeSet:yc,cmp:bc,Entity:wc,PropModSymbol:kc,PropModification:Ec,replacePrefix:Dc,add:Sc,remove:Tc}=qr;var dr=(i=>(i.Accomodation="Accomodation",i.Food="Food",i.Transport="Transport",i.Other="Other",i))(dr||{});const Kt=new qr("ExpensesDatabase");Kt.version(2).stores({trips:"++id, name, defaultCurrency, startDate, endDate",receipts:"++id, description, total, receiptDate, receiptType, currency, tripId, imageData"});Kt.version(3).stores({trips:"++id, name, defaultCurrency, startDate, startDateString, endDate, endDateString",receipts:"++id, description, total, receiptDate, receiptDateString, receiptType, currency, tripId, imageData"}).upgrade(i=>i.table("trips").toCollection().modify(e=>{e.startDateString=e.startDate.toDateString(),e.endDateString=e.endDate.toDateString()}).then(function(){i.table("receipts").toCollection().modify(e=>{e.receiptDateString=e.receiptDate.toDateString()})}));const Et={GBP:{symbol:"Â£",name:"British Pound Sterling",symbol_native:"Â£",decimal_digits:2,rounding:0,code:"GBP",name_plural:"British pounds sterling"},USD:{symbol:"$",name:"US Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"USD",name_plural:"US dollars"},CAD:{symbol:"CA$",name:"Canadian Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"CAD",name_plural:"Canadian dollars"},EUR:{symbol:"â¬",name:"Euro",symbol_native:"â¬",decimal_digits:2,rounding:0,code:"EUR",name_plural:"euros"},AED:{symbol:"AED",name:"United Arab Emirates Dirham",symbol_native:"Ø¯.Ø¥.â",decimal_digits:2,rounding:0,code:"AED",name_plural:"UAE dirhams"},AFN:{symbol:"Af",name:"Afghan Afghani",symbol_native:"Ø",decimal_digits:0,rounding:0,code:"AFN",name_plural:"Afghan Afghanis"},ALL:{symbol:"ALL",name:"Albanian Lek",symbol_native:"Lek",decimal_digits:0,rounding:0,code:"ALL",name_plural:"Albanian lekÃ«"},AMD:{symbol:"AMD",name:"Armenian Dram",symbol_native:"Õ¤Ö.",decimal_digits:0,rounding:0,code:"AMD",name_plural:"Armenian drams"},ARS:{symbol:"AR$",name:"Argentine Peso",symbol_native:"$",decimal_digits:2,rounding:0,code:"ARS",name_plural:"Argentine pesos"},AUD:{symbol:"AU$",name:"Australian Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"AUD",name_plural:"Australian dollars"},AZN:{symbol:"man.",name:"Azerbaijani Manat",symbol_native:"Ð¼Ð°Ð½.",decimal_digits:2,rounding:0,code:"AZN",name_plural:"Azerbaijani manats"},BAM:{symbol:"KM",name:"Bosnia-Herzegovina Convertible Mark",symbol_native:"KM",decimal_digits:2,rounding:0,code:"BAM",name_plural:"Bosnia-Herzegovina convertible marks"},BDT:{symbol:"Tk",name:"Bangladeshi Taka",symbol_native:"à§³",decimal_digits:2,rounding:0,code:"BDT",name_plural:"Bangladeshi takas"},BGN:{symbol:"BGN",name:"Bulgarian Lev",symbol_native:"Ð»Ð².",decimal_digits:2,rounding:0,code:"BGN",name_plural:"Bulgarian leva"},BHD:{symbol:"BD",name:"Bahraini Dinar",symbol_native:"Ø¯.Ø¨.â",decimal_digits:3,rounding:0,code:"BHD",name_plural:"Bahraini dinars"},BIF:{symbol:"FBu",name:"Burundian Franc",symbol_native:"FBu",decimal_digits:0,rounding:0,code:"BIF",name_plural:"Burundian francs"},BND:{symbol:"BN$",name:"Brunei Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"BND",name_plural:"Brunei dollars"},BOB:{symbol:"Bs",name:"Bolivian Boliviano",symbol_native:"Bs",decimal_digits:2,rounding:0,code:"BOB",name_plural:"Bolivian bolivianos"},BRL:{symbol:"R$",name:"Brazilian Real",symbol_native:"R$",decimal_digits:2,rounding:0,code:"BRL",name_plural:"Brazilian reals"},BWP:{symbol:"BWP",name:"Botswanan Pula",symbol_native:"P",decimal_digits:2,rounding:0,code:"BWP",name_plural:"Botswanan pulas"},BYN:{symbol:"Br",name:"Belarusian Ruble",symbol_native:"ÑÑÐ±.",decimal_digits:2,rounding:0,code:"BYN",name_plural:"Belarusian rubles"},BZD:{symbol:"BZ$",name:"Belize Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"BZD",name_plural:"Belize dollars"},CDF:{symbol:"CDF",name:"Congolese Franc",symbol_native:"FrCD",decimal_digits:2,rounding:0,code:"CDF",name_plural:"Congolese francs"},CHF:{symbol:"CHF",name:"Swiss Franc",symbol_native:"CHF",decimal_digits:2,rounding:.05,code:"CHF",name_plural:"Swiss francs"},CLP:{symbol:"CL$",name:"Chilean Peso",symbol_native:"$",decimal_digits:0,rounding:0,code:"CLP",name_plural:"Chilean pesos"},CNY:{symbol:"CNÂ¥",name:"Chinese Yuan",symbol_native:"CNÂ¥",decimal_digits:2,rounding:0,code:"CNY",name_plural:"Chinese yuan"},COP:{symbol:"CO$",name:"Colombian Peso",symbol_native:"$",decimal_digits:0,rounding:0,code:"COP",name_plural:"Colombian pesos"},CRC:{symbol:"â¡",name:"Costa Rican ColÃ³n",symbol_native:"â¡",decimal_digits:0,rounding:0,code:"CRC",name_plural:"Costa Rican colÃ³ns"},CVE:{symbol:"CV$",name:"Cape Verdean Escudo",symbol_native:"CV$",decimal_digits:2,rounding:0,code:"CVE",name_plural:"Cape Verdean escudos"},CZK:{symbol:"KÄ",name:"Czech Republic Koruna",symbol_native:"KÄ",decimal_digits:2,rounding:0,code:"CZK",name_plural:"Czech Republic korunas"},DJF:{symbol:"Fdj",name:"Djiboutian Franc",symbol_native:"Fdj",decimal_digits:0,rounding:0,code:"DJF",name_plural:"Djiboutian francs"},DKK:{symbol:"Dkr",name:"Danish Krone",symbol_native:"kr",decimal_digits:2,rounding:0,code:"DKK",name_plural:"Danish kroner"},DOP:{symbol:"RD$",name:"Dominican Peso",symbol_native:"RD$",decimal_digits:2,rounding:0,code:"DOP",name_plural:"Dominican pesos"},DZD:{symbol:"DA",name:"Algerian Dinar",symbol_native:"Ø¯.Ø¬.â",decimal_digits:2,rounding:0,code:"DZD",name_plural:"Algerian dinars"},EEK:{symbol:"Ekr",name:"Estonian Kroon",symbol_native:"kr",decimal_digits:2,rounding:0,code:"EEK",name_plural:"Estonian kroons"},EGP:{symbol:"EGP",name:"Egyptian Pound",symbol_native:"Ø¬.Ù.â",decimal_digits:2,rounding:0,code:"EGP",name_plural:"Egyptian pounds"},ERN:{symbol:"Nfk",name:"Eritrean Nakfa",symbol_native:"Nfk",decimal_digits:2,rounding:0,code:"ERN",name_plural:"Eritrean nakfas"},ETB:{symbol:"Br",name:"Ethiopian Birr",symbol_native:"Br",decimal_digits:2,rounding:0,code:"ETB",name_plural:"Ethiopian birrs"},GEL:{symbol:"GEL",name:"Georgian Lari",symbol_native:"GEL",decimal_digits:2,rounding:0,code:"GEL",name_plural:"Georgian laris"},GHS:{symbol:"GHâµ",name:"Ghanaian Cedi",symbol_native:"GHâµ",decimal_digits:2,rounding:0,code:"GHS",name_plural:"Ghanaian cedis"},GNF:{symbol:"FG",name:"Guinean Franc",symbol_native:"FG",decimal_digits:0,rounding:0,code:"GNF",name_plural:"Guinean francs"},GTQ:{symbol:"GTQ",name:"Guatemalan Quetzal",symbol_native:"Q",decimal_digits:2,rounding:0,code:"GTQ",name_plural:"Guatemalan quetzals"},HKD:{symbol:"HK$",name:"Hong Kong Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"HKD",name_plural:"Hong Kong dollars"},HNL:{symbol:"HNL",name:"Honduran Lempira",symbol_native:"L",decimal_digits:2,rounding:0,code:"HNL",name_plural:"Honduran lempiras"},HRK:{symbol:"kn",name:"Croatian Kuna",symbol_native:"kn",decimal_digits:2,rounding:0,code:"HRK",name_plural:"Croatian kunas"},HUF:{symbol:"Ft",name:"Hungarian Forint",symbol_native:"Ft",decimal_digits:0,rounding:0,code:"HUF",name_plural:"Hungarian forints"},IDR:{symbol:"Rp",name:"Indonesian Rupiah",symbol_native:"Rp",decimal_digits:0,rounding:0,code:"IDR",name_plural:"Indonesian rupiahs"},ILS:{symbol:"âª",name:"Israeli New Sheqel",symbol_native:"âª",decimal_digits:2,rounding:0,code:"ILS",name_plural:"Israeli new sheqels"},INR:{symbol:"Rs",name:"Indian Rupee",symbol_native:"à¦à¦à¦¾",decimal_digits:2,rounding:0,code:"INR",name_plural:"Indian rupees"},IQD:{symbol:"IQD",name:"Iraqi Dinar",symbol_native:"Ø¯.Ø¹.â",decimal_digits:0,rounding:0,code:"IQD",name_plural:"Iraqi dinars"},IRR:{symbol:"IRR",name:"Iranian Rial",symbol_native:"ï·¼",decimal_digits:0,rounding:0,code:"IRR",name_plural:"Iranian rials"},ISK:{symbol:"Ikr",name:"Icelandic KrÃ³na",symbol_native:"kr",decimal_digits:0,rounding:0,code:"ISK",name_plural:"Icelandic krÃ³nur"},JMD:{symbol:"J$",name:"Jamaican Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"JMD",name_plural:"Jamaican dollars"},JOD:{symbol:"JD",name:"Jordanian Dinar",symbol_native:"Ø¯.Ø£.â",decimal_digits:3,rounding:0,code:"JOD",name_plural:"Jordanian dinars"},JPY:{symbol:"Â¥",name:"Japanese Yen",symbol_native:"ï¿¥",decimal_digits:0,rounding:0,code:"JPY",name_plural:"Japanese yen"},KES:{symbol:"Ksh",name:"Kenyan Shilling",symbol_native:"Ksh",decimal_digits:2,rounding:0,code:"KES",name_plural:"Kenyan shillings"},KHR:{symbol:"KHR",name:"Cambodian Riel",symbol_native:"á",decimal_digits:2,rounding:0,code:"KHR",name_plural:"Cambodian riels"},KMF:{symbol:"CF",name:"Comorian Franc",symbol_native:"FC",decimal_digits:0,rounding:0,code:"KMF",name_plural:"Comorian francs"},KRW:{symbol:"â©",name:"South Korean Won",symbol_native:"â©",decimal_digits:0,rounding:0,code:"KRW",name_plural:"South Korean won"},KWD:{symbol:"KD",name:"Kuwaiti Dinar",symbol_native:"Ø¯.Ù.â",decimal_digits:3,rounding:0,code:"KWD",name_plural:"Kuwaiti dinars"},KZT:{symbol:"KZT",name:"Kazakhstani Tenge",symbol_native:"ÑÒ£Ð³.",decimal_digits:2,rounding:0,code:"KZT",name_plural:"Kazakhstani tenges"},LBP:{symbol:"L.L.",name:"Lebanese Pound",symbol_native:"Ù.Ù.â",decimal_digits:0,rounding:0,code:"LBP",name_plural:"Lebanese pounds"},LKR:{symbol:"SLRs",name:"Sri Lankan Rupee",symbol_native:"SL Re",decimal_digits:2,rounding:0,code:"LKR",name_plural:"Sri Lankan rupees"},LTL:{symbol:"Lt",name:"Lithuanian Litas",symbol_native:"Lt",decimal_digits:2,rounding:0,code:"LTL",name_plural:"Lithuanian litai"},LVL:{symbol:"Ls",name:"Latvian Lats",symbol_native:"Ls",decimal_digits:2,rounding:0,code:"LVL",name_plural:"Latvian lati"},LYD:{symbol:"LD",name:"Libyan Dinar",symbol_native:"Ø¯.Ù.â",decimal_digits:3,rounding:0,code:"LYD",name_plural:"Libyan dinars"},MAD:{symbol:"MAD",name:"Moroccan Dirham",symbol_native:"Ø¯.Ù.â",decimal_digits:2,rounding:0,code:"MAD",name_plural:"Moroccan dirhams"},MDL:{symbol:"MDL",name:"Moldovan Leu",symbol_native:"MDL",decimal_digits:2,rounding:0,code:"MDL",name_plural:"Moldovan lei"},MGA:{symbol:"MGA",name:"Malagasy Ariary",symbol_native:"MGA",decimal_digits:0,rounding:0,code:"MGA",name_plural:"Malagasy Ariaries"},MKD:{symbol:"MKD",name:"Macedonian Denar",symbol_native:"MKD",decimal_digits:2,rounding:0,code:"MKD",name_plural:"Macedonian denari"},MMK:{symbol:"MMK",name:"Myanma Kyat",symbol_native:"K",decimal_digits:0,rounding:0,code:"MMK",name_plural:"Myanma kyats"},MOP:{symbol:"MOP$",name:"Macanese Pataca",symbol_native:"MOP$",decimal_digits:2,rounding:0,code:"MOP",name_plural:"Macanese patacas"},MUR:{symbol:"MURs",name:"Mauritian Rupee",symbol_native:"MURs",decimal_digits:0,rounding:0,code:"MUR",name_plural:"Mauritian rupees"},MXN:{symbol:"MX$",name:"Mexican Peso",symbol_native:"$",decimal_digits:2,rounding:0,code:"MXN",name_plural:"Mexican pesos"},MYR:{symbol:"RM",name:"Malaysian Ringgit",symbol_native:"RM",decimal_digits:2,rounding:0,code:"MYR",name_plural:"Malaysian ringgits"},MZN:{symbol:"MTn",name:"Mozambican Metical",symbol_native:"MTn",decimal_digits:2,rounding:0,code:"MZN",name_plural:"Mozambican meticals"},NAD:{symbol:"N$",name:"Namibian Dollar",symbol_native:"N$",decimal_digits:2,rounding:0,code:"NAD",name_plural:"Namibian dollars"},NGN:{symbol:"â¦",name:"Nigerian Naira",symbol_native:"â¦",decimal_digits:2,rounding:0,code:"NGN",name_plural:"Nigerian nairas"},NIO:{symbol:"C$",name:"Nicaraguan CÃ³rdoba",symbol_native:"C$",decimal_digits:2,rounding:0,code:"NIO",name_plural:"Nicaraguan cÃ³rdobas"},NOK:{symbol:"Nkr",name:"Norwegian Krone",symbol_native:"kr",decimal_digits:2,rounding:0,code:"NOK",name_plural:"Norwegian kroner"},NPR:{symbol:"NPRs",name:"Nepalese Rupee",symbol_native:"à¤¨à¥à¤°à¥",decimal_digits:2,rounding:0,code:"NPR",name_plural:"Nepalese rupees"},NZD:{symbol:"NZ$",name:"New Zealand Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"NZD",name_plural:"New Zealand dollars"},OMR:{symbol:"OMR",name:"Omani Rial",symbol_native:"Ø±.Ø¹.â",decimal_digits:3,rounding:0,code:"OMR",name_plural:"Omani rials"},PAB:{symbol:"B/.",name:"Panamanian Balboa",symbol_native:"B/.",decimal_digits:2,rounding:0,code:"PAB",name_plural:"Panamanian balboas"},PEN:{symbol:"S/.",name:"Peruvian Nuevo Sol",symbol_native:"S/.",decimal_digits:2,rounding:0,code:"PEN",name_plural:"Peruvian nuevos soles"},PHP:{symbol:"â±",name:"Philippine Peso",symbol_native:"â±",decimal_digits:2,rounding:0,code:"PHP",name_plural:"Philippine pesos"},PKR:{symbol:"PKRs",name:"Pakistani Rupee",symbol_native:"â¨",decimal_digits:0,rounding:0,code:"PKR",name_plural:"Pakistani rupees"},PLN:{symbol:"zÅ",name:"Polish Zloty",symbol_native:"zÅ",decimal_digits:2,rounding:0,code:"PLN",name_plural:"Polish zlotys"},PYG:{symbol:"â²",name:"Paraguayan Guarani",symbol_native:"â²",decimal_digits:0,rounding:0,code:"PYG",name_plural:"Paraguayan guaranis"},QAR:{symbol:"QR",name:"Qatari Rial",symbol_native:"Ø±.Ù.â",decimal_digits:2,rounding:0,code:"QAR",name_plural:"Qatari rials"},RON:{symbol:"RON",name:"Romanian Leu",symbol_native:"RON",decimal_digits:2,rounding:0,code:"RON",name_plural:"Romanian lei"},RSD:{symbol:"din.",name:"Serbian Dinar",symbol_native:"Ð´Ð¸Ð½.",decimal_digits:0,rounding:0,code:"RSD",name_plural:"Serbian dinars"},RUB:{symbol:"RUB",name:"Russian Ruble",symbol_native:"â½.",decimal_digits:2,rounding:0,code:"RUB",name_plural:"Russian rubles"},RWF:{symbol:"RWF",name:"Rwandan Franc",symbol_native:"FR",decimal_digits:0,rounding:0,code:"RWF",name_plural:"Rwandan francs"},SAR:{symbol:"SR",name:"Saudi Riyal",symbol_native:"Ø±.Ø³.â",decimal_digits:2,rounding:0,code:"SAR",name_plural:"Saudi riyals"},SDG:{symbol:"SDG",name:"Sudanese Pound",symbol_native:"SDG",decimal_digits:2,rounding:0,code:"SDG",name_plural:"Sudanese pounds"},SEK:{symbol:"Skr",name:"Swedish Krona",symbol_native:"kr",decimal_digits:2,rounding:0,code:"SEK",name_plural:"Swedish kronor"},SGD:{symbol:"S$",name:"Singapore Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"SGD",name_plural:"Singapore dollars"},SOS:{symbol:"Ssh",name:"Somali Shilling",symbol_native:"Ssh",decimal_digits:0,rounding:0,code:"SOS",name_plural:"Somali shillings"},SYP:{symbol:"SYÂ£",name:"Syrian Pound",symbol_native:"Ù.Ø³.â",decimal_digits:0,rounding:0,code:"SYP",name_plural:"Syrian pounds"},THB:{symbol:"à¸¿",name:"Thai Baht",symbol_native:"à¸¿",decimal_digits:2,rounding:0,code:"THB",name_plural:"Thai baht"},TND:{symbol:"DT",name:"Tunisian Dinar",symbol_native:"Ø¯.Øª.â",decimal_digits:3,rounding:0,code:"TND",name_plural:"Tunisian dinars"},TOP:{symbol:"T$",name:"Tongan PaÊ»anga",symbol_native:"T$",decimal_digits:2,rounding:0,code:"TOP",name_plural:"Tongan paÊ»anga"},TRY:{symbol:"TL",name:"Turkish Lira",symbol_native:"TL",decimal_digits:2,rounding:0,code:"TRY",name_plural:"Turkish Lira"},TTD:{symbol:"TT$",name:"Trinidad and Tobago Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"TTD",name_plural:"Trinidad and Tobago dollars"},TWD:{symbol:"NT$",name:"New Taiwan Dollar",symbol_native:"NT$",decimal_digits:2,rounding:0,code:"TWD",name_plural:"New Taiwan dollars"},TZS:{symbol:"TSh",name:"Tanzanian Shilling",symbol_native:"TSh",decimal_digits:0,rounding:0,code:"TZS",name_plural:"Tanzanian shillings"},UAH:{symbol:"â´",name:"Ukrainian Hryvnia",symbol_native:"â´",decimal_digits:2,rounding:0,code:"UAH",name_plural:"Ukrainian hryvnias"},UGX:{symbol:"USh",name:"Ugandan Shilling",symbol_native:"USh",decimal_digits:0,rounding:0,code:"UGX",name_plural:"Ugandan shillings"},UYU:{symbol:"$U",name:"Uruguayan Peso",symbol_native:"$",decimal_digits:2,rounding:0,code:"UYU",name_plural:"Uruguayan pesos"},UZS:{symbol:"UZS",name:"Uzbekistan Som",symbol_native:"UZS",decimal_digits:0,rounding:0,code:"UZS",name_plural:"Uzbekistan som"},VEF:{symbol:"Bs.F.",name:"Venezuelan BolÃ­var",symbol_native:"Bs.F.",decimal_digits:2,rounding:0,code:"VEF",name_plural:"Venezuelan bolÃ­vars"},VND:{symbol:"â«",name:"Vietnamese Dong",symbol_native:"â«",decimal_digits:0,rounding:0,code:"VND",name_plural:"Vietnamese dong"},XAF:{symbol:"FCFA",name:"CFA Franc BEAC",symbol_native:"FCFA",decimal_digits:0,rounding:0,code:"XAF",name_plural:"CFA francs BEAC"},XOF:{symbol:"CFA",name:"CFA Franc BCEAO",symbol_native:"CFA",decimal_digits:0,rounding:0,code:"XOF",name_plural:"CFA francs BCEAO"},YER:{symbol:"YR",name:"Yemeni Rial",symbol_native:"Ø±.Ù.â",decimal_digits:0,rounding:0,code:"YER",name_plural:"Yemeni rials"},ZAR:{symbol:"R",name:"South African Rand",symbol_native:"R",decimal_digits:2,rounding:0,code:"ZAR",name_plural:"South African rand"},ZMK:{symbol:"ZK",name:"Zambian Kwacha",symbol_native:"ZK",decimal_digits:0,rounding:0,code:"ZMK",name_plural:"Zambian kwachas"},ZWL:{symbol:"ZWL$",name:"Zimbabwean Dollar",symbol_native:"ZWL$",decimal_digits:0,rounding:0,code:"ZWL",name_plural:"Zimbabwean Dollar"}};function Ba(i,e,n){const r=i.slice();return r[9]=e[n],r}function Ka(i){let e,n=i[9]+"",r,s,c=Et[i[9]].symbol+"",u,g;return{c(){e=O("option"),r=Le(n),s=Le(" ("),u=Le(c),g=Le(`)
          `),this.h()},l(_){e=A(_,"OPTION",{});var m=x(e);r=Me(m,n),s=Me(m," ("),u=Me(m,c),g=Me(m,`)
          `),m.forEach(b),this.h()},h(){e.__value=i[9],ot(e,e.__value)},m(_,m){fe(_,e,m),h(e,r),h(e,s),h(e,u),h(e,g)},p:kt,d(_){_&&b(e)}}}function Ws(i){let e,n,r,s="Add New Trip",c,u,g,_="Trip Name",m,v,k,L,U,X="Trip Currency",W,z,S,D,Y,P="Trip Start",ae,he,ne,se,we,ve,Ne="Trip End",be,Ee,De,qe,Ue,oe,Se="Add Trip",C,K,$="Cancel",pe,w,J,Ae=Ge(Object.keys(Et)),de=[];for(let le=0;le<Ae.length;le+=1)de[le]=Ka(Ba(i,Ae,le));function Ve(le){i[7](le)}let Pe={format:"yyyy-MM-dd",closeOnSelection:!0,id:"tripStart"};i[2]!==void 0&&(Pe.value=i[2]),he=new Yn({props:Pe}),tn.push(()=>Ln(he,"value",Ve));function ge(le){i[8](le)}let H={format:"yyyy-MM-dd",closeOnSelection:!0,min:i[2],id:"tripEnd"};return i[3]!==void 0&&(H.value=i[3]),Ee=new Yn({props:H}),tn.push(()=>Ln(Ee,"value",ge)),{c(){e=O("div"),n=O("form"),r=O("h1"),r.textContent=s,c=re(),u=O("div"),g=O("label"),g.textContent=_,m=re(),v=O("input"),k=re(),L=O("div"),U=O("label"),U.textContent=X,W=re(),z=O("select");for(let le=0;le<de.length;le+=1)de[le].c();S=re(),D=O("div"),Y=O("label"),Y.textContent=P,ae=re(),Ut(he.$$.fragment),se=re(),we=O("div"),ve=O("label"),ve.textContent=Ne,be=re(),Ut(Ee.$$.fragment),qe=re(),Ue=O("div"),oe=O("button"),oe.textContent=Se,C=re(),K=O("a"),K.textContent=$,this.h()},l(le){e=A(le,"DIV",{class:!0});var _e=x(e);n=A(_e,"FORM",{});var ze=x(n);r=A(ze,"H1",{"data-svelte-h":!0}),We(r)!=="svelte-1x3twms"&&(r.textContent=s),c=ie(ze),u=A(ze,"DIV",{class:!0});var Ye=x(u);g=A(Ye,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),We(g)!=="svelte-1y8z10u"&&(g.textContent=_),m=ie(Ye),v=A(Ye,"INPUT",{id:!0,class:!0,type:!0}),Ye.forEach(b),k=ie(ze),L=A(ze,"DIV",{class:!0});var F=x(L);U=A(F,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),We(U)!=="svelte-1fzihue"&&(U.textContent=X),W=ie(F),z=A(F,"SELECT",{id:!0,class:!0});var Te=x(z);for(let it=0;it<de.length;it+=1)de[it].l(Te);Te.forEach(b),F.forEach(b),S=ie(ze),D=A(ze,"DIV",{class:!0});var ye=x(D);Y=A(ye,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),We(Y)!=="svelte-4n7gli"&&(Y.textContent=P),ae=ie(ye),Vt(he.$$.fragment,ye),ye.forEach(b),se=ie(ze),we=A(ze,"DIV",{class:!0});var ue=x(we);ve=A(ue,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),We(ve)!=="svelte-1dn7717"&&(ve.textContent=Ne),be=ie(ue),Vt(Ee.$$.fragment,ue),ue.forEach(b),qe=ie(ze),Ue=A(ze,"DIV",{class:!0});var xe=x(Ue);oe=A(xe,"BUTTON",{class:!0,"data-svelte-h":!0}),We(oe)!=="svelte-ik7jo4"&&(oe.textContent=Se),C=ie(xe),K=A(xe,"A",{href:!0,class:!0,"data-svelte-h":!0}),We(K)!=="svelte-wj5j6d"&&(K.textContent=$),xe.forEach(b),ze.forEach(b),_e.forEach(b),this.h()},h(){p(g,"for","tripName"),p(g,"class","form-label"),p(v,"id","tripName"),p(v,"class","form-control"),p(v,"type","text"),p(u,"class","mb-3"),p(U,"for","tripCurrency"),p(U,"class","form-label"),p(z,"id","tripCurrency"),p(z,"class","form-control"),i[1]===void 0&&Un(()=>i[6].call(z)),p(L,"class","mb-3"),p(Y,"for","tripStart"),p(Y,"class","form-label"),p(D,"class","mb-3"),p(ve,"for","tripStart"),p(ve,"class","form-label"),p(we,"class","mb-3"),p(oe,"class","btn btn-primary"),p(K,"href","#/"),p(K,"class","btn btn-outline-primary"),p(Ue,"class","gap-3 d-grid d-md-block"),p(e,"class","w-100")},m(le,_e){fe(le,e,_e),h(e,n),h(n,r),h(n,c),h(n,u),h(u,g),h(u,m),h(u,v),ot(v,i[0]),h(n,k),h(n,L),h(L,U),h(L,W),h(L,z);for(let ze=0;ze<de.length;ze+=1)de[ze]&&de[ze].m(z,null);Jt(z,i[1],!0),h(n,S),h(n,D),h(D,Y),h(D,ae),qt(he,D,null),h(n,se),h(n,we),h(we,ve),h(we,be),qt(Ee,we,null),h(n,qe),h(n,Ue),h(Ue,oe),h(Ue,C),h(Ue,K),pe=!0,w||(J=[Ze(v,"input",i[5]),Ze(z,"change",i[6]),Ze(oe,"click",i[4])],w=!0)},p(le,[_e]){if(_e&1&&v.value!==le[0]&&ot(v,le[0]),_e&0){Ae=Ge(Object.keys(Et));let F;for(F=0;F<Ae.length;F+=1){const Te=Ba(le,Ae,F);de[F]?de[F].p(Te,_e):(de[F]=Ka(Te),de[F].c(),de[F].m(z,null))}for(;F<de.length;F+=1)de[F].d(1);de.length=Ae.length}_e&2&&Jt(z,le[1]);const ze={};!ne&&_e&4&&(ne=!0,ze.value=le[2],In(()=>ne=!1)),he.$set(ze);const Ye={};_e&4&&(Ye.min=le[2]),!De&&_e&8&&(De=!0,Ye.value=le[3],In(()=>De=!1)),Ee.$set(Ye)},i(le){pe||(rt(he.$$.fragment,le),rt(Ee.$$.fragment,le),pe=!0)},o(le){lt(he.$$.fragment,le),lt(Ee.$$.fragment,le),pe=!1},d(le){le&&b(e),Mt(de,le),zt(he),zt(Ee),w=!1,kn(J)}}}function Gs(i,e,n){let r="My Trip",s="GBP",c=new Date,u=new Date;async function g(){try{const L=await Kt.trips.add({name:r,defaultCurrency:s,startDate:c,startDateString:c.toDateString(),endDate:u,endDateString:u.toDateString()});window.location.href="#/trip/"+L}catch{window.location.href="#/"}}function _(){r=this.value,n(0,r)}function m(){s=Gn(this),n(1,s)}function v(L){c=L,n(2,c)}function k(L){u=L,n(3,u)}return[r,s,c,u,g,_,m,v,k]}class Ys extends on{constructor(e){super(),sn(this,e,Gs,Ws,nn,{})}}/*!
  * PhotoSwipe Lightbox 5.4.4 - https://photoswipe.com
  * (c) 2024 Dmytro Semenov
  */function sr(i,e,n){const r=document.createElement(e);return i&&(r.className=i),n&&n.appendChild(r),r}function Zs(i,e,n){let r=`translate3d(${i}px,0px,0)`;return n!==void 0&&(r+=` scale3d(${n},${n},1)`),r}function Ii(i,e,n){i.style.width=typeof e=="number"?`${e}px`:e,i.style.height=typeof n=="number"?`${n}px`:n}const un={IDLE:"idle",LOADING:"loading",LOADED:"loaded",ERROR:"error"};function Js(i){return"button"in i&&i.button===1||i.ctrlKey||i.metaKey||i.altKey||i.shiftKey}function lr(i,e,n=document){let r=[];if(i instanceof Element)r=[i];else if(i instanceof NodeList||Array.isArray(i))r=Array.from(i);else{const s=typeof i=="string"?i:e;s&&(r=Array.from(n.querySelectorAll(s)))}return r}function Qs(i){return typeof i=="function"&&i.prototype&&i.prototype.goTo}function Fa(){return!!(navigator.vendor&&navigator.vendor.match(/apple/i))}class $s{constructor(e,n){this.type=e,this.defaultPrevented=!1,n&&Object.assign(this,n)}preventDefault(){this.defaultPrevented=!0}}class Xs{constructor(){this._listeners={},this._filters={},this.pswp=void 0,this.options=void 0}addFilter(e,n,r=100){var s,c,u;this._filters[e]||(this._filters[e]=[]),(s=this._filters[e])===null||s===void 0||s.push({fn:n,priority:r}),(c=this._filters[e])===null||c===void 0||c.sort((g,_)=>g.priority-_.priority),(u=this.pswp)===null||u===void 0||u.addFilter(e,n,r)}removeFilter(e,n){this._filters[e]&&(this._filters[e]=this._filters[e].filter(r=>r.fn!==n)),this.pswp&&this.pswp.removeFilter(e,n)}applyFilters(e,...n){var r;return(r=this._filters[e])===null||r===void 0||r.forEach(s=>{n[0]=s.fn.apply(this,n)}),n[0]}on(e,n){var r,s;this._listeners[e]||(this._listeners[e]=[]),(r=this._listeners[e])===null||r===void 0||r.push(n),(s=this.pswp)===null||s===void 0||s.on(e,n)}off(e,n){var r;this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter(s=>n!==s)),(r=this.pswp)===null||r===void 0||r.off(e,n)}dispatch(e,n){var r;if(this.pswp)return this.pswp.dispatch(e,n);const s=new $s(e,n);return(r=this._listeners[e])===null||r===void 0||r.forEach(c=>{c.call(this,s)}),s}}class el{constructor(e,n){if(this.element=sr("pswp__img pswp__img--placeholder",e?"img":"div",n),e){const r=this.element;r.decoding="async",r.alt="",r.src=e,r.setAttribute("role","presentation")}this.element.setAttribute("aria-hidden","true")}setDisplayedSize(e,n){this.element&&(this.element.tagName==="IMG"?(Ii(this.element,250,"auto"),this.element.style.transformOrigin="0 0",this.element.style.transform=Zs(0,0,e/250)):Ii(this.element,e,n))}destroy(){var e;(e=this.element)!==null&&e!==void 0&&e.parentNode&&this.element.remove(),this.element=null}}class tl{constructor(e,n,r){this.instance=n,this.data=e,this.index=r,this.element=void 0,this.placeholder=void 0,this.slide=void 0,this.displayedImageWidth=0,this.displayedImageHeight=0,this.width=Number(this.data.w)||Number(this.data.width)||0,this.height=Number(this.data.h)||Number(this.data.height)||0,this.isAttached=!1,this.hasSlide=!1,this.isDecoding=!1,this.state=un.IDLE,this.data.type?this.type=this.data.type:this.data.src?this.type="image":this.type="html",this.instance.dispatch("contentInit",{content:this})}removePlaceholder(){this.placeholder&&!this.keepPlaceholder()&&setTimeout(()=>{this.placeholder&&(this.placeholder.destroy(),this.placeholder=void 0)},1e3)}load(e,n){if(this.slide&&this.usePlaceholder())if(this.placeholder){const r=this.placeholder.element;r&&!r.parentElement&&this.slide.container.prepend(r)}else{const r=this.instance.applyFilters("placeholderSrc",this.data.msrc&&this.slide.isFirstSlide?this.data.msrc:!1,this);this.placeholder=new el(r,this.slide.container)}this.element&&!n||this.instance.dispatch("contentLoad",{content:this,isLazy:e}).defaultPrevented||(this.isImageContent()?(this.element=sr("pswp__img","img"),this.displayedImageWidth&&this.loadImage(e)):(this.element=sr("pswp__content","div"),this.element.innerHTML=this.data.html||""),n&&this.slide&&this.slide.updateContentSize(!0))}loadImage(e){var n,r;if(!this.isImageContent()||!this.element||this.instance.dispatch("contentLoadImage",{content:this,isLazy:e}).defaultPrevented)return;const s=this.element;this.updateSrcsetSizes(),this.data.srcset&&(s.srcset=this.data.srcset),s.src=(n=this.data.src)!==null&&n!==void 0?n:"",s.alt=(r=this.data.alt)!==null&&r!==void 0?r:"",this.state=un.LOADING,s.complete?this.onLoaded():(s.onload=()=>{this.onLoaded()},s.onerror=()=>{this.onError()})}setSlide(e){this.slide=e,this.hasSlide=!0,this.instance=e.pswp}onLoaded(){this.state=un.LOADED,this.slide&&this.element&&(this.instance.dispatch("loadComplete",{slide:this.slide,content:this}),this.slide.isActive&&this.slide.heavyAppended&&!this.element.parentNode&&(this.append(),this.slide.updateContentSize(!0)),(this.state===un.LOADED||this.state===un.ERROR)&&this.removePlaceholder())}onError(){this.state=un.ERROR,this.slide&&(this.displayError(),this.instance.dispatch("loadComplete",{slide:this.slide,isError:!0,content:this}),this.instance.dispatch("loadError",{slide:this.slide,content:this}))}isLoading(){return this.instance.applyFilters("isContentLoading",this.state===un.LOADING,this)}isError(){return this.state===un.ERROR}isImageContent(){return this.type==="image"}setDisplayedSize(e,n){if(this.element&&(this.placeholder&&this.placeholder.setDisplayedSize(e,n),!this.instance.dispatch("contentResize",{content:this,width:e,height:n}).defaultPrevented&&(Ii(this.element,e,n),this.isImageContent()&&!this.isError()))){const r=!this.displayedImageWidth&&e;this.displayedImageWidth=e,this.displayedImageHeight=n,r?this.loadImage(!1):this.updateSrcsetSizes(),this.slide&&this.instance.dispatch("imageSizeChange",{slide:this.slide,width:e,height:n,content:this})}}isZoomable(){return this.instance.applyFilters("isContentZoomable",this.isImageContent()&&this.state!==un.ERROR,this)}updateSrcsetSizes(){if(!this.isImageContent()||!this.element||!this.data.srcset)return;const e=this.element,n=this.instance.applyFilters("srcsetSizesWidth",this.displayedImageWidth,this);(!e.dataset.largestUsedSize||n>parseInt(e.dataset.largestUsedSize,10))&&(e.sizes=n+"px",e.dataset.largestUsedSize=String(n))}usePlaceholder(){return this.instance.applyFilters("useContentPlaceholder",this.isImageContent(),this)}lazyLoad(){this.instance.dispatch("contentLazyLoad",{content:this}).defaultPrevented||this.load(!0)}keepPlaceholder(){return this.instance.applyFilters("isKeepingPlaceholder",this.isLoading(),this)}destroy(){this.hasSlide=!1,this.slide=void 0,!this.instance.dispatch("contentDestroy",{content:this}).defaultPrevented&&(this.remove(),this.placeholder&&(this.placeholder.destroy(),this.placeholder=void 0),this.isImageContent()&&this.element&&(this.element.onload=null,this.element.onerror=null,this.element=void 0))}displayError(){if(this.slide){var e,n;let r=sr("pswp__error-msg","div");r.innerText=(e=(n=this.instance.options)===null||n===void 0?void 0:n.errorMsg)!==null&&e!==void 0?e:"",r=this.instance.applyFilters("contentErrorElement",r,this),this.element=sr("pswp__content pswp__error-msg-container","div"),this.element.appendChild(r),this.slide.container.innerText="",this.slide.container.appendChild(this.element),this.slide.updateContentSize(!0),this.removePlaceholder()}}append(){if(this.isAttached||!this.element)return;if(this.isAttached=!0,this.state===un.ERROR){this.displayError();return}if(this.instance.dispatch("contentAppend",{content:this}).defaultPrevented)return;const e="decode"in this.element;this.isImageContent()?e&&this.slide&&(!this.slide.isActive||Fa())?(this.isDecoding=!0,this.element.decode().catch(()=>{}).finally(()=>{this.isDecoding=!1,this.appendImage()})):this.appendImage():this.slide&&!this.element.parentNode&&this.slide.container.appendChild(this.element)}activate(){this.instance.dispatch("contentActivate",{content:this}).defaultPrevented||!this.slide||(this.isImageContent()&&this.isDecoding&&!Fa()?this.appendImage():this.isError()&&this.load(!1,!0),this.slide.holderElement&&this.slide.holderElement.setAttribute("aria-hidden","false"))}deactivate(){this.instance.dispatch("contentDeactivate",{content:this}),this.slide&&this.slide.holderElement&&this.slide.holderElement.setAttribute("aria-hidden","true")}remove(){this.isAttached=!1,!this.instance.dispatch("contentRemove",{content:this}).defaultPrevented&&(this.element&&this.element.parentNode&&this.element.remove(),this.placeholder&&this.placeholder.element&&this.placeholder.element.remove())}appendImage(){this.isAttached&&(this.instance.dispatch("contentAppendImage",{content:this}).defaultPrevented||(this.slide&&this.element&&!this.element.parentNode&&this.slide.container.appendChild(this.element),(this.state===un.LOADED||this.state===un.ERROR)&&this.removePlaceholder()))}}function nl(i,e){if(i.getViewportSizeFn){const n=i.getViewportSizeFn(i,e);if(n)return n}return{x:document.documentElement.clientWidth,y:window.innerHeight}}function Ir(i,e,n,r,s){let c=0;if(e.paddingFn)c=e.paddingFn(n,r,s)[i];else if(e.padding)c=e.padding[i];else{const u="padding"+i[0].toUpperCase()+i.slice(1);e[u]&&(c=e[u])}return Number(c)||0}function rl(i,e,n,r){return{x:e.x-Ir("left",i,e,n,r)-Ir("right",i,e,n,r),y:e.y-Ir("top",i,e,n,r)-Ir("bottom",i,e,n,r)}}const ja=4e3;class il{constructor(e,n,r,s){this.pswp=s,this.options=e,this.itemData=n,this.index=r,this.panAreaSize=null,this.elementSize=null,this.fit=1,this.fill=1,this.vFill=1,this.initial=1,this.secondary=1,this.max=1,this.min=1}update(e,n,r){const s={x:e,y:n};this.elementSize=s,this.panAreaSize=r;const c=r.x/s.x,u=r.y/s.y;this.fit=Math.min(1,c<u?c:u),this.fill=Math.min(1,c>u?c:u),this.vFill=Math.min(1,u),this.initial=this._getInitial(),this.secondary=this._getSecondary(),this.max=Math.max(this.initial,this.secondary,this._getMax()),this.min=Math.min(this.fit,this.initial,this.secondary),this.pswp&&this.pswp.dispatch("zoomLevelsUpdate",{zoomLevels:this,slideData:this.itemData})}_parseZoomLevelOption(e){const n=e+"ZoomLevel",r=this.options[n];if(r)return typeof r=="function"?r(this):r==="fill"?this.fill:r==="fit"?this.fit:Number(r)}_getSecondary(){let e=this._parseZoomLevelOption("secondary");return e||(e=Math.min(1,this.fit*3),this.elementSize&&e*this.elementSize.x>ja&&(e=ja/this.elementSize.x),e)}_getInitial(){return this._parseZoomLevelOption("initial")||this.fit}_getMax(){return this._parseZoomLevelOption("max")||Math.max(1,this.fit*4)}}function Wo(i,e,n){const r=e.createContentFromData(i,n);let s;const{options:c}=e;if(c){s=new il(c,i,-1);let u;e.pswp?u=e.pswp.viewportSize:u=nl(c,e);const g=rl(c,u,i,n);s.update(r.width,r.height,g)}return r.lazyLoad(),s&&r.setDisplayedSize(Math.ceil(r.width*s.initial),Math.ceil(r.height*s.initial)),r}function al(i,e){const n=e.getItemData(i);if(!e.dispatch("lazyLoadSlide",{index:i,itemData:n}).defaultPrevented)return Wo(n,e,i)}class ol extends Xs{getNumItems(){var e;let n=0;const r=(e=this.options)===null||e===void 0?void 0:e.dataSource;r&&"length"in r?n=r.length:r&&"gallery"in r&&(r.items||(r.items=this._getGalleryDOMElements(r.gallery)),r.items&&(n=r.items.length));const s=this.dispatch("numItems",{dataSource:r,numItems:n});return this.applyFilters("numItems",s.numItems,r)}createContentFromData(e,n){return new tl(e,this,n)}getItemData(e){var n;const r=(n=this.options)===null||n===void 0?void 0:n.dataSource;let s={};Array.isArray(r)?s=r[e]:r&&"gallery"in r&&(r.items||(r.items=this._getGalleryDOMElements(r.gallery)),s=r.items[e]);let c=s;c instanceof Element&&(c=this._domElementToItemData(c));const u=this.dispatch("itemData",{itemData:c||{},index:e});return this.applyFilters("itemData",u.itemData,e)}_getGalleryDOMElements(e){var n,r;return(n=this.options)!==null&&n!==void 0&&n.children||(r=this.options)!==null&&r!==void 0&&r.childSelector?lr(this.options.children,this.options.childSelector,e)||[]:[e]}_domElementToItemData(e){const n={element:e},r=e.tagName==="A"?e:e.querySelector("a");if(r){n.src=r.dataset.pswpSrc||r.href,r.dataset.pswpSrcset&&(n.srcset=r.dataset.pswpSrcset),n.width=r.dataset.pswpWidth?parseInt(r.dataset.pswpWidth,10):0,n.height=r.dataset.pswpHeight?parseInt(r.dataset.pswpHeight,10):0,n.w=n.width,n.h=n.height,r.dataset.pswpType&&(n.type=r.dataset.pswpType);const c=e.querySelector("img");if(c){var s;n.msrc=c.currentSrc||c.src,n.alt=(s=c.getAttribute("alt"))!==null&&s!==void 0?s:""}(r.dataset.pswpCropped||r.dataset.cropped)&&(n.thumbCropped=!0)}return this.applyFilters("domItemData",n,e,r)}lazyLoadData(e,n){return Wo(e,this,n)}}class sl extends ol{constructor(e){super(),this.options=e||{},this._uid=0,this.shouldOpen=!1,this._preloadedContent=void 0,this.onThumbnailsClick=this.onThumbnailsClick.bind(this)}init(){lr(this.options.gallery,this.options.gallerySelector).forEach(e=>{e.addEventListener("click",this.onThumbnailsClick,!1)})}onThumbnailsClick(e){if(Js(e)||window.pswp)return;let n={x:e.clientX,y:e.clientY};!n.x&&!n.y&&(n=null);let r=this.getClickedIndex(e);r=this.applyFilters("clickedIndex",r,e,this);const s={gallery:e.currentTarget};r>=0&&(e.preventDefault(),this.loadAndOpen(r,s,n))}getClickedIndex(e){if(this.options.getClickedIndexFn)return this.options.getClickedIndexFn.call(this,e);const n=e.target,s=lr(this.options.children,this.options.childSelector,e.currentTarget).findIndex(c=>c===n||c.contains(n));return s!==-1?s:this.options.children||this.options.childSelector?-1:0}loadAndOpen(e,n,r){if(window.pswp||!this.options)return!1;if(!n&&this.options.gallery&&this.options.children){const s=lr(this.options.gallery);s[0]&&(n={gallery:s[0]})}return this.options.index=e,this.options.initialPointerPos=r,this.shouldOpen=!0,this.preload(e,n),!0}preload(e,n){const{options:r}=this;n&&(r.dataSource=n);const s=[],c=typeof r.pswpModule;if(Qs(r.pswpModule))s.push(Promise.resolve(r.pswpModule));else{if(c==="string")throw new Error("pswpModule as string is no longer supported");if(c==="function")s.push(r.pswpModule());else throw new Error("pswpModule is not valid")}typeof r.openPromise=="function"&&s.push(r.openPromise()),r.preloadFirstSlide!==!1&&e>=0&&(this._preloadedContent=al(e,this));const u=++this._uid;Promise.all(s).then(g=>{if(this.shouldOpen){const _=g[0];this._openPhotoswipe(_,u)}})}_openPhotoswipe(e,n){if(n!==this._uid&&this.shouldOpen||(this.shouldOpen=!1,window.pswp))return;const r=typeof e=="object"?new e.default(this.options):new e(this.options);this.pswp=r,window.pswp=r,Object.keys(this._listeners).forEach(s=>{var c;(c=this._listeners[s])===null||c===void 0||c.forEach(u=>{r.on(s,u)})}),Object.keys(this._filters).forEach(s=>{var c;(c=this._filters[s])===null||c===void 0||c.forEach(u=>{r.addFilter(s,u.fn,u.priority)})}),this._preloadedContent&&(r.contentLoader.addToCache(this._preloadedContent),this._preloadedContent=void 0),r.on("destroy",()=>{this.pswp=void 0,delete window.pswp}),r.init()}destroy(){var e;(e=this.pswp)===null||e===void 0||e.destroy(),this.shouldOpen=!1,this._listeners={},lr(this.options.gallery,this.options.gallerySelector).forEach(n=>{n.removeEventListener("click",this.onThumbnailsClick,!1)})}}function Ua(i,e,n){const r=i.slice();return r[9]=e[n],r}function Va(i,e,n){const r=i.slice();return r[12]=e[n],r}function Di(i){const e=i.slice(),n=Array.from(new Set(e[2].map(r=>r.currency)));return e[8]=n,e}function qa(i){let e,n,r=i[0].name+"",s,c,u,g,_,m,v,k,L,U,X='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash3" viewBox="0 0 16 16"><path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5M11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47M8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5"></path></svg>',W,z,S=i[0].startDate.toDateString()+"",D,Y,P=i[0].endDate.toDateString()+"",ae,he,ne,se,we="Default currency: ",ve,Ne=i[0].defaultCurrency+"",be,Ee,De=Et[i[0].defaultCurrency].symbol+"",qe,Ue,oe,Se,C,K,$,pe,w,J,Ae,de,Ve,Pe,ge,H="Receipts:",le,_e,ze,Ye,F=i[2]&&za(Di(i));return{c(){e=O("h1"),n=O("span"),s=Le(r),c=re(),u=O("span"),g=O("a"),_=Yt("svg"),m=Yt("path"),v=Yt("path"),L=re(),U=O("button"),U.innerHTML=X,W=re(),z=O("h4"),D=Le(S),Y=Le(" - "),ae=Le(P),he=re(),ne=O("p"),se=O("em"),se.textContent=we,ve=O("strong"),be=Le(Ne),Ee=Le(" ("),qe=Le(De),Ue=Le(")"),oe=re(),Se=O("a"),C=Le("+ Add Receipt"),$=re(),pe=O("a"),w=Yt("svg"),J=Yt("path"),Ae=Yt("path"),de=Le(`
        Export/Print`),Pe=re(),ge=O("h5"),ge.textContent=H,le=re(),F&&F.c(),_e=Ft(),this.h()},l(Te){e=A(Te,"H1",{class:!0});var ye=x(e);n=A(ye,"SPAN",{});var ue=x(n);s=Me(ue,r),ue.forEach(b),c=ie(ye),u=A(ye,"SPAN",{});var xe=x(u);g=A(xe,"A",{href:!0,class:!0,title:!0});var it=x(g);_=Zt(it,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,class:!0,viewBox:!0});var _t=x(_);m=Zt(_t,"path",{d:!0}),x(m).forEach(b),v=Zt(_t,"path",{"fill-rule":!0,d:!0}),x(v).forEach(b),_t.forEach(b),it.forEach(b),L=ie(xe),U=A(xe,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),We(U)!=="svelte-3nbotr"&&(U.innerHTML=X),xe.forEach(b),ye.forEach(b),W=ie(Te),z=A(Te,"H4",{});var dt=x(z);D=Me(dt,S),Y=Me(dt," - "),ae=Me(dt,P),dt.forEach(b),he=ie(Te),ne=A(Te,"P",{});var ht=x(ne);se=A(ht,"EM",{"data-svelte-h":!0}),We(se)!=="svelte-sg39u8"&&(se.textContent=we),ve=A(ht,"STRONG",{});var Dt=x(ve);be=Me(Dt,Ne),Ee=Me(Dt," ("),qe=Me(Dt,De),Ue=Me(Dt,")"),Dt.forEach(b),ht.forEach(b),oe=ie(Te),Se=A(Te,"A",{class:!0,href:!0});var Pt=x(Se);C=Me(Pt,"+ Add Receipt"),Pt.forEach(b),$=ie(Te),pe=A(Te,"A",{href:!0,target:!0,class:!0});var pt=x(pe);w=Zt(pt,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,class:!0,viewBox:!0});var Ct=x(w);J=Zt(Ct,"path",{d:!0}),x(J).forEach(b),Ae=Zt(Ct,"path",{d:!0}),x(Ae).forEach(b),Ct.forEach(b),de=Me(pt,`
        Export/Print`),pt.forEach(b),Pe=ie(Te),ge=A(Te,"H5",{class:!0,"data-svelte-h":!0}),We(ge)!=="svelte-7onek5"&&(ge.textContent=H),le=ie(Te),F&&F.l(Te),_e=Ft(),this.h()},h(){p(m,"d","M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"),p(v,"fill-rule","evenodd"),p(v,"d","M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"),p(_,"xmlns","http://www.w3.org/2000/svg"),p(_,"width","16"),p(_,"height","16"),p(_,"fill","currentColor"),p(_,"class","bi bi-pencil-square"),p(_,"viewBox","0 0 16 16"),p(g,"href",k="#/update/"+i[0].id),p(g,"class","btn btn-outline-secondary"),p(g,"title","Update Trip"),p(U,"class","btn btn-outline-secondary hover-red"),p(U,"title","Delete Trip"),p(e,"class","d-flex justify-content-between"),p(Se,"class","btn btn-primary"),p(Se,"href",K="#/addreceipt/"+i[0].id),p(J,"d","M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"),p(Ae,"d","M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z"),p(w,"xmlns","http://www.w3.org/2000/svg"),p(w,"width","16"),p(w,"height","16"),p(w,"fill","currentColor"),p(w,"class","bi bi-download"),p(w,"viewBox","0 0 16 16"),p(pe,"href",Ve="#/print/"+i[0].id),p(pe,"target","_blank"),p(pe,"class","btn btn-outline-primary"),p(ge,"class","mt-3")},m(Te,ye){fe(Te,e,ye),h(e,n),h(n,s),h(e,c),h(e,u),h(u,g),h(g,_),h(_,m),h(_,v),h(u,L),h(u,U),fe(Te,W,ye),fe(Te,z,ye),h(z,D),h(z,Y),h(z,ae),fe(Te,he,ye),fe(Te,ne,ye),h(ne,se),h(ne,ve),h(ve,be),h(ve,Ee),h(ve,qe),h(ve,Ue),fe(Te,oe,ye),fe(Te,Se,ye),h(Se,C),fe(Te,$,ye),fe(Te,pe,ye),h(pe,w),h(w,J),h(w,Ae),h(pe,de),fe(Te,Pe,ye),fe(Te,ge,ye),fe(Te,le,ye),F&&F.m(Te,ye),fe(Te,_e,ye),ze||(Ye=Ze(U,"click",function(){qo(i[3](i[0]))&&i[3](i[0]).apply(this,arguments)}),ze=!0)},p(Te,ye){i=Te,ye&1&&r!==(r=i[0].name+"")&&Xe(s,r),ye&1&&k!==(k="#/update/"+i[0].id)&&p(g,"href",k),ye&1&&S!==(S=i[0].startDate.toDateString()+"")&&Xe(D,S),ye&1&&P!==(P=i[0].endDate.toDateString()+"")&&Xe(ae,P),ye&1&&Ne!==(Ne=i[0].defaultCurrency+"")&&Xe(be,Ne),ye&1&&De!==(De=Et[i[0].defaultCurrency].symbol+"")&&Xe(qe,De),ye&1&&K!==(K="#/addreceipt/"+i[0].id)&&p(Se,"href",K),ye&1&&Ve!==(Ve="#/print/"+i[0].id)&&p(pe,"href",Ve),i[2]?F?F.p(Di(i),ye):(F=za(Di(i)),F.c(),F.m(_e.parentNode,_e)):F&&(F.d(1),F=null)},d(Te){Te&&(b(e),b(W),b(z),b(he),b(ne),b(oe),b(Se),b($),b(pe),b(Pe),b(ge),b(le),b(_e)),F&&F.d(Te),ze=!1,Ye()}}}function za(i){let e,n,r,s="<tr><th>Description</th> <th>Date</th> <th>Type</th> <th>Total</th> <th></th></tr>",c,u,g=[],_=new Map,m,v,k,L,U,X,W,z,S="<strong>Total</strong>",D,Y,P,ae,he,ne,se=Ge(i[2]);const we=be=>be[12].id;for(let be=0;be<se.length;be+=1){let Ee=Va(i,se,be),De=we(Ee);_.set(De,g[be]=Ha(De,Ee))}let ve=Ge(i[8]),Ne=[];for(let be=0;be<ve.length;be+=1)Ne[be]=xa(Ua(i,ve,be));return{c(){e=O("div"),n=O("table"),r=O("thead"),r.innerHTML=s,c=re(),u=O("tbody");for(let be=0;be<g.length;be+=1)g[be].c();m=re(),v=O("tfoot"),k=O("tr"),L=O("td"),U=re(),X=O("td"),W=re(),z=O("td"),z.innerHTML=S,D=re(),Y=O("td");for(let be=0;be<Ne.length;be+=1)Ne[be].c();P=re(),ae=O("td"),this.h()},l(be){e=A(be,"DIV",{class:!0});var Ee=x(e);n=A(Ee,"TABLE",{class:!0});var De=x(n);r=A(De,"THEAD",{"data-svelte-h":!0}),We(r)!=="svelte-1vpbmbw"&&(r.innerHTML=s),c=ie(De),u=A(De,"TBODY",{});var qe=x(u);for(let C=0;C<g.length;C+=1)g[C].l(qe);qe.forEach(b),m=ie(De),v=A(De,"TFOOT",{class:!0});var Ue=x(v);k=A(Ue,"TR",{});var oe=x(k);L=A(oe,"TD",{}),x(L).forEach(b),U=ie(oe),X=A(oe,"TD",{}),x(X).forEach(b),W=ie(oe),z=A(oe,"TD",{class:!0,"data-svelte-h":!0}),We(z)!=="svelte-14afisz"&&(z.innerHTML=S),D=ie(oe),Y=A(oe,"TD",{});var Se=x(Y);for(let C=0;C<Ne.length;C+=1)Ne[C].l(Se);Se.forEach(b),P=ie(oe),ae=A(oe,"TD",{}),x(ae).forEach(b),oe.forEach(b),Ue.forEach(b),De.forEach(b),Ee.forEach(b),this.h()},h(){p(z,"class","text-end"),p(v,"class","table-group-divider"),p(n,"class","table table-striped table-hover"),p(e,"class","table-responsive")},m(be,Ee){fe(be,e,Ee),h(e,n),h(n,r),h(n,c),h(n,u);for(let De=0;De<g.length;De+=1)g[De]&&g[De].m(u,null);h(n,m),h(n,v),h(v,k),h(k,L),h(k,U),h(k,X),h(k,W),h(k,z),h(k,D),h(k,Y);for(let De=0;De<Ne.length;De+=1)Ne[De]&&Ne[De].m(Y,null);h(k,P),h(k,ae),he||(ne=ws(i[5].call(null,u)),he=!0)},p(be,Ee){if(Ee&20&&(se=Ge(be[2]),g=jr(g,Ee,we,1,be,se,_,u,Fr,Ha,null,Va)),Ee&4){ve=Ge(be[8]);let De;for(De=0;De<ve.length;De+=1){const qe=Ua(be,ve,De);Ne[De]?Ne[De].p(qe,Ee):(Ne[De]=xa(qe),Ne[De].c(),Ne[De].m(Y,null))}for(;De<Ne.length;De+=1)Ne[De].d(1);Ne.length=ve.length}},d(be){be&&b(e);for(let Ee=0;Ee<g.length;Ee+=1)g[Ee].d();Mt(Ne,be),he=!1,ne()}}}function Ha(i,e){let n,r,s,c,u,g,_,m,v,k,L,U,X,W=e[12].description+"",z,S,D,Y=e[12].receiptDateString+"",P,ae,he,ne=e[12].receiptType+"",se,we,ve,Ne=Et[e[12].currency].symbol+"",be,Ee,De=e[12].total.toFixed(2)+"",qe,Ue,oe,Se,C,K,$,pe,w,J,Ae='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash3" viewBox="0 0 16 16"><path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5M11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47M8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5"></path></svg>',de,Ve,Pe;return{key:i,first:null,c(){n=O("tr"),r=O("td"),s=O("div"),c=O("span"),u=O("a"),g=Yt("svg"),_=Yt("path"),m=Yt("path"),U=re(),X=O("span"),z=Le(W),S=re(),D=O("td"),P=Le(Y),ae=re(),he=O("td"),se=Le(ne),we=re(),ve=O("td"),be=Le(Ne),Ee=re(),qe=Le(De),Ue=re(),oe=O("td"),Se=O("a"),C=Yt("svg"),K=Yt("path"),$=Yt("path"),w=re(),J=O("button"),J.innerHTML=Ae,de=re(),this.h()},l(ge){n=A(ge,"TR",{});var H=x(n);r=A(H,"TD",{});var le=x(r);s=A(le,"DIV",{class:!0});var _e=x(s);c=A(_e,"SPAN",{});var ze=x(c);u=A(ze,"A",{class:!0,href:!0,"data-pswp-width":!0,"data-pswp-height":!0,target:!0,rel:!0,title:!0,style:!0});var Ye=x(u);g=Zt(Ye,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,class:!0,viewBox:!0});var F=x(g);_=Zt(F,"path",{d:!0}),x(_).forEach(b),m=Zt(F,"path",{d:!0}),x(m).forEach(b),F.forEach(b),Ye.forEach(b),ze.forEach(b),U=ie(_e),X=A(_e,"SPAN",{});var Te=x(X);z=Me(Te,W),Te.forEach(b),_e.forEach(b),le.forEach(b),S=ie(H),D=A(H,"TD",{});var ye=x(D);P=Me(ye,Y),ye.forEach(b),ae=ie(H),he=A(H,"TD",{});var ue=x(he);se=Me(ue,ne),ue.forEach(b),we=ie(H),ve=A(H,"TD",{class:!0});var xe=x(ve);be=Me(xe,Ne),Ee=ie(xe),qe=Me(xe,De),xe.forEach(b),Ue=ie(H),oe=A(H,"TD",{});var it=x(oe);Se=A(it,"A",{class:!0,href:!0,title:!0});var _t=x(Se);C=Zt(_t,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,class:!0,viewBox:!0});var dt=x(C);K=Zt(dt,"path",{d:!0}),x(K).forEach(b),$=Zt(dt,"path",{"fill-rule":!0,d:!0}),x($).forEach(b),dt.forEach(b),_t.forEach(b),w=ie(it),J=A(it,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),We(J)!=="svelte-rhumqt"&&(J.innerHTML=Ae),it.forEach(b),de=ie(H),H.forEach(b),this.h()},h(){p(_,"d","M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0"),p(m,"d","M2.002 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2zm12 1a1 1 0 0 1 1 1v6.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12V3a1 1 0 0 1 1-1z"),p(g,"xmlns","http://www.w3.org/2000/svg"),p(g,"width","16"),p(g,"height","16"),p(g,"fill","currentColor"),p(g,"class","bi bi-image"),p(g,"viewBox","0 0 16 16"),p(u,"class","btn btn-outline-primary btn-sm rImages"),p(u,"href",v=URL.createObjectURL(e[12].imageData)),p(u,"data-pswp-width",k=e[12].imageWidth),p(u,"data-pswp-height",L=e[12].imageHeight),p(u,"target","_blank"),p(u,"rel","noreferrer"),p(u,"title","View Image"),Oi(u,"border","none"),p(s,"class","receiptDesc"),p(ve,"class","text-nowrap"),p(K,"d","M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"),p($,"fill-rule","evenodd"),p($,"d","M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"),p(C,"xmlns","http://www.w3.org/2000/svg"),p(C,"width","16"),p(C,"height","16"),p(C,"fill","currentColor"),p(C,"class","bi bi-pencil-square"),p(C,"viewBox","0 0 16 16"),p(Se,"class","btn btn-outline-dark btn-sm"),p(Se,"href",pe="#/editreceipt/"+e[12].id),p(Se,"title","Edit Receipt"),p(J,"class","btn btn-outline-dark btn-sm hover-red"),p(J,"title","Delete Receipt"),this.first=n},m(ge,H){fe(ge,n,H),h(n,r),h(r,s),h(s,c),h(c,u),h(u,g),h(g,_),h(g,m),h(s,U),h(s,X),h(X,z),h(n,S),h(n,D),h(D,P),h(n,ae),h(n,he),h(he,se),h(n,we),h(n,ve),h(ve,be),h(ve,Ee),h(ve,qe),h(n,Ue),h(n,oe),h(oe,Se),h(Se,C),h(C,K),h(C,$),h(oe,w),h(oe,J),h(n,de),Ve||(Pe=Ze(J,"click",function(){qo(e[4](e[12]))&&e[4](e[12]).apply(this,arguments)}),Ve=!0)},p(ge,H){e=ge,H&4&&v!==(v=URL.createObjectURL(e[12].imageData))&&p(u,"href",v),H&4&&k!==(k=e[12].imageWidth)&&p(u,"data-pswp-width",k),H&4&&L!==(L=e[12].imageHeight)&&p(u,"data-pswp-height",L),H&4&&W!==(W=e[12].description+"")&&Xe(z,W),H&4&&Y!==(Y=e[12].receiptDateString+"")&&Xe(P,Y),H&4&&ne!==(ne=e[12].receiptType+"")&&Xe(se,ne),H&4&&Ne!==(Ne=Et[e[12].currency].symbol+"")&&Xe(be,Ne),H&4&&De!==(De=e[12].total.toFixed(2)+"")&&Xe(qe,De),H&4&&pe!==(pe="#/editreceipt/"+e[12].id)&&p(Se,"href",pe)},d(ge){ge&&b(n),Ve=!1,Pe()}}}function xa(i){let e=Et[i[9]].symbol+"",n,r,s=i[2].filter(_).reduce(Wa,0).toFixed(2)+"",c,u,g;function _(...m){return i[7](i[9],...m)}return{c(){n=Le(e),r=re(),c=Le(s),u=re(),g=O("br")},l(m){n=Me(m,e),r=ie(m),c=Me(m,s),u=ie(m),g=A(m,"BR",{})},m(m,v){fe(m,n,v),fe(m,r,v),fe(m,c,v),fe(m,u,v),fe(m,g,v)},p(m,v){i=m,v&4&&e!==(e=Et[i[9]].symbol+"")&&Xe(n,e),v&4&&s!==(s=i[2].filter(_).reduce(Wa,0).toFixed(2)+"")&&Xe(c,s)},d(m){m&&(b(n),b(r),b(c),b(u),b(g))}}}function ll(i){let e,n=i[0]&&qa(i);return{c(){e=O("div"),n&&n.c(),this.h()},l(r){e=A(r,"DIV",{class:!0});var s=x(e);n&&n.l(s),s.forEach(b),this.h()},h(){p(e,"class","w-100")},m(r,s){fe(r,e,s),n&&n.m(e,null)},p(r,[s]){r[0]?n?n.p(r,s):(n=qa(r),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},i:kt,o:kt,d(r){r&&b(e),n&&n.d()}}}const Wa=(i,e)=>i+e.total;function ul(i,e,n){let r,s=kt,c=()=>(s(),s=ur(_,U=>n(2,r=U)),_);i.$$.on_destroy.push(()=>s());let{tripId:u}=e,g,_;u>-1&&Kt.trips.get(u).then(U=>{n(0,g=U),c(n(1,_=zr(async()=>await Kt.receipts.where({tripId:u}).reverse().sortBy("receiptDate"))))});async function m(U){if(confirm(`Are you sure you want to delete trip "${U.name}"? It will also delete all receipts for this trip`)){let W=await Kt.trips.where("id").equals(U.id).delete();console.log(`Deleted ${W} trip(s)`),W=await Kt.receipts.where("tripId").equals(U.id).delete(),console.log(`Deleted ${W} receipts(s)`),window.location.href="#/"}}async function v(U){if(confirm(`Are you sure you want to delete receipt for "${U.description}"?`)){let W=await Kt.receipts.where("id").equals(U.id).delete();console.log(`Deleted ${W} receipts(s)`)}}function k(U){new sl({gallery:".rImages",pswpModule:()=>Ds(()=>import("../chunks/photoswipe.esm.GXRgw7eJ.js"),[],import.meta.url)}).init()}const L=(U,X)=>X.currency==U;return i.$$set=U=>{"tripId"in U&&n(6,u=U.tripId)},[g,_,r,m,v,k,u,L]}class cl extends on{constructor(e){super(),sn(this,e,ul,ll,nn,{tripId:6})}}function Ga(i,e,n){const r=i.slice();return r[8]=e[n],r}function Ya(i,e,n){const r=i.slice();return r[12]=e[n],r}function Si(i){const e=i.slice(),n=Array.from(new Set(e[2].filter(function(...s){return i[5](e[8],...s)}).map(r=>r.currency)));return e[11]=n,e}function Za(i){let e=[],n=new Map,r,s=Ge(i[1]);const c=u=>u[8].id;for(let u=0;u<s.length;u+=1){let g=Ga(i,s,u),_=c(g);n.set(_,e[u]=$a(_,g))}return{c(){for(let u=0;u<e.length;u+=1)e[u].c();r=Ft()},l(u){for(let g=0;g<e.length;g+=1)e[g].l(u);r=Ft()},m(u,g){for(let _=0;_<e.length;_+=1)e[_]&&e[_].m(u,g);fe(u,r,g)},p(u,g){g&7&&(s=Ge(u[1]),e=jr(e,g,c,1,u,s,n,r.parentNode,Fr,$a,r,Ga))},d(u){u&&b(r);for(let g=0;g<e.length;g+=1)e[g].d(u)}}}function Ja(i){let e,n=Ge(i[11]),r=[];for(let s=0;s<n.length;s+=1)r[s]=Qa(Ya(i,n,s));return{c(){e=O("small");for(let s=0;s<r.length;s+=1)r[s].c()},l(s){e=A(s,"SMALL",{});var c=x(e);for(let u=0;u<r.length;u+=1)r[u].l(c);c.forEach(b)},m(s,c){fe(s,e,c);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null)},p(s,c){if(c&6){n=Ge(s[11]);let u;for(u=0;u<n.length;u+=1){const g=Ya(s,n,u);r[u]?r[u].p(g,c):(r[u]=Qa(g),r[u].c(),r[u].m(e,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=n.length}},d(s){s&&b(e),Mt(r,s)}}}function Qa(i){let e=Et[i[12]].symbol+"",n,r,s=i[2].filter(_).filter(m).reduce(Xa,0).toFixed(2)+"",c,u,g;function _(...v){return i[6](i[8],...v)}function m(...v){return i[7](i[12],...v)}return{c(){n=Le(e),r=re(),c=Le(s),u=re(),g=O("br")},l(v){n=Me(v,e),r=ie(v),c=Me(v,s),u=ie(v),g=A(v,"BR",{})},m(v,k){fe(v,n,k),fe(v,r,k),fe(v,c,k),fe(v,u,k),fe(v,g,k)},p(v,k){i=v,k&6&&e!==(e=Et[i[12]].symbol+"")&&Xe(n,e),k&6&&s!==(s=i[2].filter(_).filter(m).reduce(Xa,0).toFixed(2)+"")&&Xe(c,s)},d(v){v&&(b(n),b(r),b(c),b(u),b(g))}}}function $a(i,e){let n,r,s,c=e[8].name+"",u,g,_,m,v=e[8].startDateString+"",k,L,U=e[8].endDateString+"",X,W,z,S,D=e[2]&&Ja(Si(e));return{key:i,first:null,c(){n=O("a"),r=O("div"),s=O("strong"),u=Le(c),g=re(),D&&D.c(),_=re(),m=O("div"),k=Le(v),L=Le(" - "),X=Le(U),W=re(),this.h()},l(Y){n=A(Y,"A",{href:!0,class:!0,"aria-current":!0,"data-trip-id":!0});var P=x(n);r=A(P,"DIV",{class:!0});var ae=x(r);s=A(ae,"STRONG",{class:!0});var he=x(s);u=Me(he,c),he.forEach(b),g=ie(ae),D&&D.l(ae),ae.forEach(b),_=ie(P),m=A(P,"DIV",{class:!0});var ne=x(m);k=Me(ne,v),L=Me(ne," - "),X=Me(ne,U),ne.forEach(b),W=ie(P),P.forEach(b),this.h()},h(){p(s,"class","mb-1"),p(r,"class","d-flex w-100 align-items-center justify-content-between"),p(m,"class","col-10 mb-1 small"),p(n,"href",z="#/trip/"+e[8].id),p(n,"class","list-group-item list-group-item-action py-3 lh-sm me-1"),p(n,"aria-current","false"),p(n,"data-trip-id",S=e[8].id),Tt(n,"active",e[0]==e[8].id),this.first=n},m(Y,P){fe(Y,n,P),h(n,r),h(r,s),h(s,u),h(r,g),D&&D.m(r,null),h(n,_),h(n,m),h(m,k),h(m,L),h(m,X),h(n,W)},p(Y,P){e=Y,P&2&&c!==(c=e[8].name+"")&&Xe(u,c),e[2]?D?D.p(Si(e),P):(D=Ja(Si(e)),D.c(),D.m(r,null)):D&&(D.d(1),D=null),P&2&&v!==(v=e[8].startDateString+"")&&Xe(k,v),P&2&&U!==(U=e[8].endDateString+"")&&Xe(X,U),P&2&&z!==(z="#/trip/"+e[8].id)&&p(n,"href",z),P&2&&S!==(S=e[8].id)&&p(n,"data-trip-id",S),P&3&&Tt(n,"active",e[0]==e[8].id)},d(Y){Y&&b(n),D&&D.d()}}}function fl(i){let e,n=i[1]&&Za(i);return{c(){n&&n.c(),e=Ft()},l(r){n&&n.l(r),e=Ft()},m(r,s){n&&n.m(r,s),fe(r,e,s)},p(r,[s]){r[1]?n?n.p(r,s):(n=Za(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:kt,o:kt,d(r){r&&b(e),n&&n.d(r)}}}const Xa=(i,e)=>i+e.total;function dl(i,e,n){let r,s,{tripId:c}=e,u=zr(()=>Kt.trips.toCollection().reverse().sortBy("endDate"));cr(i,u,k=>n(1,r=k));let g=zr(()=>Kt.receipts.toArray());cr(i,g,k=>n(2,s=k));const _=(k,L)=>L.tripId==k.id,m=(k,L)=>L.tripId==k.id,v=(k,L)=>L.currency==k;return i.$$set=k=>{"tripId"in k&&n(0,c=k.tripId)},[c,r,s,u,g,_,m,v]}class hl extends on{constructor(e){super(),sn(this,e,dl,fl,nn,{tripId:0})}}function eo(i,e,n){const r=i.slice();return r[9]=e[n],r}function to(i){let e,n,r="Update Trip",s,c,u,g="Trip Name",_,m,v,k,L,U="Trip Currency",X,W,z,S,D,Y="Trip Start",P,ae,he,ne,se,we,ve="Trip End",Ne,be,Ee,De,qe,Ue,oe="Update Trip",Se,C,K,$,pe,w,J,Ae=Ge(Object.keys(Et)),de=[];for(let le=0;le<Ae.length;le+=1)de[le]=no(eo(i,Ae,le));function Ve(le){i[7](le)}let Pe={format:"yyyy-MM-dd",closeOnSelection:!0,id:"tripStart"};i[1]!==void 0&&(Pe.value=i[1]),ae=new Yn({props:Pe}),tn.push(()=>Ln(ae,"value",Ve));function ge(le){i[8](le)}let H={format:"yyyy-MM-dd",closeOnSelection:!0,min:i[1],id:"tripEnd"};return i[2]!==void 0&&(H.value=i[2]),be=new Yn({props:H}),tn.push(()=>Ln(be,"value",ge)),{c(){e=O("form"),n=O("h1"),n.textContent=r,s=re(),c=O("div"),u=O("label"),u.textContent=g,_=re(),m=O("input"),v=re(),k=O("div"),L=O("label"),L.textContent=U,X=re(),W=O("select");for(let le=0;le<de.length;le+=1)de[le].c();z=re(),S=O("div"),D=O("label"),D.textContent=Y,P=re(),Ut(ae.$$.fragment),ne=re(),se=O("div"),we=O("label"),we.textContent=ve,Ne=re(),Ut(be.$$.fragment),De=re(),qe=O("div"),Ue=O("button"),Ue.textContent=oe,Se=re(),C=O("a"),K=Le("Cancel"),this.h()},l(le){e=A(le,"FORM",{});var _e=x(e);n=A(_e,"H1",{"data-svelte-h":!0}),We(n)!=="svelte-9352dq"&&(n.textContent=r),s=ie(_e),c=A(_e,"DIV",{class:!0});var ze=x(c);u=A(ze,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),We(u)!=="svelte-1y8z10u"&&(u.textContent=g),_=ie(ze),m=A(ze,"INPUT",{id:!0,class:!0,type:!0}),ze.forEach(b),v=ie(_e),k=A(_e,"DIV",{class:!0});var Ye=x(k);L=A(Ye,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),We(L)!=="svelte-1fzihue"&&(L.textContent=U),X=ie(Ye),W=A(Ye,"SELECT",{id:!0,class:!0});var F=x(W);for(let it=0;it<de.length;it+=1)de[it].l(F);F.forEach(b),Ye.forEach(b),z=ie(_e),S=A(_e,"DIV",{class:!0});var Te=x(S);D=A(Te,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),We(D)!=="svelte-4n7gli"&&(D.textContent=Y),P=ie(Te),Vt(ae.$$.fragment,Te),Te.forEach(b),ne=ie(_e),se=A(_e,"DIV",{class:!0});var ye=x(se);we=A(ye,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),We(we)!=="svelte-1dn7717"&&(we.textContent=ve),Ne=ie(ye),Vt(be.$$.fragment,ye),ye.forEach(b),De=ie(_e),qe=A(_e,"DIV",{class:!0});var ue=x(qe);Ue=A(ue,"BUTTON",{class:!0,"data-svelte-h":!0}),We(Ue)!=="svelte-bsugmm"&&(Ue.textContent=oe),Se=ie(ue),C=A(ue,"A",{href:!0,class:!0});var xe=x(C);K=Me(xe,"Cancel"),xe.forEach(b),ue.forEach(b),_e.forEach(b),this.h()},h(){p(u,"for","tripName"),p(u,"class","form-label"),p(m,"id","tripName"),p(m,"class","form-control"),p(m,"type","text"),p(c,"class","mb-3"),p(L,"for","tripCurrency"),p(L,"class","form-label"),p(W,"id","tripCurrency"),p(W,"class","form-control"),i[0].defaultCurrency===void 0&&Un(()=>i[6].call(W)),p(k,"class","mb-3"),p(D,"for","tripStart"),p(D,"class","form-label"),p(S,"class","mb-3"),p(we,"for","tripStart"),p(we,"class","form-label"),p(se,"class","mb-3"),p(Ue,"class","btn btn-primary"),p(C,"href",$="#/trip/"+i[0].id),p(C,"class","btn btn-outline-primary"),p(qe,"class","gap-3 d-grid d-md-block")},m(le,_e){fe(le,e,_e),h(e,n),h(e,s),h(e,c),h(c,u),h(c,_),h(c,m),ot(m,i[0].name),h(e,v),h(e,k),h(k,L),h(k,X),h(k,W);for(let ze=0;ze<de.length;ze+=1)de[ze]&&de[ze].m(W,null);Jt(W,i[0].defaultCurrency,!0),h(e,z),h(e,S),h(S,D),h(S,P),qt(ae,S,null),h(e,ne),h(e,se),h(se,we),h(se,Ne),qt(be,se,null),h(e,De),h(e,qe),h(qe,Ue),h(qe,Se),h(qe,C),h(C,K),pe=!0,w||(J=[Ze(m,"input",i[5]),Ze(W,"change",i[6]),Ze(Ue,"click",i[3])],w=!0)},p(le,_e){if(_e&1&&m.value!==le[0].name&&ot(m,le[0].name),_e&0){Ae=Ge(Object.keys(Et));let F;for(F=0;F<Ae.length;F+=1){const Te=eo(le,Ae,F);de[F]?de[F].p(Te,_e):(de[F]=no(Te),de[F].c(),de[F].m(W,null))}for(;F<de.length;F+=1)de[F].d(1);de.length=Ae.length}_e&1&&Jt(W,le[0].defaultCurrency);const ze={};!he&&_e&2&&(he=!0,ze.value=le[1],In(()=>he=!1)),ae.$set(ze);const Ye={};_e&2&&(Ye.min=le[1]),!Ee&&_e&4&&(Ee=!0,Ye.value=le[2],In(()=>Ee=!1)),be.$set(Ye),(!pe||_e&1&&$!==($="#/trip/"+le[0].id))&&p(C,"href",$)},i(le){pe||(rt(ae.$$.fragment,le),rt(be.$$.fragment,le),pe=!0)},o(le){lt(ae.$$.fragment,le),lt(be.$$.fragment,le),pe=!1},d(le){le&&b(e),Mt(de,le),zt(ae),zt(be),w=!1,kn(J)}}}function no(i){let e,n=i[9]+"",r,s,c=Et[i[9]].symbol+"",u,g;return{c(){e=O("option"),r=Le(n),s=Le(" ("),u=Le(c),g=Le(`)
          `),this.h()},l(_){e=A(_,"OPTION",{});var m=x(e);r=Me(m,n),s=Me(m," ("),u=Me(m,c),g=Me(m,`)
          `),m.forEach(b),this.h()},h(){e.__value=i[9],ot(e,e.__value)},m(_,m){fe(_,e,m),h(e,r),h(e,s),h(e,u),h(e,g)},p:kt,d(_){_&&b(e)}}}function pl(i){let e,n,r=i[0]&&to(i);return{c(){e=O("div"),r&&r.c(),this.h()},l(s){e=A(s,"DIV",{class:!0});var c=x(e);r&&r.l(c),c.forEach(b),this.h()},h(){p(e,"class","w-100")},m(s,c){fe(s,e,c),r&&r.m(e,null),n=!0},p(s,[c]){s[0]?r?(r.p(s,c),c&1&&rt(r,1)):(r=to(s),r.c(),rt(r,1),r.m(e,null)):r&&(Vn(),lt(r,1,1,()=>{r=null}),qn())},i(s){n||(rt(r),n=!0)},o(s){lt(r),n=!1},d(s){s&&b(e),r&&r.d()}}}function ml(i,e,n){let{tripId:r}=e,s,c,u;r>-1&&Kt.trips.get(r).then(L=>{n(0,s=L),n(1,c=new Date(s.startDateString)),n(2,u=new Date(s.endDateString))});async function g(){try{const L=await Kt.trips.update(s.id,{name:s.name,defaultCurrency:s.defaultCurrency,startDate:c,endDate:u,startDateString:c.toDateString(),endDateString:u.toDateString()});window.location.href="#/trip/"+s.id}catch{window.location.href="#/"}}function _(){s.name=this.value,n(0,s)}function m(){s.defaultCurrency=Gn(this),n(0,s)}function v(L){c=L,n(1,c)}function k(L){u=L,n(2,u)}return i.$$set=L=>{"tripId"in L&&n(4,r=L.tripId)},[s,c,u,g,r,_,m,v,k]}class gl extends on{constructor(e){super(),sn(this,e,ml,pl,nn,{tripId:4})}}/*!
 * currency.js - v2.0.4
 * http://scurker.github.io/currency.js
 *
 * Copyright (c) 2021 Jason Wilson
 * Released under MIT license
 */var vl={symbol:"$",separator:",",decimal:".",errorOnInvalid:!1,precision:2,pattern:"!#",negativePattern:"-!#",format:wl,fromCents:!1},Go=function(e){return Math.round(e)},Mi=function(e){return Math.pow(10,e)},_l=function(e,n){return Go(e/n)*n},yl=/(\d)(?=(\d{3})+\b)/g,bl=/(\d)(?=(\d\d)+\d\b)/g;function mn(i,e){var n=this;if(!(n instanceof mn))return new mn(i,e);var r=Object.assign({},vl,e),s=Mi(r.precision),c=Nr(i,r);n.intValue=c,n.value=c/s,r.increment=r.increment||1/s,r.useVedic?r.groups=bl:r.groups=yl,this.s=r,this.p=s}function Nr(i,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=0,s=e.decimal,c=e.errorOnInvalid,u=e.precision,g=e.fromCents,_=Mi(u),m=typeof i=="number",v=i instanceof mn;if(v&&g)return i.intValue;if(m||v)r=v?i.value:i;else if(typeof i=="string"){var k=new RegExp("[^-\\d"+s+"]","g"),L=new RegExp("\\"+s,"g");r=i.replace(/\((.*)\)/,"-$1").replace(k,"").replace(L,"."),r=r||0}else{if(c)throw Error("Invalid Input");r=0}return g||(r*=_,r=r.toFixed(4)),n?Go(r):r}function wl(i,e){var n=e.pattern,r=e.negativePattern,s=e.symbol,c=e.separator,u=e.decimal,g=e.groups,_=(""+i).replace(/^-/,"").split("."),m=_[0],v=_[1];return(i.value>=0?n:r).replace("!",s).replace("#",m.replace(g,"$1"+c)+(v?u+v:""))}mn.prototype={add:function(e){var n=this.intValue,r=this.s,s=this.p;return mn((n+=Nr(e,r))/(r.fromCents?1:s),r)},subtract:function(e){var n=this.intValue,r=this.s,s=this.p;return mn((n-=Nr(e,r))/(r.fromCents?1:s),r)},multiply:function(e){var n=this.intValue,r=this.s;return mn((n*=e)/(r.fromCents?1:Mi(r.precision)),r)},divide:function(e){var n=this.intValue,r=this.s;return mn(n/=Nr(e,r,!1),r)},distribute:function(e){for(var n=this.intValue,r=this.p,s=this.s,c=[],u=Math[n>=0?"floor":"ceil"](n/e),g=Math.abs(n-u*e),_=s.fromCents?1:r;e!==0;e--){var m=mn(u/_,s);g-- >0&&(m=m[n>=0?"add":"subtract"](1/_)),c.push(m)}return c},dollars:function(){return~~this.value},cents:function(){var e=this.intValue,n=this.p;return~~(e%n)},format:function(e){var n=this.s;return typeof e=="function"?e(this,n):n.format(this,Object.assign({},n,e))},toString:function(){var e=this.intValue,n=this.p,r=this.s;return _l(e/n,r.increment).toFixed(r.precision)},toJSON:function(){return this.value}};var kl={exports:{}};(function(i){var e=function(n){var r=Object.prototype,s=r.hasOwnProperty,c=Object.defineProperty||function(C,K,$){C[K]=$.value},u,g=typeof Symbol=="function"?Symbol:{},_=g.iterator||"@@iterator",m=g.asyncIterator||"@@asyncIterator",v=g.toStringTag||"@@toStringTag";function k(C,K,$){return Object.defineProperty(C,K,{value:$,enumerable:!0,configurable:!0,writable:!0}),C[K]}try{k({},"")}catch{k=function(K,$,pe){return K[$]=pe}}function L(C,K,$,pe){var w=K&&K.prototype instanceof Y?K:Y,J=Object.create(w.prototype),Ae=new Ue(pe||[]);return c(J,"_invoke",{value:be(C,$,Ae)}),J}n.wrap=L;function U(C,K,$){try{return{type:"normal",arg:C.call(K,$)}}catch(pe){return{type:"throw",arg:pe}}}var X="suspendedStart",W="suspendedYield",z="executing",S="completed",D={};function Y(){}function P(){}function ae(){}var he={};k(he,_,function(){return this});var ne=Object.getPrototypeOf,se=ne&&ne(ne(oe([])));se&&se!==r&&s.call(se,_)&&(he=se);var we=ae.prototype=Y.prototype=Object.create(he);P.prototype=ae,c(we,"constructor",{value:ae,configurable:!0}),c(ae,"constructor",{value:P,configurable:!0}),P.displayName=k(ae,v,"GeneratorFunction");function ve(C){["next","throw","return"].forEach(function(K){k(C,K,function($){return this._invoke(K,$)})})}n.isGeneratorFunction=function(C){var K=typeof C=="function"&&C.constructor;return K?K===P||(K.displayName||K.name)==="GeneratorFunction":!1},n.mark=function(C){return Object.setPrototypeOf?Object.setPrototypeOf(C,ae):(C.__proto__=ae,k(C,v,"GeneratorFunction")),C.prototype=Object.create(we),C},n.awrap=function(C){return{__await:C}};function Ne(C,K){function $(J,Ae,de,Ve){var Pe=U(C[J],C,Ae);if(Pe.type==="throw")Ve(Pe.arg);else{var ge=Pe.arg,H=ge.value;return H&&typeof H=="object"&&s.call(H,"__await")?K.resolve(H.__await).then(function(le){$("next",le,de,Ve)},function(le){$("throw",le,de,Ve)}):K.resolve(H).then(function(le){ge.value=le,de(ge)},function(le){return $("throw",le,de,Ve)})}}var pe;function w(J,Ae){function de(){return new K(function(Ve,Pe){$(J,Ae,Ve,Pe)})}return pe=pe?pe.then(de,de):de()}c(this,"_invoke",{value:w})}ve(Ne.prototype),k(Ne.prototype,m,function(){return this}),n.AsyncIterator=Ne,n.async=function(C,K,$,pe,w){w===void 0&&(w=Promise);var J=new Ne(L(C,K,$,pe),w);return n.isGeneratorFunction(K)?J:J.next().then(function(Ae){return Ae.done?Ae.value:J.next()})};function be(C,K,$){var pe=X;return function(J,Ae){if(pe===z)throw new Error("Generator is already running");if(pe===S){if(J==="throw")throw Ae;return Se()}for($.method=J,$.arg=Ae;;){var de=$.delegate;if(de){var Ve=Ee(de,$);if(Ve){if(Ve===D)continue;return Ve}}if($.method==="next")$.sent=$._sent=$.arg;else if($.method==="throw"){if(pe===X)throw pe=S,$.arg;$.dispatchException($.arg)}else $.method==="return"&&$.abrupt("return",$.arg);pe=z;var Pe=U(C,K,$);if(Pe.type==="normal"){if(pe=$.done?S:W,Pe.arg===D)continue;return{value:Pe.arg,done:$.done}}else Pe.type==="throw"&&(pe=S,$.method="throw",$.arg=Pe.arg)}}}function Ee(C,K){var $=K.method,pe=C.iterator[$];if(pe===u)return K.delegate=null,$==="throw"&&C.iterator.return&&(K.method="return",K.arg=u,Ee(C,K),K.method==="throw")||$!=="return"&&(K.method="throw",K.arg=new TypeError("The iterator does not provide a '"+$+"' method")),D;var w=U(pe,C.iterator,K.arg);if(w.type==="throw")return K.method="throw",K.arg=w.arg,K.delegate=null,D;var J=w.arg;if(!J)return K.method="throw",K.arg=new TypeError("iterator result is not an object"),K.delegate=null,D;if(J.done)K[C.resultName]=J.value,K.next=C.nextLoc,K.method!=="return"&&(K.method="next",K.arg=u);else return J;return K.delegate=null,D}ve(we),k(we,v,"Generator"),k(we,_,function(){return this}),k(we,"toString",function(){return"[object Generator]"});function De(C){var K={tryLoc:C[0]};1 in C&&(K.catchLoc=C[1]),2 in C&&(K.finallyLoc=C[2],K.afterLoc=C[3]),this.tryEntries.push(K)}function qe(C){var K=C.completion||{};K.type="normal",delete K.arg,C.completion=K}function Ue(C){this.tryEntries=[{tryLoc:"root"}],C.forEach(De,this),this.reset(!0)}n.keys=function(C){var K=Object(C),$=[];for(var pe in K)$.push(pe);return $.reverse(),function w(){for(;$.length;){var J=$.pop();if(J in K)return w.value=J,w.done=!1,w}return w.done=!0,w}};function oe(C){if(C){var K=C[_];if(K)return K.call(C);if(typeof C.next=="function")return C;if(!isNaN(C.length)){var $=-1,pe=function w(){for(;++$<C.length;)if(s.call(C,$))return w.value=C[$],w.done=!1,w;return w.value=u,w.done=!0,w};return pe.next=pe}}return{next:Se}}n.values=oe;function Se(){return{value:u,done:!0}}return Ue.prototype={constructor:Ue,reset:function(C){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(qe),!C)for(var K in this)K.charAt(0)==="t"&&s.call(this,K)&&!isNaN(+K.slice(1))&&(this[K]=u)},stop:function(){this.done=!0;var C=this.tryEntries[0],K=C.completion;if(K.type==="throw")throw K.arg;return this.rval},dispatchException:function(C){if(this.done)throw C;var K=this;function $(Ve,Pe){return J.type="throw",J.arg=C,K.next=Ve,Pe&&(K.method="next",K.arg=u),!!Pe}for(var pe=this.tryEntries.length-1;pe>=0;--pe){var w=this.tryEntries[pe],J=w.completion;if(w.tryLoc==="root")return $("end");if(w.tryLoc<=this.prev){var Ae=s.call(w,"catchLoc"),de=s.call(w,"finallyLoc");if(Ae&&de){if(this.prev<w.catchLoc)return $(w.catchLoc,!0);if(this.prev<w.finallyLoc)return $(w.finallyLoc)}else if(Ae){if(this.prev<w.catchLoc)return $(w.catchLoc,!0)}else if(de){if(this.prev<w.finallyLoc)return $(w.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(C,K){for(var $=this.tryEntries.length-1;$>=0;--$){var pe=this.tryEntries[$];if(pe.tryLoc<=this.prev&&s.call(pe,"finallyLoc")&&this.prev<pe.finallyLoc){var w=pe;break}}w&&(C==="break"||C==="continue")&&w.tryLoc<=K&&K<=w.finallyLoc&&(w=null);var J=w?w.completion:{};return J.type=C,J.arg=K,w?(this.method="next",this.next=w.finallyLoc,D):this.complete(J)},complete:function(C,K){if(C.type==="throw")throw C.arg;return C.type==="break"||C.type==="continue"?this.next=C.arg:C.type==="return"?(this.rval=this.arg=C.arg,this.method="return",this.next="end"):C.type==="normal"&&K&&(this.next=K),D},finish:function(C){for(var K=this.tryEntries.length-1;K>=0;--K){var $=this.tryEntries[K];if($.finallyLoc===C)return this.complete($.completion,$.afterLoc),qe($),D}},catch:function(C){for(var K=this.tryEntries.length-1;K>=0;--K){var $=this.tryEntries[K];if($.tryLoc===C){var pe=$.completion;if(pe.type==="throw"){var w=pe.arg;qe($)}return w}}throw new Error("illegal catch attempt")},delegateYield:function(C,K,$){return this.delegate={iterator:oe(C),resultName:K,nextLoc:$},this.method==="next"&&(this.arg=u),D}},n}(i.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(kl);var Ri=(i,e)=>`${i}-${e}-${Math.random().toString(16).slice(3,8)}`;const El=Ri;let ro=0;var Yo=({id:i,action:e,payload:n={}})=>{let r=i;return typeof r>"u"&&(r=El("Job",ro),ro+=1),{id:r,action:e,payload:n}},Zn={};let Ni=!1;Zn.logging=Ni;Zn.setLogging=i=>{Ni=i};Zn.log=(...i)=>Ni?console.log.apply(void 0,i):null;const Dl=Yo,{log:Lr}=Zn,Sl=Ri;let io=0;var Tl=()=>{const i=Sl("Scheduler",io),e={},n={};let r=[];io+=1;const s=()=>r.length,c=()=>Object.keys(e).length,u=()=>{if(r.length!==0){const k=Object.keys(e);for(let L=0;L<k.length;L+=1)if(typeof n[k[L]]>"u"){r[0](e[k[L]]);break}}},g=(k,L)=>new Promise((U,X)=>{const W=Dl({action:k,payload:L});r.push(async z=>{r.shift(),n[z.id]=W;try{U(await z[k].apply(void 0,[...L,W.id]))}catch(S){X(S)}finally{delete n[z.id],u()}}),Lr(`[${i}]: Add ${W.id} to JobQueue`),Lr(`[${i}]: JobQueue length=${r.length}`),u()});return{addWorker:k=>(e[k.id]=k,Lr(`[${i}]: Add ${k.id}`),Lr(`[${i}]: Number of workers=${c()}`),u(),k.id),addJob:async(k,...L)=>{if(c()===0)throw Error(`[${i}]: You need to have at least one worker before adding jobs`);return g(k,L)},terminate:async()=>{Object.keys(e).forEach(async k=>{await e[k].terminate()}),r=[]},getQueueLen:s,getNumWorkers:c}};function Cl(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}function Ol(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var Al=Ol;const Pl=Al;var Il=i=>{const e={};return typeof WorkerGlobalScope<"u"?e.type="webworker":Pl()?e.type="electron":typeof document=="object"?e.type="browser":typeof process=="object"&&typeof Cl=="function"&&(e.type="node"),typeof i>"u"?e:e[i]};const Ll=Il("type")==="browser",Ml=Ll?i=>new URL(i,window.location.href).href:i=>i;var Rl=i=>{const e={...i};return["corePath","workerPath","langPath"].forEach(n=>{i[n]&&(e[n]=Ml(e[n]))}),e},Nl=i=>{const e=[],n=[],r=[],s=[],c=[];return i.blocks&&i.blocks.forEach(u=>{u.paragraphs.forEach(g=>{g.lines.forEach(_=>{_.words.forEach(m=>{m.symbols.forEach(v=>{c.push({...v,page:i,block:u,paragraph:g,line:_,word:m})}),s.push({...m,page:i,block:u,paragraph:g,line:_})}),r.push({..._,page:i,block:u,paragraph:g})}),n.push({...g,page:i,block:u})}),e.push({...u,page:i})}),{...i,blocks:e,paragraphs:n,lines:r,words:s,symbols:c}},Zo={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3};const Bl="tesseract.js",Kl="5.1.0",Fl="Pure Javascript Multilingual OCR",jl="src/index.js",Ul="src/index.d.ts",Vl="dist/tesseract.min.js",ql="dist/tesseract.min.js",zl={start:"node scripts/server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js && rollup -c scripts/rollup.esm.mjs","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json",prepublishOnly:"npm run build",wait:"rimraf dist && wait-on http://localhost:3000/dist/tesseract.min.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:* test:node:all","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser-tpl":"mocha-headless-chrome -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:detect":"npm run test:browser-tpl -- -f ./tests/detect.test.html","test:browser:recognize":"npm run test:browser-tpl -- -f ./tests/recognize.test.html","test:browser:scheduler":"npm run test:browser-tpl -- -f ./tests/scheduler.test.html","test:browser:FS":"npm run test:browser-tpl -- -f ./tests/FS.test.html",lint:"eslint src","lint:fix":"eslint --fix src",postinstall:"opencollective-postinstall || true"},Hl={"./src/worker/node/index.js":"./src/worker/browser/index.js"},xl="",Wl=["jeromewu"],Gl="Apache-2.0",Yl={"@babel/core":"^7.21.4","@babel/eslint-parser":"^7.21.3","@babel/preset-env":"^7.21.4","@rollup/plugin-commonjs":"^24.1.0",acorn:"^8.8.2","babel-loader":"^9.1.2",buffer:"^6.0.3",cors:"^2.8.5",eslint:"^7.32.0","eslint-config-airbnb-base":"^14.2.1","eslint-plugin-import":"^2.27.5","expect.js":"^0.3.1",express:"^4.18.2",mocha:"^10.2.0","mocha-headless-chrome":"^4.0.0","npm-run-all":"^4.1.5",nyc:"^15.1.0",rimraf:"^5.0.0",rollup:"^3.20.7","wait-on":"^7.0.1",webpack:"^5.79.0","webpack-bundle-analyzer":"^4.8.0","webpack-cli":"^5.0.1","webpack-dev-middleware":"^6.0.2","rollup-plugin-sourcemaps":"^0.6.3"},Zl={"bmp-js":"^0.1.0","idb-keyval":"^6.2.0","is-electron":"^2.2.2","is-url":"^1.2.4","node-fetch":"^2.6.9","opencollective-postinstall":"^2.0.3","regenerator-runtime":"^0.13.3","tesseract.js-core":"^5.1.0","wasm-feature-detect":"^1.2.11",zlibjs:"^0.3.1"},Jl={"@rollup/pluginutils":"^5.0.2"},Ql={type:"git",url:"https://github.com/naptha/tesseract.js.git"},$l={url:"https://github.com/naptha/tesseract.js/issues"},Xl="https://github.com/naptha/tesseract.js",eu={type:"opencollective",url:"https://opencollective.com/tesseractjs"},tu={name:Bl,version:Kl,description:Fl,main:jl,types:Ul,unpkg:Vl,jsdelivr:ql,scripts:zl,browser:Hl,author:xl,contributors:Wl,license:Gl,devDependencies:Yl,dependencies:Zl,overrides:Jl,repository:Ql,bugs:$l,homepage:Xl,collective:eu};var nu={workerBlobURL:!0,logger:()=>{}};const ru=tu.version,iu=nu;var au={...iu,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${ru}/dist/worker.min.js`},ou=({workerPath:i,workerBlobURL:e})=>{let n;if(Blob&&URL&&e){const r=new Blob([`importScripts("${i}");`],{type:"application/javascript"});n=new Worker(URL.createObjectURL(r))}else n=new Worker(i);return n},su=i=>{i.terminate()},lu=(i,e)=>{i.onmessage=({data:n})=>{e(n)}},uu=async(i,e)=>{i.postMessage(e)};const Ti=i=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{e(r.result)},r.onerror=({target:{error:{code:s}}})=>{n(Error(`File could not be read! Code=${s}`))},r.readAsArrayBuffer(i)}),Li=async i=>{let e=i;if(typeof i>"u")return"undefined";if(typeof i=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(i)?e=atob(i.split(",")[1]).split("").map(n=>n.charCodeAt(0)):e=await(await fetch(i)).arrayBuffer();else if(typeof HTMLElement<"u"&&i instanceof HTMLElement)i.tagName==="IMG"&&(e=await Li(i.src)),i.tagName==="VIDEO"&&(e=await Li(i.poster)),i.tagName==="CANVAS"&&await new Promise(n=>{i.toBlob(async r=>{e=await Ti(r),n()})});else if(typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas){const n=await i.convertToBlob();e=await Ti(n)}else(i instanceof File||i instanceof Blob)&&(e=await Ti(i));return new Uint8Array(e)};var cu=Li;const fu=au,du=ou,hu=su,pu=lu,mu=uu,gu=cu;var vu={defaultOptions:fu,spawnWorker:du,terminateWorker:hu,onMessage:pu,send:mu,loadImage:gu};const _u=Rl,yu=Nl,pn=Yo,{log:ao}=Zn,bu=Ri,jn=Zo,{defaultOptions:wu,spawnWorker:ku,terminateWorker:Eu,onMessage:Du,loadImage:oo,send:Su}=vu;let so=0;var Jo=async(i="eng",e=jn.LSTM_ONLY,n={},r={})=>{const s=bu("Worker",so),{logger:c,errorHandler:u,...g}=_u({...wu,...n}),_={},m={},v=typeof i=="string"?i.split("+"):i;let k=e,L=r;const U=[jn.DEFAULT,jn.LSTM_ONLY].includes(e)&&!g.legacyCore;let X,W;const z=new Promise((w,J)=>{W=w,X=J}),S=w=>{X(w.message)};let D=ku(g);D.onerror=S,so+=1;const Y=(w,J)=>{_[w]=J},P=(w,J)=>{m[w]=J},ae=({id:w,action:J,payload:Ae})=>new Promise((de,Ve)=>{ao(`[${s}]: Start ${w}, action=${J}`);const Pe=`${J}-${w}`;Y(Pe,de),P(Pe,Ve),Su(D,{workerId:s,jobId:w,action:J,payload:Ae})}),he=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),ne=w=>ae(pn({id:w,action:"load",payload:{options:{lstmOnly:U,corePath:g.corePath,logging:g.logging}}})),se=(w,J,Ae)=>ae(pn({id:Ae,action:"FS",payload:{method:"writeFile",args:[w,J]}})),we=(w,J)=>ae(pn({id:J,action:"FS",payload:{method:"readFile",args:[w,{encoding:"utf8"}]}})),ve=(w,J)=>ae(pn({id:J,action:"FS",payload:{method:"unlink",args:[w]}})),Ne=(w,J,Ae)=>ae(pn({id:Ae,action:"FS",payload:{method:w,args:J}})),be=()=>console.warn("`loadLanguage` is depreciated and should be removed from code (workers now come with language pre-loaded)"),Ee=(w,J)=>ae(pn({id:J,action:"loadLanguage",payload:{langs:w,options:{langPath:g.langPath,dataPath:g.dataPath,cachePath:g.cachePath,cacheMethod:g.cacheMethod,gzip:g.gzip,lstmOnly:[jn.LSTM_ONLY,jn.TESSERACT_LSTM_COMBINED].includes(k)&&!g.legacyLang}}})),De=()=>console.warn("`initialize` is depreciated and should be removed from code (workers now come pre-initialized)"),qe=(w,J,Ae,de)=>ae(pn({id:de,action:"initialize",payload:{langs:w,oem:J,config:Ae}})),Ue=(w="eng",J,Ae,de)=>{if(U&&[jn.TESSERACT_ONLY,jn.TESSERACT_LSTM_COMBINED].includes(J))throw Error("Legacy model requested but code missing.");const Ve=J||k;k=Ve;const Pe=Ae||L;L=Pe;const H=(typeof w=="string"?w.split("+"):w).filter(le=>!v.includes(le));return v.push(...H),H.length>0?Ee(H,de).then(()=>qe(w,Ve,Pe,de)):qe(w,Ve,Pe,de)},oe=(w={},J)=>ae(pn({id:J,action:"setParameters",payload:{params:w}})),Se=async(w,J={},Ae={blocks:!0,text:!0,hocr:!0,tsv:!0},de)=>ae(pn({id:de,action:"recognize",payload:{image:await oo(w),options:J,output:Ae}})),C=(w="Tesseract OCR Result",J=!1,Ae)=>(console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),ae(pn({id:Ae,action:"getPDF",payload:{title:w,textonly:J}}))),K=async(w,J)=>{if(U)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return ae(pn({id:J,action:"detect",payload:{image:await oo(w)}}))},$=async()=>(D!==null&&(Eu(D),D=null),Promise.resolve());Du(D,({workerId:w,jobId:J,status:Ae,action:de,data:Ve})=>{const Pe=`${de}-${J}`;if(Ae==="resolve"){ao(`[${w}]: Complete ${J}`);let ge=Ve;de==="recognize"?ge=yu(Ve):de==="getPDF"&&(ge=Array.from({...Ve,length:Object.keys(Ve).length})),_[Pe]({jobId:J,data:ge})}else if(Ae==="reject")if(m[Pe](Ve),de==="load"&&X(Ve),u)u(Ve);else throw Error(Ve);else Ae==="progress"&&c({...Ve,userJobId:J})});const pe={id:s,worker:D,setResolve:Y,setReject:P,load:he,writeText:se,readText:we,removeFile:ve,FS:Ne,loadLanguage:be,initialize:De,reinitialize:Ue,setParameters:oe,recognize:Se,getPDF:C,detect:K,terminate:$};return ne().then(()=>Ee(i)).then(()=>qe(i,e,r)).then(()=>W(pe)).catch(()=>{}),z};const Qo=Jo,Tu=async(i,e,n)=>{const r=await Qo(e,1,n);return r.recognize(i).finally(async()=>{await r.terminate()})},Cu=async(i,e)=>{const n=await Qo("osd",0,e);return n.detect(i).finally(async()=>{await n.terminate()})};var Ou={recognize:Tu,detect:Cu},Au={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"},Pu={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"};const Iu=Tl,Lu=Jo,Mu=Ou,Ru=Au,Nu=Zo,Bu=Pu,{setLogging:Ku}=Zn;var Fu={languages:Ru,OEM:Nu,PSM:Bu,createScheduler:Iu,createWorker:Lu,setLogging:Ku,...Mu};const $o=Ho(Fu);function lo(i,e,n){const r=i.slice();return r[21]=e[n],r}function uo(i,e,n){const r=i.slice();return r[24]=e[n],r}function co(i,e,n){const r=i.slice();return r[27]=e[n],r}function fo(i,e,n){const r=i.slice();return r[30]=e[n],r}function ho(i){let e,n,r=i[0].name+"",s,c,u,g,_,m,v,k,L,U='<img id="imgChosen" class="img-fluid" alt="Your chosen receipt"/>',X,W,z,S,D="Receipt description",Y,P,ae,he,ne,se,we,ve="Receipt Date",Ne,be,Ee,De,qe,Ue,oe="Receipt value:",Se,C,K,$,pe,w,J,Ae="Receipt Type",de,Ve,Pe,ge="--Please choose type--",H,le,_e,ze="Receipt Currency",Ye,F,Te,ye,ue="Add Receipt",xe,it,_t="<h4>Scanning image...</h4> <progress>Scanning image...</progress>",dt,ht,Dt,Pt,pt,Ct,Je,gn;function vn(ce,ee){return ce[8]?Uu:ju}let Qt=vn(i),Rt=Qt(i),It=Ge(i[1]),st=[];for(let ce=0;ce<It.length;ce+=1)st[ce]=po(fo(i,It,ce));function Be(ce){i[14](ce)}let _n={format:"yyyy-MM-dd",closeOnSelection:!0,id:"rDate"};i[3]!==void 0&&(_n.value=i[3]),be=new Yn({props:_n}),tn.push(()=>Ln(be,"value",Be));let jt=Ge(i[2]),ft=[];for(let ce=0;ce<jt.length;ce+=1)ft[ce]=mo(co(i,jt,ce));let ke=Ge(Object.keys(dr)),mt=[];for(let ce=0;ce<ke.length;ce+=1)mt[ce]=go(uo(i,ke,ce));let yt=Ge(Object.keys(Et)),gt=[];for(let ce=0;ce<yt.length;ce+=1)gt[ce]=vo(lo(i,yt,ce));return{c(){e=O("h1"),n=Le('Add Receipt to "'),s=Le(r),c=Le('"'),u=re(),Rt.c(),g=re(),_=O("div"),m=O("input"),v=re(),k=O("div"),L=O("div"),L.innerHTML=U,X=re(),W=O("div"),z=O("div"),S=O("label"),S.textContent=D,Y=re(),P=O("input"),ae=re(),he=O("datalist");for(let ce=0;ce<st.length;ce+=1)st[ce].c();ne=re(),se=O("div"),we=O("label"),we.textContent=ve,Ne=re(),Ut(be.$$.fragment),De=re(),qe=O("div"),Ue=O("label"),Ue.textContent=oe,Se=re(),C=O("input"),K=re(),$=O("datalist");for(let ce=0;ce<ft.length;ce+=1)ft[ce].c();pe=re(),w=O("div"),J=O("label"),J.textContent=Ae,de=re(),Ve=O("select"),Pe=O("option"),Pe.textContent=ge;for(let ce=0;ce<mt.length;ce+=1)mt[ce].c();H=re(),le=O("div"),_e=O("label"),_e.textContent=ze,Ye=re(),F=O("select");for(let ce=0;ce<gt.length;ce+=1)gt[ce].c();Te=re(),ye=O("button"),ye.textContent=ue,xe=re(),it=O("div"),it.innerHTML=_t,dt=re(),ht=O("div"),Dt=O("a"),Pt=Le("Cancel"),this.h()},l(ce){e=A(ce,"H1",{});var ee=x(e);n=Me(ee,'Add Receipt to "'),s=Me(ee,r),c=Me(ee,'"'),ee.forEach(b),u=ie(ce),Rt.l(ce),g=ie(ce),_=A(ce,"DIV",{class:!0});var He=x(_);m=A(He,"INPUT",{id:!0,type:!0,accept:!0}),He.forEach(b),v=ie(ce),k=A(ce,"DIV",{id:!0});var Ie=x(k);L=A(Ie,"DIV",{class:!0,"data-svelte-h":!0}),We(L)!=="svelte-lr06dx"&&(L.innerHTML=U),X=ie(Ie),W=A(Ie,"DIV",{class:!0});var Oe=x(W);z=A(Oe,"DIV",{class:!0});var vt=x(z);S=A(vt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),We(S)!=="svelte-1glg0dd"&&(S.textContent=D),Y=ie(vt),P=A(vt,"INPUT",{class:!0,list:!0,id:!0,name:!0,placeholder:!0}),ae=ie(vt),he=A(vt,"DATALIST",{id:!0});var Nt=x(he);for(let bt=0;bt<st.length;bt+=1)st[bt].l(Nt);Nt.forEach(b),vt.forEach(b),ne=ie(Oe),se=A(Oe,"DIV",{class:!0});var Ht=x(se);we=A(Ht,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),We(we)!=="svelte-cn0bms"&&(we.textContent=ve),Ne=ie(Ht),Vt(be.$$.fragment,Ht),Ht.forEach(b),De=ie(Oe),qe=A(Oe,"DIV",{class:!0});var at=x(qe);Ue=A(at,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),We(Ue)!=="svelte-1y6fy9c"&&(Ue.textContent=oe),Se=ie(at),C=A(at,"INPUT",{class:!0,list:!0,id:!0,name:!0,type:!0,step:!0,placeholder:!0}),K=ie(at),$=A(at,"DATALIST",{id:!0});var wt=x($);for(let bt=0;bt<ft.length;bt+=1)ft[bt].l(wt);wt.forEach(b),at.forEach(b),pe=ie(Oe),w=A(Oe,"DIV",{class:!0});var rn=x(w);J=A(rn,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),We(J)!=="svelte-1vxf1l8"&&(J.textContent=Ae),de=ie(rn),Ve=A(rn,"SELECT",{id:!0,class:!0});var cn=x(Ve);Pe=A(cn,"OPTION",{"data-svelte-h":!0}),We(Pe)!=="svelte-ua8958"&&(Pe.textContent=ge);for(let bt=0;bt<mt.length;bt+=1)mt[bt].l(cn);cn.forEach(b),rn.forEach(b),H=ie(Oe),le=A(Oe,"DIV",{class:!0});var Xt=x(le);_e=A(Xt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),We(_e)!=="svelte-15s44q2"&&(_e.textContent=ze),Ye=ie(Xt),F=A(Xt,"SELECT",{id:!0,class:!0});var fn=x(F);for(let bt=0;bt<gt.length;bt+=1)gt[bt].l(fn);fn.forEach(b),Xt.forEach(b),Te=ie(Oe),ye=A(Oe,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),We(ye)!=="svelte-1059pct"&&(ye.textContent=ue),Oe.forEach(b),Ie.forEach(b),xe=ie(ce),it=A(ce,"DIV",{class:!0,"data-svelte-h":!0}),We(it)!=="svelte-z0xj81"&&(it.innerHTML=_t),dt=ie(ce),ht=A(ce,"DIV",{class:!0});var En=x(ht);Dt=A(En,"A",{href:!0,class:!0});var en=x(Dt);Pt=Me(en,"Cancel"),en.forEach(b),En.forEach(b),this.h()},h(){p(m,"id","imageInput"),p(m,"type","file"),p(m,"accept","image/*;capture=camera"),p(_,"class","mb-3"),p(L,"class","img-scan d-flex col-md-6 col-sm-12"),p(S,"for","rDesc"),p(S,"class","form-label"),p(P,"class","form-control"),p(P,"list","descOptions"),p(P,"id","rDesc"),p(P,"name","rDesc"),p(P,"placeholder","Double-click for suggestions"),p(he,"id","descOptions"),p(z,"class","mb-3"),p(we,"for","rDate"),p(we,"class","form-label"),p(se,"class","mb-3"),p(Ue,"for","rVal"),p(Ue,"class","form-label"),p(C,"class","form-control"),p(C,"list","valOptions"),p(C,"id","rVal"),p(C,"name","rVal"),p(C,"type","number"),p(C,"step","0.01"),p(C,"placeholder","Double-click for suggestions"),p($,"id","valOptions"),p(qe,"class","mb-3"),p(J,"for","rType"),p(J,"class","form-label"),Pe.selected=!0,Pe.__value="--Please choose type--",ot(Pe,Pe.__value),p(Ve,"id","rType"),p(Ve,"class","form-control"),i[7]===void 0&&Un(()=>i[16].call(Ve)),p(w,"class","mb-3"),p(_e,"for","rCurrency"),p(_e,"class","form-label"),p(F,"id","rCurrency"),p(F,"class","form-control"),i[4]===void 0&&Un(()=>i[17].call(F)),p(le,"class","mb-3"),p(ye,"type","button"),p(ye,"class","btn btn-primary"),p(W,"class","d-flex flex-column col-md-6 col-sm-12"),p(k,"id","receiptEntry"),Tt(k,"show",i[9]),p(it,"class","flex-column hide"),Tt(it,"show",!i[9]&&i[8]),p(Dt,"href",pt="#/trip/"+i[0].id),p(Dt,"class","btn btn-outline-primary"),p(ht,"class","mt-3 d-grid d-md-block")},m(ce,ee){fe(ce,e,ee),h(e,n),h(e,s),h(e,c),fe(ce,u,ee),Rt.m(ce,ee),fe(ce,g,ee),fe(ce,_,ee),h(_,m),fe(ce,v,ee),fe(ce,k,ee),h(k,L),h(k,X),h(k,W),h(W,z),h(z,S),h(z,Y),h(z,P),ot(P,i[5]),h(z,ae),h(z,he);for(let He=0;He<st.length;He+=1)st[He]&&st[He].m(he,null);h(W,ne),h(W,se),h(se,we),h(se,Ne),qt(be,se,null),h(W,De),h(W,qe),h(qe,Ue),h(qe,Se),h(qe,C),ot(C,i[6]),h(qe,K),h(qe,$);for(let He=0;He<ft.length;He+=1)ft[He]&&ft[He].m($,null);h(W,pe),h(W,w),h(w,J),h(w,de),h(w,Ve),h(Ve,Pe);for(let He=0;He<mt.length;He+=1)mt[He]&&mt[He].m(Ve,null);Jt(Ve,i[7],!0),h(W,H),h(W,le),h(le,_e),h(le,Ye),h(le,F);for(let He=0;He<gt.length;He+=1)gt[He]&&gt[He].m(F,null);Jt(F,i[4],!0),h(W,Te),h(W,ye),fe(ce,xe,ee),fe(ce,it,ee),fe(ce,dt,ee),fe(ce,ht,ee),h(ht,Dt),h(Dt,Pt),Ct=!0,Je||(gn=[Ze(m,"change",i[11]),Ze(P,"input",i[13]),Ze(C,"input",i[15]),Ze(Ve,"change",i[16]),Ze(F,"change",i[17]),Ze(ye,"click",i[10])],Je=!0)},p(ce,ee){if((!Ct||ee[0]&1)&&r!==(r=ce[0].name+"")&&Xe(s,r),Qt!==(Qt=vn(ce))&&(Rt.d(1),Rt=Qt(ce),Rt&&(Rt.c(),Rt.m(g.parentNode,g))),ee[0]&32&&P.value!==ce[5]&&ot(P,ce[5]),ee[0]&2){It=Ge(ce[1]);let Ie;for(Ie=0;Ie<It.length;Ie+=1){const Oe=fo(ce,It,Ie);st[Ie]?st[Ie].p(Oe,ee):(st[Ie]=po(Oe),st[Ie].c(),st[Ie].m(he,null))}for(;Ie<st.length;Ie+=1)st[Ie].d(1);st.length=It.length}const He={};if(!Ee&&ee[0]&8&&(Ee=!0,He.value=ce[3],In(()=>Ee=!1)),be.$set(He),ee[0]&64&&Hr(C.value)!==ce[6]&&ot(C,ce[6]),ee[0]&4){jt=Ge(ce[2]);let Ie;for(Ie=0;Ie<jt.length;Ie+=1){const Oe=co(ce,jt,Ie);ft[Ie]?ft[Ie].p(Oe,ee):(ft[Ie]=mo(Oe),ft[Ie].c(),ft[Ie].m($,null))}for(;Ie<ft.length;Ie+=1)ft[Ie].d(1);ft.length=jt.length}if(ee&0){ke=Ge(Object.keys(dr));let Ie;for(Ie=0;Ie<ke.length;Ie+=1){const Oe=uo(ce,ke,Ie);mt[Ie]?mt[Ie].p(Oe,ee):(mt[Ie]=go(Oe),mt[Ie].c(),mt[Ie].m(Ve,null))}for(;Ie<mt.length;Ie+=1)mt[Ie].d(1);mt.length=ke.length}if(ee[0]&128&&Jt(Ve,ce[7]),ee&0){yt=Ge(Object.keys(Et));let Ie;for(Ie=0;Ie<yt.length;Ie+=1){const Oe=lo(ce,yt,Ie);gt[Ie]?gt[Ie].p(Oe,ee):(gt[Ie]=vo(Oe),gt[Ie].c(),gt[Ie].m(F,null))}for(;Ie<gt.length;Ie+=1)gt[Ie].d(1);gt.length=yt.length}ee[0]&16&&Jt(F,ce[4]),(!Ct||ee[0]&512)&&Tt(k,"show",ce[9]),(!Ct||ee[0]&768)&&Tt(it,"show",!ce[9]&&ce[8]),(!Ct||ee[0]&1&&pt!==(pt="#/trip/"+ce[0].id))&&p(Dt,"href",pt)},i(ce){Ct||(rt(be.$$.fragment,ce),Ct=!0)},o(ce){lt(be.$$.fragment,ce),Ct=!1},d(ce){ce&&(b(e),b(u),b(g),b(_),b(v),b(k),b(xe),b(it),b(dt),b(ht)),Rt.d(ce),Mt(st,ce),zt(be),Mt(ft,ce),Mt(mt,ce),Mt(gt,ce),Je=!1,kn(gn)}}}function ju(i){let e,n="Choose image to begin";return{c(){e=O("p"),e.textContent=n},l(r){e=A(r,"P",{"data-svelte-h":!0}),We(e)!=="svelte-1rdbglw"&&(e.textContent=n)},m(r,s){fe(r,e,s)},d(r){r&&b(e)}}}function Uu(i){let e,n="Click 'Browse' to start again";return{c(){e=O("p"),e.textContent=n},l(r){e=A(r,"P",{"data-svelte-h":!0}),We(e)!=="svelte-1raiglx"&&(e.textContent=n)},m(r,s){fe(r,e,s)},d(r){r&&b(e)}}}function po(i){let e,n;return{c(){e=O("option"),this.h()},l(r){e=A(r,"OPTION",{}),x(e).forEach(b),this.h()},h(){e.__value=n=i[30],ot(e,e.__value)},m(r,s){fe(r,e,s)},p(r,s){s[0]&2&&n!==(n=r[30])&&(e.__value=n,ot(e,e.__value))},d(r){r&&b(e)}}}function mo(i){let e,n=i[27]+"",r,s;return{c(){e=O("option"),r=Le(n),this.h()},l(c){e=A(c,"OPTION",{});var u=x(e);r=Me(u,n),u.forEach(b),this.h()},h(){e.__value=s=i[27],ot(e,e.__value)},m(c,u){fe(c,e,u),h(e,r)},p(c,u){u[0]&4&&n!==(n=c[27]+"")&&Xe(r,n),u[0]&4&&s!==(s=c[27])&&(e.__value=s,ot(e,e.__value))},d(c){c&&b(e)}}}function go(i){let e,n=i[24]+"",r;return{c(){e=O("option"),r=Le(n),this.h()},l(s){e=A(s,"OPTION",{});var c=x(e);r=Me(c,n),c.forEach(b),this.h()},h(){e.__value=i[24],ot(e,e.__value)},m(s,c){fe(s,e,c),h(e,r)},p:kt,d(s){s&&b(e)}}}function vo(i){let e,n=i[21]+"",r,s,c=Et[i[21]].symbol+"",u,g;return{c(){e=O("option"),r=Le(n),s=Le(" ("),u=Le(c),g=Le(`)
                `),this.h()},l(_){e=A(_,"OPTION",{});var m=x(e);r=Me(m,n),s=Me(m," ("),u=Me(m,c),g=Me(m,`)
                `),m.forEach(b),this.h()},h(){e.__value=i[21],ot(e,e.__value)},m(_,m){fe(_,e,m),h(e,r),h(e,s),h(e,u),h(e,g)},p:kt,d(_){_&&b(e)}}}function Vu(i){let e,n,r=i[0]&&ho(i);return{c(){e=O("div"),r&&r.c(),this.h()},l(s){e=A(s,"DIV",{class:!0});var c=x(e);r&&r.l(c),c.forEach(b),this.h()},h(){p(e,"class","w-100")},m(s,c){fe(s,e,c),r&&r.m(e,null),n=!0},p(s,c){s[0]?r?(r.p(s,c),c[0]&1&&rt(r,1)):(r=ho(s),r.c(),rt(r,1),r.m(e,null)):r&&(Vn(),lt(r,1,1,()=>{r=null}),qn())},i(s){n||(rt(r),n=!0)},o(s){lt(r),n=!1},d(s){s&&b(e),r&&r.d()}}}function qu(i,e,n){let{tripId:r}=e,s,c=[],u=[],g=new Date,_,m,v,k,L,U,X,W=!1;r>-1&&Kt.trips.get(r).then(se=>{n(0,s=se),n(4,_=s.defaultCurrency)});async function z(){let se=document.getElementById("imgChosen");X=se.naturalWidth,U=se.naturalHeight,await Kt.receipts.add({description:m,currency:_,receiptDate:g,receiptDateString:g.toDateString(),receiptType:k,total:v,tripId:r,imageData:L,imageHeight:U,imageWidth:X}),window.location.href="#/trip/"+r}async function S(se){var we=await $o.recognize(se,"eng");return we.data.lines}async function D(se){n(1,c=[]),n(2,u=[]),n(9,W=!1);var we=se.target.files[0];n(8,L=we);var ve=URL.createObjectURL(we);const Ne=document.getElementById("imgChosen");Ne.src=ve;var be=await S(ve);for(let Ee of be){if(Ee.confidence<40)continue;c.push(Ee.text);let De=mn(Ee.text);De.value>0&&u.push(De.format({symbol:"",separator:""}))}n(1,c),n(2,u=u.reverse()),n(9,W=!0)}function Y(){m=this.value,n(5,m)}function P(se){g=se,n(3,g)}function ae(){v=Hr(this.value),n(6,v)}function he(){k=Gn(this),n(7,k)}function ne(){_=Gn(this),n(4,_)}return i.$$set=se=>{"tripId"in se&&n(12,r=se.tripId)},[s,c,u,g,_,m,v,k,L,W,z,D,r,Y,P,ae,he,ne]}class zu extends on{constructor(e){super(),sn(this,e,qu,Vu,nn,{tripId:12},null,[-1,-1])}}function _o(i,e,n){const r=i.slice();return r[21]=e[n],r}function yo(i,e,n){const r=i.slice();return r[24]=e[n],r}function bo(i,e,n){const r=i.slice();return r[27]=e[n],r}function wo(i,e,n){const r=i.slice();return r[30]=e[n],r}function ko(i){let e,n,r=i[0].description+"",s,c,u,g,_,m,v,k,L,U,X,W,z,S,D,Y="Receipt description",P,ae,he,ne,se,we,ve,Ne="Receipt Date",be,Ee,De,qe,Ue,oe,Se="Receipt value:",C,K,$,pe,w,J,Ae,de="Receipt Type",Ve,Pe,ge,H="--Please choose type--",le,_e,ze,Ye="Receipt Currency",F,Te,ye,ue,xe,it="Update Receipt",_t,dt,ht,Dt,Pt,pt,Ct="<h4>Scanning image...</h4> <progress>Scanning image...</progress>",Je,gn,vn;function Qt(ee,He){return ee[8]?xu:Hu}let Rt=Qt(i),It=Rt(i),st=Ge(i[1]),Be=[];for(let ee=0;ee<st.length;ee+=1)Be[ee]=Eo(wo(i,st,ee));function _n(ee){i[14](ee)}let jt={format:"yyyy-MM-dd",closeOnSelection:!0,id:"rDate"};i[3]!==void 0&&(jt.value=i[3]),Ee=new Yn({props:jt}),tn.push(()=>Ln(Ee,"value",_n));let ft=Ge(i[2]),ke=[];for(let ee=0;ee<ft.length;ee+=1)ke[ee]=Do(bo(i,ft,ee));let mt=Ge(Object.keys(dr)),yt=[];for(let ee=0;ee<mt.length;ee+=1)yt[ee]=So(yo(i,mt,ee));let gt=Ge(Object.keys(Et)),ce=[];for(let ee=0;ee<gt.length;ee+=1)ce[ee]=To(_o(i,gt,ee));return{c(){e=O("h1"),n=Le('Update Receipt for "'),s=Le(r),c=Le('"'),u=re(),It.c(),g=re(),_=O("div"),m=O("input"),v=re(),k=O("div"),L=O("div"),U=O("img"),W=re(),z=O("div"),S=O("div"),D=O("label"),D.textContent=Y,P=re(),ae=O("input"),he=re(),ne=O("datalist");for(let ee=0;ee<Be.length;ee+=1)Be[ee].c();se=re(),we=O("div"),ve=O("label"),ve.textContent=Ne,be=re(),Ut(Ee.$$.fragment),qe=re(),Ue=O("div"),oe=O("label"),oe.textContent=Se,C=re(),K=O("input"),$=re(),pe=O("datalist");for(let ee=0;ee<ke.length;ee+=1)ke[ee].c();w=re(),J=O("div"),Ae=O("label"),Ae.textContent=de,Ve=re(),Pe=O("select"),ge=O("option"),ge.textContent=H;for(let ee=0;ee<yt.length;ee+=1)yt[ee].c();le=re(),_e=O("div"),ze=O("label"),ze.textContent=Ye,F=re(),Te=O("select");for(let ee=0;ee<ce.length;ee+=1)ce[ee].c();ye=re(),ue=O("div"),xe=O("button"),xe.textContent=it,_t=re(),dt=O("a"),ht=Le("Cancel"),Pt=re(),pt=O("div"),pt.innerHTML=Ct,this.h()},l(ee){e=A(ee,"H1",{});var He=x(e);n=Me(He,'Update Receipt for "'),s=Me(He,r),c=Me(He,'"'),He.forEach(b),u=ie(ee),It.l(ee),g=ie(ee),_=A(ee,"DIV",{class:!0});var Ie=x(_);m=A(Ie,"INPUT",{id:!0,type:!0,accept:!0}),Ie.forEach(b),v=ie(ee),k=A(ee,"DIV",{id:!0});var Oe=x(k);L=A(Oe,"DIV",{class:!0});var vt=x(L);U=A(vt,"IMG",{id:!0,class:!0,src:!0,alt:!0}),vt.forEach(b),W=ie(Oe),z=A(Oe,"DIV",{class:!0});var Nt=x(z);S=A(Nt,"DIV",{class:!0});var Ht=x(S);D=A(Ht,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),We(D)!=="svelte-1glg0dd"&&(D.textContent=Y),P=ie(Ht),ae=A(Ht,"INPUT",{class:!0,list:!0,id:!0,name:!0,placeholder:!0}),he=ie(Ht),ne=A(Ht,"DATALIST",{id:!0});var at=x(ne);for(let Lt=0;Lt<Be.length;Lt+=1)Be[Lt].l(at);at.forEach(b),Ht.forEach(b),se=ie(Nt),we=A(Nt,"DIV",{class:!0});var wt=x(we);ve=A(wt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),We(ve)!=="svelte-cn0bms"&&(ve.textContent=Ne),be=ie(wt),Vt(Ee.$$.fragment,wt),wt.forEach(b),qe=ie(Nt),Ue=A(Nt,"DIV",{class:!0});var rn=x(Ue);oe=A(rn,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),We(oe)!=="svelte-1y6fy9c"&&(oe.textContent=Se),C=ie(rn),K=A(rn,"INPUT",{class:!0,list:!0,id:!0,name:!0,type:!0,step:!0,placeholder:!0}),$=ie(rn),pe=A(rn,"DATALIST",{id:!0});var cn=x(pe);for(let Lt=0;Lt<ke.length;Lt+=1)ke[Lt].l(cn);cn.forEach(b),rn.forEach(b),w=ie(Nt),J=A(Nt,"DIV",{class:!0});var Xt=x(J);Ae=A(Xt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),We(Ae)!=="svelte-1vxf1l8"&&(Ae.textContent=de),Ve=ie(Xt),Pe=A(Xt,"SELECT",{id:!0,class:!0});var fn=x(Pe);ge=A(fn,"OPTION",{"data-svelte-h":!0}),We(ge)!=="svelte-10m9j2x"&&(ge.textContent=H);for(let Lt=0;Lt<yt.length;Lt+=1)yt[Lt].l(fn);fn.forEach(b),Xt.forEach(b),le=ie(Nt),_e=A(Nt,"DIV",{class:!0});var En=x(_e);ze=A(En,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),We(ze)!=="svelte-15s44q2"&&(ze.textContent=Ye),F=ie(En),Te=A(En,"SELECT",{id:!0,class:!0});var en=x(Te);for(let Lt=0;Lt<ce.length;Lt+=1)ce[Lt].l(en);en.forEach(b),En.forEach(b),ye=ie(Nt),ue=A(Nt,"DIV",{class:!0});var bt=x(ue);xe=A(bt,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),We(xe)!=="svelte-jbq1gp"&&(xe.textContent=it),_t=ie(bt),dt=A(bt,"A",{href:!0,class:!0});var dn=x(dt);ht=Me(dn,"Cancel"),dn.forEach(b),bt.forEach(b),Nt.forEach(b),Oe.forEach(b),Pt=ie(ee),pt=A(ee,"DIV",{class:!0,"data-svelte-h":!0}),We(pt)!=="svelte-z0xj81"&&(pt.innerHTML=Ct),this.h()},h(){p(m,"id","imageInput"),p(m,"type","file"),p(m,"accept","image/*;capture=camera"),p(_,"class","mb-3"),p(U,"id","imgChosen"),p(U,"class","img-fluid"),Kr(U.src,X=URL.createObjectURL(i[8]))||p(U,"src",X),p(U,"alt","Your chosen receipt"),p(L,"class","img-scan d-flex col-md-6 col-sm-12"),p(D,"for","rDesc"),p(D,"class","form-label"),p(ae,"class","form-control"),p(ae,"list","descOptions"),p(ae,"id","rDesc"),p(ae,"name","rDesc"),p(ae,"placeholder","Double-click for suggestions"),p(ne,"id","descOptions"),p(S,"class","mb-3"),p(ve,"for","rDate"),p(ve,"class","form-label"),p(we,"class","mb-3"),p(oe,"for","rVal"),p(oe,"class","form-label"),p(K,"class","form-control"),p(K,"list","valOptions"),p(K,"id","rVal"),p(K,"name","rVal"),p(K,"type","number"),p(K,"step","0.01"),p(K,"placeholder","Double-click for suggestions"),p(pe,"id","valOptions"),p(Ue,"class","mb-3"),p(Ae,"for","rType"),p(Ae,"class","form-label"),ge.__value="--Please choose type--",ot(ge,ge.__value),p(Pe,"id","rType"),p(Pe,"class","form-control"),i[7]===void 0&&Un(()=>i[16].call(Pe)),p(J,"class","mb-3"),p(ze,"for","rCurrency"),p(ze,"class","form-label"),p(Te,"id","rCurrency"),p(Te,"class","form-control"),i[4]===void 0&&Un(()=>i[17].call(Te)),p(_e,"class","mb-3"),p(xe,"type","button"),p(xe,"class","btn btn-primary"),p(dt,"href",Dt="#/trip/"+i[0].tripId),p(dt,"class","btn btn-outline-primary"),p(ue,"class","gap-3 d-grid d-md-block"),p(z,"class","d-flex flex-column col-md-6 col-sm-12"),p(k,"id","receiptEntry"),Tt(k,"show",i[9]),p(pt,"class","flex-column hide"),Tt(pt,"show",!i[9]&&i[8])},m(ee,He){fe(ee,e,He),h(e,n),h(e,s),h(e,c),fe(ee,u,He),It.m(ee,He),fe(ee,g,He),fe(ee,_,He),h(_,m),fe(ee,v,He),fe(ee,k,He),h(k,L),h(L,U),h(k,W),h(k,z),h(z,S),h(S,D),h(S,P),h(S,ae),ot(ae,i[5]),h(S,he),h(S,ne);for(let Ie=0;Ie<Be.length;Ie+=1)Be[Ie]&&Be[Ie].m(ne,null);h(z,se),h(z,we),h(we,ve),h(we,be),qt(Ee,we,null),h(z,qe),h(z,Ue),h(Ue,oe),h(Ue,C),h(Ue,K),ot(K,i[6]),h(Ue,$),h(Ue,pe);for(let Ie=0;Ie<ke.length;Ie+=1)ke[Ie]&&ke[Ie].m(pe,null);h(z,w),h(z,J),h(J,Ae),h(J,Ve),h(J,Pe),h(Pe,ge);for(let Ie=0;Ie<yt.length;Ie+=1)yt[Ie]&&yt[Ie].m(Pe,null);Jt(Pe,i[7],!0),h(z,le),h(z,_e),h(_e,ze),h(_e,F),h(_e,Te);for(let Ie=0;Ie<ce.length;Ie+=1)ce[Ie]&&ce[Ie].m(Te,null);Jt(Te,i[4],!0),h(z,ye),h(z,ue),h(ue,xe),h(ue,_t),h(ue,dt),h(dt,ht),fe(ee,Pt,He),fe(ee,pt,He),Je=!0,gn||(vn=[Ze(m,"change",i[11]),Ze(ae,"input",i[13]),Ze(K,"input",i[15]),Ze(Pe,"change",i[16]),Ze(Te,"change",i[17]),Ze(xe,"click",i[10])],gn=!0)},p(ee,He){if((!Je||He[0]&1)&&r!==(r=ee[0].description+"")&&Xe(s,r),Rt!==(Rt=Qt(ee))&&(It.d(1),It=Rt(ee),It&&(It.c(),It.m(g.parentNode,g))),(!Je||He[0]&256&&!Kr(U.src,X=URL.createObjectURL(ee[8])))&&p(U,"src",X),He[0]&32&&ae.value!==ee[5]&&ot(ae,ee[5]),He[0]&2){st=Ge(ee[1]);let Oe;for(Oe=0;Oe<st.length;Oe+=1){const vt=wo(ee,st,Oe);Be[Oe]?Be[Oe].p(vt,He):(Be[Oe]=Eo(vt),Be[Oe].c(),Be[Oe].m(ne,null))}for(;Oe<Be.length;Oe+=1)Be[Oe].d(1);Be.length=st.length}const Ie={};if(!De&&He[0]&8&&(De=!0,Ie.value=ee[3],In(()=>De=!1)),Ee.$set(Ie),He[0]&64&&Hr(K.value)!==ee[6]&&ot(K,ee[6]),He[0]&4){ft=Ge(ee[2]);let Oe;for(Oe=0;Oe<ft.length;Oe+=1){const vt=bo(ee,ft,Oe);ke[Oe]?ke[Oe].p(vt,He):(ke[Oe]=Do(vt),ke[Oe].c(),ke[Oe].m(pe,null))}for(;Oe<ke.length;Oe+=1)ke[Oe].d(1);ke.length=ft.length}if(He&0){mt=Ge(Object.keys(dr));let Oe;for(Oe=0;Oe<mt.length;Oe+=1){const vt=yo(ee,mt,Oe);yt[Oe]?yt[Oe].p(vt,He):(yt[Oe]=So(vt),yt[Oe].c(),yt[Oe].m(Pe,null))}for(;Oe<yt.length;Oe+=1)yt[Oe].d(1);yt.length=mt.length}if(He[0]&128&&Jt(Pe,ee[7]),He&0){gt=Ge(Object.keys(Et));let Oe;for(Oe=0;Oe<gt.length;Oe+=1){const vt=_o(ee,gt,Oe);ce[Oe]?ce[Oe].p(vt,He):(ce[Oe]=To(vt),ce[Oe].c(),ce[Oe].m(Te,null))}for(;Oe<ce.length;Oe+=1)ce[Oe].d(1);ce.length=gt.length}He[0]&16&&Jt(Te,ee[4]),(!Je||He[0]&1&&Dt!==(Dt="#/trip/"+ee[0].tripId))&&p(dt,"href",Dt),(!Je||He[0]&512)&&Tt(k,"show",ee[9]),(!Je||He[0]&768)&&Tt(pt,"show",!ee[9]&&ee[8])},i(ee){Je||(rt(Ee.$$.fragment,ee),Je=!0)},o(ee){lt(Ee.$$.fragment,ee),Je=!1},d(ee){ee&&(b(e),b(u),b(g),b(_),b(v),b(k),b(Pt),b(pt)),It.d(ee),Mt(Be,ee),zt(Ee),Mt(ke,ee),Mt(yt,ee),Mt(ce,ee),gn=!1,kn(vn)}}}function Hu(i){let e,n="Choose image to begin";return{c(){e=O("p"),e.textContent=n},l(r){e=A(r,"P",{"data-svelte-h":!0}),We(e)!=="svelte-1rdbglw"&&(e.textContent=n)},m(r,s){fe(r,e,s)},d(r){r&&b(e)}}}function xu(i){let e,n="'Choose file' to start again";return{c(){e=O("p"),e.textContent=n},l(r){e=A(r,"P",{"data-svelte-h":!0}),We(e)!=="svelte-ffknqs"&&(e.textContent=n)},m(r,s){fe(r,e,s)},d(r){r&&b(e)}}}function Eo(i){let e,n;return{c(){e=O("option"),this.h()},l(r){e=A(r,"OPTION",{}),x(e).forEach(b),this.h()},h(){e.__value=n=i[30],ot(e,e.__value)},m(r,s){fe(r,e,s)},p(r,s){s[0]&2&&n!==(n=r[30])&&(e.__value=n,ot(e,e.__value))},d(r){r&&b(e)}}}function Do(i){let e,n=i[27]+"",r,s;return{c(){e=O("option"),r=Le(n),this.h()},l(c){e=A(c,"OPTION",{});var u=x(e);r=Me(u,n),u.forEach(b),this.h()},h(){e.__value=s=i[27],ot(e,e.__value)},m(c,u){fe(c,e,u),h(e,r)},p(c,u){u[0]&4&&n!==(n=c[27]+"")&&Xe(r,n),u[0]&4&&s!==(s=c[27])&&(e.__value=s,ot(e,e.__value))},d(c){c&&b(e)}}}function So(i){let e,n=i[24]+"",r;return{c(){e=O("option"),r=Le(n),this.h()},l(s){e=A(s,"OPTION",{});var c=x(e);r=Me(c,n),c.forEach(b),this.h()},h(){e.__value=i[24],ot(e,e.__value)},m(s,c){fe(s,e,c),h(e,r)},p:kt,d(s){s&&b(e)}}}function To(i){let e,n=i[21]+"",r,s,c=Et[i[21]].symbol+"",u,g;return{c(){e=O("option"),r=Le(n),s=Le(" ("),u=Le(c),g=Le(`)
                `),this.h()},l(_){e=A(_,"OPTION",{});var m=x(e);r=Me(m,n),s=Me(m," ("),u=Me(m,c),g=Me(m,`)
                `),m.forEach(b),this.h()},h(){e.__value=i[21],ot(e,e.__value)},m(_,m){fe(_,e,m),h(e,r),h(e,s),h(e,u),h(e,g)},p:kt,d(_){_&&b(e)}}}function Wu(i){let e,n,r=i[0]&&ko(i);return{c(){e=O("div"),r&&r.c(),this.h()},l(s){e=A(s,"DIV",{class:!0});var c=x(e);r&&r.l(c),c.forEach(b),this.h()},h(){p(e,"class","w-100")},m(s,c){fe(s,e,c),r&&r.m(e,null),n=!0},p(s,c){s[0]?r?(r.p(s,c),c[0]&1&&rt(r,1)):(r=ko(s),r.c(),rt(r,1),r.m(e,null)):r&&(Vn(),lt(r,1,1,()=>{r=null}),qn())},i(s){n||(rt(r),n=!0)},o(s){lt(r),n=!1},d(s){s&&b(e),r&&r.d()}}}function Gu(i,e,n){let{receiptId:r}=e,s,c=[],u=[],g=new Date,_,m,v,k,L,U,X,W=!1;r>-1&&Kt.receipts.get(r).then(se=>{n(0,s=se),n(3,g=new Date(s.receiptDateString)),n(4,_=s.currency),n(5,m=s.description),n(6,v=s.total),n(7,k=s.receiptType),n(8,L=s.imageData),n(9,W=!0)});async function z(){let se=document.getElementById("imgChosen");X=se.naturalWidth,U=se.naturalHeight,await Kt.receipts.update(s.id,{description:m,currency:_,receiptDate:g,receiptDateString:g.toDateString(),receiptType:k,total:v,tripId:s.tripId,imageData:L,imageHeight:U,imageWidth:X}),window.location.href="#/trip/"+s.tripId}async function S(se){var we=await $o.recognize(se,"eng");return we.data.lines}async function D(se){n(1,c=[]),n(2,u=[]),n(9,W=!1);var we=se.target.files[0];n(8,L=we);var ve=URL.createObjectURL(we),Ne=await S(ve);for(let be of Ne){if(be.confidence<40)continue;c.push(be.text);let Ee=mn(be.text);Ee.value>0&&u.push(Ee.format({symbol:"",separator:""}))}n(1,c),n(2,u=u.reverse()),n(9,W=!0)}function Y(){m=this.value,n(5,m)}function P(se){g=se,n(3,g)}function ae(){v=Hr(this.value),n(6,v)}function he(){k=Gn(this),n(7,k)}function ne(){_=Gn(this),n(4,_)}return i.$$set=se=>{"receiptId"in se&&n(12,r=se.receiptId)},[s,c,u,g,_,m,v,k,L,W,z,D,r,Y,P,ae,he,ne]}class Yu extends on{constructor(e){super(),sn(this,e,Gu,Wu,nn,{receiptId:12},null,[-1,-1])}}function Zu(i){let e,n="<h1>Welcome!</h1> <p>Create a trip using the button at the top</p> <p>Or add receipts by selecting a trip</p>";return{c(){e=O("div"),e.innerHTML=n},l(r){e=A(r,"DIV",{"data-svelte-h":!0}),We(e)!=="svelte-klyxeq"&&(e.innerHTML=n)},m(r,s){fe(r,e,s)},p:kt,i:kt,o:kt,d(r){r&&b(e)}}}class Ju extends on{constructor(e){super(),sn(this,e,null,Zu,nn,{})}}function Co(i,e,n){const r=i.slice();return r[6]=e[n],r}function Oo(i,e,n){const r=i.slice();return r[9]=e[n],r}function Ao(i,e,n){const r=i.slice();return r[6]=e[n],r}function Ci(i){const e=i.slice(),n=Array.from(new Set(e[2].map(r=>r.currency)));return e[5]=n,e}function Po(i){let e,n=i[0].name+"",r,s,c,u=i[0].startDateString+"",g,_,m=i[0].endDateString+"",v,k,L,U="Receipt Summary",X,W,z=i[2]&&Io(Ci(i));return{c(){e=O("h1"),r=Le(n),s=re(),c=O("h4"),g=Le(u),_=Le(" - "),v=Le(m),k=re(),L=O("h5"),L.textContent=U,X=re(),z&&z.c(),W=Ft()},l(S){e=A(S,"H1",{});var D=x(e);r=Me(D,n),D.forEach(b),s=ie(S),c=A(S,"H4",{});var Y=x(c);g=Me(Y,u),_=Me(Y," - "),v=Me(Y,m),Y.forEach(b),k=ie(S),L=A(S,"H5",{"data-svelte-h":!0}),We(L)!=="svelte-1hbjnf6"&&(L.textContent=U),X=ie(S),z&&z.l(S),W=Ft()},m(S,D){fe(S,e,D),h(e,r),fe(S,s,D),fe(S,c,D),h(c,g),h(c,_),h(c,v),fe(S,k,D),fe(S,L,D),fe(S,X,D),z&&z.m(S,D),fe(S,W,D)},p(S,D){D&1&&n!==(n=S[0].name+"")&&Xe(r,n),D&1&&u!==(u=S[0].startDateString+"")&&Xe(g,u),D&1&&m!==(m=S[0].endDateString+"")&&Xe(v,m),S[2]?z?z.p(Ci(S),D):(z=Io(Ci(S)),z.c(),z.m(W.parentNode,W)):z&&(z.d(1),z=null)},d(S){S&&(b(e),b(s),b(c),b(k),b(L),b(X),b(W)),z&&z.d(S)}}}function Io(i){let e,n,r="<tr><th>Receipt Description</th> <th>Receipt Date</th> <th>Receipt Type</th> <th>Receipt Total</th></tr>",s,c,u=[],g=new Map,_,m,v,k,L,U,X,W,z="<strong>Total</strong>",S,D,Y,P,ae,he=[],ne=new Map,se,we,ve=`// Wait for images to render before printing
        var imgs = document.images,
        len = imgs.length,
        counter = 0;

        [].forEach.call( imgs, function( img ) {
            if(img.complete)
              incrementCounter();
            else
              img.addEventListener( 'load', incrementCounter, false );
        } );

        function incrementCounter() {
            counter++;
            if ( counter === len ) {
              window.print();
            }
        }`,Ne=Ge(i[2]);const be=oe=>oe[6].id;for(let oe=0;oe<Ne.length;oe+=1){let Se=Ao(i,Ne,oe),C=be(Se);g.set(C,u[oe]=Lo(C,Se))}let Ee=Ge(i[5]),De=[];for(let oe=0;oe<Ee.length;oe+=1)De[oe]=Mo(Oo(i,Ee,oe));let qe=Ge(i[2]);const Ue=oe=>oe[6].id;for(let oe=0;oe<qe.length;oe+=1){let Se=Co(i,qe,oe),C=Ue(Se);ne.set(C,he[oe]=Ro(C,Se))}return{c(){e=O("table"),n=O("thead"),n.innerHTML=r,s=re(),c=O("tbody");for(let oe=0;oe<u.length;oe+=1)u[oe].c();_=re(),m=O("tfoot"),v=O("tr"),k=O("td"),L=re(),U=O("td"),X=re(),W=O("td"),W.innerHTML=z,S=re(),D=O("td");for(let oe=0;oe<De.length;oe+=1)De[oe].c();Y=re(),P=O("td"),ae=re();for(let oe=0;oe<he.length;oe+=1)he[oe].c();se=re(),we=O("script"),we.textContent=ve,this.h()},l(oe){e=A(oe,"TABLE",{class:!0});var Se=x(e);n=A(Se,"THEAD",{"data-svelte-h":!0}),We(n)!=="svelte-1yqevk1"&&(n.innerHTML=r),s=ie(Se),c=A(Se,"TBODY",{});var C=x(c);for(let w=0;w<u.length;w+=1)u[w].l(C);C.forEach(b),_=ie(Se),m=A(Se,"TFOOT",{class:!0});var K=x(m);v=A(K,"TR",{});var $=x(v);k=A($,"TD",{}),x(k).forEach(b),L=ie($),U=A($,"TD",{}),x(U).forEach(b),X=ie($),W=A($,"TD",{class:!0,"data-svelte-h":!0}),We(W)!=="svelte-14afisz"&&(W.innerHTML=z),S=ie($),D=A($,"TD",{});var pe=x(D);for(let w=0;w<De.length;w+=1)De[w].l(pe);pe.forEach(b),Y=ie($),P=A($,"TD",{}),x(P).forEach(b),$.forEach(b),K.forEach(b),Se.forEach(b),ae=ie(oe);for(let w=0;w<he.length;w+=1)he[w].l(oe);se=ie(oe),we=A(oe,"SCRIPT",{"data-svelte-h":!0}),We(we)!=="svelte-tktxvg"&&(we.textContent=ve),this.h()},h(){p(W,"class","text-end"),p(m,"class","table-group-divider"),p(e,"class","table table-striped table-hover")},m(oe,Se){fe(oe,e,Se),h(e,n),h(e,s),h(e,c);for(let C=0;C<u.length;C+=1)u[C]&&u[C].m(c,null);h(e,_),h(e,m),h(m,v),h(v,k),h(v,L),h(v,U),h(v,X),h(v,W),h(v,S),h(v,D);for(let C=0;C<De.length;C+=1)De[C]&&De[C].m(D,null);h(v,Y),h(v,P),fe(oe,ae,Se);for(let C=0;C<he.length;C+=1)he[C]&&he[C].m(oe,Se);fe(oe,se,Se),fe(oe,we,Se)},p(oe,Se){if(Se&4&&(Ne=Ge(oe[2]),u=jr(u,Se,be,1,oe,Ne,g,c,Fr,Lo,null,Ao)),Se&4){Ee=Ge(oe[5]);let C;for(C=0;C<Ee.length;C+=1){const K=Oo(oe,Ee,C);De[C]?De[C].p(K,Se):(De[C]=Mo(K),De[C].c(),De[C].m(D,null))}for(;C<De.length;C+=1)De[C].d(1);De.length=Ee.length}Se&4&&(qe=Ge(oe[2]),he=jr(he,Se,Ue,1,oe,qe,ne,se.parentNode,Fr,Ro,se,Co))},d(oe){oe&&(b(e),b(ae),b(se),b(we));for(let Se=0;Se<u.length;Se+=1)u[Se].d();Mt(De,oe);for(let Se=0;Se<he.length;Se+=1)he[Se].d(oe)}}}function Lo(i,e){let n,r,s=e[6].description+"",c,u,g,_=e[6].receiptDateString+"",m,v,k,L=e[6].receiptType+"",U,X,W,z=Et[e[6].currency].symbol+"",S,D,Y=e[6].total.toFixed(2)+"",P,ae;return{key:i,first:null,c(){n=O("tr"),r=O("td"),c=Le(s),u=re(),g=O("td"),m=Le(_),v=re(),k=O("td"),U=Le(L),X=re(),W=O("td"),S=Le(z),D=re(),P=Le(Y),ae=re(),this.h()},l(he){n=A(he,"TR",{});var ne=x(n);r=A(ne,"TD",{});var se=x(r);c=Me(se,s),se.forEach(b),u=ie(ne),g=A(ne,"TD",{});var we=x(g);m=Me(we,_),we.forEach(b),v=ie(ne),k=A(ne,"TD",{});var ve=x(k);U=Me(ve,L),ve.forEach(b),X=ie(ne),W=A(ne,"TD",{});var Ne=x(W);S=Me(Ne,z),D=ie(Ne),P=Me(Ne,Y),Ne.forEach(b),ae=ie(ne),ne.forEach(b),this.h()},h(){this.first=n},m(he,ne){fe(he,n,ne),h(n,r),h(r,c),h(n,u),h(n,g),h(g,m),h(n,v),h(n,k),h(k,U),h(n,X),h(n,W),h(W,S),h(W,D),h(W,P),h(n,ae)},p(he,ne){e=he,ne&4&&s!==(s=e[6].description+"")&&Xe(c,s),ne&4&&_!==(_=e[6].receiptDateString+"")&&Xe(m,_),ne&4&&L!==(L=e[6].receiptType+"")&&Xe(U,L),ne&4&&z!==(z=Et[e[6].currency].symbol+"")&&Xe(S,z),ne&4&&Y!==(Y=e[6].total.toFixed(2)+"")&&Xe(P,Y)},d(he){he&&b(n)}}}function Mo(i){let e=Et[i[9]].symbol+"",n,r,s=i[2].filter(_).reduce(No,0).toFixed(2)+"",c,u,g;function _(...m){return i[4](i[9],...m)}return{c(){n=Le(e),r=re(),c=Le(s),u=re(),g=O("br")},l(m){n=Me(m,e),r=ie(m),c=Me(m,s),u=ie(m),g=A(m,"BR",{})},m(m,v){fe(m,n,v),fe(m,r,v),fe(m,c,v),fe(m,u,v),fe(m,g,v)},p(m,v){i=m,v&4&&e!==(e=Et[i[9]].symbol+"")&&Xe(n,e),v&4&&s!==(s=i[2].filter(_).reduce(No,0).toFixed(2)+"")&&Xe(c,s)},d(m){m&&(b(n),b(r),b(c),b(u),b(g))}}}function Ro(i,e){let n,r=e[6].description+"",s,c,u,g=Et[e[6].currency].symbol+"",_,m,v=e[6].total.toFixed(2)+"",k,L,U,X,W;return{key:i,first:null,c(){n=O("div"),s=Le(r),c=re(),u=O("strong"),_=Le(g),m=re(),k=Le(v),L=re(),U=O("img"),this.h()},l(z){n=A(z,"DIV",{class:!0});var S=x(n);s=Me(S,r),c=ie(S),u=A(S,"STRONG",{});var D=x(u);_=Me(D,g),m=ie(D),k=Me(D,v),D.forEach(b),S.forEach(b),L=ie(z),U=A(z,"IMG",{class:!0,alt:!0,src:!0}),this.h()},h(){p(n,"class","page-print mb-2"),p(U,"class","img-print"),p(U,"alt",X="receipt with description '"+e[6].description+"'"),Kr(U.src,W=URL.createObjectURL(e[6].imageData))||p(U,"src",W),this.first=n},m(z,S){fe(z,n,S),h(n,s),h(n,c),h(n,u),h(u,_),h(u,m),h(u,k),fe(z,L,S),fe(z,U,S)},p(z,S){e=z,S&4&&r!==(r=e[6].description+"")&&Xe(s,r),S&4&&g!==(g=Et[e[6].currency].symbol+"")&&Xe(_,g),S&4&&v!==(v=e[6].total.toFixed(2)+"")&&Xe(k,v),S&4&&X!==(X="receipt with description '"+e[6].description+"'")&&p(U,"alt",X),S&4&&!Kr(U.src,W=URL.createObjectURL(e[6].imageData))&&p(U,"src",W)},d(z){z&&(b(n),b(L),b(U))}}}function Qu(i){let e,n=i[0]&&Po(i);return{c(){e=O("div"),n&&n.c()},l(r){e=A(r,"DIV",{});var s=x(e);n&&n.l(s),s.forEach(b)},m(r,s){fe(r,e,s),n&&n.m(e,null)},p(r,[s]){r[0]?n?n.p(r,s):(n=Po(r),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},i:kt,o:kt,d(r){r&&b(e),n&&n.d()}}}const No=(i,e)=>i+e.total;function $u(i,e,n){let r,s=kt,c=()=>(s(),s=ur(_,v=>n(2,r=v)),_);i.$$.on_destroy.push(()=>s());let{tripId:u=-1}=e,g,_;u>-1&&Kt.trips.get(u).then(v=>{n(0,g=v),c(n(1,_=zr(()=>Kt.receipts.where({tripId:u}).reverse().sortBy("receiptDate"))))});const m=(v,k)=>k.currency==v;return i.$$set=v=>{"tripId"in v&&n(3,u=v.tripId)},[g,_,r,u,m]}class Xu extends on{constructor(e){super(),sn(this,e,$u,Qu,nn,{tripId:3})}}function ec(i){let e,n,r='<span class="fs-5 fw-bold text-light">Trippin&#39;</span> <a class="btn btn-outline-light" href="#/add">+ Add Trip</a>',s,c,u,g='<span class="fs-5 fw-bold text-light">Trippin&#39;</span> <a class="btn btn-outline-light" href="#/add">+ Add Trip</a>',_,m,v,k,L,U,X,W;v=new hl({props:{tripId:i[3]}});const z=[sc,oc,ac,ic,rc,nc],S=[];function D(Y,P){return Y[4]==="add"?0:Y[4]==="trip"&&Y[3]>-1?1:Y[4]==="update"&&Y[3]>-1?2:Y[4]==="addreceipt"&&Y[3]>-1?3:Y[4]==="editreceipt"&&Y[3]>-1?4:5}return U=D(i),X=S[U]=z[U](i),{c(){e=O("main"),n=O("div"),n.innerHTML=r,s=re(),c=O("div"),u=O("div"),u.innerHTML=g,_=re(),m=O("div"),Ut(v.$$.fragment),k=re(),L=O("div"),X.c(),this.h()},l(Y){e=A(Y,"MAIN",{class:!0});var P=x(e);n=A(P,"DIV",{class:!0,"data-svelte-h":!0}),We(n)!=="svelte-1qzkoji"&&(n.innerHTML=r),s=ie(P),c=A(P,"DIV",{class:!0});var ae=x(c);u=A(ae,"DIV",{class:!0,"data-svelte-h":!0}),We(u)!=="svelte-5pi3yv"&&(u.innerHTML=g),_=ie(ae),m=A(ae,"DIV",{class:!0});var he=x(m);Vt(v.$$.fragment,he),he.forEach(b),ae.forEach(b),k=ie(P),L=A(P,"DIV",{class:!0});var ne=x(L);X.l(ne),ne.forEach(b),P.forEach(b),this.h()},h(){p(n,"class","listTitle listTitleSmall d-flex align-items-center justify-content-between flex-shrink-0 p-3 link-body-emphasis text-decoration-none border-bottom"),p(u,"class","listTitle listTitleLarge d-flex align-items-center justify-content-between flex-shrink-0 p-3 link-body-emphasis text-decoration-none border-bottom"),p(m,"class","list-group list-group-flush border-bottom scrollarea"),p(c,"class","tripList d-flex flex-column align-items-stretch flex-shrink-0 bg-body-tertiary"),p(L,"class","d-flex p-3 w-100"),p(e,"class","d-flex flex-nowrap")},m(Y,P){fe(Y,e,P),h(e,n),h(e,s),h(e,c),h(c,u),h(c,_),h(c,m),qt(v,m,null),h(e,k),h(e,L),S[U].m(L,null),W=!0},p(Y,P){const ae={};P&8&&(ae.tripId=Y[3]),v.$set(ae);let he=U;U=D(Y),U===he?S[U].p(Y,P):(Vn(),lt(S[he],1,1,()=>{S[he]=null}),qn(),X=S[U],X?X.p(Y,P):(X=S[U]=z[U](Y),X.c()),rt(X,1),X.m(L,null))},i(Y){W||(rt(v.$$.fragment,Y),rt(X),W=!0)},o(Y){lt(v.$$.fragment,Y),lt(X),W=!1},d(Y){Y&&b(e),zt(v),S[U].d()}}}function tc(i){let e,n;return e=new Xu({props:{tripId:i[3]}}),{c(){Ut(e.$$.fragment)},l(r){Vt(e.$$.fragment,r)},m(r,s){qt(e,r,s),n=!0},p(r,s){const c={};s&8&&(c.tripId=r[3]),e.$set(c)},i(r){n||(rt(e.$$.fragment,r),n=!0)},o(r){lt(e.$$.fragment,r),n=!1},d(r){zt(e,r)}}}function nc(i){let e,n;return e=new Ju({}),{c(){Ut(e.$$.fragment)},l(r){Vt(e.$$.fragment,r)},m(r,s){qt(e,r,s),n=!0},p:kt,i(r){n||(rt(e.$$.fragment,r),n=!0)},o(r){lt(e.$$.fragment,r),n=!1},d(r){zt(e,r)}}}function rc(i){let e,n;return e=new Yu({props:{receiptId:i[5]}}),{c(){Ut(e.$$.fragment)},l(r){Vt(e.$$.fragment,r)},m(r,s){qt(e,r,s),n=!0},p(r,s){const c={};s&32&&(c.receiptId=r[5]),e.$set(c)},i(r){n||(rt(e.$$.fragment,r),n=!0)},o(r){lt(e.$$.fragment,r),n=!1},d(r){zt(e,r)}}}function ic(i){let e,n;return e=new zu({props:{tripId:i[3]}}),{c(){Ut(e.$$.fragment)},l(r){Vt(e.$$.fragment,r)},m(r,s){qt(e,r,s),n=!0},p(r,s){const c={};s&8&&(c.tripId=r[3]),e.$set(c)},i(r){n||(rt(e.$$.fragment,r),n=!0)},o(r){lt(e.$$.fragment,r),n=!1},d(r){zt(e,r)}}}function ac(i){let e,n;return e=new gl({props:{tripId:i[3]}}),{c(){Ut(e.$$.fragment)},l(r){Vt(e.$$.fragment,r)},m(r,s){qt(e,r,s),n=!0},p(r,s){const c={};s&8&&(c.tripId=r[3]),e.$set(c)},i(r){n||(rt(e.$$.fragment,r),n=!0)},o(r){lt(e.$$.fragment,r),n=!1},d(r){zt(e,r)}}}function oc(i){let e=i[3],n,r,s=Bo(i);return{c(){s.c(),n=Ft()},l(c){s.l(c),n=Ft()},m(c,u){s.m(c,u),fe(c,n,u),r=!0},p(c,u){u&8&&nn(e,e=c[3])?(Vn(),lt(s,1,1,kt),qn(),s=Bo(c),s.c(),rt(s,1),s.m(n.parentNode,n)):s.p(c,u)},i(c){r||(rt(s),r=!0)},o(c){lt(s),r=!1},d(c){c&&b(n),s.d(c)}}}function sc(i){let e,n;return e=new Ys({}),{c(){Ut(e.$$.fragment)},l(r){Vt(e.$$.fragment,r)},m(r,s){qt(e,r,s),n=!0},p:kt,i(r){n||(rt(e.$$.fragment,r),n=!0)},o(r){lt(e.$$.fragment,r),n=!1},d(r){zt(e,r)}}}function Bo(i){let e,n;return e=new cl({props:{tripId:i[3]}}),{c(){Ut(e.$$.fragment)},l(r){Vt(e.$$.fragment,r)},m(r,s){qt(e,r,s),n=!0},p(r,s){const c={};s&8&&(c.tripId=r[3]),e.$set(c)},i(r){n||(rt(e.$$.fragment,r),n=!0)},o(r){lt(e.$$.fragment,r),n=!1},d(r){zt(e,r)}}}function lc(i){let e,n,r,s;const c=[tc,ec],u=[];function g(_,m){return _[4]==="print"&&_[3]>-1?0:1}return e=g(i),n=u[e]=c[e](i),{c(){n.c(),r=Ft()},l(_){n.l(_),r=Ft()},m(_,m){u[e].m(_,m),fe(_,r,m),s=!0},p(_,[m]){let v=e;e=g(_),e===v?u[e].p(_,m):(Vn(),lt(u[v],1,1,()=>{u[v]=null}),qn(),n=u[e],n?n.p(_,m):(n=u[e]=c[e](_),n.c()),rt(n,1),n.m(r.parentNode,r))},i(_){s||(rt(n),s=!0)},o(_){lt(n),s=!1},d(_){_&&b(r),u[e].d(_)}}}function uc(i,e,n){let r,s,c,u,g,_=kt,m=()=>(_(),_=ur(r,Y=>n(3,g=Y)),r),v,k=kt,L=()=>(k(),k=ur(c,Y=>n(4,v=Y)),c),U,X=kt,W=()=>(X(),X=ur(s,Y=>n(5,U=Y)),s),z;cr(i,Ss,Y=>n(6,z=Y)),i.$$.on_destroy.push(()=>_()),i.$$.on_destroy.push(()=>k()),i.$$.on_destroy.push(()=>X());const S=new RegExp("#/(?<route>[a-z]+)(?<tripId>/[0-9]+|$)");function D(){u?(ar(c,v=u.groups.route||"",v),v=="editreceipt"?ar(s,U=parseInt(u.groups.tripId.replace("/","")||"-1"),U):ar(r,g=parseInt(u.groups.tripId.replace("/","")||"-1"),g)):(ar(c,v="",v),ar(r,g=-1,g))}return ks(()=>{D()}),i.$$.update=()=>{i.$$.dirty&64&&(u=S.exec(z.url.hash))},m(n(2,r=Mr(-1))),W(n(1,s=Mr(-1))),L(n(0,c=Mr(""))),[c,s,r,g,v,U,z]}class cc extends on{constructor(e){super(),sn(this,e,uc,lc,nn,{})}}function fc(i){let e,n,r;return n=new cc({}),{c(){e=re(),Ut(n.$$.fragment),this.h()},l(s){Es("svelte-1mxz4jk",document.head).forEach(b),e=ie(s),Vt(n.$$.fragment,s),this.h()},h(){document.title="Trippin'"},m(s,c){fe(s,e,c),qt(n,s,c),r=!0},p:kt,i(s){r||(rt(n.$$.fragment,s),r=!0)},o(s){lt(n.$$.fragment,s),r=!1},d(s){s&&b(e),zt(n,s)}}}class Cc extends on{constructor(e){super(),sn(this,e,null,fc,nn,{})}}export{Cc as component};
