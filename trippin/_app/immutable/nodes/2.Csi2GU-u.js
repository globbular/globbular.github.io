import{C as kn,s as rn,p as Ft,k as pe,n as Dt,i as b,e as T,t as Ne,b as ae,d as C,f as z,h as Be,j as oe,v as p,l as h,S as Ye,T as Br,x as nn,c as Fo,U as Yt,V as Ge,W as Zt,X as Jt,Y as In,u as jo,g as Vo,a as Uo,Z as Mt,_ as qo,$ as ot,m as Xe,a0 as kl,a1 as Ct,a2 as ca,o as cr,w as Ai,E as Vn,a3 as Gn,D as xo,a4 as El,a5 as Dl,a6 as Sl,a7 as ur,a8 as zr,a9 as Kr,aa as Tl,ab as ar,ac as Cl}from"../chunks/scheduler.OewxY0I8.js";import{t as rt,S as ln,i as sn,f as Ln,b as Vt,d as Ut,m as qt,a as ut,e as xt,g as Un,c as qn,h as fa}from"../chunks/index.C1a3JXG5.js";import{w as Mr}from"../chunks/entry.DGBuaVzn.js";import{_ as Al}from"../chunks/preload-helper.D6kgxu3v.js";import{p as Ol}from"../chunks/stores.Db7k8mS-.js";function Ze(i){return(i==null?void 0:i.length)!==void 0?i:Array.from(i)}function Fr(i,e){i.d(1),e.delete(i.key)}function jr(i,e,n,r,l,c,u,m,y,g,v,k){let N=i.length,q=c.length,X=N;const W={};for(;X--;)W[i[X].key]=X;const x=[],S=new Map,D=new Map,se=[];for(X=q;X--;){const ee=k(l,c,X),ie=n(ee);let ge=u.get(ie);ge?se.push(()=>ge.p(ee,e)):(ge=g(ie,ee),ge.c()),S.set(ie,x[X]=ge),ie in W&&D.set(ie,Math.abs(X-W[ie]))}const I=new Set,ne=new Set;function te(ee){rt(ee,1),ee.m(m,v),u.set(ee.key,ee),v=ee.first,q--}for(;N&&q;){const ee=x[q-1],ie=i[N-1],ge=ee.key,ke=ie.key;ee===ie?(v=ee.first,N--,q--):S.has(ke)?!u.has(ge)||I.has(ge)?te(ee):ne.has(ke)?N--:D.get(ge)>D.get(ke)?(ne.add(ge),te(ee)):(I.add(ke),N--):(y(ie,u),N--)}for(;N--;){const ee=i[N];S.has(ee.key)||y(ee,u)}for(;q;)te(x[q-1]);return kn(se),x}function da(i){let e,n,r=("00"+i[0].getHours()).slice(-2)+"",l,c,u,m=("00"+i[0].getMinutes()).slice(-2)+"",y,g,v,k,N=i[1]!=="minute"&&ha(i);return{c(){e=T("div"),n=T("span"),l=Ne(r),c=Ne(`:
		`),u=T("span"),y=Ne(m),g=ae(),N&&N.c(),this.h()},l(q){e=C(q,"DIV",{class:!0,role:!0});var X=z(e);n=C(X,"SPAN",{role:!0,"aria-label":!0,tabindex:!0,contenteditable:!0,inputmode:!0,class:!0});var W=z(n);l=Be(W,r),W.forEach(b),c=Be(X,`:
		`),u=C(X,"SPAN",{role:!0,"aria-label":!0,tabindex:!0,contenteditable:!0,inputmode:!0,class:!0});var x=z(u);y=Be(x,m),x.forEach(b),g=oe(X),N&&N.l(X),X.forEach(b),this.h()},h(){p(n,"role","spinbutton"),p(n,"aria-label","Hours"),p(n,"tabindex","0"),p(n,"contenteditable",""),p(n,"inputmode","numeric"),p(n,"class","svelte-mzlxg7"),p(u,"role","spinbutton"),p(u,"aria-label","Minutes"),p(u,"tabindex","0"),p(u,"contenteditable",""),p(u,"inputmode","numeric"),p(u,"class","svelte-mzlxg7"),p(e,"class","time-picker svelte-mzlxg7"),p(e,"role","none")},m(q,X){pe(q,e,X),h(e,n),h(n,l),i[6](n),h(e,c),h(e,u),h(u,y),i[7](u),h(e,g),N&&N.m(e,null),v||(k=[Ye(n,"keydown",i[3]),Ye(n,"input",i[4]),Ye(n,"focus",Vr),Ye(u,"keydown",i[3]),Ye(u,"input",i[4]),Ye(u,"focus",Vr),Ye(e,"mousedown",i[10])],v=!0)},p(q,X){X&1&&r!==(r=("00"+q[0].getHours()).slice(-2)+"")&&Br(l,r),X&1&&m!==(m=("00"+q[0].getMinutes()).slice(-2)+"")&&Br(y,m),q[1]!=="minute"?N?N.p(q,X):(N=ha(q),N.c(),N.m(e,null)):N&&(N.d(1),N=null)},d(q){q&&b(e),i[6](null),i[7](null),N&&N.d(),v=!1,kn(k)}}}function ha(i){let e,n,r=("00"+i[0].getSeconds()).slice(-2)+"",l,c,u,m,y,g=i[1]!=="second"&&pa(i);return{c(){e=Ne(":"),n=T("span"),l=Ne(r),c=ae(),g&&g.c(),u=Ft(),this.h()},l(v){e=Be(v,":"),n=C(v,"SPAN",{role:!0,"aria-label":!0,tabindex:!0,contenteditable:!0,inputmode:!0,class:!0});var k=z(n);l=Be(k,r),k.forEach(b),c=oe(v),g&&g.l(v),u=Ft(),this.h()},h(){p(n,"role","spinbutton"),p(n,"aria-label","Seconds"),p(n,"tabindex","0"),p(n,"contenteditable",""),p(n,"inputmode","numeric"),p(n,"class","svelte-mzlxg7")},m(v,k){pe(v,e,k),pe(v,n,k),h(n,l),i[8](n),pe(v,c,k),g&&g.m(v,k),pe(v,u,k),m||(y=[Ye(n,"keydown",i[3]),Ye(n,"input",i[4]),Ye(n,"focus",Vr)],m=!0)},p(v,k){k&1&&r!==(r=("00"+v[0].getSeconds()).slice(-2)+"")&&Br(l,r),v[1]!=="second"?g?g.p(v,k):(g=pa(v),g.c(),g.m(u.parentNode,u)):g&&(g.d(1),g=null)},d(v){v&&(b(e),b(n),b(c),b(u)),i[8](null),g&&g.d(v),m=!1,kn(y)}}}function pa(i){let e,n,r=("000"+i[0].getMilliseconds()).slice(-3)+"",l,c,u;return{c(){e=Ne("."),n=T("span"),l=Ne(r),this.h()},l(m){e=Be(m,"."),n=C(m,"SPAN",{role:!0,"aria-label":!0,tabindex:!0,contenteditable:!0,inputmode:!0,class:!0});var y=z(n);l=Be(y,r),y.forEach(b),this.h()},h(){p(n,"role","spinbutton"),p(n,"aria-label","Milliseconds"),p(n,"tabindex","0"),p(n,"contenteditable",""),p(n,"inputmode","numeric"),p(n,"class","svelte-mzlxg7")},m(m,y){pe(m,e,y),pe(m,n,y),h(n,l),i[9](n),c||(u=[Ye(n,"keydown",i[3]),Ye(n,"input",i[4]),Ye(n,"focus",Vr)],c=!0)},p(m,y){y&1&&r!==(r=("000"+m[0].getMilliseconds()).slice(-3)+"")&&Br(l,r)},d(m){m&&(b(e),b(n)),i[9](null),c=!1,kn(u)}}}function Pl(i){let e,n=i[1]&&da(i);return{c(){n&&n.c(),e=Ft()},l(r){n&&n.l(r),e=Ft()},m(r,l){n&&n.m(r,l),pe(r,e,l)},p(r,[l]){r[1]?n?n.p(r,l):(n=da(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:Dt,o:Dt,d(r){r&&b(e),n&&n.d(r)}}}function Rr(i){const e=window.getSelection(),n=document.createRange();n.selectNodeContents(i),e==null||e.removeAllRanges(),e==null||e.addRange(n)}function Il(i,e,n){return n&&i<0?e:n&&i>e?0:Math.max(0,Math.min(e,i))}function bi(i){const e=i.getAttribute("aria-label");if(e==="Hours")return{label:e,len:2,max:23};if(e==="Minutes")return{label:e,len:2,max:59};if(e==="Seconds")return{label:e,len:2,max:59};if(e==="Milliseconds")return{label:e,len:3,max:999};throw new Error("Invalid label "+e)}function wi(i,e){return parseInt(i.replace(/[^\d]/g,"").slice(-e))}function Vr(i){Rr(i.currentTarget)}function Ll(i,e,n){let{browseDate:r}=e,{timePrecision:l}=e,{setTime:c}=e,u=[];function m(S){if(S.key==="ArrowUp"||S.key==="ArrowDown"){const D=y(S.currentTarget),se=S.key==="ArrowUp"?1:-1;v(S.currentTarget,D+se,!0),S.preventDefault(),Rr(S.currentTarget)}else if(S.key==="ArrowLeft"||S.key==="ArrowRight"||":;-,.".includes(S.key)){const D=u.indexOf(S.currentTarget),se=S.key==="ArrowLeft"?-1:1,I=u[D+se];S.preventDefault(),I&&(I.focus(),Rr(I))}}function y(S){const D=bi(S).label;return D==="Hours"?r.getHours():D==="Minutes"?r.getMinutes():D==="Seconds"?r.getSeconds():r.getMilliseconds()}function g(S){const D=("00"+S.getHours()).slice(-2),se=("00"+S.getMinutes()).slice(-2),I=("00"+S.getSeconds()).slice(-2),ne=("000"+S.getMilliseconds()).slice(-3);u[0]&&u[0].innerText!==D&&n(2,u[0].innerText=D,u),u[1]&&u[1].innerText!==se&&n(2,u[1].innerText=se,u),u[2]&&u[2].innerText!==I&&n(2,u[2].innerText=I,u),u[3]&&u[3].innerText!==ne&&n(2,u[3].innerText=ne,u)}function v(S,D,se=!1){const I=bi(S);D=Il(D,I.max,se),I.label==="Hours"?r.setHours(D):I.label==="Minutes"?r.setMinutes(D):I.label==="Seconds"?r.setSeconds(D):I.label==="Milliseconds"&&r.setMilliseconds(D),n(0,r=c(r)),g(r)}function k(S){const D=S,se=bi(D.currentTarget);let I;if(D.inputType==="insertText"){const ne="000"+y(D.currentTarget);I=wi(ne+D.currentTarget.innerText,se.len),I>se.max&&D.data&&(I=wi(D.data,se.len))}else I=wi("000"+D.currentTarget.innerText,se.len);v(D.currentTarget,I),Rr(D.currentTarget)}function N(S){nn[S?"unshift":"push"](()=>{u[0]=S,n(2,u)})}function q(S){nn[S?"unshift":"push"](()=>{u[1]=S,n(2,u)})}function X(S){nn[S?"unshift":"push"](()=>{u[2]=S,n(2,u)})}function W(S){nn[S?"unshift":"push"](()=>{u[3]=S,n(2,u)})}const x=S=>{S.target instanceof HTMLElement&&S.target.tagName==="SPAN"&&(S.target.focus(),S.preventDefault())};return i.$$set=S=>{"browseDate"in S&&n(0,r=S.browseDate),"timePrecision"in S&&n(1,l=S.timePrecision),"setTime"in S&&n(5,c=S.setTime)},i.$$.update=()=>{i.$$.dirty&1&&g(r)},[r,l,u,m,k,c,N,q,X,W,x]}class Ml extends ln{constructor(e){super(),sn(this,e,Ll,Pl,rn,{browseDate:0,timePrecision:1,setTime:5})}}function Rl(i){return i%4===0&&i%100!==0||i%400===0}function fr(i,e){return[31,Rl(i)?29:28,31,30,31,30,31,31,30,31,30,31][e]}function ma(i,e){let n="";if(i)for(const r of e)typeof r=="string"?n+=r:n+=r.toString(i);return n}function ki(i,e){const n=fr(i,e),r=[];for(let l=0;l<n;l++)r.push({year:i,month:e,number:l+1});return r}function Nl(i,e){const n=i.getFullYear(),r=i.getMonth(),l=new Date(n,r,1).getDay();let c=[];const u=(l-e+7)%7;if(u>0){let v=r-1,k=n;v===-1&&(v=11,k=n-1),c=ki(k,v).slice(-u)}c=c.concat(ki(n,r));let m=r+1,y=n;m===12&&(m=0,y=n+1);const g=42-c.length;return c=c.concat(ki(y,m).slice(0,g)),c}function Bl(){return{weekdays:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekStartsOn:1}}function zo(i){const e=Bl();return typeof i.weekStartsOn=="number"&&(e.weekStartsOn=i.weekStartsOn),i.months&&(e.months=i.months),i.shortMonths&&(e.shortMonths=i.shortMonths),i.weekdays&&(e.weekdays=i.weekdays),e}function ga(i,e,n){const r=i.slice();return r[36]=e[n],r[38]=n,r}function va(i,e,n){const r=i.slice();return r[39]=e[n],r}function _a(i,e,n){const r=i.slice();return r[36]=e[n],r[43]=n,r}function ya(i,e,n){const r=i.slice();return r[44]=e[n],r}function ba(i,e,n){const r=i.slice();return r[44]=e[n],r}function wa(i,e,n){const r=i.slice();return r[49]=e[n],r[43]=n,r}function ka(i,e,n){const r=i.slice();return r[49]=e[n],r[43]=n,r}function Ea(i){let e,n=i[49]+"",r,l;return{c(){e=T("option"),r=Ne(n),this.h()},l(c){e=C(c,"OPTION",{});var u=z(e);r=Be(u,n),u.forEach(b),this.h()},h(){e.disabled=l=new Date(i[9],i[43],fr(i[9],i[43]),23,59,59,999)<i[2]||new Date(i[9],i[43])>i[3],e.__value=i[43],ot(e,e.__value)},m(c,u){pe(c,e,u),h(e,r)},p(c,u){u[0]&32&&n!==(n=c[49]+"")&&Xe(r,n),u[0]&588&&l!==(l=new Date(c[9],c[43],fr(c[9],c[43]),23,59,59,999)<c[2]||new Date(c[9],c[43])>c[3])&&(e.disabled=l)},d(c){c&&b(e)}}}function Da(i){let e,n=i[49]+"",r,l;return{c(){e=T("option"),r=Ne(n),this.h()},l(c){e=C(c,"OPTION",{});var u=z(e);r=Be(u,n),u.forEach(b),this.h()},h(){e.__value=i[43],ot(e,e.__value),e.selected=l=i[43]===i[8]},m(c,u){pe(c,e,u),h(e,r)},p(c,u){u[0]&32&&n!==(n=c[49]+"")&&Xe(r,n),u[0]&256&&l!==(l=c[43]===c[8])&&(e.selected=l)},d(c){c&&b(e)}}}function Sa(i){let e,n=i[44]+"",r,l;return{c(){e=T("option"),r=Ne(n),this.h()},l(c){e=C(c,"OPTION",{});var u=z(e);r=Be(u,n),u.forEach(b),this.h()},h(){e.__value=l=i[44],ot(e,e.__value)},m(c,u){pe(c,e,u),h(e,r)},p(c,u){u[0]&64&&n!==(n=c[44]+"")&&Xe(r,n),u[0]&64&&l!==(l=c[44])&&(e.__value=l,ot(e,e.__value))},d(c){c&&b(e)}}}function Ta(i){let e,n=i[44]+"",r,l,c;return{c(){e=T("option"),r=Ne(n),this.h()},l(u){e=C(u,"OPTION",{});var m=z(e);r=Be(m,n),m.forEach(b),this.h()},h(){e.__value=l=i[44],ot(e,e.__value),e.selected=c=i[44]===i[4].getFullYear()},m(u,m){pe(u,e,m),h(e,r)},p(u,m){m[0]&64&&n!==(n=u[44]+"")&&Xe(r,n),m[0]&64&&l!==(l=u[44])&&(e.__value=l,ot(e,e.__value)),m[0]&80&&c!==(c=u[44]===u[4].getFullYear())&&(e.selected=c)},d(u){u&&b(e)}}}function Kl(i){let e,n=i[5].weekdays[i[5].weekStartsOn+i[43]-7]+"",r;return{c(){e=T("div"),r=Ne(n),this.h()},l(l){e=C(l,"DIV",{class:!0});var c=z(e);r=Be(c,n),c.forEach(b),this.h()},h(){p(e,"class","header-cell svelte-w239uu")},m(l,c){pe(l,e,c),h(e,r)},p(l,c){c[0]&32&&n!==(n=l[5].weekdays[l[5].weekStartsOn+l[43]-7]+"")&&Xe(r,n)},d(l){l&&b(e)}}}function Fl(i){let e,n=i[5].weekdays[i[5].weekStartsOn+i[43]]+"",r;return{c(){e=T("div"),r=Ne(n),this.h()},l(l){e=C(l,"DIV",{class:!0});var c=z(e);r=Be(c,n),c.forEach(b),this.h()},h(){p(e,"class","header-cell svelte-w239uu")},m(l,c){pe(l,e,c),h(e,r)},p(l,c){c[0]&32&&n!==(n=l[5].weekdays[l[5].weekStartsOn+l[43]]+"")&&Xe(r,n)},d(l){l&&b(e)}}}function Ca(i){let e;function n(c,u){return c[43]+c[5].weekStartsOn<7?Fl:Kl}let r=n(i),l=r(i);return{c(){l.c(),e=Ft()},l(c){l.l(c),e=Ft()},m(c,u){l.m(c,u),pe(c,e,u)},p(c,u){r===(r=n(c))&&l?l.p(c,u):(l.d(1),l=r(c),l&&(l.c(),l.m(e.parentNode,e)))},d(c){c&&b(e),l.d(c)}}}function Aa(i){let e,n,r=i[39].number+"",l,c,u;function m(){return i[27](i[39])}return{c(){e=T("div"),n=T("span"),l=Ne(r),this.h()},l(y){e=C(y,"DIV",{class:!0});var g=z(e);n=C(g,"SPAN",{class:!0});var v=z(n);l=Be(v,r),v.forEach(b),g.forEach(b),this.h()},h(){p(n,"class","svelte-w239uu"),p(e,"class","cell svelte-w239uu"),Ct(e,"disabled",!Oi(i[39],i[2],i[3])),Ct(e,"selected",i[0]&&i[39].year===i[0].getFullYear()&&i[39].month===i[0].getMonth()&&i[39].number===i[0].getDate()),Ct(e,"today",i[39].year===i[11].getFullYear()&&i[39].month===i[11].getMonth()&&i[39].number===i[11].getDate()),Ct(e,"other-month",i[39].month!==i[8])},m(y,g){pe(y,e,g),h(e,n),h(n,l),c||(u=Ye(e,"click",m),c=!0)},p(y,g){i=y,g[0]&128&&r!==(r=i[39].number+"")&&Xe(l,r),g[0]&140&&Ct(e,"disabled",!Oi(i[39],i[2],i[3])),g[0]&129&&Ct(e,"selected",i[0]&&i[39].year===i[0].getFullYear()&&i[39].month===i[0].getMonth()&&i[39].number===i[0].getDate()),g[0]&2176&&Ct(e,"today",i[39].year===i[11].getFullYear()&&i[39].month===i[11].getMonth()&&i[39].number===i[11].getDate()),g[0]&384&&Ct(e,"other-month",i[39].month!==i[8])},d(y){y&&b(e),c=!1,u()}}}function Oa(i){let e,n=Ze(i[7].slice(i[38]*7,i[38]*7+7)),r=[];for(let l=0;l<n.length;l+=1)r[l]=Aa(va(i,n,l));return{c(){e=T("div");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=C(l,"DIV",{class:!0});var c=z(e);for(let u=0;u<r.length;u+=1)r[u].l(c);c.forEach(b),this.h()},h(){p(e,"class","week svelte-w239uu")},m(l,c){pe(l,e,c);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null)},p(l,c){if(c[0]&18829){n=Ze(l[7].slice(l[38]*7,l[38]*7+7));let u;for(u=0;u<n.length;u+=1){const m=va(l,n,u);r[u]?r[u].p(m,c):(r[u]=Aa(m),r[u].c(),r[u].m(e,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=n.length}},d(l){l&&b(e),Mt(r,l)}}}function jl(i){let e,n,r,l,c='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="svelte-w239uu"><path d="M5 3l3.057-3 11.943 12-11.943 12-3.057-3 9-9z" transform="rotate(180, 12, 12)"></path></svg>',u,m,y,g,v,k,N,q,X,W,x,S,D,se,I,ne,te,ee,ie='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="svelte-w239uu"><path d="M5 3l3.057-3 11.943 12-11.943 12-3.057-3 9-9z"></path></svg>',ge,ke,Oe,be,le,_e,Re,Le,ue,Te,O=Ze(i[5].months),F=[];for(let L=0;L<O.length;L+=1)F[L]=Ea(ka(i,O,L));let Q=Ze(i[5].months),me=[];for(let L=0;L<Q.length;L+=1)me[L]=Da(wa(i,Q,L));let w=Ze(i[6]),Y=[];for(let L=0;L<w.length;L+=1)Y[L]=Sa(ba(i,w,L));let Ce=Ze(i[6]),he=[];for(let L=0;L<Ce.length;L+=1)he[L]=Ta(ya(i,Ce,L));let qe=Ze(Array(7)),Ie=[];for(let L=0;L<qe.length;L+=1)Ie[L]=Ca(_a(i,qe,L));let ye=Ze(Array(6)),G=[];for(let L=0;L<ye.length;L+=1)G[L]=Oa(ga(i,ye,L));function ce(L){i[28](L)}let Ee={timePrecision:i[1],setTime:i[10]};i[4]!==void 0&&(Ee.browseDate=i[4]),le=new Ml({props:Ee}),nn.push(()=>Ln(le,"browseDate",ce));const xe=i[21].default,We=Fo(xe,i,i[20],null);return{c(){e=T("div"),n=T("div"),r=T("div"),l=T("button"),l.innerHTML=c,u=ae(),m=T("div"),y=T("select");for(let L=0;L<F.length;L+=1)F[L].c();g=ae(),v=T("select");for(let L=0;L<me.length;L+=1)me[L].c();k=ae(),N=Yt("svg"),q=Yt("path"),X=ae(),W=T("div"),x=T("select");for(let L=0;L<Y.length;L+=1)Y[L].c();S=ae(),D=T("select");for(let L=0;L<he.length;L+=1)he[L].c();se=ae(),I=Yt("svg"),ne=Yt("path"),te=ae(),ee=T("button"),ee.innerHTML=ie,ge=ae(),ke=T("div");for(let L=0;L<Ie.length;L+=1)Ie[L].c();Oe=ae();for(let L=0;L<G.length;L+=1)G[L].c();be=ae(),Vt(le.$$.fragment),Re=ae(),We&&We.c(),this.h()},l(L){e=C(L,"DIV",{class:!0,tabindex:!0});var Se=z(e);n=C(Se,"DIV",{class:!0,tabindex:!0});var we=z(n);r=C(we,"DIV",{class:!0});var fe=z(r);l=C(fe,"BUTTON",{type:!0,class:!0,tabindex:!0,"data-svelte-h":!0}),Ge(l)!=="svelte-t4cock"&&(l.innerHTML=c),u=oe(fe),m=C(fe,"DIV",{class:!0});var He=z(m);y=C(He,"SELECT",{class:!0});var it=z(y);for(let Je=0;Je<F.length;Je+=1)F[Je].l(it);it.forEach(b),g=oe(He),v=C(He,"SELECT",{class:!0,tabindex:!0});var _t=z(v);for(let Je=0;Je<me.length;Je+=1)me[Je].l(_t);_t.forEach(b),k=oe(He),N=Zt(He,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,class:!0});var yt=z(N);q=Zt(yt,"path",{d:!0,transform:!0}),z(q).forEach(b),yt.forEach(b),He.forEach(b),X=oe(fe),W=C(fe,"DIV",{class:!0});var ct=z(W);x=C(ct,"SELECT",{class:!0});var pt=z(x);for(let Je=0;Je<Y.length;Je+=1)Y[Je].l(pt);pt.forEach(b),S=oe(ct),D=C(ct,"SELECT",{class:!0,tabindex:!0});var At=z(D);for(let Je=0;Je<he.length;Je+=1)he[Je].l(At);At.forEach(b),se=oe(ct),I=Zt(ct,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,class:!0});var lt=z(I);ne=Zt(lt,"path",{d:!0,transform:!0}),z(ne).forEach(b),lt.forEach(b),ct.forEach(b),te=oe(fe),ee=C(fe,"BUTTON",{type:!0,class:!0,tabindex:!0,"data-svelte-h":!0}),Ge(ee)!=="svelte-1a006lp"&&(ee.innerHTML=ie),fe.forEach(b),ge=oe(we),ke=C(we,"DIV",{class:!0});var bt=z(ke);for(let Je=0;Je<Ie.length;Je+=1)Ie[Je].l(bt);bt.forEach(b),Oe=oe(we);for(let Je=0;Je<G.length;Je+=1)G[Je].l(we);be=oe(we),Ut(le.$$.fragment,we),Re=oe(we),We&&We.l(we),we.forEach(b),Se.forEach(b),this.h()},h(){p(l,"type","button"),p(l,"class","page-button svelte-w239uu"),p(l,"tabindex","-1"),p(y,"class","svelte-w239uu"),p(v,"class","dummy-select svelte-w239uu"),p(v,"tabindex","-1"),p(q,"d","M6 0l12 12-12 12z"),p(q,"transform","rotate(90, 12, 12)"),p(N,"xmlns","http://www.w3.org/2000/svg"),p(N,"width","24"),p(N,"height","24"),p(N,"viewBox","0 0 24 24"),p(N,"class","svelte-w239uu"),p(m,"class","dropdown month svelte-w239uu"),p(x,"class","svelte-w239uu"),p(D,"class","dummy-select svelte-w239uu"),p(D,"tabindex","-1"),p(ne,"d","M6 0l12 12-12 12z"),p(ne,"transform","rotate(90, 12, 12)"),p(I,"xmlns","http://www.w3.org/2000/svg"),p(I,"width","24"),p(I,"height","24"),p(I,"viewBox","0 0 24 24"),p(I,"class","svelte-w239uu"),p(W,"class","dropdown year svelte-w239uu"),p(ee,"type","button"),p(ee,"class","page-button svelte-w239uu"),p(ee,"tabindex","-1"),p(r,"class","top svelte-w239uu"),p(ke,"class","header svelte-w239uu"),p(n,"class","tab-container svelte-w239uu"),p(n,"tabindex","-1"),p(e,"class","date-time-picker svelte-w239uu"),p(e,"tabindex","0")},m(L,Se){pe(L,e,Se),h(e,n),h(n,r),h(r,l),h(r,u),h(r,m),h(m,y);for(let we=0;we<F.length;we+=1)F[we]&&F[we].m(y,null);Jt(y,i[8]),h(m,g),h(m,v);for(let we=0;we<me.length;we+=1)me[we]&&me[we].m(v,null);h(m,k),h(m,N),h(N,q),h(r,X),h(r,W),h(W,x);for(let we=0;we<Y.length;we+=1)Y[we]&&Y[we].m(x,null);Jt(x,i[9]),h(W,S),h(W,D);for(let we=0;we<he.length;we+=1)he[we]&&he[we].m(D,null);h(W,se),h(W,I),h(I,ne),h(r,te),h(r,ee),h(n,ge),h(n,ke);for(let we=0;we<Ie.length;we+=1)Ie[we]&&Ie[we].m(ke,null);h(n,Oe);for(let we=0;we<G.length;we+=1)G[we]&&G[we].m(n,null);h(n,be),qt(le,n,null),h(n,Re),We&&We.m(n,null),Le=!0,ue||(Te=[Ye(l,"click",i[23]),Ye(y,"keydown",i[16]),Ye(y,"input",i[24]),Ye(x,"input",i[25]),Ye(x,"keydown",i[15]),Ye(ee,"click",i[26]),Ye(e,"focusout",i[22]),Ye(e,"keydown",i[17])],ue=!0)},p(L,Se){if(Se[0]&556){O=Ze(L[5].months);let fe;for(fe=0;fe<O.length;fe+=1){const He=ka(L,O,fe);F[fe]?F[fe].p(He,Se):(F[fe]=Ea(He),F[fe].c(),F[fe].m(y,null))}for(;fe<F.length;fe+=1)F[fe].d(1);F.length=O.length}if((!Le||Se[0]&256)&&Jt(y,L[8]),Se[0]&288){Q=Ze(L[5].months);let fe;for(fe=0;fe<Q.length;fe+=1){const He=wa(L,Q,fe);me[fe]?me[fe].p(He,Se):(me[fe]=Da(He),me[fe].c(),me[fe].m(v,null))}for(;fe<me.length;fe+=1)me[fe].d(1);me.length=Q.length}if(Se[0]&64){w=Ze(L[6]);let fe;for(fe=0;fe<w.length;fe+=1){const He=ba(L,w,fe);Y[fe]?Y[fe].p(He,Se):(Y[fe]=Sa(He),Y[fe].c(),Y[fe].m(x,null))}for(;fe<Y.length;fe+=1)Y[fe].d(1);Y.length=w.length}if((!Le||Se[0]&576)&&Jt(x,L[9]),Se[0]&80){Ce=Ze(L[6]);let fe;for(fe=0;fe<Ce.length;fe+=1){const He=ya(L,Ce,fe);he[fe]?he[fe].p(He,Se):(he[fe]=Ta(He),he[fe].c(),he[fe].m(D,null))}for(;fe<he.length;fe+=1)he[fe].d(1);he.length=Ce.length}if(Se[0]&32){qe=Ze(Array(7));let fe;for(fe=0;fe<qe.length;fe+=1){const He=_a(L,qe,fe);Ie[fe]?Ie[fe].p(He,Se):(Ie[fe]=Ca(He),Ie[fe].c(),Ie[fe].m(ke,null))}for(;fe<Ie.length;fe+=1)Ie[fe].d(1);Ie.length=qe.length}if(Se[0]&18829){ye=Ze(Array(6));let fe;for(fe=0;fe<ye.length;fe+=1){const He=ga(L,ye,fe);G[fe]?G[fe].p(He,Se):(G[fe]=Oa(He),G[fe].c(),G[fe].m(n,be))}for(;fe<G.length;fe+=1)G[fe].d(1);G.length=ye.length}const we={};Se[0]&2&&(we.timePrecision=L[1]),!_e&&Se[0]&16&&(_e=!0,we.browseDate=L[4],In(()=>_e=!1)),le.$set(we),We&&We.p&&(!Le||Se[0]&1048576)&&jo(We,xe,L,L[20],Le?Uo(xe,L[20],Se,null):Vo(L[20]),null)},i(L){Le||(rt(le.$$.fragment,L),rt(We,L),Le=!0)},o(L){ut(le.$$.fragment,L),ut(We,L),Le=!1},d(L){L&&b(e),Mt(F,L),Mt(me,L),Mt(Y,L),Mt(he,L),Mt(Ie,L),Mt(G,L),xt(le),We&&We.d(L),ue=!1,kn(Te)}}}function wn(i){return new Date(i.getTime())}function Ur(i,e,n){return i>n?wn(n):i<e?wn(e):wn(i)}function Ei(i,e,n){const r=Ur(i,e,n);return r.getTime()!==i.getTime()&&(i=new Date(r.getFullYear(),r.getMonth(),r.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()),i=Ur(i,e,n)),i}function Pa(i,e){let n=[];for(let r=i.getFullYear();r<=e.getFullYear();r++)n.push(r);return n}function Oi(i,e,n){const r=new Date(i.year,i.month,i.number),l=new Date(e.getFullYear(),e.getMonth(),e.getDate()),c=new Date(n.getFullYear(),n.getMonth(),n.getDate());return r>=l&&r<=c}function Vl(i,e,n){let r,l,c,u,{$$slots:m={},$$scope:y}=e;const g=qo();let{value:v=null}=e;function k(w){w.getTime()!==(v==null?void 0:v.getTime())&&(n(4,I=Ur(w,D,se)),n(0,v=wn(I)))}function N(w){w.getTime()!==(v==null?void 0:v.getTime())&&(n(4,I=Ei(w,D,se)),n(0,v=wn(I)))}function q(w){n(4,I=Ei(w,D,se)),!ie&&v&&k(I)}function X(w){return n(4,I=Ur(w,D,se)),v&&k(I),I}const W=new Date,x=new Date;let{timePrecision:S=null}=e,{min:D=new Date(x.getFullYear()-20,0,1)}=e,{max:se=new Date(x.getFullYear(),11,31,23,59,59,999)}=e,I=wn(v||Ei(x,D,se));function ne(w){I.getTime()!==(w==null?void 0:w.getTime())&&n(4,I=w?wn(w):I)}let te=Pa(D,se),{locale:ee={}}=e,{browseWithoutSelecting:ie=!1}=e;function ge(w){I.setFullYear(w),q(I)}function ke(w){let Y=I.getFullYear();w===12?(w=0,Y++):w===-1&&(w=11,Y--);const Ce=fr(Y,w),he=Math.min(I.getDate(),Ce);q(new Date(Y,w,he,I.getHours(),I.getMinutes(),I.getSeconds(),I.getMilliseconds()))}function Oe(w){Oi(w,D,se)&&(I.setFullYear(0),I.setMonth(0),I.setDate(1),I.setFullYear(w.year),I.setMonth(w.month),I.setDate(w.number),N(I),g("select",wn(I)))}function be(w){if(w.shiftKey&&w.key==="ArrowUp")ge(I.getFullYear()-1);else if(w.shiftKey&&w.key==="ArrowDown")ge(I.getFullYear()+1);else if(w.shiftKey&&w.key==="ArrowLeft")ke(I.getMonth()-1);else if(w.shiftKey&&w.key==="ArrowRight")ke(I.getMonth()+1);else return!1;return w.preventDefault(),!0}function le(w){if(w.shiftKey||w.altKey){be(w);return}else if(w.key==="ArrowUp")ge(I.getFullYear()-1);else if(w.key==="ArrowDown")ge(I.getFullYear()+1);else if(w.key==="ArrowLeft")ke(I.getMonth()-1);else if(w.key==="ArrowRight")ke(I.getMonth()+1);else{be(w);return}w.preventDefault()}function _e(w){if(w.shiftKey||w.altKey){be(w);return}else if(w.key==="ArrowUp"||w.key==="ArrowLeft")ke(I.getMonth()-1);else if(w.key==="ArrowDown"||w.key==="ArrowRight")ke(I.getMonth()+1);else{be(w);return}w.preventDefault()}function Re(w){var Ce,he;let Y=w.shiftKey||w.altKey;if(!(((Ce=w.target)==null?void 0:Ce.tagName)==="SELECT"||((he=w.target)==null?void 0:he.tagName)==="SPAN")){if(Y){be(w);return}else if(w.key==="ArrowUp")I.setDate(I.getDate()-7),N(I);else if(w.key==="ArrowDown")I.setDate(I.getDate()+7),N(I);else if(w.key==="ArrowLeft")I.setDate(I.getDate()-1),N(I);else if(w.key==="ArrowRight")I.setDate(I.getDate()+1),N(I);else if(w.key==="Enter")k(I),g("select",wn(I));else return;w.preventDefault()}}function Le(w){kl.call(this,i,w)}const ue=()=>ke(I.getMonth()-1),Te=w=>ke(parseInt(w.currentTarget.value)),O=w=>ge(parseInt(w.currentTarget.value)),F=()=>ke(I.getMonth()+1),Q=w=>Oe(w);function me(w){I=w,n(4,I)}return i.$$set=w=>{"value"in w&&n(0,v=w.value),"timePrecision"in w&&n(1,S=w.timePrecision),"min"in w&&n(2,D=w.min),"max"in w&&n(3,se=w.max),"locale"in w&&n(18,ee=w.locale),"browseWithoutSelecting"in w&&n(19,ie=w.browseWithoutSelecting),"$$scope"in w&&n(20,y=w.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&13&&(v&&v>se?k(se):v&&v<D&&k(D)),i.$$.dirty[0]&1&&ne(v),i.$$.dirty[0]&12&&n(6,te=Pa(D,se)),i.$$.dirty[0]&262144&&n(5,r=zo(ee)),i.$$.dirty[0]&16&&n(9,l=I.getFullYear()),i.$$.dirty[0]&16&&n(8,c=I.getMonth()),i.$$.dirty[0]&48&&n(7,u=Nl(I,r.weekStartsOn))},[v,S,D,se,I,r,te,u,c,l,X,W,ge,ke,Oe,le,_e,Re,ee,ie,y,m,Le,ue,Te,O,F,Q,me]}class Ul extends ln{constructor(e){super(),sn(this,e,Vl,jl,rn,{value:0,timePrecision:1,min:2,max:3,locale:18,browseWithoutSelecting:19},null,[-1,-1])}}function ql(i){return i<.5?4*i*i*i:.5*Math.pow(2*i-2,3)+1}function xl(i){const e=i-1;return e*e*e+1}function zl(i,{delay:e=0,duration:n=400,easing:r=xl,x:l=0,y:c=0,opacity:u=0}={}){const m=getComputedStyle(i),y=+m.opacity,g=m.transform==="none"?"":m.transform,v=y*(1-u),[k,N]=ca(l),[q,X]=ca(c);return{delay:e,duration:n,easing:r,css:(W,x)=>`
			transform: ${g} translate(${(1-W)*k}${N}, ${(1-W)*q}${X});
			opacity: ${y-v*x}`}}function Ia(i,e,n){let r="",l=!0;n=n||new Date(2020,0,1,0,0,0,0);let c=n.getFullYear(),u=n.getMonth(),m=n.getDate(),y=n.getHours(),g=n.getMinutes(),v=n.getSeconds();const k=n.getMilliseconds();function N(S){for(let D=0;D<S.length;D++)if(i.startsWith(S[D]))i=i.slice(1);else{l=!1,i.length===0&&(r=S.slice(D));return}}function q(S,D,se){const I=i.match(S);if(I!=null&&I[0]){i=i.slice(I[0].length);const ne=parseInt(I[0]);return ne>se||ne<D?(l=!1,null):ne}else return l=!1,null}function X(S){const D=S.findIndex(se=>se.toLowerCase()===i.slice(0,se.length).toLowerCase());return D>=0?(i=i.slice(S[D].length),D):(l=!1,null)}function W(S){if(typeof S=="string")N(S);else if(S.id==="yy"){const D=q(/^[0-9]{2}/,0,99);D!==null&&(c=2e3+D)}else if(S.id==="yyyy"){const D=q(/^[0-9]{4}/,0,9999);D!==null&&(c=D)}else if(S.id==="MM"){const D=q(/^[0-9]{2}/,1,12);D!==null&&(u=D-1)}else if(S.id==="MMM"){const D=X(S.allowedValues||[]);D!==null&&(u=D)}else if(S.id==="dd"){const D=q(/^[0-9]{2}/,1,31);D!==null&&(m=D)}else if(S.id==="HH"){const D=q(/^[0-9]{2}/,0,23);D!==null&&(y=D)}else if(S.id==="mm"){const D=q(/^[0-9]{2}/,0,59);D!==null&&(g=D)}else if(S.id==="ss"){const D=q(/^[0-9]{2}/,0,59);D!==null&&(v=D)}}for(const S of e)if(W(S),!l)break;const x=fr(c,u);return m>x&&(l=!1),{date:l?new Date(c,u,m,y,g,v,k):null,missingPunctuation:r}}function or(i){return("0"+i.toString()).slice(-2)}function Hl(i,e){if(i.startsWith("yyyy"))return{id:"yyyy",toString:n=>n.getFullYear().toString()};if(i.startsWith("yy"))return{id:"yy",toString:n=>n.getFullYear().toString().slice(-2)};if(i.startsWith("MMM"))return{id:"MMM",allowedValues:e.shortMonths,toString:n=>e.shortMonths[n.getMonth()]};if(i.startsWith("MM"))return{id:"MM",toString:n=>or(n.getMonth()+1)};if(i.startsWith("dd"))return{id:"dd",toString:n=>or(n.getDate())};if(i.startsWith("HH"))return{id:"HH",toString:n=>or(n.getHours())};if(i.startsWith("mm"))return{id:"mm",toString:n=>or(n.getMinutes())};if(i.startsWith("ss"))return{id:"ss",toString:n=>or(n.getSeconds())}}function La(i,e={}){const n=zo(e),r=[];for(;i.length>0;){const l=Hl(i,n);l?(r.push(l),i=i.slice(l.id.length)):typeof r[r.length-1]=="string"?(r[r.length-1]+=i[0],i=i.slice(1)):(r.push(i[0]),i=i.slice(1))}return r}function Ma(i){let e,n,r,l,c=`${i[18]}px`,u;function m(g){i[34](g)}let y={min:i[3],max:i[4],locale:i[10],browseWithoutSelecting:i[11],timePrecision:i[12],$$slots:{default:[Wl]},$$scope:{ctx:i}};return i[14]!==void 0&&(y.value=i[14]),n=new Ul({props:y}),nn.push(()=>Ln(n,"value",m)),n.$on("focusout",i[21]),n.$on("select",i[23]),{c(){e=T("div"),Vt(n.$$.fragment),this.h()},l(g){e=C(g,"DIV",{class:!0});var v=z(e);Ut(n.$$.fragment,v),v.forEach(b),this.h()},h(){p(e,"class","picker svelte-1vabmef"),Ct(e,"visible",i[2]),Ct(e,"above",i[17]),Ai(e,"--picker-left-position",c)},m(g,v){pe(g,e,v),qt(n,e,null),i[35](e),u=!0},p(g,v){const k={};v[0]&8&&(k.min=g[3]),v[0]&16&&(k.max=g[4]),v[0]&1024&&(k.locale=g[10]),v[0]&2048&&(k.browseWithoutSelecting=g[11]),v[0]&4096&&(k.timePrecision=g[12]),v[1]&32&&(k.$$scope={dirty:v,ctx:g}),!r&&v[0]&16384&&(r=!0,k.value=g[14],In(()=>r=!1)),n.$set(k),(!u||v[0]&4)&&Ct(e,"visible",g[2]),(!u||v[0]&131072)&&Ct(e,"above",g[17]),v[0]&262144&&c!==(c=`${g[18]}px`)&&Ai(e,"--picker-left-position",c)},i(g){u||(rt(n.$$.fragment,g),g&&Vn(()=>{u&&(l||(l=fa(e,i[24],{},!0)),l.run(1))}),u=!0)},o(g){ut(n.$$.fragment,g),g&&(l||(l=fa(e,i[24],{},!1)),l.run(0)),u=!1},d(g){g&&b(e),xt(n),i[35](null),g&&l&&l.end()}}}function Wl(i){let e;const n=i[29].default,r=Fo(n,i,i[36],null);return{c(){r&&r.c()},l(l){r&&r.l(l)},m(l,c){r&&r.m(l,c),e=!0},p(l,c){r&&r.p&&(!e||c[1]&32)&&jo(r,n,l,l[36],e?Uo(n,l[36],c,null):Vo(l[36]),null)},i(l){e||(rt(r,l),e=!0)},o(l){ut(r,l),e=!1},d(l){r&&r.d(l)}}}function Gl(i){let e,n,r,l,c,u,m,y=i[2]&&!i[7]&&Ma(i);return{c(){e=T("div"),n=T("input"),r=ae(),y&&y.c(),this.h()},l(g){e=C(g,"DIV",{class:!0});var v=z(e);n=C(v,"INPUT",{type:!0,autocomplete:!0,id:!0,placeholder:!0,class:!0}),r=oe(v),y&&y.l(v),v.forEach(b),this.h()},h(){p(n,"type","text"),p(n,"autocomplete","off"),n.value=i[0],p(n,"id",i[5]),p(n,"placeholder",i[6]),n.disabled=i[7],n.required=i[8],p(n,"class","svelte-1vabmef"),Ct(n,"invalid",!i[1]),p(e,"class",l="date-time-field "+i[9]+" svelte-1vabmef")},m(g,v){pe(g,e,v),h(e,n),i[30](n),h(e,r),y&&y.m(e,null),c=!0,u||(m=[Ye(n,"focus",i[31]),Ye(n,"mousedown",i[32]),Ye(n,"input",i[33]),Ye(e,"focusout",i[21]),Ye(e,"keydown",i[22])],u=!0)},p(g,v){(!c||v[0]&1&&n.value!==g[0])&&(n.value=g[0]),(!c||v[0]&32)&&p(n,"id",g[5]),(!c||v[0]&64)&&p(n,"placeholder",g[6]),(!c||v[0]&128)&&(n.disabled=g[7]),(!c||v[0]&256)&&(n.required=g[8]),(!c||v[0]&2)&&Ct(n,"invalid",!g[1]),g[2]&&!g[7]?y?(y.p(g,v),v[0]&132&&rt(y,1)):(y=Ma(g),y.c(),rt(y,1),y.m(e,null)):y&&(Un(),ut(y,1,1,()=>{y=null}),qn()),(!c||v[0]&512&&l!==(l="date-time-field "+g[9]+" svelte-1vabmef"))&&p(e,"class",l)},i(g){c||(rt(y),c=!0)},o(g){ut(y),c=!1},d(g){g&&b(e),i[30](null),y&&y.d(),u=!1,kn(m)}}}function Yl(i,e,n){let r,l,{$$slots:c={},$$scope:u}=e;const m=qo(),y=new Date,g=Mr(null);cr(i,g,G=>n(37,l=G));const v={subscribe:g.subscribe,set:G=>{G==null?(g.set(null),n(25,k=G)):G.getTime()!==(l==null?void 0:l.getTime())&&(g.set(G),n(25,k=G))}};cr(i,v,G=>n(14,r=G));let{value:k=null}=e,{min:N=new Date(y.getFullYear()-20,0,1)}=e,{max:q=new Date(y.getFullYear(),11,31,23,59,59,999)}=e,{id:X=null}=e,{placeholder:W="2020-12-31 23:00:00"}=e,{valid:x=!0}=e,{disabled:S=!1}=e,{required:D=!1}=e,{class:se=""}=e,{locale:I={}}=e,{format:ne="yyyy-MM-dd HH:mm:ss"}=e,te=La(ne,I);function ee(G,ce){n(0,ie=ma(G,ce))}let{text:ie=ma(r,te)}=e;function ge(G,ce){if(G.length){const Ee=Ia(G,ce,r);Ee.date!==null?(n(1,x=!0),v.set(Ee.date)):n(1,x=!1)}else n(1,x=!0),k&&(n(25,k=null),v.set(null))}let{visible:ke=!1}=e,{closeOnSelection:Oe=!1}=e,{browseWithoutSelecting:be=!1}=e,{timePrecision:le=null}=e;function _e(G){(G==null?void 0:G.currentTarget)instanceof HTMLElement&&G.relatedTarget&&G.relatedTarget instanceof Node&&G.currentTarget.contains(G.relatedTarget)||n(2,ke=!1)}function Re(G){G.key==="Escape"&&ke?(n(2,ke=!1),G.preventDefault(),G.stopPropagation()):G.key==="Enter"&&(n(2,ke=!ke),G.preventDefault())}function Le(G){m("select",G.detail),Oe&&n(2,ke=!1)}let{dynamicPositioning:ue=!1}=e,Te,O,F=!1,Q=null;function me(){if(n(17,F=!1),n(18,Q=null),ke&&O&&ue){const G=Te.getBoundingClientRect(),ce=O.offsetWidth-G.width,Ee=G.bottom+O.offsetHeight+5,xe=G.left+O.offsetWidth+5;if(Ee>window.innerHeight&&n(17,F=!0),xe>window.innerWidth&&(n(18,Q=-ce),G.left<ce+5)){const L=window.innerWidth/2-O.offsetWidth/2;n(18,Q=L-G.left)}}}function w(G){return me(),zl(G,{duration:200,easing:ql,y:F?5:-5})}function Y(G){nn[G?"unshift":"push"](()=>{Te=G,n(15,Te)})}const Ce=()=>n(2,ke=!0),he=()=>n(2,ke=!0),qe=G=>{if(G instanceof InputEvent&&G.inputType==="insertText"&&typeof G.data=="string"&&G.currentTarget.value===ie+G.data){let ce=Ia(ie,te,r);if(ce.missingPunctuation!==""&&!ce.missingPunctuation.startsWith(G.data)){n(0,ie=ie+ce.missingPunctuation+G.data);return}}n(0,ie=G.currentTarget.value)};function Ie(G){r=G,v.set(r)}function ye(G){nn[G?"unshift":"push"](()=>{O=G,n(16,O)})}return i.$$set=G=>{"value"in G&&n(25,k=G.value),"min"in G&&n(3,N=G.min),"max"in G&&n(4,q=G.max),"id"in G&&n(5,X=G.id),"placeholder"in G&&n(6,W=G.placeholder),"valid"in G&&n(1,x=G.valid),"disabled"in G&&n(7,S=G.disabled),"required"in G&&n(8,D=G.required),"class"in G&&n(9,se=G.class),"locale"in G&&n(10,I=G.locale),"format"in G&&n(26,ne=G.format),"text"in G&&n(0,ie=G.text),"visible"in G&&n(2,ke=G.visible),"closeOnSelection"in G&&n(27,Oe=G.closeOnSelection),"browseWithoutSelecting"in G&&n(11,be=G.browseWithoutSelecting),"timePrecision"in G&&n(12,le=G.timePrecision),"dynamicPositioning"in G&&n(28,ue=G.dynamicPositioning),"$$scope"in G&&n(36,u=G.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&33554432&&v.set(k),i.$$.dirty[0]&67109888&&n(13,te=La(ne,I)),i.$$.dirty[0]&24576&&ee(r,te),i.$$.dirty[0]&8193&&ge(ie,te)},[ie,x,ke,N,q,X,W,S,D,se,I,be,le,te,r,Te,O,F,Q,g,v,_e,Re,Le,w,k,ne,Oe,ue,c,Y,Ce,he,qe,Ie,ye,u]}class Yn extends ln{constructor(e){super(),sn(this,e,Yl,Gl,rn,{value:25,min:3,max:4,id:5,placeholder:6,valid:1,disabled:7,required:8,class:9,locale:10,format:26,text:0,visible:2,closeOnSelection:27,browseWithoutSelecting:11,timePrecision:12,dynamicPositioning:28},null,[-1,-1])}}var Ra=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ho(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Wo={exports:{}};(function(i,e){(function(n,r){i.exports=r()})(Ra,function(){var n=function(t,a){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var f in s)Object.prototype.hasOwnProperty.call(s,f)&&(o[f]=s[f])})(t,a)},r=function(){return(r=Object.assign||function(t){for(var a,o=1,s=arguments.length;o<s;o++)for(var f in a=arguments[o])Object.prototype.hasOwnProperty.call(a,f)&&(t[f]=a[f]);return t}).apply(this,arguments)};function l(t,a,o){for(var s,f=0,d=a.length;f<d;f++)!s&&f in a||((s=s||Array.prototype.slice.call(a,0,f))[f]=a[f]);return t.concat(s||Array.prototype.slice.call(a))}var c=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Ra,u=Object.keys,m=Array.isArray;function y(t,a){return typeof a!="object"||u(a).forEach(function(o){t[o]=a[o]}),t}typeof Promise>"u"||c.Promise||(c.Promise=Promise);var g=Object.getPrototypeOf,v={}.hasOwnProperty;function k(t,a){return v.call(t,a)}function N(t,a){typeof a=="function"&&(a=a(g(t))),(typeof Reflect>"u"?u:Reflect.ownKeys)(a).forEach(function(o){X(t,o,a[o])})}var q=Object.defineProperty;function X(t,a,o,s){q(t,a,y(o&&k(o,"get")&&typeof o.get=="function"?{get:o.get,set:o.set,configurable:!0}:{value:o,configurable:!0,writable:!0},s))}function W(t){return{from:function(a){return t.prototype=Object.create(a.prototype),X(t.prototype,"constructor",t),{extend:N.bind(null,t.prototype)}}}}var x=Object.getOwnPropertyDescriptor,S=[].slice;function D(t,a,o){return S.call(t,a,o)}function se(t,a){return a(t)}function I(t){if(!t)throw new Error("Assertion Failed")}function ne(t){c.setImmediate?setImmediate(t):setTimeout(t,0)}function te(t,a){if(typeof a=="string"&&k(t,a))return t[a];if(!a)return t;if(typeof a!="string"){for(var o=[],s=0,f=a.length;s<f;++s){var d=te(t,a[s]);o.push(d)}return o}var _=a.indexOf(".");if(_!==-1){var E=t[a.substr(0,_)];return E==null?void 0:te(E,a.substr(_+1))}}function ee(t,a,o){if(t&&a!==void 0&&!("isFrozen"in Object&&Object.isFrozen(t)))if(typeof a!="string"&&"length"in a){I(typeof o!="string"&&"length"in o);for(var s=0,f=a.length;s<f;++s)ee(t,a[s],o[s])}else{var d,_,E=a.indexOf(".");E!==-1?(d=a.substr(0,E),(_=a.substr(E+1))===""?o===void 0?m(t)&&!isNaN(parseInt(d))?t.splice(d,1):delete t[d]:t[d]=o:ee(E=!(E=t[d])||!k(t,d)?t[d]={}:E,_,o)):o===void 0?m(t)&&!isNaN(parseInt(a))?t.splice(a,1):delete t[a]:t[a]=o}}function ie(t){var a,o={};for(a in t)k(t,a)&&(o[a]=t[a]);return o}var ge=[].concat;function ke(t){return ge.apply([],t)}var Sn="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ke([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(a){return a+t+"Array"})}))).filter(function(t){return c[t]}),Oe=new Set(Sn.map(function(t){return c[t]})),be=null;function le(t){return be=new WeakMap,t=function a(o){if(!o||typeof o!="object")return o;var s=be.get(o);if(s)return s;if(m(o)){s=[],be.set(o,s);for(var f=0,d=o.length;f<d;++f)s.push(a(o[f]))}else if(Oe.has(o.constructor))s=o;else{var _,E=g(o);for(_ in s=E===Object.prototype?{}:Object.create(E),be.set(o,s),o)k(o,_)&&(s[_]=a(o[_]))}return s}(t),be=null,t}var _e={}.toString;function Re(t){return _e.call(t).slice(8,-1)}var Le=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ue=typeof Le=="symbol"?function(t){var a;return t!=null&&(a=t[Le])&&a.apply(t)}:function(){return null};function Te(t,a){return a=t.indexOf(a),0<=a&&t.splice(a,1),0<=a}var O={};function F(t){var a,o,s,f;if(arguments.length===1){if(m(t))return t.slice();if(this===O&&typeof t=="string")return[t];if(f=ue(t)){for(o=[];!(s=f.next()).done;)o.push(s.value);return o}if(t==null)return[t];if(typeof(a=t.length)!="number")return[t];for(o=new Array(a);a--;)o[a]=t[a];return o}for(a=arguments.length,o=new Array(a);a--;)o[a]=arguments[a];return o}var Q=typeof Symbol<"u"?function(t){return t[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},At=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],un=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(At),me={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function w(t,a){this.name=t,this.message=a}function Y(t,a){return t+". Errors: "+Object.keys(a).map(function(o){return a[o].toString()}).filter(function(o,s,f){return f.indexOf(o)===s}).join(`
`)}function Ce(t,a,o,s){this.failures=a,this.failedKeys=s,this.successCount=o,this.message=Y(t,a)}function he(t,a){this.name="BulkError",this.failures=Object.keys(a).map(function(o){return a[o]}),this.failuresByPos=a,this.message=Y(t,this.failures)}W(w).from(Error).extend({toString:function(){return this.name+": "+this.message}}),W(Ce).from(w),W(he).from(w);var qe=un.reduce(function(t,a){return t[a]=a+"Error",t},{}),Ie=w,ye=un.reduce(function(t,a){var o=a+"Error";function s(f,d){this.name=o,f?typeof f=="string"?(this.message="".concat(f).concat(d?`
 `+d:""),this.inner=d||null):typeof f=="object"&&(this.message="".concat(f.name," ").concat(f.message),this.inner=f):(this.message=me[a]||o,this.inner=null)}return W(s).from(Ie),t[a]=s,t},{});ye.Syntax=SyntaxError,ye.Type=TypeError,ye.Range=RangeError;var G=At.reduce(function(t,a){return t[a+"Error"]=ye[a],t},{}),ce=un.reduce(function(t,a){return["Syntax","Type","Range"].indexOf(a)===-1&&(t[a+"Error"]=ye[a]),t},{});function Ee(){}function xe(t){return t}function We(t,a){return t==null||t===xe?a:function(o){return a(t(o))}}function L(t,a){return function(){t.apply(this,arguments),a.apply(this,arguments)}}function Se(t,a){return t===Ee?a:function(){var o=t.apply(this,arguments);o!==void 0&&(arguments[0]=o);var s=this.onsuccess,f=this.onerror;this.onsuccess=null,this.onerror=null;var d=a.apply(this,arguments);return s&&(this.onsuccess=this.onsuccess?L(s,this.onsuccess):s),f&&(this.onerror=this.onerror?L(f,this.onerror):f),d!==void 0?d:o}}function we(t,a){return t===Ee?a:function(){t.apply(this,arguments);var o=this.onsuccess,s=this.onerror;this.onsuccess=this.onerror=null,a.apply(this,arguments),o&&(this.onsuccess=this.onsuccess?L(o,this.onsuccess):o),s&&(this.onerror=this.onerror?L(s,this.onerror):s)}}function fe(t,a){return t===Ee?a:function(o){var s=t.apply(this,arguments);y(o,s);var f=this.onsuccess,d=this.onerror;return this.onsuccess=null,this.onerror=null,o=a.apply(this,arguments),f&&(this.onsuccess=this.onsuccess?L(f,this.onsuccess):f),d&&(this.onerror=this.onerror?L(d,this.onerror):d),s===void 0?o===void 0?void 0:o:y(s,o)}}function He(t,a){return t===Ee?a:function(){return a.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function it(t,a){return t===Ee?a:function(){var o=t.apply(this,arguments);if(o&&typeof o.then=="function"){for(var s=this,f=arguments.length,d=new Array(f);f--;)d[f]=arguments[f];return o.then(function(){return a.apply(s,d)})}return a.apply(this,arguments)}}ce.ModifyError=Ce,ce.DexieError=w,ce.BulkError=he;var _t=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function yt(t){_t=t}var ct={},pt=100,Sn=typeof Promise>"u"?[]:function(){var t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,g(t),t];var a=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[a,g(a),t]}(),At=Sn[0],un=Sn[1],Sn=Sn[2],un=un&&un.then,lt=At&&At.constructor,bt=!!Sn,Je=function(t,a){_n.push([t,a]),vn&&(queueMicrotask(Me),vn=!1)},Xt=!0,vn=!0,Qt=[],Rt=[],It=xe,st={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ee,pgp:!1,env:{},finalize:Ee},Fe=st,_n=[],jt=0,ht=[];function De(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var a=this._PSD=Fe;if(typeof t!="function"){if(t!==ct)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&gt(this,this._value))}this._state=null,this._value=null,++a.ref,function o(s,f){try{f(function(d){if(s._state===null){if(d===s)throw new TypeError("A promise cannot be resolved with itself.");var _=s._lib&&Pe();d&&typeof d.then=="function"?o(s,function(E,R){d instanceof De?d._then(E,R):d.then(E,R)}):(s._state=!0,s._value=d,de(s)),_&&vt()}},gt.bind(null,s))}catch(d){gt(s,d)}}(this,t)}var mt={get:function(){var t=Fe,a=dn;function o(s,f){var d=this,_=!t.global&&(t!==Fe||a!==dn),E=_&&!hn(),R=new De(function(P,j){$(d,new wt(Ki(s,t,_,E),Ki(f,t,_,E),P,j,t))});return this._consoleTask&&(R._consoleTask=this._consoleTask),R}return o.prototype=ct,o},set:function(t){X(this,"then",t&&t.prototype===ct?mt:{get:function(){return t},set:mt.set})}};function wt(t,a,o,s,f){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof a=="function"?a:null,this.resolve=o,this.reject=s,this.psd=f}function gt(t,a){var o,s;Rt.push(a),t._state===null&&(o=t._lib&&Pe(),a=It(a),t._state=!1,t._value=a,s=t,Qt.some(function(f){return f._value===s._value})||Qt.push(s),de(t),o&&vt())}function de(t){var a=t._listeners;t._listeners=[];for(var o=0,s=a.length;o<s;++o)$(t,a[o]);var f=t._PSD;--f.ref||f.finalize(),jt===0&&(++jt,Je(function(){--jt==0&&Nt()},[]))}function $(t,a){if(t._state!==null){var o=t._state?a.onFulfilled:a.onRejected;if(o===null)return(t._state?a.resolve:a.reject)(t._value);++a.psd.ref,++jt,Je(ze,[o,t,a])}else t._listeners.push(a)}function ze(t,a,o){try{var s,f=a._value;!a._state&&Rt.length&&(Rt=[]),s=_t&&a._consoleTask?a._consoleTask.run(function(){return t(f)}):t(f),a._state||Rt.indexOf(f)!==-1||function(d){for(var _=Qt.length;_;)if(Qt[--_]._value===d._value)return Qt.splice(_,1)}(a),o.resolve(s)}catch(d){o.reject(d)}finally{--jt==0&&Nt(),--o.psd.ref||o.psd.finalize()}}function Me(){Mn(st,function(){Pe()&&vt()})}function Pe(){var t=Xt;return vn=Xt=!1,t}function vt(){var t,a,o;do for(;0<_n.length;)for(t=_n,_n=[],o=t.length,a=0;a<o;++a){var s=t[a];s[0].apply(null,s[1])}while(0<_n.length);vn=Xt=!0}function Nt(){var t=Qt;Qt=[],t.forEach(function(s){s._PSD.onunhandled.call(null,s._value,s)});for(var a=ht.slice(0),o=a.length;o;)a[--o]()}function zt(t){return new De(ct,!1,t)}function at(t,a){var o=Fe;return function(){var s=Pe(),f=Fe;try{return Cn(o,!0),t.apply(this,arguments)}catch(d){a&&a(d)}finally{Cn(f,!1),s&&vt()}}}N(De.prototype,{then:mt,_then:function(t,a){$(this,new wt(null,null,t,a,Fe))},catch:function(t){if(arguments.length===1)return this.then(null,t);var a=t,o=arguments[1];return typeof a=="function"?this.then(null,function(s){return(s instanceof a?o:zt)(s)}):this.then(null,function(s){return(s&&s.name===a?o:zt)(s)})},finally:function(t){return this.then(function(a){return De.resolve(t()).then(function(){return a})},function(a){return De.resolve(t()).then(function(){return zt(a)})})},timeout:function(t,a){var o=this;return t<1/0?new De(function(s,f){var d=setTimeout(function(){return f(new ye.Timeout(a))},t);o.then(s,f).finally(clearTimeout.bind(null,d))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&X(De.prototype,Symbol.toStringTag,"Dexie.Promise"),st.env=Bi(),N(De,{all:function(){var t=F.apply(null,arguments).map(Lt);return new De(function(a,o){t.length===0&&a([]);var s=t.length;t.forEach(function(f,d){return De.resolve(f).then(function(_){t[d]=_,--s||a(t)},o)})})},resolve:function(t){return t instanceof De?t:t&&typeof t.then=="function"?new De(function(a,o){t.then(a,o)}):new De(ct,!0,t)},reject:zt,race:function(){var t=F.apply(null,arguments).map(Lt);return new De(function(a,o){t.map(function(s){return De.resolve(s).then(a,o)})})},PSD:{get:function(){return Fe},set:function(t){return Fe=t}},totalEchoes:{get:function(){return dn}},newPSD:tn,usePSD:Mn,scheduler:{get:function(){return Je},set:function(t){Je=t}},rejectionMapper:{get:function(){return It},set:function(t){It=t}},follow:function(t,a){return new De(function(o,s){return tn(function(f,d){var _=Fe;_.unhandleds=[],_.onunhandled=d,_.finalize=L(function(){var E,R=this;E=function(){R.unhandleds.length===0?f():d(R.unhandleds[0])},ht.push(function P(){E(),ht.splice(ht.indexOf(P),1)}),++jt,Je(function(){--jt==0&&Nt()},[])},_.finalize),t()},a,o,s)})}}),lt&&(lt.allSettled&&X(De,"allSettled",function(){var t=F.apply(null,arguments).map(Lt);return new De(function(a){t.length===0&&a([]);var o=t.length,s=new Array(o);t.forEach(function(f,d){return De.resolve(f).then(function(_){return s[d]={status:"fulfilled",value:_}},function(_){return s[d]={status:"rejected",reason:_}}).then(function(){return--o||a(s)})})})}),lt.any&&typeof AggregateError<"u"&&X(De,"any",function(){var t=F.apply(null,arguments).map(Lt);return new De(function(a,o){t.length===0&&o(new AggregateError([]));var s=t.length,f=new Array(s);t.forEach(function(d,_){return De.resolve(d).then(function(E){return a(E)},function(E){f[_]=E,--s||o(new AggregateError(f))})})})}));var Et={awaits:0,echoes:0,id:0},an=0,fn=[],en=0,dn=0,En=0;function tn(t,a,o,s){var f=Fe,d=Object.create(f);return d.parent=f,d.ref=0,d.global=!1,d.id=++En,st.env,d.env=bt?{Promise:De,PromiseProp:{value:De,configurable:!0,writable:!0},all:De.all,race:De.race,allSettled:De.allSettled,any:De.any,resolve:De.resolve,reject:De.reject}:{},a&&y(d,a),++f.ref,d.finalize=function(){--this.parent.ref||this.parent.finalize()},s=Mn(d,t,o,s),d.ref===0&&d.finalize(),s}function kt(){return Et.id||(Et.id=++an),++Et.awaits,Et.echoes+=pt,Et.id}function hn(){return!!Et.awaits&&(--Et.awaits==0&&(Et.id=0),Et.echoes=Et.awaits*pt,!0)}function Lt(t){return Et.echoes&&t&&t.constructor===lt?(kt(),t.then(function(a){return hn(),a},function(a){return hn(),Ot(a)})):t}function tl(){var t=fn[fn.length-1];fn.pop(),Cn(t,!1)}function Cn(t,a){var o,s=Fe;(a?!Et.echoes||en++&&t===Fe:!en||--en&&t===Fe)||queueMicrotask(a?(function(f){++dn,Et.echoes&&--Et.echoes!=0||(Et.echoes=Et.awaits=Et.id=0),fn.push(Fe),Cn(f,!0)}).bind(null,t):tl),t!==Fe&&(Fe=t,s===st&&(st.env=Bi()),bt&&(o=st.env.Promise,a=t.env,(s.global||t.global)&&(Object.defineProperty(c,"Promise",a.PromiseProp),o.all=a.all,o.race=a.race,o.resolve=a.resolve,o.reject=a.reject,a.allSettled&&(o.allSettled=a.allSettled),a.any&&(o.any=a.any))))}function Bi(){var t=c.Promise;return bt?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(c,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject}:{}}function Mn(t,a,o,s,f){var d=Fe;try{return Cn(t,!0),a(o,s,f)}finally{Cn(d,!1)}}function Ki(t,a,o,s){return typeof t!="function"?t:function(){var f=Fe;o&&kt(),Cn(a,!0);try{return t.apply(this,arguments)}finally{Cn(f,!1),s&&queueMicrotask(hn)}}}function Hr(t){Promise===lt&&Et.echoes===0?en===0?t():enqueueNativeMicroTask(t):setTimeout(t,0)}(""+un).indexOf("[native code]")===-1&&(kt=hn=Ee);var Ot=De.reject,Rn="￿",Dn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Fi="String expected.",xn=[],hr="__dbnames",Wr="readonly",Gr="readwrite";function Nn(t,a){return t?a?function(){return t.apply(this,arguments)&&a.apply(this,arguments)}:t:a}var ji={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function pr(t){return typeof t!="string"||/\./.test(t)?function(a){return a}:function(a){return a[t]===void 0&&t in a&&delete(a=le(a))[t],a}}function Vi(){throw ye.Type()}function dt(t,a){try{var o=Ui(t),s=Ui(a);if(o!==s)return o==="Array"?1:s==="Array"?-1:o==="binary"?1:s==="binary"?-1:o==="string"?1:s==="string"?-1:o==="Date"?1:s!=="Date"?NaN:-1;switch(o){case"number":case"Date":case"string":return a<t?1:t<a?-1:0;case"binary":return function(f,d){for(var _=f.length,E=d.length,R=_<E?_:E,P=0;P<R;++P)if(f[P]!==d[P])return f[P]<d[P]?-1:1;return _===E?0:_<E?-1:1}(qi(t),qi(a));case"Array":return function(f,d){for(var _=f.length,E=d.length,R=_<E?_:E,P=0;P<R;++P){var j=dt(f[P],d[P]);if(j!==0)return j}return _===E?0:_<E?-1:1}(t,a)}}catch{}return NaN}function Ui(t){var a=typeof t;return a!="object"?a:ArrayBuffer.isView(t)?"binary":(t=Re(t),t==="ArrayBuffer"?"binary":t)}function qi(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}var xi=(Tt.prototype._trans=function(t,a,o){var s=this._tx||Fe.trans,f=this.name,d=_t&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(t==="readonly"?"read":"write"," ").concat(this.name));function _(P,j,A){if(!A.schema[f])throw new ye.NotFound("Table "+f+" not part of transaction");return a(A.idbtrans,A)}var E=Pe();try{var R=s&&s.db._novip===this.db._novip?s===Fe.trans?s._promise(t,_,o):tn(function(){return s._promise(t,_,o)},{trans:s,transless:Fe.transless||Fe}):function P(j,A,V,M){if(j.idbdb&&(j._state.openComplete||Fe.letThrough||j._vip)){var K=j._createTransaction(A,V,j._dbSchema);try{K.create(),j._state.PR1398_maxLoop=3}catch(U){return U.name===qe.InvalidState&&j.isOpen()&&0<--j._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),j.close({disableAutoOpen:!1}),j.open().then(function(){return P(j,A,V,M)})):Ot(U)}return K._promise(A,function(U,B){return tn(function(){return Fe.trans=K,M(U,B,K)})}).then(function(U){if(A==="readwrite")try{K.idbtrans.commit()}catch{}return A==="readonly"?U:K._completion.then(function(){return U})})}if(j._state.openComplete)return Ot(new ye.DatabaseClosed(j._state.dbOpenError));if(!j._state.isBeingOpened){if(!j._state.autoOpen)return Ot(new ye.DatabaseClosed);j.open().catch(Ee)}return j._state.dbReadyPromise.then(function(){return P(j,A,V,M)})}(this.db,t,[this.name],_);return d&&(R._consoleTask=d,R=R.catch(function(P){return console.trace(P),Ot(P)})),R}finally{E&&vt()}},Tt.prototype.get=function(t,a){var o=this;return t&&t.constructor===Object?this.where(t).first(a):t==null?Ot(new ye.Type("Invalid argument to Table.get()")):this._trans("readonly",function(s){return o.core.get({trans:s,key:t}).then(function(f){return o.hook.reading.fire(f)})}).then(a)},Tt.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(m(t))return new this.db.WhereClause(this,"[".concat(t.join("+"),"]"));var a=u(t);if(a.length===1)return this.where(a[0]).equals(t[a[0]]);var o=this.schema.indexes.concat(this.schema.primKey).filter(function(R){if(R.compound&&a.every(function(j){return 0<=R.keyPath.indexOf(j)})){for(var P=0;P<a.length;++P)if(a.indexOf(R.keyPath[P])===-1)return!1;return!0}return!1}).sort(function(R,P){return R.keyPath.length-P.keyPath.length})[0];if(o&&this.db._maxKey!==Rn){var _=o.keyPath.slice(0,a.length);return this.where(_).equals(_.map(function(P){return t[P]}))}!o&&_t&&console.warn("The query ".concat(JSON.stringify(t)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(a.join("+"),"]"));var s=this.schema.idxByName,f=this.db._deps.indexedDB;function d(R,P){return f.cmp(R,P)===0}var E=a.reduce(function(V,P){var j=V[0],A=V[1],V=s[P],M=t[P];return[j||V,j||!V?Nn(A,V&&V.multi?function(K){return K=te(K,P),m(K)&&K.some(function(U){return d(M,U)})}:function(K){return d(M,te(K,P))}):A]},[null,null]),_=E[0],E=E[1];return _?this.where(_.name).equals(t[_.keyPath]).filter(E):o?this.filter(E):this.where(a).equals("")},Tt.prototype.filter=function(t){return this.toCollection().and(t)},Tt.prototype.count=function(t){return this.toCollection().count(t)},Tt.prototype.offset=function(t){return this.toCollection().offset(t)},Tt.prototype.limit=function(t){return this.toCollection().limit(t)},Tt.prototype.each=function(t){return this.toCollection().each(t)},Tt.prototype.toArray=function(t){return this.toCollection().toArray(t)},Tt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Tt.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,m(t)?"[".concat(t.join("+"),"]"):t))},Tt.prototype.reverse=function(){return this.toCollection().reverse()},Tt.prototype.mapToClass=function(t){var a,o=this.db,s=this.name;function f(){return a!==null&&a.apply(this,arguments)||this}(this.schema.mappedClass=t).prototype instanceof Vi&&(function(R,P){if(typeof P!="function"&&P!==null)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function j(){this.constructor=R}n(R,P),R.prototype=P===null?Object.create(P):(j.prototype=P.prototype,new j)}(f,a=t),Object.defineProperty(f.prototype,"db",{get:function(){return o},enumerable:!1,configurable:!0}),f.prototype.table=function(){return s},t=f);for(var d=new Set,_=t.prototype;_;_=g(_))Object.getOwnPropertyNames(_).forEach(function(R){return d.add(R)});function E(R){if(!R)return R;var P,j=Object.create(t.prototype);for(P in R)if(!d.has(P))try{j[P]=R[P]}catch{}return j}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=E,this.hook("reading",E),t},Tt.prototype.defineClass=function(){return this.mapToClass(function(t){y(this,t)})},Tt.prototype.add=function(t,a){var o=this,s=this.schema.primKey,f=s.auto,d=s.keyPath,_=t;return d&&f&&(_=pr(d)(t)),this._trans("readwrite",function(E){return o.core.mutate({trans:E,type:"add",keys:a!=null?[a]:null,values:[_]})}).then(function(E){return E.numFailures?De.reject(E.failures[0]):E.lastResult}).then(function(E){if(d)try{ee(t,d,E)}catch{}return E})},Tt.prototype.update=function(t,a){return typeof t!="object"||m(t)?this.where(":id").equals(t).modify(a):(t=te(t,this.schema.primKey.keyPath),t===void 0?Ot(new ye.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(t).modify(a))},Tt.prototype.put=function(t,a){var o=this,s=this.schema.primKey,f=s.auto,d=s.keyPath,_=t;return d&&f&&(_=pr(d)(t)),this._trans("readwrite",function(E){return o.core.mutate({trans:E,type:"put",values:[_],keys:a!=null?[a]:null})}).then(function(E){return E.numFailures?De.reject(E.failures[0]):E.lastResult}).then(function(E){if(d)try{ee(t,d,E)}catch{}return E})},Tt.prototype.delete=function(t){var a=this;return this._trans("readwrite",function(o){return a.core.mutate({trans:o,type:"delete",keys:[t]})}).then(function(o){return o.numFailures?De.reject(o.failures[0]):void 0})},Tt.prototype.clear=function(){var t=this;return this._trans("readwrite",function(a){return t.core.mutate({trans:a,type:"deleteRange",range:ji})}).then(function(a){return a.numFailures?De.reject(a.failures[0]):void 0})},Tt.prototype.bulkGet=function(t){var a=this;return this._trans("readonly",function(o){return a.core.getMany({keys:t,trans:o}).then(function(s){return s.map(function(f){return a.hook.reading.fire(f)})})})},Tt.prototype.bulkAdd=function(t,a,o){var s=this,f=Array.isArray(a)?a:void 0,d=(o=o||(f?void 0:a))?o.allKeys:void 0;return this._trans("readwrite",function(_){var P=s.schema.primKey,E=P.auto,P=P.keyPath;if(P&&f)throw new ye.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(f&&f.length!==t.length)throw new ye.InvalidArgument("Arguments objects and keys must have the same length");var R=t.length,P=P&&E?t.map(pr(P)):t;return s.core.mutate({trans:_,type:"add",keys:f,values:P,wantResults:d}).then(function(K){var A=K.numFailures,V=K.results,M=K.lastResult,K=K.failures;if(A===0)return d?V:M;throw new he("".concat(s.name,".bulkAdd(): ").concat(A," of ").concat(R," operations failed"),K)})})},Tt.prototype.bulkPut=function(t,a,o){var s=this,f=Array.isArray(a)?a:void 0,d=(o=o||(f?void 0:a))?o.allKeys:void 0;return this._trans("readwrite",function(_){var P=s.schema.primKey,E=P.auto,P=P.keyPath;if(P&&f)throw new ye.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(f&&f.length!==t.length)throw new ye.InvalidArgument("Arguments objects and keys must have the same length");var R=t.length,P=P&&E?t.map(pr(P)):t;return s.core.mutate({trans:_,type:"put",keys:f,values:P,wantResults:d}).then(function(K){var A=K.numFailures,V=K.results,M=K.lastResult,K=K.failures;if(A===0)return d?V:M;throw new he("".concat(s.name,".bulkPut(): ").concat(A," of ").concat(R," operations failed"),K)})})},Tt.prototype.bulkUpdate=function(t){var a=this,o=this.core,s=t.map(function(_){return _.key}),f=t.map(function(_){return _.changes}),d=[];return this._trans("readwrite",function(_){return o.getMany({trans:_,keys:s,cache:"clone"}).then(function(E){var R=[],P=[];t.forEach(function(A,V){var M=A.key,K=A.changes,U=E[V];if(U){for(var B=0,H=Object.keys(K);B<H.length;B++){var Z=H[B],J=K[Z];if(Z===a.schema.primKey.keyPath){if(dt(J,M)!==0)throw new ye.Constraint("Cannot update primary key in bulkUpdate()")}else ee(U,Z,J)}d.push(V),R.push(M),P.push(U)}});var j=R.length;return o.mutate({trans:_,type:"put",keys:R,values:P,updates:{keys:s,changeSpecs:f}}).then(function(A){var V=A.numFailures,M=A.failures;if(V===0)return j;for(var K=0,U=Object.keys(M);K<U.length;K++){var B,H=U[K],Z=d[Number(H)];Z!=null&&(B=M[H],delete M[H],M[Z]=B)}throw new he("".concat(a.name,".bulkUpdate(): ").concat(V," of ").concat(j," operations failed"),M)})})})},Tt.prototype.bulkDelete=function(t){var a=this,o=t.length;return this._trans("readwrite",function(s){return a.core.mutate({trans:s,type:"delete",keys:t})}).then(function(_){var f=_.numFailures,d=_.lastResult,_=_.failures;if(f===0)return d;throw new he("".concat(a.name,".bulkDelete(): ").concat(f," of ").concat(o," operations failed"),_)})},Tt);function Tt(){}function Jn(t){function a(_,E){if(E){for(var R=arguments.length,P=new Array(R-1);--R;)P[R-1]=arguments[R];return o[_].subscribe.apply(null,P),t}if(typeof _=="string")return o[_]}var o={};a.addEventType=d;for(var s=1,f=arguments.length;s<f;++s)d(arguments[s]);return a;function d(_,E,R){if(typeof _!="object"){var P;E=E||He;var j={subscribers:[],fire:R=R||Ee,subscribe:function(A){j.subscribers.indexOf(A)===-1&&(j.subscribers.push(A),j.fire=E(j.fire,A))},unsubscribe:function(A){j.subscribers=j.subscribers.filter(function(V){return V!==A}),j.fire=j.subscribers.reduce(E,R)}};return o[_]=a[_]=j}u(P=_).forEach(function(A){var V=P[A];if(m(V))d(A,P[A][0],P[A][1]);else{if(V!=="asap")throw new ye.InvalidArgument("Invalid event config");var M=d(A,xe,function(){for(var K=arguments.length,U=new Array(K);K--;)U[K]=arguments[K];M.subscribers.forEach(function(B){ne(function(){B.apply(null,U)})})})}})}}function Qn(t,a){return W(a).from({prototype:t}),a}function zn(t,a){return!(t.filter||t.algorithm||t.or)&&(a?t.justLimit:!t.replayFilter)}function Yr(t,a){t.filter=Nn(t.filter,a)}function Zr(t,a,o){var s=t.replayFilter;t.replayFilter=s?function(){return Nn(s(),a())}:a,t.justLimit=o&&!s}function mr(t,a){if(t.isPrimKey)return a.primaryKey;var o=a.getIndexByKeyPath(t.index);if(!o)throw new ye.Schema("KeyPath "+t.index+" on object store "+a.name+" is not indexed");return o}function zi(t,a,o){var s=mr(t,a.schema);return a.openCursor({trans:o,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:s,range:t.range}})}function gr(t,a,o,s){var f=t.replayFilter?Nn(t.filter,t.replayFilter()):t.filter;if(t.or){var d={},_=function(E,R,P){var j,A;f&&!f(R,P,function(V){return R.stop(V)},function(V){return R.fail(V)})||((A=""+(j=R.primaryKey))=="[object ArrayBuffer]"&&(A=""+new Uint8Array(j)),k(d,A)||(d[A]=!0,a(E,R,P)))};return Promise.all([t.or._iterate(_,o),Hi(zi(t,s,o),t.algorithm,_,!t.keysOnly&&t.valueMapper)])}return Hi(zi(t,s,o),Nn(t.algorithm,f),a,!t.keysOnly&&t.valueMapper)}function Hi(t,a,o,s){var f=at(s?function(d,_,E){return o(s(d),_,E)}:o);return t.then(function(d){if(d)return d.start(function(){var _=function(){return d.continue()};a&&!a(d,function(E){return _=E},function(E){d.stop(E),_=Ee},function(E){d.fail(E),_=Ee})||f(d.value,d,function(E){return _=E}),_()})})}var Sn=Symbol(),$n=(Wi.prototype.execute=function(t){if(this.add!==void 0){var a=this.add;if(m(a))return l(l([],m(t)?t:[],!0),a).sort();if(typeof a=="number")return(Number(t)||0)+a;if(typeof a=="bigint")try{return BigInt(t)+a}catch{return BigInt(0)+a}throw new TypeError("Invalid term ".concat(a))}if(this.remove!==void 0){var o=this.remove;if(m(o))return m(t)?t.filter(function(s){return!o.includes(s)}).sort():[];if(typeof o=="number")return Number(t)-o;if(typeof o=="bigint")try{return BigInt(t)-o}catch{return BigInt(0)-o}throw new TypeError("Invalid subtrahend ".concat(o))}return a=(a=this.replacePrefix)===null||a===void 0?void 0:a[0],a&&typeof t=="string"&&t.startsWith(a)?this.replacePrefix[1]+t.substring(a.length):t},Wi);function Wi(t){Object.assign(this,t)}var nl=(ft.prototype._read=function(t,a){var o=this._ctx;return o.error?o.table._trans(null,Ot.bind(null,o.error)):o.table._trans("readonly",t).then(a)},ft.prototype._write=function(t){var a=this._ctx;return a.error?a.table._trans(null,Ot.bind(null,a.error)):a.table._trans("readwrite",t,"locked")},ft.prototype._addAlgorithm=function(t){var a=this._ctx;a.algorithm=Nn(a.algorithm,t)},ft.prototype._iterate=function(t,a){return gr(this._ctx,t,a,this._ctx.table.core)},ft.prototype.clone=function(t){var a=Object.create(this.constructor.prototype),o=Object.create(this._ctx);return t&&y(o,t),a._ctx=o,a},ft.prototype.raw=function(){return this._ctx.valueMapper=null,this},ft.prototype.each=function(t){var a=this._ctx;return this._read(function(o){return gr(a,t,o,a.table.core)})},ft.prototype.count=function(t){var a=this;return this._read(function(o){var s=a._ctx,f=s.table.core;if(zn(s,!0))return f.count({trans:o,query:{index:mr(s,f.schema),range:s.range}}).then(function(_){return Math.min(_,s.limit)});var d=0;return gr(s,function(){return++d,!1},o,f).then(function(){return d})}).then(t)},ft.prototype.sortBy=function(t,a){var o=t.split(".").reverse(),s=o[0],f=o.length-1;function d(R,P){return P?d(R[o[P]],P-1):R[s]}var _=this._ctx.dir==="next"?1:-1;function E(R,P){return R=d(R,f),P=d(P,f),R<P?-_:P<R?_:0}return this.toArray(function(R){return R.sort(E)}).then(a)},ft.prototype.toArray=function(t){var a=this;return this._read(function(o){var s=a._ctx;if(s.dir==="next"&&zn(s,!0)&&0<s.limit){var f=s.valueMapper,d=mr(s,s.table.core.schema);return s.table.core.query({trans:o,limit:s.limit,values:!0,query:{index:d,range:s.range}}).then(function(E){return E=E.result,f?E.map(f):E})}var _=[];return gr(s,function(E){return _.push(E)},o,s.table.core).then(function(){return _})},t)},ft.prototype.offset=function(t){var a=this._ctx;return t<=0||(a.offset+=t,zn(a)?Zr(a,function(){var o=t;return function(s,f){return o===0||(o===1?--o:f(function(){s.advance(o),o=0}),!1)}}):Zr(a,function(){var o=t;return function(){return--o<0}})),this},ft.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),Zr(this._ctx,function(){var a=t;return function(o,s,f){return--a<=0&&s(f),0<=a}},!0),this},ft.prototype.until=function(t,a){return Yr(this._ctx,function(o,s,f){return!t(o.value)||(s(f),a)}),this},ft.prototype.first=function(t){return this.limit(1).toArray(function(a){return a[0]}).then(t)},ft.prototype.last=function(t){return this.reverse().first(t)},ft.prototype.filter=function(t){var a;return Yr(this._ctx,function(o){return t(o.value)}),(a=this._ctx).isMatch=Nn(a.isMatch,t),this},ft.prototype.and=function(t){return this.filter(t)},ft.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},ft.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},ft.prototype.desc=function(){return this.reverse()},ft.prototype.eachKey=function(t){var a=this._ctx;return a.keysOnly=!a.isMatch,this.each(function(o,s){t(s.key,s)})},ft.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},ft.prototype.eachPrimaryKey=function(t){var a=this._ctx;return a.keysOnly=!a.isMatch,this.each(function(o,s){t(s.primaryKey,s)})},ft.prototype.keys=function(t){var a=this._ctx;a.keysOnly=!a.isMatch;var o=[];return this.each(function(s,f){o.push(f.key)}).then(function(){return o}).then(t)},ft.prototype.primaryKeys=function(t){var a=this._ctx;if(a.dir==="next"&&zn(a,!0)&&0<a.limit)return this._read(function(s){var f=mr(a,a.table.core.schema);return a.table.core.query({trans:s,values:!1,limit:a.limit,query:{index:f,range:a.range}})}).then(function(s){return s.result}).then(t);a.keysOnly=!a.isMatch;var o=[];return this.each(function(s,f){o.push(f.primaryKey)}).then(function(){return o}).then(t)},ft.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},ft.prototype.firstKey=function(t){return this.limit(1).keys(function(a){return a[0]}).then(t)},ft.prototype.lastKey=function(t){return this.reverse().firstKey(t)},ft.prototype.distinct=function(){var t=this._ctx,t=t.index&&t.table.schema.idxByName[t.index];if(!t||!t.multi)return this;var a={};return Yr(this._ctx,function(f){var s=f.primaryKey.toString(),f=k(a,s);return a[s]=!0,!f}),this},ft.prototype.modify=function(t){var a=this,o=this._ctx;return this._write(function(s){var f,d,_;_=typeof t=="function"?t:(f=u(t),d=f.length,function(B){for(var H=!1,Z=0;Z<d;++Z){var J=f[Z],re=t[J],ve=te(B,J);re instanceof $n?(ee(B,J,re.execute(ve)),H=!0):ve!==re&&(ee(B,J,re),H=!0)}return H});function E(B,J){var Z=J.failures,J=J.numFailures;K+=B-J;for(var re=0,ve=u(Z);re<ve.length;re++){var Ve=ve[re];M.push(Z[Ve])}}var R=o.table.core,P=R.schema.primaryKey,j=P.outbound,A=P.extractKey,V=a.db._options.modifyChunkSize||200,M=[],K=0,U=[];return a.clone().primaryKeys().then(function(B){function H(J){var re=Math.min(V,B.length-J);return R.getMany({trans:s,keys:B.slice(J,J+re),cache:"immutable"}).then(function(ve){for(var Ve=[],Ae=[],je=j?[]:null,Ue=[],Ke=0;Ke<re;++Ke){var Qe=ve[Ke],$e={value:le(Qe),primKey:B[J+Ke]};_.call($e,$e.value,$e)!==!1&&($e.value==null?Ue.push(B[J+Ke]):j||dt(A(Qe),A($e.value))===0?(Ae.push($e.value),j&&je.push(B[J+Ke])):(Ue.push(B[J+Ke]),Ve.push($e.value)))}return Promise.resolve(0<Ve.length&&R.mutate({trans:s,type:"add",values:Ve}).then(function(nt){for(var et in nt.failures)Ue.splice(parseInt(et),1);E(Ve.length,nt)})).then(function(){return(0<Ae.length||Z&&typeof t=="object")&&R.mutate({trans:s,type:"put",keys:je,values:Ae,criteria:Z,changeSpec:typeof t!="function"&&t,isAdditionalChunk:0<J}).then(function(nt){return E(Ae.length,nt)})}).then(function(){return(0<Ue.length||Z&&t===Jr)&&R.mutate({trans:s,type:"delete",keys:Ue,criteria:Z,isAdditionalChunk:0<J}).then(function(nt){return E(Ue.length,nt)})}).then(function(){return B.length>J+re&&H(J+V)})})}var Z=zn(o)&&o.limit===1/0&&(typeof t!="function"||t===Jr)&&{index:o.index,range:o.range};return H(0).then(function(){if(0<M.length)throw new Ce("Error modifying one or more objects",M,K,U);return B.length})})})},ft.prototype.delete=function(){var t=this._ctx,a=t.range;return zn(t)&&(t.isPrimKey||a.type===3)?this._write(function(o){var s=t.table.core.schema.primaryKey,f=a;return t.table.core.count({trans:o,query:{index:s,range:f}}).then(function(d){return t.table.core.mutate({trans:o,type:"deleteRange",range:f}).then(function(_){var E=_.failures;if(_.lastResult,_.results,_=_.numFailures,_)throw new Ce("Could not delete some values",Object.keys(E).map(function(R){return E[R]}),d-_);return d-_})})}):this.modify(Jr)},ft);function ft(){}var Jr=function(t,a){return a.value=null};function rl(t,a){return t<a?-1:t===a?0:1}function il(t,a){return a<t?-1:t===a?0:1}function on(t,a,o){return t=t instanceof Yi?new t.Collection(t):t,t._ctx.error=new(o||TypeError)(a),t}function Hn(t){return new t.Collection(t,function(){return Gi("")}).limit(0)}function vr(t,a,o,s){var f,d,_,E,R,P,j,A=o.length;if(!o.every(function(K){return typeof K=="string"}))return on(t,Fi);function V(K){f=K==="next"?function(B){return B.toUpperCase()}:function(B){return B.toLowerCase()},d=K==="next"?function(B){return B.toLowerCase()}:function(B){return B.toUpperCase()},_=K==="next"?rl:il;var U=o.map(function(B){return{lower:d(B),upper:f(B)}}).sort(function(B,H){return _(B.lower,H.lower)});E=U.map(function(B){return B.upper}),R=U.map(function(B){return B.lower}),j=(P=K)==="next"?"":s}V("next"),t=new t.Collection(t,function(){return An(E[0],R[A-1]+s)}),t._ondirectionchange=function(K){V(K)};var M=0;return t._addAlgorithm(function(K,U,B){var H=K.key;if(typeof H!="string")return!1;var Z=d(H);if(a(Z,R,M))return!0;for(var J=null,re=M;re<A;++re){var ve=function(Ve,Ae,je,Ue,Ke,Qe){for(var $e=Math.min(Ve.length,Ue.length),nt=-1,et=0;et<$e;++et){var pn=Ae[et];if(pn!==Ue[et])return Ke(Ve[et],je[et])<0?Ve.substr(0,et)+je[et]+je.substr(et+1):Ke(Ve[et],Ue[et])<0?Ve.substr(0,et)+Ue[et]+je.substr(et+1):0<=nt?Ve.substr(0,nt)+Ae[nt]+je.substr(nt+1):null;Ke(Ve[et],pn)<0&&(nt=et)}return $e<Ue.length&&Qe==="next"?Ve+je.substr(Ve.length):$e<Ve.length&&Qe==="prev"?Ve.substr(0,je.length):nt<0?null:Ve.substr(0,nt)+Ue[nt]+je.substr(nt+1)}(H,Z,E[re],R[re],_,P);ve===null&&J===null?M=re+1:(J===null||0<_(J,ve))&&(J=ve)}return U(J!==null?function(){K.continue(J+j)}:B),!1}),t}function An(t,a,o,s){return{type:2,lower:t,upper:a,lowerOpen:o,upperOpen:s}}function Gi(t){return{type:1,lower:t,upper:t}}var Yi=(Object.defineProperty(Kt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Kt.prototype.between=function(t,a,o,s){o=o!==!1,s=s===!0;try{return 0<this._cmp(t,a)||this._cmp(t,a)===0&&(o||s)&&(!o||!s)?Hn(this):new this.Collection(this,function(){return An(t,a,!o,!s)})}catch{return on(this,Dn)}},Kt.prototype.equals=function(t){return t==null?on(this,Dn):new this.Collection(this,function(){return Gi(t)})},Kt.prototype.above=function(t){return t==null?on(this,Dn):new this.Collection(this,function(){return An(t,void 0,!0)})},Kt.prototype.aboveOrEqual=function(t){return t==null?on(this,Dn):new this.Collection(this,function(){return An(t,void 0,!1)})},Kt.prototype.below=function(t){return t==null?on(this,Dn):new this.Collection(this,function(){return An(void 0,t,!1,!0)})},Kt.prototype.belowOrEqual=function(t){return t==null?on(this,Dn):new this.Collection(this,function(){return An(void 0,t)})},Kt.prototype.startsWith=function(t){return typeof t!="string"?on(this,Fi):this.between(t,t+Rn,!0,!0)},Kt.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):vr(this,function(a,o){return a.indexOf(o[0])===0},[t],Rn)},Kt.prototype.equalsIgnoreCase=function(t){return vr(this,function(a,o){return a===o[0]},[t],"")},Kt.prototype.anyOfIgnoreCase=function(){var t=F.apply(O,arguments);return t.length===0?Hn(this):vr(this,function(a,o){return o.indexOf(a)!==-1},t,"")},Kt.prototype.startsWithAnyOfIgnoreCase=function(){var t=F.apply(O,arguments);return t.length===0?Hn(this):vr(this,function(a,o){return o.some(function(s){return a.indexOf(s)===0})},t,Rn)},Kt.prototype.anyOf=function(){var t=this,a=F.apply(O,arguments),o=this._cmp;try{a.sort(o)}catch{return on(this,Dn)}if(a.length===0)return Hn(this);var s=new this.Collection(this,function(){return An(a[0],a[a.length-1])});s._ondirectionchange=function(d){o=d==="next"?t._ascending:t._descending,a.sort(o)};var f=0;return s._addAlgorithm(function(d,_,E){for(var R=d.key;0<o(R,a[f]);)if(++f===a.length)return _(E),!1;return o(R,a[f])===0||(_(function(){d.continue(a[f])}),!1)}),s},Kt.prototype.notEqual=function(t){return this.inAnyRange([[-1/0,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Kt.prototype.noneOf=function(){var t=F.apply(O,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return on(this,Dn)}var a=t.reduce(function(o,s){return o?o.concat([[o[o.length-1][1],s]]):[[-1/0,s]]},null);return a.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(a,{includeLowers:!1,includeUppers:!1})},Kt.prototype.inAnyRange=function(H,a){var o=this,s=this._cmp,f=this._ascending,d=this._descending,_=this._min,E=this._max;if(H.length===0)return Hn(this);if(!H.every(function(Z){return Z[0]!==void 0&&Z[1]!==void 0&&f(Z[0],Z[1])<=0}))return on(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ye.InvalidArgument);var R=!a||a.includeLowers!==!1,P=a&&a.includeUppers===!0,j,A=f;function V(Z,J){return A(Z[0],J[0])}try{(j=H.reduce(function(Z,J){for(var re=0,ve=Z.length;re<ve;++re){var Ve=Z[re];if(s(J[0],Ve[1])<0&&0<s(J[1],Ve[0])){Ve[0]=_(Ve[0],J[0]),Ve[1]=E(Ve[1],J[1]);break}}return re===ve&&Z.push(J),Z},[])).sort(V)}catch{return on(this,Dn)}var M=0,K=P?function(Z){return 0<f(Z,j[M][1])}:function(Z){return 0<=f(Z,j[M][1])},U=R?function(Z){return 0<d(Z,j[M][0])}:function(Z){return 0<=d(Z,j[M][0])},B=K,H=new this.Collection(this,function(){return An(j[0][0],j[j.length-1][1],!R,!P)});return H._ondirectionchange=function(Z){A=Z==="next"?(B=K,f):(B=U,d),j.sort(V)},H._addAlgorithm(function(Z,J,re){for(var ve,Ve=Z.key;B(Ve);)if(++M===j.length)return J(re),!1;return!K(ve=Ve)&&!U(ve)||(o._cmp(Ve,j[M][1])===0||o._cmp(Ve,j[M][0])===0||J(function(){A===f?Z.continue(j[M][0]):Z.continue(j[M][1])}),!1)}),H},Kt.prototype.startsWithAnyOf=function(){var t=F.apply(O,arguments);return t.every(function(a){return typeof a=="string"})?t.length===0?Hn(this):this.inAnyRange(t.map(function(a){return[a,a+Rn]})):on(this,"startsWithAnyOf() only works with strings")},Kt);function Kt(){}function yn(t){return at(function(a){return Xn(a),t(a.target.error),!1})}function Xn(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var er="storagemutated",Qr="x-storagemutated-1",On=Jn(null,er),al=(bn.prototype._lock=function(){return I(!Fe.global),++this._reculock,this._reculock!==1||Fe.global||(Fe.lockOwnerFor=this),this},bn.prototype._unlock=function(){if(I(!Fe.global),--this._reculock==0)for(Fe.global||(Fe.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var t=this._blockedFuncs.shift();try{Mn(t[1],t[0])}catch{}}return this},bn.prototype._locked=function(){return this._reculock&&Fe.lockOwnerFor!==this},bn.prototype.create=function(t){var a=this;if(!this.mode)return this;var o=this.db.idbdb,s=this.db._state.dbOpenError;if(I(!this.idbtrans),!t&&!o)switch(s&&s.name){case"DatabaseClosedError":throw new ye.DatabaseClosed(s);case"MissingAPIError":throw new ye.MissingAPI(s.message,s);default:throw new ye.OpenFailed(s)}if(!this.active)throw new ye.TransactionInactive;return I(this._completion._state===null),(t=this.idbtrans=t||(this.db.core||o).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=at(function(f){Xn(f),a._reject(t.error)}),t.onabort=at(function(f){Xn(f),a.active&&a._reject(new ye.Abort(t.error)),a.active=!1,a.on("abort").fire(f)}),t.oncomplete=at(function(){a.active=!1,a._resolve(),"mutatedParts"in t&&On.storagemutated.fire(t.mutatedParts)}),this},bn.prototype._promise=function(t,a,o){var s=this;if(t==="readwrite"&&this.mode!=="readwrite")return Ot(new ye.ReadOnly("Transaction is readonly"));if(!this.active)return Ot(new ye.TransactionInactive);if(this._locked())return new De(function(d,_){s._blockedFuncs.push([function(){s._promise(t,a,o).then(d,_)},Fe])});if(o)return tn(function(){var d=new De(function(_,E){s._lock();var R=a(_,E,s);R&&R.then&&R.then(_,E)});return d.finally(function(){return s._unlock()}),d._lib=!0,d});var f=new De(function(d,_){var E=a(d,_,s);E&&E.then&&E.then(d,_)});return f._lib=!0,f},bn.prototype._root=function(){return this.parent?this.parent._root():this},bn.prototype.waitFor=function(t){var a,o=this._root(),s=De.resolve(t);o._waitingFor?o._waitingFor=o._waitingFor.then(function(){return s}):(o._waitingFor=s,o._waitingQueue=[],a=o.idbtrans.objectStore(o.storeNames[0]),function d(){for(++o._spinCount;o._waitingQueue.length;)o._waitingQueue.shift()();o._waitingFor&&(a.get(-1/0).onsuccess=d)}());var f=o._waitingFor;return new De(function(d,_){s.then(function(E){return o._waitingQueue.push(at(d.bind(null,E)))},function(E){return o._waitingQueue.push(at(_.bind(null,E)))}).finally(function(){o._waitingFor===f&&(o._waitingFor=null)})})},bn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ye.Abort))},bn.prototype.table=function(t){var a=this._memoizedTables||(this._memoizedTables={});if(k(a,t))return a[t];var o=this.schema[t];if(!o)throw new ye.NotFound("Table "+t+" not part of transaction");return o=new this.db.Table(t,o,this),o.core=this.db.core.table(t),a[t]=o},bn);function bn(){}function $r(t,a,o,s,f,d,_){return{name:t,keyPath:a,unique:o,multi:s,auto:f,compound:d,src:(o&&!_?"&":"")+(s?"*":"")+(f?"++":"")+Zi(a)}}function Zi(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function Xr(t,a,o){return{name:t,primKey:a,indexes:o,mappedClass:null,idxByName:(s=function(f){return[f.name,f]},o.reduce(function(f,d,_){return _=s(d,_),_&&(f[_[0]]=_[1]),f},{}))};var s}var tr=function(t){try{return t.only([[]]),tr=function(){return[[]]},[[]]}catch{return tr=function(){return Rn},Rn}};function ei(t){return t==null?function(){}:typeof t=="string"?(a=t).split(".").length===1?function(o){return o[a]}:function(o){return te(o,a)}:function(o){return te(o,t)};var a}function Ji(t){return[].slice.call(t)}var ol=0;function nr(t){return t==null?":id":typeof t=="string"?t:"[".concat(t.join("+"),"]")}function ll(t,a,R){function s(B){if(B.type===3)return null;if(B.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var M=B.lower,K=B.upper,U=B.lowerOpen,B=B.upperOpen;return M===void 0?K===void 0?null:a.upperBound(K,!!B):K===void 0?a.lowerBound(M,!!U):a.bound(M,K,!!U,!!B)}function f(V){var M,K=V.name;return{name:K,schema:V,mutate:function(U){var B=U.trans,H=U.type,Z=U.keys,J=U.values,re=U.range;return new Promise(function(ve,Ve){ve=at(ve);var Ae=B.objectStore(K),je=Ae.keyPath==null,Ue=H==="put"||H==="add";if(!Ue&&H!=="delete"&&H!=="deleteRange")throw new Error("Invalid operation type: "+H);var Ke,Qe=(Z||J||{length:1}).length;if(Z&&J&&Z.length!==J.length)throw new Error("Given keys array must have same length as given values array.");if(Qe===0)return ve({numFailures:0,failures:{},results:[],lastResult:void 0});function $e($t){++pn,Xn($t)}var nt=[],et=[],pn=0;if(H==="deleteRange"){if(re.type===4)return ve({numFailures:pn,failures:et,results:[],lastResult:void 0});re.type===3?nt.push(Ke=Ae.clear()):nt.push(Ke=Ae.delete(s(re)))}else{var je=Ue?je?[J,Z]:[J,null]:[Z,null],tt=je[0],Wt=je[1];if(Ue)for(var Gt=0;Gt<Qe;++Gt)nt.push(Ke=Wt&&Wt[Gt]!==void 0?Ae[H](tt[Gt],Wt[Gt]):Ae[H](tt[Gt])),Ke.onerror=$e;else for(Gt=0;Gt<Qe;++Gt)nt.push(Ke=Ae[H](tt[Gt])),Ke.onerror=$e}function Pr($t){$t=$t.target.result,nt.forEach(function(Fn,yi){return Fn.error!=null&&(et[yi]=Fn.error)}),ve({numFailures:pn,failures:et,results:H==="delete"?Z:nt.map(function(Fn){return Fn.result}),lastResult:$t})}Ke.onerror=function($t){$e($t),Pr($t)},Ke.onsuccess=Pr})},getMany:function(U){var B=U.trans,H=U.keys;return new Promise(function(Z,J){Z=at(Z);for(var re,ve=B.objectStore(K),Ve=H.length,Ae=new Array(Ve),je=0,Ue=0,Ke=function(nt){nt=nt.target,Ae[nt._pos]=nt.result,++Ue===je&&Z(Ae)},Qe=yn(J),$e=0;$e<Ve;++$e)H[$e]!=null&&((re=ve.get(H[$e]))._pos=$e,re.onsuccess=Ke,re.onerror=Qe,++je);je===0&&Z(Ae)})},get:function(U){var B=U.trans,H=U.key;return new Promise(function(Z,J){Z=at(Z);var re=B.objectStore(K).get(H);re.onsuccess=function(ve){return Z(ve.target.result)},re.onerror=yn(J)})},query:(M=P,function(U){return new Promise(function(B,H){B=at(B);var Z,J,re,je=U.trans,ve=U.values,Ve=U.limit,Ke=U.query,Ae=Ve===1/0?void 0:Ve,Ue=Ke.index,Ke=Ke.range,je=je.objectStore(K),Ue=Ue.isPrimaryKey?je:je.index(Ue.name),Ke=s(Ke);if(Ve===0)return B({result:[]});M?((Ae=ve?Ue.getAll(Ke,Ae):Ue.getAllKeys(Ke,Ae)).onsuccess=function(Qe){return B({result:Qe.target.result})},Ae.onerror=yn(H)):(Z=0,J=!ve&&"openKeyCursor"in Ue?Ue.openKeyCursor(Ke):Ue.openCursor(Ke),re=[],J.onsuccess=function(Qe){var $e=J.result;return $e?(re.push(ve?$e.value:$e.primaryKey),++Z===Ve?B({result:re}):void $e.continue()):B({result:re})},J.onerror=yn(H))})}),openCursor:function(U){var B=U.trans,H=U.values,Z=U.query,J=U.reverse,re=U.unique;return new Promise(function(ve,Ve){ve=at(ve);var Ue=Z.index,Ae=Z.range,je=B.objectStore(K),je=Ue.isPrimaryKey?je:je.index(Ue.name),Ue=J?re?"prevunique":"prev":re?"nextunique":"next",Ke=!H&&"openKeyCursor"in je?je.openKeyCursor(s(Ae),Ue):je.openCursor(s(Ae),Ue);Ke.onerror=yn(Ve),Ke.onsuccess=at(function(Qe){var $e,nt,et,pn,tt=Ke.result;tt?(tt.___id=++ol,tt.done=!1,$e=tt.continue.bind(tt),nt=(nt=tt.continuePrimaryKey)&&nt.bind(tt),et=tt.advance.bind(tt),pn=function(){throw new Error("Cursor not stopped")},tt.trans=B,tt.stop=tt.continue=tt.continuePrimaryKey=tt.advance=function(){throw new Error("Cursor not started")},tt.fail=at(Ve),tt.next=function(){var Wt=this,Gt=1;return this.start(function(){return Gt--?Wt.continue():Wt.stop()}).then(function(){return Wt})},tt.start=function(Wt){function Gt(){if(Ke.result)try{Wt()}catch($t){tt.fail($t)}else tt.done=!0,tt.start=function(){throw new Error("Cursor behind last entry")},tt.stop()}var Pr=new Promise(function($t,Fn){$t=at($t),Ke.onerror=yn(Fn),tt.fail=Fn,tt.stop=function(yi){tt.stop=tt.continue=tt.continuePrimaryKey=tt.advance=pn,$t(yi)}});return Ke.onsuccess=at(function($t){Ke.onsuccess=Gt,Gt()}),tt.continue=$e,tt.continuePrimaryKey=nt,tt.advance=et,Gt(),Pr},ve(tt)):ve(null)},Ve)})},count:function(U){var B=U.query,H=U.trans,Z=B.index,J=B.range;return new Promise(function(re,ve){var Ve=H.objectStore(K),Ae=Z.isPrimaryKey?Ve:Ve.index(Z.name),Ve=s(J),Ae=Ve?Ae.count(Ve):Ae.count();Ae.onsuccess=at(function(je){return re(je.target.result)}),Ae.onerror=yn(ve)})}}}var d,_,E,j=(_=R,E=Ji((d=t).objectStoreNames),{schema:{name:d.name,tables:E.map(function(V){return _.objectStore(V)}).map(function(V){var M=V.keyPath,B=V.autoIncrement,K=m(M),U={},B={name:V.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:M==null,compound:K,keyPath:M,autoIncrement:B,unique:!0,extractKey:ei(M)},indexes:Ji(V.indexNames).map(function(H){return V.index(H)}).map(function(re){var Z=re.name,J=re.unique,ve=re.multiEntry,re=re.keyPath,ve={name:Z,compound:m(re),keyPath:re,unique:J,multiEntry:ve,extractKey:ei(re)};return U[nr(re)]=ve}),getIndexByKeyPath:function(H){return U[nr(H)]}};return U[":id"]=B.primaryKey,M!=null&&(U[nr(M)]=B.primaryKey),B})},hasGetAll:0<E.length&&"getAll"in _.objectStore(E[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),R=j.schema,P=j.hasGetAll,j=R.tables.map(f),A={};return j.forEach(function(V){return A[V.name]=V}),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(V){if(!A[V])throw new Error("Table '".concat(V,"' not found"));return A[V]},MIN_KEY:-1/0,MAX_KEY:tr(a),schema:R}}function sl(t,a,o,s){var f=o.IDBKeyRange;return o.indexedDB,{dbcore:(s=ll(a,f,s),t.dbcore.reduce(function(d,_){return _=_.create,r(r({},d),_(d))},s))}}function _r(t,s){var o=s.db,s=sl(t._middlewares,o,t._deps,s);t.core=s.dbcore,t.tables.forEach(function(f){var d=f.name;t.core.schema.tables.some(function(_){return _.name===d})&&(f.core=t.core.table(d),t[d]instanceof t.Table&&(t[d].core=f.core))})}function yr(t,a,o,s){o.forEach(function(f){var d=s[f];a.forEach(function(_){var E=function R(P,j){return x(P,j)||(P=g(P))&&R(P,j)}(_,f);(!E||"value"in E&&E.value===void 0)&&(_===t.Transaction.prototype||_ instanceof t.Transaction?X(_,f,{get:function(){return this.table(f)},set:function(R){q(this,f,{value:R,writable:!0,configurable:!0,enumerable:!0})}}):_[f]=new t.Table(f,d))})})}function ti(t,a){a.forEach(function(o){for(var s in o)o[s]instanceof t.Table&&delete o[s]})}function ul(t,a){return t._cfg.version-a._cfg.version}function cl(t,a,o,s){var f=t._dbSchema;o.objectStoreNames.contains("$meta")&&!f.$meta&&(f.$meta=Xr("$meta",$i("")[0],[]),t._storeNames.push("$meta"));var d=t._createTransaction("readwrite",t._storeNames,f);d.create(o),d._completion.catch(s);var _=d._reject.bind(d),E=Fe.transless||Fe;tn(function(){return Fe.trans=d,Fe.transless=E,a!==0?(_r(t,o),P=a,((R=d).storeNames.includes("$meta")?R.table("$meta").get("version").then(function(j){return j??P}):De.resolve(P)).then(function(j){return V=j,M=d,K=o,U=[],j=(A=t)._versions,B=A._dbSchema=wr(0,A.idbdb,K),(j=j.filter(function(H){return H._cfg.version>=V})).length!==0?(j.forEach(function(H){U.push(function(){var Z=B,J=H._cfg.dbschema;kr(A,Z,K),kr(A,J,K),B=A._dbSchema=J;var re=ni(Z,J);re.add.forEach(function(Ue){ri(K,Ue[0],Ue[1].primKey,Ue[1].indexes)}),re.change.forEach(function(Ue){if(Ue.recreate)throw new ye.Upgrade("Not yet support for changing primary key");var Ke=K.objectStore(Ue.name);Ue.add.forEach(function(Qe){return br(Ke,Qe)}),Ue.change.forEach(function(Qe){Ke.deleteIndex(Qe.name),br(Ke,Qe)}),Ue.del.forEach(function(Qe){return Ke.deleteIndex(Qe)})});var ve=H._cfg.contentUpgrade;if(ve&&H._cfg.version>V){_r(A,K),M._memoizedTables={};var Ve=ie(J);re.del.forEach(function(Ue){Ve[Ue]=Z[Ue]}),ti(A,[A.Transaction.prototype]),yr(A,[A.Transaction.prototype],u(Ve),Ve),M.schema=Ve;var Ae,je=Q(ve);return je&&kt(),re=De.follow(function(){var Ue;(Ae=ve(M))&&je&&(Ue=hn.bind(null,null),Ae.then(Ue,Ue))}),Ae&&typeof Ae.then=="function"?De.resolve(Ae):re.then(function(){return Ae})}}),U.push(function(Z){var J,re,ve=H._cfg.dbschema;J=ve,re=Z,[].slice.call(re.db.objectStoreNames).forEach(function(Ve){return J[Ve]==null&&re.db.deleteObjectStore(Ve)}),ti(A,[A.Transaction.prototype]),yr(A,[A.Transaction.prototype],A._storeNames,A._dbSchema),M.schema=A._dbSchema}),U.push(function(Z){A.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(A.idbdb.version/10)===H._cfg.version?(A.idbdb.deleteObjectStore("$meta"),delete A._dbSchema.$meta,A._storeNames=A._storeNames.filter(function(J){return J!=="$meta"})):Z.objectStore("$meta").put(H._cfg.version,"version"))})}),function H(){return U.length?De.resolve(U.shift()(M.idbtrans)).then(H):De.resolve()}().then(function(){Qi(B,K)})):De.resolve();var A,V,M,K,U,B}).catch(_)):(u(f).forEach(function(j){ri(o,j,f[j].primKey,f[j].indexes)}),_r(t,o),void De.follow(function(){return t.on.populate.fire(d)}).catch(_));var R,P})}function fl(t,a){Qi(t._dbSchema,a),a.db.version%10!=0||a.objectStoreNames.contains("$meta")||a.db.createObjectStore("$meta").add(Math.ceil(a.db.version/10-1),"version");var o=wr(0,t.idbdb,a);kr(t,t._dbSchema,a);for(var s=0,f=ni(o,t._dbSchema).change;s<f.length;s++){var d=function(_){if(_.change.length||_.recreate)return console.warn("Unable to patch indexes of table ".concat(_.name," because it has changes on the type of index or primary key.")),{value:void 0};var E=a.objectStore(_.name);_.add.forEach(function(R){_t&&console.debug("Dexie upgrade patch: Creating missing index ".concat(_.name,".").concat(R.src)),br(E,R)})}(f[s]);if(typeof d=="object")return d.value}}function ni(t,a){var o,s={del:[],add:[],change:[]};for(o in t)a[o]||s.del.push(o);for(o in a){var f=t[o],d=a[o];if(f){var _={name:o,def:d,recreate:!1,del:[],add:[],change:[]};if(""+(f.primKey.keyPath||"")!=""+(d.primKey.keyPath||"")||f.primKey.auto!==d.primKey.auto)_.recreate=!0,s.change.push(_);else{var E=f.idxByName,R=d.idxByName,P=void 0;for(P in E)R[P]||_.del.push(P);for(P in R){var j=E[P],A=R[P];j?j.src!==A.src&&_.change.push(A):_.add.push(A)}(0<_.del.length||0<_.add.length||0<_.change.length)&&s.change.push(_)}}else s.add.push([o,d])}return s}function ri(t,a,o,s){var f=t.db.createObjectStore(a,o.keyPath?{keyPath:o.keyPath,autoIncrement:o.auto}:{autoIncrement:o.auto});return s.forEach(function(d){return br(f,d)}),f}function Qi(t,a){u(t).forEach(function(o){a.db.objectStoreNames.contains(o)||(_t&&console.debug("Dexie: Creating missing table",o),ri(a,o,t[o].primKey,t[o].indexes))})}function br(t,a){t.createIndex(a.name,a.keyPath,{unique:a.unique,multiEntry:a.multi})}function wr(t,a,o){var s={};return D(a.objectStoreNames,0).forEach(function(f){for(var d=o.objectStore(f),_=$r(Zi(P=d.keyPath),P||"",!0,!1,!!d.autoIncrement,P&&typeof P!="string",!0),E=[],R=0;R<d.indexNames.length;++R){var j=d.index(d.indexNames[R]),P=j.keyPath,j=$r(j.name,P,!!j.unique,!!j.multiEntry,!1,P&&typeof P!="string",!1);E.push(j)}s[f]=Xr(f,_,E)}),s}function kr(t,a,o){for(var s=o.db.objectStoreNames,f=0;f<s.length;++f){var d=s[f],_=o.objectStore(d);t._hasGetAll="getAll"in _;for(var E=0;E<_.indexNames.length;++E){var R=_.indexNames[E],P=_.index(R).keyPath,j=typeof P=="string"?P:"["+D(P).join("+")+"]";!a[d]||(P=a[d].idxByName[j])&&(P.name=R,delete a[d].idxByName[j],a[d].idxByName[R]=P)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&c.WorkerGlobalScope&&c instanceof c.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}function $i(t){return t.split(",").map(function(a,o){var s=(a=a.trim()).replace(/([&*]|\+\+)/g,""),f=/^\[/.test(s)?s.match(/^\[(.*)\]$/)[1].split("+"):s;return $r(s,f||null,/\&/.test(a),/\*/.test(a),/\+\+/.test(a),m(f),o===0)})}var dl=(Er.prototype._parseStoresSpec=function(t,a){u(t).forEach(function(o){if(t[o]!==null){var s=$i(t[o]),f=s.shift();if(f.unique=!0,f.multi)throw new ye.Schema("Primary key cannot be multi-valued");s.forEach(function(d){if(d.auto)throw new ye.Schema("Only primary key can be marked as autoIncrement (++)");if(!d.keyPath)throw new ye.Schema("Index must have a name and cannot be an empty string")}),a[o]=Xr(o,f,s)}})},Er.prototype.stores=function(o){var a=this.db;this._cfg.storesSource=this._cfg.storesSource?y(this._cfg.storesSource,o):o;var o=a._versions,s={},f={};return o.forEach(function(d){y(s,d._cfg.storesSource),f=d._cfg.dbschema={},d._parseStoresSpec(s,f)}),a._dbSchema=f,ti(a,[a._allTables,a,a.Transaction.prototype]),yr(a,[a._allTables,a,a.Transaction.prototype,this._cfg.tables],u(f),f),a._storeNames=u(f),this},Er.prototype.upgrade=function(t){return this._cfg.contentUpgrade=it(this._cfg.contentUpgrade||Ee,t),this},Er);function Er(){}function ii(t,a){var o=t._dbNamesDB;return o||(o=t._dbNamesDB=new Tn(hr,{addons:[],indexedDB:t,IDBKeyRange:a})).version(1).stores({dbnames:"name"}),o.table("dbnames")}function ai(t){return t&&typeof t.databases=="function"}function oi(t){return tn(function(){return Fe.letThrough=!0,t()})}function li(t){return!("from"in t)}var Ht=function(t,a){if(!this){var o=new Ht;return t&&"d"in t&&y(o,t),o}y(this,arguments.length?{d:1,from:t,to:1<arguments.length?a:t}:{d:0})};function rr(t,a,o){var s=dt(a,o);if(!isNaN(s)){if(0<s)throw RangeError();if(li(t))return y(t,{from:a,to:o,d:1});var f=t.l,s=t.r;if(dt(o,t.from)<0)return f?rr(f,a,o):t.l={from:a,to:o,d:1,l:null,r:null},Xi(t);if(0<dt(a,t.to))return s?rr(s,a,o):t.r={from:a,to:o,d:1,l:null,r:null},Xi(t);dt(a,t.from)<0&&(t.from=a,t.l=null,t.d=s?s.d+1:1),0<dt(o,t.to)&&(t.to=o,t.r=null,t.d=t.l?t.l.d+1:1),o=!t.r,f&&!t.l&&ir(t,f),s&&o&&ir(t,s)}}function ir(t,a){li(a)||function o(s,R){var d=R.from,_=R.to,E=R.l,R=R.r;rr(s,d,_),E&&o(s,E),R&&o(s,R)}(t,a)}function Dr(t,a){var o=si(a),s=o.next();if(s.done)return!1;for(var f=s.value,d=si(t),_=d.next(f.from),E=_.value;!s.done&&!_.done;){if(dt(E.from,f.to)<=0&&0<=dt(E.to,f.from))return!0;dt(f.from,E.from)<0?f=(s=o.next(E.from)).value:E=(_=d.next(f.from)).value}return!1}function si(t){var a=li(t)?null:{s:0,n:t};return{next:function(o){for(var s=0<arguments.length;a;)switch(a.s){case 0:if(a.s=1,s)for(;a.n.l&&dt(o,a.n.from)<0;)a={up:a,n:a.n.l,s:1};else for(;a.n.l;)a={up:a,n:a.n.l,s:1};case 1:if(a.s=2,!s||dt(o,a.n.to)<=0)return{value:a.n,done:!1};case 2:if(a.n.r){a.s=3,a={up:a,n:a.n.r,s:0};continue}case 3:a=a.up}return{done:!0}}}}function Xi(t){var a,o,s=(((a=t.r)===null||a===void 0?void 0:a.d)||0)-(((o=t.l)===null||o===void 0?void 0:o.d)||0),f=1<s?"r":s<-1?"l":"";f&&(a=f=="r"?"l":"r",o=r({},t),s=t[f],t.from=s.from,t.to=s.to,t[f]=s[f],o[f]=s[a],(t[a]=o).d=ea(o)),t.d=ea(t)}function ea(o){var a=o.r,o=o.l;return(a?o?Math.max(a.d,o.d):a.d:o?o.d:0)+1}function Sr(t,a){return u(a).forEach(function(o){t[o]?ir(t[o],a[o]):t[o]=function s(f){var d,_,E={};for(d in f)k(f,d)&&(_=f[d],E[d]=!_||typeof _!="object"||Oe.has(_.constructor)?_:s(_));return E}(a[o])}),t}function ui(t,a){return t.all||a.all||Object.keys(t).some(function(o){return a[o]&&Dr(a[o],t[o])})}N(Ht.prototype,((un={add:function(t){return ir(this,t),this},addKey:function(t){return rr(this,t,t),this},addKeys:function(t){var a=this;return t.forEach(function(o){return rr(a,o,o)}),this}})[Le]=function(){return si(this)},un));var Bn={},ci={},fi=!1;function Tr(t){Sr(ci,t),fi||(fi=!0,setTimeout(function(){fi=!1,di(ci,!(ci={}))},0))}function di(t,a){a===void 0&&(a=!1);var o=new Set;if(t.all)for(var s=0,f=Object.values(Bn);s<f.length;s++)ta(_=f[s],t,o,a);else for(var d in t){var _,E=/^idb\:\/\/(.*)\/(.*)\//.exec(d);E&&(d=E[1],E=E[2],(_=Bn["idb://".concat(d,"/").concat(E)])&&ta(_,t,o,a))}o.forEach(function(R){return R()})}function ta(t,a,o,s){for(var f=[],d=0,_=Object.entries(t.queries.query);d<_.length;d++){for(var E=_[d],R=E[0],P=[],j=0,A=E[1];j<A.length;j++){var V=A[j];ui(a,V.obsSet)?V.subscribers.forEach(function(B){return o.add(B)}):s&&P.push(V)}s&&f.push([R,P])}if(s)for(var M=0,K=f;M<K.length;M++){var U=K[M],R=U[0],P=U[1];t.queries.query[R]=P}}function hl(t){var a=t._state,o=t._deps.indexedDB;if(a.isBeingOpened||t.idbdb)return a.dbReadyPromise.then(function(){return a.dbOpenError?Ot(a.dbOpenError):t});a.isBeingOpened=!0,a.dbOpenError=null,a.openComplete=!1;var s=a.openCanceller,f=Math.round(10*t.verno),d=!1;function _(){if(a.openCanceller!==s)throw new ye.DatabaseClosed("db.open() was cancelled")}function E(){return new De(function(V,M){if(_(),!o)throw new ye.MissingAPI;var K=t.name,U=a.autoSchema||!f?o.open(K):o.open(K,f);if(!U)throw new ye.MissingAPI;U.onerror=yn(M),U.onblocked=at(t._fireOnBlocked),U.onupgradeneeded=at(function(B){var H;j=U.transaction,a.autoSchema&&!t._options.allowEmptyDB?(U.onerror=Xn,j.abort(),U.result.close(),(H=o.deleteDatabase(K)).onsuccess=H.onerror=at(function(){M(new ye.NoSuchDatabase("Database ".concat(K," doesnt exist")))})):(j.onerror=yn(M),B=B.oldVersion>Math.pow(2,62)?0:B.oldVersion,A=B<1,t.idbdb=U.result,d&&fl(t,j),cl(t,B/10,j,M))},M),U.onsuccess=at(function(){j=null;var B,H,Z,J,re,ve=t.idbdb=U.result,Ve=D(ve.objectStoreNames);if(0<Ve.length)try{var Ae=ve.transaction((J=Ve).length===1?J[0]:J,"readonly");if(a.autoSchema)H=ve,Z=Ae,(B=t).verno=H.version/10,Z=B._dbSchema=wr(0,H,Z),B._storeNames=D(H.objectStoreNames,0),yr(B,[B._allTables],u(Z),Z);else if(kr(t,t._dbSchema,Ae),((re=ni(wr(0,(re=t).idbdb,Ae),re._dbSchema)).add.length||re.change.some(function(je){return je.add.length||je.change.length}))&&!d)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),ve.close(),f=ve.version+1,d=!0,V(E());_r(t,Ae)}catch{}xn.push(t),ve.onversionchange=at(function(je){a.vcFired=!0,t.on("versionchange").fire(je)}),ve.onclose=at(function(je){t.on("close").fire(je)}),A&&(re=t._deps,Ae=K,ve=re.indexedDB,re=re.IDBKeyRange,ai(ve)||Ae===hr||ii(ve,re).put({name:Ae}).catch(Ee)),V()},M)}).catch(function(V){switch(V==null?void 0:V.name){case"UnknownError":if(0<a.PR1398_maxLoop)return a.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),E();break;case"VersionError":if(0<f)return f=0,E()}return De.reject(V)})}var R,P=a.dbReadyResolve,j=null,A=!1;return De.race([s,(typeof navigator>"u"?De.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(V){function M(){return indexedDB.databases().finally(V)}R=setInterval(M,100),M()}).finally(function(){return clearInterval(R)}):Promise.resolve()).then(E)]).then(function(){return _(),a.onReadyBeingFired=[],De.resolve(oi(function(){return t.on.ready.fire(t.vip)})).then(function V(){if(0<a.onReadyBeingFired.length){var M=a.onReadyBeingFired.reduce(it,Ee);return a.onReadyBeingFired=[],De.resolve(oi(function(){return M(t.vip)})).then(V)}})}).finally(function(){a.openCanceller===s&&(a.onReadyBeingFired=null,a.isBeingOpened=!1)}).catch(function(V){a.dbOpenError=V;try{j&&j.abort()}catch{}return s===a.openCanceller&&t._close(),Ot(V)}).finally(function(){a.openComplete=!0,P()}).then(function(){var V;return A&&(V={},t.tables.forEach(function(M){M.schema.indexes.forEach(function(K){K.name&&(V["idb://".concat(t.name,"/").concat(M.name,"/").concat(K.name)]=new Ht(-1/0,[[[]]]))}),V["idb://".concat(t.name,"/").concat(M.name,"/")]=V["idb://".concat(t.name,"/").concat(M.name,"/:dels")]=new Ht(-1/0,[[[]]])}),On(er).fire(V),di(V,!0)),t})}function hi(t){function a(d){return t.next(d)}var o=f(a),s=f(function(d){return t.throw(d)});function f(d){return function(R){var E=d(R),R=E.value;return E.done?R:R&&typeof R.then=="function"?R.then(o,s):m(R)?Promise.all(R).then(o,s):o(R)}}return f(a)()}function Cr(t,a,o){for(var s=m(t)?t.slice():[t],f=0;f<o;++f)s.push(a);return s}var pl={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return r(r({},t),{table:function(a){var o=t.table(a),s=o.schema,f={},d=[];function _(A,V,M){var K=nr(A),U=f[K]=f[K]||[],B=A==null?0:typeof A=="string"?1:A.length,H=0<V,H=r(r({},M),{name:H?"".concat(K,"(virtual-from:").concat(M.name,")"):M.name,lowLevelIndex:M,isVirtual:H,keyTail:V,keyLength:B,extractKey:ei(A),unique:!H&&M.unique});return U.push(H),H.isPrimaryKey||d.push(H),1<B&&_(B===2?A[0]:A.slice(0,B-1),V+1,M),U.sort(function(Z,J){return Z.keyTail-J.keyTail}),H}a=_(s.primaryKey.keyPath,0,s.primaryKey),f[":id"]=[a];for(var E=0,R=s.indexes;E<R.length;E++){var P=R[E];_(P.keyPath,0,P)}function j(A){var V,M=A.query.index;return M.isVirtual?r(r({},A),{query:{index:M.lowLevelIndex,range:(V=A.query.range,M=M.keyTail,{type:V.type===1?2:V.type,lower:Cr(V.lower,V.lowerOpen?t.MAX_KEY:t.MIN_KEY,M),lowerOpen:!0,upper:Cr(V.upper,V.upperOpen?t.MIN_KEY:t.MAX_KEY,M),upperOpen:!0})}}):A}return r(r({},o),{schema:r(r({},s),{primaryKey:a,indexes:d,getIndexByKeyPath:function(A){return(A=f[nr(A)])&&A[0]}}),count:function(A){return o.count(j(A))},query:function(A){return o.query(j(A))},openCursor:function(A){var V=A.query.index,M=V.keyTail,K=V.isVirtual,U=V.keyLength;return K?o.openCursor(j(A)).then(function(H){return H&&B(H)}):o.openCursor(A);function B(H){return Object.create(H,{continue:{value:function(Z){Z!=null?H.continue(Cr(Z,A.reverse?t.MAX_KEY:t.MIN_KEY,M)):A.unique?H.continue(H.key.slice(0,U).concat(A.reverse?t.MIN_KEY:t.MAX_KEY,M)):H.continue()}},continuePrimaryKey:{value:function(Z,J){H.continuePrimaryKey(Cr(Z,t.MAX_KEY,M),J)}},primaryKey:{get:function(){return H.primaryKey}},key:{get:function(){var Z=H.key;return U===1?Z[0]:Z.slice(0,U)}},value:{get:function(){return H.value}}})}}})}})}};function pi(t,a,o,s){return o=o||{},s=s||"",u(t).forEach(function(f){var d,_,E;k(a,f)?(d=t[f],_=a[f],typeof d=="object"&&typeof _=="object"&&d&&_?(E=Re(d))!==Re(_)?o[s+f]=a[f]:E==="Object"?pi(d,_,o,s+f+"."):d!==_&&(o[s+f]=a[f]):d!==_&&(o[s+f]=a[f])):o[s+f]=void 0}),u(a).forEach(function(f){k(t,f)||(o[s+f]=a[f])}),o}function mi(t,a){return a.type==="delete"?a.keys:a.keys||a.values.map(t.extractKey)}var ml={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return r(r({},t),{table:function(a){var o=t.table(a),s=o.schema.primaryKey;return r(r({},o),{mutate:function(f){var d=Fe.trans,_=d.table(a).hook,E=_.deleting,R=_.creating,P=_.updating;switch(f.type){case"add":if(R.fire===Ee)break;return d._promise("readwrite",function(){return j(f)},!0);case"put":if(R.fire===Ee&&P.fire===Ee)break;return d._promise("readwrite",function(){return j(f)},!0);case"delete":if(E.fire===Ee)break;return d._promise("readwrite",function(){return j(f)},!0);case"deleteRange":if(E.fire===Ee)break;return d._promise("readwrite",function(){return function A(V,M,K){return o.query({trans:V,values:!1,query:{index:s,range:M},limit:K}).then(function(U){var B=U.result;return j({type:"delete",keys:B,trans:V}).then(function(H){return 0<H.numFailures?Promise.reject(H.failures[0]):B.length<K?{failures:[],numFailures:0,lastResult:void 0}:A(V,r(r({},M),{lower:B[B.length-1],lowerOpen:!0}),K)})})}(f.trans,f.range,1e4)},!0)}return o.mutate(f);function j(A){var V,M,K,U=Fe.trans,B=A.keys||mi(s,A);if(!B)throw new Error("Keys missing");return(A=A.type==="add"||A.type==="put"?r(r({},A),{keys:B}):r({},A)).type!=="delete"&&(A.values=l([],A.values)),A.keys&&(A.keys=l([],A.keys)),V=o,K=B,((M=A).type==="add"?Promise.resolve([]):V.getMany({trans:M.trans,keys:K,cache:"immutable"})).then(function(H){var Z=B.map(function(J,re){var ve,Ve,Ae,je=H[re],Ue={onerror:null,onsuccess:null};return A.type==="delete"?E.fire.call(Ue,J,je,U):A.type==="add"||je===void 0?(ve=R.fire.call(Ue,J,A.values[re],U),J==null&&ve!=null&&(A.keys[re]=J=ve,s.outbound||ee(A.values[re],s.keyPath,J))):(ve=pi(je,A.values[re]),(Ve=P.fire.call(Ue,ve,J,je,U))&&(Ae=A.values[re],Object.keys(Ve).forEach(function(Ke){k(Ae,Ke)?Ae[Ke]=Ve[Ke]:ee(Ae,Ke,Ve[Ke])}))),Ue});return o.mutate(A).then(function(J){for(var re=J.failures,ve=J.results,Ve=J.numFailures,J=J.lastResult,Ae=0;Ae<B.length;++Ae){var je=(ve||B)[Ae],Ue=Z[Ae];je==null?Ue.onerror&&Ue.onerror(re[Ae]):Ue.onsuccess&&Ue.onsuccess(A.type==="put"&&H[Ae]?A.values[Ae]:je)}return{failures:re,results:ve,numFailures:Ve,lastResult:J}}).catch(function(J){return Z.forEach(function(re){return re.onerror&&re.onerror(J)}),Promise.reject(J)})})}}})}})}};function na(t,a,o){try{if(!a||a.keys.length<t.length)return null;for(var s=[],f=0,d=0;f<a.keys.length&&d<t.length;++f)dt(a.keys[f],t[d])===0&&(s.push(o?le(a.values[f]):a.values[f]),++d);return s.length===t.length?s:null}catch{return null}}var gl={stack:"dbcore",level:-1,create:function(t){return{table:function(a){var o=t.table(a);return r(r({},o),{getMany:function(s){if(!s.cache)return o.getMany(s);var f=na(s.keys,s.trans._cache,s.cache==="clone");return f?De.resolve(f):o.getMany(s).then(function(d){return s.trans._cache={keys:s.keys,values:s.cache==="clone"?le(d):d},d})},mutate:function(s){return s.type!=="add"&&(s.trans._cache=null),o.mutate(s)}})}}}};function ra(t,a){return t.trans.mode==="readonly"&&!!t.subscr&&!t.trans.explicit&&t.trans.db._options.cache!=="disabled"&&!a.schema.primaryKey.outbound}function ia(t,a){switch(t){case"query":return a.values&&!a.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var vl={stack:"dbcore",level:0,name:"Observability",create:function(t){var a=t.schema.name,o=new Ht(t.MIN_KEY,t.MAX_KEY);return r(r({},t),{transaction:function(s,f,d){if(Fe.subscr&&f!=="readonly")throw new ye.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Fe.querier));return t.transaction(s,f,d)},table:function(s){var f=t.table(s),d=f.schema,_=d.primaryKey,A=d.indexes,E=_.extractKey,R=_.outbound,P=_.autoIncrement&&A.filter(function(M){return M.compound&&M.keyPath.includes(_.keyPath)}),j=r(r({},f),{mutate:function(M){function K(Ke){return Ke="idb://".concat(a,"/").concat(s,"/").concat(Ke),J[Ke]||(J[Ke]=new Ht)}var U,B,H,Z=M.trans,J=M.mutatedParts||(M.mutatedParts={}),re=K(""),ve=K(":dels"),Ve=M.type,Ue=M.type==="deleteRange"?[M.range]:M.type==="delete"?[M.keys]:M.values.length<50?[mi(_,M).filter(function(Ke){return Ke}),M.values]:[],Ae=Ue[0],je=Ue[1],Ue=M.trans._cache;return m(Ae)?(re.addKeys(Ae),(Ue=Ve==="delete"||Ae.length===je.length?na(Ae,Ue):null)||ve.addKeys(Ae),(Ue||je)&&(U=K,B=Ue,H=je,d.indexes.forEach(function(Ke){var Qe=U(Ke.name||"");function $e(et){return et!=null?Ke.extractKey(et):null}function nt(et){return Ke.multiEntry&&m(et)?et.forEach(function(pn){return Qe.addKey(pn)}):Qe.addKey(et)}(B||H).forEach(function(et,Wt){var tt=B&&$e(B[Wt]),Wt=H&&$e(H[Wt]);dt(tt,Wt)!==0&&(tt!=null&&nt(tt),Wt!=null&&nt(Wt))})}))):Ae?(je={from:Ae.lower,to:Ae.upper},ve.add(je),re.add(je)):(re.add(o),ve.add(o),d.indexes.forEach(function(Ke){return K(Ke.name).add(o)})),f.mutate(M).then(function(Ke){return!Ae||M.type!=="add"&&M.type!=="put"||(re.addKeys(Ke.results),P&&P.forEach(function(Qe){var $e=M.values.map(function(et){return Qe.extractKey(et)}),nt=Qe.keyPath.findIndex(function(et){return et===_.keyPath});Ke.results.forEach(function(et){return $e[nt]=et}),K(Qe.name).addKeys($e)})),Z.mutatedParts=Sr(Z.mutatedParts||{},J),Ke})}}),A=function(K){var U=K.query,K=U.index,U=U.range;return[K,new Ht((K=U.lower)!==null&&K!==void 0?K:t.MIN_KEY,(U=U.upper)!==null&&U!==void 0?U:t.MAX_KEY)]},V={get:function(M){return[_,new Ht(M.key)]},getMany:function(M){return[_,new Ht().addKeys(M.keys)]},count:A,query:A,openCursor:A};return u(V).forEach(function(M){j[M]=function(K){var U=Fe.subscr,B=!!U,H=ra(Fe,f)&&ia(M,K)?K.obsSet={}:U;if(B){var Z=function(je){return je="idb://".concat(a,"/").concat(s,"/").concat(je),H[je]||(H[je]=new Ht)},J=Z(""),re=Z(":dels"),U=V[M](K),B=U[0],U=U[1];if((M==="query"&&B.isPrimaryKey&&!K.values?re:Z(B.name||"")).add(U),!B.isPrimaryKey){if(M!=="count"){var ve=M==="query"&&R&&K.values&&f.query(r(r({},K),{values:!1}));return f[M].apply(this,arguments).then(function(je){if(M==="query"){if(R&&K.values)return ve.then(function($e){return $e=$e.result,J.addKeys($e),je});var Ue=K.values?je.result.map(E):je.result;(K.values?J:re).addKeys(Ue)}else if(M==="openCursor"){var Ke=je,Qe=K.values;return Ke&&Object.create(Ke,{key:{get:function(){return re.addKey(Ke.primaryKey),Ke.key}},primaryKey:{get:function(){var $e=Ke.primaryKey;return re.addKey($e),$e}},value:{get:function(){return Qe&&J.addKey(Ke.primaryKey),Ke.value}}})}return je})}re.add(o)}}return f[M].apply(this,arguments)}}),j}})}};function aa(t,a,o){if(o.numFailures===0)return a;if(a.type==="deleteRange")return null;var s=a.keys?a.keys.length:"values"in a&&a.values?a.values.length:1;return o.numFailures===s?null:(a=r({},a),m(a.keys)&&(a.keys=a.keys.filter(function(f,d){return!(d in o.failures)})),"values"in a&&m(a.values)&&(a.values=a.values.filter(function(f,d){return!(d in o.failures)})),a)}function gi(t,a){return o=t,((s=a).lower===void 0||(s.lowerOpen?0<dt(o,s.lower):0<=dt(o,s.lower)))&&(t=t,(a=a).upper===void 0||(a.upperOpen?dt(t,a.upper)<0:dt(t,a.upper)<=0));var o,s}function oa(t,a,V,s,f,d){if(!V||V.length===0)return t;var _=a.query.index,E=_.multiEntry,R=a.query.range,P=s.schema.primaryKey.extractKey,j=_.extractKey,A=(_.lowLevelIndex||_).extractKey,V=V.reduce(function(M,K){var U=M,B=K.type==="add"||K.type==="put"?K.values.filter(function(re){return re=j(re),E&&m(re)?re.some(function(ve){return gi(ve,R)}):gi(re,R)}).map(function(re){return re=le(re),d&&Object.freeze(re),re}):[];switch(K.type){case"add":U=M.concat(a.values?B:B.map(function(ve){return P(ve)}));break;case"put":var H=new Ht().addKeys(K.values.map(function(ve){return P(ve)})),U=M.filter(function(ve){return ve=a.values?P(ve):ve,!Dr(new Ht(ve),H)}).concat(a.values?B:B.map(function(ve){return P(ve)}));break;case"delete":var Z=new Ht().addKeys(K.keys);U=M.filter(function(ve){return ve=a.values?P(ve):ve,!Dr(new Ht(ve),Z)});break;case"deleteRange":var J=K.range;U=M.filter(function(ve){return!gi(P(ve),J)})}return U},t);return V===t?t:(V.sort(function(M,K){return dt(A(M),A(K))||dt(P(M),P(K))}),a.limit&&a.limit<1/0&&(V.length>a.limit?V.length=a.limit:t.length===a.limit&&V.length<a.limit&&(f.dirty=!0)),d?Object.freeze(V):V)}function la(t,a){return dt(t.lower,a.lower)===0&&dt(t.upper,a.upper)===0&&!!t.lowerOpen==!!a.lowerOpen&&!!t.upperOpen==!!a.upperOpen}function _l(t,a){return function(o,s,f,d){if(o===void 0)return s!==void 0?-1:0;if(s===void 0)return 1;if((s=dt(o,s))===0){if(f&&d)return 0;if(f)return 1;if(d)return-1}return s}(t.lower,a.lower,t.lowerOpen,a.lowerOpen)<=0&&0<=function(o,s,f,d){if(o===void 0)return s!==void 0?1:0;if(s===void 0)return-1;if((s=dt(o,s))===0){if(f&&d)return 0;if(f)return-1;if(d)return 1}return s}(t.upper,a.upper,t.upperOpen,a.upperOpen)}function yl(t,a,o,s){t.subscribers.add(o),s.addEventListener("abort",function(){var f,d;t.subscribers.delete(o),t.subscribers.size===0&&(f=t,d=a,setTimeout(function(){f.subscribers.size===0&&Te(d,f)},3e3))})}var bl={stack:"dbcore",level:0,name:"Cache",create:function(t){var a=t.schema.name;return r(r({},t),{transaction:function(o,s,f){var d,_,E=t.transaction(o,s,f);return s==="readwrite"&&(_=(d=new AbortController).signal,f=function(R){return function(){if(d.abort(),s==="readwrite"){for(var P=new Set,j=0,A=o;j<A.length;j++){var V=A[j],M=Bn["idb://".concat(a,"/").concat(V)];if(M){var K=t.table(V),U=M.optimisticOps.filter(function(Qe){return Qe.trans===E});if(E._explicit&&R&&E.mutatedParts)for(var B=0,H=Object.values(M.queries.query);B<H.length;B++)for(var Z=0,J=(Ve=H[B]).slice();Z<J.length;Z++)ui((Ae=J[Z]).obsSet,E.mutatedParts)&&(Te(Ve,Ae),Ae.subscribers.forEach(function(Qe){return P.add(Qe)}));else if(0<U.length){M.optimisticOps=M.optimisticOps.filter(function(Qe){return Qe.trans!==E});for(var re=0,ve=Object.values(M.queries.query);re<ve.length;re++)for(var Ve,Ae,je,Ue=0,Ke=(Ve=ve[re]).slice();Ue<Ke.length;Ue++)(Ae=Ke[Ue]).res!=null&&E.mutatedParts&&(R&&!Ae.dirty?(je=Object.isFrozen(Ae.res),je=oa(Ae.res,Ae.req,U,K,Ae,je),Ae.dirty?(Te(Ve,Ae),Ae.subscribers.forEach(function(Qe){return P.add(Qe)})):je!==Ae.res&&(Ae.res=je,Ae.promise=De.resolve({result:je}))):(Ae.dirty&&Te(Ve,Ae),Ae.subscribers.forEach(function(Qe){return P.add(Qe)})))}}}P.forEach(function(Qe){return Qe()})}}},E.addEventListener("abort",f(!1),{signal:_}),E.addEventListener("error",f(!1),{signal:_}),E.addEventListener("complete",f(!0),{signal:_})),E},table:function(o){var s=t.table(o),f=s.schema.primaryKey;return r(r({},s),{mutate:function(d){var _=Fe.trans;if(f.outbound||_.db._options.cache==="disabled"||_.explicit)return s.mutate(d);var E=Bn["idb://".concat(a,"/").concat(o)];return E?(_=s.mutate(d),d.type!=="add"&&d.type!=="put"||!(50<=d.values.length||mi(f,d).some(function(R){return R==null}))?(E.optimisticOps.push(d),d.mutatedParts&&Tr(d.mutatedParts),_.then(function(R){0<R.numFailures&&(Te(E.optimisticOps,d),(R=aa(0,d,R))&&E.optimisticOps.push(R),d.mutatedParts&&Tr(d.mutatedParts))}),_.catch(function(){Te(E.optimisticOps,d),d.mutatedParts&&Tr(d.mutatedParts)})):_.then(function(R){var P=aa(0,r(r({},d),{values:d.values.map(function(M,A){var V,M=(V=f.keyPath)!==null&&V!==void 0&&V.includes(".")?le(M):r({},M);return ee(M,f.keyPath,R.results[A]),M})}),R);E.optimisticOps.push(P),queueMicrotask(function(){return d.mutatedParts&&Tr(d.mutatedParts)})}),_):s.mutate(d)},query:function(d){if(!ra(Fe,s)||!ia("query",d))return s.query(d);var _=((P=Fe.trans)===null||P===void 0?void 0:P.db._options.cache)==="immutable",A=Fe,E=A.requery,R=A.signal,P=function(K,U,B,H){var Z=Bn["idb://".concat(K,"/").concat(U)];if(!Z)return[];if(!(U=Z.queries[B]))return[null,!1,Z,null];var J=U[(H.query?H.query.index.name:null)||""];if(!J)return[null,!1,Z,null];switch(B){case"query":var re=J.find(function(ve){return ve.req.limit===H.limit&&ve.req.values===H.values&&la(ve.req.query.range,H.query.range)});return re?[re,!0,Z,J]:[J.find(function(ve){return("limit"in ve.req?ve.req.limit:1/0)>=H.limit&&(!H.values||ve.req.values)&&_l(ve.req.query.range,H.query.range)}),!1,Z,J];case"count":return re=J.find(function(ve){return la(ve.req.query.range,H.query.range)}),[re,!!re,Z,J]}}(a,o,"query",d),j=P[0],A=P[1],V=P[2],M=P[3];return j&&A?j.obsSet=d.obsSet:(A=s.query(d).then(function(K){var U=K.result;if(j&&(j.res=U),_){for(var B=0,H=U.length;B<H;++B)Object.freeze(U[B]);Object.freeze(U)}else K.result=le(U);return K}).catch(function(K){return M&&j&&Te(M,j),Promise.reject(K)}),j={obsSet:d.obsSet,promise:A,subscribers:new Set,type:"query",req:d,dirty:!1},M?M.push(j):(M=[j],(V=V||(Bn["idb://".concat(a,"/").concat(o)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[d.query.index.name||""]=M)),yl(j,M,E,R),j.promise.then(function(K){return{result:oa(K.result,d,V==null?void 0:V.optimisticOps,s,j,_)}})}})}})}};function Ar(t,a){return new Proxy(t,{get:function(o,s,f){return s==="db"?a:Reflect.get(o,s,f)}})}var Tn=(Pt.prototype.version=function(t){if(isNaN(t)||t<.1)throw new ye.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new ye.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var a=this._versions,o=a.filter(function(s){return s._cfg.version===t})[0];return o||(o=new this.Version(t),a.push(o),a.sort(ul),o.stores({}),this._state.autoSchema=!1,o)},Pt.prototype._whenReady=function(t){var a=this;return this.idbdb&&(this._state.openComplete||Fe.letThrough||this._vip)?t():new De(function(o,s){if(a._state.openComplete)return s(new ye.DatabaseClosed(a._state.dbOpenError));if(!a._state.isBeingOpened){if(!a._state.autoOpen)return void s(new ye.DatabaseClosed);a.open().catch(Ee)}a._state.dbReadyPromise.then(o,s)}).then(t)},Pt.prototype.use=function(t){var a=t.stack,o=t.create,s=t.level,f=t.name;return f&&this.unuse({stack:a,name:f}),t=this._middlewares[a]||(this._middlewares[a]=[]),t.push({stack:a,create:o,level:s??10,name:f}),t.sort(function(d,_){return d.level-_.level}),this},Pt.prototype.unuse=function(t){var a=t.stack,o=t.name,s=t.create;return a&&this._middlewares[a]&&(this._middlewares[a]=this._middlewares[a].filter(function(f){return s?f.create!==s:!!o&&f.name!==o})),this},Pt.prototype.open=function(){var t=this;return Mn(st,function(){return hl(t)})},Pt.prototype._close=function(){var t=this._state,a=xn.indexOf(this);if(0<=a&&xn.splice(a,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}t.isBeingOpened||(t.dbReadyPromise=new De(function(o){t.dbReadyResolve=o}),t.openCanceller=new De(function(o,s){t.cancelOpen=s}))},Pt.prototype.close=function(o){var a=(o===void 0?{disableAutoOpen:!0}:o).disableAutoOpen,o=this._state;a?(o.isBeingOpened&&o.cancelOpen(new ye.DatabaseClosed),this._close(),o.autoOpen=!1,o.dbOpenError=new ye.DatabaseClosed):(this._close(),o.autoOpen=this._options.autoOpen||o.isBeingOpened,o.openComplete=!1,o.dbOpenError=null)},Pt.prototype.delete=function(t){var a=this;t===void 0&&(t={disableAutoOpen:!0});var o=0<arguments.length&&typeof arguments[0]!="object",s=this._state;return new De(function(f,d){function _(){a.close(t);var E=a._deps.indexedDB.deleteDatabase(a.name);E.onsuccess=at(function(){var R,P,j;R=a._deps,P=a.name,j=R.indexedDB,R=R.IDBKeyRange,ai(j)||P===hr||ii(j,R).delete(P).catch(Ee),f()}),E.onerror=yn(d),E.onblocked=a._fireOnBlocked}if(o)throw new ye.InvalidArgument("Invalid closeOptions argument to db.delete()");s.isBeingOpened?s.dbReadyPromise.then(_):_()})},Pt.prototype.backendDB=function(){return this.idbdb},Pt.prototype.isOpen=function(){return this.idbdb!==null},Pt.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},Pt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Pt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Pt.prototype,"tables",{get:function(){var t=this;return u(this._allTables).map(function(a){return t._allTables[a]})},enumerable:!1,configurable:!0}),Pt.prototype.transaction=function(){var t=(function(a,o,s){var f=arguments.length;if(f<2)throw new ye.InvalidArgument("Too few arguments");for(var d=new Array(f-1);--f;)d[f-1]=arguments[f];return s=d.pop(),[a,ke(d),s]}).apply(this,arguments);return this._transaction.apply(this,t)},Pt.prototype._transaction=function(t,a,o){var s=this,f=Fe.trans;f&&f.db===this&&t.indexOf("!")===-1||(f=null);var d,_,E=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");try{if(_=a.map(function(P){if(P=P instanceof s.Table?P.name:P,typeof P!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return P}),t=="r"||t===Wr)d=Wr;else{if(t!="rw"&&t!=Gr)throw new ye.InvalidArgument("Invalid transaction mode: "+t);d=Gr}if(f){if(f.mode===Wr&&d===Gr){if(!E)throw new ye.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");f=null}f&&_.forEach(function(P){if(f&&f.storeNames.indexOf(P)===-1){if(!E)throw new ye.SubTransaction("Table "+P+" not included in parent transaction.");f=null}}),E&&f&&!f.active&&(f=null)}}catch(P){return f?f._promise(null,function(j,A){A(P)}):Ot(P)}var R=(function P(j,A,V,M,K){return De.resolve().then(function(){var U=Fe.transless||Fe,B=j._createTransaction(A,V,j._dbSchema,M);if(B.explicit=!0,U={trans:B,transless:U},M)B.idbtrans=M.idbtrans;else try{B.create(),B.idbtrans._explicit=!0,j._state.PR1398_maxLoop=3}catch(J){return J.name===qe.InvalidState&&j.isOpen()&&0<--j._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),j.close({disableAutoOpen:!1}),j.open().then(function(){return P(j,A,V,null,K)})):Ot(J)}var H,Z=Q(K);return Z&&kt(),U=De.follow(function(){var J;(H=K.call(B,B))&&(Z?(J=hn.bind(null,null),H.then(J,J)):typeof H.next=="function"&&typeof H.throw=="function"&&(H=hi(H)))},U),(H&&typeof H.then=="function"?De.resolve(H).then(function(J){return B.active?J:Ot(new ye.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):U.then(function(){return H})).then(function(J){return M&&B._resolve(),B._completion.then(function(){return J})}).catch(function(J){return B._reject(J),Ot(J)})})}).bind(null,this,d,_,f,o);return f?f._promise(d,R,"lock"):Fe.trans?Mn(Fe.transless,function(){return s._whenReady(R)}):this._whenReady(R)},Pt.prototype.table=function(t){if(!k(this._allTables,t))throw new ye.InvalidTable("Table ".concat(t," does not exist"));return this._allTables[t]},Pt);function Pt(t,a){var o=this;this._middlewares={},this.verno=0;var s=Pt.dependencies;this._options=a=r({addons:Pt.addons,autoOpen:!0,indexedDB:s.indexedDB,IDBKeyRange:s.IDBKeyRange,cache:"cloned"},a),this._deps={indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange},s=a.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var f,d,_,E,R,P={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ee,dbReadyPromise:null,cancelOpen:Ee,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:a.autoOpen};P.dbReadyPromise=new De(function(A){P.dbReadyResolve=A}),P.openCanceller=new De(function(A,V){P.cancelOpen=V}),this._state=P,this.name=t,this.on=Jn(this,"populate","blocked","versionchange","close",{ready:[it,Ee]}),this.on.ready.subscribe=se(this.on.ready.subscribe,function(A){return function(V,M){Pt.vip(function(){var K,U=o._state;U.openComplete?(U.dbOpenError||De.resolve().then(V),M&&A(V)):U.onReadyBeingFired?(U.onReadyBeingFired.push(V),M&&A(V)):(A(V),K=o,M||A(function B(){K.on.ready.unsubscribe(V),K.on.ready.unsubscribe(B)}))})}}),this.Collection=(f=this,Qn(nl.prototype,function(H,B){this.db=f;var M=ji,K=null;if(B)try{M=B()}catch(Z){K=Z}var U=H._ctx,B=U.table,H=B.hook.reading.fire;this._ctx={table:B,index:U.index,isPrimKey:!U.index||B.schema.primKey.keyPath&&U.index===B.schema.primKey.name,range:M,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:K,or:U.or,valueMapper:H!==xe?H:null}})),this.Table=(d=this,Qn(xi.prototype,function(A,V,M){this.db=d,this._tx=M,this.name=A,this.schema=V,this.hook=d._allTables[A]?d._allTables[A].hook:Jn(null,{creating:[Se,Ee],reading:[We,xe],updating:[fe,Ee],deleting:[we,Ee]})})),this.Transaction=(_=this,Qn(al.prototype,function(A,V,M,K,U){var B=this;this.db=_,this.mode=A,this.storeNames=V,this.schema=M,this.chromeTransactionDurability=K,this.idbtrans=null,this.on=Jn(this,"complete","error","abort"),this.parent=U||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new De(function(H,Z){B._resolve=H,B._reject=Z}),this._completion.then(function(){B.active=!1,B.on.complete.fire()},function(H){var Z=B.active;return B.active=!1,B.on.error.fire(H),B.parent?B.parent._reject(H):Z&&B.idbtrans&&B.idbtrans.abort(),Ot(H)})})),this.Version=(E=this,Qn(dl.prototype,function(A){this.db=E,this._cfg={version:A,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(R=this,Qn(Yi.prototype,function(A,V,M){if(this.db=R,this._ctx={table:A,index:V===":id"?null:V,or:M},this._cmp=this._ascending=dt,this._descending=function(K,U){return dt(U,K)},this._max=function(K,U){return 0<dt(K,U)?K:U},this._min=function(K,U){return dt(K,U)<0?K:U},this._IDBKeyRange=R._deps.IDBKeyRange,!this._IDBKeyRange)throw new ye.MissingAPI})),this.on("versionchange",function(A){0<A.newVersion?console.warn("Another connection wants to upgrade database '".concat(o.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(o.name,"'. Closing db now to resume the delete request.")),o.close({disableAutoOpen:!1})}),this.on("blocked",function(A){!A.newVersion||A.newVersion<A.oldVersion?console.warn("Dexie.delete('".concat(o.name,"') was blocked")):console.warn("Upgrade '".concat(o.name,"' blocked by other connection holding version ").concat(A.oldVersion/10))}),this._maxKey=tr(a.IDBKeyRange),this._createTransaction=function(A,V,M,K){return new o.Transaction(A,V,M,o._options.chromeTransactionDurability,K)},this._fireOnBlocked=function(A){o.on("blocked").fire(A),xn.filter(function(V){return V.name===o.name&&V!==o&&!V._state.vcFired}).map(function(V){return V.on("versionchange").fire(A)})},this.use(gl),this.use(bl),this.use(vl),this.use(pl),this.use(ml);var j=new Proxy(this,{get:function(A,V,M){if(V==="_vip")return!0;if(V==="table")return function(U){return Ar(o.table(U),j)};var K=Reflect.get(A,V,M);return K instanceof xi?Ar(K,j):V==="tables"?K.map(function(U){return Ar(U,j)}):V==="_createTransaction"?function(){return Ar(K.apply(this,arguments),j)}:K}});this.vip=j,s.forEach(function(A){return A(o)})}var Or,un=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",wl=(vi.prototype.subscribe=function(t,a,o){return this._subscribe(t&&typeof t!="function"?t:{next:t,error:a,complete:o})},vi.prototype[un]=function(){return this},vi);function vi(t){this._subscribe=t}try{Or={indexedDB:c.indexedDB||c.mozIndexedDB||c.webkitIndexedDB||c.msIndexedDB,IDBKeyRange:c.IDBKeyRange||c.webkitIDBKeyRange}}catch{Or={indexedDB:null,IDBKeyRange:null}}function sa(t){var a,o=!1,s=new wl(function(f){var d=Q(t),_,E=!1,R={},P={},j={get closed(){return E},unsubscribe:function(){E||(E=!0,_&&_.abort(),A&&On.storagemutated.unsubscribe(M))}};f.start&&f.start(j);var A=!1,V=function(){return Hr(K)},M=function(U){Sr(R,U),ui(P,R)&&V()},K=function(){var U,B,H;!E&&Or.indexedDB&&(R={},U={},_&&_.abort(),_=new AbortController,H=function(Z){var J=Pe();try{d&&kt();var re=tn(t,Z);return re=d?re.finally(hn):re}finally{J&&vt()}}(B={subscr:U,signal:_.signal,requery:V,querier:t,trans:null}),Promise.resolve(H).then(function(Z){o=!0,a=Z,E||B.signal.aborted||(R={},function(J){for(var re in J)if(k(J,re))return;return 1}(P=U)||A||(On(er,M),A=!0),Hr(function(){return!E&&f.next&&f.next(Z)}))},function(Z){o=!1,["DatabaseClosedError","AbortError"].includes(Z==null?void 0:Z.name)||E||Hr(function(){E||f.error&&f.error(Z)})}))};return setTimeout(V,0),j});return s.hasValue=function(){return o},s.getValue=function(){return a},s}var Kn=Tn;function _i(t){var a=Pn;try{Pn=!0,On.storagemutated.fire(t),di(t,!0)}finally{Pn=a}}N(Kn,r(r({},ce),{delete:function(t){return new Kn(t,{addons:[]}).delete()},exists:function(t){return new Kn(t,{addons:[]}).open().then(function(a){return a.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(t){try{return a=Kn.dependencies,o=a.indexedDB,a=a.IDBKeyRange,(ai(o)?Promise.resolve(o.databases()).then(function(s){return s.map(function(f){return f.name}).filter(function(f){return f!==hr})}):ii(o,a).toCollection().primaryKeys()).then(t)}catch{return Ot(new ye.MissingAPI)}var a,o},defineClass:function(){return function(t){y(this,t)}},ignoreTransaction:function(t){return Fe.trans?Mn(Fe.transless,t):t()},vip:oi,async:function(t){return function(){try{var a=hi(t.apply(this,arguments));return a&&typeof a.then=="function"?a:De.resolve(a)}catch(o){return Ot(o)}}},spawn:function(t,a,o){try{var s=hi(t.apply(o,a||[]));return s&&typeof s.then=="function"?s:De.resolve(s)}catch(f){return Ot(f)}},currentTransaction:{get:function(){return Fe.trans||null}},waitFor:function(t,a){return a=De.resolve(typeof t=="function"?Kn.ignoreTransaction(t):t).timeout(a||6e4),Fe.trans?Fe.trans.waitFor(a):a},Promise:De,debug:{get:function(){return _t},set:function(t){yt(t)}},derive:W,extend:y,props:N,override:se,Events:Jn,on:On,liveQuery:sa,extendObservabilitySet:Sr,getByKeyPath:te,setByKeyPath:ee,delByKeyPath:function(t,a){typeof a=="string"?ee(t,a,void 0):"length"in a&&[].map.call(a,function(o){ee(t,o,void 0)})},shallowClone:ie,deepClone:le,getObjectDiff:pi,cmp:dt,asap:ne,minKey:-1/0,addons:[],connections:xn,errnames:qe,dependencies:Or,cache:Bn,semVer:"4.0.7",version:"4.0.7".split(".").map(function(t){return parseInt(t)}).reduce(function(t,a,o){return t+a/Math.pow(10,2*o)})})),Kn.maxKey=tr(Kn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(On(er,function(t){Pn||(t=new CustomEvent(Qr,{detail:t}),Pn=!0,dispatchEvent(t),Pn=!1)}),addEventListener(Qr,function(t){t=t.detail,Pn||_i(t)}));var Wn,Pn=!1,ua=function(){};return typeof BroadcastChannel<"u"&&((ua=function(){(Wn=new BroadcastChannel(Qr)).onmessage=function(t){return t.data&&_i(t.data)}})(),typeof Wn.unref=="function"&&Wn.unref(),On(er,function(t){Pn||Wn.postMessage(t)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(t){if(!Tn.disableBfCache&&t.persisted){_t&&console.debug("Dexie: handling persisted pagehide"),Wn!=null&&Wn.close();for(var a=0,o=xn;a<o.length;a++)o[a].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(t){!Tn.disableBfCache&&t.persisted&&(_t&&console.debug("Dexie: handling persisted pageshow"),ua(),_i({all:new Ht(-1/0,[[]])}))})),De.rejectionMapper=function(t,a){return!t||t instanceof w||t instanceof TypeError||t instanceof SyntaxError||!t.name||!G[t.name]?t:(a=new G[t.name](a||t.message,t),"stack"in t&&X(a,"stack",{get:function(){return this.inner.stack}}),a)},yt(_t),r(Tn,Object.freeze({__proto__:null,Dexie:Tn,liveQuery:sa,Entity:Vi,cmp:dt,PropModSymbol:Sn,PropModification:$n,replacePrefix:function(t,a){return new $n({replacePrefix:[t,a]})},add:function(t){return new $n({add:t})},remove:function(t){return new $n({remove:t})},default:Tn,RangeSet:Ht,mergeRanges:ir,rangesOverlap:Dr}),{default:Tn}),Tn})})(Wo);var Zl=Wo.exports;const Pi=Ho(Zl),Na=Symbol.for("Dexie"),qr=globalThis[Na]||(globalThis[Na]=Pi);if(Pi.semVer!==qr.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Pi.semVer} and ${qr.semVer}`);const{liveQuery:xr,mergeRanges:wc,rangesOverlap:kc,RangeSet:Ec,cmp:Dc,Entity:Sc,PropModSymbol:Tc,PropModification:Cc,replacePrefix:Ac,add:Oc,remove:Pc}=qr;var dr=(i=>(i.Accomodation="Accomodation",i.Food="Food & Drink",i.Transport="Transport",i.Other="Other",i))(dr||{});const Ba={Accomodation:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-house-fill" viewBox="0 0 16 16"><path d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L8 2.207l6.646 6.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293z"/><path d="m8 3.293 6 6V13.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5V9.293z"/></svg>',"Food & Drink":'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cup-hot-fill" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M.5 6a.5.5 0 0 0-.488.608l1.652 7.434A2.5 2.5 0 0 0 4.104 16h5.792a2.5 2.5 0 0 0 2.44-1.958l.131-.59a3 3 0 0 0 1.3-5.854l.221-.99A.5.5 0 0 0 13.5 6zM13 12.5a2 2 0 0 1-.316-.025l.867-3.898A2.001 2.001 0 0 1 13 12.5"/><path d="m4.4.8-.003.004-.014.019a4 4 0 0 0-.204.31 2 2 0 0 0-.141.267c-.026.06-.034.092-.037.103v.004a.6.6 0 0 0 .091.248c.075.133.178.272.308.445l.01.012c.118.158.26.347.37.543.112.2.22.455.22.745 0 .188-.065.368-.119.494a3 3 0 0 1-.202.388 5 5 0 0 1-.253.382l-.018.025-.005.008-.002.002A.5.5 0 0 1 3.6 4.2l.003-.004.014-.019a4 4 0 0 0 .204-.31 2 2 0 0 0 .141-.267c.026-.06.034-.092.037-.103a.6.6 0 0 0-.09-.252A4 4 0 0 0 3.6 2.8l-.01-.012a5 5 0 0 1-.37-.543A1.53 1.53 0 0 1 3 1.5c0-.188.065-.368.119-.494.059-.138.134-.274.202-.388a6 6 0 0 1 .253-.382l.025-.035A.5.5 0 0 1 4.4.8m3 0-.003.004-.014.019a4 4 0 0 0-.204.31 2 2 0 0 0-.141.267c-.026.06-.034.092-.037.103v.004a.6.6 0 0 0 .091.248c.075.133.178.272.308.445l.01.012c.118.158.26.347.37.543.112.2.22.455.22.745 0 .188-.065.368-.119.494a3 3 0 0 1-.202.388 5 5 0 0 1-.253.382l-.018.025-.005.008-.002.002A.5.5 0 0 1 6.6 4.2l.003-.004.014-.019a4 4 0 0 0 .204-.31 2 2 0 0 0 .141-.267c.026-.06.034-.092.037-.103a.6.6 0 0 0-.09-.252A4 4 0 0 0 6.6 2.8l-.01-.012a5 5 0 0 1-.37-.543A1.53 1.53 0 0 1 6 1.5c0-.188.065-.368.119-.494.059-.138.134-.274.202-.388a6 6 0 0 1 .253-.382l.025-.035A.5.5 0 0 1 7.4.8m3 0-.003.004-.014.019a4 4 0 0 0-.204.31 2 2 0 0 0-.141.267c-.026.06-.034.092-.037.103v.004a.6.6 0 0 0 .091.248c.075.133.178.272.308.445l.01.012c.118.158.26.347.37.543.112.2.22.455.22.745 0 .188-.065.368-.119.494a3 3 0 0 1-.202.388 5 5 0 0 1-.252.382l-.019.025-.005.008-.002.002A.5.5 0 0 1 9.6 4.2l.003-.004.014-.019a4 4 0 0 0 .204-.31 2 2 0 0 0 .141-.267c.026-.06.034-.092.037-.103a.6.6 0 0 0-.09-.252A4 4 0 0 0 9.6 2.8l-.01-.012a5 5 0 0 1-.37-.543A1.53 1.53 0 0 1 9 1.5c0-.188.065-.368.119-.494.059-.138.134-.274.202-.388a6 6 0 0 1 .253-.382l.025-.035A.5.5 0 0 1 10.4.8"/></svg>',Transport:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-car-front-fill" viewBox="0 0 16 16"> <path d="M2.52 3.515A2.5 2.5 0 0 1 4.82 2h6.362c1 0 1.904.596 2.298 1.515l.792 1.848c.075.175.21.319.38.404.5.25.855.715.965 1.262l.335 1.679q.05.242.049.49v.413c0 .814-.39 1.543-1 1.997V13.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-1.338c-1.292.048-2.745.088-4 .088s-2.708-.04-4-.088V13.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-1.892c-.61-.454-1-1.183-1-1.997v-.413a2.5 2.5 0 0 1 .049-.49l.335-1.68c.11-.546.465-1.012.964-1.261a.8.8 0 0 0 .381-.404l.792-1.848ZM3 10a1 1 0 1 0 0-2 1 1 0 0 0 0 2m10 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2M6 8a1 1 0 0 0 0 2h4a1 1 0 1 0 0-2zM2.906 5.189a.51.51 0 0 0 .497.731c.91-.073 3.35-.17 4.597-.17s3.688.097 4.597.17a.51.51 0 0 0 .497-.731l-.956-1.913A.5.5 0 0 0 11.691 3H4.309a.5.5 0 0 0-.447.276L2.906 5.19Z"/></svg>',Other:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-receipt" viewBox="0 0 16 16"><path d="M1.92.506a.5.5 0 0 1 .434.14L3 1.293l.646-.647a.5.5 0 0 1 .708 0L5 1.293l.646-.647a.5.5 0 0 1 .708 0L7 1.293l.646-.647a.5.5 0 0 1 .708 0L9 1.293l.646-.647a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 0 1 .801.13l.5 1A.5.5 0 0 1 15 2v12a.5.5 0 0 1-.053.224l-.5 1a.5.5 0 0 1-.8.13L13 14.707l-.646.647a.5.5 0 0 1-.708 0L11 14.707l-.646.647a.5.5 0 0 1-.708 0L9 14.707l-.646.647a.5.5 0 0 1-.708 0L7 14.707l-.646.647a.5.5 0 0 1-.708 0L5 14.707l-.646.647a.5.5 0 0 1-.708 0L3 14.707l-.646.647a.5.5 0 0 1-.801-.13l-.5-1A.5.5 0 0 1 1 14V2a.5.5 0 0 1 .053-.224l.5-1a.5.5 0 0 1 .367-.27m.217 1.338L2 2.118v11.764l.137.274.51-.51a.5.5 0 0 1 .707 0l.646.647.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.509.509.137-.274V2.118l-.137-.274-.51.51a.5.5 0 0 1-.707 0L12 1.707l-.646.647a.5.5 0 0 1-.708 0L10 1.707l-.646.647a.5.5 0 0 1-.708 0L8 1.707l-.646.647a.5.5 0 0 1-.708 0L6 1.707l-.646.647a.5.5 0 0 1-.708 0L4 1.707l-.646.647a.5.5 0 0 1-.708 0z"/><path d="M3 4.5a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5m8-6a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5"/></svg>'},Bt=new qr("ExpensesDatabase");Bt.version(2).stores({trips:"++id, name, defaultCurrency, startDate, endDate",receipts:"++id, description, total, receiptDate, receiptType, currency, tripId, imageData"});Bt.version(3).stores({trips:"++id, name, defaultCurrency, startDate, startDateString, endDate, endDateString",receipts:"++id, description, total, receiptDate, receiptDateString, receiptType, currency, tripId, imageData"}).upgrade(i=>i.table("trips").toCollection().modify(e=>{e.startDateString=e.startDate.toDateString(),e.endDateString=e.endDate.toDateString()}).then(function(){i.table("receipts").toCollection().modify(e=>{e.receiptDateString=e.receiptDate.toDateString()})}));Bt.version(4).stores({trips:"++id, name, defaultCurrency, startDate, startDateString, endDate, endDateString",receipts:"++id, description, total, receiptDate, receiptDateString, receiptType, currency, tripId, imageData"}).upgrade(i=>i.table("receipts").where("receiptType").equals("Food").modify(e=>{e.receiptType="Food & Drink"}));const St={GBP:{symbol:"£",name:"British Pound Sterling",symbol_native:"£",decimal_digits:2,rounding:0,code:"GBP",name_plural:"British pounds sterling"},USD:{symbol:"$",name:"US Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"USD",name_plural:"US dollars"},CAD:{symbol:"CA$",name:"Canadian Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"CAD",name_plural:"Canadian dollars"},EUR:{symbol:"€",name:"Euro",symbol_native:"€",decimal_digits:2,rounding:0,code:"EUR",name_plural:"euros"},AED:{symbol:"AED",name:"United Arab Emirates Dirham",symbol_native:"د.إ.‏",decimal_digits:2,rounding:0,code:"AED",name_plural:"UAE dirhams"},AFN:{symbol:"Af",name:"Afghan Afghani",symbol_native:"؋",decimal_digits:0,rounding:0,code:"AFN",name_plural:"Afghan Afghanis"},ALL:{symbol:"ALL",name:"Albanian Lek",symbol_native:"Lek",decimal_digits:0,rounding:0,code:"ALL",name_plural:"Albanian lekë"},AMD:{symbol:"AMD",name:"Armenian Dram",symbol_native:"դր.",decimal_digits:0,rounding:0,code:"AMD",name_plural:"Armenian drams"},ARS:{symbol:"AR$",name:"Argentine Peso",symbol_native:"$",decimal_digits:2,rounding:0,code:"ARS",name_plural:"Argentine pesos"},AUD:{symbol:"AU$",name:"Australian Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"AUD",name_plural:"Australian dollars"},AZN:{symbol:"man.",name:"Azerbaijani Manat",symbol_native:"ман.",decimal_digits:2,rounding:0,code:"AZN",name_plural:"Azerbaijani manats"},BAM:{symbol:"KM",name:"Bosnia-Herzegovina Convertible Mark",symbol_native:"KM",decimal_digits:2,rounding:0,code:"BAM",name_plural:"Bosnia-Herzegovina convertible marks"},BDT:{symbol:"Tk",name:"Bangladeshi Taka",symbol_native:"৳",decimal_digits:2,rounding:0,code:"BDT",name_plural:"Bangladeshi takas"},BGN:{symbol:"BGN",name:"Bulgarian Lev",symbol_native:"лв.",decimal_digits:2,rounding:0,code:"BGN",name_plural:"Bulgarian leva"},BHD:{symbol:"BD",name:"Bahraini Dinar",symbol_native:"د.ب.‏",decimal_digits:3,rounding:0,code:"BHD",name_plural:"Bahraini dinars"},BIF:{symbol:"FBu",name:"Burundian Franc",symbol_native:"FBu",decimal_digits:0,rounding:0,code:"BIF",name_plural:"Burundian francs"},BND:{symbol:"BN$",name:"Brunei Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"BND",name_plural:"Brunei dollars"},BOB:{symbol:"Bs",name:"Bolivian Boliviano",symbol_native:"Bs",decimal_digits:2,rounding:0,code:"BOB",name_plural:"Bolivian bolivianos"},BRL:{symbol:"R$",name:"Brazilian Real",symbol_native:"R$",decimal_digits:2,rounding:0,code:"BRL",name_plural:"Brazilian reals"},BWP:{symbol:"BWP",name:"Botswanan Pula",symbol_native:"P",decimal_digits:2,rounding:0,code:"BWP",name_plural:"Botswanan pulas"},BYN:{symbol:"Br",name:"Belarusian Ruble",symbol_native:"руб.",decimal_digits:2,rounding:0,code:"BYN",name_plural:"Belarusian rubles"},BZD:{symbol:"BZ$",name:"Belize Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"BZD",name_plural:"Belize dollars"},CDF:{symbol:"CDF",name:"Congolese Franc",symbol_native:"FrCD",decimal_digits:2,rounding:0,code:"CDF",name_plural:"Congolese francs"},CHF:{symbol:"CHF",name:"Swiss Franc",symbol_native:"CHF",decimal_digits:2,rounding:.05,code:"CHF",name_plural:"Swiss francs"},CLP:{symbol:"CL$",name:"Chilean Peso",symbol_native:"$",decimal_digits:0,rounding:0,code:"CLP",name_plural:"Chilean pesos"},CNY:{symbol:"CN¥",name:"Chinese Yuan",symbol_native:"CN¥",decimal_digits:2,rounding:0,code:"CNY",name_plural:"Chinese yuan"},COP:{symbol:"CO$",name:"Colombian Peso",symbol_native:"$",decimal_digits:0,rounding:0,code:"COP",name_plural:"Colombian pesos"},CRC:{symbol:"₡",name:"Costa Rican Colón",symbol_native:"₡",decimal_digits:0,rounding:0,code:"CRC",name_plural:"Costa Rican colóns"},CVE:{symbol:"CV$",name:"Cape Verdean Escudo",symbol_native:"CV$",decimal_digits:2,rounding:0,code:"CVE",name_plural:"Cape Verdean escudos"},CZK:{symbol:"Kč",name:"Czech Republic Koruna",symbol_native:"Kč",decimal_digits:2,rounding:0,code:"CZK",name_plural:"Czech Republic korunas"},DJF:{symbol:"Fdj",name:"Djiboutian Franc",symbol_native:"Fdj",decimal_digits:0,rounding:0,code:"DJF",name_plural:"Djiboutian francs"},DKK:{symbol:"Dkr",name:"Danish Krone",symbol_native:"kr",decimal_digits:2,rounding:0,code:"DKK",name_plural:"Danish kroner"},DOP:{symbol:"RD$",name:"Dominican Peso",symbol_native:"RD$",decimal_digits:2,rounding:0,code:"DOP",name_plural:"Dominican pesos"},DZD:{symbol:"DA",name:"Algerian Dinar",symbol_native:"د.ج.‏",decimal_digits:2,rounding:0,code:"DZD",name_plural:"Algerian dinars"},EEK:{symbol:"Ekr",name:"Estonian Kroon",symbol_native:"kr",decimal_digits:2,rounding:0,code:"EEK",name_plural:"Estonian kroons"},EGP:{symbol:"EGP",name:"Egyptian Pound",symbol_native:"ج.م.‏",decimal_digits:2,rounding:0,code:"EGP",name_plural:"Egyptian pounds"},ERN:{symbol:"Nfk",name:"Eritrean Nakfa",symbol_native:"Nfk",decimal_digits:2,rounding:0,code:"ERN",name_plural:"Eritrean nakfas"},ETB:{symbol:"Br",name:"Ethiopian Birr",symbol_native:"Br",decimal_digits:2,rounding:0,code:"ETB",name_plural:"Ethiopian birrs"},GEL:{symbol:"GEL",name:"Georgian Lari",symbol_native:"GEL",decimal_digits:2,rounding:0,code:"GEL",name_plural:"Georgian laris"},GHS:{symbol:"GH₵",name:"Ghanaian Cedi",symbol_native:"GH₵",decimal_digits:2,rounding:0,code:"GHS",name_plural:"Ghanaian cedis"},GNF:{symbol:"FG",name:"Guinean Franc",symbol_native:"FG",decimal_digits:0,rounding:0,code:"GNF",name_plural:"Guinean francs"},GTQ:{symbol:"GTQ",name:"Guatemalan Quetzal",symbol_native:"Q",decimal_digits:2,rounding:0,code:"GTQ",name_plural:"Guatemalan quetzals"},HKD:{symbol:"HK$",name:"Hong Kong Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"HKD",name_plural:"Hong Kong dollars"},HNL:{symbol:"HNL",name:"Honduran Lempira",symbol_native:"L",decimal_digits:2,rounding:0,code:"HNL",name_plural:"Honduran lempiras"},HRK:{symbol:"kn",name:"Croatian Kuna",symbol_native:"kn",decimal_digits:2,rounding:0,code:"HRK",name_plural:"Croatian kunas"},HUF:{symbol:"Ft",name:"Hungarian Forint",symbol_native:"Ft",decimal_digits:0,rounding:0,code:"HUF",name_plural:"Hungarian forints"},IDR:{symbol:"Rp",name:"Indonesian Rupiah",symbol_native:"Rp",decimal_digits:0,rounding:0,code:"IDR",name_plural:"Indonesian rupiahs"},ILS:{symbol:"₪",name:"Israeli New Sheqel",symbol_native:"₪",decimal_digits:2,rounding:0,code:"ILS",name_plural:"Israeli new sheqels"},INR:{symbol:"Rs",name:"Indian Rupee",symbol_native:"টকা",decimal_digits:2,rounding:0,code:"INR",name_plural:"Indian rupees"},IQD:{symbol:"IQD",name:"Iraqi Dinar",symbol_native:"د.ع.‏",decimal_digits:0,rounding:0,code:"IQD",name_plural:"Iraqi dinars"},IRR:{symbol:"IRR",name:"Iranian Rial",symbol_native:"﷼",decimal_digits:0,rounding:0,code:"IRR",name_plural:"Iranian rials"},ISK:{symbol:"Ikr",name:"Icelandic Króna",symbol_native:"kr",decimal_digits:0,rounding:0,code:"ISK",name_plural:"Icelandic krónur"},JMD:{symbol:"J$",name:"Jamaican Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"JMD",name_plural:"Jamaican dollars"},JOD:{symbol:"JD",name:"Jordanian Dinar",symbol_native:"د.أ.‏",decimal_digits:3,rounding:0,code:"JOD",name_plural:"Jordanian dinars"},JPY:{symbol:"¥",name:"Japanese Yen",symbol_native:"￥",decimal_digits:0,rounding:0,code:"JPY",name_plural:"Japanese yen"},KES:{symbol:"Ksh",name:"Kenyan Shilling",symbol_native:"Ksh",decimal_digits:2,rounding:0,code:"KES",name_plural:"Kenyan shillings"},KHR:{symbol:"KHR",name:"Cambodian Riel",symbol_native:"៛",decimal_digits:2,rounding:0,code:"KHR",name_plural:"Cambodian riels"},KMF:{symbol:"CF",name:"Comorian Franc",symbol_native:"FC",decimal_digits:0,rounding:0,code:"KMF",name_plural:"Comorian francs"},KRW:{symbol:"₩",name:"South Korean Won",symbol_native:"₩",decimal_digits:0,rounding:0,code:"KRW",name_plural:"South Korean won"},KWD:{symbol:"KD",name:"Kuwaiti Dinar",symbol_native:"د.ك.‏",decimal_digits:3,rounding:0,code:"KWD",name_plural:"Kuwaiti dinars"},KZT:{symbol:"KZT",name:"Kazakhstani Tenge",symbol_native:"тңг.",decimal_digits:2,rounding:0,code:"KZT",name_plural:"Kazakhstani tenges"},LBP:{symbol:"L.L.",name:"Lebanese Pound",symbol_native:"ل.ل.‏",decimal_digits:0,rounding:0,code:"LBP",name_plural:"Lebanese pounds"},LKR:{symbol:"SLRs",name:"Sri Lankan Rupee",symbol_native:"SL Re",decimal_digits:2,rounding:0,code:"LKR",name_plural:"Sri Lankan rupees"},LTL:{symbol:"Lt",name:"Lithuanian Litas",symbol_native:"Lt",decimal_digits:2,rounding:0,code:"LTL",name_plural:"Lithuanian litai"},LVL:{symbol:"Ls",name:"Latvian Lats",symbol_native:"Ls",decimal_digits:2,rounding:0,code:"LVL",name_plural:"Latvian lati"},LYD:{symbol:"LD",name:"Libyan Dinar",symbol_native:"د.ل.‏",decimal_digits:3,rounding:0,code:"LYD",name_plural:"Libyan dinars"},MAD:{symbol:"MAD",name:"Moroccan Dirham",symbol_native:"د.م.‏",decimal_digits:2,rounding:0,code:"MAD",name_plural:"Moroccan dirhams"},MDL:{symbol:"MDL",name:"Moldovan Leu",symbol_native:"MDL",decimal_digits:2,rounding:0,code:"MDL",name_plural:"Moldovan lei"},MGA:{symbol:"MGA",name:"Malagasy Ariary",symbol_native:"MGA",decimal_digits:0,rounding:0,code:"MGA",name_plural:"Malagasy Ariaries"},MKD:{symbol:"MKD",name:"Macedonian Denar",symbol_native:"MKD",decimal_digits:2,rounding:0,code:"MKD",name_plural:"Macedonian denari"},MMK:{symbol:"MMK",name:"Myanma Kyat",symbol_native:"K",decimal_digits:0,rounding:0,code:"MMK",name_plural:"Myanma kyats"},MOP:{symbol:"MOP$",name:"Macanese Pataca",symbol_native:"MOP$",decimal_digits:2,rounding:0,code:"MOP",name_plural:"Macanese patacas"},MUR:{symbol:"MURs",name:"Mauritian Rupee",symbol_native:"MURs",decimal_digits:0,rounding:0,code:"MUR",name_plural:"Mauritian rupees"},MXN:{symbol:"MX$",name:"Mexican Peso",symbol_native:"$",decimal_digits:2,rounding:0,code:"MXN",name_plural:"Mexican pesos"},MYR:{symbol:"RM",name:"Malaysian Ringgit",symbol_native:"RM",decimal_digits:2,rounding:0,code:"MYR",name_plural:"Malaysian ringgits"},MZN:{symbol:"MTn",name:"Mozambican Metical",symbol_native:"MTn",decimal_digits:2,rounding:0,code:"MZN",name_plural:"Mozambican meticals"},NAD:{symbol:"N$",name:"Namibian Dollar",symbol_native:"N$",decimal_digits:2,rounding:0,code:"NAD",name_plural:"Namibian dollars"},NGN:{symbol:"₦",name:"Nigerian Naira",symbol_native:"₦",decimal_digits:2,rounding:0,code:"NGN",name_plural:"Nigerian nairas"},NIO:{symbol:"C$",name:"Nicaraguan Córdoba",symbol_native:"C$",decimal_digits:2,rounding:0,code:"NIO",name_plural:"Nicaraguan córdobas"},NOK:{symbol:"Nkr",name:"Norwegian Krone",symbol_native:"kr",decimal_digits:2,rounding:0,code:"NOK",name_plural:"Norwegian kroner"},NPR:{symbol:"NPRs",name:"Nepalese Rupee",symbol_native:"नेरू",decimal_digits:2,rounding:0,code:"NPR",name_plural:"Nepalese rupees"},NZD:{symbol:"NZ$",name:"New Zealand Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"NZD",name_plural:"New Zealand dollars"},OMR:{symbol:"OMR",name:"Omani Rial",symbol_native:"ر.ع.‏",decimal_digits:3,rounding:0,code:"OMR",name_plural:"Omani rials"},PAB:{symbol:"B/.",name:"Panamanian Balboa",symbol_native:"B/.",decimal_digits:2,rounding:0,code:"PAB",name_plural:"Panamanian balboas"},PEN:{symbol:"S/.",name:"Peruvian Nuevo Sol",symbol_native:"S/.",decimal_digits:2,rounding:0,code:"PEN",name_plural:"Peruvian nuevos soles"},PHP:{symbol:"₱",name:"Philippine Peso",symbol_native:"₱",decimal_digits:2,rounding:0,code:"PHP",name_plural:"Philippine pesos"},PKR:{symbol:"PKRs",name:"Pakistani Rupee",symbol_native:"₨",decimal_digits:0,rounding:0,code:"PKR",name_plural:"Pakistani rupees"},PLN:{symbol:"zł",name:"Polish Zloty",symbol_native:"zł",decimal_digits:2,rounding:0,code:"PLN",name_plural:"Polish zlotys"},PYG:{symbol:"₲",name:"Paraguayan Guarani",symbol_native:"₲",decimal_digits:0,rounding:0,code:"PYG",name_plural:"Paraguayan guaranis"},QAR:{symbol:"QR",name:"Qatari Rial",symbol_native:"ر.ق.‏",decimal_digits:2,rounding:0,code:"QAR",name_plural:"Qatari rials"},RON:{symbol:"RON",name:"Romanian Leu",symbol_native:"RON",decimal_digits:2,rounding:0,code:"RON",name_plural:"Romanian lei"},RSD:{symbol:"din.",name:"Serbian Dinar",symbol_native:"дин.",decimal_digits:0,rounding:0,code:"RSD",name_plural:"Serbian dinars"},RUB:{symbol:"RUB",name:"Russian Ruble",symbol_native:"₽.",decimal_digits:2,rounding:0,code:"RUB",name_plural:"Russian rubles"},RWF:{symbol:"RWF",name:"Rwandan Franc",symbol_native:"FR",decimal_digits:0,rounding:0,code:"RWF",name_plural:"Rwandan francs"},SAR:{symbol:"SR",name:"Saudi Riyal",symbol_native:"ر.س.‏",decimal_digits:2,rounding:0,code:"SAR",name_plural:"Saudi riyals"},SDG:{symbol:"SDG",name:"Sudanese Pound",symbol_native:"SDG",decimal_digits:2,rounding:0,code:"SDG",name_plural:"Sudanese pounds"},SEK:{symbol:"Skr",name:"Swedish Krona",symbol_native:"kr",decimal_digits:2,rounding:0,code:"SEK",name_plural:"Swedish kronor"},SGD:{symbol:"S$",name:"Singapore Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"SGD",name_plural:"Singapore dollars"},SOS:{symbol:"Ssh",name:"Somali Shilling",symbol_native:"Ssh",decimal_digits:0,rounding:0,code:"SOS",name_plural:"Somali shillings"},SYP:{symbol:"SY£",name:"Syrian Pound",symbol_native:"ل.س.‏",decimal_digits:0,rounding:0,code:"SYP",name_plural:"Syrian pounds"},THB:{symbol:"฿",name:"Thai Baht",symbol_native:"฿",decimal_digits:2,rounding:0,code:"THB",name_plural:"Thai baht"},TND:{symbol:"DT",name:"Tunisian Dinar",symbol_native:"د.ت.‏",decimal_digits:3,rounding:0,code:"TND",name_plural:"Tunisian dinars"},TOP:{symbol:"T$",name:"Tongan Paʻanga",symbol_native:"T$",decimal_digits:2,rounding:0,code:"TOP",name_plural:"Tongan paʻanga"},TRY:{symbol:"TL",name:"Turkish Lira",symbol_native:"TL",decimal_digits:2,rounding:0,code:"TRY",name_plural:"Turkish Lira"},TTD:{symbol:"TT$",name:"Trinidad and Tobago Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"TTD",name_plural:"Trinidad and Tobago dollars"},TWD:{symbol:"NT$",name:"New Taiwan Dollar",symbol_native:"NT$",decimal_digits:2,rounding:0,code:"TWD",name_plural:"New Taiwan dollars"},TZS:{symbol:"TSh",name:"Tanzanian Shilling",symbol_native:"TSh",decimal_digits:0,rounding:0,code:"TZS",name_plural:"Tanzanian shillings"},UAH:{symbol:"₴",name:"Ukrainian Hryvnia",symbol_native:"₴",decimal_digits:2,rounding:0,code:"UAH",name_plural:"Ukrainian hryvnias"},UGX:{symbol:"USh",name:"Ugandan Shilling",symbol_native:"USh",decimal_digits:0,rounding:0,code:"UGX",name_plural:"Ugandan shillings"},UYU:{symbol:"$U",name:"Uruguayan Peso",symbol_native:"$",decimal_digits:2,rounding:0,code:"UYU",name_plural:"Uruguayan pesos"},UZS:{symbol:"UZS",name:"Uzbekistan Som",symbol_native:"UZS",decimal_digits:0,rounding:0,code:"UZS",name_plural:"Uzbekistan som"},VEF:{symbol:"Bs.F.",name:"Venezuelan Bolívar",symbol_native:"Bs.F.",decimal_digits:2,rounding:0,code:"VEF",name_plural:"Venezuelan bolívars"},VND:{symbol:"₫",name:"Vietnamese Dong",symbol_native:"₫",decimal_digits:0,rounding:0,code:"VND",name_plural:"Vietnamese dong"},XAF:{symbol:"FCFA",name:"CFA Franc BEAC",symbol_native:"FCFA",decimal_digits:0,rounding:0,code:"XAF",name_plural:"CFA francs BEAC"},XOF:{symbol:"CFA",name:"CFA Franc BCEAO",symbol_native:"CFA",decimal_digits:0,rounding:0,code:"XOF",name_plural:"CFA francs BCEAO"},YER:{symbol:"YR",name:"Yemeni Rial",symbol_native:"ر.ي.‏",decimal_digits:0,rounding:0,code:"YER",name_plural:"Yemeni rials"},ZAR:{symbol:"R",name:"South African Rand",symbol_native:"R",decimal_digits:2,rounding:0,code:"ZAR",name_plural:"South African rand"},ZMK:{symbol:"ZK",name:"Zambian Kwacha",symbol_native:"ZK",decimal_digits:0,rounding:0,code:"ZMK",name_plural:"Zambian kwachas"},ZWL:{symbol:"ZWL$",name:"Zimbabwean Dollar",symbol_native:"ZWL$",decimal_digits:0,rounding:0,code:"ZWL",name_plural:"Zimbabwean Dollar"}};function Ka(i,e,n){const r=i.slice();return r[9]=e[n],r}function Fa(i){let e,n=i[9]+"",r,l,c=St[i[9]].symbol+"",u,m;return{c(){e=T("option"),r=Ne(n),l=Ne(" ("),u=Ne(c),m=Ne(`)
          `),this.h()},l(y){e=C(y,"OPTION",{});var g=z(e);r=Be(g,n),l=Be(g," ("),u=Be(g,c),m=Be(g,`)
          `),g.forEach(b),this.h()},h(){e.__value=i[9],ot(e,e.__value)},m(y,g){pe(y,e,g),h(e,r),h(e,l),h(e,u),h(e,m)},p:Dt,d(y){y&&b(e)}}}function Jl(i){let e,n,r,l="Add New Trip",c,u,m,y="Trip Name",g,v,k,N,q,X="Trip Currency",W,x,S,D,se,I="Trip Start",ne,te,ee,ie,ge,ke,Oe="Trip End",be,le,_e,Re,Le,ue,Te="Add Trip",O,F,Q="Cancel",me,w,Y,Ce=Ze(Object.keys(St)),he=[];for(let ce=0;ce<Ce.length;ce+=1)he[ce]=Fa(Ka(i,Ce,ce));function qe(ce){i[7](ce)}let Ie={format:"yyyy-MM-dd",closeOnSelection:!0,id:"tripStart"};i[2]!==void 0&&(Ie.value=i[2]),te=new Yn({props:Ie}),nn.push(()=>Ln(te,"value",qe));function ye(ce){i[8](ce)}let G={format:"yyyy-MM-dd",closeOnSelection:!0,min:i[2],id:"tripEnd"};return i[3]!==void 0&&(G.value=i[3]),le=new Yn({props:G}),nn.push(()=>Ln(le,"value",ye)),{c(){e=T("div"),n=T("form"),r=T("h1"),r.textContent=l,c=ae(),u=T("div"),m=T("label"),m.textContent=y,g=ae(),v=T("input"),k=ae(),N=T("div"),q=T("label"),q.textContent=X,W=ae(),x=T("select");for(let ce=0;ce<he.length;ce+=1)he[ce].c();S=ae(),D=T("div"),se=T("label"),se.textContent=I,ne=ae(),Vt(te.$$.fragment),ie=ae(),ge=T("div"),ke=T("label"),ke.textContent=Oe,be=ae(),Vt(le.$$.fragment),Re=ae(),Le=T("div"),ue=T("button"),ue.textContent=Te,O=ae(),F=T("a"),F.textContent=Q,this.h()},l(ce){e=C(ce,"DIV",{class:!0});var Ee=z(e);n=C(Ee,"FORM",{});var xe=z(n);r=C(xe,"H1",{"data-svelte-h":!0}),Ge(r)!=="svelte-1x3twms"&&(r.textContent=l),c=oe(xe),u=C(xe,"DIV",{class:!0});var We=z(u);m=C(We,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ge(m)!=="svelte-1y8z10u"&&(m.textContent=y),g=oe(We),v=C(We,"INPUT",{id:!0,class:!0,type:!0}),We.forEach(b),k=oe(xe),N=C(xe,"DIV",{class:!0});var L=z(N);q=C(L,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ge(q)!=="svelte-1fzihue"&&(q.textContent=X),W=oe(L),x=C(L,"SELECT",{id:!0,class:!0});var Se=z(x);for(let it=0;it<he.length;it+=1)he[it].l(Se);Se.forEach(b),L.forEach(b),S=oe(xe),D=C(xe,"DIV",{class:!0});var we=z(D);se=C(we,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ge(se)!=="svelte-4n7gli"&&(se.textContent=I),ne=oe(we),Ut(te.$$.fragment,we),we.forEach(b),ie=oe(xe),ge=C(xe,"DIV",{class:!0});var fe=z(ge);ke=C(fe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ge(ke)!=="svelte-1dn7717"&&(ke.textContent=Oe),be=oe(fe),Ut(le.$$.fragment,fe),fe.forEach(b),Re=oe(xe),Le=C(xe,"DIV",{class:!0});var He=z(Le);ue=C(He,"BUTTON",{class:!0,"data-svelte-h":!0}),Ge(ue)!=="svelte-ik7jo4"&&(ue.textContent=Te),O=oe(He),F=C(He,"A",{href:!0,class:!0,"data-svelte-h":!0}),Ge(F)!=="svelte-wj5j6d"&&(F.textContent=Q),He.forEach(b),xe.forEach(b),Ee.forEach(b),this.h()},h(){p(m,"for","tripName"),p(m,"class","form-label"),p(v,"id","tripName"),p(v,"class","form-control"),p(v,"type","text"),p(u,"class","mb-3"),p(q,"for","tripCurrency"),p(q,"class","form-label"),p(x,"id","tripCurrency"),p(x,"class","form-control"),i[1]===void 0&&Vn(()=>i[6].call(x)),p(N,"class","mb-3"),p(se,"for","tripStart"),p(se,"class","form-label"),p(D,"class","mb-3"),p(ke,"for","tripStart"),p(ke,"class","form-label"),p(ge,"class","mb-3"),p(ue,"class","btn btn-primary"),p(F,"href","#/"),p(F,"class","btn btn-outline-primary"),p(Le,"class","gap-3 d-grid d-md-block"),p(e,"class","w-100")},m(ce,Ee){pe(ce,e,Ee),h(e,n),h(n,r),h(n,c),h(n,u),h(u,m),h(u,g),h(u,v),ot(v,i[0]),h(n,k),h(n,N),h(N,q),h(N,W),h(N,x);for(let xe=0;xe<he.length;xe+=1)he[xe]&&he[xe].m(x,null);Jt(x,i[1],!0),h(n,S),h(n,D),h(D,se),h(D,ne),qt(te,D,null),h(n,ie),h(n,ge),h(ge,ke),h(ge,be),qt(le,ge,null),h(n,Re),h(n,Le),h(Le,ue),h(Le,O),h(Le,F),me=!0,w||(Y=[Ye(v,"input",i[5]),Ye(x,"change",i[6]),Ye(ue,"click",i[4])],w=!0)},p(ce,[Ee]){if(Ee&1&&v.value!==ce[0]&&ot(v,ce[0]),Ee&0){Ce=Ze(Object.keys(St));let L;for(L=0;L<Ce.length;L+=1){const Se=Ka(ce,Ce,L);he[L]?he[L].p(Se,Ee):(he[L]=Fa(Se),he[L].c(),he[L].m(x,null))}for(;L<he.length;L+=1)he[L].d(1);he.length=Ce.length}Ee&2&&Jt(x,ce[1]);const xe={};!ee&&Ee&4&&(ee=!0,xe.value=ce[2],In(()=>ee=!1)),te.$set(xe);const We={};Ee&4&&(We.min=ce[2]),!_e&&Ee&8&&(_e=!0,We.value=ce[3],In(()=>_e=!1)),le.$set(We)},i(ce){me||(rt(te.$$.fragment,ce),rt(le.$$.fragment,ce),me=!0)},o(ce){ut(te.$$.fragment,ce),ut(le.$$.fragment,ce),me=!1},d(ce){ce&&b(e),Mt(he,ce),xt(te),xt(le),w=!1,kn(Y)}}}function Ql(i,e,n){let r="My Trip",l="GBP",c=new Date,u=new Date;async function m(){try{const N=await Bt.trips.add({name:r,defaultCurrency:l,startDate:c,startDateString:c.toDateString(),endDate:u,endDateString:u.toDateString()});window.location.href="#/trip/"+N}catch{window.location.href="#/"}}function y(){r=this.value,n(0,r)}function g(){l=Gn(this),n(1,l)}function v(N){c=N,n(2,c)}function k(N){u=N,n(3,u)}return[r,l,c,u,m,y,g,v,k]}class $l extends ln{constructor(e){super(),sn(this,e,Ql,Jl,rn,{})}}/*!
  * PhotoSwipe Lightbox 5.4.4 - https://photoswipe.com
  * (c) 2024 Dmytro Semenov
  */function lr(i,e,n){const r=document.createElement(e);return i&&(r.className=i),n&&n.appendChild(r),r}function Xl(i,e,n){let r=`translate3d(${i}px,0px,0)`;return n!==void 0&&(r+=` scale3d(${n},${n},1)`),r}function Ii(i,e,n){i.style.width=typeof e=="number"?`${e}px`:e,i.style.height=typeof n=="number"?`${n}px`:n}const cn={IDLE:"idle",LOADING:"loading",LOADED:"loaded",ERROR:"error"};function es(i){return"button"in i&&i.button===1||i.ctrlKey||i.metaKey||i.altKey||i.shiftKey}function sr(i,e,n=document){let r=[];if(i instanceof Element)r=[i];else if(i instanceof NodeList||Array.isArray(i))r=Array.from(i);else{const l=typeof i=="string"?i:e;l&&(r=Array.from(n.querySelectorAll(l)))}return r}function ts(i){return typeof i=="function"&&i.prototype&&i.prototype.goTo}function ja(){return!!(navigator.vendor&&navigator.vendor.match(/apple/i))}class ns{constructor(e,n){this.type=e,this.defaultPrevented=!1,n&&Object.assign(this,n)}preventDefault(){this.defaultPrevented=!0}}class rs{constructor(){this._listeners={},this._filters={},this.pswp=void 0,this.options=void 0}addFilter(e,n,r=100){var l,c,u;this._filters[e]||(this._filters[e]=[]),(l=this._filters[e])===null||l===void 0||l.push({fn:n,priority:r}),(c=this._filters[e])===null||c===void 0||c.sort((m,y)=>m.priority-y.priority),(u=this.pswp)===null||u===void 0||u.addFilter(e,n,r)}removeFilter(e,n){this._filters[e]&&(this._filters[e]=this._filters[e].filter(r=>r.fn!==n)),this.pswp&&this.pswp.removeFilter(e,n)}applyFilters(e,...n){var r;return(r=this._filters[e])===null||r===void 0||r.forEach(l=>{n[0]=l.fn.apply(this,n)}),n[0]}on(e,n){var r,l;this._listeners[e]||(this._listeners[e]=[]),(r=this._listeners[e])===null||r===void 0||r.push(n),(l=this.pswp)===null||l===void 0||l.on(e,n)}off(e,n){var r;this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter(l=>n!==l)),(r=this.pswp)===null||r===void 0||r.off(e,n)}dispatch(e,n){var r;if(this.pswp)return this.pswp.dispatch(e,n);const l=new ns(e,n);return(r=this._listeners[e])===null||r===void 0||r.forEach(c=>{c.call(this,l)}),l}}class is{constructor(e,n){if(this.element=lr("pswp__img pswp__img--placeholder",e?"img":"div",n),e){const r=this.element;r.decoding="async",r.alt="",r.src=e,r.setAttribute("role","presentation")}this.element.setAttribute("aria-hidden","true")}setDisplayedSize(e,n){this.element&&(this.element.tagName==="IMG"?(Ii(this.element,250,"auto"),this.element.style.transformOrigin="0 0",this.element.style.transform=Xl(0,0,e/250)):Ii(this.element,e,n))}destroy(){var e;(e=this.element)!==null&&e!==void 0&&e.parentNode&&this.element.remove(),this.element=null}}class as{constructor(e,n,r){this.instance=n,this.data=e,this.index=r,this.element=void 0,this.placeholder=void 0,this.slide=void 0,this.displayedImageWidth=0,this.displayedImageHeight=0,this.width=Number(this.data.w)||Number(this.data.width)||0,this.height=Number(this.data.h)||Number(this.data.height)||0,this.isAttached=!1,this.hasSlide=!1,this.isDecoding=!1,this.state=cn.IDLE,this.data.type?this.type=this.data.type:this.data.src?this.type="image":this.type="html",this.instance.dispatch("contentInit",{content:this})}removePlaceholder(){this.placeholder&&!this.keepPlaceholder()&&setTimeout(()=>{this.placeholder&&(this.placeholder.destroy(),this.placeholder=void 0)},1e3)}load(e,n){if(this.slide&&this.usePlaceholder())if(this.placeholder){const r=this.placeholder.element;r&&!r.parentElement&&this.slide.container.prepend(r)}else{const r=this.instance.applyFilters("placeholderSrc",this.data.msrc&&this.slide.isFirstSlide?this.data.msrc:!1,this);this.placeholder=new is(r,this.slide.container)}this.element&&!n||this.instance.dispatch("contentLoad",{content:this,isLazy:e}).defaultPrevented||(this.isImageContent()?(this.element=lr("pswp__img","img"),this.displayedImageWidth&&this.loadImage(e)):(this.element=lr("pswp__content","div"),this.element.innerHTML=this.data.html||""),n&&this.slide&&this.slide.updateContentSize(!0))}loadImage(e){var n,r;if(!this.isImageContent()||!this.element||this.instance.dispatch("contentLoadImage",{content:this,isLazy:e}).defaultPrevented)return;const l=this.element;this.updateSrcsetSizes(),this.data.srcset&&(l.srcset=this.data.srcset),l.src=(n=this.data.src)!==null&&n!==void 0?n:"",l.alt=(r=this.data.alt)!==null&&r!==void 0?r:"",this.state=cn.LOADING,l.complete?this.onLoaded():(l.onload=()=>{this.onLoaded()},l.onerror=()=>{this.onError()})}setSlide(e){this.slide=e,this.hasSlide=!0,this.instance=e.pswp}onLoaded(){this.state=cn.LOADED,this.slide&&this.element&&(this.instance.dispatch("loadComplete",{slide:this.slide,content:this}),this.slide.isActive&&this.slide.heavyAppended&&!this.element.parentNode&&(this.append(),this.slide.updateContentSize(!0)),(this.state===cn.LOADED||this.state===cn.ERROR)&&this.removePlaceholder())}onError(){this.state=cn.ERROR,this.slide&&(this.displayError(),this.instance.dispatch("loadComplete",{slide:this.slide,isError:!0,content:this}),this.instance.dispatch("loadError",{slide:this.slide,content:this}))}isLoading(){return this.instance.applyFilters("isContentLoading",this.state===cn.LOADING,this)}isError(){return this.state===cn.ERROR}isImageContent(){return this.type==="image"}setDisplayedSize(e,n){if(this.element&&(this.placeholder&&this.placeholder.setDisplayedSize(e,n),!this.instance.dispatch("contentResize",{content:this,width:e,height:n}).defaultPrevented&&(Ii(this.element,e,n),this.isImageContent()&&!this.isError()))){const r=!this.displayedImageWidth&&e;this.displayedImageWidth=e,this.displayedImageHeight=n,r?this.loadImage(!1):this.updateSrcsetSizes(),this.slide&&this.instance.dispatch("imageSizeChange",{slide:this.slide,width:e,height:n,content:this})}}isZoomable(){return this.instance.applyFilters("isContentZoomable",this.isImageContent()&&this.state!==cn.ERROR,this)}updateSrcsetSizes(){if(!this.isImageContent()||!this.element||!this.data.srcset)return;const e=this.element,n=this.instance.applyFilters("srcsetSizesWidth",this.displayedImageWidth,this);(!e.dataset.largestUsedSize||n>parseInt(e.dataset.largestUsedSize,10))&&(e.sizes=n+"px",e.dataset.largestUsedSize=String(n))}usePlaceholder(){return this.instance.applyFilters("useContentPlaceholder",this.isImageContent(),this)}lazyLoad(){this.instance.dispatch("contentLazyLoad",{content:this}).defaultPrevented||this.load(!0)}keepPlaceholder(){return this.instance.applyFilters("isKeepingPlaceholder",this.isLoading(),this)}destroy(){this.hasSlide=!1,this.slide=void 0,!this.instance.dispatch("contentDestroy",{content:this}).defaultPrevented&&(this.remove(),this.placeholder&&(this.placeholder.destroy(),this.placeholder=void 0),this.isImageContent()&&this.element&&(this.element.onload=null,this.element.onerror=null,this.element=void 0))}displayError(){if(this.slide){var e,n;let r=lr("pswp__error-msg","div");r.innerText=(e=(n=this.instance.options)===null||n===void 0?void 0:n.errorMsg)!==null&&e!==void 0?e:"",r=this.instance.applyFilters("contentErrorElement",r,this),this.element=lr("pswp__content pswp__error-msg-container","div"),this.element.appendChild(r),this.slide.container.innerText="",this.slide.container.appendChild(this.element),this.slide.updateContentSize(!0),this.removePlaceholder()}}append(){if(this.isAttached||!this.element)return;if(this.isAttached=!0,this.state===cn.ERROR){this.displayError();return}if(this.instance.dispatch("contentAppend",{content:this}).defaultPrevented)return;const e="decode"in this.element;this.isImageContent()?e&&this.slide&&(!this.slide.isActive||ja())?(this.isDecoding=!0,this.element.decode().catch(()=>{}).finally(()=>{this.isDecoding=!1,this.appendImage()})):this.appendImage():this.slide&&!this.element.parentNode&&this.slide.container.appendChild(this.element)}activate(){this.instance.dispatch("contentActivate",{content:this}).defaultPrevented||!this.slide||(this.isImageContent()&&this.isDecoding&&!ja()?this.appendImage():this.isError()&&this.load(!1,!0),this.slide.holderElement&&this.slide.holderElement.setAttribute("aria-hidden","false"))}deactivate(){this.instance.dispatch("contentDeactivate",{content:this}),this.slide&&this.slide.holderElement&&this.slide.holderElement.setAttribute("aria-hidden","true")}remove(){this.isAttached=!1,!this.instance.dispatch("contentRemove",{content:this}).defaultPrevented&&(this.element&&this.element.parentNode&&this.element.remove(),this.placeholder&&this.placeholder.element&&this.placeholder.element.remove())}appendImage(){this.isAttached&&(this.instance.dispatch("contentAppendImage",{content:this}).defaultPrevented||(this.slide&&this.element&&!this.element.parentNode&&this.slide.container.appendChild(this.element),(this.state===cn.LOADED||this.state===cn.ERROR)&&this.removePlaceholder()))}}function os(i,e){if(i.getViewportSizeFn){const n=i.getViewportSizeFn(i,e);if(n)return n}return{x:document.documentElement.clientWidth,y:window.innerHeight}}function Ir(i,e,n,r,l){let c=0;if(e.paddingFn)c=e.paddingFn(n,r,l)[i];else if(e.padding)c=e.padding[i];else{const u="padding"+i[0].toUpperCase()+i.slice(1);e[u]&&(c=e[u])}return Number(c)||0}function ls(i,e,n,r){return{x:e.x-Ir("left",i,e,n,r)-Ir("right",i,e,n,r),y:e.y-Ir("top",i,e,n,r)-Ir("bottom",i,e,n,r)}}const Va=4e3;class ss{constructor(e,n,r,l){this.pswp=l,this.options=e,this.itemData=n,this.index=r,this.panAreaSize=null,this.elementSize=null,this.fit=1,this.fill=1,this.vFill=1,this.initial=1,this.secondary=1,this.max=1,this.min=1}update(e,n,r){const l={x:e,y:n};this.elementSize=l,this.panAreaSize=r;const c=r.x/l.x,u=r.y/l.y;this.fit=Math.min(1,c<u?c:u),this.fill=Math.min(1,c>u?c:u),this.vFill=Math.min(1,u),this.initial=this._getInitial(),this.secondary=this._getSecondary(),this.max=Math.max(this.initial,this.secondary,this._getMax()),this.min=Math.min(this.fit,this.initial,this.secondary),this.pswp&&this.pswp.dispatch("zoomLevelsUpdate",{zoomLevels:this,slideData:this.itemData})}_parseZoomLevelOption(e){const n=e+"ZoomLevel",r=this.options[n];if(r)return typeof r=="function"?r(this):r==="fill"?this.fill:r==="fit"?this.fit:Number(r)}_getSecondary(){let e=this._parseZoomLevelOption("secondary");return e||(e=Math.min(1,this.fit*3),this.elementSize&&e*this.elementSize.x>Va&&(e=Va/this.elementSize.x),e)}_getInitial(){return this._parseZoomLevelOption("initial")||this.fit}_getMax(){return this._parseZoomLevelOption("max")||Math.max(1,this.fit*4)}}function Go(i,e,n){const r=e.createContentFromData(i,n);let l;const{options:c}=e;if(c){l=new ss(c,i,-1);let u;e.pswp?u=e.pswp.viewportSize:u=os(c,e);const m=ls(c,u,i,n);l.update(r.width,r.height,m)}return r.lazyLoad(),l&&r.setDisplayedSize(Math.ceil(r.width*l.initial),Math.ceil(r.height*l.initial)),r}function us(i,e){const n=e.getItemData(i);if(!e.dispatch("lazyLoadSlide",{index:i,itemData:n}).defaultPrevented)return Go(n,e,i)}class cs extends rs{getNumItems(){var e;let n=0;const r=(e=this.options)===null||e===void 0?void 0:e.dataSource;r&&"length"in r?n=r.length:r&&"gallery"in r&&(r.items||(r.items=this._getGalleryDOMElements(r.gallery)),r.items&&(n=r.items.length));const l=this.dispatch("numItems",{dataSource:r,numItems:n});return this.applyFilters("numItems",l.numItems,r)}createContentFromData(e,n){return new as(e,this,n)}getItemData(e){var n;const r=(n=this.options)===null||n===void 0?void 0:n.dataSource;let l={};Array.isArray(r)?l=r[e]:r&&"gallery"in r&&(r.items||(r.items=this._getGalleryDOMElements(r.gallery)),l=r.items[e]);let c=l;c instanceof Element&&(c=this._domElementToItemData(c));const u=this.dispatch("itemData",{itemData:c||{},index:e});return this.applyFilters("itemData",u.itemData,e)}_getGalleryDOMElements(e){var n,r;return(n=this.options)!==null&&n!==void 0&&n.children||(r=this.options)!==null&&r!==void 0&&r.childSelector?sr(this.options.children,this.options.childSelector,e)||[]:[e]}_domElementToItemData(e){const n={element:e},r=e.tagName==="A"?e:e.querySelector("a");if(r){n.src=r.dataset.pswpSrc||r.href,r.dataset.pswpSrcset&&(n.srcset=r.dataset.pswpSrcset),n.width=r.dataset.pswpWidth?parseInt(r.dataset.pswpWidth,10):0,n.height=r.dataset.pswpHeight?parseInt(r.dataset.pswpHeight,10):0,n.w=n.width,n.h=n.height,r.dataset.pswpType&&(n.type=r.dataset.pswpType);const c=e.querySelector("img");if(c){var l;n.msrc=c.currentSrc||c.src,n.alt=(l=c.getAttribute("alt"))!==null&&l!==void 0?l:""}(r.dataset.pswpCropped||r.dataset.cropped)&&(n.thumbCropped=!0)}return this.applyFilters("domItemData",n,e,r)}lazyLoadData(e,n){return Go(e,this,n)}}class fs extends cs{constructor(e){super(),this.options=e||{},this._uid=0,this.shouldOpen=!1,this._preloadedContent=void 0,this.onThumbnailsClick=this.onThumbnailsClick.bind(this)}init(){sr(this.options.gallery,this.options.gallerySelector).forEach(e=>{e.addEventListener("click",this.onThumbnailsClick,!1)})}onThumbnailsClick(e){if(es(e)||window.pswp)return;let n={x:e.clientX,y:e.clientY};!n.x&&!n.y&&(n=null);let r=this.getClickedIndex(e);r=this.applyFilters("clickedIndex",r,e,this);const l={gallery:e.currentTarget};r>=0&&(e.preventDefault(),this.loadAndOpen(r,l,n))}getClickedIndex(e){if(this.options.getClickedIndexFn)return this.options.getClickedIndexFn.call(this,e);const n=e.target,l=sr(this.options.children,this.options.childSelector,e.currentTarget).findIndex(c=>c===n||c.contains(n));return l!==-1?l:this.options.children||this.options.childSelector?-1:0}loadAndOpen(e,n,r){if(window.pswp||!this.options)return!1;if(!n&&this.options.gallery&&this.options.children){const l=sr(this.options.gallery);l[0]&&(n={gallery:l[0]})}return this.options.index=e,this.options.initialPointerPos=r,this.shouldOpen=!0,this.preload(e,n),!0}preload(e,n){const{options:r}=this;n&&(r.dataSource=n);const l=[],c=typeof r.pswpModule;if(ts(r.pswpModule))l.push(Promise.resolve(r.pswpModule));else{if(c==="string")throw new Error("pswpModule as string is no longer supported");if(c==="function")l.push(r.pswpModule());else throw new Error("pswpModule is not valid")}typeof r.openPromise=="function"&&l.push(r.openPromise()),r.preloadFirstSlide!==!1&&e>=0&&(this._preloadedContent=us(e,this));const u=++this._uid;Promise.all(l).then(m=>{if(this.shouldOpen){const y=m[0];this._openPhotoswipe(y,u)}})}_openPhotoswipe(e,n){if(n!==this._uid&&this.shouldOpen||(this.shouldOpen=!1,window.pswp))return;const r=typeof e=="object"?new e.default(this.options):new e(this.options);this.pswp=r,window.pswp=r,Object.keys(this._listeners).forEach(l=>{var c;(c=this._listeners[l])===null||c===void 0||c.forEach(u=>{r.on(l,u)})}),Object.keys(this._filters).forEach(l=>{var c;(c=this._filters[l])===null||c===void 0||c.forEach(u=>{r.addFilter(l,u.fn,u.priority)})}),this._preloadedContent&&(r.contentLoader.addToCache(this._preloadedContent),this._preloadedContent=void 0),r.on("destroy",()=>{this.pswp=void 0,delete window.pswp}),r.init()}destroy(){var e;(e=this.pswp)===null||e===void 0||e.destroy(),this.shouldOpen=!1,this._listeners={},sr(this.options.gallery,this.options.gallerySelector).forEach(n=>{n.removeEventListener("click",this.onThumbnailsClick,!1)})}}function Ua(i,e,n){const r=i.slice();return r[9]=e[n],r}function qa(i,e,n){const r=i.slice();return r[12]=e[n],r}function Di(i){const e=i.slice(),n=Array.from(new Set(e[2].map(r=>r.currency)));return e[8]=n,e}function xa(i){let e,n,r=i[0].name+"",l,c,u,m,y,g,v,k,N,q,X='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash3" viewBox="0 0 16 16"><path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5M11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47M8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5"></path></svg>',W,x,S=i[0].startDate.toDateString()+"",D,se,I=i[0].endDate.toDateString()+"",ne,te,ee,ie,ge="Default currency: ",ke,Oe=i[0].defaultCurrency+"",be,le,_e=St[i[0].defaultCurrency].symbol+"",Re,Le,ue,Te,O,F,Q,me,w,Y,Ce,he,qe,Ie,ye,G="Receipts:",ce,Ee,xe,We,L=i[2]&&za(Di(i));return{c(){e=T("h1"),n=T("span"),l=Ne(r),c=ae(),u=T("span"),m=T("a"),y=Yt("svg"),g=Yt("path"),v=Yt("path"),N=ae(),q=T("button"),q.innerHTML=X,W=ae(),x=T("h4"),D=Ne(S),se=Ne(" - "),ne=Ne(I),te=ae(),ee=T("p"),ie=T("em"),ie.textContent=ge,ke=T("strong"),be=Ne(Oe),le=Ne(" ("),Re=Ne(_e),Le=Ne(")"),ue=ae(),Te=T("a"),O=Ne("+ Add Receipt"),Q=ae(),me=T("a"),w=Yt("svg"),Y=Yt("path"),Ce=Yt("path"),he=Ne(`
        Export/Print`),Ie=ae(),ye=T("h5"),ye.textContent=G,ce=ae(),L&&L.c(),Ee=Ft(),this.h()},l(Se){e=C(Se,"H1",{class:!0});var we=z(e);n=C(we,"SPAN",{});var fe=z(n);l=Be(fe,r),fe.forEach(b),c=oe(we),u=C(we,"SPAN",{});var He=z(u);m=C(He,"A",{href:!0,class:!0,title:!0});var it=z(m);y=Zt(it,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,class:!0,viewBox:!0});var _t=z(y);g=Zt(_t,"path",{d:!0}),z(g).forEach(b),v=Zt(_t,"path",{"fill-rule":!0,d:!0}),z(v).forEach(b),_t.forEach(b),it.forEach(b),N=oe(He),q=C(He,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Ge(q)!=="svelte-3nbotr"&&(q.innerHTML=X),He.forEach(b),we.forEach(b),W=oe(Se),x=C(Se,"H4",{});var yt=z(x);D=Be(yt,S),se=Be(yt," - "),ne=Be(yt,I),yt.forEach(b),te=oe(Se),ee=C(Se,"P",{});var ct=z(ee);ie=C(ct,"EM",{"data-svelte-h":!0}),Ge(ie)!=="svelte-sg39u8"&&(ie.textContent=ge),ke=C(ct,"STRONG",{});var pt=z(ke);be=Be(pt,Oe),le=Be(pt," ("),Re=Be(pt,_e),Le=Be(pt,")"),pt.forEach(b),ct.forEach(b),ue=oe(Se),Te=C(Se,"A",{class:!0,href:!0});var At=z(Te);O=Be(At,"+ Add Receipt"),At.forEach(b),Q=oe(Se),me=C(Se,"A",{href:!0,target:!0,class:!0});var lt=z(me);w=Zt(lt,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,class:!0,viewBox:!0});var bt=z(w);Y=Zt(bt,"path",{d:!0}),z(Y).forEach(b),Ce=Zt(bt,"path",{d:!0}),z(Ce).forEach(b),bt.forEach(b),he=Be(lt,`
        Export/Print`),lt.forEach(b),Ie=oe(Se),ye=C(Se,"H5",{class:!0,"data-svelte-h":!0}),Ge(ye)!=="svelte-7onek5"&&(ye.textContent=G),ce=oe(Se),L&&L.l(Se),Ee=Ft(),this.h()},h(){p(g,"d","M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"),p(v,"fill-rule","evenodd"),p(v,"d","M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"),p(y,"xmlns","http://www.w3.org/2000/svg"),p(y,"width","16"),p(y,"height","16"),p(y,"fill","currentColor"),p(y,"class","bi bi-pencil-square"),p(y,"viewBox","0 0 16 16"),p(m,"href",k="#/update/"+i[0].id),p(m,"class","btn btn-outline-secondary"),p(m,"title","Update Trip"),p(q,"class","btn btn-outline-secondary hover-red"),p(q,"title","Delete Trip"),p(e,"class","d-flex justify-content-between"),p(Te,"class","btn btn-primary"),p(Te,"href",F="#/addreceipt/"+i[0].id),p(Y,"d","M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"),p(Ce,"d","M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z"),p(w,"xmlns","http://www.w3.org/2000/svg"),p(w,"width","16"),p(w,"height","16"),p(w,"fill","currentColor"),p(w,"class","bi bi-download"),p(w,"viewBox","0 0 16 16"),p(me,"href",qe="#/print/"+i[0].id),p(me,"target","_blank"),p(me,"class","btn btn-outline-primary"),p(ye,"class","mt-3")},m(Se,we){pe(Se,e,we),h(e,n),h(n,l),h(e,c),h(e,u),h(u,m),h(m,y),h(y,g),h(y,v),h(u,N),h(u,q),pe(Se,W,we),pe(Se,x,we),h(x,D),h(x,se),h(x,ne),pe(Se,te,we),pe(Se,ee,we),h(ee,ie),h(ee,ke),h(ke,be),h(ke,le),h(ke,Re),h(ke,Le),pe(Se,ue,we),pe(Se,Te,we),h(Te,O),pe(Se,Q,we),pe(Se,me,we),h(me,w),h(w,Y),h(w,Ce),h(me,he),pe(Se,Ie,we),pe(Se,ye,we),pe(Se,ce,we),L&&L.m(Se,we),pe(Se,Ee,we),xe||(We=Ye(q,"click",function(){xo(i[3](i[0]))&&i[3](i[0]).apply(this,arguments)}),xe=!0)},p(Se,we){i=Se,we&1&&r!==(r=i[0].name+"")&&Xe(l,r),we&1&&k!==(k="#/update/"+i[0].id)&&p(m,"href",k),we&1&&S!==(S=i[0].startDate.toDateString()+"")&&Xe(D,S),we&1&&I!==(I=i[0].endDate.toDateString()+"")&&Xe(ne,I),we&1&&Oe!==(Oe=i[0].defaultCurrency+"")&&Xe(be,Oe),we&1&&_e!==(_e=St[i[0].defaultCurrency].symbol+"")&&Xe(Re,_e),we&1&&F!==(F="#/addreceipt/"+i[0].id)&&p(Te,"href",F),we&1&&qe!==(qe="#/print/"+i[0].id)&&p(me,"href",qe),i[2]?L?L.p(Di(i),we):(L=za(Di(i)),L.c(),L.m(Ee.parentNode,Ee)):L&&(L.d(1),L=null)},d(Se){Se&&(b(e),b(W),b(x),b(te),b(ee),b(ue),b(Te),b(Q),b(me),b(Ie),b(ye),b(ce),b(Ee)),L&&L.d(Se),xe=!1,We()}}}function za(i){let e,n,r,l="<tr><th>Description</th> <th>Date</th> <th>Type</th> <th>Total</th> <th></th></tr>",c,u,m=[],y=new Map,g,v,k,N,q,X,W,x,S="<strong>Total</strong>",D,se,I,ne,te,ee,ie=Ze(i[2]);const ge=be=>be[12].id;for(let be=0;be<ie.length;be+=1){let le=qa(i,ie,be),_e=ge(le);y.set(_e,m[be]=Ha(_e,le))}let ke=Ze(i[8]),Oe=[];for(let be=0;be<ke.length;be+=1)Oe[be]=Wa(Ua(i,ke,be));return{c(){e=T("div"),n=T("table"),r=T("thead"),r.innerHTML=l,c=ae(),u=T("tbody");for(let be=0;be<m.length;be+=1)m[be].c();g=ae(),v=T("tfoot"),k=T("tr"),N=T("td"),q=ae(),X=T("td"),W=ae(),x=T("td"),x.innerHTML=S,D=ae(),se=T("td");for(let be=0;be<Oe.length;be+=1)Oe[be].c();I=ae(),ne=T("td"),this.h()},l(be){e=C(be,"DIV",{class:!0});var le=z(e);n=C(le,"TABLE",{class:!0});var _e=z(n);r=C(_e,"THEAD",{"data-svelte-h":!0}),Ge(r)!=="svelte-1vpbmbw"&&(r.innerHTML=l),c=oe(_e),u=C(_e,"TBODY",{});var Re=z(u);for(let O=0;O<m.length;O+=1)m[O].l(Re);Re.forEach(b),g=oe(_e),v=C(_e,"TFOOT",{class:!0});var Le=z(v);k=C(Le,"TR",{});var ue=z(k);N=C(ue,"TD",{}),z(N).forEach(b),q=oe(ue),X=C(ue,"TD",{}),z(X).forEach(b),W=oe(ue),x=C(ue,"TD",{class:!0,"data-svelte-h":!0}),Ge(x)!=="svelte-14afisz"&&(x.innerHTML=S),D=oe(ue),se=C(ue,"TD",{});var Te=z(se);for(let O=0;O<Oe.length;O+=1)Oe[O].l(Te);Te.forEach(b),I=oe(ue),ne=C(ue,"TD",{}),z(ne).forEach(b),ue.forEach(b),Le.forEach(b),_e.forEach(b),le.forEach(b),this.h()},h(){p(x,"class","text-end"),p(v,"class","table-group-divider"),p(n,"class","table table-striped table-hover"),p(e,"class","table-responsive")},m(be,le){pe(be,e,le),h(e,n),h(n,r),h(n,c),h(n,u);for(let _e=0;_e<m.length;_e+=1)m[_e]&&m[_e].m(u,null);h(n,g),h(n,v),h(v,k),h(k,N),h(k,q),h(k,X),h(k,W),h(k,x),h(k,D),h(k,se);for(let _e=0;_e<Oe.length;_e+=1)Oe[_e]&&Oe[_e].m(se,null);h(k,I),h(k,ne),te||(ee=El(i[5].call(null,u)),te=!0)},p(be,le){if(le&20&&(ie=Ze(be[2]),m=jr(m,le,ge,1,be,ie,y,u,Fr,Ha,null,qa)),le&4){ke=Ze(be[8]);let _e;for(_e=0;_e<ke.length;_e+=1){const Re=Ua(be,ke,_e);Oe[_e]?Oe[_e].p(Re,le):(Oe[_e]=Wa(Re),Oe[_e].c(),Oe[_e].m(se,null))}for(;_e<Oe.length;_e+=1)Oe[_e].d(1);Oe.length=ke.length}},d(be){be&&b(e);for(let le=0;le<m.length;le+=1)m[le].d();Mt(Oe,be),te=!1,ee()}}}function Ha(i,e){let n,r,l,c,u,m,y,g,v,k,N,q,X,W=e[12].description+"",x,S,D,se=e[12].receiptDateString+"",I,ne,te,ee,ie,ge=Ba[e[12].receiptType]+"",ke,Oe,be=e[12].receiptType+"",le,_e,Re,Le=St[e[12].currency].symbol+"",ue,Te,O=e[12].total.toFixed(2)+"",F,Q,me,w,Y,Ce,he,qe,Ie,ye,G='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash3" viewBox="0 0 16 16"><path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5M11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47M8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5"></path></svg>',ce,Ee,xe;return{key:i,first:null,c(){n=T("tr"),r=T("td"),l=T("div"),c=T("span"),u=T("a"),m=Yt("svg"),y=Yt("path"),g=Yt("path"),q=ae(),X=T("span"),x=Ne(W),S=ae(),D=T("td"),I=Ne(se),ne=ae(),te=T("td"),ee=T("abbr"),ie=new Dl(!1),Oe=T("span"),le=Ne(be),_e=ae(),Re=T("td"),ue=Ne(Le),Te=ae(),F=Ne(O),Q=ae(),me=T("td"),w=T("a"),Y=Yt("svg"),Ce=Yt("path"),he=Yt("path"),Ie=ae(),ye=T("button"),ye.innerHTML=G,ce=ae(),this.h()},l(We){n=C(We,"TR",{});var L=z(n);r=C(L,"TD",{});var Se=z(r);l=C(Se,"DIV",{class:!0});var we=z(l);c=C(we,"SPAN",{});var fe=z(c);u=C(fe,"A",{class:!0,href:!0,"data-pswp-width":!0,"data-pswp-height":!0,target:!0,rel:!0,title:!0,style:!0});var He=z(u);m=Zt(He,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,class:!0,viewBox:!0});var it=z(m);y=Zt(it,"path",{d:!0}),z(y).forEach(b),g=Zt(it,"path",{d:!0}),z(g).forEach(b),it.forEach(b),He.forEach(b),fe.forEach(b),q=oe(we),X=C(we,"SPAN",{});var _t=z(X);x=Be(_t,W),_t.forEach(b),we.forEach(b),Se.forEach(b),S=oe(L),D=C(L,"TD",{});var yt=z(D);I=Be(yt,se),yt.forEach(b),ne=oe(L),te=C(L,"TD",{});var ct=z(te);ee=C(ct,"ABBR",{class:!0,title:!0});var pt=z(ee);ie=Sl(pt,!1),pt.forEach(b),Oe=C(ct,"SPAN",{class:!0});var At=z(Oe);le=Be(At,be),At.forEach(b),ct.forEach(b),_e=oe(L),Re=C(L,"TD",{class:!0});var lt=z(Re);ue=Be(lt,Le),Te=oe(lt),F=Be(lt,O),lt.forEach(b),Q=oe(L),me=C(L,"TD",{});var bt=z(me);w=C(bt,"A",{class:!0,href:!0,title:!0});var Je=z(w);Y=Zt(Je,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,class:!0,viewBox:!0});var Xt=z(Y);Ce=Zt(Xt,"path",{d:!0}),z(Ce).forEach(b),he=Zt(Xt,"path",{"fill-rule":!0,d:!0}),z(he).forEach(b),Xt.forEach(b),Je.forEach(b),Ie=oe(bt),ye=C(bt,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Ge(ye)!=="svelte-rhumqt"&&(ye.innerHTML=G),bt.forEach(b),ce=oe(L),L.forEach(b),this.h()},h(){p(y,"d","M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0"),p(g,"d","M2.002 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2zm12 1a1 1 0 0 1 1 1v6.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12V3a1 1 0 0 1 1-1z"),p(m,"xmlns","http://www.w3.org/2000/svg"),p(m,"width","16"),p(m,"height","16"),p(m,"fill","currentColor"),p(m,"class","bi bi-image"),p(m,"viewBox","0 0 16 16"),p(u,"class","btn btn-outline-primary btn-sm rImages"),p(u,"href",v=URL.createObjectURL(e[12].imageData)),p(u,"data-pswp-width",k=e[12].imageWidth),p(u,"data-pswp-height",N=e[12].imageHeight),p(u,"target","_blank"),p(u,"rel","noreferrer"),p(u,"title","View Image"),Ai(u,"border","none"),p(l,"class","receiptDesc"),ie.a=null,p(ee,"class","me-2 typeIcon"),p(ee,"title",ke=e[12].receiptType),p(Oe,"class","typeText"),p(Re,"class","text-nowrap"),p(Ce,"d","M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"),p(he,"fill-rule","evenodd"),p(he,"d","M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"),p(Y,"xmlns","http://www.w3.org/2000/svg"),p(Y,"width","16"),p(Y,"height","16"),p(Y,"fill","currentColor"),p(Y,"class","bi bi-pencil-square"),p(Y,"viewBox","0 0 16 16"),p(w,"class","btn btn-outline-dark btn-sm"),p(w,"href",qe="#/editreceipt/"+e[12].id),p(w,"title","Edit Receipt"),p(ye,"class","btn btn-outline-dark btn-sm hover-red"),p(ye,"title","Delete Receipt"),this.first=n},m(We,L){pe(We,n,L),h(n,r),h(r,l),h(l,c),h(c,u),h(u,m),h(m,y),h(m,g),h(l,q),h(l,X),h(X,x),h(n,S),h(n,D),h(D,I),h(n,ne),h(n,te),h(te,ee),ie.m(ge,ee),h(te,Oe),h(Oe,le),h(n,_e),h(n,Re),h(Re,ue),h(Re,Te),h(Re,F),h(n,Q),h(n,me),h(me,w),h(w,Y),h(Y,Ce),h(Y,he),h(me,Ie),h(me,ye),h(n,ce),Ee||(xe=Ye(ye,"click",function(){xo(e[4](e[12]))&&e[4](e[12]).apply(this,arguments)}),Ee=!0)},p(We,L){e=We,L&4&&v!==(v=URL.createObjectURL(e[12].imageData))&&p(u,"href",v),L&4&&k!==(k=e[12].imageWidth)&&p(u,"data-pswp-width",k),L&4&&N!==(N=e[12].imageHeight)&&p(u,"data-pswp-height",N),L&4&&W!==(W=e[12].description+"")&&Xe(x,W),L&4&&se!==(se=e[12].receiptDateString+"")&&Xe(I,se),L&4&&ge!==(ge=Ba[e[12].receiptType]+"")&&ie.p(ge),L&4&&ke!==(ke=e[12].receiptType)&&p(ee,"title",ke),L&4&&be!==(be=e[12].receiptType+"")&&Xe(le,be),L&4&&Le!==(Le=St[e[12].currency].symbol+"")&&Xe(ue,Le),L&4&&O!==(O=e[12].total.toFixed(2)+"")&&Xe(F,O),L&4&&qe!==(qe="#/editreceipt/"+e[12].id)&&p(w,"href",qe)},d(We){We&&b(n),Ee=!1,xe()}}}function Wa(i){let e=St[i[9]].symbol+"",n,r,l=i[2].filter(y).reduce(Ga,0).toFixed(2)+"",c,u,m;function y(...g){return i[7](i[9],...g)}return{c(){n=Ne(e),r=ae(),c=Ne(l),u=ae(),m=T("br")},l(g){n=Be(g,e),r=oe(g),c=Be(g,l),u=oe(g),m=C(g,"BR",{})},m(g,v){pe(g,n,v),pe(g,r,v),pe(g,c,v),pe(g,u,v),pe(g,m,v)},p(g,v){i=g,v&4&&e!==(e=St[i[9]].symbol+"")&&Xe(n,e),v&4&&l!==(l=i[2].filter(y).reduce(Ga,0).toFixed(2)+"")&&Xe(c,l)},d(g){g&&(b(n),b(r),b(c),b(u),b(m))}}}function ds(i){let e,n=i[0]&&xa(i);return{c(){e=T("div"),n&&n.c(),this.h()},l(r){e=C(r,"DIV",{class:!0});var l=z(e);n&&n.l(l),l.forEach(b),this.h()},h(){p(e,"class","w-100")},m(r,l){pe(r,e,l),n&&n.m(e,null)},p(r,[l]){r[0]?n?n.p(r,l):(n=xa(r),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},i:Dt,o:Dt,d(r){r&&b(e),n&&n.d()}}}const Ga=(i,e)=>i+e.total;function hs(i,e,n){let r,l=Dt,c=()=>(l(),l=ur(y,q=>n(2,r=q)),y);i.$$.on_destroy.push(()=>l());let{tripId:u}=e,m,y;u>-1&&Bt.trips.get(u).then(q=>{n(0,m=q),c(n(1,y=xr(async()=>await Bt.receipts.where({tripId:u}).reverse().sortBy("receiptDate"))))});async function g(q){if(confirm(`Are you sure you want to delete trip "${q.name}"? It will also delete all receipts for this trip`)){let W=await Bt.trips.where("id").equals(q.id).delete();console.log(`Deleted ${W} trip(s)`),W=await Bt.receipts.where("tripId").equals(q.id).delete(),console.log(`Deleted ${W} receipts(s)`),window.location.href="#/"}}async function v(q){if(confirm(`Are you sure you want to delete receipt for "${q.description}"?`)){let W=await Bt.receipts.where("id").equals(q.id).delete();console.log(`Deleted ${W} receipts(s)`)}}function k(q){new fs({gallery:".rImages",pswpModule:()=>Al(()=>import("../chunks/photoswipe.esm.GXRgw7eJ.js"),[],import.meta.url)}).init()}const N=(q,X)=>X.currency==q;return i.$$set=q=>{"tripId"in q&&n(6,u=q.tripId)},[m,y,r,g,v,k,u,N]}class ps extends ln{constructor(e){super(),sn(this,e,hs,ds,rn,{tripId:6})}}function Yo(){let i=document.getElementById("tripToggle"),e=document.getElementById("mainPane");i!=null&&i.classList.contains("show")?(i==null||i.classList.remove("show"),e==null||e.classList.remove("d-none")):(i==null||i.classList.add("show"),e==null||e.classList.add("d-none"))}function Ya(i,e,n){const r=i.slice();return r[8]=e[n],r}function Za(i,e,n){const r=i.slice();return r[12]=e[n],r}function Si(i){const e=i.slice(),n=Array.from(new Set(e[2].filter(function(...l){return i[5](e[8],...l)}).map(r=>r.currency)));return e[11]=n,e}function Ja(i){let e=[],n=new Map,r,l=Ze(i[1]);const c=u=>u[8].id;for(let u=0;u<l.length;u+=1){let m=Ya(i,l,u),y=c(m);n.set(y,e[u]=Xa(y,m))}return{c(){for(let u=0;u<e.length;u+=1)e[u].c();r=Ft()},l(u){for(let m=0;m<e.length;m+=1)e[m].l(u);r=Ft()},m(u,m){for(let y=0;y<e.length;y+=1)e[y]&&e[y].m(u,m);pe(u,r,m)},p(u,m){m&7&&(l=Ze(u[1]),e=jr(e,m,c,1,u,l,n,r.parentNode,Fr,Xa,r,Ya))},d(u){u&&b(r);for(let m=0;m<e.length;m+=1)e[m].d(u)}}}function Qa(i){let e,n=Ze(i[11]),r=[];for(let l=0;l<n.length;l+=1)r[l]=$a(Za(i,n,l));return{c(){e=T("small");for(let l=0;l<r.length;l+=1)r[l].c()},l(l){e=C(l,"SMALL",{});var c=z(e);for(let u=0;u<r.length;u+=1)r[u].l(c);c.forEach(b)},m(l,c){pe(l,e,c);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null)},p(l,c){if(c&6){n=Ze(l[11]);let u;for(u=0;u<n.length;u+=1){const m=Za(l,n,u);r[u]?r[u].p(m,c):(r[u]=$a(m),r[u].c(),r[u].m(e,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=n.length}},d(l){l&&b(e),Mt(r,l)}}}function $a(i){let e=St[i[12]].symbol+"",n,r,l=i[2].filter(y).filter(g).reduce(eo,0).toFixed(2)+"",c,u,m;function y(...v){return i[6](i[8],...v)}function g(...v){return i[7](i[12],...v)}return{c(){n=Ne(e),r=ae(),c=Ne(l),u=ae(),m=T("br")},l(v){n=Be(v,e),r=oe(v),c=Be(v,l),u=oe(v),m=C(v,"BR",{})},m(v,k){pe(v,n,k),pe(v,r,k),pe(v,c,k),pe(v,u,k),pe(v,m,k)},p(v,k){i=v,k&6&&e!==(e=St[i[12]].symbol+"")&&Xe(n,e),k&6&&l!==(l=i[2].filter(y).filter(g).reduce(eo,0).toFixed(2)+"")&&Xe(c,l)},d(v){v&&(b(n),b(r),b(c),b(u),b(m))}}}function Xa(i,e){let n,r,l,c=e[8].name+"",u,m,y,g,v=e[8].startDateString+"",k,N,q=e[8].endDateString+"",X,W,x,S,D,se,I=e[2]&&Qa(Si(e));return{key:i,first:null,c(){n=T("a"),r=T("div"),l=T("strong"),u=Ne(c),m=ae(),I&&I.c(),y=ae(),g=T("div"),k=Ne(v),N=Ne(" - "),X=Ne(q),W=ae(),this.h()},l(ne){n=C(ne,"A",{href:!0,class:!0,"aria-current":!0,"data-trip-id":!0});var te=z(n);r=C(te,"DIV",{class:!0});var ee=z(r);l=C(ee,"STRONG",{class:!0});var ie=z(l);u=Be(ie,c),ie.forEach(b),m=oe(ee),I&&I.l(ee),ee.forEach(b),y=oe(te),g=C(te,"DIV",{class:!0});var ge=z(g);k=Be(ge,v),N=Be(ge," - "),X=Be(ge,q),ge.forEach(b),W=oe(te),te.forEach(b),this.h()},h(){p(l,"class","mb-1"),p(r,"class","d-flex w-100 align-items-center justify-content-between"),p(g,"class","col-10 mb-1 small"),p(n,"href",x="#/trip/"+e[8].id),p(n,"class","list-group-item list-group-item-action py-3 lh-sm me-1"),p(n,"aria-current","false"),p(n,"data-trip-id",S=e[8].id),Ct(n,"active",e[0]==e[8].id),this.first=n},m(ne,te){pe(ne,n,te),h(n,r),h(r,l),h(l,u),h(r,m),I&&I.m(r,null),h(n,y),h(n,g),h(g,k),h(g,N),h(g,X),h(n,W),D||(se=Ye(n,"click",Yo),D=!0)},p(ne,te){e=ne,te&2&&c!==(c=e[8].name+"")&&Xe(u,c),e[2]?I?I.p(Si(e),te):(I=Qa(Si(e)),I.c(),I.m(r,null)):I&&(I.d(1),I=null),te&2&&v!==(v=e[8].startDateString+"")&&Xe(k,v),te&2&&q!==(q=e[8].endDateString+"")&&Xe(X,q),te&2&&x!==(x="#/trip/"+e[8].id)&&p(n,"href",x),te&2&&S!==(S=e[8].id)&&p(n,"data-trip-id",S),te&3&&Ct(n,"active",e[0]==e[8].id)},d(ne){ne&&b(n),I&&I.d(),D=!1,se()}}}function ms(i){let e,n=i[1]&&Ja(i);return{c(){n&&n.c(),e=Ft()},l(r){n&&n.l(r),e=Ft()},m(r,l){n&&n.m(r,l),pe(r,e,l)},p(r,[l]){r[1]?n?n.p(r,l):(n=Ja(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:Dt,o:Dt,d(r){r&&b(e),n&&n.d(r)}}}const eo=(i,e)=>i+e.total;function gs(i,e,n){let r,l,{tripId:c}=e,u=xr(()=>Bt.trips.toCollection().reverse().sortBy("endDate"));cr(i,u,k=>n(1,r=k));let m=xr(()=>Bt.receipts.toArray());cr(i,m,k=>n(2,l=k));const y=(k,N)=>N.tripId==k.id,g=(k,N)=>N.tripId==k.id,v=(k,N)=>N.currency==k;return i.$$set=k=>{"tripId"in k&&n(0,c=k.tripId)},[c,r,l,u,m,y,g,v]}class vs extends ln{constructor(e){super(),sn(this,e,gs,ms,rn,{tripId:0})}}function to(i,e,n){const r=i.slice();return r[9]=e[n],r}function no(i){let e,n,r="Update Trip",l,c,u,m="Trip Name",y,g,v,k,N,q="Trip Currency",X,W,x,S,D,se="Trip Start",I,ne,te,ee,ie,ge,ke="Trip End",Oe,be,le,_e,Re,Le,ue="Update Trip",Te,O,F,Q,me,w,Y,Ce=Ze(Object.keys(St)),he=[];for(let ce=0;ce<Ce.length;ce+=1)he[ce]=ro(to(i,Ce,ce));function qe(ce){i[7](ce)}let Ie={format:"yyyy-MM-dd",closeOnSelection:!0,id:"tripStart"};i[1]!==void 0&&(Ie.value=i[1]),ne=new Yn({props:Ie}),nn.push(()=>Ln(ne,"value",qe));function ye(ce){i[8](ce)}let G={format:"yyyy-MM-dd",closeOnSelection:!0,min:i[1],id:"tripEnd"};return i[2]!==void 0&&(G.value=i[2]),be=new Yn({props:G}),nn.push(()=>Ln(be,"value",ye)),{c(){e=T("form"),n=T("h1"),n.textContent=r,l=ae(),c=T("div"),u=T("label"),u.textContent=m,y=ae(),g=T("input"),v=ae(),k=T("div"),N=T("label"),N.textContent=q,X=ae(),W=T("select");for(let ce=0;ce<he.length;ce+=1)he[ce].c();x=ae(),S=T("div"),D=T("label"),D.textContent=se,I=ae(),Vt(ne.$$.fragment),ee=ae(),ie=T("div"),ge=T("label"),ge.textContent=ke,Oe=ae(),Vt(be.$$.fragment),_e=ae(),Re=T("div"),Le=T("button"),Le.textContent=ue,Te=ae(),O=T("a"),F=Ne("Cancel"),this.h()},l(ce){e=C(ce,"FORM",{});var Ee=z(e);n=C(Ee,"H1",{"data-svelte-h":!0}),Ge(n)!=="svelte-9352dq"&&(n.textContent=r),l=oe(Ee),c=C(Ee,"DIV",{class:!0});var xe=z(c);u=C(xe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ge(u)!=="svelte-1y8z10u"&&(u.textContent=m),y=oe(xe),g=C(xe,"INPUT",{id:!0,class:!0,type:!0}),xe.forEach(b),v=oe(Ee),k=C(Ee,"DIV",{class:!0});var We=z(k);N=C(We,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ge(N)!=="svelte-1fzihue"&&(N.textContent=q),X=oe(We),W=C(We,"SELECT",{id:!0,class:!0});var L=z(W);for(let it=0;it<he.length;it+=1)he[it].l(L);L.forEach(b),We.forEach(b),x=oe(Ee),S=C(Ee,"DIV",{class:!0});var Se=z(S);D=C(Se,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ge(D)!=="svelte-4n7gli"&&(D.textContent=se),I=oe(Se),Ut(ne.$$.fragment,Se),Se.forEach(b),ee=oe(Ee),ie=C(Ee,"DIV",{class:!0});var we=z(ie);ge=C(we,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ge(ge)!=="svelte-1dn7717"&&(ge.textContent=ke),Oe=oe(we),Ut(be.$$.fragment,we),we.forEach(b),_e=oe(Ee),Re=C(Ee,"DIV",{class:!0});var fe=z(Re);Le=C(fe,"BUTTON",{class:!0,"data-svelte-h":!0}),Ge(Le)!=="svelte-bsugmm"&&(Le.textContent=ue),Te=oe(fe),O=C(fe,"A",{href:!0,class:!0});var He=z(O);F=Be(He,"Cancel"),He.forEach(b),fe.forEach(b),Ee.forEach(b),this.h()},h(){p(u,"for","tripName"),p(u,"class","form-label"),p(g,"id","tripName"),p(g,"class","form-control"),p(g,"type","text"),p(c,"class","mb-3"),p(N,"for","tripCurrency"),p(N,"class","form-label"),p(W,"id","tripCurrency"),p(W,"class","form-control"),i[0].defaultCurrency===void 0&&Vn(()=>i[6].call(W)),p(k,"class","mb-3"),p(D,"for","tripStart"),p(D,"class","form-label"),p(S,"class","mb-3"),p(ge,"for","tripStart"),p(ge,"class","form-label"),p(ie,"class","mb-3"),p(Le,"class","btn btn-primary"),p(O,"href",Q="#/trip/"+i[0].id),p(O,"class","btn btn-outline-primary"),p(Re,"class","gap-3 d-grid d-md-block")},m(ce,Ee){pe(ce,e,Ee),h(e,n),h(e,l),h(e,c),h(c,u),h(c,y),h(c,g),ot(g,i[0].name),h(e,v),h(e,k),h(k,N),h(k,X),h(k,W);for(let xe=0;xe<he.length;xe+=1)he[xe]&&he[xe].m(W,null);Jt(W,i[0].defaultCurrency,!0),h(e,x),h(e,S),h(S,D),h(S,I),qt(ne,S,null),h(e,ee),h(e,ie),h(ie,ge),h(ie,Oe),qt(be,ie,null),h(e,_e),h(e,Re),h(Re,Le),h(Re,Te),h(Re,O),h(O,F),me=!0,w||(Y=[Ye(g,"input",i[5]),Ye(W,"change",i[6]),Ye(Le,"click",i[3])],w=!0)},p(ce,Ee){if(Ee&1&&g.value!==ce[0].name&&ot(g,ce[0].name),Ee&0){Ce=Ze(Object.keys(St));let L;for(L=0;L<Ce.length;L+=1){const Se=to(ce,Ce,L);he[L]?he[L].p(Se,Ee):(he[L]=ro(Se),he[L].c(),he[L].m(W,null))}for(;L<he.length;L+=1)he[L].d(1);he.length=Ce.length}Ee&1&&Jt(W,ce[0].defaultCurrency);const xe={};!te&&Ee&2&&(te=!0,xe.value=ce[1],In(()=>te=!1)),ne.$set(xe);const We={};Ee&2&&(We.min=ce[1]),!le&&Ee&4&&(le=!0,We.value=ce[2],In(()=>le=!1)),be.$set(We),(!me||Ee&1&&Q!==(Q="#/trip/"+ce[0].id))&&p(O,"href",Q)},i(ce){me||(rt(ne.$$.fragment,ce),rt(be.$$.fragment,ce),me=!0)},o(ce){ut(ne.$$.fragment,ce),ut(be.$$.fragment,ce),me=!1},d(ce){ce&&b(e),Mt(he,ce),xt(ne),xt(be),w=!1,kn(Y)}}}function ro(i){let e,n=i[9]+"",r,l,c=St[i[9]].symbol+"",u,m;return{c(){e=T("option"),r=Ne(n),l=Ne(" ("),u=Ne(c),m=Ne(`)
          `),this.h()},l(y){e=C(y,"OPTION",{});var g=z(e);r=Be(g,n),l=Be(g," ("),u=Be(g,c),m=Be(g,`)
          `),g.forEach(b),this.h()},h(){e.__value=i[9],ot(e,e.__value)},m(y,g){pe(y,e,g),h(e,r),h(e,l),h(e,u),h(e,m)},p:Dt,d(y){y&&b(e)}}}function _s(i){let e,n,r=i[0]&&no(i);return{c(){e=T("div"),r&&r.c(),this.h()},l(l){e=C(l,"DIV",{class:!0});var c=z(e);r&&r.l(c),c.forEach(b),this.h()},h(){p(e,"class","w-100")},m(l,c){pe(l,e,c),r&&r.m(e,null),n=!0},p(l,[c]){l[0]?r?(r.p(l,c),c&1&&rt(r,1)):(r=no(l),r.c(),rt(r,1),r.m(e,null)):r&&(Un(),ut(r,1,1,()=>{r=null}),qn())},i(l){n||(rt(r),n=!0)},o(l){ut(r),n=!1},d(l){l&&b(e),r&&r.d()}}}function ys(i,e,n){let{tripId:r}=e,l,c,u;r>-1&&Bt.trips.get(r).then(N=>{n(0,l=N),n(1,c=new Date(l.startDateString)),n(2,u=new Date(l.endDateString))});async function m(){try{const N=await Bt.trips.update(l.id,{name:l.name,defaultCurrency:l.defaultCurrency,startDate:c,endDate:u,startDateString:c.toDateString(),endDateString:u.toDateString()});window.location.href="#/trip/"+l.id}catch{window.location.href="#/"}}function y(){l.name=this.value,n(0,l)}function g(){l.defaultCurrency=Gn(this),n(0,l)}function v(N){c=N,n(1,c)}function k(N){u=N,n(2,u)}return i.$$set=N=>{"tripId"in N&&n(4,r=N.tripId)},[l,c,u,m,r,y,g,v,k]}class bs extends ln{constructor(e){super(),sn(this,e,ys,_s,rn,{tripId:4})}}/*!
 * currency.js - v2.0.4
 * http://scurker.github.io/currency.js
 *
 * Copyright (c) 2021 Jason Wilson
 * Released under MIT license
 */var ws={symbol:"$",separator:",",decimal:".",errorOnInvalid:!1,precision:2,pattern:"!#",negativePattern:"-!#",format:Ss,fromCents:!1},Zo=function(e){return Math.round(e)},Mi=function(e){return Math.pow(10,e)},ks=function(e,n){return Zo(e/n)*n},Es=/(\d)(?=(\d{3})+\b)/g,Ds=/(\d)(?=(\d\d)+\d\b)/g;function gn(i,e){var n=this;if(!(n instanceof gn))return new gn(i,e);var r=Object.assign({},ws,e),l=Mi(r.precision),c=Nr(i,r);n.intValue=c,n.value=c/l,r.increment=r.increment||1/l,r.useVedic?r.groups=Ds:r.groups=Es,this.s=r,this.p=l}function Nr(i,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=0,l=e.decimal,c=e.errorOnInvalid,u=e.precision,m=e.fromCents,y=Mi(u),g=typeof i=="number",v=i instanceof gn;if(v&&m)return i.intValue;if(g||v)r=v?i.value:i;else if(typeof i=="string"){var k=new RegExp("[^-\\d"+l+"]","g"),N=new RegExp("\\"+l,"g");r=i.replace(/\((.*)\)/,"-$1").replace(k,"").replace(N,"."),r=r||0}else{if(c)throw Error("Invalid Input");r=0}return m||(r*=y,r=r.toFixed(4)),n?Zo(r):r}function Ss(i,e){var n=e.pattern,r=e.negativePattern,l=e.symbol,c=e.separator,u=e.decimal,m=e.groups,y=(""+i).replace(/^-/,"").split("."),g=y[0],v=y[1];return(i.value>=0?n:r).replace("!",l).replace("#",g.replace(m,"$1"+c)+(v?u+v:""))}gn.prototype={add:function(e){var n=this.intValue,r=this.s,l=this.p;return gn((n+=Nr(e,r))/(r.fromCents?1:l),r)},subtract:function(e){var n=this.intValue,r=this.s,l=this.p;return gn((n-=Nr(e,r))/(r.fromCents?1:l),r)},multiply:function(e){var n=this.intValue,r=this.s;return gn((n*=e)/(r.fromCents?1:Mi(r.precision)),r)},divide:function(e){var n=this.intValue,r=this.s;return gn(n/=Nr(e,r,!1),r)},distribute:function(e){for(var n=this.intValue,r=this.p,l=this.s,c=[],u=Math[n>=0?"floor":"ceil"](n/e),m=Math.abs(n-u*e),y=l.fromCents?1:r;e!==0;e--){var g=gn(u/y,l);m-- >0&&(g=g[n>=0?"add":"subtract"](1/y)),c.push(g)}return c},dollars:function(){return~~this.value},cents:function(){var e=this.intValue,n=this.p;return~~(e%n)},format:function(e){var n=this.s;return typeof e=="function"?e(this,n):n.format(this,Object.assign({},n,e))},toString:function(){var e=this.intValue,n=this.p,r=this.s;return ks(e/n,r.increment).toFixed(r.precision)},toJSON:function(){return this.value}};var Ts={exports:{}};(function(i){var e=function(n){var r=Object.prototype,l=r.hasOwnProperty,c=Object.defineProperty||function(O,F,Q){O[F]=Q.value},u,m=typeof Symbol=="function"?Symbol:{},y=m.iterator||"@@iterator",g=m.asyncIterator||"@@asyncIterator",v=m.toStringTag||"@@toStringTag";function k(O,F,Q){return Object.defineProperty(O,F,{value:Q,enumerable:!0,configurable:!0,writable:!0}),O[F]}try{k({},"")}catch{k=function(F,Q,me){return F[Q]=me}}function N(O,F,Q,me){var w=F&&F.prototype instanceof se?F:se,Y=Object.create(w.prototype),Ce=new Le(me||[]);return c(Y,"_invoke",{value:be(O,Q,Ce)}),Y}n.wrap=N;function q(O,F,Q){try{return{type:"normal",arg:O.call(F,Q)}}catch(me){return{type:"throw",arg:me}}}var X="suspendedStart",W="suspendedYield",x="executing",S="completed",D={};function se(){}function I(){}function ne(){}var te={};k(te,y,function(){return this});var ee=Object.getPrototypeOf,ie=ee&&ee(ee(ue([])));ie&&ie!==r&&l.call(ie,y)&&(te=ie);var ge=ne.prototype=se.prototype=Object.create(te);I.prototype=ne,c(ge,"constructor",{value:ne,configurable:!0}),c(ne,"constructor",{value:I,configurable:!0}),I.displayName=k(ne,v,"GeneratorFunction");function ke(O){["next","throw","return"].forEach(function(F){k(O,F,function(Q){return this._invoke(F,Q)})})}n.isGeneratorFunction=function(O){var F=typeof O=="function"&&O.constructor;return F?F===I||(F.displayName||F.name)==="GeneratorFunction":!1},n.mark=function(O){return Object.setPrototypeOf?Object.setPrototypeOf(O,ne):(O.__proto__=ne,k(O,v,"GeneratorFunction")),O.prototype=Object.create(ge),O},n.awrap=function(O){return{__await:O}};function Oe(O,F){function Q(Y,Ce,he,qe){var Ie=q(O[Y],O,Ce);if(Ie.type==="throw")qe(Ie.arg);else{var ye=Ie.arg,G=ye.value;return G&&typeof G=="object"&&l.call(G,"__await")?F.resolve(G.__await).then(function(ce){Q("next",ce,he,qe)},function(ce){Q("throw",ce,he,qe)}):F.resolve(G).then(function(ce){ye.value=ce,he(ye)},function(ce){return Q("throw",ce,he,qe)})}}var me;function w(Y,Ce){function he(){return new F(function(qe,Ie){Q(Y,Ce,qe,Ie)})}return me=me?me.then(he,he):he()}c(this,"_invoke",{value:w})}ke(Oe.prototype),k(Oe.prototype,g,function(){return this}),n.AsyncIterator=Oe,n.async=function(O,F,Q,me,w){w===void 0&&(w=Promise);var Y=new Oe(N(O,F,Q,me),w);return n.isGeneratorFunction(F)?Y:Y.next().then(function(Ce){return Ce.done?Ce.value:Y.next()})};function be(O,F,Q){var me=X;return function(Y,Ce){if(me===x)throw new Error("Generator is already running");if(me===S){if(Y==="throw")throw Ce;return Te()}for(Q.method=Y,Q.arg=Ce;;){var he=Q.delegate;if(he){var qe=le(he,Q);if(qe){if(qe===D)continue;return qe}}if(Q.method==="next")Q.sent=Q._sent=Q.arg;else if(Q.method==="throw"){if(me===X)throw me=S,Q.arg;Q.dispatchException(Q.arg)}else Q.method==="return"&&Q.abrupt("return",Q.arg);me=x;var Ie=q(O,F,Q);if(Ie.type==="normal"){if(me=Q.done?S:W,Ie.arg===D)continue;return{value:Ie.arg,done:Q.done}}else Ie.type==="throw"&&(me=S,Q.method="throw",Q.arg=Ie.arg)}}}function le(O,F){var Q=F.method,me=O.iterator[Q];if(me===u)return F.delegate=null,Q==="throw"&&O.iterator.return&&(F.method="return",F.arg=u,le(O,F),F.method==="throw")||Q!=="return"&&(F.method="throw",F.arg=new TypeError("The iterator does not provide a '"+Q+"' method")),D;var w=q(me,O.iterator,F.arg);if(w.type==="throw")return F.method="throw",F.arg=w.arg,F.delegate=null,D;var Y=w.arg;if(!Y)return F.method="throw",F.arg=new TypeError("iterator result is not an object"),F.delegate=null,D;if(Y.done)F[O.resultName]=Y.value,F.next=O.nextLoc,F.method!=="return"&&(F.method="next",F.arg=u);else return Y;return F.delegate=null,D}ke(ge),k(ge,v,"Generator"),k(ge,y,function(){return this}),k(ge,"toString",function(){return"[object Generator]"});function _e(O){var F={tryLoc:O[0]};1 in O&&(F.catchLoc=O[1]),2 in O&&(F.finallyLoc=O[2],F.afterLoc=O[3]),this.tryEntries.push(F)}function Re(O){var F=O.completion||{};F.type="normal",delete F.arg,O.completion=F}function Le(O){this.tryEntries=[{tryLoc:"root"}],O.forEach(_e,this),this.reset(!0)}n.keys=function(O){var F=Object(O),Q=[];for(var me in F)Q.push(me);return Q.reverse(),function w(){for(;Q.length;){var Y=Q.pop();if(Y in F)return w.value=Y,w.done=!1,w}return w.done=!0,w}};function ue(O){if(O){var F=O[y];if(F)return F.call(O);if(typeof O.next=="function")return O;if(!isNaN(O.length)){var Q=-1,me=function w(){for(;++Q<O.length;)if(l.call(O,Q))return w.value=O[Q],w.done=!1,w;return w.value=u,w.done=!0,w};return me.next=me}}return{next:Te}}n.values=ue;function Te(){return{value:u,done:!0}}return Le.prototype={constructor:Le,reset:function(O){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(Re),!O)for(var F in this)F.charAt(0)==="t"&&l.call(this,F)&&!isNaN(+F.slice(1))&&(this[F]=u)},stop:function(){this.done=!0;var O=this.tryEntries[0],F=O.completion;if(F.type==="throw")throw F.arg;return this.rval},dispatchException:function(O){if(this.done)throw O;var F=this;function Q(qe,Ie){return Y.type="throw",Y.arg=O,F.next=qe,Ie&&(F.method="next",F.arg=u),!!Ie}for(var me=this.tryEntries.length-1;me>=0;--me){var w=this.tryEntries[me],Y=w.completion;if(w.tryLoc==="root")return Q("end");if(w.tryLoc<=this.prev){var Ce=l.call(w,"catchLoc"),he=l.call(w,"finallyLoc");if(Ce&&he){if(this.prev<w.catchLoc)return Q(w.catchLoc,!0);if(this.prev<w.finallyLoc)return Q(w.finallyLoc)}else if(Ce){if(this.prev<w.catchLoc)return Q(w.catchLoc,!0)}else if(he){if(this.prev<w.finallyLoc)return Q(w.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(O,F){for(var Q=this.tryEntries.length-1;Q>=0;--Q){var me=this.tryEntries[Q];if(me.tryLoc<=this.prev&&l.call(me,"finallyLoc")&&this.prev<me.finallyLoc){var w=me;break}}w&&(O==="break"||O==="continue")&&w.tryLoc<=F&&F<=w.finallyLoc&&(w=null);var Y=w?w.completion:{};return Y.type=O,Y.arg=F,w?(this.method="next",this.next=w.finallyLoc,D):this.complete(Y)},complete:function(O,F){if(O.type==="throw")throw O.arg;return O.type==="break"||O.type==="continue"?this.next=O.arg:O.type==="return"?(this.rval=this.arg=O.arg,this.method="return",this.next="end"):O.type==="normal"&&F&&(this.next=F),D},finish:function(O){for(var F=this.tryEntries.length-1;F>=0;--F){var Q=this.tryEntries[F];if(Q.finallyLoc===O)return this.complete(Q.completion,Q.afterLoc),Re(Q),D}},catch:function(O){for(var F=this.tryEntries.length-1;F>=0;--F){var Q=this.tryEntries[F];if(Q.tryLoc===O){var me=Q.completion;if(me.type==="throw"){var w=me.arg;Re(Q)}return w}}throw new Error("illegal catch attempt")},delegateYield:function(O,F,Q){return this.delegate={iterator:ue(O),resultName:F,nextLoc:Q},this.method==="next"&&(this.arg=u),D}},n}(i.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(Ts);var Ri=(i,e)=>`${i}-${e}-${Math.random().toString(16).slice(3,8)}`;const Cs=Ri;let io=0;var Jo=({id:i,action:e,payload:n={}})=>{let r=i;return typeof r>"u"&&(r=Cs("Job",io),io+=1),{id:r,action:e,payload:n}},Zn={};let Ni=!1;Zn.logging=Ni;Zn.setLogging=i=>{Ni=i};Zn.log=(...i)=>Ni?console.log.apply(void 0,i):null;const As=Jo,{log:Lr}=Zn,Os=Ri;let ao=0;var Ps=()=>{const i=Os("Scheduler",ao),e={},n={};let r=[];ao+=1;const l=()=>r.length,c=()=>Object.keys(e).length,u=()=>{if(r.length!==0){const k=Object.keys(e);for(let N=0;N<k.length;N+=1)if(typeof n[k[N]]>"u"){r[0](e[k[N]]);break}}},m=(k,N)=>new Promise((q,X)=>{const W=As({action:k,payload:N});r.push(async x=>{r.shift(),n[x.id]=W;try{q(await x[k].apply(void 0,[...N,W.id]))}catch(S){X(S)}finally{delete n[x.id],u()}}),Lr(`[${i}]: Add ${W.id} to JobQueue`),Lr(`[${i}]: JobQueue length=${r.length}`),u()});return{addWorker:k=>(e[k.id]=k,Lr(`[${i}]: Add ${k.id}`),Lr(`[${i}]: Number of workers=${c()}`),u(),k.id),addJob:async(k,...N)=>{if(c()===0)throw Error(`[${i}]: You need to have at least one worker before adding jobs`);return m(k,N)},terminate:async()=>{Object.keys(e).forEach(async k=>{await e[k].terminate()}),r=[]},getQueueLen:l,getNumWorkers:c}};function Is(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}function Ls(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var Ms=Ls;const Rs=Ms;var Ns=i=>{const e={};return typeof WorkerGlobalScope<"u"?e.type="webworker":Rs()?e.type="electron":typeof document=="object"?e.type="browser":typeof process=="object"&&typeof Is=="function"&&(e.type="node"),typeof i>"u"?e:e[i]};const Bs=Ns("type")==="browser",Ks=Bs?i=>new URL(i,window.location.href).href:i=>i;var Fs=i=>{const e={...i};return["corePath","workerPath","langPath"].forEach(n=>{i[n]&&(e[n]=Ks(e[n]))}),e},js=i=>{const e=[],n=[],r=[],l=[],c=[];return i.blocks&&i.blocks.forEach(u=>{u.paragraphs.forEach(m=>{m.lines.forEach(y=>{y.words.forEach(g=>{g.symbols.forEach(v=>{c.push({...v,page:i,block:u,paragraph:m,line:y,word:g})}),l.push({...g,page:i,block:u,paragraph:m,line:y})}),r.push({...y,page:i,block:u,paragraph:m})}),n.push({...m,page:i,block:u})}),e.push({...u,page:i})}),{...i,blocks:e,paragraphs:n,lines:r,words:l,symbols:c}},Qo={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3};const Vs="tesseract.js",Us="5.1.0",qs="Pure Javascript Multilingual OCR",xs="src/index.js",zs="src/index.d.ts",Hs="dist/tesseract.min.js",Ws="dist/tesseract.min.js",Gs={start:"node scripts/server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js && rollup -c scripts/rollup.esm.mjs","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json",prepublishOnly:"npm run build",wait:"rimraf dist && wait-on http://localhost:3000/dist/tesseract.min.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:* test:node:all","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser-tpl":"mocha-headless-chrome -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:detect":"npm run test:browser-tpl -- -f ./tests/detect.test.html","test:browser:recognize":"npm run test:browser-tpl -- -f ./tests/recognize.test.html","test:browser:scheduler":"npm run test:browser-tpl -- -f ./tests/scheduler.test.html","test:browser:FS":"npm run test:browser-tpl -- -f ./tests/FS.test.html",lint:"eslint src","lint:fix":"eslint --fix src",postinstall:"opencollective-postinstall || true"},Ys={"./src/worker/node/index.js":"./src/worker/browser/index.js"},Zs="",Js=["jeromewu"],Qs="Apache-2.0",$s={"@babel/core":"^7.21.4","@babel/eslint-parser":"^7.21.3","@babel/preset-env":"^7.21.4","@rollup/plugin-commonjs":"^24.1.0",acorn:"^8.8.2","babel-loader":"^9.1.2",buffer:"^6.0.3",cors:"^2.8.5",eslint:"^7.32.0","eslint-config-airbnb-base":"^14.2.1","eslint-plugin-import":"^2.27.5","expect.js":"^0.3.1",express:"^4.18.2",mocha:"^10.2.0","mocha-headless-chrome":"^4.0.0","npm-run-all":"^4.1.5",nyc:"^15.1.0",rimraf:"^5.0.0",rollup:"^3.20.7","wait-on":"^7.0.1",webpack:"^5.79.0","webpack-bundle-analyzer":"^4.8.0","webpack-cli":"^5.0.1","webpack-dev-middleware":"^6.0.2","rollup-plugin-sourcemaps":"^0.6.3"},Xs={"bmp-js":"^0.1.0","idb-keyval":"^6.2.0","is-electron":"^2.2.2","is-url":"^1.2.4","node-fetch":"^2.6.9","opencollective-postinstall":"^2.0.3","regenerator-runtime":"^0.13.3","tesseract.js-core":"^5.1.0","wasm-feature-detect":"^1.2.11",zlibjs:"^0.3.1"},eu={"@rollup/pluginutils":"^5.0.2"},tu={type:"git",url:"https://github.com/naptha/tesseract.js.git"},nu={url:"https://github.com/naptha/tesseract.js/issues"},ru="https://github.com/naptha/tesseract.js",iu={type:"opencollective",url:"https://opencollective.com/tesseractjs"},au={name:Vs,version:Us,description:qs,main:xs,types:zs,unpkg:Hs,jsdelivr:Ws,scripts:Gs,browser:Ys,author:Zs,contributors:Js,license:Qs,devDependencies:$s,dependencies:Xs,overrides:eu,repository:tu,bugs:nu,homepage:ru,collective:iu};var ou={workerBlobURL:!0,logger:()=>{}};const lu=au.version,su=ou;var uu={...su,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${lu}/dist/worker.min.js`},cu=({workerPath:i,workerBlobURL:e})=>{let n;if(Blob&&URL&&e){const r=new Blob([`importScripts("${i}");`],{type:"application/javascript"});n=new Worker(URL.createObjectURL(r))}else n=new Worker(i);return n},fu=i=>{i.terminate()},du=(i,e)=>{i.onmessage=({data:n})=>{e(n)}},hu=async(i,e)=>{i.postMessage(e)};const Ti=i=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{e(r.result)},r.onerror=({target:{error:{code:l}}})=>{n(Error(`File could not be read! Code=${l}`))},r.readAsArrayBuffer(i)}),Li=async i=>{let e=i;if(typeof i>"u")return"undefined";if(typeof i=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(i)?e=atob(i.split(",")[1]).split("").map(n=>n.charCodeAt(0)):e=await(await fetch(i)).arrayBuffer();else if(typeof HTMLElement<"u"&&i instanceof HTMLElement)i.tagName==="IMG"&&(e=await Li(i.src)),i.tagName==="VIDEO"&&(e=await Li(i.poster)),i.tagName==="CANVAS"&&await new Promise(n=>{i.toBlob(async r=>{e=await Ti(r),n()})});else if(typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas){const n=await i.convertToBlob();e=await Ti(n)}else(i instanceof File||i instanceof Blob)&&(e=await Ti(i));return new Uint8Array(e)};var pu=Li;const mu=uu,gu=cu,vu=fu,_u=du,yu=hu,bu=pu;var wu={defaultOptions:mu,spawnWorker:gu,terminateWorker:vu,onMessage:_u,send:yu,loadImage:bu};const ku=Fs,Eu=js,mn=Jo,{log:oo}=Zn,Du=Ri,jn=Qo,{defaultOptions:Su,spawnWorker:Tu,terminateWorker:Cu,onMessage:Au,loadImage:lo,send:Ou}=wu;let so=0;var $o=async(i="eng",e=jn.LSTM_ONLY,n={},r={})=>{const l=Du("Worker",so),{logger:c,errorHandler:u,...m}=ku({...Su,...n}),y={},g={},v=typeof i=="string"?i.split("+"):i;let k=e,N=r;const q=[jn.DEFAULT,jn.LSTM_ONLY].includes(e)&&!m.legacyCore;let X,W;const x=new Promise((w,Y)=>{W=w,X=Y}),S=w=>{X(w.message)};let D=Tu(m);D.onerror=S,so+=1;const se=(w,Y)=>{y[w]=Y},I=(w,Y)=>{g[w]=Y},ne=({id:w,action:Y,payload:Ce})=>new Promise((he,qe)=>{oo(`[${l}]: Start ${w}, action=${Y}`);const Ie=`${Y}-${w}`;se(Ie,he),I(Ie,qe),Ou(D,{workerId:l,jobId:w,action:Y,payload:Ce})}),te=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),ee=w=>ne(mn({id:w,action:"load",payload:{options:{lstmOnly:q,corePath:m.corePath,logging:m.logging}}})),ie=(w,Y,Ce)=>ne(mn({id:Ce,action:"FS",payload:{method:"writeFile",args:[w,Y]}})),ge=(w,Y)=>ne(mn({id:Y,action:"FS",payload:{method:"readFile",args:[w,{encoding:"utf8"}]}})),ke=(w,Y)=>ne(mn({id:Y,action:"FS",payload:{method:"unlink",args:[w]}})),Oe=(w,Y,Ce)=>ne(mn({id:Ce,action:"FS",payload:{method:w,args:Y}})),be=()=>console.warn("`loadLanguage` is depreciated and should be removed from code (workers now come with language pre-loaded)"),le=(w,Y)=>ne(mn({id:Y,action:"loadLanguage",payload:{langs:w,options:{langPath:m.langPath,dataPath:m.dataPath,cachePath:m.cachePath,cacheMethod:m.cacheMethod,gzip:m.gzip,lstmOnly:[jn.LSTM_ONLY,jn.TESSERACT_LSTM_COMBINED].includes(k)&&!m.legacyLang}}})),_e=()=>console.warn("`initialize` is depreciated and should be removed from code (workers now come pre-initialized)"),Re=(w,Y,Ce,he)=>ne(mn({id:he,action:"initialize",payload:{langs:w,oem:Y,config:Ce}})),Le=(w="eng",Y,Ce,he)=>{if(q&&[jn.TESSERACT_ONLY,jn.TESSERACT_LSTM_COMBINED].includes(Y))throw Error("Legacy model requested but code missing.");const qe=Y||k;k=qe;const Ie=Ce||N;N=Ie;const G=(typeof w=="string"?w.split("+"):w).filter(ce=>!v.includes(ce));return v.push(...G),G.length>0?le(G,he).then(()=>Re(w,qe,Ie,he)):Re(w,qe,Ie,he)},ue=(w={},Y)=>ne(mn({id:Y,action:"setParameters",payload:{params:w}})),Te=async(w,Y={},Ce={blocks:!0,text:!0,hocr:!0,tsv:!0},he)=>ne(mn({id:he,action:"recognize",payload:{image:await lo(w),options:Y,output:Ce}})),O=(w="Tesseract OCR Result",Y=!1,Ce)=>(console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),ne(mn({id:Ce,action:"getPDF",payload:{title:w,textonly:Y}}))),F=async(w,Y)=>{if(q)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return ne(mn({id:Y,action:"detect",payload:{image:await lo(w)}}))},Q=async()=>(D!==null&&(Cu(D),D=null),Promise.resolve());Au(D,({workerId:w,jobId:Y,status:Ce,action:he,data:qe})=>{const Ie=`${he}-${Y}`;if(Ce==="resolve"){oo(`[${w}]: Complete ${Y}`);let ye=qe;he==="recognize"?ye=Eu(qe):he==="getPDF"&&(ye=Array.from({...qe,length:Object.keys(qe).length})),y[Ie]({jobId:Y,data:ye})}else if(Ce==="reject")if(g[Ie](qe),he==="load"&&X(qe),u)u(qe);else throw Error(qe);else Ce==="progress"&&c({...qe,userJobId:Y})});const me={id:l,worker:D,setResolve:se,setReject:I,load:te,writeText:ie,readText:ge,removeFile:ke,FS:Oe,loadLanguage:be,initialize:_e,reinitialize:Le,setParameters:ue,recognize:Te,getPDF:O,detect:F,terminate:Q};return ee().then(()=>le(i)).then(()=>Re(i,e,r)).then(()=>W(me)).catch(()=>{}),x};const Xo=$o,Pu=async(i,e,n)=>{const r=await Xo(e,1,n);return r.recognize(i).finally(async()=>{await r.terminate()})},Iu=async(i,e)=>{const n=await Xo("osd",0,e);return n.detect(i).finally(async()=>{await n.terminate()})};var Lu={recognize:Pu,detect:Iu},Mu={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"},Ru={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"};const Nu=Ps,Bu=$o,Ku=Lu,Fu=Mu,ju=Qo,Vu=Ru,{setLogging:Uu}=Zn;var qu={languages:Fu,OEM:ju,PSM:Vu,createScheduler:Nu,createWorker:Bu,setLogging:Uu,...Ku};const el=Ho(qu);function uo(i,e,n){const r=i.slice();return r[21]=e[n],r}function co(i,e,n){const r=i.slice();return r[24]=e[n],r}function fo(i,e,n){const r=i.slice();return r[27]=e[n],r}function ho(i,e,n){const r=i.slice();return r[30]=e[n],r}function po(i){let e,n,r=i[0].name+"",l,c,u,m,y,g,v,k,N,q='<img id="imgChosen" class="img-fluid" alt="Your chosen receipt"/>',X,W,x,S,D="Receipt description",se,I,ne,te,ee,ie,ge,ke="Receipt Date",Oe,be,le,_e,Re,Le,ue="Receipt value:",Te,O,F,Q,me,w,Y,Ce="Receipt Type",he,qe,Ie,ye="--Please choose type--",G,ce,Ee,xe="Receipt Currency",We,L,Se,we,fe="Add Receipt",He,it,_t="<h4>Scanning image...</h4> <progress>Scanning image...</progress>",yt,ct,pt,At,lt,bt,Je,Xt;function vn(de,$){return de[8]?zu:xu}let Qt=vn(i),Rt=Qt(i),It=Ze(i[1]),st=[];for(let de=0;de<It.length;de+=1)st[de]=mo(ho(i,It,de));function Fe(de){i[14](de)}let _n={format:"yyyy-MM-dd",closeOnSelection:!0,id:"rDate"};i[3]!==void 0&&(_n.value=i[3]),be=new Yn({props:_n}),nn.push(()=>Ln(be,"value",Fe));let jt=Ze(i[2]),ht=[];for(let de=0;de<jt.length;de+=1)ht[de]=go(fo(i,jt,de));let De=Ze(Object.values(dr)),mt=[];for(let de=0;de<De.length;de+=1)mt[de]=vo(co(i,De,de));let wt=Ze(Object.keys(St)),gt=[];for(let de=0;de<wt.length;de+=1)gt[de]=_o(uo(i,wt,de));return{c(){e=T("h1"),n=Ne('Add Receipt to "'),l=Ne(r),c=Ne('"'),u=ae(),Rt.c(),m=ae(),y=T("div"),g=T("input"),v=ae(),k=T("div"),N=T("div"),N.innerHTML=q,X=ae(),W=T("div"),x=T("div"),S=T("label"),S.textContent=D,se=ae(),I=T("input"),ne=ae(),te=T("datalist");for(let de=0;de<st.length;de+=1)st[de].c();ee=ae(),ie=T("div"),ge=T("label"),ge.textContent=ke,Oe=ae(),Vt(be.$$.fragment),_e=ae(),Re=T("div"),Le=T("label"),Le.textContent=ue,Te=ae(),O=T("input"),F=ae(),Q=T("datalist");for(let de=0;de<ht.length;de+=1)ht[de].c();me=ae(),w=T("div"),Y=T("label"),Y.textContent=Ce,he=ae(),qe=T("select"),Ie=T("option"),Ie.textContent=ye;for(let de=0;de<mt.length;de+=1)mt[de].c();G=ae(),ce=T("div"),Ee=T("label"),Ee.textContent=xe,We=ae(),L=T("select");for(let de=0;de<gt.length;de+=1)gt[de].c();Se=ae(),we=T("button"),we.textContent=fe,He=ae(),it=T("div"),it.innerHTML=_t,yt=ae(),ct=T("div"),pt=T("a"),At=Ne("Cancel"),this.h()},l(de){e=C(de,"H1",{});var $=z(e);n=Be($,'Add Receipt to "'),l=Be($,r),c=Be($,'"'),$.forEach(b),u=oe(de),Rt.l(de),m=oe(de),y=C(de,"DIV",{class:!0});var ze=z(y);g=C(ze,"INPUT",{id:!0,type:!0,accept:!0}),ze.forEach(b),v=oe(de),k=C(de,"DIV",{id:!0});var Me=z(k);N=C(Me,"DIV",{class:!0,"data-svelte-h":!0}),Ge(N)!=="svelte-lr06dx"&&(N.innerHTML=q),X=oe(Me),W=C(Me,"DIV",{class:!0});var Pe=z(W);x=C(Pe,"DIV",{class:!0});var vt=z(x);S=C(vt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ge(S)!=="svelte-1glg0dd"&&(S.textContent=D),se=oe(vt),I=C(vt,"INPUT",{class:!0,list:!0,id:!0,name:!0,placeholder:!0}),ne=oe(vt),te=C(vt,"DATALIST",{id:!0});var Nt=z(te);for(let kt=0;kt<st.length;kt+=1)st[kt].l(Nt);Nt.forEach(b),vt.forEach(b),ee=oe(Pe),ie=C(Pe,"DIV",{class:!0});var zt=z(ie);ge=C(zt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ge(ge)!=="svelte-cn0bms"&&(ge.textContent=ke),Oe=oe(zt),Ut(be.$$.fragment,zt),zt.forEach(b),_e=oe(Pe),Re=C(Pe,"DIV",{class:!0});var at=z(Re);Le=C(at,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ge(Le)!=="svelte-1y6fy9c"&&(Le.textContent=ue),Te=oe(at),O=C(at,"INPUT",{class:!0,list:!0,id:!0,name:!0,type:!0,step:!0,placeholder:!0}),F=oe(at),Q=C(at,"DATALIST",{id:!0});var Et=z(Q);for(let kt=0;kt<ht.length;kt+=1)ht[kt].l(Et);Et.forEach(b),at.forEach(b),me=oe(Pe),w=C(Pe,"DIV",{class:!0});var an=z(w);Y=C(an,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ge(Y)!=="svelte-1vxf1l8"&&(Y.textContent=Ce),he=oe(an),qe=C(an,"SELECT",{id:!0,class:!0});var fn=z(qe);Ie=C(fn,"OPTION",{"data-svelte-h":!0}),Ge(Ie)!=="svelte-ua8958"&&(Ie.textContent=ye);for(let kt=0;kt<mt.length;kt+=1)mt[kt].l(fn);fn.forEach(b),an.forEach(b),G=oe(Pe),ce=C(Pe,"DIV",{class:!0});var en=z(ce);Ee=C(en,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ge(Ee)!=="svelte-15s44q2"&&(Ee.textContent=xe),We=oe(en),L=C(en,"SELECT",{id:!0,class:!0});var dn=z(L);for(let kt=0;kt<gt.length;kt+=1)gt[kt].l(dn);dn.forEach(b),en.forEach(b),Se=oe(Pe),we=C(Pe,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Ge(we)!=="svelte-1059pct"&&(we.textContent=fe),Pe.forEach(b),Me.forEach(b),He=oe(de),it=C(de,"DIV",{class:!0,"data-svelte-h":!0}),Ge(it)!=="svelte-z0xj81"&&(it.innerHTML=_t),yt=oe(de),ct=C(de,"DIV",{class:!0});var En=z(ct);pt=C(En,"A",{href:!0,class:!0});var tn=z(pt);At=Be(tn,"Cancel"),tn.forEach(b),En.forEach(b),this.h()},h(){p(g,"id","imageInput"),p(g,"type","file"),p(g,"accept","image/*;capture=camera"),p(y,"class","mb-3"),p(N,"class","img-scan d-flex col-md-6 col-sm-12"),p(S,"for","rDesc"),p(S,"class","form-label"),p(I,"class","form-control"),p(I,"list","descOptions"),p(I,"id","rDesc"),p(I,"name","rDesc"),p(I,"placeholder","Double-click for suggestions"),p(te,"id","descOptions"),p(x,"class","mb-3"),p(ge,"for","rDate"),p(ge,"class","form-label"),p(ie,"class","mb-3"),p(Le,"for","rVal"),p(Le,"class","form-label"),p(O,"class","form-control"),p(O,"list","valOptions"),p(O,"id","rVal"),p(O,"name","rVal"),p(O,"type","number"),p(O,"step","0.01"),p(O,"placeholder","Double-click for suggestions"),p(Q,"id","valOptions"),p(Re,"class","mb-3"),p(Y,"for","rType"),p(Y,"class","form-label"),Ie.selected=!0,Ie.__value="--Please choose type--",ot(Ie,Ie.__value),p(qe,"id","rType"),p(qe,"class","form-control"),i[7]===void 0&&Vn(()=>i[16].call(qe)),p(w,"class","mb-3"),p(Ee,"for","rCurrency"),p(Ee,"class","form-label"),p(L,"id","rCurrency"),p(L,"class","form-control"),i[4]===void 0&&Vn(()=>i[17].call(L)),p(ce,"class","mb-3"),p(we,"type","button"),p(we,"class","btn btn-primary"),p(W,"class","d-flex flex-column col-md-6 col-sm-12"),p(k,"id","receiptEntry"),Ct(k,"show",i[9]),p(it,"class","flex-column hide"),Ct(it,"show",!i[9]&&i[8]),p(pt,"href",lt="#/trip/"+i[0].id),p(pt,"class","btn btn-outline-primary"),p(ct,"class","mt-3 d-grid d-md-block")},m(de,$){pe(de,e,$),h(e,n),h(e,l),h(e,c),pe(de,u,$),Rt.m(de,$),pe(de,m,$),pe(de,y,$),h(y,g),pe(de,v,$),pe(de,k,$),h(k,N),h(k,X),h(k,W),h(W,x),h(x,S),h(x,se),h(x,I),ot(I,i[5]),h(x,ne),h(x,te);for(let ze=0;ze<st.length;ze+=1)st[ze]&&st[ze].m(te,null);h(W,ee),h(W,ie),h(ie,ge),h(ie,Oe),qt(be,ie,null),h(W,_e),h(W,Re),h(Re,Le),h(Re,Te),h(Re,O),ot(O,i[6]),h(Re,F),h(Re,Q);for(let ze=0;ze<ht.length;ze+=1)ht[ze]&&ht[ze].m(Q,null);h(W,me),h(W,w),h(w,Y),h(w,he),h(w,qe),h(qe,Ie);for(let ze=0;ze<mt.length;ze+=1)mt[ze]&&mt[ze].m(qe,null);Jt(qe,i[7],!0),h(W,G),h(W,ce),h(ce,Ee),h(ce,We),h(ce,L);for(let ze=0;ze<gt.length;ze+=1)gt[ze]&&gt[ze].m(L,null);Jt(L,i[4],!0),h(W,Se),h(W,we),pe(de,He,$),pe(de,it,$),pe(de,yt,$),pe(de,ct,$),h(ct,pt),h(pt,At),bt=!0,Je||(Xt=[Ye(g,"change",i[11]),Ye(I,"input",i[13]),Ye(O,"input",i[15]),Ye(qe,"change",i[16]),Ye(L,"change",i[17]),Ye(we,"click",i[10])],Je=!0)},p(de,$){if((!bt||$[0]&1)&&r!==(r=de[0].name+"")&&Xe(l,r),Qt!==(Qt=vn(de))&&(Rt.d(1),Rt=Qt(de),Rt&&(Rt.c(),Rt.m(m.parentNode,m))),$[0]&32&&I.value!==de[5]&&ot(I,de[5]),$[0]&2){It=Ze(de[1]);let Me;for(Me=0;Me<It.length;Me+=1){const Pe=ho(de,It,Me);st[Me]?st[Me].p(Pe,$):(st[Me]=mo(Pe),st[Me].c(),st[Me].m(te,null))}for(;Me<st.length;Me+=1)st[Me].d(1);st.length=It.length}const ze={};if(!le&&$[0]&8&&(le=!0,ze.value=de[3],In(()=>le=!1)),be.$set(ze),$[0]&64&&zr(O.value)!==de[6]&&ot(O,de[6]),$[0]&4){jt=Ze(de[2]);let Me;for(Me=0;Me<jt.length;Me+=1){const Pe=fo(de,jt,Me);ht[Me]?ht[Me].p(Pe,$):(ht[Me]=go(Pe),ht[Me].c(),ht[Me].m(Q,null))}for(;Me<ht.length;Me+=1)ht[Me].d(1);ht.length=jt.length}if($&0){De=Ze(Object.values(dr));let Me;for(Me=0;Me<De.length;Me+=1){const Pe=co(de,De,Me);mt[Me]?mt[Me].p(Pe,$):(mt[Me]=vo(Pe),mt[Me].c(),mt[Me].m(qe,null))}for(;Me<mt.length;Me+=1)mt[Me].d(1);mt.length=De.length}if($[0]&128&&Jt(qe,de[7]),$&0){wt=Ze(Object.keys(St));let Me;for(Me=0;Me<wt.length;Me+=1){const Pe=uo(de,wt,Me);gt[Me]?gt[Me].p(Pe,$):(gt[Me]=_o(Pe),gt[Me].c(),gt[Me].m(L,null))}for(;Me<gt.length;Me+=1)gt[Me].d(1);gt.length=wt.length}$[0]&16&&Jt(L,de[4]),(!bt||$[0]&512)&&Ct(k,"show",de[9]),(!bt||$[0]&768)&&Ct(it,"show",!de[9]&&de[8]),(!bt||$[0]&1&&lt!==(lt="#/trip/"+de[0].id))&&p(pt,"href",lt)},i(de){bt||(rt(be.$$.fragment,de),bt=!0)},o(de){ut(be.$$.fragment,de),bt=!1},d(de){de&&(b(e),b(u),b(m),b(y),b(v),b(k),b(He),b(it),b(yt),b(ct)),Rt.d(de),Mt(st,de),xt(be),Mt(ht,de),Mt(mt,de),Mt(gt,de),Je=!1,kn(Xt)}}}function xu(i){let e,n="Choose image to begin";return{c(){e=T("p"),e.textContent=n},l(r){e=C(r,"P",{"data-svelte-h":!0}),Ge(e)!=="svelte-1rdbglw"&&(e.textContent=n)},m(r,l){pe(r,e,l)},d(r){r&&b(e)}}}function zu(i){let e,n="Click 'Browse' to start again";return{c(){e=T("p"),e.textContent=n},l(r){e=C(r,"P",{"data-svelte-h":!0}),Ge(e)!=="svelte-1raiglx"&&(e.textContent=n)},m(r,l){pe(r,e,l)},d(r){r&&b(e)}}}function mo(i){let e,n;return{c(){e=T("option"),this.h()},l(r){e=C(r,"OPTION",{}),z(e).forEach(b),this.h()},h(){e.__value=n=i[30],ot(e,e.__value)},m(r,l){pe(r,e,l)},p(r,l){l[0]&2&&n!==(n=r[30])&&(e.__value=n,ot(e,e.__value))},d(r){r&&b(e)}}}function go(i){let e,n=i[27]+"",r,l;return{c(){e=T("option"),r=Ne(n),this.h()},l(c){e=C(c,"OPTION",{});var u=z(e);r=Be(u,n),u.forEach(b),this.h()},h(){e.__value=l=i[27],ot(e,e.__value)},m(c,u){pe(c,e,u),h(e,r)},p(c,u){u[0]&4&&n!==(n=c[27]+"")&&Xe(r,n),u[0]&4&&l!==(l=c[27])&&(e.__value=l,ot(e,e.__value))},d(c){c&&b(e)}}}function vo(i){let e,n=i[24]+"",r;return{c(){e=T("option"),r=Ne(n),this.h()},l(l){e=C(l,"OPTION",{});var c=z(e);r=Be(c,n),c.forEach(b),this.h()},h(){e.__value=i[24],ot(e,e.__value)},m(l,c){pe(l,e,c),h(e,r)},p:Dt,d(l){l&&b(e)}}}function _o(i){let e,n=i[21]+"",r,l,c=St[i[21]].symbol+"",u,m;return{c(){e=T("option"),r=Ne(n),l=Ne(" ("),u=Ne(c),m=Ne(`)
                `),this.h()},l(y){e=C(y,"OPTION",{});var g=z(e);r=Be(g,n),l=Be(g," ("),u=Be(g,c),m=Be(g,`)
                `),g.forEach(b),this.h()},h(){e.__value=i[21],ot(e,e.__value)},m(y,g){pe(y,e,g),h(e,r),h(e,l),h(e,u),h(e,m)},p:Dt,d(y){y&&b(e)}}}function Hu(i){let e,n,r=i[0]&&po(i);return{c(){e=T("div"),r&&r.c(),this.h()},l(l){e=C(l,"DIV",{class:!0});var c=z(e);r&&r.l(c),c.forEach(b),this.h()},h(){p(e,"class","w-100")},m(l,c){pe(l,e,c),r&&r.m(e,null),n=!0},p(l,c){l[0]?r?(r.p(l,c),c[0]&1&&rt(r,1)):(r=po(l),r.c(),rt(r,1),r.m(e,null)):r&&(Un(),ut(r,1,1,()=>{r=null}),qn())},i(l){n||(rt(r),n=!0)},o(l){ut(r),n=!1},d(l){l&&b(e),r&&r.d()}}}function Wu(i,e,n){let{tripId:r}=e,l,c=[],u=[],m=new Date,y,g,v,k,N,q,X,W=!1;r>-1&&Bt.trips.get(r).then(ie=>{n(0,l=ie),n(4,y=l.defaultCurrency)});async function x(){let ie=document.getElementById("imgChosen");X=ie.naturalWidth,q=ie.naturalHeight,await Bt.receipts.add({description:g,currency:y,receiptDate:m,receiptDateString:m.toDateString(),receiptType:k,total:v,tripId:r,imageData:N,imageHeight:q,imageWidth:X}),window.location.href="#/trip/"+r}async function S(ie){var ge=await el.recognize(ie,"eng");return ge.data.lines}async function D(ie){n(1,c=[]),n(2,u=[]),n(9,W=!1);var ge=ie.target.files[0];n(8,N=ge);var ke=URL.createObjectURL(ge);const Oe=document.getElementById("imgChosen");Oe.src=ke;var be=await S(ke);for(let le of be){if(le.confidence<40)continue;c.push(le.text);let _e=gn(le.text);_e.value>0&&u.push(_e.format({symbol:"",separator:""}))}n(1,c),n(2,u=u.reverse()),n(9,W=!0)}function se(){g=this.value,n(5,g)}function I(ie){m=ie,n(3,m)}function ne(){v=zr(this.value),n(6,v)}function te(){k=Gn(this),n(7,k)}function ee(){y=Gn(this),n(4,y)}return i.$$set=ie=>{"tripId"in ie&&n(12,r=ie.tripId)},[l,c,u,m,y,g,v,k,N,W,x,D,r,se,I,ne,te,ee]}class Gu extends ln{constructor(e){super(),sn(this,e,Wu,Hu,rn,{tripId:12},null,[-1,-1])}}function yo(i,e,n){const r=i.slice();return r[21]=e[n],r}function bo(i,e,n){const r=i.slice();return r[24]=e[n],r}function wo(i,e,n){const r=i.slice();return r[27]=e[n],r}function ko(i,e,n){const r=i.slice();return r[30]=e[n],r}function Eo(i){let e,n,r=i[0].description+"",l,c,u,m,y,g,v,k,N,q,X,W,x,S,D,se="Receipt description",I,ne,te,ee,ie,ge,ke,Oe="Receipt Date",be,le,_e,Re,Le,ue,Te="Receipt value:",O,F,Q,me,w,Y,Ce,he="Receipt Type",qe,Ie,ye,G="--Please choose type--",ce,Ee,xe,We="Receipt Currency",L,Se,we,fe,He,it="Update Receipt",_t,yt,ct,pt,At,lt,bt="<h4>Scanning image...</h4> <progress>Scanning image...</progress>",Je,Xt,vn;function Qt($,ze){return $[8]?Zu:Yu}let Rt=Qt(i),It=Rt(i),st=Ze(i[1]),Fe=[];for(let $=0;$<st.length;$+=1)Fe[$]=Do(ko(i,st,$));function _n($){i[14]($)}let jt={format:"yyyy-MM-dd",closeOnSelection:!0,id:"rDate"};i[3]!==void 0&&(jt.value=i[3]),le=new Yn({props:jt}),nn.push(()=>Ln(le,"value",_n));let ht=Ze(i[2]),De=[];for(let $=0;$<ht.length;$+=1)De[$]=So(wo(i,ht,$));let mt=Ze(Object.values(dr)),wt=[];for(let $=0;$<mt.length;$+=1)wt[$]=To(bo(i,mt,$));let gt=Ze(Object.keys(St)),de=[];for(let $=0;$<gt.length;$+=1)de[$]=Co(yo(i,gt,$));return{c(){e=T("h1"),n=Ne('Update Receipt for "'),l=Ne(r),c=Ne('"'),u=ae(),It.c(),m=ae(),y=T("div"),g=T("input"),v=ae(),k=T("div"),N=T("div"),q=T("img"),W=ae(),x=T("div"),S=T("div"),D=T("label"),D.textContent=se,I=ae(),ne=T("input"),te=ae(),ee=T("datalist");for(let $=0;$<Fe.length;$+=1)Fe[$].c();ie=ae(),ge=T("div"),ke=T("label"),ke.textContent=Oe,be=ae(),Vt(le.$$.fragment),Re=ae(),Le=T("div"),ue=T("label"),ue.textContent=Te,O=ae(),F=T("input"),Q=ae(),me=T("datalist");for(let $=0;$<De.length;$+=1)De[$].c();w=ae(),Y=T("div"),Ce=T("label"),Ce.textContent=he,qe=ae(),Ie=T("select"),ye=T("option"),ye.textContent=G;for(let $=0;$<wt.length;$+=1)wt[$].c();ce=ae(),Ee=T("div"),xe=T("label"),xe.textContent=We,L=ae(),Se=T("select");for(let $=0;$<de.length;$+=1)de[$].c();we=ae(),fe=T("div"),He=T("button"),He.textContent=it,_t=ae(),yt=T("a"),ct=Ne("Cancel"),At=ae(),lt=T("div"),lt.innerHTML=bt,this.h()},l($){e=C($,"H1",{});var ze=z(e);n=Be(ze,'Update Receipt for "'),l=Be(ze,r),c=Be(ze,'"'),ze.forEach(b),u=oe($),It.l($),m=oe($),y=C($,"DIV",{class:!0});var Me=z(y);g=C(Me,"INPUT",{id:!0,type:!0,accept:!0}),Me.forEach(b),v=oe($),k=C($,"DIV",{id:!0});var Pe=z(k);N=C(Pe,"DIV",{class:!0});var vt=z(N);q=C(vt,"IMG",{id:!0,class:!0,src:!0,alt:!0}),vt.forEach(b),W=oe(Pe),x=C(Pe,"DIV",{class:!0});var Nt=z(x);S=C(Nt,"DIV",{class:!0});var zt=z(S);D=C(zt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ge(D)!=="svelte-1glg0dd"&&(D.textContent=se),I=oe(zt),ne=C(zt,"INPUT",{class:!0,list:!0,id:!0,name:!0,placeholder:!0}),te=oe(zt),ee=C(zt,"DATALIST",{id:!0});var at=z(ee);for(let Lt=0;Lt<Fe.length;Lt+=1)Fe[Lt].l(at);at.forEach(b),zt.forEach(b),ie=oe(Nt),ge=C(Nt,"DIV",{class:!0});var Et=z(ge);ke=C(Et,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ge(ke)!=="svelte-cn0bms"&&(ke.textContent=Oe),be=oe(Et),Ut(le.$$.fragment,Et),Et.forEach(b),Re=oe(Nt),Le=C(Nt,"DIV",{class:!0});var an=z(Le);ue=C(an,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ge(ue)!=="svelte-1y6fy9c"&&(ue.textContent=Te),O=oe(an),F=C(an,"INPUT",{class:!0,list:!0,id:!0,name:!0,type:!0,step:!0,placeholder:!0}),Q=oe(an),me=C(an,"DATALIST",{id:!0});var fn=z(me);for(let Lt=0;Lt<De.length;Lt+=1)De[Lt].l(fn);fn.forEach(b),an.forEach(b),w=oe(Nt),Y=C(Nt,"DIV",{class:!0});var en=z(Y);Ce=C(en,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ge(Ce)!=="svelte-1vxf1l8"&&(Ce.textContent=he),qe=oe(en),Ie=C(en,"SELECT",{id:!0,class:!0});var dn=z(Ie);ye=C(dn,"OPTION",{"data-svelte-h":!0}),Ge(ye)!=="svelte-10m9j2x"&&(ye.textContent=G);for(let Lt=0;Lt<wt.length;Lt+=1)wt[Lt].l(dn);dn.forEach(b),en.forEach(b),ce=oe(Nt),Ee=C(Nt,"DIV",{class:!0});var En=z(Ee);xe=C(En,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ge(xe)!=="svelte-15s44q2"&&(xe.textContent=We),L=oe(En),Se=C(En,"SELECT",{id:!0,class:!0});var tn=z(Se);for(let Lt=0;Lt<de.length;Lt+=1)de[Lt].l(tn);tn.forEach(b),En.forEach(b),we=oe(Nt),fe=C(Nt,"DIV",{class:!0});var kt=z(fe);He=C(kt,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Ge(He)!=="svelte-jbq1gp"&&(He.textContent=it),_t=oe(kt),yt=C(kt,"A",{href:!0,class:!0});var hn=z(yt);ct=Be(hn,"Cancel"),hn.forEach(b),kt.forEach(b),Nt.forEach(b),Pe.forEach(b),At=oe($),lt=C($,"DIV",{class:!0,"data-svelte-h":!0}),Ge(lt)!=="svelte-z0xj81"&&(lt.innerHTML=bt),this.h()},h(){p(g,"id","imageInput"),p(g,"type","file"),p(g,"accept","image/*;capture=camera"),p(y,"class","mb-3"),p(q,"id","imgChosen"),p(q,"class","img-fluid"),Kr(q.src,X=URL.createObjectURL(i[8]))||p(q,"src",X),p(q,"alt","Your chosen receipt"),p(N,"class","img-scan d-flex col-md-6 col-sm-12"),p(D,"for","rDesc"),p(D,"class","form-label"),p(ne,"class","form-control"),p(ne,"list","descOptions"),p(ne,"id","rDesc"),p(ne,"name","rDesc"),p(ne,"placeholder","Double-click for suggestions"),p(ee,"id","descOptions"),p(S,"class","mb-3"),p(ke,"for","rDate"),p(ke,"class","form-label"),p(ge,"class","mb-3"),p(ue,"for","rVal"),p(ue,"class","form-label"),p(F,"class","form-control"),p(F,"list","valOptions"),p(F,"id","rVal"),p(F,"name","rVal"),p(F,"type","number"),p(F,"step","0.01"),p(F,"placeholder","Double-click for suggestions"),p(me,"id","valOptions"),p(Le,"class","mb-3"),p(Ce,"for","rType"),p(Ce,"class","form-label"),ye.__value="--Please choose type--",ot(ye,ye.__value),p(Ie,"id","rType"),p(Ie,"class","form-control"),i[7]===void 0&&Vn(()=>i[16].call(Ie)),p(Y,"class","mb-3"),p(xe,"for","rCurrency"),p(xe,"class","form-label"),p(Se,"id","rCurrency"),p(Se,"class","form-control"),i[4]===void 0&&Vn(()=>i[17].call(Se)),p(Ee,"class","mb-3"),p(He,"type","button"),p(He,"class","btn btn-primary"),p(yt,"href",pt="#/trip/"+i[0].tripId),p(yt,"class","btn btn-outline-primary"),p(fe,"class","gap-3 d-grid d-md-block"),p(x,"class","d-flex flex-column col-md-6 col-sm-12"),p(k,"id","receiptEntry"),Ct(k,"show",i[9]),p(lt,"class","flex-column hide"),Ct(lt,"show",!i[9]&&i[8])},m($,ze){pe($,e,ze),h(e,n),h(e,l),h(e,c),pe($,u,ze),It.m($,ze),pe($,m,ze),pe($,y,ze),h(y,g),pe($,v,ze),pe($,k,ze),h(k,N),h(N,q),h(k,W),h(k,x),h(x,S),h(S,D),h(S,I),h(S,ne),ot(ne,i[5]),h(S,te),h(S,ee);for(let Me=0;Me<Fe.length;Me+=1)Fe[Me]&&Fe[Me].m(ee,null);h(x,ie),h(x,ge),h(ge,ke),h(ge,be),qt(le,ge,null),h(x,Re),h(x,Le),h(Le,ue),h(Le,O),h(Le,F),ot(F,i[6]),h(Le,Q),h(Le,me);for(let Me=0;Me<De.length;Me+=1)De[Me]&&De[Me].m(me,null);h(x,w),h(x,Y),h(Y,Ce),h(Y,qe),h(Y,Ie),h(Ie,ye);for(let Me=0;Me<wt.length;Me+=1)wt[Me]&&wt[Me].m(Ie,null);Jt(Ie,i[7],!0),h(x,ce),h(x,Ee),h(Ee,xe),h(Ee,L),h(Ee,Se);for(let Me=0;Me<de.length;Me+=1)de[Me]&&de[Me].m(Se,null);Jt(Se,i[4],!0),h(x,we),h(x,fe),h(fe,He),h(fe,_t),h(fe,yt),h(yt,ct),pe($,At,ze),pe($,lt,ze),Je=!0,Xt||(vn=[Ye(g,"change",i[11]),Ye(ne,"input",i[13]),Ye(F,"input",i[15]),Ye(Ie,"change",i[16]),Ye(Se,"change",i[17]),Ye(He,"click",i[10])],Xt=!0)},p($,ze){if((!Je||ze[0]&1)&&r!==(r=$[0].description+"")&&Xe(l,r),Rt!==(Rt=Qt($))&&(It.d(1),It=Rt($),It&&(It.c(),It.m(m.parentNode,m))),(!Je||ze[0]&256&&!Kr(q.src,X=URL.createObjectURL($[8])))&&p(q,"src",X),ze[0]&32&&ne.value!==$[5]&&ot(ne,$[5]),ze[0]&2){st=Ze($[1]);let Pe;for(Pe=0;Pe<st.length;Pe+=1){const vt=ko($,st,Pe);Fe[Pe]?Fe[Pe].p(vt,ze):(Fe[Pe]=Do(vt),Fe[Pe].c(),Fe[Pe].m(ee,null))}for(;Pe<Fe.length;Pe+=1)Fe[Pe].d(1);Fe.length=st.length}const Me={};if(!_e&&ze[0]&8&&(_e=!0,Me.value=$[3],In(()=>_e=!1)),le.$set(Me),ze[0]&64&&zr(F.value)!==$[6]&&ot(F,$[6]),ze[0]&4){ht=Ze($[2]);let Pe;for(Pe=0;Pe<ht.length;Pe+=1){const vt=wo($,ht,Pe);De[Pe]?De[Pe].p(vt,ze):(De[Pe]=So(vt),De[Pe].c(),De[Pe].m(me,null))}for(;Pe<De.length;Pe+=1)De[Pe].d(1);De.length=ht.length}if(ze&0){mt=Ze(Object.values(dr));let Pe;for(Pe=0;Pe<mt.length;Pe+=1){const vt=bo($,mt,Pe);wt[Pe]?wt[Pe].p(vt,ze):(wt[Pe]=To(vt),wt[Pe].c(),wt[Pe].m(Ie,null))}for(;Pe<wt.length;Pe+=1)wt[Pe].d(1);wt.length=mt.length}if(ze[0]&128&&Jt(Ie,$[7]),ze&0){gt=Ze(Object.keys(St));let Pe;for(Pe=0;Pe<gt.length;Pe+=1){const vt=yo($,gt,Pe);de[Pe]?de[Pe].p(vt,ze):(de[Pe]=Co(vt),de[Pe].c(),de[Pe].m(Se,null))}for(;Pe<de.length;Pe+=1)de[Pe].d(1);de.length=gt.length}ze[0]&16&&Jt(Se,$[4]),(!Je||ze[0]&1&&pt!==(pt="#/trip/"+$[0].tripId))&&p(yt,"href",pt),(!Je||ze[0]&512)&&Ct(k,"show",$[9]),(!Je||ze[0]&768)&&Ct(lt,"show",!$[9]&&$[8])},i($){Je||(rt(le.$$.fragment,$),Je=!0)},o($){ut(le.$$.fragment,$),Je=!1},d($){$&&(b(e),b(u),b(m),b(y),b(v),b(k),b(At),b(lt)),It.d($),Mt(Fe,$),xt(le),Mt(De,$),Mt(wt,$),Mt(de,$),Xt=!1,kn(vn)}}}function Yu(i){let e,n="Choose image to begin";return{c(){e=T("p"),e.textContent=n},l(r){e=C(r,"P",{"data-svelte-h":!0}),Ge(e)!=="svelte-1rdbglw"&&(e.textContent=n)},m(r,l){pe(r,e,l)},d(r){r&&b(e)}}}function Zu(i){let e,n="'Choose file' to start again";return{c(){e=T("p"),e.textContent=n},l(r){e=C(r,"P",{"data-svelte-h":!0}),Ge(e)!=="svelte-ffknqs"&&(e.textContent=n)},m(r,l){pe(r,e,l)},d(r){r&&b(e)}}}function Do(i){let e,n;return{c(){e=T("option"),this.h()},l(r){e=C(r,"OPTION",{}),z(e).forEach(b),this.h()},h(){e.__value=n=i[30],ot(e,e.__value)},m(r,l){pe(r,e,l)},p(r,l){l[0]&2&&n!==(n=r[30])&&(e.__value=n,ot(e,e.__value))},d(r){r&&b(e)}}}function So(i){let e,n=i[27]+"",r,l;return{c(){e=T("option"),r=Ne(n),this.h()},l(c){e=C(c,"OPTION",{});var u=z(e);r=Be(u,n),u.forEach(b),this.h()},h(){e.__value=l=i[27],ot(e,e.__value)},m(c,u){pe(c,e,u),h(e,r)},p(c,u){u[0]&4&&n!==(n=c[27]+"")&&Xe(r,n),u[0]&4&&l!==(l=c[27])&&(e.__value=l,ot(e,e.__value))},d(c){c&&b(e)}}}function To(i){let e,n=i[24]+"",r;return{c(){e=T("option"),r=Ne(n),this.h()},l(l){e=C(l,"OPTION",{});var c=z(e);r=Be(c,n),c.forEach(b),this.h()},h(){e.__value=i[24],ot(e,e.__value)},m(l,c){pe(l,e,c),h(e,r)},p:Dt,d(l){l&&b(e)}}}function Co(i){let e,n=i[21]+"",r,l,c=St[i[21]].symbol+"",u,m;return{c(){e=T("option"),r=Ne(n),l=Ne(" ("),u=Ne(c),m=Ne(`)
                `),this.h()},l(y){e=C(y,"OPTION",{});var g=z(e);r=Be(g,n),l=Be(g," ("),u=Be(g,c),m=Be(g,`)
                `),g.forEach(b),this.h()},h(){e.__value=i[21],ot(e,e.__value)},m(y,g){pe(y,e,g),h(e,r),h(e,l),h(e,u),h(e,m)},p:Dt,d(y){y&&b(e)}}}function Ju(i){let e,n,r=i[0]&&Eo(i);return{c(){e=T("div"),r&&r.c(),this.h()},l(l){e=C(l,"DIV",{class:!0});var c=z(e);r&&r.l(c),c.forEach(b),this.h()},h(){p(e,"class","w-100")},m(l,c){pe(l,e,c),r&&r.m(e,null),n=!0},p(l,c){l[0]?r?(r.p(l,c),c[0]&1&&rt(r,1)):(r=Eo(l),r.c(),rt(r,1),r.m(e,null)):r&&(Un(),ut(r,1,1,()=>{r=null}),qn())},i(l){n||(rt(r),n=!0)},o(l){ut(r),n=!1},d(l){l&&b(e),r&&r.d()}}}function Qu(i,e,n){let{receiptId:r}=e,l,c=[],u=[],m=new Date,y,g,v,k,N,q,X,W=!1;r>-1&&Bt.receipts.get(r).then(ie=>{n(0,l=ie),n(3,m=new Date(l.receiptDateString)),n(4,y=l.currency),n(5,g=l.description),n(6,v=l.total),n(7,k=l.receiptType),n(8,N=l.imageData),n(9,W=!0)});async function x(){let ie=document.getElementById("imgChosen");X=ie.naturalWidth,q=ie.naturalHeight,await Bt.receipts.update(l.id,{description:g,currency:y,receiptDate:m,receiptDateString:m.toDateString(),receiptType:k,total:v,tripId:l.tripId,imageData:N,imageHeight:q,imageWidth:X}),window.location.href="#/trip/"+l.tripId}async function S(ie){var ge=await el.recognize(ie,"eng");return ge.data.lines}async function D(ie){n(1,c=[]),n(2,u=[]),n(9,W=!1);var ge=ie.target.files[0];n(8,N=ge);var ke=URL.createObjectURL(ge),Oe=await S(ke);for(let be of Oe){if(be.confidence<40)continue;c.push(be.text);let le=gn(be.text);le.value>0&&u.push(le.format({symbol:"",separator:""}))}n(1,c),n(2,u=u.reverse()),n(9,W=!0)}function se(){g=this.value,n(5,g)}function I(ie){m=ie,n(3,m)}function ne(){v=zr(this.value),n(6,v)}function te(){k=Gn(this),n(7,k)}function ee(){y=Gn(this),n(4,y)}return i.$$set=ie=>{"receiptId"in ie&&n(12,r=ie.receiptId)},[l,c,u,m,y,g,v,k,N,W,x,D,r,se,I,ne,te,ee]}class $u extends ln{constructor(e){super(),sn(this,e,Qu,Ju,rn,{receiptId:12},null,[-1,-1])}}function Xu(i){let e,n="<h1>Welcome!</h1> <p>Create a trip using the button at the top</p> <p>Or add receipts by selecting a trip</p>";return{c(){e=T("div"),e.innerHTML=n},l(r){e=C(r,"DIV",{"data-svelte-h":!0}),Ge(e)!=="svelte-klyxeq"&&(e.innerHTML=n)},m(r,l){pe(r,e,l)},p:Dt,i:Dt,o:Dt,d(r){r&&b(e)}}}class ec extends ln{constructor(e){super(),sn(this,e,null,Xu,rn,{})}}function Ao(i,e,n){const r=i.slice();return r[6]=e[n],r}function Oo(i,e,n){const r=i.slice();return r[9]=e[n],r}function Po(i,e,n){const r=i.slice();return r[6]=e[n],r}function Ci(i){const e=i.slice(),n=Array.from(new Set(e[2].map(r=>r.currency)));return e[5]=n,e}function Io(i){let e,n=i[0].name+"",r,l,c,u=i[0].startDateString+"",m,y,g=i[0].endDateString+"",v,k,N,q="Receipt Summary",X,W,x=i[2]&&Lo(Ci(i));return{c(){e=T("h1"),r=Ne(n),l=ae(),c=T("h4"),m=Ne(u),y=Ne(" - "),v=Ne(g),k=ae(),N=T("h5"),N.textContent=q,X=ae(),x&&x.c(),W=Ft()},l(S){e=C(S,"H1",{});var D=z(e);r=Be(D,n),D.forEach(b),l=oe(S),c=C(S,"H4",{});var se=z(c);m=Be(se,u),y=Be(se," - "),v=Be(se,g),se.forEach(b),k=oe(S),N=C(S,"H5",{"data-svelte-h":!0}),Ge(N)!=="svelte-1hbjnf6"&&(N.textContent=q),X=oe(S),x&&x.l(S),W=Ft()},m(S,D){pe(S,e,D),h(e,r),pe(S,l,D),pe(S,c,D),h(c,m),h(c,y),h(c,v),pe(S,k,D),pe(S,N,D),pe(S,X,D),x&&x.m(S,D),pe(S,W,D)},p(S,D){D&1&&n!==(n=S[0].name+"")&&Xe(r,n),D&1&&u!==(u=S[0].startDateString+"")&&Xe(m,u),D&1&&g!==(g=S[0].endDateString+"")&&Xe(v,g),S[2]?x?x.p(Ci(S),D):(x=Lo(Ci(S)),x.c(),x.m(W.parentNode,W)):x&&(x.d(1),x=null)},d(S){S&&(b(e),b(l),b(c),b(k),b(N),b(X),b(W)),x&&x.d(S)}}}function Lo(i){let e,n,r="<tr><th>Receipt Description</th> <th>Receipt Date</th> <th>Receipt Type</th> <th>Receipt Total</th></tr>",l,c,u=[],m=new Map,y,g,v,k,N,q,X,W,x="<strong>Total</strong>",S,D,se,I,ne,te=[],ee=new Map,ie,ge,ke=`// Wait for images to render before printing
        var imgs = document.images,
        len = imgs.length,
        counter = 0;

        [].forEach.call( imgs, function( img ) {
            if(img.complete)
              incrementCounter();
            else
              img.addEventListener( 'load', incrementCounter, false );
        } );

        function incrementCounter() {
            counter++;
            if ( counter === len ) {
              window.print();
            }
        }`,Oe=Ze(i[2]);const be=ue=>ue[6].id;for(let ue=0;ue<Oe.length;ue+=1){let Te=Po(i,Oe,ue),O=be(Te);m.set(O,u[ue]=Mo(O,Te))}let le=Ze(i[5]),_e=[];for(let ue=0;ue<le.length;ue+=1)_e[ue]=Ro(Oo(i,le,ue));let Re=Ze(i[2]);const Le=ue=>ue[6].id;for(let ue=0;ue<Re.length;ue+=1){let Te=Ao(i,Re,ue),O=Le(Te);ee.set(O,te[ue]=No(O,Te))}return{c(){e=T("table"),n=T("thead"),n.innerHTML=r,l=ae(),c=T("tbody");for(let ue=0;ue<u.length;ue+=1)u[ue].c();y=ae(),g=T("tfoot"),v=T("tr"),k=T("td"),N=ae(),q=T("td"),X=ae(),W=T("td"),W.innerHTML=x,S=ae(),D=T("td");for(let ue=0;ue<_e.length;ue+=1)_e[ue].c();se=ae(),I=T("td"),ne=ae();for(let ue=0;ue<te.length;ue+=1)te[ue].c();ie=ae(),ge=T("script"),ge.textContent=ke,this.h()},l(ue){e=C(ue,"TABLE",{class:!0});var Te=z(e);n=C(Te,"THEAD",{"data-svelte-h":!0}),Ge(n)!=="svelte-1yqevk1"&&(n.innerHTML=r),l=oe(Te),c=C(Te,"TBODY",{});var O=z(c);for(let w=0;w<u.length;w+=1)u[w].l(O);O.forEach(b),y=oe(Te),g=C(Te,"TFOOT",{class:!0});var F=z(g);v=C(F,"TR",{});var Q=z(v);k=C(Q,"TD",{}),z(k).forEach(b),N=oe(Q),q=C(Q,"TD",{}),z(q).forEach(b),X=oe(Q),W=C(Q,"TD",{class:!0,"data-svelte-h":!0}),Ge(W)!=="svelte-14afisz"&&(W.innerHTML=x),S=oe(Q),D=C(Q,"TD",{});var me=z(D);for(let w=0;w<_e.length;w+=1)_e[w].l(me);me.forEach(b),se=oe(Q),I=C(Q,"TD",{}),z(I).forEach(b),Q.forEach(b),F.forEach(b),Te.forEach(b),ne=oe(ue);for(let w=0;w<te.length;w+=1)te[w].l(ue);ie=oe(ue),ge=C(ue,"SCRIPT",{"data-svelte-h":!0}),Ge(ge)!=="svelte-tktxvg"&&(ge.textContent=ke),this.h()},h(){p(W,"class","text-end"),p(g,"class","table-group-divider"),p(e,"class","table table-striped table-hover")},m(ue,Te){pe(ue,e,Te),h(e,n),h(e,l),h(e,c);for(let O=0;O<u.length;O+=1)u[O]&&u[O].m(c,null);h(e,y),h(e,g),h(g,v),h(v,k),h(v,N),h(v,q),h(v,X),h(v,W),h(v,S),h(v,D);for(let O=0;O<_e.length;O+=1)_e[O]&&_e[O].m(D,null);h(v,se),h(v,I),pe(ue,ne,Te);for(let O=0;O<te.length;O+=1)te[O]&&te[O].m(ue,Te);pe(ue,ie,Te),pe(ue,ge,Te)},p(ue,Te){if(Te&4&&(Oe=Ze(ue[2]),u=jr(u,Te,be,1,ue,Oe,m,c,Fr,Mo,null,Po)),Te&4){le=Ze(ue[5]);let O;for(O=0;O<le.length;O+=1){const F=Oo(ue,le,O);_e[O]?_e[O].p(F,Te):(_e[O]=Ro(F),_e[O].c(),_e[O].m(D,null))}for(;O<_e.length;O+=1)_e[O].d(1);_e.length=le.length}Te&4&&(Re=Ze(ue[2]),te=jr(te,Te,Le,1,ue,Re,ee,ie.parentNode,Fr,No,ie,Ao))},d(ue){ue&&(b(e),b(ne),b(ie),b(ge));for(let Te=0;Te<u.length;Te+=1)u[Te].d();Mt(_e,ue);for(let Te=0;Te<te.length;Te+=1)te[Te].d(ue)}}}function Mo(i,e){let n,r,l=e[6].description+"",c,u,m,y=e[6].receiptDateString+"",g,v,k,N=e[6].receiptType+"",q,X,W,x=St[e[6].currency].symbol+"",S,D,se=e[6].total.toFixed(2)+"",I,ne;return{key:i,first:null,c(){n=T("tr"),r=T("td"),c=Ne(l),u=ae(),m=T("td"),g=Ne(y),v=ae(),k=T("td"),q=Ne(N),X=ae(),W=T("td"),S=Ne(x),D=ae(),I=Ne(se),ne=ae(),this.h()},l(te){n=C(te,"TR",{});var ee=z(n);r=C(ee,"TD",{});var ie=z(r);c=Be(ie,l),ie.forEach(b),u=oe(ee),m=C(ee,"TD",{});var ge=z(m);g=Be(ge,y),ge.forEach(b),v=oe(ee),k=C(ee,"TD",{});var ke=z(k);q=Be(ke,N),ke.forEach(b),X=oe(ee),W=C(ee,"TD",{});var Oe=z(W);S=Be(Oe,x),D=oe(Oe),I=Be(Oe,se),Oe.forEach(b),ne=oe(ee),ee.forEach(b),this.h()},h(){this.first=n},m(te,ee){pe(te,n,ee),h(n,r),h(r,c),h(n,u),h(n,m),h(m,g),h(n,v),h(n,k),h(k,q),h(n,X),h(n,W),h(W,S),h(W,D),h(W,I),h(n,ne)},p(te,ee){e=te,ee&4&&l!==(l=e[6].description+"")&&Xe(c,l),ee&4&&y!==(y=e[6].receiptDateString+"")&&Xe(g,y),ee&4&&N!==(N=e[6].receiptType+"")&&Xe(q,N),ee&4&&x!==(x=St[e[6].currency].symbol+"")&&Xe(S,x),ee&4&&se!==(se=e[6].total.toFixed(2)+"")&&Xe(I,se)},d(te){te&&b(n)}}}function Ro(i){let e=St[i[9]].symbol+"",n,r,l=i[2].filter(y).reduce(Bo,0).toFixed(2)+"",c,u,m;function y(...g){return i[4](i[9],...g)}return{c(){n=Ne(e),r=ae(),c=Ne(l),u=ae(),m=T("br")},l(g){n=Be(g,e),r=oe(g),c=Be(g,l),u=oe(g),m=C(g,"BR",{})},m(g,v){pe(g,n,v),pe(g,r,v),pe(g,c,v),pe(g,u,v),pe(g,m,v)},p(g,v){i=g,v&4&&e!==(e=St[i[9]].symbol+"")&&Xe(n,e),v&4&&l!==(l=i[2].filter(y).reduce(Bo,0).toFixed(2)+"")&&Xe(c,l)},d(g){g&&(b(n),b(r),b(c),b(u),b(m))}}}function No(i,e){let n,r=e[6].description+"",l,c,u,m=St[e[6].currency].symbol+"",y,g,v=e[6].total.toFixed(2)+"",k,N,q,X,W;return{key:i,first:null,c(){n=T("div"),l=Ne(r),c=ae(),u=T("strong"),y=Ne(m),g=ae(),k=Ne(v),N=ae(),q=T("img"),this.h()},l(x){n=C(x,"DIV",{class:!0});var S=z(n);l=Be(S,r),c=oe(S),u=C(S,"STRONG",{});var D=z(u);y=Be(D,m),g=oe(D),k=Be(D,v),D.forEach(b),S.forEach(b),N=oe(x),q=C(x,"IMG",{class:!0,alt:!0,src:!0}),this.h()},h(){p(n,"class","page-print mb-2"),p(q,"class","img-print"),p(q,"alt",X="receipt with description '"+e[6].description+"'"),Kr(q.src,W=URL.createObjectURL(e[6].imageData))||p(q,"src",W),this.first=n},m(x,S){pe(x,n,S),h(n,l),h(n,c),h(n,u),h(u,y),h(u,g),h(u,k),pe(x,N,S),pe(x,q,S)},p(x,S){e=x,S&4&&r!==(r=e[6].description+"")&&Xe(l,r),S&4&&m!==(m=St[e[6].currency].symbol+"")&&Xe(y,m),S&4&&v!==(v=e[6].total.toFixed(2)+"")&&Xe(k,v),S&4&&X!==(X="receipt with description '"+e[6].description+"'")&&p(q,"alt",X),S&4&&!Kr(q.src,W=URL.createObjectURL(e[6].imageData))&&p(q,"src",W)},d(x){x&&(b(n),b(N),b(q))}}}function tc(i){let e,n=i[0]&&Io(i);return{c(){e=T("div"),n&&n.c()},l(r){e=C(r,"DIV",{});var l=z(e);n&&n.l(l),l.forEach(b)},m(r,l){pe(r,e,l),n&&n.m(e,null)},p(r,[l]){r[0]?n?n.p(r,l):(n=Io(r),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},i:Dt,o:Dt,d(r){r&&b(e),n&&n.d()}}}const Bo=(i,e)=>i+e.total;function nc(i,e,n){let r,l=Dt,c=()=>(l(),l=ur(y,v=>n(2,r=v)),y);i.$$.on_destroy.push(()=>l());let{tripId:u=-1}=e,m,y;u>-1&&Bt.trips.get(u).then(v=>{n(0,m=v),c(n(1,y=xr(()=>Bt.receipts.where({tripId:u}).reverse().sortBy("receiptDate"))))});const g=(v,k)=>k.currency==v;return i.$$set=v=>{"tripId"in v&&n(3,u=v.tripId)},[m,y,r,u,g]}class rc extends ln{constructor(e){super(),sn(this,e,nc,tc,rn,{tripId:3})}}function ic(i){let e,n,r,l="Trippin'",c,u,m,y=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-list-ul" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m-3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2m0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2m0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2"></path></svg>
			My Trips`,g,v,k="+ Add Trip",N,q,X,W='<span class="fs-5 fw-bold text-light">Trippin&#39;</span> <a class="btn btn-outline-light" href="#/add">+ Add Trip</a>',x,S,D,se,I,ne,te,ee,ie,ge;D=new vs({props:{tripId:i[3]}});const ke=[fc,cc,uc,sc,lc,oc],Oe=[];function be(le,_e){return le[4]==="add"?0:le[4]==="trip"&&le[3]>-1?1:le[4]==="update"&&le[3]>-1?2:le[4]==="addreceipt"&&le[3]>-1?3:le[4]==="editreceipt"&&le[3]>-1?4:5}return ne=be(i),te=Oe[ne]=ke[ne](i),{c(){e=T("main"),n=T("div"),r=T("span"),r.textContent=l,c=ae(),u=T("span"),m=T("button"),m.innerHTML=y,g=ae(),v=T("a"),v.textContent=k,N=ae(),q=T("div"),X=T("div"),X.innerHTML=W,x=ae(),S=T("div"),Vt(D.$$.fragment),se=ae(),I=T("div"),te.c(),this.h()},l(le){e=C(le,"MAIN",{class:!0});var _e=z(e);n=C(_e,"DIV",{class:!0});var Re=z(n);r=C(Re,"SPAN",{class:!0,"data-svelte-h":!0}),Ge(r)!=="svelte-tkg15k"&&(r.textContent=l),c=oe(Re),u=C(Re,"SPAN",{});var Le=z(u);m=C(Le,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),Ge(m)!=="svelte-1772n1h"&&(m.innerHTML=y),g=oe(Le),v=C(Le,"A",{class:!0,href:!0,"data-svelte-h":!0}),Ge(v)!=="svelte-pnsmw9"&&(v.textContent=k),Le.forEach(b),Re.forEach(b),N=oe(_e),q=C(_e,"DIV",{class:!0});var ue=z(q);X=C(ue,"DIV",{class:!0,"data-svelte-h":!0}),Ge(X)!=="svelte-5pi3yv"&&(X.innerHTML=W),x=oe(ue),S=C(ue,"DIV",{class:!0,id:!0});var Te=z(S);Ut(D.$$.fragment,Te),Te.forEach(b),ue.forEach(b),se=oe(_e),I=C(_e,"DIV",{class:!0,id:!0});var O=z(I);te.l(O),O.forEach(b),_e.forEach(b),this.h()},h(){p(r,"class","fs-5 fw-bold text-light"),p(m,"class","btn btn-outline-light"),p(m,"type","button"),p(v,"class","btn btn-outline-light"),p(v,"href","#/add"),p(n,"class","listTitle listTitleSmall d-flex align-items-center justify-content-between flex-shrink-0 p-3 link-body-emphasis text-decoration-none border-bottom"),p(X,"class","listTitle listTitleLarge d-flex align-items-center justify-content-between flex-shrink-0 p-3 link-body-emphasis text-decoration-none border-bottom"),p(S,"class","list-group list-group-flush border-bottom scrollarea d-none"),p(S,"id","tripToggle"),p(q,"class","tripList d-flex flex-column align-items-stretch flex-shrink-0 bg-body-tertiary"),p(I,"class","d-flex p-3 w-100"),p(I,"id","mainPane"),p(e,"class","d-flex flex-nowrap")},m(le,_e){pe(le,e,_e),h(e,n),h(n,r),h(n,c),h(n,u),h(u,m),h(u,g),h(u,v),h(e,N),h(e,q),h(q,X),h(q,x),h(q,S),qt(D,S,null),h(e,se),h(e,I),Oe[ne].m(I,null),ee=!0,ie||(ge=Ye(m,"click",Yo),ie=!0)},p(le,_e){const Re={};_e&8&&(Re.tripId=le[3]),D.$set(Re);let Le=ne;ne=be(le),ne===Le?Oe[ne].p(le,_e):(Un(),ut(Oe[Le],1,1,()=>{Oe[Le]=null}),qn(),te=Oe[ne],te?te.p(le,_e):(te=Oe[ne]=ke[ne](le),te.c()),rt(te,1),te.m(I,null))},i(le){ee||(rt(D.$$.fragment,le),rt(te),ee=!0)},o(le){ut(D.$$.fragment,le),ut(te),ee=!1},d(le){le&&b(e),xt(D),Oe[ne].d(),ie=!1,ge()}}}function ac(i){let e,n;return e=new rc({props:{tripId:i[3]}}),{c(){Vt(e.$$.fragment)},l(r){Ut(e.$$.fragment,r)},m(r,l){qt(e,r,l),n=!0},p(r,l){const c={};l&8&&(c.tripId=r[3]),e.$set(c)},i(r){n||(rt(e.$$.fragment,r),n=!0)},o(r){ut(e.$$.fragment,r),n=!1},d(r){xt(e,r)}}}function oc(i){let e,n;return e=new ec({}),{c(){Vt(e.$$.fragment)},l(r){Ut(e.$$.fragment,r)},m(r,l){qt(e,r,l),n=!0},p:Dt,i(r){n||(rt(e.$$.fragment,r),n=!0)},o(r){ut(e.$$.fragment,r),n=!1},d(r){xt(e,r)}}}function lc(i){let e,n;return e=new $u({props:{receiptId:i[5]}}),{c(){Vt(e.$$.fragment)},l(r){Ut(e.$$.fragment,r)},m(r,l){qt(e,r,l),n=!0},p(r,l){const c={};l&32&&(c.receiptId=r[5]),e.$set(c)},i(r){n||(rt(e.$$.fragment,r),n=!0)},o(r){ut(e.$$.fragment,r),n=!1},d(r){xt(e,r)}}}function sc(i){let e,n;return e=new Gu({props:{tripId:i[3]}}),{c(){Vt(e.$$.fragment)},l(r){Ut(e.$$.fragment,r)},m(r,l){qt(e,r,l),n=!0},p(r,l){const c={};l&8&&(c.tripId=r[3]),e.$set(c)},i(r){n||(rt(e.$$.fragment,r),n=!0)},o(r){ut(e.$$.fragment,r),n=!1},d(r){xt(e,r)}}}function uc(i){let e,n;return e=new bs({props:{tripId:i[3]}}),{c(){Vt(e.$$.fragment)},l(r){Ut(e.$$.fragment,r)},m(r,l){qt(e,r,l),n=!0},p(r,l){const c={};l&8&&(c.tripId=r[3]),e.$set(c)},i(r){n||(rt(e.$$.fragment,r),n=!0)},o(r){ut(e.$$.fragment,r),n=!1},d(r){xt(e,r)}}}function cc(i){let e=i[3],n,r,l=Ko(i);return{c(){l.c(),n=Ft()},l(c){l.l(c),n=Ft()},m(c,u){l.m(c,u),pe(c,n,u),r=!0},p(c,u){u&8&&rn(e,e=c[3])?(Un(),ut(l,1,1,Dt),qn(),l=Ko(c),l.c(),rt(l,1),l.m(n.parentNode,n)):l.p(c,u)},i(c){r||(rt(l),r=!0)},o(c){ut(l),r=!1},d(c){c&&b(n),l.d(c)}}}function fc(i){let e,n;return e=new $l({}),{c(){Vt(e.$$.fragment)},l(r){Ut(e.$$.fragment,r)},m(r,l){qt(e,r,l),n=!0},p:Dt,i(r){n||(rt(e.$$.fragment,r),n=!0)},o(r){ut(e.$$.fragment,r),n=!1},d(r){xt(e,r)}}}function Ko(i){let e,n;return e=new ps({props:{tripId:i[3]}}),{c(){Vt(e.$$.fragment)},l(r){Ut(e.$$.fragment,r)},m(r,l){qt(e,r,l),n=!0},p(r,l){const c={};l&8&&(c.tripId=r[3]),e.$set(c)},i(r){n||(rt(e.$$.fragment,r),n=!0)},o(r){ut(e.$$.fragment,r),n=!1},d(r){xt(e,r)}}}function dc(i){let e,n,r,l;const c=[ac,ic],u=[];function m(y,g){return y[4]==="print"&&y[3]>-1?0:1}return e=m(i),n=u[e]=c[e](i),{c(){n.c(),r=Ft()},l(y){n.l(y),r=Ft()},m(y,g){u[e].m(y,g),pe(y,r,g),l=!0},p(y,[g]){let v=e;e=m(y),e===v?u[e].p(y,g):(Un(),ut(u[v],1,1,()=>{u[v]=null}),qn(),n=u[e],n?n.p(y,g):(n=u[e]=c[e](y),n.c()),rt(n,1),n.m(r.parentNode,r))},i(y){l||(rt(n),l=!0)},o(y){ut(n),l=!1},d(y){y&&b(r),u[e].d(y)}}}function hc(i,e,n){let r,l,c,u,m,y=Dt,g=()=>(y(),y=ur(r,se=>n(3,m=se)),r),v,k=Dt,N=()=>(k(),k=ur(c,se=>n(4,v=se)),c),q,X=Dt,W=()=>(X(),X=ur(l,se=>n(5,q=se)),l),x;cr(i,Ol,se=>n(6,x=se)),i.$$.on_destroy.push(()=>y()),i.$$.on_destroy.push(()=>k()),i.$$.on_destroy.push(()=>X());const S=new RegExp("#/(?<route>[a-z]+)(?<tripId>/[0-9]+|$)");function D(){u?(ar(c,v=u.groups.route||"",v),v=="editreceipt"?ar(l,q=parseInt(u.groups.tripId.replace("/","")||"-1"),q):ar(r,m=parseInt(u.groups.tripId.replace("/","")||"-1"),m)):(ar(c,v="",v),ar(r,m=-1,m))}return Tl(()=>{D()}),i.$$.update=()=>{i.$$.dirty&64&&(u=S.exec(x.url.hash))},g(n(2,r=Mr(-1))),W(n(1,l=Mr(-1))),N(n(0,c=Mr(""))),[c,l,r,m,v,q,x]}class pc extends ln{constructor(e){super(),sn(this,e,hc,dc,rn,{})}}function mc(i){let e,n,r;return n=new pc({}),{c(){e=ae(),Vt(n.$$.fragment),this.h()},l(l){Cl("svelte-1mxz4jk",document.head).forEach(b),e=oe(l),Ut(n.$$.fragment,l),this.h()},h(){document.title="Trippin'"},m(l,c){pe(l,e,c),qt(n,l,c),r=!0},p:Dt,i(l){r||(rt(n.$$.fragment,l),r=!0)},o(l){ut(n.$$.fragment,l),r=!1},d(l){l&&b(e),xt(n,l)}}}class Ic extends ln{constructor(e){super(),sn(this,e,null,mc,rn,{})}}export{Ic as component};
